#!/usr/bin/env bun
// @bun
import{createRequire as d9}from"node:module";var v9=Object.create;var{getPrototypeOf:m9,defineProperty:f1,getOwnPropertyNames:f9}=Object;var g9=Object.prototype.hasOwnProperty;var u9=($,Y,K)=>{K=$!=null?v9(m9($)):{};const Z=Y||!$||!$.__esModule?f1(K,"default",{value:$,enumerable:!0}):K;for(let G of f9($))if(!g9.call(Z,G))f1(Z,G,{get:()=>$[G],enumerable:!0});return Z};var F1=($,Y)=>()=>(Y||$((Y={exports:{}}).exports,Y),Y.exports);var j=($,Y)=>{for(var K in Y)f1($,K,{get:Y[K],enumerable:!0,configurable:!0,set:(Z)=>Y[K]=()=>Z})};var L=($,Y)=>()=>($&&(Y=$($=0)),Y);var P=d9(import.meta.url);var z;var A=L(()=>{z={cyan:(...$)=>`\x1B[36m${$.join(" ")}\x1B[0m`,red:(...$)=>`\x1B[31m${$.join(" ")}\x1B[0m`,yellow:(...$)=>`\x1B[33m${$.join(" ")}\x1B[0m`,green:(...$)=>`\x1B[32m${$.join(" ")}\x1B[0m`,blue:(...$)=>`\x1B[34m${$.join(" ")}\x1B[0m`,magenta:(...$)=>`\x1B[35m${$.join(" ")}\x1B[0m`,cyanBright:(...$)=>`\x1B[96m${$.join(" ")}\x1B[0m`,redBright:(...$)=>`\x1B[91m${$.join(" ")}\x1B[0m`,yellowBright:(...$)=>`\x1B[93m${$.join(" ")}\x1B[0m`,greenBright:(...$)=>`\x1B[92m${$.join(" ")}\x1B[0m`,blueBright:(...$)=>`\x1B[94m${$.join(" ")}\x1B[0m`,magentaBright:(...$)=>`\x1B[95m${$.join(" ")}\x1B[0m`,whiteBright:(...$)=>`\x1B[97m${$.join(" ")}\x1B[0m`,gray:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,grey:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,white:(...$)=>`\x1B[37m${$.join(" ")}\x1B[0m`,black:(...$)=>`\x1B[30m${$.join(" ")}\x1B[0m`,blackBright:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,bgCyan:(...$)=>`\x1B[46m${$.join(" ")}\x1B[0m`,bgRed:(...$)=>`\x1B[41m${$.join(" ")}\x1B[0m`,bgYellow:(...$)=>`\x1B[43m${$.join(" ")}\x1B[0m`,bgGreen:(...$)=>`\x1B[42m${$.join(" ")}\x1B[0m`,bgBlue:(...$)=>`\x1B[44m${$.join(" ")}\x1B[0m`,bgMagenta:(...$)=>`\x1B[45m${$.join(" ")}\x1B[0m`,bgCyanBright:(...$)=>`\x1B[106m${$.join(" ")}\x1B[0m`,bgRedBright:(...$)=>`\x1B[101m${$.join(" ")}\x1B[0m`,bgYellowBright:(...$)=>`\x1B[103m${$.join(" ")}\x1B[0m`,bgGreenBright:(...$)=>`\x1B[102m${$.join(" ")}\x1B[0m`,bgBlueBright:(...$)=>`\x1B[104m${$.join(" ")}\x1B[0m`,bgMagentaBright:(...$)=>`\x1B[105m${$.join(" ")}\x1B[0m`,cyanBrightBold:(...$)=>`\x1B[96m\x1B[1m${$.join(" ")}\x1B[0m`,redBrightBold:(...$)=>`\x1B[91m\x1B[1m${$.join(" ")}\x1B[0m`,yellowBrightBold:(...$)=>`\x1B[93m\x1B[1m${$.join(" ")}\x1B[0m`,greenBrightBold:(...$)=>`\x1B[92m\x1B[1m${$.join(" ")}\x1B[0m`,blueBrightBold:(...$)=>`\x1B[94m\x1B[1m${$.join(" ")}\x1B[0m`,magentaBrightBold:(...$)=>`\x1B[95m\x1B[1m${$.join(" ")}\x1B[0m`,whiteBrightBold:(...$)=>`\x1B[97m\x1B[1m${$.join(" ")}\x1B[0m`,grayBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`,greyBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`,whiteBold:(...$)=>`\x1B[37m\x1B[1m${$.join(" ")}\x1B[0m`,blackBold:(...$)=>`\x1B[30m\x1B[1m${$.join(" ")}\x1B[0m`,blackBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`}});import{stripIndent as h9}from"common-tags";function b($,...Y){return`${h9($,...Y)}\n\n`}var n=()=>{};function w0($){return $&&$.charCodeAt!==void 0}function R($){return $!==void 0&&$!==null}import l9 from"inquirer";import{stripIndent as c9}from"common-tags";async function v($,Y,K){const{result:Z}=await l9.prompt([{type:"confirm",name:"result",message:c9`${$}`,default:Y}]);if(Z)K?.();return Z}var G1=()=>{};function u1($){return $!==void 0&&$!==null}function L1($){return u1($)&&u1($.status)&&u1($.stderr)}async function M1($,Y=[]){try{const K=Bun.spawnSync([$,...Y.filter(R)],{stdio:["inherit","inherit","inherit"],env:process.env});if(K.exitCode!==0){if(!M1.silent)console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.exitCode}`),console.error(new Error().stack);return!1}}catch(K){if(!M1.silent){if(L1(K))console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.status}`);else if(K instanceof Error)console.error(K.message);console.error(new Error().stack)}return!1}return!0}var M;var C=L(()=>{M1.silent=!1;M=M1});async function k(){if(J1)return J1;if(await M("bun",["--version"]))J1=["bun","bunx"];else J1=["npm","npx"];return J1}var J1=null;var s=L(()=>{C()});async function E($){await new Promise((Y)=>setTimeout(Y,$))}import r9 from"fs-extra";import h from"path";async function a(){console.warn("Building Vite config using base:",z.yellowBrightBold(h.resolve("vite.config.ts")));let $=await(await import(h.resolve("vite.config.ts"))).default();const Y=await r9.readJSONSync(h.resolve("tsconfig.json"));return $={...$,logLevel:"info",mode:"development",root:h.resolve("app/client"),clearScreen:!0,build:{...$.build,cssCodeSplit:!0,outDir:h.resolve("build/client"),sourcemap:!0,rollupOptions:{output:{manualChunks:void 0}},watch:{...$.build?.watch,include:[...(Array.isArray($.build?.watch?.include)?$.build?.watch?.include:[$.build?.watch?.include])||[],...Y?.include?.map((K)=>h.resolve(K))||[],"tsconfig.json"].filter(Boolean)},emptyOutDir:!0},resolve:{alias:{config:h.resolve("app/config")}}},$}var b1=L(()=>{A()});import e9 from"deepmerge";import $3 from"fs-extra";import Y3 from"path";async function u(){const $=$3.readJSONSync(Y3.resolve("package.json"));return e9($.dependencies||{},$.peerDependencies||{})}var _1=()=>{};import P0 from"fs-extra";import y0 from"path";async function w(){return P0.readJSONSync(y0.resolve("package.json")).version||""}var m=()=>{};import*as v0 from"vite";import K3 from"fs-extra";import d1 from"path";async function Q1(){if(process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await w(),console.warn(z.yellowBrightBold("Starting Vite client build...")),!K3.existsSync(d1.resolve("app/client/index.ts"))){console.warn("Tried to start development process for the app client, but no entry file was found.");return}const $=await a();$.root=d1.resolve("app/client"),$.build.outDir=d1.resolve("build/client"),$.build.rollupOptions.external=Object.keys(await u()),await v0.build($),console.warn(z.yellowBrightBold("Vite client build process started..."))}var h1=L(()=>{b1();A();_1();m()});function m0($){const Y=(K)=>(Z)=>{if($(K,Z),Z)process.exit(1);else process.exit(0)};process.on("exit",Y("exit")),process.on("SIGINT",Y("SIGINT")),process.on("SIGUSR1",Y("SIGUSR1")),process.on("SIGUSR2",Y("SIGUSR2")),process.on("SIGTERM",Y("SIGTERM")),process.on("uncaughtException",Y("uncaughtException"))}function Z3(){if(f0!==null)return;f0=setInterval(()=>{while(l1.length>0){const $=l1.shift();if($)console.log(...$)}},400)}function c1(...$){l1.push($),Z3()}var l1,f0=null;var g0=L(()=>{l1=[]});import G3 from"child_process";import p1 from"path";import J3 from"readline";async function z1($){console.warn("\nRunning the App server at: ",z.yellowBrightBold(p1.resolve("app/server")),"\n"),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await w(),process.env.RESOURCE_PATH=process.env.RESOURCE_PATH||p1.resolve("build/client");const Y=await k();if(Y[0]!=="bun")console.error("Currently only an environment with bun installed is supported for this command.");const K=G3.spawn(Y[0],["--watch",p1.resolve("app/server/index.ts")]);process.stdin.setRawMode?.(!0),process.stdin.resume(),process.stdin.setEncoding("utf8"),J3.emitKeypressEvents(process.stdin);let Z=!1;if(process.stdin.on("keypress",async(G,J)=>{if(J&&J.ctrl&&J.name==="c")K.kill(),process.exit(0);else if(J&&J.ctrl&&J.name==="d")K.kill(),process.exit(0);else if(G.toString()==="b"||G.toString()==="B"){if(Z)return;Z=!0,await Q1(),Z=!1}else if(G.toString()==="q"||G.toString()==="Q")if(K.kill(),J.shift)process.exit(123);else process.exit(0)}),process.stdin.pipe(K.stdin),$)$(K);else K.stdout.on("data",function(G){c1(`${G.toString().slice(0,-1)}`)}),K.stderr.on("data",function(G){c1(`${G.toString().slice(0,-1)}`)});m0(async(G,J)=>{if(K.kill(),console.warn("EXIT BUILD SERVER"),console.warn(z.redBrightBold(G)),J&&J instanceof Error)console.warn(z.redBrightBold(J.stack||J.message));process.exit(0)})}var i1=L(()=>{h1();A();s();g0();m()});var d0={};j(d0,{default:()=>u0});async function u0(){process.env.NODE_ENV="development",Q1(),console.warn(z.yellowBrightBold("Starting dev server...")),process.env.VITE_RELEASE_VERSION=await w(),await z1()}var h0=L(()=>{h1();i1();A();m()});import t from"path";import Q3 from"url";async function l0(){if(t.basename(t.resolve(n1,".."))==="dist")return t.resolve(n1,"../../");return t.resolve(n1,"../../../")}var n1;var c0=L(()=>{n1=Q3.fileURLToPath(new URL(".",import.meta.url))});async function l($,Y=[]){const K=await k();return M(K[0],["run",$,Y.length>0&&Y[0]!=="--"?"--":void 0,...Y])}var q1=L(()=>{C();s()});var o1={};j(o1,{default:()=>p0});import s1 from"path";async function p0($,Y,...K){const Z=s1.resolve(".");process.env.PROJECT_ROOT=Z,process.env.VITE_RELEASE_VERSION=await w();const G=s1.resolve(".storybook"),J=await l0();if(process.chdir(J),Y&&Y.length>0)process.env.NODE_MODULES_STORIES=Y.join(",");if($==="build"){if(!l("storybook",["build","-c",G,"-o",`"${s1.resolve(Z,"storybook-static")}"`]))console.error(z.redBrightBold("Failed to build storybook"))}else if(!l("storybook",["dev","--no-version-updates","-p",process.env.PORT||"6006","-c",`"${G}"`]))console.error(z.redBrightBold("Failed to run storybook"))}var a1=L(()=>{A();c0();q1();m()});var r1=F1((G5,n0)=>{function z3(){try{return i0.statSync("/.dockerenv"),!0}catch($){return!1}}function X3(){try{return i0.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch($){return!1}}var i0=import.meta.require("fs"),t1;n0.exports=()=>{if(t1===void 0)t1=z3()||X3();return t1}});var a0=F1((J5,e1)=>{var W3=import.meta.require("os"),B3=import.meta.require("fs"),s0=r1(),o0=()=>{if(process.platform!=="linux")return!1;if(W3.release().toLowerCase().includes("microsoft")){if(s0())return!1;return!0}try{return B3.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!s0():!1}catch($){return!1}};if(process.env.__IS_WSL_TEST__)e1.exports=o0;else e1.exports=o0()});var r0=F1((Q5,t0)=>{t0.exports=($,Y,K)=>{const Z=(G)=>Object.defineProperty($,Y,{value:G,enumerable:!0,writable:!0});return Object.defineProperty($,Y,{configurable:!0,enumerable:!0,get(){const G=K();return Z(G),G},set(G){Z(G)}}),$}});var J$=F1((z5,G$)=>{function b3(){if($0===void 0)$0=M3()||L3();return $0}function K$($){if(typeof $==="string"||Array.isArray($))return $;const{[$$]:Y}=$;if(!Y)throw new Error(`${$$} is not supported`);return Y}function Z0({[r]:$},{wsl:Y}){if(Y&&D1)return K$(Y);if(!$)throw new Error(`${r} is not supported`);return K$($)}var __dirname="/Users/diniden/Desktop/VoidRay/dev-ops/node-devops/node_modules/open",H3=import.meta.require("path"),F3=import.meta.require("child_process"),{promises:N1,constants:Z$}=import.meta.require("fs"),D1=a0(),L3=r1(),Y0=r0(),e0=H3.join(__dirname,"xdg-open"),{platform:r,arch:$$}=process,M3=()=>{try{return N1.statSync("/run/.containerenv"),!0}catch{return!1}},$0,_3=(()=>{let Y;return async function(){if(Y)return Y;const K="/etc/wsl.conf";let Z=!1;try{await N1.access(K,Z$.F_OK),Z=!0}catch{}if(!Z)return"/mnt/";const G=await N1.readFile(K,{encoding:"utf8"}),J=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(G);if(!J)return"/mnt/";return Y=J.groups.mountPoint.trim(),Y=Y.endsWith("/")?Y:`${Y}/`,Y}})(),Y$=async($,Y)=>{let K;for(let Z of $)try{return await Y(Z)}catch(G){K=G}throw K},O1=async($)=>{if($={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...$},Array.isArray($.app))return Y$($.app,(X)=>O1({...$,app:X}));let{name:Y,arguments:K=[]}=$.app||{};if(K=[...K],Array.isArray(Y))return Y$(Y,(X)=>O1({...$,app:{name:X,arguments:K}}));let Z;const G=[],J={};if(r==="darwin"){if(Z="open",$.wait)G.push("--wait-apps");if($.background)G.push("--background");if($.newInstance)G.push("--new");if(Y)G.push("-a",Y)}else if(r==="win32"||D1&&!b3()&&!Y){const X=await _3();if(Z=D1?`${X}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,G.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),!D1)J.windowsVerbatimArguments=!0;const W=["Start"];if($.wait)W.push("-Wait");if(Y){if(W.push(`"\`"${Y}\`""`,"-ArgumentList"),$.target)K.unshift($.target)}else if($.target)W.push(`"${$.target}"`);if(K.length>0)K=K.map((F)=>`"\`"${F}\`""`),W.push(K.join(","));$.target=Buffer.from(W.join(" "),"utf16le").toString("base64")}else{if(Y)Z=Y;else{const X=!__dirname||__dirname==="/";let W=!1;try{await N1.access(e0,Z$.X_OK),W=!0}catch{}Z=process.versions.electron||r==="android"||X||!W?"xdg-open":e0}if(K.length>0)G.push(...K);if(!$.wait)J.stdio="ignore",J.detached=!0}if($.target)G.push($.target);if(r==="darwin"&&K.length>0)G.push("--args",...K);const Q=F3.spawn(Z,G,J);if($.wait)return new Promise((X,W)=>{Q.once("error",W),Q.once("close",(F)=>{if(!$.allowNonzeroExitCode&&F>0){W(new Error(`Exited with code ${F}`));return}X(Q)})});return Q.unref(),Q},K0=($,Y)=>{if(typeof $!=="string")throw new TypeError("Expected a `target`");return O1({...Y,target:$})},q3=($,Y)=>{if(typeof $!=="string")throw new TypeError("Expected a `name`");const{arguments:K=[]}=Y||{};if(K!==void 0&&K!==null&&!Array.isArray(K))throw new TypeError("Expected `appArguments` as Array type");return O1({...Y,app:{name:$,arguments:K}})},A1={};Y0(A1,"chrome",()=>Z0({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Y0(A1,"firefox",()=>Z0({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Y0(A1,"edge",()=>Z0({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));K0.apps=A1;K0.openApp=q3;G$.exports=K0});async function O($,Y=[]){try{const K=Bun.spawnSync([$,...Y.filter(R)],{stdio:["inherit","pipe","pipe"],env:process.env});if(K.exitCode!==0)return console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.exitCode}`),console.error(new Error().stack),null;return(K.stdout||"").toString()}catch(K){if(L1(K))console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.status}`);else if(K instanceof Error)console.error(K.message);return console.error(new Error().stack),null}}var c=()=>{};function Q$({template:$,options:Y,required:K,doubleCurlyBrackets:Z,onError:G,onToken:J}){const Q=new Map,X=new Map,W=new Map,F=new Map;let B=/\$\{([^\}]*)\}/g;if(Z)B=/\$\{\{([^\}]*)\}\}/g;const D=$.replace(B,(q,H)=>{let I="";if(F.set(H,(F.get(H)||0)+1),H in Y){Q.set(H,(Q.get(H)||0)+1);const A0=Y[H];if(A0!==void 0)I=A0}else X.set(H,(X.get(H)||0)+1);if(J){if(I=J(H,I),I!==H)Q.set(H,(Q.get(H)||0)+1),X.delete(H)}return I});Object.keys(Y).forEach((q)=>{if(!Q.get(q))W.set(q,(W.get(q)||0)+1)});const N={resolvedtemplateOptions:Q,template:D,templateProvidedOptions:F,unresolvedProvidedOptions:W,unresolvedTemplateOptions:X};if(K)K.values.forEach((q)=>{if(N.unresolvedProvidedOptions.get(q)){const H=`${K.name}: Could not resolve all the required inputs. Input: ${q}`;if(G)G(H);else console.error(H)}else if(N.unresolvedTemplateOptions.get(q)){const H=`${K.name}: A required option was not provided in the options parameter. Option: ${q}`;if(G)G(H);else console.error(H)}else if(!N.resolvedtemplateOptions.get(q)){const H=`${K.name}: A required option was not provided in the options parameter. Option: ${q}`;if(G)G(H);else console.error(H)}});return N}var L$={};j(L$,{default:()=>F$});import X1 from"fs-extra";import z$ from"hostile";import G0 from"path";import X$ from"valid-url";function D3($){return $&&typeof $==="function"}function W$($,Y,...K){return new Promise((Z,G)=>{const J=$[Y];if(!D3(J)){G(new Error(`${String(Y)} is not a function`));return}J(...K,(Q,X)=>{if(Q)console.warn(Q),G(Q),process.exit(1);else Z(X||void 0)})})}async function N3(){const Y=X1.readJSONSync(G0.resolve("package.json")).hosts;if(!Y)return;const K=Object.keys(Y);let Z=await W$(z$,"get",!1);const G=[];console.warn(z.yellow("Updating hosts file..."));for(let Q of K)try{if(!Z.find((X)=>X[0]===Q&&X[1]===Y[Q]))G.push([Q,Y[Q]])}catch(X){if(X instanceof Error)console.warn(z.red(X.message))}if(G.length>0){console.warn(z.yellow("Adding hosts (You may be prompted for administrator password):\n\t",G.map((X)=>`${X[0]} => ${X[1]}`).join("\n\t"))),await M("sudo",["echo","Granted sudo access to update hosts file."]);const Q=await O("stat",["-f","%p","/etc/hosts"]).toString();await M("sudo",["chmod","666","/etc/hosts"]);for(let X of G)X1.appendFileSync("/etc/hosts",`${X[0]} ${X[1]}`);X1.appendFileSync("/etc/hosts","\n"),await M("sudo",["chmod",Q.substring(Q.length-4).trim(),"/etc/hosts"])}await E(500),console.warn(z.yellow("Verifying hosts file...")),Z=await W$(z$,"get",!1);let J=!1;if(G.forEach(([Q,X])=>{if(!Z.find((W)=>W[0]===Q&&W[1]===Y[Q]))J=!0,console.warn(z.redBright(`Failed to add host: ${z.yellowBright(Q)} => ${z.yellowBright(X)}`))}),J)console.warn(z.red(b`
        *************************************************************************
        * Some hosts specified in the package.json were not able to be written  *
        * to the hosts file for the system. You can amend this by editing the   *
        * file yourself, or by trying to run this script again as an admin.     *
        *************************************************************************
      `))}function B$($,Y,K){let Z=Y;if(X$.isWebUri(Y))Z=Y;else if($[Y])Z=$[Y];const G=Q$({options:K,template:Z});if(G.unresolvedTemplateOptions.size>0)throw console.warn(z.red(b`
          You must specify these env variables for this URL to work:
          ${Array.from(G.unresolvedTemplateOptions.keys()).join("\n\t")}
        `)),new Error("Missing env configuration for URL");if(Z=G.template,X$.isWebUri(Z))console.warn("Navigating to:",z.cyanBrightBold(Z)),H$.default(Z);else console.warn("Can not open invalid URL:",z.redBrightBold(Z))}async function F$($,Y){const Z=X1.readJSONSync(G0.resolve("package.json"))?.url||{},G=Y?.reduce((Q,X,W)=>{return Q[`${W+1}`]=X,Q},{})||{};if(!$||$.length<=0){console.warn(b`
      Available URLs:
        ${z.cyanBrightBold(Object.keys(Z).join("\n        "))}
    `);return}await N3();const J={...process.env,...G};if(Array.isArray($))$.forEach((Q)=>{B$(Z,Q,J)});else B$(Z,$,J)}var H$;var M$=L(()=>{H$=u9(J$(),1);A();n();C();c()});import J0 from"child_process";async function e(){try{if(J0.execSync("git status --porcelain=v1 2>/dev/null | wc -l | grep 0",{env:process.env}),J0.execSync("git status --porcelain=v1 2>/dev/null",{encoding:"utf-8"}).trim().split("\n").filter(Boolean).length===0)return!1}catch($){return!0}return!0}var x1=()=>{};async function I1($){if($){if(!await v(`
      Would you like to return back to development?
      Runs the following:
        git fetch
        git checkout dev
        git reset --hard origin/dev
    `))return}if(await e())return console.error("Can not return to dev branch as changes are present on the current branch."),!1;let Y=!1;if(!await M("git",["fetch"]))Y=!0;if(!await M("git",["checkout","dev"]))Y=!0;if(!await M("git",["reset","--hard","origin/dev"]))Y=!0;if(Y)return console.error("Could not return to dev branch."),!1;return!0}var Q0=L(()=>{C();x1();G1()});import x from"fs-extra";import O3 from"ignore";import _ from"path";async function A3(){const $=await u();console.warn("Building full distribution...");let Y=await Bun.build({entrypoints:[_.resolve("./bin/main.ts")],target:"bun",external:Object.keys($),minify:!0,sourcemap:"inline"});for(let K of Y.outputs)console.warn("Writing bin bundle resource:",z.cyanBrightBold(K.path)),await Bun.write(_.resolve("./dist/bin",K.path),K);console.warn("Building gimped distribution..."),Y=await Bun.build({entrypoints:[_.resolve("./bin/main-gimp.ts")],target:"node",external:Object.keys($),minify:!0,sourcemap:"inline"});for(let K of Y.outputs)console.warn("Writing bin bundle resource:",z.cyanBrightBold(K.path)),await Bun.write(_.resolve("./dist/bin",K.path),K);console.warn("Copying entry cross-platform distribution..."),x.copyFileSync(_.resolve("./bin/main-entry.cjs"),_.resolve("./dist/bin/main-entry.cjs"))}async function x3(){if(!x.existsSync(_.resolve("./bin/shim")))console.error("No shim distribution files found to be built");if(x.existsSync(_.resolve("./shim")))x.removeSync(_.resolve("./shim"));const $=await u();console.warn("Building shim distribution...");const Y=await Bun.build({entrypoints:[_.resolve("./bin/shim/index.ts")],target:"node",external:Object.keys($),minify:!0});for(let Z of Y.outputs)console.warn("Writing shim bundle resource:",z.cyanBrightBold(Z.path)),await Bun.write(_.resolve("./shim/src/bin/shim",Z.path),Z);x.writeFileSync(_.resolve("./shim/index.js"),'export * from "./src/bin/shim/index.js";\n',{encoding:"utf-8"}),x.writeFileSync(_.resolve("./shim/index.d.ts"),'export * from "./src/bin/shim/index.d.ts";\n',{encoding:"utf-8"});const K=x.readJSONSync(_.resolve("tsconfig.json"));if(K.exclude=K.exclude||[],K.exclude.push("./bin/lib/**"),K.include=["./bin/shim"],x.writeJSONSync(_.resolve("tsconfig.temp.json"),K),await E(500),!M("tsc",["-d","--emitDeclarationOnly","--pretty","--outDir",_.resolve("./shim/src/bin"),"--project",_.resolve("tsconfig.temp.json")]))console.warn("Failed to compile type declarations for the shim files."),x.removeSync(_.resolve("tsconfig.temp.json")),process.exit(1);x.removeSync(_.resolve("tsconfig.temp.json"))}async function I3(){console.warn(z.yellowBright("Copying template files for bin distribution"));const $=_.resolve(__dirname,"../../template"),Y=_.resolve("./dist/bin/template");x.copySync($,Y);const K=x.readdirSync(Y).map((J)=>_.resolve(Y,J,"index.ts")).filter((J)=>{if(x.existsSync(J))return!0}),Z=await u();let G=!1;for(let J of K){const Q=await Bun.build({entrypoints:[J],target:"bun",external:Object.keys(Z),minify:!0});if(!Q.success){console.error(z.redBrightBold("Build failed for template:"),z.cyanBrightBold(_.relative(Y,_.dirname(J))));for(let X of Q.logs)console.error(X);G=!0}for(let X of Q.outputs)console.warn("Writing template entry file:",z.cyanBrightBold(_.relative(Y,_.resolve(_.dirname(J),X.path)))),await Bun.write(_.resolve(_.dirname(J),X.path),X)}if(G)console.error(z.redBrightBold("Some templates have errors (see above), stopping the build process.")),process.exit(1)}async function U3(){console.warn(z.yellowBright("Copying entry shell script for bin distribution")),x.copySync(_.resolve("./bin/main-entry.sh"),_.resolve("./dist/bin/main-entry.sh")),x.copySync(_.resolve("./bin/main-entry.ps1"),_.resolve("./dist/bin/main-entry.ps1"))}async function _$(){if(console.warn(z.cyanBright("Building bin commands for the distribution.")),!x.existsSync(_.resolve("./bin/main.ts"))||!x.existsSync(_.resolve("./bin/main-entry.sh"))||z0.ignores("bin")){console.warn(`Tried to make a release for the bin commands, but no bin/main.ts or bin/main.sh entry file was found. (or was gitignored):\n\t${_.resolve("./bin/main.ts")}\n\t${_.resolve("./bin/main.sh")}`);return}x.ensureDirSync(_.resolve("./dist")),x.ensureDirSync(_.resolve("./dist/bin/template")),await A3(),await x3(),await I3(),await U3()}var __dirname="/Users/diniden/Desktop/VoidRay/dev-ops/node-devops/bin/lib/build/bin",b$,z0;var q$=L(()=>{A();C();_1();b$=_.resolve(".gitignore"),z0=O3.default();if(x.existsSync(b$))z0=z0.add(x.readFileSync(b$).toString())});import D$ from"fs";import N$ from"path";function O$($){return{name:"vite-devops-string-replace-plugin",enforce:"pre",load(Y){const K=N$.resolve(Y),Z=[".ts",".js",".tsx",".jsx"];if(D$.existsSync(K)&&Z.includes(N$.extname(K))&&!K.includes("node_modules")&&!K.includes("\0")){let G=D$.readFileSync(K,{encoding:"utf-8"});return $.forEach((J)=>{G=G.replace(J.from,J.to)}),G}}}}var A$=()=>{};import U from"fs-extra";import V from"path";function x$($){const Y=process.env.PROJECT_ROOT||".",K=V.resolve(Y,"app/config");if(!U.existsSync(K)){console.warn(`viteDevopsAppConfigPlugin: ${z.cyanBrightBold("No app/config folder found.")}`);return}try{const Z=U.readdirSync(K).filter((B)=>{return U.statSync(V.join(K,B)).isDirectory()}),G=Z.map((B)=>V.join(K,B)),Q=Z.map((B,D)=>{if(!$)if(U.existsSync(V.join(G[D],`${B}.local`))||U.existsSync(V.join(G[D],`${B}.local.js`))||U.existsSync(V.join(G[D],`${B}.local.ts`))||U.existsSync(V.join(G[D],`${B}.local.tsx`))||U.existsSync(V.join(G[D],`${B}.local.jsx`)))return[{from:`"config/${B}/${B}"`,to:`"config/${B}/${B}.local"`},{from:`"config/${B}/${B}.js"`,to:`"config/${B}/${B}.local.js"`},{from:`"config/${B}/${B}.ts"`,to:`"config/${B}/${B}.local.ts"`}];else return[];return[{from:`"config/${B}/${B}"`,to:`"config/${B}/${B}.${$}"`},{from:`"config/${B}/${B}.js"`,to:`"config/${B}/${B}.${$}.js"`},{from:`"config/${B}/${B}.ts"`,to:`"config/${B}/${B}.${$}.ts"`}]}).reduce((B,D)=>B.concat(D),[]),F=[...!$&&(U.existsSync(V.join(K,"env.local"))||U.existsSync(V.join(K,"env.local.js"))||U.existsSync(V.join(K,"env.local.ts"))||U.existsSync(V.join(K,"env.local.tsx"))||U.existsSync(V.join(K,"env.local.jsx")))?[{from:'"config/env"',to:'"config/env.local"'},{from:'"config/env.js"',to:'"config/env.local.js"'},{from:'"config/env.ts"',to:'"config/env.local.ts"'}]:$?[{from:'"config/env"',to:`"config/env.${$}"`},{from:'"config/env.js"',to:`"config/env.${$}.js"`},{from:'"config/env.ts"',to:`"config/env.${$}.ts"`}]:[],...Q];if(F.length>0)console.warn(`

  ${z.yellowBrightBold("Using the following mappings for app config:")}

  \t${z.cyanBrightBold(F.map((B)=>`\n  ${B.from} => ${B.to}`).join("\n\t"))}

      `);return O$(F)}catch(Z){console.error(Z),console.error(z.redBrightBold(`
      App config plugin failed to load. The default config paths will be used
      and any specific environment requested will be ignored.
    `))}}var I$=L(()=>{A();A$()});import*as V$ from"vite";import U1 from"fs-extra";import V3 from"ignore";import $1 from"path";async function w$($){if(console.warn(z.cyanBright("Building client files for the distribution.")),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await w(),process.env.FORCE_BUILD!=="true"){if(!U1.existsSync($1.resolve("app/client"))||X0.ignores("app/client")){console.error(`Tried to make a release for the web app client, but no app/client entry file was found. (or was gitignored):\n\t${$1.resolve("app/client")}`);return}}const Y="development";process.env.NODE_ENV="production",console.warn(`Releasing ${z.yellowBrightBold("app/client")} for Environment:`,z.cyanBrightBold($)),process.env.BUILD_ENV=$;const K=await a();if(K.plugins=[x$($),...K.plugins||[]],K.logLevel="warn",K.mode="production",K.root=$1.resolve("app/client"),K.build.outDir=$1.resolve("dist/app/client",$),K.build.watch=void 0,K.build.rollupOptions.output={dir:K.build.outDir,entryFileNames:"index.js",chunkFileNames:"index.js",manualChunks:void 0},await V$.build(K),process.env.NODE_ENV=Y,!U1.existsSync($1.resolve(`dist/app/client/${$}/index.js`)))console.error("\n\nFailed to create Client output bundle. Exiting process...\n\n"),process.exit(1)}var U$,X0;var T$=L(()=>{b1();A();m();I$();U$=$1.resolve(".gitignore"),X0=V3.default();if(U1.existsSync(U$))X0=X0.add(U1.readFileSync(U$).toString())});async function Y1($=[],Y){const K=await k();if(Y1.optimize){if(K[1]==="bunx")return M(K[1],[Y?.excludeBunFlag?null:"--bun",...$].filter(R))}return M(K[1],[...$])}var W0=L(()=>{C();s();Y1.optimize=!0});import V1 from"fs-extra";import W1 from"path";async function w1(){if(!V1.existsSync(W1.resolve("ui")))return;V1.ensureDir(W1.resolve("dist/types")),console.warn(z.yellowBrightBold("Generating .d.ts files...")),Y1(["tsc","--emitDeclarationOnly","--declaration","--outDir","dist/types","--project",W1.resolve("tsconfig.json")]);const $=V1.readdirSync(W1.resolve("dist/types"));for(let Y of $){if(Y==="ui"||Y==="util")continue;console.warn(z.yellowBright(`Removing types for folder: ${Y}`)),V1.removeSync(W1.resolve("dist/types",Y))}}var B0=L(()=>{A();W0()});import C$ from"fs-extra";import S$ from"path";async function j$(){return C$.readJSONSync(S$.resolve("package.json")).name||""}var E$=()=>{};import*as k$ from"vite";import T1 from"fs";import w3 from"ignore";import d from"path";async function P$(){if(console.warn(z.cyanBright("Copying ui files for the distribution.")),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await w(),!process.env.FORCE_BUILD){if(!T1.existsSync(d.resolve("ui"))||H0.ignores("ui")){console.error(`"No library project found (or was gitignored) for bundling release at:\n\t${d.resolve("ui")}`);return}}if(console.warn(z.yellowBrightBold("Starting Vite client build...")),!T1.existsSync(d.resolve("ui/index.ts"))){console.error("The UI folder project has no index.ts entry point to create the library.");return}await w1(),console.warn(z.yellowBrightBold("Building library bundle..."));const $=await a();$.logLevel="warn",$.root=d.resolve("ui"),$.build.lib={entry:d.resolve("ui/index.ts"),name:(await j$()).split("@").join("").split("/").join("_"),fileName:"index"},$.mode="production",$.root=d.resolve("app/client"),$.build.outDir=d.resolve("dist/ui"),$.build.watch=void 0,$.build.rollupOptions.output={dir:$.build.outDir,entryFileNames:"index.js",chunkFileNames:"index.js",manualChunks:void 0};const Y=Object.keys(await u());console.warn("Externalized Libraries that will not be included in the bundle:",Y),$.build.rollupOptions={...$.build.rollupOptions,external:Y},await k$.build($)}var R$,H0;var y$=L(()=>{b1();A();B0();_1();E$();m();R$=d.resolve(".gitignore"),H0=w3.default();if(T1.existsSync(R$))H0=H0.add(T1.readFileSync(R$).toString())});import p from"fs-extra";import f from"path";async function v$(){process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await w(),console.warn(z.cyanBright("Copying story files for the distribution."));const $=f.resolve("dist/stories"),Y=f.resolve("ui/stories"),K=f.resolve("dist");if(!p.existsSync(Y)){console.error(`Could not find stories directory:\n\t${Y}`);return}p.ensureDirSync($),p.copySync(Y,$);const Z=f.resolve("package.json"),J={name:p.readJSONSync(Z).name||"unknown",private:!0,type:"module",main:"./ui/index.js",types:"./types/ui/index.d.ts",dependencies:{},repository:{},scripts:{},devDependencies:{}};console.warn("Writing distribution package.json:",f.resolve(K,"package.json")),p.writeJSONSync(f.resolve(K,"package.json"),J),await E(500),p.ensureDirSync(f.resolve(K,"components")),J.main="../ui/index.js",J.types="../types/ui/index.d.ts",console.warn("Writing distribution package.json:",f.resolve(K,"components/package.json")),p.writeJSONSync(f.resolve(K,"components/package.json"),J),await E(500),console.warn("Finished copying stories.")}var m$=L(()=>{A();m()});var f$={};j(f$,{default:()=>S1});import C1 from"fs-extra";import K1 from"path";async function T3(){if(process.env.QUICK_BUILD==="true")return;if(await l("release",["view"]),!await v("\nShould the release continue being made?"))await I1(!0),process.exit(1)}async function C3(){console.warn("Gathering build targets from:",z.yellowBright(K1.resolve("build.conf.js")));const $=(await import(K1.resolve("build.conf.js"))).BUILD_TARGETS;if(process.env.NODE_ENV="production",console.warn("Building environments",z.redBrightBold(JSON.stringify($))),!Array.isArray($))console.error("build.conf.js must be an array of string values"),process.exit(1);for(let Y of $)await w$(Y);await P$(),await v$(),await _$()}async function S3(){try{C1.removeSync(K1.resolve("dist"))}catch($){console.warn("No dist folder to clean out.")}C1.ensureDirSync(K1.resolve("dist"))}async function j3(){try{C1.removeSync(K1.resolve("dist/test"))}catch($){console.warn("No test folder to clean out")}try{C1.removeSync(K1.resolve("dist/unit-test"))}catch($){console.warn("No unit-test folder to clean out")}}async function S1(){console.warn("Validating the release..."),await T3(),console.warn("Clear previous build..."),await S3(),console.warn("Bundling project..."),await C3(),console.warn("Final cleanup..."),await j3(),console.warn("Release Build complete!")}var F0=L(()=>{A();q1();Q0();G1();q$();T$();y$();m$()});var l$={};j(l$,{default:()=>E1});import d$ from"fs-extra";import E3 from"lodash/groupBy.js";import j1 from"path";import R3 from"lodash/uniq.js";import k3 from"lodash/upperFirst.js";import{compare as P3,inc as y3}from"semver";function g3($){const Y=$.toLowerCase().split("\n").map((K)=>(K.match(/## (\w+)/)||[])[1]).filter(Boolean);if(Y.includes("breaking"))return"major";if(Y.includes("added"))return"minor";return"patch"}async function u3($){console.warn("Building release notes..."),console.warn("fetching tags...");const Y=await O("git",["tag","--list"]);if(Y===null)console.error("Could not get git tags"),process.exit(1);const K=Y.trim().split("\n").sort(P3),Z=K[(K.includes($)?K.indexOf($):K.length)-1];console.warn("fetching version hash...");const G=await O("git",["rev-list","-1",`${$}`]);if(G===null)console.error("Couldn't get current version hash"),process.exit(1);const J=G.trim();console.warn("fetching previous version hash...");let Q=await O("git",["rev-list","-1",`${Z}`]);if(Q===null){if(Q=await O("git",["rev-list","--max-parents=0","HEAD"]),Q===null)console.error("Couldn't get previous version hash"),process.exit(1)}const X=Q.trim();console.warn("fetching logs...");const W=await O("git",["log","--pretty=%B",`${X}...${J}`]);if(W===null)console.error("Couldn't get logs"),process.exit(1);const F=W.split("\n").map((N)=>{const[,q="",H=""]=N.match(/^\s*(\w+?)\s*:\s*(.*)\s*$/)||[];return{tag:h$[q.toLowerCase()],message:k3(H)}}).filter((N)=>N.tag),B=E3(F,"tag"),D=f3.filter((N)=>B[N]).map((N)=>{const q=B[N];return`## ${N.replace(/(\w)/,(H)=>H.toUpperCase())}\n\n${q.map(({tag:H,message:I})=>`- [\`${H.toUpperCase()}\`]: ${I}`).join("\n")}`}).join("\n\n");return console.warn("New release notes completed"),D}async function E1($={}){if(console.warn("Generating Release Notes..."),await O("git",["fetch","--tags"])===null)console.error("Couldn't fetch tags"),process.exit(1);const K=g$(j1.resolve("package.json")),{version:Z="0.0.1"}=K;console.warn("Current Project version:",{currentVersion:Z});const G=await u3("HEAD"),J=g3(G),Q=J&&y3(Z,J);if(!Q)console.error("Unable to determine next version",{currentVersion:Z}),process.exit(1);if($.tag){if(console.warn("Creating the new tag..."),await O("git",["tag","-a",Q,"-m",`Release ${Q}`])===null)console.error("Couldn't create tag"),process.exit(1)}if($.updatePackage){console.warn("Updating the package.json...");const W=g$(j1.resolve("package.json"));W.version=Q,u$(j1.resolve("package.json"),`${JSON.stringify(W,null,"  ")}\n`)}const X=`## ${Q}\n\n${G}`;if(!G.trim()&&$.errorOnEmpty)throw new Error("No notes were generated as no semver style messages were found");if($.file){console.warn("Writing the release notes to file:",$.file);const W=j1.resolve($.file),F=v3(W)?m3(W):"";u$(W,`${`${X}\n\n${F}`.trim()}\n`);for(let D=0;D<=100;++D){if(d$.existsSync(W))break;if(D===100)console.warn("Release notes file was not created in time for the final release commit:",z.redBrightBold(W)),process.exit(1)}if(console.warn("Adding fragments to git..."),await O("git",["add","-A"])===null)console.warn("Could not ensure all fragments are added for the next commit."),process.exit(1);if(console.warn("Committing to git..."),await O("git",["commit","-am",`Release ${Q}`])===null)console.error("Couldn't commit changes"),process.exit(1);console.warn(`\n\n${z.cyan(X)}\n\n`)}else console.warn(`\n\n${z.cyan(X)}\n\n`);process.env.VITE_RELEASE_VERSION=Q}var v3,m3,g$,u$,h$,f3;var L0=L(()=>{A();c();({existsSync:v3,readFileSync:m3,readJSONSync:g$,writeFileSync:u$}=d$),h$={breaking:"breaking",feat:"added",feature:"added",added:"added",fix:"fixed",fixed:"fixed",hotfix:"fixed",task:"task"},f3=R3(Object.values(h$))});async function R1($){return M("git",["ls-remote",$])}var M0=L(()=>{C()});async function c$($){const Y=await O("git",["remote","-v"]);if(Y===null)console.warn("Could not list remotes for the git project."),process.exit(1);const K=Y.split(/\r?\n/g),Z=K.find((J)=>J.indexOf($)>=0);if(!Z)console.warn(b`
      You MUST have a remote named ${$} which points to the repository you
      wish to deploy to.

      ${K.join("\n")}
    `),process.exit(1);const G=Z.split(/\s+/g)[1];if(!R1(G))console.warn(`
      You do not seem to have access to the repo listed in the package json of
      this project. Please ensure you have write access to the repo:
      ${G}
      and then try to run the release again.
    `),process.exit(1)}var p$=L(()=>{n();c();M0()});async function i$(){const $=await O("git",["rev-parse","--abbrev-ref","HEAD"]);if($===null){console.error("Failed to determine current branch.");return}return $.trim()||void 0}var n$=L(()=>{c()});var s$=async($,Y)=>{const K=await i$();if(!K)return console.warn("Could not determine current branch."),!1;if(await O("git",["checkout",`${Y}`])===null)return console.warn(`Could not checkout branch ${Y}`),!1;if(await O("git",["reset","--hard",`${$}/${Y}`])===null){if(console.warn(`Could not reset branch ${Y}`),await O("git",["checkout",`${K}`]))console.warn(`Could not return to original branch ${K}`);return!1}if(await O("git",["checkout",`${K}`])===null)return console.warn(`Could not return to original branch ${K}`),!1;return!0};var o$=L(()=>{c();n$()});import a$ from"fs-extra";import t$ from"path";async function r$(){return a$.readJSONSync(t$.resolve("package.json")).repository||{}}var e$=()=>{};var K9={};j(K9,{default:()=>Y9});import k1 from"fs-extra";import P1 from"path";async function d3(){const $=await r$(),Y=$.url;if(!$||!($.type!=="gitlab"||$.type!=="git"||$.type!=="bitbucket"||$.type!=="stash"))console.warn(`
      You MUST have a repository specified in your package json to use the
      release script. It must be of 'type: git' and have a valid ssh url to
      your git repo.

      Additionally, you MUST have a remote configured for your project of
      'origin' that matches the repo url listed in your package.json.

      Thus: "git remote -v" SHOULD output a line with
      origin <url in your package json repository field> (push)
    `),process.exit(1);const K=await O("git",["remote","-v"]);if(K===null)console.warn("Could not list remotes for the git project."),process.exit(1);const Z=K.split(/\r?\n/g);if(!Z.find((J)=>J.indexOf(i)>=0&&J.indexOf(Y)>=0))console.warn("Could not match package json repository to an origin remote in git CLI",{remoteListProcess:K,remotes:Z,ENSURE_REMOTE:i,ENSURE_REMOTE_PROJECT:Y}),process.exit(1);if(!R1(Y))console.warn(`
      You do not seem to have access to the repo listed in the package json of
      this project. Please ensure you have write access to the repo:
      ${Y}
      and then try to run the release again.
    `),process.exit(1);if(await e())console.error("You have uncommitted changes or the current state of the project can not be determined. Please commit or stash them before continuing."),process.exit(1);console.warn("Repository validation complete")}async function h3(){if(!await await M("git",["checkout","release"])){if(!await M("git",["checkout","-b","release"]))console.warn("Could not switch to the release branch. Make sure the branch exists locally."),process.exit(1)}if(!await M("git",["fetch",`${i}`]))console.warn("Could not fetch from remote servers."),process.exit(1);if(!await M("git",["reset","--hard",`${i}/dev`]))console.warn("Could not reset branch to dev"),process.exit(1);console.warn("Checked out release branch and updated to dev")}function l3(){try{const Y=k1.readFileSync(P1.resolve("RELEASE_NOTES.md"),"utf8").toLowerCase().split("\n").map((K)=>(K.match(/## (\w+)/)||[])[1]).filter(Boolean);if(Y.includes("breaking"))return"major";if(Y.includes("added"))return"minor";return"patch"}catch($){console.error("Could not determine release type after release was created"),process.exit(1)}}async function c3($){const Y=await w();if(!await M("git",["add","-A"]))console.warn("Could not ensure all fragments are added for the next commit."),process.exit(1);await E1({file:"RELEASE_NOTES.md",updatePackage:!0});const K=await w();if(Y===K)console.warn(`
      The release script did not detect any changes for a release. If you find
      this to be in error or you want to force a new release. Make some commits
      with proper release note formatted messages to trigger a release.
    `),process.exit(1);if($){if(l3()!=="patch")console.error(`
        Cannot create a release for an alternate branch that is not a simple
        patch. Features and breaking changes can ONLY be made on the main branch of
        development.
      `),process.exit(1)}const Z=await O("git",["log","-1","--pretty=%B"]);if(Z===null)console.warn("Could not read the last commit version information"),process.exit(1);const G=(Z.trim().toLowerCase().split("release ")[1]||"").trim();if(!G)console.warn("Could not determine release version from the last commit:\n\n",Z.toString(),"\n\n"),process.exit(1);if(k1.existsSync(P1.resolve("ui/release.json"))){try{const J=k1.readJSONSync(P1.resolve("ui/release.json"));J.version=G,k1.writeJSONSync(P1.resolve("ui/release.json"),J)}catch(J){console.warn("Could not update the release.json file with current library version."),process.exit(1)}if(!await M("git",["add","-A"]))console.warn("Could not ensure the release json was updated for the new version."),process.exit(1);if(!await M("git",["commit","--amend","--no-edit"]))console.warn("Could not amend the release commit to include the release json file."),process.exit(1)}if(G.includes('"'))console.warn("The update version generated is invalid as it contains invalid characters",{version:G}),process.exit(1);return console.warn("Updating version to",{version:G}),G}async function p3($){if(!await M("git",["tag","-a",$,"-m",`Release ${$}`]))console.warn("Could not make tag for git commit"),process.exit(1)}async function $9($,Y,K,Z,G){if(!await M("git",["push",G?"-f":void 0,$,`${K}:${Z}`]))console.warn(`Could not push release commit to ${$}`),process.exit(1);if(!await M("git",["push",$,Y]))console.warn("Could not push tag to the remote repository"),process.exit(1)}async function i3($,Y){if($&&$.length>0){if(!await v(b`
        The build and release was successful, would you like to release to the
        specified additional remotes?

        ${z.cyanBrightBold($.join("\n"))}
      `))return}if(!await M("git",["fetch",i]))console.warn("Could not fetch from remote servers."),process.exit(1);for(let K of $){const[Z,G,J,Q]=K.split(":");await c$(Z),await s$(i,G||"master"),await $9(Z,Y,G||"master",J||"master",Q==="force")}}async function n3($){process.env.NODE_ENV="production",await d3(),await h3(),await S1();const Y=await c3();if(await p3(Y),await $9(i,Y,"release","release",!0),await v("Would you like to run pr release?"))await l("pr",["release"]);await i3($,Y),await I1(!0)}async function Y9($){console.warn("Executing release script"),n3($)}var i="origin";var Z9=L(()=>{F0();L0();A();n();q1();C();c();M0();p$();x1();Q0();o$();G1();e$();m()});var J9={};j(J9,{default:()=>G9});async function G9(){await w1()}var Q9=L(()=>{B0()});var b0={};j(b0,{default:()=>X9});import g from"fs-extra";import s3 from"ignore";import S from"path";async function o3($){const Y=g.readJSONSync(S.resolve("tsconfig.json"));if(Y.exclude=Y.exclude||[],Y.include=(Y?.include||[]).filter((Z)=>!y1.ignores(S.relative("./",Z))),g.writeJSONSync(S.resolve("tsconfig.temp.json"),Y),await E(500),$==="watch"){const Z=async()=>{console.warn("Exit TS process");try{g.removeSync(S.resolve("tsconfig.temp.json"))}catch(G){}process.exit(0)};process.on("exit",Z),process.on("SIGINT",Z),process.on("SIGUSR1",Z),process.on("SIGUSR2",Z),process.on("SIGTERM",Z),process.on("uncaughtException",Z)}if(!M("tsc",["-d",$==="watch"?"--watch":"","--incremental","--noemit","--pretty","--tsBuildInfoFile",S.resolve("node_modules/.cache/tsc/tsc.tsbuildinfo"),"--outDir",S.resolve("dist"),"--project",S.resolve("tsconfig.temp.json")]))console.warn("Failed to compile type declarations"),g.removeSync(S.resolve("tsconfig.temp.json")),process.exit(1);const K=(Y?.include||[]).filter((Z)=>!y1.ignores(S.relative("./",Z))).map((Z)=>S.resolve(Z)).filter((Z)=>g.existsSync(Z)&&!Z.includes("node_modules"));if(K.length>0){if(!M("eslint",[...K,"-c",S.resolve(".eslintrc"),"--ext",".ts","--ext",".tsx"]))console.warn("Failed eslint checks."),g.removeSync(S.resolve("tsconfig.temp.json")),process.exit(1)}g.removeSync(S.resolve("tsconfig.temp.json"))}async function X9($){await o3($)}var z9,y1;var _0=L(()=>{C();z9=S.resolve(".gitignore"),y1=s3.default();if(g.existsSync(z9))y1=y1.add(g.readFileSync(z9).toString())});var B9={};j(B9,{default:()=>W9});async function W9(){console.warn(z.yellowBrightBold("Starting server...")),await z1()}var H9=L(()=>{i1();A()});var _9={};j(_9,{default:()=>b9});import a3 from"fs-extra";import q0 from"path";async function M9($){if(!a3.existsSync($))return console.warn("Attempted to start a server but no server distribution was found at",$),!1;return await M("bun",[`${$}`]),!0}async function F9(){const $=q0.resolve("docs/index.js");return await M9($)}async function L9(){process.env.RESOURCE_PATH=q0.resolve("dist/app/client");const $=q0.resolve("dist/app/server/index.js");return await M9($)}async function b9($,Y){const{PORT:K="80"}=process.env;process.env.PORT=K;let Z=!1;switch($){case"app":Z=await L9();break;case"devops":Z=await F9();break;default:if($)console.warn("Invalid target for start script specified",$);break}if(!Z){if(Z=await L9(),Z)return;if(Z=await F9(),Z)return}}var q9=L(()=>{C()});import t3 from"fs-extra";import D0 from"path";async function D9(){const $=D0.resolve("tsconfig.json");if(!t3.existsSync($))throw new Error("Target project does not have a TSConfig");const Y=Boolean(process.env.DEBUG),K=process.env.PATTERN,Z=process.env.WATCH,G=process.env.LESS,J=D0.resolve("jest.config.js");M.silent=!0;try{if(Y)M("node",["--inspect-brk",D0.resolve("node_modules/.bin/jest"),"--runInBand",Z?"--watchAll":"","--verbose",G==="true"?"false":void 0,"--colors","--config",J,K?`--testNamePattern ${K}`:""]);else Y1(["jest",Z?"--watchAll":"","--verbose",G==="true"?"false":void 0,"--colors","--config",J,K?`--testNamePattern=${K}`:""],{excludeBunFlag:!0})}catch(Q){console.warn("Tests failed. Please look at logs to see the errors discovered")}console.warn(z.cyanBright("Tests complete"))}var N9=L(()=>{A();W0();C()});var A9={};j(A9,{default:()=>O9});async function O9(){console.warn("Running unit tests..."),await D9()}var x9=L(()=>{N9()});var T9={};j(T9,{default:()=>w9});import I9 from"fs";import U9 from"path";import V9 from"rimraf";async function w9(){const $=U9.resolve("./node_modules/.cache/"),Y=U9.resolve("./build");if(I9.existsSync($))V9.sync($),console.warn("Cache: Clean complete");else console.warn("Cache: Already clean");if(I9.existsSync(Y))V9.sync(Y),console.warn("Build: Clean complete");else console.warn("Build: Already clean");if(await M("bun",["pm","cache","rm"]))console.warn("Bun: Clean complete");else console.warn("Bun: Already clean")}var C9=L(()=>{C()});import S9 from"path";import{createRequire as r3}from"module";async function v1($,Y){const G=r3(import.meta.url).resolve($).split("node_modules"),J=G[0],Q=G[1].split(S9.sep)[1];return S9.join(J,"node_modules",Q,"node_modules",".cache",Y)}var j9=()=>{};var R9={};j(R9,{default:()=>E9});import e3 from"fs-extra";import Z1 from"path";import $4 from"url";async function Y4($,Y,K){const Z=await import("puppeteer"),G=await v1("puppeteer","pr-release"),J=await Z.launch({headless:!1,userDataDir:Z1.resolve(B1,G),defaultViewport:null}),Q=await J.newPage();console.warn("Opening project url..."),await Q.goto($);const X=await Q.evaluate(()=>document.body.getAttribute("data-project-id"));if(!X){console.warn("No project id found, User login required...");let F=!0;J.on("disconnected",()=>{if(!F)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)}),await Q.goto($),await Q.waitForFunction(()=>{const B=document?.body?.getAttribute("data-project-id");return B!==null&&B!==void 0},{timeout:0}),await Q.close(),F=!1}else await Q.close();console.warn("Project ID found:",X,"\nOpening merge request...");const W=async(F,B,D)=>{const N=await J.newPage();await N.goto(`${$}/-/merge_requests/new?${D?"utf8=%E2%9C%93&":""}merge_request%5Bsource_project_id%5D=${X}&merge_request%5Bsource_branch%5D=${encodeURIComponent(F)}&merge_request%5Btarget_project_id%5D=${X}&merge_request%5Btarget_branch%5D=${B}`),await N.waitForFunction(()=>{const q=document.querySelector("#merge_request_title");return q!==null&&q!==void 0},{timeout:0}),await N.evaluate((q)=>{let H=document.querySelector("#merge_request_title");if(H)H.value=`Release ${q}`;if(H=document.querySelector("#merge_request_description"),H)H.value=`Release ${q}`;if(H=document.querySelector("#merge_request_force_remove_source_branch"),H)H.checked=!1,H.value="0"},Y),await new Promise((q)=>{N.on("close",()=>{q(void 0),console.warn("Gitlab ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([W("release","dev"),W("release",K)]),J.close()}async function N0($,Y,K,Z){const G=await import("puppeteer"),J=await v1("puppeteer","pr-release");let Q=await G.launch({headless:!Z,userDataDir:Z1.resolve(B1,J),defaultViewport:null});const X=await Q.newPage();if(Z){console.warn("User login required...");let D=!0;Q.on("disconnected",()=>{if(!D)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)});const N="https://github.com/login";console.warn("Opening github login page: ",N),await X.goto(N),await X.waitForFunction(()=>{const q=document?.body?.getAttribute("class")?.split(" ").find((H)=>H.startsWith("logged-in"));return q!==null&&q!==void 0},{timeout:0}),D=!1}else console.warn("Opening project url: ",$),await X.goto($);console.warn("Checking for logged-in attribute on body...");const W=await X.evaluate(()=>{return console.warn("logged-in check:",document?.body?.getAttribute("class")?.split(" ").find((D)=>D.startsWith("logged-in"))),document?.body?.getAttribute("class")?.split(" ").find((D)=>D.startsWith("logged-in"))});if(console.warn("Loggin in check:",W),!W&&Z)await Q.close(),console.error("Failed to log in the user for github."),process.exit(1);else if(!W){console.warn("Logged-in not found on body, login might be needed..."),await Q.close(),N0($,Y,K,!0);return}else Q.close();const F={headless:!1,userDataDir:Z1.resolve(B1,J),defaultViewport:null};Q=await G.launch(F);const B=async(D,N)=>{const q=await Q.newPage();await q.goto(`${$}/compare/${N}...${D}`),await q.waitForFunction(()=>{const H=document.querySelector("#repo-content-pjax-container > div > div.js-details-container.Details.js-compare-pr > div > button");return H?.click(),H!==null&&H!==void 0}),await q.evaluate(async(H)=>{let I=document.querySelector("#pull_request_title");if(I)I.value=`Release ${H}`;if(I=document.querySelector('[name="pull_request[body]"]'),I)I.value=`Release ${H}`},Y),await new Promise((H)=>{q.on("close",()=>{H(void 0),console.warn("Github ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([B("release","dev"),B("release",K)]),Q.close()}async function K4($,Y,K,Z){const G=await import("puppeteer"),J=await v1("puppeteer","pr-release");let Q=await G.launch({headless:!Z,userDataDir:Z1.resolve(B1,J),defaultViewport:null});const X=await Q.newPage();if(Z){console.warn("User login required...");let D=!0;Q.on("disconnected",()=>{if(!D)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)});const N=$;console.warn("Opening azure repo login page: ",N),await X.goto(N),await X.waitForFunction(()=>{const q=window.sessionStorage.msameid;return q!==null&&q!==void 0},{timeout:0}),D=!1}else console.warn("Opening project url: ",$),await X.goto($);console.warn("Checking for logged-in attribute on body...");const W=await X.evaluate(()=>{return console.warn("logged-in check:",window.sessionStorage.msameid),window.sessionStorage.msameid});if(console.warn("Loggin in check:",W),!W&&Z)await Q.close(),console.error("Failed to log in the user for azure."),process.exit(1);else if(!W){console.warn("MS id not found, login might be needed..."),await Q.close(),N0($,Y,K,!0);return}else Q.close();const F={headless:!1,userDataDir:Z1.resolve(B1,J),defaultViewport:null};Q=await G.launch(F);const B=async(D,N)=>{const q=await Q.newPage();await q.goto(`${$}&sourceRef=${D}&targetRef=${N}`),await q.waitForFunction(()=>{const H=document.querySelector("button.primary");return H!==null&&H!==void 0}),await q.evaluate(async(H)=>{let I=document.querySelector('[aria-label="Enter a title"]');if(I)I.value=`Release ${H}`;if(I=document.querySelector('[aria-label="Description"]'),I)I.value=`Release ${H}`},Y),await new Promise((H)=>{q.on("close",()=>{H(void 0),console.warn("Azure project ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([B("release","dev"),B("release",K)]),Q.close()}async function E9($,Y,K="master",...Z){if(!(new Set(["gitlab","git","github","azure"])).has(Y))console.error(`Unsupported repo type: ${Y}`),process.exit(1);if(await e())console.error("You have uncommitted changes or the current state of the project can not be determined. Please commit or stash them before continuing."),process.exit(1);const Q=e3.readJsonSync(Z1.resolve("package.json")).version;switch(Y){case"gitlab":await Y4($,Q,K);break;case"git":case"github":await N0($,Q,K);break;case"azure":await K4($,Q,K);break;default:console.warn("No supported repo type found")}}var B1;var k9=L(()=>{j9();x1();B1=$4.fileURLToPath(new URL(".",import.meta.url))});A();import*as Z4 from"commander";import G4 from"inquirer-autocomplete-prompt";import J4 from"inquirer";import P9 from"path";import Q4 from"yargs";A();n();import C0 from"fs-extra";import S0 from"path";A();import I0 from"fs";import U0 from"path";function x0($){const Y=$.split(/\r?\n/),K={};let Z=null,G=null;return Y.forEach((J)=>{if(J=J.trim(),J===""||J.startsWith("#"))return;if(J.endsWith("{")){Z=J.split(/\s+/)[0],K[Z]={};return}if(J==="}"){Z=null,G=null;return}const Q=J.match(/^([\w.]+)\s*=\s*(.*)$/);if(Q){const W=Q[1];let F=Q[2];if(!isNaN(parseFloat(F)))F=parseFloat(F);else if(F==="true")F=!0;else if(F==="false")F=!1;if(G)K[Z??"null"][G][W]=F;else if(Z)K[Z][W]=F;else K[W]=F;return}const X=J.match(/^([\w.]+)\.([\w.]+)\s*=\s*(.*)$/);if(X){const W=X[1],F=X[2],B=X[3];if(!K[W])K[W]={};if(!K[W][F])K[W][F]={};K[W][F][B]=null,Z=W,G=F;return}console.error(`Unrecognized line: ${J}`)}),K}function V0($){try{if(!I0.existsSync(U0.resolve(".env")))return;const Y=I0.readFileSync(U0.resolve($||".env"),"utf8"),K=x0(Y);Object.entries(K).forEach(([Z,G])=>{if(typeof G==="string")process.env[Z]=G;else if(typeof G==="number")process.env[Z]=G.toString();else if(typeof G==="boolean")process.env[Z]=G.toString()})}catch(Y){if(Y instanceof Error)console.error(z.red("Error reading .env file:\n",z.yellow(Y.stack||Y.message)))}}G1();import p9 from"fs-extra";import i9 from"inquirer";import{stripIndent as n9}from"common-tags";async function T0($,Y,K,Z,G,J){let Q=J||!1;if(p9.existsSync($)){const{result:X}=await i9.prompt([{type:"confirm",name:"result",message:n9`${Y}`,default:J}]);if(X)K($),G?.($);Q=X}else K($),Z?.($);return Q}async function s9(){const $=(await import(S0.resolve("env.config.ts"))).default;if(!$)throw new Error("No env.config.ts file found.");if(!Array.isArray($))console.error("env.config.ts is not formatted correctly. Please follow the correct type convention.");return $}async function g1($){V0();try{const Y=await s9(),K=[],Z=[];if(Y.forEach((G)=>{if(!G)return;if(G.required){if(!process.env[G.name])K.push(b`
              Missing: ${G.name}\nDesription: ${G.description}
            `)}else if(!process.env[G.name]&&G.warn!==!1)Z.push(b`
              Missing: ${G.name}\nDesription: ${G.description}
            `)}),Z.length>0)console.warn(z.yellowBrightBold("The following environment variables are recommended but missing from your environment:\n")),console.warn(z.yellowBright(b`
          ${Z.join("\n")}
        `));if(K.length>0)console.error(z.redBrightBold("The following environment variables are required but missing from your environment:\n")),console.error(z.redBright(b`
          ${K.join("\n")}
        `));if(K.length>0){if($){if(await v(b`
          There seems to be some missing environment variables. Would you like
          to generate a .env file with the default values specified in the
          env.config file?
        `)){const J=[];for(let F of Y)J.push([F.name,w0(F.default)?F.default:R(F.default)?await F.default():void 0]);const Q=J.filter((F)=>F[1]).map((F)=>`${F[0]}=${F[1]}`).join("\n");if(!Q)console.warn(b`
              There are no defaults available for this env.config. So we can not
              generate an env file you. Please review the env.config.ts file and
              properly set the default values for the required environment
              variables.
            `);const X=S0.resolve(".env");if(!await T0(X,b`
              There appears to already be a .env file.
              Would you like to add the missing defaults to it?
            `,()=>{},()=>C0.writeFile(X,Q),()=>{C0.appendFileSync(X,`\n${Q}`)},!1))console.error("Did not write the .env file. Please correct the env and try again."),process.exit(1);return console.warn("Attempting to build the env again and continue with the command..."),g1(!1)}}process.exit(1)}}catch(Y){console.warn(b`
      No ${z.cyanBrightBold("env.config.ts")} file found. Environment will not be validated.
    `)}}n();import a9 from"fs-extra";import R0 from"inquirer";import t9 from"path";C();s();async function o($,Y,K){const Z=await k(),G=$.filter(R);return await M(Z[0],["i",K?"--no-save":null,Y?`-${Y}`:null,...G])}C();import o9 from"fuzzy";var j0=($)=>async(Y,K)=>{let Z=[];if($ instanceof Set)Z=Array.from($);else Z=$;return o9.filter(K||"",Z).map((G)=>G.string)};s();async function E0($){try{return await import($),!0}catch(Y){return console.error("Requested package is not available in this current project:",$),!1}}async function k0($,Y){const K=$||["puppeteer"];for(let Z of K)if(console.warn("Checking on dependency availability:",Z),!await E0(Z)){let J=Y;if(!J)J=(await R0.prompt([{type:"autocomplete",name:"resolution",message:`How do you want to resolve the missing package "${Z}":`,source:j0(["Install once to current project","Install in parent directory (Makes package available to all peer projects)","Do Nothing (this will end this current process as the package is required)"])}])).resolution;switch(J){case"Install to current project":await o([Z],"E");break;case"Install once to current project":o([Z],"E",!0);break;case"Install in parent directory (Makes package available to all peer projects)":{const Q=process.cwd();process.chdir("..");const X=await k();if(!a9.existsSync(t9.resolve("package.json")))M(X[0],["init","-y"]);await o([Z],"E"),process.chdir(Q),await E(100);break}default:process.exit(1)}}}function O0(){return m1.debug=T.debug,m1.verbose=T.verbose,m1.pattern=T.pattern,m1}async function M4(){await g1(!0),T.parse(process.argv)}J4.registerPrompt("autocomplete",G4);var{Command:z4}=Z4,T=new z4,m1={};T.version("0.0.1");T.option("-v, --verbose","Outputs more detailed information during crashes.");T.option("--debug [param]",b`
    Provides debugging contextual information various commands might use to
    aid in developing Devops.
  `);T.option("-p, --pattern [param]",b`
    Provides a pattern for certain operations to utilize. This is primarily
    used by unit tests to filter tests to specified tests.
  `);var y9=T.command("dev").description(b`
    These are the commands associated with starting up developer environments
    for various project types or portions of a project.
  `);y9.command("vite").description(b`
      Starts up a developer environment that performs incremental builds while
      developing within the lib and app folders. Uses vite and vite
      config.
    `).action(async()=>{(await Promise.resolve().then(() => (h0(),d0))).default().catch(($)=>{console.warn("dev-vite process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});y9.command("storybook").option("-i, --include <include...>","Additional storybook modules to load into storybook. These are the names of properly formatted dependencies installed into node_modules.").description(b`
      Starts a storybook instance for developing the UI components of the
      project. This makes the "ui/stories" folder in the project the expected
      development point.
    `).action(async({include:$})=>{(await Promise.resolve().then(() => (a1(),o1))).default("",$,P9.resolve(process.cwd()),O0()).catch((Y)=>{console.warn("storybook process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var X4=T.command("storybook");X4.command("run").option("-i, --include <include...>","Additional storybook modules to load into storybook. These are the names of properly formatted dependencies installed into node_modules.").description(b`
      Starts a storybook instance for developing the UI components of the
      project. This makes the "ui/stories" folder in the project the expected
      development point.
    `).action(async({include:$})=>{(await Promise.resolve().then(() => (a1(),o1))).default("",$,P9.resolve(process.cwd()),O0()).catch((Y)=>{console.warn("storybook process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});T.command("url [uri...]").description(b`
      Simple command to open a specified URL in the browser.
    `).action(async($)=>{(await Promise.resolve().then(() => (M$(),L$))).default($).catch((Y)=>{console.warn("url process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var H1=T.command("release").description(b`
    These commands are used for facilitating distribution releases of
    applications. This includes tools for building th dist folder fragments,
    viewing the expected release notes, and actually performing a complete
    release cycle.
  `);H1.command("deploy [add-remote...]").description(b`
      Performs actions necessary to update the distribution of the project.
      This will automatically update release notes, tag the release, and
      commit and push to a 'release' branch which will be ready for merging
      into master and dev.

      Specify additional remotes to deploy to via the add-remote option.
      This will deploy the release to additional remotes (AFTER all other normal
      deploy operations complete). This value is the NAME of the remote as it
      appears when you perform a "git remote -v" command.

      You can specify a specific target branch via a colon: remote:branch
      Otherwise, this will use the same main branch as configured for this
      project.
    `).action(async($)=>{o([]),(await Promise.resolve().then(() => (Z9(),K9))).default($).catch((Y)=>{console.warn("release-deploy process exited unexpectedly\n",Y.stack||Y.message),process.exit(1)})});H1.command("types").description(b`
      Updates JUST the types in the dist folder. These are the same types
      generated when building a release.
    `).action(async()=>{(await Promise.resolve().then(() => (Q9(),J9))).default().catch(($)=>{console.warn("release-types process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});H1.command("view").description(b`
      This runs the release-view script. For this case, it will only display
      the release notes in the console. Actual generated release notes are a
      part of the release process.
    `).action(async()=>{(await Promise.resolve().then(() => (_0(),b0))).default("").then(async()=>{console.warn(z.cyanBrightBold("TS check passed, generating notes...")),(await Promise.resolve().then(() => (L0(),l$))).default().catch(($)=>{console.warn("release-notes process exited unexpectedly",$.stack||$.message),process.exit(1)})}).catch(($)=>{console.warn(z.redBrightBold(b`
              Failed TS check. Release notes will not be produced until all TS
              errors are resolved.
            `)),console.warn($.stack||$.message),process.exit(1)})});H1.command("build").description(b`
      This runs the release-build script. This generates all of the release
      fragments. This should ONLY be used for testing and experimenting. Actual
      release fragments should be properly created and deployed using the
      release deploy command.
    `).action(async()=>{(await Promise.resolve().then(() => (F0(),f$))).default().catch(($)=>{console.warn("release-deploy process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});var W4=H1.command("start").description(b`
      This starts up released related processes. This includes things like
      starting up the dev server without any additional builds or auto
      configuration for development.
    `);W4.command("server").description(b`
      Starts up the app server without any additional builds etc. Use the
      environments:

        BUILD_MODE: Targets an env to run the server for.
        RESOURCE_PATH: The path to the static files to serve.
    `).action(async()=>{(await Promise.resolve().then(() => (H9(),B9))).default().catch(($)=>{console.warn("release-start-server process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});T.command("start [target]").description(b`
      This fires up a server to make any static content available for being
      served.
      There are a few options for what content will be served by this script:

      - The web app
      - Devops API

      The start script will automatically pick the web app over the devops
      files, but you can specify a target if you have a devops API and a web
      app:

      - app
      - devops
    `).action(async($)=>{(await Promise.resolve().then(() => (q9(),_9))).default($,O0()).catch((Y)=>{console.warn("start process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var B4=T.command("test").description(b`
    These commands are used for running tests. This includes tools for
    running unit tests a single time or in a watch mode.

    Use the environment variables for modifying behavior:

    ${z.yellowBrightBold("PATTERN")} - This causes the tests to only run on
    files that match the pattern

    ${z.yellowBrightBold("LESS")} - This removes the verbose output list of
    all tests ran
  `);B4.command("run").description(b`
      Runs all unit tests in the unit-test folder once.
    `).action(async()=>{(await Promise.resolve().then(() => (x9(),A9))).default().catch(($)=>{console.warn("test-run process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var H4=T.command("clean").description(b`
    Common cleaning tools for various fragments within the project.
  `);H4.command("cache").description(b`
      Cleans out build and cache files to help ensure a complete rebuild takes
      place.
    `).action(async()=>{(await Promise.resolve().then(() => (C9(),T9))).default().catch(($)=>{console.warn("clean-cache process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var F4=T.command("ts").description(b`
    These commands are used for running typescript. This includes tools for
    running typescript compilation a single time or in a watch mode.
  `);F4.command("run").description(b`
      Runs typescript compilation to check for errors. Does NOT emit files, thus
      is a good mechanism for checking a build before running a release.
    `).action(async()=>{(await Promise.resolve().then(() => (_0(),b0))).default("").catch(($)=>{console.warn("ts process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var L4=T.command("pr").option("--repoUrl <value>",b`
      The https URL to the repo to make the PR into
    `).option("--repoType <value>",b`
    The repository type to make the PR into. Supported types are: git, gitlab
  `).option("--masterBranch <value>",b`
    This indicates which branch is the master/main of the repository.
  `);L4.command("release").description(b`
      This creates two PRs that merges the current remote release branch into
      the remote dev and master branches.
    `).action(async()=>{const{repoUrl:$,repoType:Y,masterBranch:K}=Q4(process.argv).argv;if(!$||!Y||!K)console.warn("You must specify both --repoUrl and --repoType to use this command"),process.exit(1);await k0().catch(()=>process.exit(1)),console.warn("Dependency checks passed, continuing..."),(await Promise.resolve().then(() => (k9(),R9))).default($,Y,K).catch((Z)=>{console.warn("pr-release process exited unexpectedly"),console.warn(Z.stack||Z.message),process.exit(1)})});M4();

//# debugId=A94D65C08257DF3464756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiYmluL2xpYi91dGlsL2NoYWxrLnRzIiwgImJpbi9saWIvdXRpbC9kZXNjcmlwdGlvbi50cyIsICJiaW4vbGliL3V0aWwvdHlwZXMudHMiLCAiYmluL2xpYi9wcm9tcHQvcHJvbXB0LWNvbmZpcm0udHMiLCAiYmluL2xpYi91dGlsL2lzLWNoaWxkLXByb2Nlc3MtZXJyb3IudHMiLCAiYmluL2xpYi9leGVjL2V4ZWMtc3luYy50cyIsICJiaW4vbGliL2V4ZWMvZ2V0LXBhY2thZ2UtbWFuYWdlci50cyIsICJiaW4vbGliL3V0aWwvd2FpdC50cyIsICJiaW4vbGliL2J1aWxkL2J1aWxkLXZpdGUtY29uZmlnLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtZGVwZW5kZW5jaWVzLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi50cyIsICJiaW4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9idWlsZC1jbGllbnQudHMiLCAiYmluL2xpYi91dGlsL2hhbmRsZS1wcm9jZXNzLWV4aXQudHMiLCAiYmluL2xpYi91dGlsL2xvZy1xdWV1ZS50cyIsICJiaW4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9ydW4tYXBwLXNlcnZlci50cyIsICJiaW4vY29tbWFuZHMvZGV2L2Rldi12aXRlLnRzIiwgImJpbi9saWIvZGV2b3BzLXByb2plY3QvZGV2b3BzLXByb2plY3QtcGF0aC50cyIsICJiaW4vbGliL2V4ZWMvZXhlYy1zY3JpcHQudHMiLCAiYmluL2NvbW1hbmRzL3N0b3J5Ym9vay50cyIsICJub2RlX21vZHVsZXMvaXMtZG9ja2VyL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9pcy13c2wvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2RlZmluZS1sYXp5LXByb3AvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL29wZW4vaW5kZXguanMiLCAiYmluL2xpYi9leGVjL2V4ZWMtc3luYy1yZXN1bHQudHMiLCAiYmluL2xpYi91dGlsL3RlbXBsYXRlLnRzIiwgImJpbi9jb21tYW5kcy91cmwudHMiLCAiYmluL2xpYi9naXQvZ2l0LWhhcy1jaGFuZ2VzLnRzIiwgImJpbi9saWIvZ2l0L2dpdC1yZXR1cm4tdG8tZGV2LnRzIiwgImJpbi9saWIvYnVpbGQvYmluL3JlbGVhc2UtYmluLnRzIiwgImJpbi9zaGltL3ZpdGUtcGx1Z2lucy92aXRlLWRldm9wcy1zdHJpbmctcmVwbGFjZS1wbHVnaW4udHMiLCAiYmluL3NoaW0vdml0ZS1wbHVnaW5zL3ZpdGUtZGV2b3BzLWFwcC1jb25maWctcGx1Z2luLnRzIiwgImJpbi9saWIvYnVpbGQvd2ViLWFwcC92aXRlL3JlbGVhc2UtY2xpZW50LnRzIiwgImJpbi9saWIvZXhlYy9leGVjLXNjcmlwdHgudHMiLCAiYmluL2xpYi9idWlsZC9saWJyYXJ5L3ZpdGUvcmVsZWFzZS1saWJyYXJ5LXR5cGVzLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtbmFtZS50cyIsICJiaW4vbGliL2J1aWxkL2xpYnJhcnkvdml0ZS9yZWxlYXNlLWxpYnJhcnkudHMiLCAiYmluL2xpYi9idWlsZC9saWJyYXJ5L3JlbGVhc2Utc3Rvcmllcy50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLWJ1aWxkLnRzIiwgImJpbi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2Utdmlldy50cyIsICJiaW4vbGliL2dpdC9naXQtY2FuLWFjY2Vzcy1yZW1vdGUudHMiLCAiYmluL2xpYi9naXQvZ2l0LWVuc3VyZS1yZW1vdGUudHMiLCAiYmluL2xpYi9naXQvZ2l0LWN1cnJlbnQtYnJhbmNoLnRzIiwgImJpbi9saWIvZ2l0L2dpdC11cGRhdGUtYnJhbmNoLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtcmVwby50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLWRlcGxveS50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLXR5cGVzLnRzIiwgImJpbi9jb21tYW5kcy90cy50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLXN0YXJ0LXNlcnZlci50cyIsICJiaW4vY29tbWFuZHMvc3RhcnQudHMiLCAiYmluL2xpYi91bml0LXRlc3QvcnVuLXRlc3RzLnRzIiwgImJpbi9jb21tYW5kcy90ZXN0L3Rlc3QtcnVuLnRzIiwgImJpbi9jb21tYW5kcy9jbGVhbi9jbGVhbi1jYWNoZS50cyIsICJiaW4vbGliL3V0aWwvcGFja2FnZS1jYWNoZS1wYXRoLnRzIiwgImJpbi9jb21tYW5kcy9wci9wci1yZWxlYXNlLnRzIiwgImJpbi9tYWluLWdpbXAudHMiLCAiYmluL2xpYi91dGlsL2NvbmZpZy1lbnYudHMiLCAiYmluL2xpYi91dGlsL2RvdC1lbnYudHMiLCAiYmluL2xpYi91dGlsL3BhcnNlLXByb3BzLnRzIiwgImJpbi9saWIvcHJvbXB0L3Byb21wdC1vdmVycmlkZS1maWxlLnRzIiwgImJpbi9jb21tYW5kcy9lbnN1cmUtZGVwZW5kZW5jaWVzLnRzIiwgImJpbi9saWIvZXhlYy9leGVjLWluc3RhbGwudHMiLCAiYmluL2xpYi91dGlsL2Z1enp5LXNvdXJjZS50cyIsICJiaW4vbGliL3V0aWwvaXMtcGFja2FnZS1hdmFpbGFibGUudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbCiAgICAiZXhwb3J0IGNvbnN0IGNoYWxrID0ge1xuICBjeWFuOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlszNm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICByZWQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzMxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHllbGxvdzogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMzNtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JlZW46ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzMybSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJsdWU6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzM0bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIG1hZ2VudGE6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzM1bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGN5YW5CcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzk2bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHJlZEJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgeWVsbG93QnJpZ2h0OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls5M20ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBncmVlbkJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTJtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmx1ZUJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTRtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgbWFnZW50YUJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTVtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgd2hpdGVCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzk3bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGdyYXk6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzkwbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGdyZXk6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzkwbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHdoaXRlOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlszN20ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBibGFjazogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMzBtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmxhY2tCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzkwbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnQ3lhbjogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbNDZtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdSZWQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzQxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnWWVsbG93OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls0M20ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ0dyZWVuOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls0Mm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ0JsdWU6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzQ0bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnTWFnZW50YTogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbNDVtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdDeWFuQnJpZ2h0OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlsxMDZtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdSZWRCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ1llbGxvd0JyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMTAzbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnR3JlZW5CcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwMm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ0JsdWVCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwNG0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ01hZ2VudGFCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwNW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBjeWFuQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5Nm1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHJlZEJyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTFtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICB5ZWxsb3dCcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzkzbVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JlZW5CcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzkybVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmx1ZUJyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTRtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBtYWdlbnRhQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5NW1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHdoaXRlQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5N21cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGdyYXlCcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzkwbVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JleUJyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTBtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICB3aGl0ZUJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzM3bVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmxhY2tCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlszMG1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJsYWNrQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5MG1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG59O1xuIiwKICAgICJpbXBvcnQgeyBzdHJpcEluZGVudCB9IGZyb20gXCJjb21tb24tdGFnc1wiO1xuXG4vKipcbiAqIFRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFsIHRoYXQgZm9ybWF0cyBhIHN0cmluZyB0byBiZSBzdGFuZGFyZGl6ZWQgYW5kXG4gKiBhcHByb3ByaWF0ZSBmb3IgY29tbWFuZGVyIGRlc2NyaXB0aW9ucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKHN0cjogVGVtcGxhdGVTdHJpbmdzQXJyYXksIC4uLmFyZ3M6IGFueVtdKSB7XG4gIHJldHVybiBgJHtzdHJpcEluZGVudChzdHIsIC4uLmFyZ3MpfVxcblxcbmA7XG59XG4iLAogICAgIi8qKlxuICogSW50ZXJmYWNlIGZvciBkZWNsYXJpbmcgYSBnZW5lcmljIEpTT04gdmFsaWQgb2JqZWN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUpzb24ge1xuICBbeDogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IERhdGUgfCBJSnNvbiB8IElKc29uQXJyYXk7XG59XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBkZWNsYXJpbmcgYSBnZW5lcmljIEpTT04gdmFsaWQgb2JqZWN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUpzb25UeXBlIHtcbiAgW3g6IHN0cmluZ106XG4gICAgfCBzdHJpbmdcbiAgICB8IG51bWJlclxuICAgIHwgYm9vbGVhblxuICAgIHwgRGF0ZVxuICAgIHwgSUpzb25UeXBlXG4gICAgfCBJSnNvbkFycmF5XG4gICAgfCB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogUGFydCBvZiB0aGUgSUpzb24gZGVjbGFyYXRpb24gdG8gbWFrZSBhIHZhbGlkIEpTT04gdHlwZS5cbiAqL1xuZXhwb3J0IHR5cGUgSUpzb25BcnJheSA9IChcbiAgfCBzdHJpbmdcbiAgfCBudW1iZXJcbiAgfCBib29sZWFuXG4gIHwgRGF0ZVxuICB8IElKc29uXG4gIHwgSUpzb25BcnJheVxuKVtdO1xuXG4vKipcbiAqIFRoaXMgaXMgdG8gaGVscCBlc3RhYmxpc2ggYSBjdXN0b20gY2hpbGQgcGF0dGVybiBmb3IgUmVhY3QuIFRoZSBwcm9wcyBmb3IgeW91ciByZWFjdCBjb21wb25lbnQgc2ltcGx5IG5lZWRzIHRvIGV4dGVuZFxuICogdGhpcyBpbnRlcmZhY2UuXG4gKi9cbmV4cG9ydCB0eXBlIElDaGlsZHJlbjxUIGV4dGVuZHMgb2JqZWN0PiA9IFQgJiB7XG4gIGNoaWxkcmVuPzogUGFydGlhbDxUPjtcbn07XG5cbi8qKlxuICogVGhpcyBsZXRzIHlvdSBkZWZpbmUgY2hpbGRyZW4gZm9yIGEgY29tcG9uZW50IGFuZCBmb3JjZXMgdGhlIGNoaWxkcmVuIHRvIGJlIGRlY2xhcmVkIGluIHRoZSBwcm9wcyBhcyBvcHBvc2VkIHRvXG4gKiBuZXN0aW5nIHRoZSBjaGlsZHJlbi5cbiAqL1xuZXhwb3J0IHR5cGUgSVByb3BzQ2hpbGRyZW48VCBleHRlbmRzIG9iamVjdD4gPSBUICYge1xuICBjaGlsZHJlbjogbmV2ZXI7XG59O1xuXG4vKipcbiAqIFRoaXMgbGV0cyB5b3UgZGVmaW5lIGNoaWxkcmVuIGZvciBhIGNvbXBvbmVudCBhbmQgZm9yY2VzIHRoZSBjaGlsZHJlbiB0byBiZSBuZXN0ZWQgYXMgb3Bwb3NlZCB0b1xuICogYmVpbmcgZGVjbGFyZWQgaW4gdGhlIHByb3BzLlxuICovXG5leHBvcnQgdHlwZSBJTmVzdGVkQ2hpbGRyZW48VD4gPSB7XG4gIGNoaWxkcmVuPzogVDtcbn07XG5cbi8qKlxuICogQSBzbGlnaHRseSBzdHJvbmdlciB0eXBlIGZvciBmb3IgaW5kaWNhdGluZyBcIkZ1bmN0aW9uXCIuIFRoaXMgaGFzIGdyZWF0ZXJcbiAqIGZsZXhpYmlsaXR5IHRvIGZpdCBpbnRvIGdlbmVyaWMgY2FsbGJhY2tzLlxuICovXG5leHBvcnQgdHlwZSBHZW5lcmljRnVuY3Rpb248VD4gPSAoLi4uYXJnczogYW55W10pID0+IFQ7XG5cbi8qKlxuICogVGhpcyB0eXBlIGlzIGludGVuZGVkIGZvciB0aGUgYXN5bmMgb3BlcmF0aW9uIG9mIGEgXCJmbG93XCIuIEEgZmxvdyBjYW4gaGF2ZVxuICogc2V2ZXJhbCB5aWVsZCBzdGF0ZW1lbnRzLCBidXQgYXJlIE5PVCBmb3IgdGhlIGludGVudGlvbiBvZiByZXR1cm5pbmcgdmFsdWVzXG4gKiB0byB0aGUgY2FsbGVyLCBidXQgcmF0aGVyIGZvciB0aGUgaW50ZW50IG9mIHBlcmZvcm1pbmcgYSBtb2J4IGFjdGlvbiB0aGF0IGhhc1xuICogYXN5bmNocm9ub3VzIHByb3BlcnRpZXMuXG4gKi9cbmV4cG9ydCB0eXBlIEZsb3dUeXBlID0gR2VuZXJhdG9yPHVua25vd24sIHVua25vd24sIHVua25vd24+IHwgdW5kZWZpbmVkO1xuXG4vKipcbiAqIFR5cGVndWFyZCBmb3Igc3RyaW5nc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFsOiBhbnkpOiB2YWwgaXMgc3RyaW5nIHtcbiAgcmV0dXJuIHZhbCAmJiB2YWwuY2hhckNvZGVBdCAhPT0gdm9pZCAwO1xufVxuXG4vKipcbiAqIFR5cGVndWFyZCBmb3IgbnVtYmVyc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIodmFsOiBhbnkpOiB2YWwgaXMgbnVtYmVyIHtcbiAgcmV0dXJuIHZhbCAhPT0gdm9pZCAwICYmIHZhbC50b0V4cG9uZW50aWFsO1xufVxuXG4vKipcbiAqIFR5cGVndWFyZCBmb3IgZnVuY3Rpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbDogYW55KTogdmFsIGlzIEZ1bmN0aW9uIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLyoqXG4gKiBUeXBlZ2F1cmQgZm9yIGVuc3VyaW5nIGFuIGVsZW1lbnQgaXMgbm9uLW51bGwgYW5kIG5vdCB1bmRlZmluZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RlZmluZWQ8VD4odmFsOiBUIHwgdW5kZWZpbmVkIHwgbnVsbCk6IHZhbCBpcyBUIHtcbiAgcmV0dXJuIHZhbCAhPT0gdm9pZCAwICYmIHZhbCAhPT0gbnVsbDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgaWYgaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUcnV0aHk8VD4odmFsOiBUIHwgbnVsbCB8IHVuZGVmaW5lZCB8IGZhbHNlKTogdmFsIGlzIFQge1xuICByZXR1cm4gQm9vbGVhbih2YWwpO1xufVxuIiwKICAgICJpbXBvcnQgaW5xdWlyZXIgZnJvbSBcImlucXVpcmVyXCI7XG5pbXBvcnQgeyBzdHJpcEluZGVudCB9IGZyb20gXCJjb21tb24tdGFnc1wiO1xuXG4vKipcbiAqIENvbnZlbmllbmNlIHdyYXBwZXIgYXJvdW5kIGN1cnJlbnQgcHJvbXB0IGxpYnJhcnkgb2YgY2hvaWNlIHRvIHByZXNlbnQgYVxuICogY29uZmlybWF0aW9uIGRpYWxvZy5cbiAqXG4gKiBBcHBsaWVzIHN0cmlwSW5kZW50IHRvIHRoZSBpbnB1dCBtZXNzYWdlLlxuICpcbiAqIFJldHVybnMgdGhlIHRydWUgZmFsc2UgdmFsdWUgb2YgdGhlIHByb21wdC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb21wdENvbmZpcm0oXG4gIG1lc3NhZ2U6IHN0cmluZyxcbiAgZGVmYXVsdFZhbHVlPzogYm9vbGVhbixcbiAgb25Db25maXJtZWQ/OiAoKSA9PiB2b2lkXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgeyByZXN1bHQgfSA9IGF3YWl0IGlucXVpcmVyLnByb21wdDx7XG4gICAgcmVzdWx0OiBib29sZWFuO1xuICB9PihbXG4gICAge1xuICAgICAgdHlwZTogXCJjb25maXJtXCIsXG4gICAgICBuYW1lOiBcInJlc3VsdFwiLFxuICAgICAgbWVzc2FnZTogc3RyaXBJbmRlbnRgJHttZXNzYWdlfWAsXG4gICAgICBkZWZhdWx0OiBkZWZhdWx0VmFsdWUsXG4gICAgfSxcbiAgXSk7XG5cbiAgLy8gV2hlbiB5ZXMvdHJ1ZSBpcyBzZWxlY3RlZCwgcnVuIHRoZSBvbkNvbmZpcm1lZCBjYWxsYmFja1xuICBpZiAocmVzdWx0KSBvbkNvbmZpcm1lZD8uKCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsCiAgICAiaW1wb3J0IGNoaWxkX3Byb2Nlc3MgZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcblxuZnVuY3Rpb24gaXNEZWZpbmVkPFQ+KHZhbDogYW55KTogdmFsIGlzIFQge1xuICByZXR1cm4gdmFsICE9PSB2b2lkIDAgJiYgdmFsICE9PSBudWxsO1xufVxuXG4vKipcbiAqIFR5cGUgZ3VhcmQgZm9yIGVycm9ycyB0aHJvd24gZnJvbSB0aGUgY2hpbGRfcHJvY2Vzcy5leGVjRmlsZVN5bmMgbWV0aG9kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDaGlsZFByb2Nlc3NFcnJvcihcbiAgdmFsOiBhbnlcbik6IHZhbCBpcyBjaGlsZF9wcm9jZXNzLlNwYXduU3luY1JldHVybnM8QnVmZmVyPiB7XG4gIHJldHVybiAoXG4gICAgaXNEZWZpbmVkPGFueT4odmFsKSAmJlxuICAgIGlzRGVmaW5lZDxhbnk+KHZhbC5zdGF0dXMpICYmXG4gICAgaXNEZWZpbmVkPGFueT4odmFsLnN0ZGVycilcbiAgKTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgaXNDaGlsZFByb2Nlc3NFcnJvciB9IGZyb20gXCIuLi91dGlsL2lzLWNoaWxkLXByb2Nlc3MtZXJyb3IuanNcIjtcbmltcG9ydCB7IGlzRGVmaW5lZCB9IGZyb20gXCIuLi91dGlsL3R5cGVzLmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUV4ZWNTeW5jIHtcbiAgLyoqIFNldCB0byB0cnVlIHRvIHByZXZlbnQgZXJyb3IgbG9ncyAqL1xuICBzaWxlbnQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGEgY29tbWFuZCBvbiB0aGUgc2FtZSBzdGRpbyBhcyB0aGUgY3VycmVudCBwcm9jZXNzLiBUaGlzIGFic29yYnNcbiAqIGVycm9ycyBhbmQgYWxzbyBpZ25vcmVzIG51bGwvdW5kZWZpbmVkIGFyZ3VtZW50cy5cbiAqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGNvbW1hbmQgc3VjY2VlZGVkLlxuICovXG5hc3luYyBmdW5jdGlvbiBydW4oY29tbWFuZDogc3RyaW5nLCBhcmdzOiAoc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZClbXSA9IFtdKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gQnVuLnNwYXduU3luYyhbY29tbWFuZCwgLi4uYXJncy5maWx0ZXIoaXNEZWZpbmVkKV0sIHtcbiAgICAgIHN0ZGlvOiBbXCJpbmhlcml0XCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIl0sXG4gICAgICBlbnY6IHByb2Nlc3MuZW52LFxuICAgIH0pO1xuXG4gICAgaWYgKHJlc3VsdC5leGl0Q29kZSAhPT0gMCkge1xuICAgICAgaWYgKCFydW4uc2lsZW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgYEVycm9yOiAke2NvbW1hbmR9ICR7YXJncy5qb2luKFwiIFwiKX0gZmFpbGVkIHdpdGggY29kZTogJHtcbiAgICAgICAgICAgIHJlc3VsdC5leGl0Q29kZVxuICAgICAgICAgIH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKCkuc3RhY2spO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKCFydW4uc2lsZW50KSB7XG4gICAgICBpZiAoaXNDaGlsZFByb2Nlc3NFcnJvcihlcnIpKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgYEVycm9yOiAke2NvbW1hbmR9ICR7YXJncy5qb2luKFwiIFwiKX0gZmFpbGVkIHdpdGggY29kZTogJHtlcnIuc3RhdHVzfWBcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBEZWZhdWx0IHRoZSBleGVjdXRpb24gc3R5bGUuXG5ydW4uc2lsZW50ID0gZmFsc2U7XG5cbmV4cG9ydCBjb25zdCBleGVjU3luYzogdHlwZW9mIHJ1biAmIElFeGVjU3luYyA9IHJ1bjtcbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi9leGVjLXN5bmMuanNcIjtcblxubGV0IG1lbW9pemVkOiBbXCJidW5cIiwgXCJidW54XCJdIHwgW1wibnBtXCIsIFwibnB4XCJdIHwgbnVsbCA9IG51bGw7XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSBjb3JyZWN0IGFuZCBtb3N0IGlkZWFsIHBhY2thZ2UgbWFuYWdlciB0byB1c2UgZm9yIGEgY29tbWFuZC5cbiAqIEZpcnN0IHZhbHVlIHdpbGwgYmUgdGhlIHBhY2thZ2UgbWFuYWdlciBjb21tYW5kLCB0aGUgc2Vjb25kIHdpbGwgYmUgdGhlIGF1dG9cbiAqIGV4ZWN1dGlvbiBtYW5hZ2VyIG9mIHRoYXQgbWFuYWdlciBpZSAtIFtucG0sIG5weF1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhY2thZ2VNYW5hZ2VyKCkge1xuICBpZiAobWVtb2l6ZWQpIHJldHVybiBtZW1vaXplZDtcblxuICBpZiAoYXdhaXQgZXhlY1N5bmMoXCJidW5cIiwgW1wiLS12ZXJzaW9uXCJdKSkge1xuICAgIG1lbW9pemVkID0gW1wiYnVuXCIsIFwiYnVueFwiXTtcbiAgfSBlbHNlIHtcbiAgICBtZW1vaXplZCA9IFtcIm5wbVwiLCBcIm5weFwiXTtcbiAgfVxuXG4gIHJldHVybiBtZW1vaXplZDtcbn1cbiIsCiAgICAiLyoqXG4gKiBBIHNpbXBsZSB3YWl0IG1ldGhvZCBmb3IgYSBkdXJhdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2FpdCh0OiBudW1iZXIpIHtcbiAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgdCkpO1xufVxuIiwKICAgICJpbXBvcnQgKiBhcyBWaXRlIGZyb20gXCJ2aXRlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vdXRpbC9jaGFsay5qc1wiO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHZpdGUgY29uZmlnIHN1aXRhYmxlIGZvciBydW5uaW5nIGEgVml0ZS5idWlsZCBvcGVyYXRpb24uIFRoZVxuICogdmFyaW91cyBhdmFpbGFibGUgdGFyZ2V0cyBtb2RpZmllcyB0aGUgYmVoYXZpb3IgdG8gdGFyZ2V0IGRpZmZlcmVudCBmb2xkZXJzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYnVpbGRWaXRlQ29uZmlnKCkge1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJCdWlsZGluZyBWaXRlIGNvbmZpZyB1c2luZyBiYXNlOlwiLFxuICAgIGNoYWxrLnllbGxvd0JyaWdodEJvbGQocGF0aC5yZXNvbHZlKFwidml0ZS5jb25maWcudHNcIikpXG4gICk7XG4gIC8vIFN0YXJ0IHdpdGggdGhlIHRhcmdldCBwcm9qZWN0IGRlZmluZWQgY29uZmlndXJhdGlvblxuICBsZXQgY29uZmlnOiBWaXRlLlVzZXJDb25maWcgPSBhd2FpdCAoXG4gICAgYXdhaXQgaW1wb3J0KHBhdGgucmVzb2x2ZShcInZpdGUuY29uZmlnLnRzXCIpKVxuICApLmRlZmF1bHQoKTtcblxuICAvLyBJbXBvcnQgdGhlIHRhcmdldCBwcm9qZWN0J3MgdHNjb25maWcgc28gd2UgY2FuIGluY2x1ZGUgdGhlIHNhbWUgaW5jbHVzaW9uc1xuICAvLyB0aGUgVFMgY29tcGlsZXIgd291bGQgdXNlIGZvciB0aGUgd2F0Y2ggcHJvY2Vzcy5cbiAgY29uc3QgdHNjb25maWcgPSBhd2FpdCBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcuanNvblwiKSk7XG5cbiAgY29uZmlnID0ge1xuICAgIC4uLmNvbmZpZyxcbiAgICBsb2dMZXZlbDogXCJpbmZvXCIsXG4gICAgbW9kZTogXCJkZXZlbG9wbWVudFwiLFxuICAgIHJvb3Q6IHBhdGgucmVzb2x2ZShcImFwcC9jbGllbnRcIiksXG4gICAgY2xlYXJTY3JlZW46IHRydWUsXG4gICAgYnVpbGQ6IHtcbiAgICAgIC4uLmNvbmZpZy5idWlsZCxcbiAgICAgIGNzc0NvZGVTcGxpdDogdHJ1ZSxcbiAgICAgIG91dERpcjogcGF0aC5yZXNvbHZlKFwiYnVpbGQvY2xpZW50XCIpLFxuICAgICAgc291cmNlbWFwOiB0cnVlLFxuICAgICAgcm9sbHVwT3B0aW9uczoge1xuICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICBtYW51YWxDaHVua3M6IHVuZGVmaW5lZCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB3YXRjaDoge1xuICAgICAgICAuLi5jb25maWcuYnVpbGQ/LndhdGNoLFxuICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgLi4uKChBcnJheS5pc0FycmF5KGNvbmZpZy5idWlsZD8ud2F0Y2g/LmluY2x1ZGUpXG4gICAgICAgICAgICA/IGNvbmZpZy5idWlsZD8ud2F0Y2g/LmluY2x1ZGVcbiAgICAgICAgICAgIDogW2NvbmZpZy5idWlsZD8ud2F0Y2g/LmluY2x1ZGVdKSB8fCBbXSksXG4gICAgICAgICAgLi4uKHRzY29uZmlnPy5pbmNsdWRlPy5tYXAoKGk6IHN0cmluZykgPT4gcGF0aC5yZXNvbHZlKGkpKSB8fCBbXSksXG4gICAgICAgICAgXCJ0c2NvbmZpZy5qc29uXCIsXG4gICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pLFxuICAgICAgfSxcbiAgICAgIGVtcHR5T3V0RGlyOiB0cnVlLFxuICAgIH0sXG4gICAgcmVzb2x2ZToge1xuICAgICAgYWxpYXM6IHtcbiAgICAgICAgY29uZmlnOiBwYXRoLnJlc29sdmUoYGFwcC9jb25maWdgKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcblxuICByZXR1cm4gY29uZmlnO1xufVxuIiwKICAgICJpbXBvcnQgZGVlcG1lcmdlIGZyb20gXCJkZWVwbWVyZ2VcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzKCkge1xuICBjb25zdCBwYWNrYWdlSnNvbiA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuXG4gIHJldHVybiBkZWVwbWVyZ2U8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4oXG4gICAgcGFja2FnZUpzb24uZGVwZW5kZW5jaWVzIHx8IHt9LFxuICAgIHBhY2thZ2VKc29uLnBlZXJEZXBlbmRlbmNpZXMgfHwge31cbiAgKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRhcmdldFByb2plY3RWZXJzaW9uKCkge1xuICBjb25zdCBwYWNrYWdlSnNvbiA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICByZXR1cm4gcGFja2FnZUpzb24udmVyc2lvbiB8fCBcIlwiO1xufVxuIiwKICAgICJpbXBvcnQgKiBhcyBWaXRlIGZyb20gXCJ2aXRlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgYnVpbGRWaXRlQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2J1aWxkLXZpdGUtY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzIH0gZnJvbSBcIi4uLy4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LWRlcGVuZGVuY2llcy5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgdGhlIGJ1bmRsaW5nIHByb2Nlc3MgZm9yIGRpc3RyaWJ1dGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKCkge1xuICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiA9XG4gICAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gfHwgKGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCkpO1xuXG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiU3RhcnRpbmcgVml0ZSBjbGllbnQgYnVpbGQuLi5cIikpO1xuICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiYXBwL2NsaWVudC9pbmRleC50c1wiKSkpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIlRyaWVkIHRvIHN0YXJ0IGRldmVsb3BtZW50IHByb2Nlc3MgZm9yIHRoZSBhcHAgY2xpZW50LCBidXQgbm8gZW50cnkgZmlsZSB3YXMgZm91bmQuXCJcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGJ1aWxkVml0ZUNvbmZpZygpO1xuXG4gIGNvbmZpZy5yb290ID0gcGF0aC5yZXNvbHZlKFwiYXBwL2NsaWVudFwiKTtcbiAgY29uZmlnLmJ1aWxkIS5vdXREaXIgPSBwYXRoLnJlc29sdmUoXCJidWlsZC9jbGllbnRcIik7XG5cbiAgY29uZmlnLmJ1aWxkIS5yb2xsdXBPcHRpb25zIS5leHRlcm5hbCA9IE9iamVjdC5rZXlzKFxuICAgIGF3YWl0IHRhcmdldFByb2plY3REZXBlbmRlbmNpZXMoKVxuICApO1xuXG4gIGF3YWl0IFZpdGUuYnVpbGQoY29uZmlnKTtcbiAgY29uc29sZS53YXJuKGNoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJWaXRlIGNsaWVudCBidWlsZCBwcm9jZXNzIHN0YXJ0ZWQuLi5cIikpO1xufVxuIiwKICAgICIvKipcbiAqIExpc3RlbnMgZm9yIHByb2Nlc3MgZXhpdCBzaWduYWxzIG9mIHZhcmlvdXMgdHlwZXMgYW5kIGZpcmVzIHRoZSBwcm92aWRlZFxuICogY2FsbGJhY2sgd2hlbiBpdCBoYXBwZW5zIHdpdGggc29tZSBlYXN5IHRvIGhhbmRsZSBkZXRhaWxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUHJvY2Vzc0V4aXQoXG4gIGNiOiAobWVzc2FnZTogc3RyaW5nLCBlcnI/OiBFcnJvciB8IHN0cmluZyB8IG51bWJlcikgPT4gUHJvbWlzZTx2b2lkPlxuKSB7XG4gIGNvbnN0IGhhbmRsZUV4aXQgPSAobWVzc2FnZTogc3RyaW5nKSA9PiAoZXJyPzogRXJyb3IgfCBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICBjYihtZXNzYWdlLCBlcnIpO1xuICAgIGlmIChlcnIpIHByb2Nlc3MuZXhpdCgxKTtcbiAgICBlbHNlIHByb2Nlc3MuZXhpdCgwKTtcbiAgfTtcblxuICAvLyBDYXRjaCB3aGVuIGFwcCBpcyBjbG9zaW5nXG4gIHByb2Nlc3Mub24oXCJleGl0XCIsIGhhbmRsZUV4aXQoXCJleGl0XCIpKTtcbiAgLy8gQ2F0Y2ggY3RybCtjIGV2ZW50XG4gIHByb2Nlc3Mub24oXCJTSUdJTlRcIiwgaGFuZGxlRXhpdChcIlNJR0lOVFwiKSk7XG4gIC8vIENhdGNoIFwia2lsbCBwaWRcIiAoZm9yIGV4YW1wbGU6IG5vZGVtb24gcmVzdGFydClcbiAgcHJvY2Vzcy5vbihcIlNJR1VTUjFcIiwgaGFuZGxlRXhpdChcIlNJR1VTUjFcIikpO1xuICBwcm9jZXNzLm9uKFwiU0lHVVNSMlwiLCBoYW5kbGVFeGl0KFwiU0lHVVNSMlwiKSk7XG4gIHByb2Nlc3Mub24oXCJTSUdURVJNXCIsIGhhbmRsZUV4aXQoXCJTSUdURVJNXCIpKTtcbiAgLy8gQ2F0Y2ggdW5jYXVnaHQgZXhjZXB0aW9uc1xuICBwcm9jZXNzLm9uKFwidW5jYXVnaHRFeGNlcHRpb25cIiwgaGFuZGxlRXhpdChcInVuY2F1Z2h0RXhjZXB0aW9uXCIpKTtcbn1cbiIsCiAgICAiY29uc3QgcXVldWU6IGFueVtdW10gPSBbXTtcbmxldCBxdWV1ZUlkOiBUaW1lciB8IG51bGwgPSBudWxsO1xuXG5mdW5jdGlvbiBzdGFydFF1ZXVlKCkge1xuICBpZiAocXVldWVJZCAhPT0gbnVsbCkgcmV0dXJuO1xuXG4gIHF1ZXVlSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5sb2coLi4ubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICB9LCA0MDApO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSBzaW1wbGUgcXVldWUgZm9yIGxvZ2dpbmcgbWVzc2FnZXMgYXQgZ2l2ZW4gaW50ZXJ2YWxzIHdoaWNoIHByZXZlbnRzXG4gKiBzb21lIGxvZ2dpbmcgaW5maWdodGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gbG9nUXVldWUoLi4ubWVzc2FnZTogYW55W10pIHtcbiAgcXVldWUucHVzaChtZXNzYWdlKTtcbiAgc3RhcnRRdWV1ZSgpO1xufVxuIiwKICAgICJpbXBvcnQgYnVpbGRDbGllbnQgZnJvbSBcIi4vYnVpbGQtY2xpZW50LmpzXCI7XG5pbXBvcnQgY2hpbGRfcHJvY2VzcyBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCByZWFkbGluZSBmcm9tIFwicmVhZGxpbmVcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGdldFBhY2thZ2VNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uLy4uL2V4ZWMvZ2V0LXBhY2thZ2UtbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgaGFuZGxlUHJvY2Vzc0V4aXQgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9oYW5kbGUtcHJvY2Vzcy1leGl0LmpzXCI7XG5pbXBvcnQgeyBsb2dRdWV1ZSB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2xvZy1xdWV1ZS5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG4vKipcbiAqIEVudHJ5IG1ldGhvZCBmb3IgdGhlIGFwcCBkZXYgc2VydmVyXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bihcbiAgbGlzdGVuZXI/OiAoY2hpbGQ6IGNoaWxkX3Byb2Nlc3MuQ2hpbGRQcm9jZXNzV2l0aG91dE51bGxTdHJlYW1zKSA9PiB2b2lkXG4pIHtcbiAgY29uc29sZS53YXJuKFxuICAgIFwiXFxuUnVubmluZyB0aGUgQXBwIHNlcnZlciBhdDogXCIsXG4gICAgY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChwYXRoLnJlc29sdmUoXCJhcHAvc2VydmVyXCIpKSxcbiAgICBcIlxcblwiXG4gICk7XG5cbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPVxuICAgIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OIHx8IChhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpKTtcbiAgcHJvY2Vzcy5lbnYuUkVTT1VSQ0VfUEFUSCA9XG4gICAgcHJvY2Vzcy5lbnYuUkVTT1VSQ0VfUEFUSCB8fCBwYXRoLnJlc29sdmUoXCJidWlsZC9jbGllbnRcIik7XG4gIGNvbnN0IHBhY2thZ2VNYW5hZ2VyID0gYXdhaXQgZ2V0UGFja2FnZU1hbmFnZXIoKTtcblxuICBpZiAocGFja2FnZU1hbmFnZXJbMF0gIT09IFwiYnVuXCIpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJDdXJyZW50bHkgb25seSBhbiBlbnZpcm9ubWVudCB3aXRoIGJ1biBpbnN0YWxsZWQgaXMgc3VwcG9ydGVkIGZvciB0aGlzIGNvbW1hbmQuXCJcbiAgICApO1xuICB9XG5cbiAgY29uc3QgY2hpbGRQcm9jZXNzID0gY2hpbGRfcHJvY2Vzcy5zcGF3bihwYWNrYWdlTWFuYWdlclswXSwgW1xuICAgIFwiLS13YXRjaFwiLFxuICAgIHBhdGgucmVzb2x2ZShcImFwcC9zZXJ2ZXIvaW5kZXgudHNcIiksXG4gIF0pO1xuXG4gIC8vIExpc3RlbiBmb3IgdGhlIGIga2V5IHRvIGJlIHByZXNzZWQuIFRoaXMgc2hvdWxkIHRyaWdnZXIgYSBkZW1vIGJ1aWxkIG9mIHRoZVxuICAvLyBhcHAgYW5kIG91dHB1dCB0byB0aGUgYnVpbGQgZm9sZGVyLiBUaGlzIGlzIG1lYW50IGZvciB0ZXN0aW5nIHRoZSBidWlsZCBhbmRcbiAgLy8gbm90aGluZyBlbHNlLlxuICBwcm9jZXNzLnN0ZGluLnNldFJhd01vZGU/Lih0cnVlKTtcbiAgcHJvY2Vzcy5zdGRpbi5yZXN1bWUoKTtcbiAgcHJvY2Vzcy5zdGRpbi5zZXRFbmNvZGluZyhcInV0ZjhcIik7XG4gIHJlYWRsaW5lLmVtaXRLZXlwcmVzc0V2ZW50cyhwcm9jZXNzLnN0ZGluKTtcbiAgbGV0IGJ1aWxkaW5nID0gZmFsc2U7XG5cbiAgcHJvY2Vzcy5zdGRpbi5vbihcImtleXByZXNzXCIsIGFzeW5jIChjaHVuaywga2V5KSA9PiB7XG4gICAgaWYgKGtleSAmJiBrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gXCJjXCIpIHtcbiAgICAgIGNoaWxkUHJvY2Vzcy5raWxsKCk7XG4gICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgfSBlbHNlIGlmIChrZXkgJiYga2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09IFwiZFwiKSB7XG4gICAgICBjaGlsZFByb2Nlc3Mua2lsbCgpO1xuICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgIH0gZWxzZSBpZiAoY2h1bmsudG9TdHJpbmcoKSA9PT0gXCJiXCIgfHwgY2h1bmsudG9TdHJpbmcoKSA9PT0gXCJCXCIpIHtcbiAgICAgIGlmIChidWlsZGluZykgcmV0dXJuO1xuICAgICAgYnVpbGRpbmcgPSB0cnVlO1xuICAgICAgYXdhaXQgYnVpbGRDbGllbnQoKTtcbiAgICAgIGJ1aWxkaW5nID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChjaHVuay50b1N0cmluZygpID09PSBcInFcIiB8fCBjaHVuay50b1N0cmluZygpID09PSBcIlFcIikge1xuICAgICAgY2hpbGRQcm9jZXNzLmtpbGwoKTtcblxuICAgICAgLy8gU3BlY2lhbCBxdWl0IGNvZGUgdG8gaW5kaWNhdGUgd2Ugd2FudCBhIHNwZWNpYWwgc2h1dGRvd24gcm91dGluZS5cbiAgICAgIGlmIChrZXkuc2hpZnQpIHtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEyMyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBNYWtlIHN1cmUgdGhlIHNlcnZlciBhcHBsaWNhdGlvbiByZWNlaXZlcyBpbnB1dCBmcm9tIHRoZSB0ZXJtaW5hbFxuICBwcm9jZXNzLnN0ZGluLnBpcGUoY2hpbGRQcm9jZXNzLnN0ZGluKTtcblxuICBpZiAobGlzdGVuZXIpIHtcbiAgICBsaXN0ZW5lcihjaGlsZFByb2Nlc3MpO1xuICB9IGVsc2Uge1xuICAgIGNoaWxkUHJvY2Vzcy5zdGRvdXQub24oXCJkYXRhXCIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBsb2dRdWV1ZShgJHtkYXRhLnRvU3RyaW5nKCkuc2xpY2UoMCwgLTEpfWApO1xuICAgIH0pO1xuXG4gICAgY2hpbGRQcm9jZXNzLnN0ZGVyci5vbihcImRhdGFcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGxvZ1F1ZXVlKGAke2RhdGEudG9TdHJpbmcoKS5zbGljZSgwLCAtMSl9YCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBIYW5kbGUgd2hlbiB0aGUgcHJvY2VzcyBleGlzdHMgYnkgY2xlYW5pbmcgdXAgYW55IGNoaWxkIHByb2Nlc3NlcyBldGNcbiAgaGFuZGxlUHJvY2Vzc0V4aXQoYXN5bmMgKG1lc3NhZ2U6IHN0cmluZywgZXJyPzogRXJyb3IgfCBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICBjaGlsZFByb2Nlc3Mua2lsbCgpO1xuICAgIGNvbnNvbGUud2FybihcIkVYSVQgQlVJTEQgU0VSVkVSXCIpO1xuICAgIGNvbnNvbGUud2FybihjaGFsay5yZWRCcmlnaHRCb2xkKG1lc3NhZ2UpKTtcbiAgICBpZiAoZXJyICYmIGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oY2hhbGsucmVkQnJpZ2h0Qm9sZChlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpKTtcbiAgICB9XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9KTtcbn1cbiIsCiAgICAiaW1wb3J0IGJ1aWxkQ2xpZW50IGZyb20gXCIuLi8uLi9saWIvYnVpbGQvd2ViLWFwcC92aXRlL2J1aWxkLWNsaWVudC5qc1wiO1xuaW1wb3J0IHJ1bkFwcFNlcnZlciBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9ydW4tYXBwLXNlcnZlci5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3RWZXJzaW9uIH0gZnJvbSBcIi4uLy4uL2xpYi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC12ZXJzaW9uLmpzXCI7XG5cbi8qKlxuICogRW50cnkgcG9pbnQgZm9yIHRoaXMgc2NyaXB0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBcImRldmVsb3BtZW50XCI7XG5cbiAgLy8gQnVpbGQgdGhlIGNsaWVudCBpbiB3YXRjaCBtb2RlLiBUaGUgQ2xpZW50IGJ1aWxkIElTIE9OTFkgbWFkZSBzbyB3ZSBjYW4gc2VlXG4gIC8vIHRoZSBnZW5lcmF0ZWQgZmlsZXMgdG8gYWlkIGluIGRlYnVnZ2luZy5cbiAgYnVpbGRDbGllbnQoKTtcblxuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIlN0YXJ0aW5nIGRldiBzZXJ2ZXIuLi5cIikpO1xuICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiA9IGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCk7XG4gIGF3YWl0IHJ1bkFwcFNlcnZlcigpO1xufVxuIiwKICAgICJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHVybCBmcm9tIFwidXJsXCI7XG5cbmNvbnN0IF9fZGlybmFtZSA9IHVybC5maWxlVVJMVG9QYXRoKG5ldyBVUkwoXCIuXCIsIGltcG9ydC5tZXRhLnVybCkpO1xuXG4vKipcbiAqIFRoaXMgcmV0dXJucyB0aGUgcGF0aCB0byB0aGUgcm9vdCBvZiB0aGUgZGV2b3BzIHByb2plY3QgKGluc3RhbGxhdGlvbiBvclxuICogZGV2ZWxvcG1lbnQgbG9jYXRpb24pXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXZvcHNQcm9qZWN0UGF0aCgpIHtcbiAgY29uc3QgaXNEaXN0ID0gcGF0aC5iYXNlbmFtZShwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uXCIpKSA9PT0gXCJkaXN0XCI7XG4gIGlmIChpc0Rpc3QpIHJldHVybiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uLy4uL1wiKTtcbiAgcmV0dXJuIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi4vLi4vLi4vXCIpO1xufVxuIiwKICAgICJpbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgZ2V0UGFja2FnZU1hbmFnZXIgfSBmcm9tIFwiLi9nZXQtcGFja2FnZS1tYW5hZ2VyLmpzXCI7XG5cbi8qKlxuICogRXhlY3V0ZXMgYW4gYG5wbSBydW4gPGNvbW1hbmQ+YCBpbiB0aGUgY3VycmVudCBjb250ZXh0LlxuICpcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY29tbWFuZCBzdWNjZWVkZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjU2NyaXB0KFxuICBjb21tYW5kOiBzdHJpbmcsXG4gIGFyZ3M6IChzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsKVtdID0gW11cbikge1xuICBjb25zdCBtYW5hZ2VyID0gYXdhaXQgZ2V0UGFja2FnZU1hbmFnZXIoKTtcblxuICByZXR1cm4gZXhlY1N5bmMobWFuYWdlclswXSwgW1xuICAgIFwicnVuXCIsXG4gICAgY29tbWFuZCxcbiAgICBhcmdzLmxlbmd0aCA+IDAgJiYgYXJnc1swXSAhPT0gXCItLVwiID8gXCItLVwiIDogdm9pZCAwLFxuICAgIC4uLmFyZ3MsXG4gIF0pO1xufVxuIiwKICAgICJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGRldm9wc1Byb2plY3RQYXRoIH0gZnJvbSBcIi4uL2xpYi9kZXZvcHMtcHJvamVjdC9kZXZvcHMtcHJvamVjdC1wYXRoLmpzXCI7XG5pbXBvcnQgeyBleGVjU2NyaXB0IH0gZnJvbSBcIi4uL2xpYi9leGVjL2V4ZWMtc2NyaXB0LmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0VmVyc2lvbiB9IGZyb20gXCIuLi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG4vKipcbiAqIFRoaXMgcnVucyBzdG9yeWJvb2sgaW4gdGhpcyBjb250ZXh0IG9uIGJlaGFsZiBvZiB0aGUgcHJvamVjdCB0aGUgZGV2b3BzIGlzXG4gKiBpbnN0YWxsZWQgd2l0aGluLlxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oXG4gIGJ1aWxkOiBzdHJpbmcsXG4gIGluY2x1ZGU6IHN0cmluZ1tdLFxuICAuLi5fYXJnczogYW55W11cbikge1xuICBjb25zdCBQUk9KRUNUX1JPT1QgPSBwYXRoLnJlc29sdmUoXCIuXCIpO1xuICBwcm9jZXNzLmVudi5QUk9KRUNUX1JPT1QgPSBQUk9KRUNUX1JPT1Q7XG4gIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OID0gYXdhaXQgdGFyZ2V0UHJvamVjdFZlcnNpb24oKTtcbiAgY29uc3Qgc3Rvcnlib29rQ29uZmlnUGF0aCA9IHBhdGgucmVzb2x2ZShcIi5zdG9yeWJvb2tcIik7XG4gIC8vIFJ1biB0aGlzIHBhY2thZ2UncyBzdG9yeWJvb2sgc2NyaXB0IGNvbW1hbmQuXG4gIGNvbnN0IHJvb3RQYXRoID0gYXdhaXQgZGV2b3BzUHJvamVjdFBhdGgoKTtcbiAgcHJvY2Vzcy5jaGRpcihyb290UGF0aCk7XG5cbiAgLy8gU2V0IHVwIGFuIGVudmlyb25tZW50IHRoYXQgd2lsbCBiZSBwcm9jZXNzZWQgaW4gdGhlIG1haW4uanMgb2Ygc3Rvcnl5Ym9va1xuICAvLyBjb25maWcuIFRoaXMgd2lsbCBjYXVzZSBhbGwgc3BlY2lmaWVkIG1vZHVsZXMgdG8gYmUgbG9va2VkIGZvciB3aGVuXG4gIC8vIGdhdGhlcmluZyBzdG9yaWVzIHRvIGluY2x1ZGUgaW4gdGhlIGJ1aWxkLlxuICBpZiAoaW5jbHVkZSAmJiBpbmNsdWRlLmxlbmd0aCA+IDApIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX01PRFVMRVNfU1RPUklFUyA9IGluY2x1ZGUuam9pbihcIixcIik7XG4gIH1cblxuICBpZiAoYnVpbGQgPT09IFwiYnVpbGRcIikge1xuICAgIGlmIChcbiAgICAgICFleGVjU2NyaXB0KFwic3Rvcnlib29rXCIsIFtcbiAgICAgICAgXCJidWlsZFwiLFxuICAgICAgICBcIi1jXCIsXG4gICAgICAgIHN0b3J5Ym9va0NvbmZpZ1BhdGgsXG4gICAgICAgIFwiLW9cIixcbiAgICAgICAgYFwiJHtwYXRoLnJlc29sdmUoUFJPSkVDVF9ST09ULCBcInN0b3J5Ym9vay1zdGF0aWNcIil9XCJgLFxuICAgICAgXSlcbiAgICApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoY2hhbGsucmVkQnJpZ2h0Qm9sZChcIkZhaWxlZCB0byBidWlsZCBzdG9yeWJvb2tcIikpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoXG4gICAgICAhZXhlY1NjcmlwdChcInN0b3J5Ym9va1wiLCBbXG4gICAgICAgIFwiZGV2XCIsXG4gICAgICAgIFwiLS1uby12ZXJzaW9uLXVwZGF0ZXNcIixcbiAgICAgICAgXCItcFwiLFxuICAgICAgICBwcm9jZXNzLmVudi5QT1JUIHx8IFwiNjAwNlwiLFxuICAgICAgICBcIi1jXCIsXG4gICAgICAgIGBcIiR7c3Rvcnlib29rQ29uZmlnUGF0aH1cImAsXG4gICAgICBdKVxuICAgICkge1xuICAgICAgY29uc29sZS5lcnJvcihjaGFsay5yZWRCcmlnaHRCb2xkKFwiRmFpbGVkIHRvIHJ1biBzdG9yeWJvb2tcIikpO1xuICAgIH1cbiAgfVxufVxuIiwKICAgICIndXNlIHN0cmljdCc7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cbmxldCBpc0RvY2tlcjtcblxuZnVuY3Rpb24gaGFzRG9ja2VyRW52KCkge1xuXHR0cnkge1xuXHRcdGZzLnN0YXRTeW5jKCcvLmRvY2tlcmVudicpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9IGNhdGNoIChfKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGhhc0RvY2tlckNHcm91cCgpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gZnMucmVhZEZpbGVTeW5jKCcvcHJvYy9zZWxmL2Nncm91cCcsICd1dGY4JykuaW5jbHVkZXMoJ2RvY2tlcicpO1xuXHR9IGNhdGNoIChfKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xuXHRpZiAoaXNEb2NrZXIgPT09IHVuZGVmaW5lZCkge1xuXHRcdGlzRG9ja2VyID0gaGFzRG9ja2VyRW52KCkgfHwgaGFzRG9ja2VyQ0dyb3VwKCk7XG5cdH1cblxuXHRyZXR1cm4gaXNEb2NrZXI7XG59O1xuIiwKICAgICIndXNlIHN0cmljdCc7XG5jb25zdCBvcyA9IHJlcXVpcmUoJ29zJyk7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBpc0RvY2tlciA9IHJlcXVpcmUoJ2lzLWRvY2tlcicpO1xuXG5jb25zdCBpc1dzbCA9ICgpID0+IHtcblx0aWYgKHByb2Nlc3MucGxhdGZvcm0gIT09ICdsaW51eCcpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRpZiAob3MucmVsZWFzZSgpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21pY3Jvc29mdCcpKSB7XG5cdFx0aWYgKGlzRG9ja2VyKCkpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHRyeSB7XG5cdFx0cmV0dXJuIGZzLnJlYWRGaWxlU3luYygnL3Byb2MvdmVyc2lvbicsICd1dGY4JykudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbWljcm9zb2Z0JykgP1xuXHRcdFx0IWlzRG9ja2VyKCkgOiBmYWxzZTtcblx0fSBjYXRjaCAoXykge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcblxuaWYgKHByb2Nlc3MuZW52Ll9fSVNfV1NMX1RFU1RfXykge1xuXHRtb2R1bGUuZXhwb3J0cyA9IGlzV3NsO1xufSBlbHNlIHtcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1dzbCgpO1xufVxuIiwKICAgICIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IChvYmplY3QsIHByb3BlcnR5TmFtZSwgZm4pID0+IHtcblx0Y29uc3QgZGVmaW5lID0gdmFsdWUgPT4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwgcHJvcGVydHlOYW1lLCB7dmFsdWUsIGVudW1lcmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlfSk7XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwgcHJvcGVydHlOYW1lLCB7XG5cdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0Z2V0KCkge1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gZm4oKTtcblx0XHRcdGRlZmluZShyZXN1bHQpO1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9LFxuXHRcdHNldCh2YWx1ZSkge1xuXHRcdFx0ZGVmaW5lKHZhbHVlKTtcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiBvYmplY3Q7XG59O1xuIiwKICAgICJjb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgY2hpbGRQcm9jZXNzID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpO1xuY29uc3Qge3Byb21pc2VzOiBmcywgY29uc3RhbnRzOiBmc0NvbnN0YW50c30gPSByZXF1aXJlKCdmcycpO1xuY29uc3QgaXNXc2wgPSByZXF1aXJlKCdpcy13c2wnKTtcbmNvbnN0IGlzRG9ja2VyID0gcmVxdWlyZSgnaXMtZG9ja2VyJyk7XG5jb25zdCBkZWZpbmVMYXp5UHJvcGVydHkgPSByZXF1aXJlKCdkZWZpbmUtbGF6eS1wcm9wJyk7XG5cbi8vIFBhdGggdG8gaW5jbHVkZWQgYHhkZy1vcGVuYC5cbmNvbnN0IGxvY2FsWGRnT3BlblBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAneGRnLW9wZW4nKTtcblxuY29uc3Qge3BsYXRmb3JtLCBhcmNofSA9IHByb2Nlc3M7XG5cbi8vIFBvZG1hbiBkZXRlY3Rpb25cbmNvbnN0IGhhc0NvbnRhaW5lckVudiA9ICgpID0+IHtcblx0dHJ5IHtcblx0XHRmcy5zdGF0U3luYygnL3J1bi8uY29udGFpbmVyZW52Jyk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcblxubGV0IGNhY2hlZFJlc3VsdDtcbmZ1bmN0aW9uIGlzSW5zaWRlQ29udGFpbmVyKCkge1xuXHRpZiAoY2FjaGVkUmVzdWx0ID09PSB1bmRlZmluZWQpIHtcblx0XHRjYWNoZWRSZXN1bHQgPSBoYXNDb250YWluZXJFbnYoKSB8fCBpc0RvY2tlcigpO1xuXHR9XG5cblx0cmV0dXJuIGNhY2hlZFJlc3VsdDtcbn1cblxuLyoqXG5HZXQgdGhlIG1vdW50IHBvaW50IGZvciBmaXhlZCBkcml2ZXMgaW4gV1NMLlxuXG5AaW5uZXJcbkByZXR1cm5zIHtzdHJpbmd9IFRoZSBtb3VudCBwb2ludC5cbiovXG5jb25zdCBnZXRXc2xEcml2ZXNNb3VudFBvaW50ID0gKCgpID0+IHtcblx0Ly8gRGVmYXVsdCB2YWx1ZSBmb3IgXCJyb290XCIgcGFyYW1cblx0Ly8gYWNjb3JkaW5nIHRvIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL3dpbmRvd3Mvd3NsL3dzbC1jb25maWdcblx0Y29uc3QgZGVmYXVsdE1vdW50UG9pbnQgPSAnL21udC8nO1xuXG5cdGxldCBtb3VudFBvaW50O1xuXG5cdHJldHVybiBhc3luYyBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKG1vdW50UG9pbnQpIHtcblx0XHRcdC8vIFJldHVybiBtZW1vaXplZCBtb3VudCBwb2ludCB2YWx1ZVxuXHRcdFx0cmV0dXJuIG1vdW50UG9pbnQ7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29uZmlnRmlsZVBhdGggPSAnL2V0Yy93c2wuY29uZic7XG5cblx0XHRsZXQgaXNDb25maWdGaWxlRXhpc3RzID0gZmFsc2U7XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IGZzLmFjY2Vzcyhjb25maWdGaWxlUGF0aCwgZnNDb25zdGFudHMuRl9PSyk7XG5cdFx0XHRpc0NvbmZpZ0ZpbGVFeGlzdHMgPSB0cnVlO1xuXHRcdH0gY2F0Y2gge31cblxuXHRcdGlmICghaXNDb25maWdGaWxlRXhpc3RzKSB7XG5cdFx0XHRyZXR1cm4gZGVmYXVsdE1vdW50UG9pbnQ7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29uZmlnQ29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKGNvbmZpZ0ZpbGVQYXRoLCB7ZW5jb2Rpbmc6ICd1dGY4J30pO1xuXHRcdGNvbnN0IGNvbmZpZ01vdW50UG9pbnQgPSAvKD88ISMuKilyb290XFxzKj1cXHMqKD88bW91bnRQb2ludD4uKikvZy5leGVjKGNvbmZpZ0NvbnRlbnQpO1xuXG5cdFx0aWYgKCFjb25maWdNb3VudFBvaW50KSB7XG5cdFx0XHRyZXR1cm4gZGVmYXVsdE1vdW50UG9pbnQ7XG5cdFx0fVxuXG5cdFx0bW91bnRQb2ludCA9IGNvbmZpZ01vdW50UG9pbnQuZ3JvdXBzLm1vdW50UG9pbnQudHJpbSgpO1xuXHRcdG1vdW50UG9pbnQgPSBtb3VudFBvaW50LmVuZHNXaXRoKCcvJykgPyBtb3VudFBvaW50IDogYCR7bW91bnRQb2ludH0vYDtcblxuXHRcdHJldHVybiBtb3VudFBvaW50O1xuXHR9O1xufSkoKTtcblxuY29uc3QgcFRyeUVhY2ggPSBhc3luYyAoYXJyYXksIG1hcHBlcikgPT4ge1xuXHRsZXQgbGF0ZXN0RXJyb3I7XG5cblx0Zm9yIChjb25zdCBpdGVtIG9mIGFycmF5KSB7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBhd2FpdCBtYXBwZXIoaXRlbSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tYXdhaXQtaW4tbG9vcFxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRsYXRlc3RFcnJvciA9IGVycm9yO1xuXHRcdH1cblx0fVxuXG5cdHRocm93IGxhdGVzdEVycm9yO1xufTtcblxuY29uc3QgYmFzZU9wZW4gPSBhc3luYyBvcHRpb25zID0+IHtcblx0b3B0aW9ucyA9IHtcblx0XHR3YWl0OiBmYWxzZSxcblx0XHRiYWNrZ3JvdW5kOiBmYWxzZSxcblx0XHRuZXdJbnN0YW5jZTogZmFsc2UsXG5cdFx0YWxsb3dOb256ZXJvRXhpdENvZGU6IGZhbHNlLFxuXHRcdC4uLm9wdGlvbnNcblx0fTtcblxuXHRpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmFwcCkpIHtcblx0XHRyZXR1cm4gcFRyeUVhY2gob3B0aW9ucy5hcHAsIHNpbmdsZUFwcCA9PiBiYXNlT3Blbih7XG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0YXBwOiBzaW5nbGVBcHBcblx0XHR9KSk7XG5cdH1cblxuXHRsZXQge25hbWU6IGFwcCwgYXJndW1lbnRzOiBhcHBBcmd1bWVudHMgPSBbXX0gPSBvcHRpb25zLmFwcCB8fCB7fTtcblx0YXBwQXJndW1lbnRzID0gWy4uLmFwcEFyZ3VtZW50c107XG5cblx0aWYgKEFycmF5LmlzQXJyYXkoYXBwKSkge1xuXHRcdHJldHVybiBwVHJ5RWFjaChhcHAsIGFwcE5hbWUgPT4gYmFzZU9wZW4oe1xuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdGFwcDoge1xuXHRcdFx0XHRuYW1lOiBhcHBOYW1lLFxuXHRcdFx0XHRhcmd1bWVudHM6IGFwcEFyZ3VtZW50c1xuXHRcdFx0fVxuXHRcdH0pKTtcblx0fVxuXG5cdGxldCBjb21tYW5kO1xuXHRjb25zdCBjbGlBcmd1bWVudHMgPSBbXTtcblx0Y29uc3QgY2hpbGRQcm9jZXNzT3B0aW9ucyA9IHt9O1xuXG5cdGlmIChwbGF0Zm9ybSA9PT0gJ2RhcndpbicpIHtcblx0XHRjb21tYW5kID0gJ29wZW4nO1xuXG5cdFx0aWYgKG9wdGlvbnMud2FpdCkge1xuXHRcdFx0Y2xpQXJndW1lbnRzLnB1c2goJy0td2FpdC1hcHBzJyk7XG5cdFx0fVxuXG5cdFx0aWYgKG9wdGlvbnMuYmFja2dyb3VuZCkge1xuXHRcdFx0Y2xpQXJndW1lbnRzLnB1c2goJy0tYmFja2dyb3VuZCcpO1xuXHRcdH1cblxuXHRcdGlmIChvcHRpb25zLm5ld0luc3RhbmNlKSB7XG5cdFx0XHRjbGlBcmd1bWVudHMucHVzaCgnLS1uZXcnKTtcblx0XHR9XG5cblx0XHRpZiAoYXBwKSB7XG5cdFx0XHRjbGlBcmd1bWVudHMucHVzaCgnLWEnLCBhcHApO1xuXHRcdH1cblx0fSBlbHNlIGlmIChwbGF0Zm9ybSA9PT0gJ3dpbjMyJyB8fCAoaXNXc2wgJiYgIWlzSW5zaWRlQ29udGFpbmVyKCkgJiYgIWFwcCkpIHtcblx0XHRjb25zdCBtb3VudFBvaW50ID0gYXdhaXQgZ2V0V3NsRHJpdmVzTW91bnRQb2ludCgpO1xuXG5cdFx0Y29tbWFuZCA9IGlzV3NsID9cblx0XHRcdGAke21vdW50UG9pbnR9Yy9XaW5kb3dzL1N5c3RlbTMyL1dpbmRvd3NQb3dlclNoZWxsL3YxLjAvcG93ZXJzaGVsbC5leGVgIDpcblx0XHRcdGAke3Byb2Nlc3MuZW52LlNZU1RFTVJPT1R9XFxcXFN5c3RlbTMyXFxcXFdpbmRvd3NQb3dlclNoZWxsXFxcXHYxLjBcXFxccG93ZXJzaGVsbGA7XG5cblx0XHRjbGlBcmd1bWVudHMucHVzaChcblx0XHRcdCctTm9Qcm9maWxlJyxcblx0XHRcdCctTm9uSW50ZXJhY3RpdmUnLFxuXHRcdFx0J+KAk0V4ZWN1dGlvblBvbGljeScsXG5cdFx0XHQnQnlwYXNzJyxcblx0XHRcdCctRW5jb2RlZENvbW1hbmQnXG5cdFx0KTtcblxuXHRcdGlmICghaXNXc2wpIHtcblx0XHRcdGNoaWxkUHJvY2Vzc09wdGlvbnMud2luZG93c1ZlcmJhdGltQXJndW1lbnRzID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRjb25zdCBlbmNvZGVkQXJndW1lbnRzID0gWydTdGFydCddO1xuXG5cdFx0aWYgKG9wdGlvbnMud2FpdCkge1xuXHRcdFx0ZW5jb2RlZEFyZ3VtZW50cy5wdXNoKCctV2FpdCcpO1xuXHRcdH1cblxuXHRcdGlmIChhcHApIHtcblx0XHRcdC8vIERvdWJsZSBxdW90ZSB3aXRoIGRvdWJsZSBxdW90ZXMgdG8gZW5zdXJlIHRoZSBpbm5lciBxdW90ZXMgYXJlIHBhc3NlZCB0aHJvdWdoLlxuXHRcdFx0Ly8gSW5uZXIgcXVvdGVzIGFyZSBkZWxpbWl0ZWQgZm9yIFBvd2VyU2hlbGwgaW50ZXJwcmV0YXRpb24gd2l0aCBiYWNrdGlja3MuXG5cdFx0XHRlbmNvZGVkQXJndW1lbnRzLnB1c2goYFwiXFxgXCIke2FwcH1cXGBcIlwiYCwgJy1Bcmd1bWVudExpc3QnKTtcblx0XHRcdGlmIChvcHRpb25zLnRhcmdldCkge1xuXHRcdFx0XHRhcHBBcmd1bWVudHMudW5zaGlmdChvcHRpb25zLnRhcmdldCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChvcHRpb25zLnRhcmdldCkge1xuXHRcdFx0ZW5jb2RlZEFyZ3VtZW50cy5wdXNoKGBcIiR7b3B0aW9ucy50YXJnZXR9XCJgKTtcblx0XHR9XG5cblx0XHRpZiAoYXBwQXJndW1lbnRzLmxlbmd0aCA+IDApIHtcblx0XHRcdGFwcEFyZ3VtZW50cyA9IGFwcEFyZ3VtZW50cy5tYXAoYXJnID0+IGBcIlxcYFwiJHthcmd9XFxgXCJcImApO1xuXHRcdFx0ZW5jb2RlZEFyZ3VtZW50cy5wdXNoKGFwcEFyZ3VtZW50cy5qb2luKCcsJykpO1xuXHRcdH1cblxuXHRcdC8vIFVzaW5nIEJhc2U2NC1lbmNvZGVkIGNvbW1hbmQsIGFjY2VwdGVkIGJ5IFBvd2VyU2hlbGwsIHRvIGFsbG93IHNwZWNpYWwgY2hhcmFjdGVycy5cblx0XHRvcHRpb25zLnRhcmdldCA9IEJ1ZmZlci5mcm9tKGVuY29kZWRBcmd1bWVudHMuam9pbignICcpLCAndXRmMTZsZScpLnRvU3RyaW5nKCdiYXNlNjQnKTtcblx0fSBlbHNlIHtcblx0XHRpZiAoYXBwKSB7XG5cdFx0XHRjb21tYW5kID0gYXBwO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBXaGVuIGJ1bmRsZWQgYnkgV2VicGFjaywgdGhlcmUncyBubyBhY3R1YWwgcGFja2FnZSBmaWxlIHBhdGggYW5kIG5vIGxvY2FsIGB4ZGctb3BlbmAuXG5cdFx0XHRjb25zdCBpc0J1bmRsZWQgPSAhX19kaXJuYW1lIHx8IF9fZGlybmFtZSA9PT0gJy8nO1xuXG5cdFx0XHQvLyBDaGVjayBpZiBsb2NhbCBgeGRnLW9wZW5gIGV4aXN0cyBhbmQgaXMgZXhlY3V0YWJsZS5cblx0XHRcdGxldCBleGVMb2NhbFhkZ09wZW4gPSBmYWxzZTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLmFjY2Vzcyhsb2NhbFhkZ09wZW5QYXRoLCBmc0NvbnN0YW50cy5YX09LKTtcblx0XHRcdFx0ZXhlTG9jYWxYZGdPcGVuID0gdHJ1ZTtcblx0XHRcdH0gY2F0Y2gge31cblxuXHRcdFx0Y29uc3QgdXNlU3lzdGVtWGRnT3BlbiA9IHByb2Nlc3MudmVyc2lvbnMuZWxlY3Ryb24gfHxcblx0XHRcdFx0cGxhdGZvcm0gPT09ICdhbmRyb2lkJyB8fCBpc0J1bmRsZWQgfHwgIWV4ZUxvY2FsWGRnT3Blbjtcblx0XHRcdGNvbW1hbmQgPSB1c2VTeXN0ZW1YZGdPcGVuID8gJ3hkZy1vcGVuJyA6IGxvY2FsWGRnT3BlblBhdGg7XG5cdFx0fVxuXG5cdFx0aWYgKGFwcEFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjbGlBcmd1bWVudHMucHVzaCguLi5hcHBBcmd1bWVudHMpO1xuXHRcdH1cblxuXHRcdGlmICghb3B0aW9ucy53YWl0KSB7XG5cdFx0XHQvLyBgeGRnLW9wZW5gIHdpbGwgYmxvY2sgdGhlIHByb2Nlc3MgdW5sZXNzIHN0ZGlvIGlzIGlnbm9yZWRcblx0XHRcdC8vIGFuZCBpdCdzIGRldGFjaGVkIGZyb20gdGhlIHBhcmVudCBldmVuIGlmIGl0J3MgdW5yZWYnZC5cblx0XHRcdGNoaWxkUHJvY2Vzc09wdGlvbnMuc3RkaW8gPSAnaWdub3JlJztcblx0XHRcdGNoaWxkUHJvY2Vzc09wdGlvbnMuZGV0YWNoZWQgPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnRhcmdldCkge1xuXHRcdGNsaUFyZ3VtZW50cy5wdXNoKG9wdGlvbnMudGFyZ2V0KTtcblx0fVxuXG5cdGlmIChwbGF0Zm9ybSA9PT0gJ2RhcndpbicgJiYgYXBwQXJndW1lbnRzLmxlbmd0aCA+IDApIHtcblx0XHRjbGlBcmd1bWVudHMucHVzaCgnLS1hcmdzJywgLi4uYXBwQXJndW1lbnRzKTtcblx0fVxuXG5cdGNvbnN0IHN1YnByb2Nlc3MgPSBjaGlsZFByb2Nlc3Muc3Bhd24oY29tbWFuZCwgY2xpQXJndW1lbnRzLCBjaGlsZFByb2Nlc3NPcHRpb25zKTtcblxuXHRpZiAob3B0aW9ucy53YWl0KSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHN1YnByb2Nlc3Mub25jZSgnZXJyb3InLCByZWplY3QpO1xuXG5cdFx0XHRzdWJwcm9jZXNzLm9uY2UoJ2Nsb3NlJywgZXhpdENvZGUgPT4ge1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMuYWxsb3dOb256ZXJvRXhpdENvZGUgJiYgZXhpdENvZGUgPiAwKSB7XG5cdFx0XHRcdFx0cmVqZWN0KG5ldyBFcnJvcihgRXhpdGVkIHdpdGggY29kZSAke2V4aXRDb2RlfWApKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXNvbHZlKHN1YnByb2Nlc3MpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRzdWJwcm9jZXNzLnVucmVmKCk7XG5cblx0cmV0dXJuIHN1YnByb2Nlc3M7XG59O1xuXG5jb25zdCBvcGVuID0gKHRhcmdldCwgb3B0aW9ucykgPT4ge1xuXHRpZiAodHlwZW9mIHRhcmdldCAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIGB0YXJnZXRgJyk7XG5cdH1cblxuXHRyZXR1cm4gYmFzZU9wZW4oe1xuXHRcdC4uLm9wdGlvbnMsXG5cdFx0dGFyZ2V0XG5cdH0pO1xufTtcblxuY29uc3Qgb3BlbkFwcCA9IChuYW1lLCBvcHRpb25zKSA9PiB7XG5cdGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIGBuYW1lYCcpO1xuXHR9XG5cblx0Y29uc3Qge2FyZ3VtZW50czogYXBwQXJndW1lbnRzID0gW119ID0gb3B0aW9ucyB8fCB7fTtcblx0aWYgKGFwcEFyZ3VtZW50cyAhPT0gdW5kZWZpbmVkICYmIGFwcEFyZ3VtZW50cyAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShhcHBBcmd1bWVudHMpKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYGFwcEFyZ3VtZW50c2AgYXMgQXJyYXkgdHlwZScpO1xuXHR9XG5cblx0cmV0dXJuIGJhc2VPcGVuKHtcblx0XHQuLi5vcHRpb25zLFxuXHRcdGFwcDoge1xuXHRcdFx0bmFtZSxcblx0XHRcdGFyZ3VtZW50czogYXBwQXJndW1lbnRzXG5cdFx0fVxuXHR9KTtcbn07XG5cbmZ1bmN0aW9uIGRldGVjdEFyY2hCaW5hcnkoYmluYXJ5KSB7XG5cdGlmICh0eXBlb2YgYmluYXJ5ID09PSAnc3RyaW5nJyB8fCBBcnJheS5pc0FycmF5KGJpbmFyeSkpIHtcblx0XHRyZXR1cm4gYmluYXJ5O1xuXHR9XG5cblx0Y29uc3Qge1thcmNoXTogYXJjaEJpbmFyeX0gPSBiaW5hcnk7XG5cblx0aWYgKCFhcmNoQmluYXJ5KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGAke2FyY2h9IGlzIG5vdCBzdXBwb3J0ZWRgKTtcblx0fVxuXG5cdHJldHVybiBhcmNoQmluYXJ5O1xufVxuXG5mdW5jdGlvbiBkZXRlY3RQbGF0Zm9ybUJpbmFyeSh7W3BsYXRmb3JtXTogcGxhdGZvcm1CaW5hcnl9LCB7d3NsfSkge1xuXHRpZiAod3NsICYmIGlzV3NsKSB7XG5cdFx0cmV0dXJuIGRldGVjdEFyY2hCaW5hcnkod3NsKTtcblx0fVxuXG5cdGlmICghcGxhdGZvcm1CaW5hcnkpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYCR7cGxhdGZvcm19IGlzIG5vdCBzdXBwb3J0ZWRgKTtcblx0fVxuXG5cdHJldHVybiBkZXRlY3RBcmNoQmluYXJ5KHBsYXRmb3JtQmluYXJ5KTtcbn1cblxuY29uc3QgYXBwcyA9IHt9O1xuXG5kZWZpbmVMYXp5UHJvcGVydHkoYXBwcywgJ2Nocm9tZScsICgpID0+IGRldGVjdFBsYXRmb3JtQmluYXJ5KHtcblx0ZGFyd2luOiAnZ29vZ2xlIGNocm9tZScsXG5cdHdpbjMyOiAnY2hyb21lJyxcblx0bGludXg6IFsnZ29vZ2xlLWNocm9tZScsICdnb29nbGUtY2hyb21lLXN0YWJsZScsICdjaHJvbWl1bSddXG59LCB7XG5cdHdzbDoge1xuXHRcdGlhMzI6ICcvbW50L2MvUHJvZ3JhbSBGaWxlcyAoeDg2KS9Hb29nbGUvQ2hyb21lL0FwcGxpY2F0aW9uL2Nocm9tZS5leGUnLFxuXHRcdHg2NDogWycvbW50L2MvUHJvZ3JhbSBGaWxlcy9Hb29nbGUvQ2hyb21lL0FwcGxpY2F0aW9uL2Nocm9tZS5leGUnLCAnL21udC9jL1Byb2dyYW0gRmlsZXMgKHg4NikvR29vZ2xlL0Nocm9tZS9BcHBsaWNhdGlvbi9jaHJvbWUuZXhlJ11cblx0fVxufSkpO1xuXG5kZWZpbmVMYXp5UHJvcGVydHkoYXBwcywgJ2ZpcmVmb3gnLCAoKSA9PiBkZXRlY3RQbGF0Zm9ybUJpbmFyeSh7XG5cdGRhcndpbjogJ2ZpcmVmb3gnLFxuXHR3aW4zMjogJ0M6XFxcXFByb2dyYW0gRmlsZXNcXFxcTW96aWxsYSBGaXJlZm94XFxcXGZpcmVmb3guZXhlJyxcblx0bGludXg6ICdmaXJlZm94J1xufSwge1xuXHR3c2w6ICcvbW50L2MvUHJvZ3JhbSBGaWxlcy9Nb3ppbGxhIEZpcmVmb3gvZmlyZWZveC5leGUnXG59KSk7XG5cbmRlZmluZUxhenlQcm9wZXJ0eShhcHBzLCAnZWRnZScsICgpID0+IGRldGVjdFBsYXRmb3JtQmluYXJ5KHtcblx0ZGFyd2luOiAnbWljcm9zb2Z0IGVkZ2UnLFxuXHR3aW4zMjogJ21zZWRnZScsXG5cdGxpbnV4OiBbJ21pY3Jvc29mdC1lZGdlJywgJ21pY3Jvc29mdC1lZGdlLWRldiddXG59LCB7XG5cdHdzbDogJy9tbnQvYy9Qcm9ncmFtIEZpbGVzICh4ODYpL01pY3Jvc29mdC9FZGdlL0FwcGxpY2F0aW9uL21zZWRnZS5leGUnXG59KSk7XG5cbm9wZW4uYXBwcyA9IGFwcHM7XG5vcGVuLm9wZW5BcHAgPSBvcGVuQXBwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9wZW47XG4iLAogICAgImltcG9ydCB7IGlzQ2hpbGRQcm9jZXNzRXJyb3IgfSBmcm9tIFwiLi4vdXRpbC9pcy1jaGlsZC1wcm9jZXNzLWVycm9yLmpzXCI7XG5pbXBvcnQgeyBpc0RlZmluZWQgfSBmcm9tIFwiLi4vdXRpbC90eXBlcy5qc1wiO1xuXG4vKipcbiAqIEV4ZWN1dGVzIGEgY29tbWFuZCBvbiB0aGUgc2FtZSBzdGRpbyBhcyB0aGUgY3VycmVudCBwcm9jZXNzLiBUaGlzIGFic29yYnNcbiAqIGVycm9ycyBhbmQgYWxzbyBpZ25vcmVzIG51bGwvdW5kZWZpbmVkIGFyZ3VtZW50cy5cbiAqXG4gKiBSZXR1cm5zIHRoZSBzdGRvdXQgcmVzdWx0IG9mIHRoZSBjb21tYW5kIGlmIGl0IHN1Y2NlZWRzIGFuZCBudWxsIGlmIGl0IGZhaWxzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY1N5bmNSZXN1bHQoXG4gIGNvbW1hbmQ6IHN0cmluZyxcbiAgYXJnczogKHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpW10gPSBbXVxuKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gQnVuLnNwYXduU3luYyhbY29tbWFuZCwgLi4uYXJncy5maWx0ZXIoaXNEZWZpbmVkKV0sIHtcbiAgICAgIHN0ZGlvOiBbXCJpbmhlcml0XCIsIFwicGlwZVwiLCBcInBpcGVcIl0sXG4gICAgICBlbnY6IHByb2Nlc3MuZW52LFxuICAgIH0pO1xuXG4gICAgaWYgKHJlc3VsdC5leGl0Q29kZSAhPT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYEVycm9yOiAke2NvbW1hbmR9ICR7YXJncy5qb2luKFwiIFwiKX0gZmFpbGVkIHdpdGggY29kZTogJHtcbiAgICAgICAgICByZXN1bHQuZXhpdENvZGVcbiAgICAgICAgfWBcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmVycm9yKG5ldyBFcnJvcigpLnN0YWNrKTtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIChyZXN1bHQuc3Rkb3V0IHx8IFwiXCIpLnRvU3RyaW5nKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChpc0NoaWxkUHJvY2Vzc0Vycm9yKGVycikpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBFcnJvcjogJHtjb21tYW5kfSAke2FyZ3Muam9pbihcIiBcIil9IGZhaWxlZCB3aXRoIGNvZGU6ICR7ZXJyLnN0YXR1c31gXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKCkuc3RhY2spO1xuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbiIsCiAgICAiZXhwb3J0IGludGVyZmFjZSBJVGVtcGxhdGVSZXN1bHRzIHtcbiAgLyoqIFRoaXMgaXMgdGhlIHJlc3VsdGluZyB0ZW1wbGF0ZSBzdHJpbmcgZ2VuZXJhdGVkIGZyb20gdGhlIHRlbXBsYXRpbmcgKi9cbiAgdGVtcGxhdGU6IHN0cmluZztcbiAgLyoqIFRoaXMgaXMgdGhlIHRlbXBsYXRlIG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIHRlbXBsYXRlLiB7b3B0aW9uOiBudW0gb2NjdXJyZW5jZXN9ICovXG4gIHRlbXBsYXRlUHJvdmlkZWRPcHRpb25zOiBNYXA8c3RyaW5nLCBudW1iZXI+O1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgdGVtcGxhdGUgb3B0aW9ucyBwcm92aWRlZCBieSB0aGUgdGVtcGxhdGUgdGhhdCB3ZXJlIG5vdCByZXNvbHZlZCBieSB0aGUgb3B0aW9ucyBwYXJhbWV0ZXJcbiAgICoge29wdGlvbjogbnVtIG9jY3VycmVuY2VzfVxuICAgKi9cbiAgdW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9uczogTWFwPHN0cmluZywgbnVtYmVyPjtcbiAgLyoqIFRoaXMgaXMgdGhlIG9wdGlvbnMgcHJvdmlkZWQgdG8gdGhlIHRlbXBsYXRlIHRoYXQgZGlkIG5vdCBnZXQgcmVzb2x2ZWQgYnkgdGhlIHRlbXBsYXRlIHtvcHRpb246IDF9ICovXG4gIHVucmVzb2x2ZWRQcm92aWRlZE9wdGlvbnM6IE1hcDxzdHJpbmcsIG51bWJlcj47XG4gIC8qKiBUaGlzIGlzIHRoZSBsaXN0IG9mIG9wdGlvbnMgdGhhdCBESUQgZ2V0IHJlc29sdmVkIGJ5IHRoZSBvcHRpb25zIHByb3ZpZGVkIHtvcHRpb246IG51bSBvY2N1cnJlbmNlc30gKi9cbiAgcmVzb2x2ZWR0ZW1wbGF0ZU9wdGlvbnM6IE1hcDxzdHJpbmcsIG51bWJlcj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRlbXBsYXRlUmVxdWlyZW1lbnRzIHtcbiAgLyoqIEEgc3RyaW5nIGlkZW50aWZpZXIgdG8gbWFrZSBpdCBlYXNpZXIgdG8gaWRlbnRpZnkgd2hpY2ggdGVtcGxhdGUgdGVtcGxhdGUgZmFpbGVkIHJlcXVpcmVtZW50cyAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKiBUaGUgb3B0aW9ucyB0aGF0IG11c3QgYmUgcHJlc2VudCB3aXRoaW4gYm90aCBwcm92aWRlZCBvcHRpb25zIEFORCB3aXRoaW4gdGhlIHRlbXBsYXRlICovXG4gIHZhbHVlczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRlbXBsYXRlT3B0aW9ucyB7XG4gIC8qKiBEb3VibGUgY3VybHkgYnJhY2tldHMgZm9yIHRlbXBsYXRlIGl0ZW1zIGluc3RlYWQgb2Ygb25lICovXG4gIGRvdWJsZUN1cmx5QnJhY2tldHM/OiBib29sZWFuO1xuICAvKiogQ2FsbGJhY2sgZm9yICdyZXF1aXJlZCcgZXJyb3JzIGJlaW5nIGVtaXR0ZWQgKi9cbiAgb25FcnJvcj8obXNnOiBzdHJpbmcpOiB2b2lkO1xuICAvKipcbiAgICogQ2FsbGJhY2sgdGhhdCBhbGxvd3Mgb3ZlcnJpZGVzIGZvciB0b2tlbiByZXBsYWNlbWVudC4gUHJvdmlkZXMgdGhlIHRva2VuIGZvdW5kIGFuZCB0aGVcbiAgICogc3VnZ2VzdGVkIHJlcGxhY2VtZW50IGZvciBpdFxuICAgKi9cbiAgb25Ub2tlbj8odG9rZW46IHN0cmluZywgcmVwbGFjZTogc3RyaW5nKTogc3RyaW5nO1xuICAvKiogVGhpcyBpcyBhIGtleSB2YWx1ZSBwYWlyIHRoZSB0ZW1wbGF0ZSB1c2VzIHRvIG1hdGNoIHRva2VucyBmb3VuZCB0byByZXBsYWNlbWVudCB2YWx1ZXMgKi9cbiAgb3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPjtcbiAgLyoqIFRoaXMgaXMgdXNlZCB0byBpbmRpY2F0ZSB3aGljaCB0b2tlbnMgYXJlIHJlcXVpcmVkIGJvdGggd2l0aGluIHRoZSB0ZW1wbGF0ZSBBTkQgd2l0aGluIHRoZSAnb3B0aW9ucycgKi9cbiAgcmVxdWlyZWQ/OiBJVGVtcGxhdGVSZXF1aXJlbWVudHM7XG4gIC8qKiBUaGlzIGlzIHRoZSB0ZW1wbGF0ZSB3cml0dGVuIHdpdGggdGVtcGxhdGluZyBpbmZvcm1hdGlvbiAqL1xuICB0ZW1wbGF0ZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSBtZXRob2QgdGhhdCBhaWRzIGluIG1ha2luZyB0ZW1wbGF0ZXMgYSBiaXQgbW9yZSBkeW5hbWljIHdpdGggc2ltcGxlIHN0cmluZyByZXBsYWNlbWVudCBiYXNlZCBvblxuICogdG9rZW5zIHdyaXR0ZW4gaW50byB0aGUgdGVtcGxhdGUuIFRva2VucyBpbiB0aGUgdGVtcGxhdGUgd2lsbCBhcHBlYXIgYXMgJHt0b2tlbn0gYW5kIHdpbGwgZWl0aGVyIGJlIGlnbm9yZWQgYnkgdGhpc1xuICogbWV0aG9kIGFuZCB0aHVzIHJlbW92ZWQgb3Igd2lsbCBiZSByZXBsYWNlZCB3aXRoIGEgcHJvdmlkZWQgdmFsdWUuXG4gKlxuICogVGhpcyBtZXRob2Qgd2lsbCBnaXZlIGZlZWRiYWNrIG9uIHRoZSByZXBsYWNlbWVudHMgdGFraW5nIHBsYWNlIGFuZCBzaW1wbGlmeSB0aGUgcHJvY2VzcyBvZiBkZXRlY3RpbmcgZXJyb3JzXG4gKiB3aXRoaW4gdGhlIHByb2Nlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZSh7XG4gIHRlbXBsYXRlLFxuICBvcHRpb25zLFxuICByZXF1aXJlZCxcbiAgZG91YmxlQ3VybHlCcmFja2V0cyxcbiAgb25FcnJvcixcbiAgb25Ub2tlbixcbn06IElUZW1wbGF0ZU9wdGlvbnMpOiBJVGVtcGxhdGVSZXN1bHRzIHtcbiAgY29uc3QgbWF0Y2hlZCA9IG5ldyBNYXAoKTtcbiAgY29uc3Qgbm9WYWx1ZVByb3ZpZGVkID0gbmV3IE1hcCgpO1xuICBjb25zdCBub3RGb3VuZCA9IG5ldyBNYXAoKTtcbiAgY29uc3QgdGVtcGxhdGVQcm92aWRlZE9wdGlvbnMgPSBuZXcgTWFwKCk7XG5cbiAgbGV0IHBhdHRlcm4gPSAvXFwkXFx7KFteXFx9XSopXFx9L2c7XG5cbiAgaWYgKGRvdWJsZUN1cmx5QnJhY2tldHMpIHtcbiAgICBwYXR0ZXJuID0gL1xcJFxce1xceyhbXlxcfV0qKVxcfVxcfS9nO1xuICB9XG5cbiAgY29uc3QgdGVtcGxhdGVSZXN1bHRzID0gdGVtcGxhdGUucmVwbGFjZShwYXR0ZXJuLCAoX3gsIG1hdGNoKSA9PiB7XG4gICAgbGV0IHJlcGxhY2UgPSBcIlwiO1xuICAgIHRlbXBsYXRlUHJvdmlkZWRPcHRpb25zLnNldChcbiAgICAgIG1hdGNoLFxuICAgICAgKHRlbXBsYXRlUHJvdmlkZWRPcHRpb25zLmdldChtYXRjaCkgfHwgMCkgKyAxXG4gICAgKTtcblxuICAgIGlmIChtYXRjaCBpbiBvcHRpb25zKSB7XG4gICAgICBtYXRjaGVkLnNldChtYXRjaCwgKG1hdGNoZWQuZ2V0KG1hdGNoKSB8fCAwKSArIDEpO1xuICAgICAgY29uc3QgdmFsdWUgPSBvcHRpb25zW21hdGNoXTtcblxuICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmVwbGFjZSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBub1ZhbHVlUHJvdmlkZWQuc2V0KG1hdGNoLCAobm9WYWx1ZVByb3ZpZGVkLmdldChtYXRjaCkgfHwgMCkgKyAxKTtcbiAgICB9XG5cbiAgICBpZiAob25Ub2tlbikge1xuICAgICAgcmVwbGFjZSA9IG9uVG9rZW4obWF0Y2gsIHJlcGxhY2UpO1xuICAgICAgaWYgKHJlcGxhY2UgIT09IG1hdGNoKSB7XG4gICAgICAgIG1hdGNoZWQuc2V0KG1hdGNoLCAobWF0Y2hlZC5nZXQobWF0Y2gpIHx8IDApICsgMSk7XG4gICAgICAgIG5vVmFsdWVQcm92aWRlZC5kZWxldGUobWF0Y2gpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXBsYWNlO1xuICB9KTtcblxuICBPYmplY3Qua2V5cyhvcHRpb25zKS5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICBpZiAoIW1hdGNoZWQuZ2V0KG9wdGlvbikpIHtcbiAgICAgIG5vdEZvdW5kLnNldChvcHRpb24sIChub3RGb3VuZC5nZXQob3B0aW9uKSB8fCAwKSArIDEpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gUHJvdmlkZSBtZXRyaWNzXG4gIGNvbnN0IHJlc3VsdHM6IElUZW1wbGF0ZVJlc3VsdHMgPSB7XG4gICAgcmVzb2x2ZWR0ZW1wbGF0ZU9wdGlvbnM6IG1hdGNoZWQsXG4gICAgdGVtcGxhdGU6IHRlbXBsYXRlUmVzdWx0cyxcbiAgICB0ZW1wbGF0ZVByb3ZpZGVkT3B0aW9ucyxcbiAgICB1bnJlc29sdmVkUHJvdmlkZWRPcHRpb25zOiBub3RGb3VuZCxcbiAgICB1bnJlc29sdmVkVGVtcGxhdGVPcHRpb25zOiBub1ZhbHVlUHJvdmlkZWQsXG4gIH07XG5cbiAgaWYgKHJlcXVpcmVkKSB7XG4gICAgLy8gVGhpcyB3aWxsIGVuc3VyZSB0aGF0IEJPVEggdGhlIHBhcmFtZXRlciBpbnB1dCBBTkQgdGhlIHRlbXBsYXRlIHByb3ZpZGVkIHRoZSByZXF1aXJlZCBvcHRpb25zLlxuICAgIHJlcXVpcmVkLnZhbHVlcy5mb3JFYWNoKChyZXF1aXJlKSA9PiB7XG4gICAgICBpZiAocmVzdWx0cy51bnJlc29sdmVkUHJvdmlkZWRPcHRpb25zLmdldChyZXF1aXJlKSkge1xuICAgICAgICBjb25zdCBtc2cgPSBgJHtyZXF1aXJlZC5uYW1lfTogQ291bGQgbm90IHJlc29sdmUgYWxsIHRoZSByZXF1aXJlZCBpbnB1dHMuIElucHV0OiAke3JlcXVpcmV9YDtcbiAgICAgICAgaWYgKG9uRXJyb3IpIG9uRXJyb3IobXNnKTtcbiAgICAgICAgZWxzZSBjb25zb2xlLmVycm9yKG1zZyk7XG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdHMudW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9ucy5nZXQocmVxdWlyZSkpIHtcbiAgICAgICAgY29uc3QgbXNnID0gYCR7cmVxdWlyZWQubmFtZX06IEEgcmVxdWlyZWQgb3B0aW9uIHdhcyBub3QgcHJvdmlkZWQgaW4gdGhlIG9wdGlvbnMgcGFyYW1ldGVyLiBPcHRpb246ICR7cmVxdWlyZX1gO1xuICAgICAgICBpZiAob25FcnJvcikgb25FcnJvcihtc2cpO1xuICAgICAgICBlbHNlIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAoIXJlc3VsdHMucmVzb2x2ZWR0ZW1wbGF0ZU9wdGlvbnMuZ2V0KHJlcXVpcmUpKSB7XG4gICAgICAgIGNvbnN0IG1zZyA9IGAke3JlcXVpcmVkLm5hbWV9OiBBIHJlcXVpcmVkIG9wdGlvbiB3YXMgbm90IHByb3ZpZGVkIGluIHRoZSBvcHRpb25zIHBhcmFtZXRlci4gT3B0aW9uOiAke3JlcXVpcmV9YDtcbiAgICAgICAgaWYgKG9uRXJyb3IpIG9uRXJyb3IobXNnKTtcbiAgICAgICAgZWxzZSBjb25zb2xlLmVycm9yKG1zZyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0cztcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IGhvc3RpbGUgZnJvbSBcImhvc3RpbGVcIjtcbmltcG9ydCBvcGVuIGZyb20gXCJvcGVuXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHZhbGlkVVJMIGZyb20gXCJ2YWxpZC11cmxcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbiB9IGZyb20gXCIuLi9saWIvdXRpbC9kZXNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vbGliL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5pbXBvcnQgeyBleGVjU3luY1Jlc3VsdCB9IGZyb20gXCIuLi9saWIvZXhlYy9leGVjLXN5bmMtcmVzdWx0LmpzXCI7XG5pbXBvcnQgeyB0ZW1wbGF0ZSB9IGZyb20gXCIuLi9saWIvdXRpbC90ZW1wbGF0ZS5qc1wiO1xuaW1wb3J0IHsgd2FpdCB9IGZyb20gXCIuLi9saWIvdXRpbC93YWl0LmpzXCI7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsOiBhbnkpOiB2YWwgaXMgRnVuY3Rpb24ge1xuICByZXR1cm4gdmFsICYmIHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLyoqXG4gKiBXcmFwcyBhIG1ldGhvZCB0aGF0IG5vcm1hbGx5IGhhcyBhbiBhc3luYyBjYWxsYmFjayBwYXR0ZXJuIGludG8gYSBQcm9taXNlLFxuICogdGh1cyBtYWtpbmcgYXdhaXQgcGF0dGVybnMgcG9zc2libGUuXG4gKi9cbmZ1bmN0aW9uIHByb21pc2lmeTxUPihjb250ZXh0OiBULCBtZXRob2ROYW1lOiBrZXlvZiBULCAuLi5hcmdzOiBhbnlbXSkge1xuICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgbWV0aG9kID0gY29udGV4dFttZXRob2ROYW1lXTtcblxuICAgIGlmICghaXNGdW5jdGlvbihtZXRob2QpKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKGAke1N0cmluZyhtZXRob2ROYW1lKX0gaXMgbm90IGEgZnVuY3Rpb25gKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbWV0aG9kKC4uLmFyZ3MsIChlcnJvcjogRXJyb3IsIHZhbHVlOiBhbnkpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHZhbHVlIHx8IHZvaWQgMCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFRoaXMgbG9va3MgYXQgdGhlIHBhY2thZ2UuanNvbiBhbmQgbW9kaWZpZXMgdGhlIGhvc3QgZmlsZSB0byBpbmNsdWRlIHRoZVxuICogaG9zdHMgc3BlY2lmaWVkIGluIHRoZSBcImhvc3RzXCIgcHJvcGVydHkuIFRoaXMgd2lsbCBvbmx5IHdvcmsgaWYgdGhpcyBzY3JpcHRcbiAqIHdhcyByYW4gYXMgYW4gYWRtaW5pc3RyYXRvci5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29uZmlndXJlSG9zdHMoKSB7XG4gIC8vIEdldCB0aGUgcGFja2FnZSBmb3IgdGhlIHByb2plY3RcbiAgY29uc3QgcGtnID0gZnMucmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSk7XG4gIGNvbnN0IGhvc3RzID0gcGtnLmhvc3RzO1xuXG4gIC8vIE5vIGhvc3RzIHByZXNlbnQsIG1lYW5zIHdlIGRvIG5vdCBuZWVkIHRvIGRvIGFueXRoaW5nIGluIHRoaXMgcHJvY2Vzcy5cbiAgaWYgKCFob3N0cykgcmV0dXJuO1xuXG4gIC8vIFVwZGF0ZSB0aGUgaG9zdHMgZmlsZSB0byBtYXRjaCB0aGUgaG9zdHMgc3BlY2lmaWVkIGluIHBhY2thZ2UuanNvblxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoaG9zdHMpO1xuICBsZXQgbGluZXMgPSBhd2FpdCBwcm9taXNpZnkoaG9zdGlsZSwgXCJnZXRcIiwgZmFsc2UpO1xuICBjb25zdCBuZWVkc0hvc3Q6IFtzdHJpbmcsIHN0cmluZ11bXSA9IFtdO1xuXG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3coXCJVcGRhdGluZyBob3N0cyBmaWxlLi4uXCIpKTtcbiAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgIHRyeSB7XG4gICAgICAvLyBJZiB0aGUgaG9zdCBpcyBub3QgcHJlc2VudCBpbiB0aGUgY29uZmlnIGFscmVhZHksIGFkZCBpdCBpblxuICAgICAgaWYgKFxuICAgICAgICAhbGluZXMuZmluZChcbiAgICAgICAgICAobDogW3N0cmluZywgc3RyaW5nXSkgPT4gbFswXSA9PT0ga2V5ICYmIGxbMV0gPT09IGhvc3RzW2tleV1cbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIG5lZWRzSG9zdC5wdXNoKFtrZXksIGhvc3RzW2tleV1dKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikgY29uc29sZS53YXJuKGNoYWxrLnJlZChlcnIubWVzc2FnZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFwcGVuZCB0aGUgaG9zdHMgdG8gL2V0Yy9ob3N0c1xuICBpZiAobmVlZHNIb3N0Lmxlbmd0aCA+IDApIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBjaGFsay55ZWxsb3coXG4gICAgICAgIFwiQWRkaW5nIGhvc3RzIChZb3UgbWF5IGJlIHByb21wdGVkIGZvciBhZG1pbmlzdHJhdG9yIHBhc3N3b3JkKTpcXG5cXHRcIixcbiAgICAgICAgbmVlZHNIb3N0Lm1hcCgoaCkgPT4gYCR7aFswXX0gPT4gJHtoWzFdfWApLmpvaW4oXCJcXG5cXHRcIilcbiAgICAgIClcbiAgICApO1xuXG4gICAgYXdhaXQgZXhlY1N5bmMoXCJzdWRvXCIsIFtcbiAgICAgIFwiZWNob1wiLFxuICAgICAgXCJHcmFudGVkIHN1ZG8gYWNjZXNzIHRvIHVwZGF0ZSBob3N0cyBmaWxlLlwiLFxuICAgIF0pO1xuXG4gICAgLy8gTGFzdCB0aHJlZSBjaGFyYWN0ZXJzIGFyZSB0aGUgcGVybWlzc2lvbnNcbiAgICBjb25zdCBjaG1vZEJhayA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwic3RhdFwiLCBbXG4gICAgICBcIi1mXCIsXG4gICAgICBcIiVwXCIsXG4gICAgICBcIi9ldGMvaG9zdHNcIixcbiAgICBdKS50b1N0cmluZygpO1xuXG4gICAgLy8gTWFrZSB0aGUgZmlsZSB3cml0ZWFibGVcbiAgICBhd2FpdCBleGVjU3luYyhcInN1ZG9cIiwgW1wiY2htb2RcIiwgXCI2NjZcIiwgXCIvZXRjL2hvc3RzXCJdKTtcblxuICAgIGZvciAoY29uc3QgaG9zdCBvZiBuZWVkc0hvc3QpIHtcbiAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKFwiL2V0Yy9ob3N0c1wiLCBgJHtob3N0WzBdfSAke2hvc3RbMV19YCk7XG4gICAgfVxuXG4gICAgZnMuYXBwZW5kRmlsZVN5bmMoXCIvZXRjL2hvc3RzXCIsIGBcXG5gKTtcblxuICAgIC8vIFJlc3RvcmUgdGhlIHBlcm1pc3Npb25zXG4gICAgYXdhaXQgZXhlY1N5bmMoXCJzdWRvXCIsIFtcbiAgICAgIFwiY2htb2RcIixcbiAgICAgIGNobW9kQmFrLnN1YnN0cmluZyhjaG1vZEJhay5sZW5ndGggLSA0KS50cmltKCksXG4gICAgICBcIi9ldGMvaG9zdHNcIixcbiAgICBdKTtcbiAgfVxuXG4gIGF3YWl0IHdhaXQoNTAwKTtcblxuICAvLyBBZnRlciB1cGRhdGluZyB0aGUgaG9zdCBmaWxlLCBsZXQncyBlbnN1cmUgYWxsIGhvc3RzIHdlcmUgYWRkZWQuXG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3coXCJWZXJpZnlpbmcgaG9zdHMgZmlsZS4uLlwiKSk7XG4gIGxpbmVzID0gYXdhaXQgcHJvbWlzaWZ5KGhvc3RpbGUsIFwiZ2V0XCIsIGZhbHNlKTtcbiAgbGV0IGRpZEZhaWwgPSBmYWxzZTtcblxuICBuZWVkc0hvc3QuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgaWYgKFxuICAgICAgIWxpbmVzLmZpbmQoKGw6IFtzdHJpbmcsIHN0cmluZ10pID0+IGxbMF0gPT09IGtleSAmJiBsWzFdID09PSBob3N0c1trZXldKVxuICAgICkge1xuICAgICAgZGlkRmFpbCA9IHRydWU7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGNoYWxrLnJlZEJyaWdodChcbiAgICAgICAgICBgRmFpbGVkIHRvIGFkZCBob3N0OiAke2NoYWxrLnllbGxvd0JyaWdodChcbiAgICAgICAgICAgIGtleVxuICAgICAgICAgICl9ID0+ICR7Y2hhbGsueWVsbG93QnJpZ2h0KHZhbHVlKX1gXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICBpZiAoZGlkRmFpbCkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGNoYWxrLnJlZChkZXNjcmlwdGlvbmBcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICAqIFNvbWUgaG9zdHMgc3BlY2lmaWVkIGluIHRoZSBwYWNrYWdlLmpzb24gd2VyZSBub3QgYWJsZSB0byBiZSB3cml0dGVuICAqXG4gICAgICAgICogdG8gdGhlIGhvc3RzIGZpbGUgZm9yIHRoZSBzeXN0ZW0uIFlvdSBjYW4gYW1lbmQgdGhpcyBieSBlZGl0aW5nIHRoZSAgICpcbiAgICAgICAgKiBmaWxlIHlvdXJzZWxmLCBvciBieSB0cnlpbmcgdG8gcnVuIHRoaXMgc2NyaXB0IGFnYWluIGFzIGFuIGFkbWluLiAgICAgKlxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICBgKVxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3BlblVSTChcbiAgdXJsQ29uZmlnOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxuICB1cmw6IHN0cmluZyxcbiAgb3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPlxuKSB7XG4gIGxldCB0YXJnZXRVcmwgPSB1cmw7XG5cbiAgaWYgKHZhbGlkVVJMLmlzV2ViVXJpKHVybCkpIHtcbiAgICB0YXJnZXRVcmwgPSB1cmw7XG4gIH0gZWxzZSBpZiAodXJsQ29uZmlnW3VybF0pIHtcbiAgICB0YXJnZXRVcmwgPSB1cmxDb25maWdbdXJsXTtcbiAgfVxuXG4gIC8vIFJlcGxhY2UgYW55XG4gIGNvbnN0IHJlc3VsdCA9IHRlbXBsYXRlKHtcbiAgICBvcHRpb25zLFxuICAgIHRlbXBsYXRlOiB0YXJnZXRVcmwsXG4gIH0pO1xuXG4gIGlmIChyZXN1bHQudW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9ucy5zaXplID4gMCkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGNoYWxrLnJlZChcbiAgICAgICAgZGVzY3JpcHRpb25gXG4gICAgICAgICAgWW91IG11c3Qgc3BlY2lmeSB0aGVzZSBlbnYgdmFyaWFibGVzIGZvciB0aGlzIFVSTCB0byB3b3JrOlxuICAgICAgICAgICR7QXJyYXkuZnJvbShyZXN1bHQudW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9ucy5rZXlzKCkpLmpvaW4oXCJcXG5cXHRcIil9XG4gICAgICAgIGBcbiAgICAgIClcbiAgICApO1xuICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgZW52IGNvbmZpZ3VyYXRpb24gZm9yIFVSTFwiKTtcbiAgfVxuXG4gIHRhcmdldFVybCA9IHJlc3VsdC50ZW1wbGF0ZTtcblxuICBpZiAodmFsaWRVUkwuaXNXZWJVcmkodGFyZ2V0VXJsKSkge1xuICAgIGNvbnNvbGUud2FybihcIk5hdmlnYXRpbmcgdG86XCIsIGNoYWxrLmN5YW5CcmlnaHRCb2xkKHRhcmdldFVybCkpO1xuICAgIG9wZW4odGFyZ2V0VXJsKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJDYW4gbm90IG9wZW4gaW52YWxpZCBVUkw6XCIsIGNoYWxrLnJlZEJyaWdodEJvbGQodGFyZ2V0VXJsKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNvbW1hbmQgc2ltcGx5IG9wZW5zIGEgVVJMIHZpYSBhbiBucG0gY29tbWFuZC4gVGhlIHZhbHVlIHByb3ZpZGVkIGNhbiBiZVxuICogYSB2YWxpZCBVUkkgT1IgaXQgY2FuIGJlIGEga2V5IGZvciB0aGUgdmFsdWUgZm91bmQgaW4gcGFja2FnZS5qc29uIFwidXJsXCIuXG4gKlxuICogZWcgLVxuICogdXJsOiBcIm5vZGUgYmluL21haW4gdXJsIFxcXCJodHRwczovL2ZpZ21hLmNvbVxcXCJcIlxuICpcbiAqIG9yIGlmIHRoZXJlIGlzIGEgXCJmaWdtYVwiIGVudHJ5IGluIHRoZSBcInVybFwiIHByb3BlcnR5IGluIHBhY2thZ2UuanNvbiAtXG4gKiB1cmw6IFwibm9kZSBiaW4vbWFpbiB1cmwgXFxcImZpZ21hXFxcIlwiXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bih1cmw/OiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9ucz86IHN0cmluZ1tdKSB7XG4gIGNvbnN0IHBrZyA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICBjb25zdCB1cmxDb25maWc6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSBwa2c/LnVybCB8fCB7fTtcbiAgY29uc3Qgb3B0aW9uc0NvbmZpZzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9XG4gICAgb3B0aW9ucz8ucmVkdWNlKFxuICAgICAgKHAsIG9wdCwgaSkgPT4ge1xuICAgICAgICBwW2Ake2kgKyAxfWBdID0gb3B0O1xuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH0sXG4gICAgICB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gICAgKSB8fCB7fTtcblxuICBpZiAoIXVybCB8fCB1cmwubGVuZ3RoIDw9IDApIHtcbiAgICBjb25zb2xlLndhcm4oZGVzY3JpcHRpb25gXG4gICAgICBBdmFpbGFibGUgVVJMczpcbiAgICAgICAgJHtjaGFsay5jeWFuQnJpZ2h0Qm9sZChPYmplY3Qua2V5cyh1cmxDb25maWcpLmpvaW4oXCJcXG4gICAgICAgIFwiKSl9XG4gICAgYCk7XG5cbiAgICByZXR1cm47XG4gIH1cblxuICBhd2FpdCBjb25maWd1cmVIb3N0cygpO1xuXG4gIGNvbnN0IGFsbE9wdGlvbnMgPSB7XG4gICAgLi4ucHJvY2Vzcy5lbnYsXG4gICAgLi4ub3B0aW9uc0NvbmZpZyxcbiAgfTtcblxuICBpZiAoQXJyYXkuaXNBcnJheSh1cmwpKSB7XG4gICAgdXJsLmZvckVhY2goKHVyaSkgPT4ge1xuICAgICAgb3BlblVSTCh1cmxDb25maWcsIHVyaSwgYWxsT3B0aW9ucyk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb3BlblVSTCh1cmxDb25maWcsIHVybCwgYWxsT3B0aW9ucyk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IGNoaWxkX3Byb2Nlc3MgZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcblxuLyoqXG4gKiBUaGlzIGNoZWNrcyB0aGUgY3VycmVudCBnaXQgcmVwb3NpdG9yeSB0byBzZWUgaWYgaXQgaGFzIHVuY29taXR0ZWQgY2hhbmdlc1xuICogbGluZ2VyaW5nLiBUaGlzIGNoZWNrIGlzIG5lY2Vzc2FyeSBiZWZvcmUgc29tZSBwcm9jZXNzIGNhbiBiZSBleGVjdXRlZFxuICogc2FmZWx5LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2l0SGFzQ2hhbmdlcygpIHtcbiAgdHJ5IHtcbiAgICAvLyBUT0RPOiBmaW5kIGEgbmljZXIgd2F5IHRvIGhhbmRsZSBwaXBlZCBjb21tYW5kcyBzbyB3ZSBjYW4gYWJzdHJhY3QgdGhlXG4gICAgLy8gdXNlIG9mIGNoaWxkX3Byb2Nlc3MgaGVyZS5cbiAgICBjaGlsZF9wcm9jZXNzLmV4ZWNTeW5jKFxuICAgICAgXCJnaXQgc3RhdHVzIC0tcG9yY2VsYWluPXYxIDI+L2Rldi9udWxsIHwgd2MgLWwgfCBncmVwIDBcIixcbiAgICAgIHtcbiAgICAgICAgZW52OiBwcm9jZXNzLmVudixcbiAgICAgIH1cbiAgICApO1xuXG4gICAgLy8gRXhlY3V0ZSB0aGUgR2l0IGNvbW1hbmQgYW5kIGNhcHR1cmUgdGhlIG91dHB1dFxuICAgIGNvbnN0IG91dHB1dCA9IGNoaWxkX3Byb2Nlc3MuZXhlY1N5bmMoXG4gICAgICBcImdpdCBzdGF0dXMgLS1wb3JjZWxhaW49djEgMj4vZGV2L251bGxcIixcbiAgICAgIHtcbiAgICAgICAgZW5jb2Rpbmc6IFwidXRmLThcIixcbiAgICAgIH1cbiAgICApO1xuXG4gICAgLy8gQ291bnQgdGhlIG51bWJlciBvZiBsaW5lcyBpbiB0aGUgb3V0cHV0XG4gICAgLy8gQSBjb3VudCBvZiAwIG1lYW5zIHRoZXJlIGFyZSBubyBjaGFuZ2VzXG4gICAgY29uc3QgbGluZUNvdW50ID0gb3V0cHV0LnRyaW0oKS5zcGxpdChcIlxcblwiKS5maWx0ZXIoQm9vbGVhbikubGVuZ3RoO1xuXG4gICAgaWYgKGxpbmVDb3VudCA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuICB9IGNhdGNoIChfZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG4iLAogICAgImltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5pbXBvcnQgeyBnaXRIYXNDaGFuZ2VzIH0gZnJvbSBcIi4vZ2l0LWhhcy1jaGFuZ2VzLmpzXCI7XG5pbXBvcnQgeyBwcm9tcHRDb25maXJtIH0gZnJvbSBcIi4uL3Byb21wdC9wcm9tcHQtY29uZmlybS5qc1wiO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgY29udGV4dCBiYWNrIHRvIGRldiBhbmQgcmVzZXRzIHRvIHRoZSBsYXRlc3QgaW4gZGV2LlxuICpcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgb3BlcmF0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuXG4gKlxuICogSWYgZmFsc2UgaXMgcmV0dXJuZWQsIHRoZSBnaXQgc3RhdGUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdW5kZWZpbmVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2l0UmV0dXJuVG9EZXYod2l0aFByb21wdD86IGJvb2xlYW4pIHtcbiAgLy8gSWYgYSBwcm9tcHQgd2FzIHJlcXVlc3RlZCwgd2Ugd2lsbCBhc2sgdGhlIHVzZXIgaWYgdGhleSB3aXNoIHRvIGxldCB0aGlzXG4gIC8vIG9wZXJhdGlvbiBoYXBwZW4uXG4gIGlmICh3aXRoUHJvbXB0KSB7XG4gICAgY29uc3Qgc2hvdWxkR2l0QnJhbmNoID0gYXdhaXQgcHJvbXB0Q29uZmlybShgXG4gICAgICBXb3VsZCB5b3UgbGlrZSB0byByZXR1cm4gYmFjayB0byBkZXZlbG9wbWVudD9cbiAgICAgIFJ1bnMgdGhlIGZvbGxvd2luZzpcbiAgICAgICAgZ2l0IGZldGNoXG4gICAgICAgIGdpdCBjaGVja291dCBkZXZcbiAgICAgICAgZ2l0IHJlc2V0IC0taGFyZCBvcmlnaW4vZGV2XG4gICAgYCk7XG5cbiAgICBpZiAoIXNob3VsZEdpdEJyYW5jaCkgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGF3YWl0IGdpdEhhc0NoYW5nZXMoKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcIkNhbiBub3QgcmV0dXJuIHRvIGRldiBicmFuY2ggYXMgY2hhbmdlcyBhcmUgcHJlc2VudCBvbiB0aGUgY3VycmVudCBicmFuY2guXCJcbiAgICApO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgbGV0IGZhaWwgPSBmYWxzZTtcblxuICBpZiAoIShhd2FpdCBleGVjU3luYyhcImdpdFwiLCBbXCJmZXRjaFwiXSkpKSBmYWlsID0gdHJ1ZTtcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoXCJnaXRcIiwgW1wiY2hlY2tvdXRcIiwgXCJkZXZcIl0pKSkgZmFpbCA9IHRydWU7XG4gIGlmICghKGF3YWl0IGV4ZWNTeW5jKFwiZ2l0XCIsIFtcInJlc2V0XCIsIFwiLS1oYXJkXCIsIFwib3JpZ2luL2RldlwiXSkpKSBmYWlsID0gdHJ1ZTtcblxuICBpZiAoZmFpbCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3QgcmV0dXJuIHRvIGRldiBicmFuY2guXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgSWdub3JlIGZyb20gXCJpZ25vcmVcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuLi8uLi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdERlcGVuZGVuY2llcyB9IGZyb20gXCIuLi8uLi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC1kZXBlbmRlbmNpZXMuanNcIjtcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi4vLi4vdXRpbC93YWl0LmpzXCI7XG5cbmNvbnN0IGdpdElnbm9yZVBhdGggPSBwYXRoLnJlc29sdmUoXCIuZ2l0aWdub3JlXCIpO1xubGV0IGlnbm9yZSA9IElnbm9yZS5kZWZhdWx0KCk7XG5cbmlmIChmcy5leGlzdHNTeW5jKGdpdElnbm9yZVBhdGgpKSB7XG4gIGlnbm9yZSA9IGlnbm9yZS5hZGQoZnMucmVhZEZpbGVTeW5jKGdpdElnbm9yZVBhdGgpLnRvU3RyaW5nKCkpO1xufVxuXG4vKipcbiAqIEJ1bmRsZSB0aGUgY29tbWFuZHNcbiAqL1xuYXN5bmMgZnVuY3Rpb24gYnVpbGRDb21tYW5kcygpIHtcbiAgLy8gV2UgZ2V0IGFsbCBkZXBlbmRlbmNpZXMgb2YgdGhlIHByb2plY3QgYW5kIGNvbnNpZGVyIHRoZW0gZXh0ZXJuYWwuIFRoaXNcbiAgLy8gaW1wcm92ZXMgdGhlIGFiaWxpdHkgZm9yIHRoZSBjb2RlIHRvIGJlIGJ1bmRsZWQgc2luY2UgYmluIGNvbW1hbmRzIGhpdCBhXG4gIC8vIExPVCBvZiBzbmFncyBpbiBob3cgdGhleSBhcmUgaW1wbGVtZW50ZWQuXG4gIGNvbnN0IGRlcHMgPSBhd2FpdCB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzKCk7XG5cbiAgLy8gQnVpbGQgdGhlIHNvdXJjZSBkaXJlY3RseSB0byB0aGUgZGlzdCBmb2xkZXIuIFRoaXMga2VlcHMgc2FtZSByZWxhdGl2ZVxuICAvLyBkZXB0aCBmb3IgYWxsIGZpbGVzIGFzIHdoZW4gdGhleSBhcmUgaW4gdGhlIGJpbiBmb2xkZXIgdGhlbXNlbHZlcyBhbmRcbiAgLy8gcmVkdWNlcyBwcm9qZWN0IGNvbXBsZXhpdHkuXG4gIGNvbnNvbGUud2FybihcIkJ1aWxkaW5nIGZ1bGwgZGlzdHJpYnV0aW9uLi4uXCIpO1xuICBsZXQgcmVzdWx0cyA9IGF3YWl0IEJ1bi5idWlsZCh7XG4gICAgZW50cnlwb2ludHM6IFtwYXRoLnJlc29sdmUoXCIuL2Jpbi9tYWluLnRzXCIpXSxcbiAgICB0YXJnZXQ6IFwiYnVuXCIsXG4gICAgZXh0ZXJuYWw6IE9iamVjdC5rZXlzKGRlcHMpLFxuICAgIG1pbmlmeTogdHJ1ZSxcbiAgICBzb3VyY2VtYXA6IFwiaW5saW5lXCIsXG4gIH0pO1xuXG4gIGZvciAoY29uc3QgcmVzb3VyY2Ugb2YgcmVzdWx0cy5vdXRwdXRzKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJXcml0aW5nIGJpbiBidW5kbGUgcmVzb3VyY2U6XCIsXG4gICAgICBjaGFsay5jeWFuQnJpZ2h0Qm9sZChyZXNvdXJjZS5wYXRoKVxuICAgICk7XG5cbiAgICBhd2FpdCBCdW4ud3JpdGUocGF0aC5yZXNvbHZlKFwiLi9kaXN0L2JpblwiLCByZXNvdXJjZS5wYXRoKSwgcmVzb3VyY2UpO1xuICB9XG5cbiAgY29uc29sZS53YXJuKFwiQnVpbGRpbmcgZ2ltcGVkIGRpc3RyaWJ1dGlvbi4uLlwiKTtcbiAgcmVzdWx0cyA9IGF3YWl0IEJ1bi5idWlsZCh7XG4gICAgZW50cnlwb2ludHM6IFtwYXRoLnJlc29sdmUoXCIuL2Jpbi9tYWluLWdpbXAudHNcIildLFxuICAgIHRhcmdldDogXCJub2RlXCIsXG4gICAgZXh0ZXJuYWw6IE9iamVjdC5rZXlzKGRlcHMpLFxuICAgIG1pbmlmeTogdHJ1ZSxcbiAgICBzb3VyY2VtYXA6IFwiaW5saW5lXCIsXG4gIH0pO1xuXG4gIGZvciAoY29uc3QgcmVzb3VyY2Ugb2YgcmVzdWx0cy5vdXRwdXRzKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJXcml0aW5nIGJpbiBidW5kbGUgcmVzb3VyY2U6XCIsXG4gICAgICBjaGFsay5jeWFuQnJpZ2h0Qm9sZChyZXNvdXJjZS5wYXRoKVxuICAgICk7XG5cbiAgICBhd2FpdCBCdW4ud3JpdGUocGF0aC5yZXNvbHZlKFwiLi9kaXN0L2JpblwiLCByZXNvdXJjZS5wYXRoKSwgcmVzb3VyY2UpO1xuICB9XG5cbiAgY29uc29sZS53YXJuKFwiQ29weWluZyBlbnRyeSBjcm9zcy1wbGF0Zm9ybSBkaXN0cmlidXRpb24uLi5cIik7XG4gIGZzLmNvcHlGaWxlU3luYyhcbiAgICBwYXRoLnJlc29sdmUoXCIuL2Jpbi9tYWluLWVudHJ5LmNqc1wiKSxcbiAgICBwYXRoLnJlc29sdmUoXCIuL2Rpc3QvYmluL21haW4tZW50cnkuY2pzXCIpXG4gICk7XG59XG5cbi8qKlxuICogQnVpbGRzIHRoZSBkaXN0cmlidXRpb24gdmVyc2lvbnMgb2Ygc2hpbSBmaWxlcy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gYnVpbGRTaGltKCkge1xuICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiLi9iaW4vc2hpbVwiKSkpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiTm8gc2hpbSBkaXN0cmlidXRpb24gZmlsZXMgZm91bmQgdG8gYmUgYnVpbHRcIik7XG4gIH1cblxuICAvLyAgRGVsZXRlIHRoZSBjdXJyZW50IHNoaW0gZGlzdHJpYnV0aW9uXG4gIGlmIChmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcIi4vc2hpbVwiKSkpIHtcbiAgICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcIi4vc2hpbVwiKSk7XG4gIH1cblxuICAvLyBXZSBnZXQgYWxsIGRlcGVuZGVuY2llcyBvZiB0aGUgcHJvamVjdCBhbmQgY29uc2lkZXIgdGhlbSBleHRlcm5hbC4gVGhpc1xuICAvLyBpbXByb3ZlcyB0aGUgYWJpbGl0eSBmb3IgdGhlIGNvZGUgdG8gYmUgYnVuZGxlZCBzaW5jZSBiaW4gY29tbWFuZHMgaGl0IGFcbiAgLy8gTE9UIG9mIHNuYWdzIGluIGhvdyB0aGV5IGFyZSBpbXBsZW1lbnRlZC5cbiAgY29uc3QgZGVwcyA9IGF3YWl0IHRhcmdldFByb2plY3REZXBlbmRlbmNpZXMoKTtcblxuICBjb25zb2xlLndhcm4oXCJCdWlsZGluZyBzaGltIGRpc3RyaWJ1dGlvbi4uLlwiKTtcbiAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IEJ1bi5idWlsZCh7XG4gICAgZW50cnlwb2ludHM6IFtwYXRoLnJlc29sdmUoXCIuL2Jpbi9zaGltL2luZGV4LnRzXCIpXSxcbiAgICB0YXJnZXQ6IFwibm9kZVwiLFxuICAgIGV4dGVybmFsOiBPYmplY3Qua2V5cyhkZXBzKSxcbiAgICBtaW5pZnk6IHRydWUsXG4gIH0pO1xuXG4gIC8vIFdyaXRlIG91ciBmaWxlcyB0byBhIG5hbWVzcGFjZSBmb2xkZXIgdGhhdCBjYW4gY29udGFpbiBhbnkgcHJvamVjdCBpbXBvcnRzXG4gIC8vIHdpdGhpbiB0aGUgc2hpbSBwcm9qZWN0IHdpdGhvdXQgcG9sbHV0aW5nIHRoZSBwcm9qZWN0IHdpdGggZGlzdHJpYnV0aW9uXG4gIC8vIGZpbGVzLlxuICBmb3IgKGNvbnN0IHJlc291cmNlIG9mIHJlc3VsdHMub3V0cHV0cykge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiV3JpdGluZyBzaGltIGJ1bmRsZSByZXNvdXJjZTpcIixcbiAgICAgIGNoYWxrLmN5YW5CcmlnaHRCb2xkKHJlc291cmNlLnBhdGgpXG4gICAgKTtcblxuICAgIGF3YWl0IEJ1bi53cml0ZShcbiAgICAgIHBhdGgucmVzb2x2ZShcIi4vc2hpbS9zcmMvYmluL3NoaW1cIiwgcmVzb3VyY2UucGF0aCksXG4gICAgICByZXNvdXJjZVxuICAgICk7XG4gIH1cblxuICAvLyBXcml0ZSBhIGJhcnJlbCBleHBvcnQgaW4gdGhlIHNoaW0gZm9sZGVyIHRvIG5vcm1hbGl6ZSB0aGUgaW1wb3J0IHBhdGggaW4gYVxuICAvLyB3YXkgdGhhdCBpcyBjb252ZW5pZW50IGZvciB0aGUgZGV2ZWxvcGVyOlxuICAvLyBpbXBvcnQgeyAuLi4gfSBmcm9tIFwiZGV2b3BzL3NoaW0vaW5kZXguanNcIjtcbiAgZnMud3JpdGVGaWxlU3luYyhcbiAgICBwYXRoLnJlc29sdmUoXCIuL3NoaW0vaW5kZXguanNcIiksXG4gICAgYGV4cG9ydCAqIGZyb20gXCIuL3NyYy9iaW4vc2hpbS9pbmRleC5qc1wiO1xcbmAsXG4gICAgeyBlbmNvZGluZzogXCJ1dGYtOFwiIH1cbiAgKTtcbiAgZnMud3JpdGVGaWxlU3luYyhcbiAgICBwYXRoLnJlc29sdmUoXCIuL3NoaW0vaW5kZXguZC50c1wiKSxcbiAgICBgZXhwb3J0ICogZnJvbSBcIi4vc3JjL2Jpbi9zaGltL2luZGV4LmQudHNcIjtcXG5gLFxuICAgIHsgZW5jb2Rpbmc6IFwidXRmLThcIiB9XG4gICk7XG5cbiAgLy8gV3JpdGUgdGhlIHR5cGUgZGVjYWxyYXRpb25zIGZvciB0aGUgZmlsZXMuIE1ha2UgYSB0ZW1wIHRzY29uZmlnIHByb2plY3RcbiAgLy8gZmlsZSB0byB0YXJnZXQgdGhlIHNoaW0gc291cmNlIGZpbGVzIG9ubHkuXG4gIGNvbnN0IHRzQ29uZmlnID0gZnMucmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLmpzb25cIikpO1xuICB0c0NvbmZpZy5leGNsdWRlID0gdHNDb25maWcuZXhjbHVkZSB8fCBbXTtcbiAgdHNDb25maWcuZXhjbHVkZS5wdXNoKFwiLi9iaW4vbGliLyoqXCIpO1xuICB0c0NvbmZpZy5pbmNsdWRlID0gW1wiLi9iaW4vc2hpbVwiXTtcbiAgZnMud3JpdGVKU09OU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIiksIHRzQ29uZmlnKTtcbiAgLy8gRW5zdXJlIHRoZSBmaWxlIHN5c3RlbSBoYXMgZmx1c2hlZCB0aGUgdGVtcCBmaWxlIHRvIGRpc2tcbiAgYXdhaXQgd2FpdCg1MDApO1xuXG4gIC8vIFJ1biB0c2MgYW5kIG91dHB1dCB0aGVcbiAgaWYgKFxuICAgICFleGVjU3luYyhcInRzY1wiLCBbXG4gICAgICBcIi1kXCIsXG4gICAgICBcIi0tZW1pdERlY2xhcmF0aW9uT25seVwiLFxuICAgICAgXCItLXByZXR0eVwiLFxuICAgICAgXCItLW91dERpclwiLFxuICAgICAgcGF0aC5yZXNvbHZlKFwiLi9zaGltL3NyYy9iaW5cIiksXG4gICAgICBcIi0tcHJvamVjdFwiLFxuICAgICAgcGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpLFxuICAgIF0pXG4gICkge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjb21waWxlIHR5cGUgZGVjbGFyYXRpb25zIGZvciB0aGUgc2hpbSBmaWxlcy5cIik7XG4gICAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIikpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIFJlbW92ZSB0aGUgdGVtcCBmaWxlXG4gIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpKTtcbn1cblxuLyoqXG4gKiBXZSBtdXN0IGNvcHkgYWxsIG9mIHRoZSB0ZW1wbGF0aW5nIGZpbGVzIGFuZCBzdHJ1Y3R1cmUgdG8gdGhlIGRpc3RyaWJ1dGlvbiBhc1xuICogdGhvc2UgZmlsZXMgYXJlIHV0aWxpemVkIGluIG1hbnkgb2YgdGhlIGNvbW1hbmRzIGFuZCB0aGUgdGVtcGxhdGluZyBzeXN0ZW0gYXNcbiAqIGEgd2hvbGUgbXVzdCB1c2UgdGhlbSBmb3IgdGhlIHNha2Ugb2YuLi4ueW91IGtub3cuLi50ZW1wbGF0aW5nLi4uXG4gKlxuICogVGhpcyBwcmVzZW50cyBzb21lIGNoYWxsZW5nZXMgYXMgdGhlIHRlbXBsYXRpbmcgc3lzdGVtIGhhcyBncm93biB0byBiZSBhXG4gKiByb2J1c3Qgc3lzdGVtIGZvciB3aGljaCBpdCBoYXMgdGhlIGNhcGFiaWxpdGllcyB0byByZXBsYWNlIG1vcmUgY29tcGxleFxuICogY29tbWFuZHMgc3VjaCBhcyBgY29tcG9uZW50IG5ld2AuIEJ1dCB0aGlzIGNvbXBsZXhpdHkgbWVhbnMgdGhlIHRlbXBsYXRlc1xuICogdGhlbXNlbHZlcyBub3cgaGF2ZSBhIHN0cnVjdHVyZSB0aGF0IHJlcXVpcmVzIHRoZSB0ZW1wbGF0ZSB0byBiZSB0cmFuc3BpbGVkXG4gKiBzbyB0aGF0IGl0IGRvZXMgbm90IGNhcnJ5IGEgYnVyZGVuIG9mIGNvbXBsZXhpdHkgd2hlbiB0cnlpbmcgdG8gcnVuIHRoZVxuICogY29tbWFuZC4gaWUgLSBpZiBhIHRlbXBsYXRlIGluIHRoZSBkZXZvcHMgZGlyZWN0b3J5IHV0aWxpemVzIHRvb2xpbmcgZnJvbSB0aGVcbiAqIGRldm9wcyBwcm9qZWN0IHNwZWNpZmljYWxseSwgd2UgZG9uJ3Qgd2FudCB0byBoYXZlIHRvIGNvcHkgYWxsIG9mIHRoYXRcbiAqIHRvb2xpbmcgb3ZlciB0byB0aGUgZGlzdHJpYnV0aW9uIGp1c3QgdG8gbWFrZSB0aGUgdGVtcGxhdGUgd29yay5cbiAqXG4gKiBUaGlzIHdvdWxkIGFsc28gY2F1c2UgaHVnZSBpc3N1ZXMgZm9yIG92ZXJyaWRlcyBhbmQgd2hhdCBub3QuIFNvIHdlIGJ1bmRsZVxuICogdGhlIHRlbXBsYXRlIHRvIHJlZHVjZSB0aGlzIGNvbXBsZXhpdHkgYW5kIG1ha2UgdGhlIHRlbXBsYXRlIGd1YXJhbnRlZWQgdG9cbiAqIHdvcmsgZXZlbiBpbiB0aGUgdGFyZ2V0IHByb2plY3RzIHdpdGggbXVjaCBsZXNzIGZ1c3MuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvcHlUZW1wbGF0ZXMoKSB7XG4gIC8vIFdlIG5vdyBuZWVkIHRvIGNvcHkgYW55IGZpbGVzIHRoYXQgYXJlIFwicmVhZFwiIGZyb20gdGhlIGJpbiBmb2xkZXIgc3VjaCBhc1xuICAvLyB0ZW1wbGF0ZXMuXG4gIGNvbnNvbGUud2FybihcbiAgICBjaGFsay55ZWxsb3dCcmlnaHQoXCJDb3B5aW5nIHRlbXBsYXRlIGZpbGVzIGZvciBiaW4gZGlzdHJpYnV0aW9uXCIpXG4gICk7XG5cbiAgY29uc3QgdGVtcGxhdGVTcmMgPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uLy4uL3RlbXBsYXRlXCIpO1xuICBjb25zdCB0ZW1wbGF0ZURpc3QgPSBwYXRoLnJlc29sdmUoXCIuL2Rpc3QvYmluL3RlbXBsYXRlXCIpO1xuXG4gIGZzLmNvcHlTeW5jKHRlbXBsYXRlU3JjLCB0ZW1wbGF0ZURpc3QpO1xuXG4gIC8vIEZpbmQgYWxsIG9mIHRoZSBpbmRleCBmaWxlcyB0aGF0IHdpbGwgbmVlZCB0byBiZSBjb21waWxlZFxuICBjb25zdCB0ZW1wbGF0ZXMgPSBmc1xuICAgIC5yZWFkZGlyU3luYyh0ZW1wbGF0ZURpc3QpXG4gICAgLm1hcCgoZmlsZSkgPT4gcGF0aC5yZXNvbHZlKHRlbXBsYXRlRGlzdCwgZmlsZSwgXCJpbmRleC50c1wiKSlcbiAgICAuZmlsdGVyKChmaWxlKSA9PiB7XG4gICAgICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAvLyBXZSBnZXQgYWxsIGRlcGVuZGVuY2llcyBvZiB0aGUgcHJvamVjdCBhbmQgY29uc2lkZXIgdGhlbSBleHRlcm5hbC4gVGhpc1xuICAvLyBpbXByb3ZlcyB0aGUgYWJpbGl0eSBmb3IgdGhlIGNvZGUgdG8gYmUgYnVuZGxlZCBzaW5jZSBiaW4gY29tbWFuZHMgaGl0IGFcbiAgLy8gTE9UIG9mIHNuYWdzIGluIGhvdyB0aGV5IGFyZSBpbXBsZW1lbnRlZC5cbiAgY29uc3QgZGVwcyA9IGF3YWl0IHRhcmdldFByb2plY3REZXBlbmRlbmNpZXMoKTtcbiAgbGV0IGRpZEVycm9yID0gZmFsc2U7XG5cbiAgLy8gQnVpbGQgdGhlIHRlbXBsYXRlc1xuICBmb3IgKGNvbnN0IHRlbXBsYXRlIG9mIHRlbXBsYXRlcykge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBCdW4uYnVpbGQoe1xuICAgICAgZW50cnlwb2ludHM6IFt0ZW1wbGF0ZV0sXG4gICAgICB0YXJnZXQ6IFwiYnVuXCIsXG4gICAgICBleHRlcm5hbDogT2JqZWN0LmtleXMoZGVwcyksXG4gICAgICBtaW5pZnk6IHRydWUsXG4gICAgfSk7XG5cbiAgICAvLyBFbnN1cmUgdGhlIGJ1bmRsZSBwcm9kdWNlZCByZXN1bHRzIG9yIHRoaXMgbWVhbnMgdGhlIGJ1aWxkIGZhaWxlZFxuICAgIGlmICghcmVzdWx0cy5zdWNjZXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBjaGFsay5yZWRCcmlnaHRCb2xkKFwiQnVpbGQgZmFpbGVkIGZvciB0ZW1wbGF0ZTpcIiksXG4gICAgICAgIGNoYWxrLmN5YW5CcmlnaHRCb2xkKFxuICAgICAgICAgIHBhdGgucmVsYXRpdmUodGVtcGxhdGVEaXN0LCBwYXRoLmRpcm5hbWUodGVtcGxhdGUpKVxuICAgICAgICApXG4gICAgICApO1xuXG4gICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgcmVzdWx0cy5sb2dzKSB7XG4gICAgICAgIC8vIEJ1biB3aWxsIHByZXR0eSBwcmludCB0aGUgbWVzc2FnZSBvYmplY3RcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cblxuICAgICAgZGlkRXJyb3IgPSB0cnVlO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgcmVzb3VyY2Ugb2YgcmVzdWx0cy5vdXRwdXRzKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiV3JpdGluZyB0ZW1wbGF0ZSBlbnRyeSBmaWxlOlwiLFxuICAgICAgICBjaGFsay5jeWFuQnJpZ2h0Qm9sZChcbiAgICAgICAgICBwYXRoLnJlbGF0aXZlKFxuICAgICAgICAgICAgdGVtcGxhdGVEaXN0LFxuICAgICAgICAgICAgcGF0aC5yZXNvbHZlKHBhdGguZGlybmFtZSh0ZW1wbGF0ZSksIHJlc291cmNlLnBhdGgpXG4gICAgICAgICAgKVxuICAgICAgICApXG4gICAgICApO1xuXG4gICAgICBhd2FpdCBCdW4ud3JpdGUoXG4gICAgICAgIHBhdGgucmVzb2x2ZShwYXRoLmRpcm5hbWUodGVtcGxhdGUpLCByZXNvdXJjZS5wYXRoKSxcbiAgICAgICAgcmVzb3VyY2VcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRpZEVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIGNoYWxrLnJlZEJyaWdodEJvbGQoXG4gICAgICAgIFwiU29tZSB0ZW1wbGF0ZXMgaGF2ZSBlcnJvcnMgKHNlZSBhYm92ZSksIHN0b3BwaW5nIHRoZSBidWlsZCBwcm9jZXNzLlwiXG4gICAgICApXG4gICAgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb3B5IGFueSBzdXBwb3J0aW5nIGZpbGVzIHRoYXQgYXJlIHJlcXVpcmVkIGZvciB0aGUgY29tbWFuZHMgdG8gd29ya1xuICogY29ycmVjdGx5LlxuICovXG5hc3luYyBmdW5jdGlvbiBjb3B5QXJ0aWZhY3RzKCkge1xuICAvLyBDb3B5IHRoZSBzaCBzY3JpcHQgZm9yIHN0YXJ0aW5nIHVwIHRoZSBiaW4gY29tbWFuZHNcbiAgY29uc29sZS53YXJuKFxuICAgIGNoYWxrLnllbGxvd0JyaWdodChcIkNvcHlpbmcgZW50cnkgc2hlbGwgc2NyaXB0IGZvciBiaW4gZGlzdHJpYnV0aW9uXCIpXG4gICk7XG5cbiAgZnMuY29weVN5bmMoXG4gICAgcGF0aC5yZXNvbHZlKFwiLi9iaW4vbWFpbi1lbnRyeS5zaFwiKSxcbiAgICBwYXRoLnJlc29sdmUoXCIuL2Rpc3QvYmluL21haW4tZW50cnkuc2hcIilcbiAgKTtcblxuICBmcy5jb3B5U3luYyhcbiAgICBwYXRoLnJlc29sdmUoXCIuL2Jpbi9tYWluLWVudHJ5LnBzMVwiKSxcbiAgICBwYXRoLnJlc29sdmUoXCIuL2Rpc3QvYmluL21haW4tZW50cnkucHMxXCIpXG4gICk7XG59XG5cbi8qKlxuICogVGhpcyBydW5zIHRoZSBidWlsZCBzY3JpcHQgZm9yIGJ1bmRsaW5nIHRoZSBkZXZvcHMgZW52aXJvbm1lbnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbGVhc2VCaW4oKSB7XG4gIGNvbnNvbGUud2FybihjaGFsay5jeWFuQnJpZ2h0KFwiQnVpbGRpbmcgYmluIGNvbW1hbmRzIGZvciB0aGUgZGlzdHJpYnV0aW9uLlwiKSk7XG5cbiAgaWYgKFxuICAgICFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcIi4vYmluL21haW4udHNcIikpIHx8XG4gICAgIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiLi9iaW4vbWFpbi1lbnRyeS5zaFwiKSkgfHxcbiAgICBpZ25vcmUuaWdub3JlcyhcImJpblwiKVxuICApIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBgVHJpZWQgdG8gbWFrZSBhIHJlbGVhc2UgZm9yIHRoZSBiaW4gY29tbWFuZHMsIGJ1dCBubyBiaW4vbWFpbi50cyBvciBiaW4vbWFpbi5zaCBlbnRyeSBmaWxlIHdhcyBmb3VuZC4gKG9yIHdhcyBnaXRpZ25vcmVkKTpcXG5cXHQke3BhdGgucmVzb2x2ZShcbiAgICAgICAgXCIuL2Jpbi9tYWluLnRzXCJcbiAgICAgICl9XFxuXFx0JHtwYXRoLnJlc29sdmUoXCIuL2Jpbi9tYWluLnNoXCIpfWBcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZzLmVuc3VyZURpclN5bmMocGF0aC5yZXNvbHZlKFwiLi9kaXN0XCIpKTtcbiAgZnMuZW5zdXJlRGlyU3luYyhwYXRoLnJlc29sdmUoXCIuL2Rpc3QvYmluL3RlbXBsYXRlXCIpKTtcblxuICBhd2FpdCBidWlsZENvbW1hbmRzKCk7XG4gIGF3YWl0IGJ1aWxkU2hpbSgpO1xuICBhd2FpdCBjb3B5VGVtcGxhdGVzKCk7XG4gIGF3YWl0IGNvcHlBcnRpZmFjdHMoKTtcbn1cbiIsCiAgICAiaW1wb3J0ICogYXMgVml0ZSBmcm9tIFwidml0ZVwiO1xuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHZpdGVEZXZvcHNTdHJpbmdSZXBsYWNlUGx1Z2luKFxuICByZXBsYWNlbWVudHM6IHsgZnJvbTogc3RyaW5nOyB0bzogc3RyaW5nIH1bXVxuKTogVml0ZS5QbHVnaW5PcHRpb24ge1xuICByZXR1cm4ge1xuICAgIG5hbWU6IFwidml0ZS1kZXZvcHMtc3RyaW5nLXJlcGxhY2UtcGx1Z2luXCIsXG4gICAgZW5mb3JjZTogXCJwcmVcIixcblxuICAgIGxvYWQoaWQ6IHN0cmluZykge1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLnJlc29sdmUoaWQpO1xuICAgICAgLy8gRGV0ZXJtaW5lIGFwcHJvcHJpYXRlIE1JTUUgdHlwZVxuICAgICAgY29uc3QgZXh0ZW5zaW9ucyA9IFtcIi50c1wiLCBcIi5qc1wiLCBcIi50c3hcIiwgXCIuanN4XCJdO1xuXG4gICAgICAvLyBJZiB0aGUgZXh0ZW5zaW9uIHR5cGUgd2FzIGVzdGFibGlzaGVkLCB0aGlzIHJlc291cmNlIHdpbGwgYmUgYmFzZTY0IGlubGluZWQuXG4gICAgICBpZiAoXG4gICAgICAgIGZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpICYmXG4gICAgICAgIGV4dGVuc2lvbnMuaW5jbHVkZXMocGF0aC5leHRuYW1lKGZpbGVQYXRoKSkgJiZcbiAgICAgICAgIWZpbGVQYXRoLmluY2x1ZGVzKFwibm9kZV9tb2R1bGVzXCIpICYmXG4gICAgICAgICFmaWxlUGF0aC5pbmNsdWRlcyhcIlxceDAwXCIpXG4gICAgICApIHtcbiAgICAgICAgbGV0IGNvZGUgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsIHsgZW5jb2Rpbmc6IFwidXRmLThcIiB9KTtcbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgZGlzY292ZXJlZCBzdHJpbmcgaW4gdGhlIGNvZGVcbiAgICAgICAgcmVwbGFjZW1lbnRzLmZvckVhY2goKHJlcGxhY2VtZW50KSA9PiB7XG4gICAgICAgICAgY29kZSA9IGNvZGUucmVwbGFjZShyZXBsYWNlbWVudC5mcm9tLCByZXBsYWNlbWVudC50byk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjb2RlO1xuICAgICAgfVxuICAgIH0sXG4gIH07XG59XG4iLAogICAgIi8qKlxuICogVGhpcyBpcyBhIHNwZWNpYWxpemVkIHBsdWdpbiBmb3Igc3VwcG9ydGluZyB0aGUgYGFwcC9jb25maWdgIGZvbGRlciB0byBoYXZlXG4gKiB0YXJnZXR0ZWQgZW52aXJvbm1lbnQgZmlsZXMgdGhhdCBhdXRvbWF0aWNhbGx5IHN3YXAgZm9yIHRoZSBjb3JyZWN0XG4gKiBlbnZpcm9ubWVudCBiZWluZyBidWlsdCBmb3IuXG4gKlxuICogVGhlIGRlZmF1bHQgY29uZmlndXJhdGlvbiB3b3VsZCBiZSB0byBoYXZlIGBlbnZgIGZpbGVzIGF0IHRoZSByb290IG9mIHRoZVxuICogZm9sZGVyOlxuICpcbiAqIGBgYFxuICogYXBwL2NvbmZpZzpcbiAqICAgZW52LnRzXG4gKiAgIGVudi5wcm9kLnRzXG4gKiAgIGVudi5zdGFnZS50c1xuICogICBlbnYuY3VzdG9tLnRzXG4gKiBgYGBcbiAqXG4gKiBZb3UgaGF2ZSB0d28gd2F5cyB0byB0YXJnZXQgdGhlIGNvbmZpZ3VyYXRpb246XG4gKlxuICogRm9yIGRldmVsb3BtZW50IHVzZSB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGUgYEVOVl9NT0RFYCB0byB0YXJnZXQgdGhlXG4gKiBlbnZpcm9ubWVudCBvZiBjaG9pY2Ugc3VjaCBhc1xuICpcbiAqIGBgYFxuICogRU5WX01PREU9Y3VzdG9tXG4gKiBgYGBcbiAqXG4gKiBGb3IgcmVsZWFzZXMgeW91IHNwZWNpZnkgYSBgYnVpbGQuY29uZi5qc2AgZmlsZSBpbiB0aGUgcm9vdCBvZiB0aGUgcHJvamVjdFxuICogd2l0aCB0aGUgY29udGVudHM6XG4gKlxuICogYGBgXG4gKiBleHBvcnQgY29uc3QgQlVJTERfVEFSR0VUUyA9IFtcInByb2RcIiwgXCJjdXN0b21cIl07XG4gKiBgYGBcbiAqXG4gKiBXaGljaCB3aWxsIGNhdXNlIHRoZSByZWxlYXNlIHByb2Nlc3MgdG8gbWFrZSBhIGRpc3RyaWJ1dGlvbiBwZXIgcmVsZWFzZVxuICogdGFyZ2V0IHNwZWNpZmllZC5cbiAqXG4gKiBlbnYgd2l0aGluIHRoaXMgZGV2b3BzIHN5c3RlbSBpcyBpbnRlbmRlZCB0byBoZWxwIHNtb290aGUgb3ZlciBhIGRldiBzZXJ2ZXJcbiAqIHdpdGggdGhlIGRldmVsb3BtZW50IGVudmlyb25tZW50IHRvIG1ha2UgaXQgZWFzaWVyIHRvIGludGVyZmFjZSB3aXRoIGFueVxuICogcmVtb3RlIHNlcnZlciB1bmRlciBhbnkgZG9tYWluLlxuICpcbiAqIEhvd2V2ZXIsIHRoZSBjb25jZXB0IGNhbiBiZSBleHBhbmRlZCBmb3IgdGhlIGRldmVsb3BlciBieSBhZGRpbmcgc3ViIGZvbGRlcnNcbiAqIHRvIGNyZWF0ZSBtb3JlIHNwZWNpZmljIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb25zIHRoYXQgbWF5IGJlIG5lZWRlZCBmb3IgYVxuICogZnJvbnQgZW5kIGJ1dCBOT1QgYSBzZXJ2ZXIuIE9yIG1heSBiZSBpdCdzIGp1c3QgZm9yIGVhc2llciBvcmdhbml6YXRpb24gb2ZcbiAqIGNvbmZpZ3VyYXRpb24uIE9uZSBjb21tb24gdXNlIHdvdWxkIGJlIGEgdGhlbWU6XG4gKlxuICogYGBgXG4gKiBhcHAvY29uZmlnOlxuICogICBlbnY6XG4gKiAgICAgZW52LnRzXG4gKiAgICAgZW52LnByb2QudHNcbiAqICAgICBlbnYuc3RhZ2UudHNcbiAqICAgICBlbnYuY3VzdG9tLnRzXG4gKiAgdGhlbWU6XG4gKiAgICAgdGhlbWUudHNcbiAqICAgICB0aGVtZS5wcm9kLnRzXG4gKiAgICAgdGhlbWUuc3RhZ2UudHNcbiAqICAgICB0aGVtZS5jdXN0b20udHNcbiAqIGBgYFxuICpcbiAqIFlvdXIgY29kZSBpbXBvcnRzIHRoZXNlIGNvbmZpZ3VyYXRpb25zIHZpYTpcbiAqXG4gKiBgYGBcbiAqIGltcG9ydCB7IFRoaW5nIH0gZnJvbSBcImNvbmZpZy90aGluZ1wiO1xuICogYGBgXG4gKlxuICogVGhlIGltcG9ydGFudCBmb3JtYXR0aW5nIGNvbmNlcm5zIGhlcmUgaXMgdG8gZW5zdXJlIHlvdSBtYWtlIGEgY29tbW9uIGVudHJ5XG4gKiBmaWxlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyB0aGUgcGFyZW50IGZvbGRlcjpcbiAqXG4gKiBgYGBcbiAqIGFwcC9jb25maWc6XG4gKiAgIGVudjpcbiAqICAgICBlbnYudHNcbiAqICAgdGhlbWU6XG4gKiAgICAgdGhlbWUudHNcbiAqIGBgYFxuICpcbiAqIFRoZW4geW91IGFkZCBhbnkgYWRkaXRpb25hbCBlbnZpcm9ubWVudHMgb2YgdGhlIHNhbWUgZmlsZSBuYW1lLlxuICogYDxmaWxlPi48ZW52aXJvbm1lbnQ+LnRzYC5cbiAqXG4gKiBUaGUgZmlsZSB3aXRoIG5vIGVudmlyb25tZW50IGluIGl0J3MgZmlsZSBwYXRoIGlzIHRoZSBmaWxlIHVzZWQgaW5cbiAqIGRldmVsb3BtZW50IHdoZW4gbm8gZW52aXJvbm1lbnQgaXMgc3BlY2lmaWVkLlxuICovXG5cbmltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi9saWIvdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgdml0ZURldm9wc1N0cmluZ1JlcGxhY2VQbHVnaW4gfSBmcm9tIFwiLi92aXRlLWRldm9wcy1zdHJpbmctcmVwbGFjZS1wbHVnaW4uanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIHZpdGVEZXZvcHNBcHBDb25maWdQbHVnaW4oZW52Pzogc3RyaW5nIHwgbnVsbCkge1xuICAvLyBUaGlzIGlzIGEgZml4IGZvciBydW5uaW5nIHN0b3J5Ym9vayBob3cgd2UgcnVuIGl0IHdoaWNoIGFkanVzdHMgdGhlIGN3ZFxuICAvLyB0byB0aGUgZGV2b3BzIGZvbGRlclxuICBjb25zdCBwcm9qZWN0Um9vdCA9IHByb2Nlc3MuZW52LlBST0pFQ1RfUk9PVCB8fCBcIi5cIjtcbiAgLy8gTG9vayBpbiB0aGUgYXBwIGNvbmZpZyBmb2xkZXIgZm9yIGFueSBmb2xkZXIgZW52aXJvbm1lbnRzXG4gIGNvbnN0IGNvbmZpZ1BhdGggPSBwYXRoLnJlc29sdmUocHJvamVjdFJvb3QsIFwiYXBwL2NvbmZpZ1wiKTtcblxuICBpZiAoIWZzLmV4aXN0c1N5bmMoY29uZmlnUGF0aCkpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBgdml0ZURldm9wc0FwcENvbmZpZ1BsdWdpbjogJHtjaGFsay5jeWFuQnJpZ2h0Qm9sZChcbiAgICAgICAgXCJObyBhcHAvY29uZmlnIGZvbGRlciBmb3VuZC5cIlxuICAgICAgKX1gXG4gICAgKTtcblxuICAgIHJldHVybjtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgYWxsRm9sZGVycyA9IGZzLnJlYWRkaXJTeW5jKGNvbmZpZ1BhdGgpLmZpbHRlcigoZikgPT4ge1xuICAgICAgcmV0dXJuIGZzLnN0YXRTeW5jKHBhdGguam9pbihjb25maWdQYXRoLCBmKSkuaXNEaXJlY3RvcnkoKTtcbiAgICB9KTtcbiAgICBjb25zdCBmb2xkZXJQYXRocyA9IGFsbEZvbGRlcnMubWFwKChmKSA9PiBwYXRoLmpvaW4oY29uZmlnUGF0aCwgZikpO1xuICAgIGNvbnN0IHJlcGxhY2VtZW50cyA9IGFsbEZvbGRlcnMubWFwKChmb2xkZXIsIGkpID0+IHtcbiAgICAgIC8vIFdpdGggbm8gZW52aXJvbm1lbnQsIHdlIGNoZWNrIGZvciB0aGUgc3BlY2lhbCBjYXNlIG9mIGEgLmxvY2FsIGZpbGUgYmVpbmdcbiAgICAgIC8vIHByZXNlbnQgaW4gdGhlIGZvbGRlci4gSWYgaXQgaXMsIHdlIHVzZSB0aGF0IGFzIHRoZSBlbnZpcm9ubWVudC5cbiAgICAgIGlmICghZW52KSB7XG4gICAgICAgIC8vIElmIGxvY2FsIGV4aXN0cywgY3JlYXRlIHNwZWNpYWwgcmVwbGFjZW1lbnQgdG8gdGFyZ2V0IHRoZSBsb2NhbCBmaWxlXG4gICAgICAgIGlmIChcbiAgICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihmb2xkZXJQYXRoc1tpXSwgYCR7Zm9sZGVyfS5sb2NhbGApKSB8fFxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGZvbGRlclBhdGhzW2ldLCBgJHtmb2xkZXJ9LmxvY2FsLmpzYCkpIHx8XG4gICAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oZm9sZGVyUGF0aHNbaV0sIGAke2ZvbGRlcn0ubG9jYWwudHNgKSkgfHxcbiAgICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihmb2xkZXJQYXRoc1tpXSwgYCR7Zm9sZGVyfS5sb2NhbC50c3hgKSkgfHxcbiAgICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihmb2xkZXJQYXRoc1tpXSwgYCR7Zm9sZGVyfS5sb2NhbC5qc3hgKSlcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZnJvbTogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn1cImAsXG4gICAgICAgICAgICAgIHRvOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS5sb2NhbFwiYCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGZyb206IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LmpzXCJgLFxuICAgICAgICAgICAgICB0bzogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0ubG9jYWwuanNcImAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBmcm9tOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS50c1wiYCxcbiAgICAgICAgICAgICAgdG86IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LmxvY2FsLnRzXCJgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB0aGUgZGVmYXVsdCBlbnYgZmlsZSB3aWxsIGJlIHVzZWRcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEFuIGVudmlyb21lbnQgd2FzIHNwZWNpZmllZCwgc28gd2Ugd2lsbCB0YXJnZXQgdGhhdCBlbnZpcm9ubWVudFxuICAgICAgcmV0dXJuIFtcbiAgICAgICAge1xuICAgICAgICAgIGZyb206IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9XCJgLFxuICAgICAgICAgIHRvOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS4ke2Vudn1cImAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBmcm9tOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS5qc1wiYCxcbiAgICAgICAgICB0bzogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0uJHtlbnZ9LmpzXCJgLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZnJvbTogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0udHNcImAsXG4gICAgICAgICAgdG86IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LiR7ZW52fS50c1wiYCxcbiAgICAgICAgfSxcbiAgICAgIF07XG4gICAgfSk7XG5cbiAgICAvLyBGbGF0dGVuIGFsbCBvZiBvdXIgbWFwcGluZ3MgaW50byBhIHNpbmdsZSBhcnJheVxuICAgIGNvbnN0IGZsYXR0ZW5lZCA9IHJlcGxhY2VtZW50cy5yZWR1Y2UoKGFjYywgdmFsKSA9PiBhY2MuY29uY2F0KHZhbCksIFtdKTtcblxuICAgIC8vIFNlZSBpZiB0aGVyZSdzIGEgYmFzZSBlbnYgbG9jYWwgZmlsZSB0byB1c2VcbiAgICBjb25zdCBzaG91bGRVc2VMb2NhbFRvcEVudiA9XG4gICAgICAhZW52ICYmXG4gICAgICAoZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oY29uZmlnUGF0aCwgYGVudi5sb2NhbGApKSB8fFxuICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihjb25maWdQYXRoLCBgZW52LmxvY2FsLmpzYCkpIHx8XG4gICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGNvbmZpZ1BhdGgsIGBlbnYubG9jYWwudHNgKSkgfHxcbiAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oY29uZmlnUGF0aCwgYGVudi5sb2NhbC50c3hgKSkgfHxcbiAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oY29uZmlnUGF0aCwgYGVudi5sb2NhbC5qc3hgKSkpO1xuXG4gICAgLy8gR2VuZXJhdGUgbWFwcGluZ3MgZm9yIHRoZSB0b3AgbGV2ZWwgZW52IGZpbGUuIFRoaXMgaXMgYSBsZWdhY3kgc3VwcG9ydFxuICAgIC8vIGZlYXR1cmUuXG4gICAgY29uc3QgbWFwVG9wRW52ID0gc2hvdWxkVXNlTG9jYWxUb3BFbnZcbiAgICAgID8gLy8gVXNlIHRoZSBsb2NhbCBlbnYgZmlsZSBpZiBpdCBleGlzdHNcbiAgICAgICAgW1xuICAgICAgICAgIHsgZnJvbTogJ1wiY29uZmlnL2VudlwiJywgdG86IGBcImNvbmZpZy9lbnYubG9jYWxcImAgfSxcbiAgICAgICAgICB7IGZyb206ICdcImNvbmZpZy9lbnYuanNcIicsIHRvOiBgXCJjb25maWcvZW52LmxvY2FsLmpzXCJgIH0sXG4gICAgICAgICAgeyBmcm9tOiAnXCJjb25maWcvZW52LnRzXCInLCB0bzogYFwiY29uZmlnL2Vudi5sb2NhbC50c1wiYCB9LFxuICAgICAgICBdXG4gICAgICA6IGVudlxuICAgICAgPyAvLyBVc2UgdGhlIGNvcnJlY3QgZW52aXJvbm1lbnQgd2hlbiBzcGVjaWZpZWRcbiAgICAgICAgW1xuICAgICAgICAgIHsgZnJvbTogJ1wiY29uZmlnL2VudlwiJywgdG86IGBcImNvbmZpZy9lbnYuJHtlbnZ9XCJgIH0sXG4gICAgICAgICAgeyBmcm9tOiAnXCJjb25maWcvZW52LmpzXCInLCB0bzogYFwiY29uZmlnL2Vudi4ke2Vudn0uanNcImAgfSxcbiAgICAgICAgICB7IGZyb206ICdcImNvbmZpZy9lbnYudHNcIicsIHRvOiBgXCJjb25maWcvZW52LiR7ZW52fS50c1wiYCB9LFxuICAgICAgICBdXG4gICAgICA6IC8vIElmIG5vIGVudmlyb25tZW50IHdhcyBzcGVjaWZpZWQsIG5vIG1hcHBpbmcgc2hvdWxkIGhhcHBlblxuICAgICAgICBbXTtcblxuICAgIGNvbnN0IGFsbE1hcHBpbmdzID0gW1xuICAgICAgLy8gU3VwcG9ydCBlbnYgZnJvbSB0aGUgcm9vdCBvZiB0aGUgY29uZmlnIGZvbGRlclxuICAgICAgLi4ubWFwVG9wRW52LFxuICAgICAgLy8gU3VwcG9ydCBhbnkgZm9sZGVyIGVudmlyb25tZW50c1xuICAgICAgLi4uZmxhdHRlbmVkLFxuICAgIF07XG5cbiAgICAvLyBMb2cgdGhlIG1hcHBpbmcgY29uZmlndXJhdGlvbiBpbiB1c2VcbiAgICBpZiAoYWxsTWFwcGluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS53YXJuKGBcblxuICAke2NoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJVc2luZyB0aGUgZm9sbG93aW5nIG1hcHBpbmdzIGZvciBhcHAgY29uZmlnOlwiKX1cblxuICBcXHQke2NoYWxrLmN5YW5CcmlnaHRCb2xkKFxuICAgIGFsbE1hcHBpbmdzLm1hcCgobSkgPT4gYFxcbiAgJHttLmZyb219ID0+ICR7bS50b31gKS5qb2luKFwiXFxuXFx0XCIpXG4gICl9XG5cbiAgICAgIGApO1xuICAgIH1cblxuICAgIHJldHVybiB2aXRlRGV2b3BzU3RyaW5nUmVwbGFjZVBsdWdpbihhbGxNYXBwaW5ncyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBjaGFsay5yZWRCcmlnaHRCb2xkKGBcbiAgICAgIEFwcCBjb25maWcgcGx1Z2luIGZhaWxlZCB0byBsb2FkLiBUaGUgZGVmYXVsdCBjb25maWcgcGF0aHMgd2lsbCBiZSB1c2VkXG4gICAgICBhbmQgYW55IHNwZWNpZmljIGVudmlyb25tZW50IHJlcXVlc3RlZCB3aWxsIGJlIGlnbm9yZWQuXG4gICAgYClcbiAgICApO1xuICB9XG59XG4iLAogICAgImltcG9ydCAqIGFzIFZpdGUgZnJvbSBcInZpdGVcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBJZ25vcmUgZnJvbSBcImlnbm9yZVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGJ1aWxkVml0ZUNvbmZpZyB9IGZyb20gXCIuLi8uLi9idWlsZC12aXRlLWNvbmZpZy5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuaW1wb3J0IHsgdml0ZURldm9wc0FwcENvbmZpZ1BsdWdpbiB9IGZyb20gXCIuLi8uLi8uLi8uLi9zaGltL3ZpdGUtcGx1Z2lucy92aXRlLWRldm9wcy1hcHAtY29uZmlnLXBsdWdpbi5qc1wiO1xuXG5jb25zdCBnaXRJZ25vcmVQYXRoID0gcGF0aC5yZXNvbHZlKFwiLmdpdGlnbm9yZVwiKTtcbmxldCBpZ25vcmUgPSBJZ25vcmUuZGVmYXVsdCgpO1xuXG5pZiAoZnMuZXhpc3RzU3luYyhnaXRJZ25vcmVQYXRoKSkge1xuICBpZ25vcmUgPSBpZ25vcmUuYWRkKGZzLnJlYWRGaWxlU3luYyhnaXRJZ25vcmVQYXRoKS50b1N0cmluZygpKTtcbn1cblxuLyoqXG4gKiBUaGlzIHBlcmZvcm1zIHRoZSBidW5kbGluZyBwcm9jZXNzIGZvciBkaXN0cmlidXRpb24uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWxlYXNlQ2xpZW50KGVudjogc3RyaW5nKSB7XG4gIGNvbnNvbGUud2FybihjaGFsay5jeWFuQnJpZ2h0KFwiQnVpbGRpbmcgY2xpZW50IGZpbGVzIGZvciB0aGUgZGlzdHJpYnV0aW9uLlwiKSk7XG5cbiAgLy8gUHJvdmlkZSB0aGUgYnVuZGxpbmcgcHJvY2VzcyB0aGUgY3VycmVudCBidWlsZCB2ZXJzaW9uLiBUaGlzIGFsbG93c1xuICAvLyBwcmludGluZyB0aGUgdmVyc2lvbiBpbiBhIG1lYW5pbmdmdWwgd2F5IGZvciBkZWJ1Z2dpbmcuXG4gIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OID1cbiAgICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiB8fCAoYXdhaXQgdGFyZ2V0UHJvamVjdFZlcnNpb24oKSk7XG5cbiAgaWYgKHByb2Nlc3MuZW52LkZPUkNFX0JVSUxEICE9PSBcInRydWVcIikge1xuICAgIGlmIChcbiAgICAgICFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcImFwcC9jbGllbnRcIikpIHx8XG4gICAgICBpZ25vcmUuaWdub3JlcyhcImFwcC9jbGllbnRcIilcbiAgICApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBUcmllZCB0byBtYWtlIGEgcmVsZWFzZSBmb3IgdGhlIHdlYiBhcHAgY2xpZW50LCBidXQgbm8gYXBwL2NsaWVudCBlbnRyeSBmaWxlIHdhcyBmb3VuZC4gKG9yIHdhcyBnaXRpZ25vcmVkKTpcXG5cXHQke3BhdGgucmVzb2x2ZShcbiAgICAgICAgICBcImFwcC9jbGllbnRcIlxuICAgICAgICApfWBcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgY29uc3Qgbm9kZUVudkJhayA9IHByb2Nlc3MuZW52Lk5PREVfRU5WO1xuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IFwicHJvZHVjdGlvblwiO1xuXG4gIGNvbnNvbGUud2FybihcbiAgICBgUmVsZWFzaW5nICR7Y2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcImFwcC9jbGllbnRcIil9IGZvciBFbnZpcm9ubWVudDpgLFxuICAgIGNoYWxrLmN5YW5CcmlnaHRCb2xkKGVudilcbiAgKTtcbiAgcHJvY2Vzcy5lbnYuQlVJTERfRU5WID0gZW52O1xuXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGJ1aWxkVml0ZUNvbmZpZygpO1xuXG4gIC8vIE1ha2Ugc3VyZSBvdXIgZW52aXJvbm1lbnQgaXMgcmVwbGFjZWQgZm9yIHRoZSBidWlsZFxuICBjb25maWcucGx1Z2lucyA9IFt2aXRlRGV2b3BzQXBwQ29uZmlnUGx1Z2luKGVudiksIC4uLihjb25maWcucGx1Z2lucyB8fCBbXSldO1xuXG4gIGNvbmZpZy5sb2dMZXZlbCA9IFwid2FyblwiO1xuICBjb25maWcubW9kZSA9IFwicHJvZHVjdGlvblwiO1xuICBjb25maWcucm9vdCA9IHBhdGgucmVzb2x2ZShcImFwcC9jbGllbnRcIik7XG4gIGNvbmZpZy5idWlsZCEub3V0RGlyID0gcGF0aC5yZXNvbHZlKFwiZGlzdC9hcHAvY2xpZW50XCIsIGVudik7XG4gIGNvbmZpZy5idWlsZCEud2F0Y2ggPSB2b2lkIDA7XG4gIGNvbmZpZy5idWlsZCEucm9sbHVwT3B0aW9ucyEub3V0cHV0ID0ge1xuICAgIGRpcjogY29uZmlnLmJ1aWxkIS5vdXREaXIsXG4gICAgZW50cnlGaWxlTmFtZXM6IFwiaW5kZXguanNcIixcbiAgICBjaHVua0ZpbGVOYW1lczogXCJpbmRleC5qc1wiLFxuICAgIG1hbnVhbENodW5rczogdW5kZWZpbmVkLFxuICB9O1xuXG4gIGF3YWl0IFZpdGUuYnVpbGQoY29uZmlnKTtcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBub2RlRW52QmFrO1xuXG4gIC8vIFJ1biBhIHF1aWNrIGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgZGlzdHJpYnV0aW9uIGZpbGUgd2FzIG1hZGVcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShgZGlzdC9hcHAvY2xpZW50LyR7ZW52fS9pbmRleC5qc2ApKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcIlxcblxcbkZhaWxlZCB0byBjcmVhdGUgQ2xpZW50IG91dHB1dCBidW5kbGUuIEV4aXRpbmcgcHJvY2Vzcy4uLlxcblxcblwiXG4gICAgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IGdldFBhY2thZ2VNYW5hZ2VyIH0gZnJvbSBcIi4vZ2V0LXBhY2thZ2UtbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgaXNEZWZpbmVkIH0gZnJvbSBcIi4uL3V0aWwvdHlwZXMuanNcIjtcblxuLyoqXG4gKiBFeGVjdXRlcyBhbiBgbnB4IDxjb21tYW5kPmAgaW4gdGhlIGN1cnJlbnQgY29udGV4dC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWNTY3JpcHRYKFxuICBhcmdzOiAoc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbClbXSA9IFtdLFxuICBvcHRpb25zPzoge1xuICAgIGV4Y2x1ZGVCdW5GbGFnPzogYm9vbGVhbjtcbiAgfVxuKSB7XG4gIGNvbnN0IG1hbmFnZXIgPSBhd2FpdCBnZXRQYWNrYWdlTWFuYWdlcigpO1xuXG4gIGlmIChleGVjU2NyaXB0WC5vcHRpbWl6ZSkge1xuICAgIGlmIChtYW5hZ2VyWzFdID09PSBcImJ1bnhcIikge1xuICAgICAgcmV0dXJuIGV4ZWNTeW5jKFxuICAgICAgICBtYW5hZ2VyWzFdLFxuICAgICAgICBbb3B0aW9ucz8uZXhjbHVkZUJ1bkZsYWcgPyBudWxsIDogXCItLWJ1blwiLCAuLi5hcmdzXS5maWx0ZXIoaXNEZWZpbmVkKVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZXhlY1N5bmMobWFuYWdlclsxXSwgWy4uLmFyZ3NdKTtcbn1cblxuZXhlY1NjcmlwdFgub3B0aW1pemUgPSB0cnVlO1xuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgZXhlY1NjcmlwdFggfSBmcm9tIFwiLi4vLi4vLi4vZXhlYy9leGVjLXNjcmlwdHguanNcIjtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgdHlwZXMgZm9yIHRoZSBidWlsZCBmb3IgdGhlIHRhcmdldCBwcm9qZWN0IHVpIGZvbGRlci5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbGVhc2VMaWJyYXJ5VHlwZXMoKSB7XG4gIC8vIE11c3QgaGF2ZSBhIGNvbXBvbmVudCBsaWIgZm9sZGVyIHRvIGNvbnNpZGVyXG4gIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCJ1aVwiKSkpIHJldHVybjtcbiAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBmb2xkZXIgdG8gaW5qZWN0IHRoZSB0eXBlcyBpbnRvXG4gIGZzLmVuc3VyZURpcihwYXRoLnJlc29sdmUoXCJkaXN0L3R5cGVzXCIpKTtcbiAgLy8gR2VuZXJhdGUgdGhlIC5kLnRzIGZpbGVzIHVzaW5nIHRzYyBjb21tYW5kIHZpYSBidW54XG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiR2VuZXJhdGluZyAuZC50cyBmaWxlcy4uLlwiKSk7XG5cbiAgLy8gUGVyZm9ybSB0aGUgZHRzIGdlbmVyYXRpb25cbiAgZXhlY1NjcmlwdFgoW1xuICAgIFwidHNjXCIsXG4gICAgXCItLWVtaXREZWNsYXJhdGlvbk9ubHlcIixcbiAgICBcIi0tZGVjbGFyYXRpb25cIixcbiAgICBcIi0tb3V0RGlyXCIsXG4gICAgXCJkaXN0L3R5cGVzXCIsXG4gICAgXCItLXByb2plY3RcIixcbiAgICBwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy5qc29uXCIpLFxuICBdKTtcblxuICAvLyBEZWxldGUgdGhlIGdlbmVyYXRlZCB0eXBlIG9mIGV2ZXJ5IGZvbGRlciBFWENFUFQgdGhlIHVpIGFuZCB1dGlsIGZvbGRlclxuICBjb25zdCBmb2xkZXJzID0gZnMucmVhZGRpclN5bmMocGF0aC5yZXNvbHZlKFwiZGlzdC90eXBlc1wiKSk7XG4gIGZvciAoY29uc3QgZm9sZGVyIG9mIGZvbGRlcnMpIHtcbiAgICBpZiAoZm9sZGVyID09PSBcInVpXCIgfHwgZm9sZGVyID09PSBcInV0aWxcIikgY29udGludWU7XG4gICAgY29uc29sZS53YXJuKGNoYWxrLnllbGxvd0JyaWdodChgUmVtb3ZpbmcgdHlwZXMgZm9yIGZvbGRlcjogJHtmb2xkZXJ9YCkpO1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwiZGlzdC90eXBlc1wiLCBmb2xkZXIpKTtcbiAgfVxufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGFyZ2V0UHJvamVjdE5hbWUoKSB7XG4gIGNvbnN0IHBhY2thZ2VKc29uID0gZnMucmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSk7XG4gIHJldHVybiBwYWNrYWdlSnNvbi5uYW1lIHx8IFwiXCI7XG59XG4iLAogICAgImltcG9ydCAqIGFzIFZpdGUgZnJvbSBcInZpdGVcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBJZ25vcmUgZnJvbSBcImlnbm9yZVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGJ1aWxkVml0ZUNvbmZpZyB9IGZyb20gXCIuLi8uLi9idWlsZC12aXRlLWNvbmZpZy5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgcmVsZWFzZUxpYnJhcnlUeXBlcyB9IGZyb20gXCIuL3JlbGVhc2UtbGlicmFyeS10eXBlcy5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdERlcGVuZGVuY2llcyB9IGZyb20gXCIuLi8uLi8uLi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC1kZXBlbmRlbmNpZXMuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3ROYW1lIH0gZnJvbSBcIi4uLy4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LW5hbWUuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3RWZXJzaW9uIH0gZnJvbSBcIi4uLy4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LXZlcnNpb24uanNcIjtcblxuY29uc3QgZ2l0SWdub3JlUGF0aCA9IHBhdGgucmVzb2x2ZShcIi5naXRpZ25vcmVcIik7XG5sZXQgaWdub3JlID0gSWdub3JlLmRlZmF1bHQoKTtcblxuaWYgKGZzLmV4aXN0c1N5bmMoZ2l0SWdub3JlUGF0aCkpIHtcbiAgaWdub3JlID0gaWdub3JlLmFkZChmcy5yZWFkRmlsZVN5bmMoZ2l0SWdub3JlUGF0aCkudG9TdHJpbmcoKSk7XG59XG5cbi8qKlxuICogQnVuZGxlcyB0aGUgbGlicmFyeSBmb3IgZGlzdHJpYnV0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWxlYXNlTGlicmFyeSgpIHtcbiAgY29uc29sZS53YXJuKGNoYWxrLmN5YW5CcmlnaHQoXCJDb3B5aW5nIHVpIGZpbGVzIGZvciB0aGUgZGlzdHJpYnV0aW9uLlwiKSk7XG5cbiAgLy8gUHJvdmlkZSB0aGUgYnVuZGxpbmcgcHJvY2VzcyB0aGUgY3VycmVudCBidWlsZCB2ZXJzaW9uLiBUaGlzIGFsbG93c1xuICAvLyBwcmludGluZyB0aGUgdmVyc2lvbiBpbiBhIG1lYW5pbmdmdWwgd2F5IGZvciBkZWJ1Z2dpbmcuXG4gIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OID1cbiAgICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiB8fCAoYXdhaXQgdGFyZ2V0UHJvamVjdFZlcnNpb24oKSk7XG5cbiAgaWYgKCFwcm9jZXNzLmVudi5GT1JDRV9CVUlMRCkge1xuICAgIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCJ1aVwiKSkgfHwgaWdub3JlLmlnbm9yZXMoXCJ1aVwiKSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYFwiTm8gbGlicmFyeSBwcm9qZWN0IGZvdW5kIChvciB3YXMgZ2l0aWdub3JlZCkgZm9yIGJ1bmRsaW5nIHJlbGVhc2UgYXQ6XFxuXFx0JHtwYXRoLnJlc29sdmUoXG4gICAgICAgICAgXCJ1aVwiXG4gICAgICAgICl9YFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIlN0YXJ0aW5nIFZpdGUgY2xpZW50IGJ1aWxkLi4uXCIpKTtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcInVpL2luZGV4LnRzXCIpKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcIlRoZSBVSSBmb2xkZXIgcHJvamVjdCBoYXMgbm8gaW5kZXgudHMgZW50cnkgcG9pbnQgdG8gY3JlYXRlIHRoZSBsaWJyYXJ5LlwiXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBVcGRhdGUgdGhlIC5kLnRzIGZpbGVzIGZvciB0aGUgbGlicmFyeSBwcm9qZWN0XG4gIGF3YWl0IHJlbGVhc2VMaWJyYXJ5VHlwZXMoKTtcblxuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIkJ1aWxkaW5nIGxpYnJhcnkgYnVuZGxlLi4uXCIpKTtcbiAgY29uc3QgY29uZmlnID0gYXdhaXQgYnVpbGRWaXRlQ29uZmlnKCk7XG5cbiAgY29uZmlnLmxvZ0xldmVsID0gXCJ3YXJuXCI7XG4gIGNvbmZpZy5yb290ID0gcGF0aC5yZXNvbHZlKFwidWlcIik7XG4gIGNvbmZpZy5idWlsZCEubGliID0ge1xuICAgIC8vIENvdWxkIGFsc28gYmUgYSBkaWN0aW9uYXJ5IG9yIGFycmF5IG9mIG11bHRpcGxlIGVudHJ5IHBvaW50c1xuICAgIGVudHJ5OiBwYXRoLnJlc29sdmUoXCJ1aS9pbmRleC50c1wiKSxcbiAgICBuYW1lOiAoYXdhaXQgdGFyZ2V0UHJvamVjdE5hbWUoKSkuc3BsaXQoXCJAXCIpLmpvaW4oXCJcIikuc3BsaXQoXCIvXCIpLmpvaW4oXCJfXCIpLFxuICAgIC8vIFRoZSBwcm9wZXIgZXh0ZW5zaW9ucyB3aWxsIGJlIGFkZGVkXG4gICAgZmlsZU5hbWU6IFwiaW5kZXhcIixcbiAgfTtcblxuICBjb25maWcubW9kZSA9IFwicHJvZHVjdGlvblwiO1xuICBjb25maWcucm9vdCA9IHBhdGgucmVzb2x2ZShcImFwcC9jbGllbnRcIik7XG4gIGNvbmZpZy5idWlsZCEub3V0RGlyID0gcGF0aC5yZXNvbHZlKFwiZGlzdC91aVwiKTtcbiAgY29uZmlnLmJ1aWxkIS53YXRjaCA9IHZvaWQgMDtcbiAgY29uZmlnLmJ1aWxkIS5yb2xsdXBPcHRpb25zIS5vdXRwdXQgPSB7XG4gICAgZGlyOiBjb25maWcuYnVpbGQhLm91dERpcixcbiAgICBlbnRyeUZpbGVOYW1lczogXCJpbmRleC5qc1wiLFxuICAgIGNodW5rRmlsZU5hbWVzOiBcImluZGV4LmpzXCIsXG4gICAgbWFudWFsQ2h1bmtzOiB1bmRlZmluZWQsXG4gIH07XG5cbiAgY29uc3QgZXh0ZXJuYWwgPSBPYmplY3Qua2V5cyhhd2FpdCB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzKCkpO1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJFeHRlcm5hbGl6ZWQgTGlicmFyaWVzIHRoYXQgd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIGJ1bmRsZTpcIixcbiAgICBleHRlcm5hbFxuICApO1xuXG4gIGNvbmZpZy5idWlsZCEucm9sbHVwT3B0aW9ucyA9IHtcbiAgICAuLi5jb25maWcuYnVpbGQhLnJvbGx1cE9wdGlvbnMsXG4gICAgZXh0ZXJuYWwsXG4gIH07XG5cbiAgYXdhaXQgVml0ZS5idWlsZChjb25maWcpO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuaW1wb3J0IHsgd2FpdCB9IGZyb20gXCIuLi8uLi91dGlsL3dhaXQuanNcIjtcblxuLyoqXG4gKiBUaGlzIHBlcmZvcm1zIHRoZSBidW5kbGluZyBwcm9jZXNzIGZvciBkaXN0cmlidXRpb24uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWxlYXNlU3RvcmllcygpIHtcbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPVxuICAgIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OIHx8IChhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpKTtcblxuICBjb25zb2xlLndhcm4oY2hhbGsuY3lhbkJyaWdodChcIkNvcHlpbmcgc3RvcnkgZmlsZXMgZm9yIHRoZSBkaXN0cmlidXRpb24uXCIpKTtcbiAgY29uc3Qgb3V0cHV0UGF0aCA9IHBhdGgucmVzb2x2ZShcImRpc3Qvc3Rvcmllc1wiKTtcbiAgY29uc3Qgc3Rvcmllc1BhdGggPSBwYXRoLnJlc29sdmUoXCJ1aS9zdG9yaWVzXCIpO1xuICBjb25zdCBkaXN0UGF0aCA9IHBhdGgucmVzb2x2ZShcImRpc3RcIik7XG5cbiAgaWYgKCFmcy5leGlzdHNTeW5jKHN0b3JpZXNQYXRoKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoYENvdWxkIG5vdCBmaW5kIHN0b3JpZXMgZGlyZWN0b3J5OlxcblxcdCR7c3Rvcmllc1BhdGh9YCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRW5zdXJlIHRoZSBkaXJlY3RvcnkgZm9yIHRoZSBzdG9yaWVzIGV4aXN0cyBpbiB0aGUgc3lzdGVtXG4gIGZzLmVuc3VyZURpclN5bmMob3V0cHV0UGF0aCk7XG4gIC8vIERlZXAgY29weSB0aGUgc3RvcmllcyBmb2xkZXIgdG8gdGhlIGRpc3RyaWJ1dGlvblxuICBmcy5jb3B5U3luYyhzdG9yaWVzUGF0aCwgb3V0cHV0UGF0aCk7XG5cbiAgLy8gR2V0IHRoZSBuYW1lIG9mIHRoaXMgcHJvamVjdCBmcm9tIGl0J3MgcGFja2FnZS5qc29uXG4gIGNvbnN0IHBhY2thZ2VKc29uUGF0aCA9IHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKTtcbiAgY29uc3QgcHJvamVjdFBhY2thZ2UgPSBmcy5yZWFkSlNPTlN5bmMocGFja2FnZUpzb25QYXRoKTtcblxuICAvLyBXZSBub3cgbmVlZCB0byB3cml0ZSBhIHNpbXBsZSBwYWNrYWdlLmpzb24gZmlsZSB0byB0aGUgZGlzdCBmb2xkZXIgdG9cbiAgLy8gZW5zdXJlIHRoZSBzdG9yaWVzIGltcG9ydHMgcmVmZXJlbmNlIHRoZSBzYW1lIGxpYnJhcnkgdmlhIHJlbGF0aXZlIHBhdGhcbiAgLy8gaW1wb3J0cy5cbiAgLy8gVGhpcyBjb3JyZWN0cyBpbXBvcnRzIHRoYXQgZG86IGZyb20gXCIuLi8uLi8uLlwiXG4gIGNvbnN0IHBhY2thZ2VKc29uID0ge1xuICAgIG5hbWU6IHByb2plY3RQYWNrYWdlLm5hbWUgfHwgXCJ1bmtub3duXCIsXG4gICAgcHJpdmF0ZTogdHJ1ZSxcbiAgICB0eXBlOiBcIm1vZHVsZVwiLFxuICAgIG1haW46IFwiLi91aS9pbmRleC5qc1wiLFxuICAgIHR5cGVzOiBcIi4vdHlwZXMvdWkvaW5kZXguZC50c1wiLFxuICAgIGRlcGVuZGVuY2llczoge30sXG4gICAgcmVwb3NpdG9yeToge30sXG4gICAgc2NyaXB0czoge30sXG4gICAgZGV2RGVwZW5kZW5jaWVzOiB7fSxcbiAgfTtcblxuICBjb25zb2xlLndhcm4oXG4gICAgXCJXcml0aW5nIGRpc3RyaWJ1dGlvbiBwYWNrYWdlLmpzb246XCIsXG4gICAgcGF0aC5yZXNvbHZlKGRpc3RQYXRoLCBcInBhY2thZ2UuanNvblwiKVxuICApO1xuICBmcy53cml0ZUpTT05TeW5jKHBhdGgucmVzb2x2ZShkaXN0UGF0aCwgXCJwYWNrYWdlLmpzb25cIiksIHBhY2thZ2VKc29uKTtcblxuICAvLyBMZXQgdGhlIHdyaXRlIGNvbXBsZXRlXG4gIGF3YWl0IHdhaXQoNTAwKTtcblxuICAvLyBXcml0ZSBhIGRpc3RyaWJ1dGlvbiBmb2xkZXIgY2FsbGVkIGNvbXBvbmVudHMgd2hpY2ggd2lsbCBzaW1wbHkgYmUgYVxuICAvLyBwYWNrYWdlIGpzb24gY29uZmlndXJhdGlvbiB0aGF0IHJvdXRlcyB0aGUgaW1wb3J0IHRvIHRoZSB1aSByZWxlYXNlXG4gIGZzLmVuc3VyZURpclN5bmMocGF0aC5yZXNvbHZlKGRpc3RQYXRoLCBcImNvbXBvbmVudHNcIikpO1xuXG4gIC8vIEFsc28gd3JpdGUgdGhlIHBhY2thZ2UuanNvbiBmaWxlIHRvIHRoZSBjb21wb25lbnRzIGZvbGRlciB0byByZXJvdXRlXG4gIC8vIGNvbXBvbmVudCBpbXBvcnRzIHRvIHRoZSB1aSByZWxlYXNlIGRpc3RyaWJ1dGlvbiBhcyB3ZWxsLlxuICAvLyBUaGlzIGNvcnJlY3RzIGltcG9ydHMgdGhhdCBkbzogZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHNcIlxuICBwYWNrYWdlSnNvbi5tYWluID0gXCIuLi91aS9pbmRleC5qc1wiO1xuICBwYWNrYWdlSnNvbi50eXBlcyA9IFwiLi4vdHlwZXMvdWkvaW5kZXguZC50c1wiO1xuXG4gIGNvbnNvbGUud2FybihcbiAgICBcIldyaXRpbmcgZGlzdHJpYnV0aW9uIHBhY2thZ2UuanNvbjpcIixcbiAgICBwYXRoLnJlc29sdmUoZGlzdFBhdGgsIFwiY29tcG9uZW50cy9wYWNrYWdlLmpzb25cIilcbiAgKTtcbiAgZnMud3JpdGVKU09OU3luYyhcbiAgICBwYXRoLnJlc29sdmUoZGlzdFBhdGgsIFwiY29tcG9uZW50cy9wYWNrYWdlLmpzb25cIiksXG4gICAgcGFja2FnZUpzb25cbiAgKTtcblxuICAvLyBMZXQgdGhlIHdyaXRlIGNvbXBsZXRlXG4gIGF3YWl0IHdhaXQoNTAwKTtcbiAgY29uc29sZS53YXJuKFwiRmluaXNoZWQgY29weWluZyBzdG9yaWVzLlwiKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBleGVjU2NyaXB0IH0gZnJvbSBcIi4uLy4uL2xpYi9leGVjL2V4ZWMtc2NyaXB0LmpzXCI7XG5pbXBvcnQgeyBnaXRSZXR1cm5Ub0RldiB9IGZyb20gXCIuLi8uLi9saWIvZ2l0L2dpdC1yZXR1cm4tdG8tZGV2LmpzXCI7XG5pbXBvcnQgeyBwcm9tcHRDb25maXJtIH0gZnJvbSBcIi4uLy4uL2xpYi9wcm9tcHQvcHJvbXB0LWNvbmZpcm0uanNcIjtcbmltcG9ydCB7IHJlbGVhc2VCaW4gfSBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL2Jpbi9yZWxlYXNlLWJpbi5qc1wiO1xuaW1wb3J0IHsgcmVsZWFzZUNsaWVudCB9IGZyb20gXCIuLi8uLi9saWIvYnVpbGQvd2ViLWFwcC92aXRlL3JlbGVhc2UtY2xpZW50LmpzXCI7XG5pbXBvcnQgeyByZWxlYXNlTGlicmFyeSB9IGZyb20gXCIuLi8uLi9saWIvYnVpbGQvbGlicmFyeS92aXRlL3JlbGVhc2UtbGlicmFyeS5qc1wiO1xuaW1wb3J0IHsgcmVsZWFzZVN0b3JpZXMgfSBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL2xpYnJhcnkvcmVsZWFzZS1zdG9yaWVzLmpzXCI7XG5cbi8qKlxuICogVGhpcyBtZXRob2QgY2hlY2tzIGFsbCBvZiB0aGUgcGFja2FnZSBqc29uIHNldHRpbmdzIGFuZCBlbnN1cmVzIHRoZVxuICogcmVwb3NpdG9yaWVzIGxpc3RlZCBhcmUgdmFsaWQgZm9yIHVzZSB3aXRoaW4gdGhpcyBjb250ZXh0LlxuICovXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVJlbGVhc2UoKSB7XG4gIGlmIChwcm9jZXNzLmVudi5RVUlDS19CVUlMRCA9PT0gXCJ0cnVlXCIpIHJldHVybjtcbiAgLy8gUnVuIHRoZSB2aWV3LXJlbGVhc2UgY29tbWFuZCB0byBzZWUgaWYgdGhlIHJlbGVhc2UgcHJvY2VzcyBwcm9kdWNlc1xuICAvLyBhIHZhbGlkIG91dHB1dFxuICAvLyBSdW4gdGhlIHZpZXctcmVsZWFzZSBzY3JpcHRcbiAgYXdhaXQgZXhlY1NjcmlwdChcInJlbGVhc2VcIiwgW1widmlld1wiXSk7XG5cbiAgLy8gQXNrIGlmIHRoZSB2aWV3LXJlbGVhc2Ugc2NyaXB0IGxvb2tzIGdvb2QgYW5kIHNob3VsZCBjb250aW51ZVxuICBjb25zdCBzaG91bGRDb250aW51ZSA9IGF3YWl0IHByb21wdENvbmZpcm0oXG4gICAgXCJcXG5TaG91bGQgdGhlIHJlbGVhc2UgY29udGludWUgYmVpbmcgbWFkZT9cIlxuICApO1xuXG4gIC8vIFF1aXQgdGhlIHByb2Nlc3MgaWYgdGhlIHZpZXcgcmVsZWFzZSBkaWQgbm90IHdvcmtcbiAgaWYgKCFzaG91bGRDb250aW51ZSkge1xuICAgIGF3YWl0IGdpdFJldHVyblRvRGV2KHRydWUpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgYWxsIGJ1bmRsaW5nIHByb2NlZHVyZXMgYW5kIHNldCB1cCBuZWVkZWQgdG8gYnVuZGxlIHRoZVxuICogcHJvamVjdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gYnVuZGxlUHJvamVjdCgpIHtcbiAgY29uc29sZS53YXJuKFxuICAgIFwiR2F0aGVyaW5nIGJ1aWxkIHRhcmdldHMgZnJvbTpcIixcbiAgICBjaGFsay55ZWxsb3dCcmlnaHQocGF0aC5yZXNvbHZlKFwiYnVpbGQuY29uZi5qc1wiKSlcbiAgKTtcbiAgY29uc3QgYnVpbGRFbnZpcm9ubWVudHMgPSAoYXdhaXQgaW1wb3J0KHBhdGgucmVzb2x2ZShcImJ1aWxkLmNvbmYuanNcIikpKVxuICAgIC5CVUlMRF9UQVJHRVRTO1xuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IFwicHJvZHVjdGlvblwiO1xuXG4gIGNvbnNvbGUud2FybihcbiAgICBcIkJ1aWxkaW5nIGVudmlyb25tZW50c1wiLFxuICAgIGNoYWxrLnJlZEJyaWdodEJvbGQoSlNPTi5zdHJpbmdpZnkoYnVpbGRFbnZpcm9ubWVudHMpKVxuICApO1xuXG4gIGlmICghQXJyYXkuaXNBcnJheShidWlsZEVudmlyb25tZW50cykpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiYnVpbGQuY29uZi5qcyBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZyB2YWx1ZXNcIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgZm9yIChjb25zdCBlbnYgb2YgYnVpbGRFbnZpcm9ubWVudHMpIHtcbiAgICBhd2FpdCByZWxlYXNlQ2xpZW50KGVudik7XG4gIH1cblxuICBhd2FpdCByZWxlYXNlTGlicmFyeSgpO1xuICBhd2FpdCByZWxlYXNlU3RvcmllcygpO1xuICBhd2FpdCByZWxlYXNlQmluKCk7XG59XG5cbi8qKlxuICogVGhpcyBjbGVhcnMgb3V0IHRoZSBkaXN0cmlidXRpb24gZm9sZGVyIHNvIG5vIGxpbmdlcmluZyBpcnJlbGV2YW50IGZyYWdtZW50c1xuICogZXhpc3RzLlxuICovXG5hc3luYyBmdW5jdGlvbiBjbGVhclByZXZpb3VzRGlzdHJpYnV0aW9uKCkge1xuICB0cnkge1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwiZGlzdFwiKSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUud2FybihcIk5vIGRpc3QgZm9sZGVyIHRvIGNsZWFuIG91dC5cIik7XG4gIH1cblxuICBmcy5lbnN1cmVEaXJTeW5jKHBhdGgucmVzb2x2ZShcImRpc3RcIikpO1xufVxuXG4vKipcbiAqIFRoaXMgY29waWVzIGFsbCBuZWNlc3NhcnkgZWxlbWVudHMgZnJvbSB0aGUgcHJvamVjdCBpbnRvIHRoZSBkaXN0cmlidXRpb25cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29weUFuZENsZWFuRnJhZ21lbnRzKCkge1xuICAvLyBDbGVhbiBvdXQgdGhlIGNvbXBpbGVkIHRlc3QgZmlsZSB0eXBpbmdzXG4gIHRyeSB7XG4gICAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJkaXN0L3Rlc3RcIikpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyB0ZXN0IGZvbGRlciB0byBjbGVhbiBvdXRcIik7XG4gIH1cblxuICAvLyBDbGVhbiBvdXQgdW5pdC10ZXN0c1xuICB0cnkge1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwiZGlzdC91bml0LXRlc3RcIikpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyB1bml0LXRlc3QgZm9sZGVyIHRvIGNsZWFuIG91dFwiKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oKSB7XG4gIC8vIFBlcmZvcm0gYW55IHR5cGVzY3JpcHQgc3BlY2lmaWMgYWN0aW9uc1xuICBjb25zb2xlLndhcm4oXCJWYWxpZGF0aW5nIHRoZSByZWxlYXNlLi4uXCIpO1xuICBhd2FpdCB2YWxpZGF0ZVJlbGVhc2UoKTtcbiAgLy8gRGVsZXRlIGFueSBmaWxlcyBpbiB0aGUgZGlzdCBmb2xkZXIgc28gd2UgaGF2ZSBhIGNsZWFuIGJ1aWxkIHdpdGggbm9cbiAgLy8gY2hhbmNlcyBvZiBjYWNoaW5nIG9yIGtlZXBpbmcgbm8gbG9uZ2VyIHJlbGV2YW50IGZpbGVzLlxuICBjb25zb2xlLndhcm4oXCJDbGVhciBwcmV2aW91cyBidWlsZC4uLlwiKTtcbiAgYXdhaXQgY2xlYXJQcmV2aW91c0Rpc3RyaWJ1dGlvbigpO1xuICAvLyBCdWlsZCB0aGUgbW9ub2xpdGhpYyBkaXN0cmlidXRpb25cbiAgY29uc29sZS53YXJuKFwiQnVuZGxpbmcgcHJvamVjdC4uLlwiKTtcbiAgYXdhaXQgYnVuZGxlUHJvamVjdCgpO1xuICAvLyBDb3B5IGFuZCBkZWxldGUgYW55IGZyYWdtZW50cyBpbiB0aGUgZGlzdCBmb2xkZXIgdGhhdCBpcyBuZWNlc3NhcnlcbiAgY29uc29sZS53YXJuKFwiRmluYWwgY2xlYW51cC4uLlwiKTtcbiAgYXdhaXQgY29weUFuZENsZWFuRnJhZ21lbnRzKCk7XG4gIGNvbnNvbGUud2FybihcIlJlbGVhc2UgQnVpbGQgY29tcGxldGUhXCIpO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgZ3JvdXBCeSBmcm9tIFwibG9kYXNoL2dyb3VwQnkuanNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgdW5pcSBmcm9tIFwibG9kYXNoL3VuaXEuanNcIjtcbmltcG9ydCB1cHBlckZpcnN0IGZyb20gXCJsb2Rhc2gvdXBwZXJGaXJzdC5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGNvbXBhcmUsIGluYyB9IGZyb20gXCJzZW12ZXJcIjtcbmltcG9ydCB7IGV4ZWNTeW5jUmVzdWx0IH0gZnJvbSBcIi4uLy4uL2xpYi9leGVjL2V4ZWMtc3luYy1yZXN1bHQuanNcIjtcblxuY29uc3QgeyBleGlzdHNTeW5jLCByZWFkRmlsZVN5bmMsIHJlYWRKU09OU3luYywgd3JpdGVGaWxlU3luYyB9ID0gZnM7XG5cbi8qKiBAdHlwZSB7e1trZXk6IHN0cmluZ106ICdicmVha2luZycgfCAnYWRkZWQnIHwgJ2ZpeGVkJyB8ICd0YXNrJ319ICovXG5jb25zdCByZWxlYXNlVGFnczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgYnJlYWtpbmc6IFwiYnJlYWtpbmdcIixcblxuICBmZWF0OiBcImFkZGVkXCIsXG4gIGZlYXR1cmU6IFwiYWRkZWRcIixcbiAgYWRkZWQ6IFwiYWRkZWRcIixcblxuICBmaXg6IFwiZml4ZWRcIixcbiAgZml4ZWQ6IFwiZml4ZWRcIixcbiAgaG90Zml4OiBcImZpeGVkXCIsXG5cbiAgdGFzazogXCJ0YXNrXCIsXG59O1xuXG5jb25zdCB0YWdPcmRlciA9IHVuaXEoT2JqZWN0LnZhbHVlcyhyZWxlYXNlVGFncykpO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBub3Rlc1xuICovXG5mdW5jdGlvbiBnZXRSZWxlYXNlVHlwZShub3Rlczogc3RyaW5nKSB7XG4gIGNvbnN0IGdyb3VwcyA9IG5vdGVzXG4gICAgLnRvTG93ZXJDYXNlKClcbiAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAubWFwKChsaW5lKSA9PiAobGluZS5tYXRjaCgvIyMgKFxcdyspLykgfHwgW10pWzFdKVxuICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gIGlmIChncm91cHMuaW5jbHVkZXMoXCJicmVha2luZ1wiKSkgcmV0dXJuIFwibWFqb3JcIjtcbiAgaWYgKGdyb3Vwcy5pbmNsdWRlcyhcImFkZGVkXCIpKSByZXR1cm4gXCJtaW5vclwiO1xuICByZXR1cm4gXCJwYXRjaFwiO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBmb3JWZXJzaW9uIFRoZSB2ZXJzaW9uIHRvIGJ1aWxkIHRoZSByZWxlYXNlIG5vdGVzIGZvclxuICpcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuYXN5bmMgZnVuY3Rpb24gYnVpbGRSZWxlYXNlTm90ZXMoZm9yVmVyc2lvbjogc3RyaW5nKSB7XG4gIGNvbnNvbGUud2FybihcIkJ1aWxkaW5nIHJlbGVhc2Ugbm90ZXMuLi5cIik7XG5cbiAgY29uc29sZS53YXJuKFwiZmV0Y2hpbmcgdGFncy4uLlwiKTtcbiAgY29uc3QgZ2V0VGFncyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwiZ2l0XCIsIFtcInRhZ1wiLCBcIi0tbGlzdFwiXSk7XG5cbiAgaWYgKGdldFRhZ3MgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGdldCBnaXQgdGFnc1wiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zdCB0YWdzID0gZ2V0VGFncy50cmltKCkuc3BsaXQoXCJcXG5cIikuc29ydChjb21wYXJlKTtcblxuICBjb25zdCBwcmV2aW91c1ZlcnNpb24gPVxuICAgIHRhZ3NbXG4gICAgICAodGFncy5pbmNsdWRlcyhmb3JWZXJzaW9uKSA/IHRhZ3MuaW5kZXhPZihmb3JWZXJzaW9uKSA6IHRhZ3MubGVuZ3RoKSAtIDFcbiAgICBdO1xuXG4gIGNvbnNvbGUud2FybihcImZldGNoaW5nIHZlcnNpb24gaGFzaC4uLlwiKTtcbiAgY29uc3QgY3VycmVudFZlcnNpb25IYXNoRXhlYyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KGBnaXRgLCBbXG4gICAgXCJyZXYtbGlzdFwiLFxuICAgIFwiLTFcIixcbiAgICBgJHtmb3JWZXJzaW9ufWAsXG4gIF0pO1xuXG4gIGlmIChjdXJyZW50VmVyc2lvbkhhc2hFeGVjID09PSBudWxsKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkNvdWxkbid0IGdldCBjdXJyZW50IHZlcnNpb24gaGFzaFwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zdCBjdXJyZW50VmVyc2lvbkhhc2ggPSBjdXJyZW50VmVyc2lvbkhhc2hFeGVjLnRyaW0oKTtcblxuICBjb25zb2xlLndhcm4oXCJmZXRjaGluZyBwcmV2aW91cyB2ZXJzaW9uIGhhc2guLi5cIik7XG4gIGxldCBwcmV2aW91c1ZlcnNpb25IYXNoRXhlYyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KGBnaXRgLCBbXG4gICAgYHJldi1saXN0YCxcbiAgICBgLTFgLFxuICAgIGAke3ByZXZpb3VzVmVyc2lvbn1gLFxuICBdKTtcblxuICBpZiAocHJldmlvdXNWZXJzaW9uSGFzaEV4ZWMgPT09IG51bGwpIHtcbiAgICBwcmV2aW91c1ZlcnNpb25IYXNoRXhlYyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KGBnaXRgLCBbXG4gICAgICBgcmV2LWxpc3RgLFxuICAgICAgXCItLW1heC1wYXJlbnRzPTBcIixcbiAgICAgIFwiSEVBRFwiLFxuICAgIF0pO1xuXG4gICAgaWYgKHByZXZpb3VzVmVyc2lvbkhhc2hFeGVjID09PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQ291bGRuJ3QgZ2V0IHByZXZpb3VzIHZlcnNpb24gaGFzaFwiKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBwcmV2aW91c1ZlcnNpb25IYXNoID0gcHJldmlvdXNWZXJzaW9uSGFzaEV4ZWMudHJpbSgpO1xuXG4gIGNvbnNvbGUud2FybihcImZldGNoaW5nIGxvZ3MuLi5cIik7XG4gIGNvbnN0IGxvZ3NFeGVjID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcbiAgICBcImxvZ1wiLFxuICAgIFwiLS1wcmV0dHk9JUJcIixcbiAgICBgJHtwcmV2aW91c1ZlcnNpb25IYXNofS4uLiR7Y3VycmVudFZlcnNpb25IYXNofWAsXG4gIF0pO1xuXG4gIGlmIChsb2dzRXhlYyA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZG4ndCBnZXQgbG9nc1wiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zdCBsb2dzID0gbG9nc0V4ZWNcbiAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAvLyBDb252ZXJ0IHRoZSBsaW5lcyBpbnRvIGFuIGFycmF5IG9mIHRhZyBhbmQgbWVzc2FnZSBvYmplY3RzXG4gICAgLm1hcCgobGluZSkgPT4ge1xuICAgICAgY29uc3QgWywgdGFnID0gXCJcIiwgbWVzc2FnZSA9IFwiXCJdID1cbiAgICAgICAgbGluZS5tYXRjaCgvXlxccyooXFx3Kz8pXFxzKjpcXHMqKC4qKVxccyokLykgfHwgW107XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0YWc6IHJlbGVhc2VUYWdzW3RhZy50b0xvd2VyQ2FzZSgpXSxcbiAgICAgICAgbWVzc2FnZTogdXBwZXJGaXJzdChtZXNzYWdlKSxcbiAgICAgIH07XG4gICAgfSlcbiAgICAvLyBSZW1vdmUgbGluZXMgdGhhdCBkbyBub3QgY29udGFpbiBhIGtub3duIHRhZ1xuICAgIC5maWx0ZXIoKG5vdGUpID0+IG5vdGUudGFnKTtcblxuICBjb25zdCBncm91cHMgPSBncm91cEJ5KGxvZ3MsIFwidGFnXCIpO1xuICAvLyBCdWlsZCB0aGUgcmVsZWFzZSBub3Rlc1xuICBjb25zdCB0ZXh0ID0gdGFnT3JkZXJcbiAgICAvLyBSZW1vdmUgdGFncyB0aGF0IGRvbid0IGV4aXN0IGluIHRoZSBjdXJyZW50IG91dHB1dFxuICAgIC5maWx0ZXIoKGdyb3VwTmFtZSkgPT4gZ3JvdXBzW2dyb3VwTmFtZV0pXG4gICAgLm1hcCgoZ3JvdXBOYW1lKSA9PiB7XG4gICAgICBjb25zdCBncm91cCA9IGdyb3Vwc1tncm91cE5hbWVdO1xuICAgICAgcmV0dXJuIGAjIyAke2dyb3VwTmFtZS5yZXBsYWNlKC8oXFx3KS8sIChjKSA9PiBjLnRvVXBwZXJDYXNlKCkpfVxcblxcbiR7Z3JvdXBcbiAgICAgICAgLm1hcCgoeyB0YWcsIG1lc3NhZ2UgfSkgPT4gYC0gW1xcYCR7dGFnLnRvVXBwZXJDYXNlKCl9XFxgXTogJHttZXNzYWdlfWApXG4gICAgICAgIC5qb2luKFwiXFxuXCIpfWA7XG4gICAgfSlcbiAgICAuam9pbihcIlxcblxcblwiKTtcblxuICBjb25zb2xlLndhcm4oXCJOZXcgcmVsZWFzZSBub3RlcyBjb21wbGV0ZWRcIik7XG4gIHJldHVybiB0ZXh0O1xufVxuXG4vKipcbiAqIFByaW50IHJlbGVhc2Ugbm90ZXMgc2luY2UgdGhlIGxhc3QgcmVsZWFzZVxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIFNlZSBiZWxvd1xuICogQHBhcmFtIHtzdHJpbmd9IG9wdGlvbnMuZmlsZSBUaGUgZmlsZSB0byBwcmludCByZWxlYXNlIG5vdGVzIHRvLiBJZiB0aGlzIGlzXG4gKiBsZWZ0IGJsYW5rLCB0aGVuIHRoZSByZWxlYXNlIG5vdGVzIHdpbGwgYmUgcHJpbnRlZCB0byBTVERPVVQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMudXBkYXRlUGFja2FnZSBVcGRhdGUgdGhlIHBhY2thZ2UuanNvblxuICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLnRhZyBUcnVlIGlmIGEgZ2l0IHRhZyBzaG91bGQgYmUgY3JlYXRlZFxuICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLmVycm9yT25FbXB0eSBUcnVlIGlmIG5vIHJlbGVhc2Ugbm90ZXMgd2lsbCBiZSBjcmVhdGVkXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bihcbiAgb3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgYm9vbGVhbiB8IG51bWJlcj4gPSB7fVxuKSB7XG4gIGNvbnNvbGUud2FybihcIkdlbmVyYXRpbmcgUmVsZWFzZSBOb3Rlcy4uLlwiKTtcbiAgLy8gUHVsbCBpbiBhbnkgdGFnc1xuICBjb25zdCBmZXRjaEV4ZWMgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChcImdpdFwiLCBbXCJmZXRjaFwiLCBcIi0tdGFnc1wiXSk7XG5cbiAgaWYgKGZldGNoRXhlYyA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZG4ndCBmZXRjaCB0YWdzXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIEdldCB0aGUgY3VycmVudCB2ZXJzaW9uXG4gIGNvbnN0IHBrZyA9IHJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICBjb25zdCB7IHZlcnNpb246IGN1cnJlbnRWZXJzaW9uID0gXCIwLjAuMVwiIH0gPSBwa2c7XG4gIGNvbnNvbGUud2FybihcIkN1cnJlbnQgUHJvamVjdCB2ZXJzaW9uOlwiLCB7IGN1cnJlbnRWZXJzaW9uIH0pO1xuXG4gIGNvbnN0IG5vdGVzID0gYXdhaXQgYnVpbGRSZWxlYXNlTm90ZXMoXCJIRUFEXCIpO1xuICBjb25zdCByZWxlYXNlVHlwZSA9IGdldFJlbGVhc2VUeXBlKG5vdGVzKTtcbiAgY29uc3QgbmV3VmVyc2lvbiA9IHJlbGVhc2VUeXBlICYmIGluYyhjdXJyZW50VmVyc2lvbiwgcmVsZWFzZVR5cGUpO1xuXG4gIGlmICghbmV3VmVyc2lvbikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJVbmFibGUgdG8gZGV0ZXJtaW5lIG5leHQgdmVyc2lvblwiLCB7IGN1cnJlbnRWZXJzaW9uIH0pO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIENyZWF0ZSB0aGUgdGFnIGlmIHdlIHdlcmUgdG9sZCB0byBkbyBzb1xuICBpZiAob3B0aW9ucy50YWcpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDcmVhdGluZyB0aGUgbmV3IHRhZy4uLlwiKTtcbiAgICBjb25zdCB0YWdFeGVjID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcbiAgICAgIFwidGFnXCIsXG4gICAgICBcIi1hXCIsXG4gICAgICBuZXdWZXJzaW9uLFxuICAgICAgXCItbVwiLFxuICAgICAgYFJlbGVhc2UgJHtuZXdWZXJzaW9ufWAsXG4gICAgXSk7XG5cbiAgICBpZiAodGFnRXhlYyA9PT0gbnVsbCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkbid0IGNyZWF0ZSB0YWdcIik7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIHBhY2thZ2UuanNvbiBpZiB3ZSB3ZXJlIHRvbGQgdG8gZG8gc29cbiAgaWYgKG9wdGlvbnMudXBkYXRlUGFja2FnZSkge1xuICAgIGNvbnNvbGUud2FybihcIlVwZGF0aW5nIHRoZSBwYWNrYWdlLmpzb24uLi5cIik7XG4gICAgY29uc3QgcGtnID0gcmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSk7XG4gICAgcGtnLnZlcnNpb24gPSBuZXdWZXJzaW9uO1xuXG4gICAgd3JpdGVGaWxlU3luYyhcbiAgICAgIHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSxcbiAgICAgIGAke0pTT04uc3RyaW5naWZ5KHBrZywgbnVsbCwgXCIgIFwiKX1cXG5gXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IHRleHQgPSBgIyMgJHtuZXdWZXJzaW9ufVxcblxcbiR7bm90ZXN9YDtcblxuICAvLyBJZiB0aGUgbm90ZXMgYXJlIGVtcHR5LCB0aHJvdyBhbiBlcnJvciBpZiByZXF1ZXN0ZWQgdG8gZG8gc29cbiAgaWYgKCFub3Rlcy50cmltKCkgJiYgb3B0aW9ucy5lcnJvck9uRW1wdHkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIk5vIG5vdGVzIHdlcmUgZ2VuZXJhdGVkIGFzIG5vIHNlbXZlciBzdHlsZSBtZXNzYWdlcyB3ZXJlIGZvdW5kXCJcbiAgICApO1xuICB9XG5cbiAgLy8gT3V0cHV0IHRoZSBub3RlcyB0byB0aGUgY29uc29sZSBvciBhIGZpbGVcbiAgaWYgKG9wdGlvbnMuZmlsZSkge1xuICAgIGNvbnNvbGUud2FybihcIldyaXRpbmcgdGhlIHJlbGVhc2Ugbm90ZXMgdG8gZmlsZTpcIiwgb3B0aW9ucy5maWxlKTtcbiAgICBjb25zdCBmaWxlID0gcGF0aC5yZXNvbHZlKG9wdGlvbnMuZmlsZSBhcyBzdHJpbmcpO1xuICAgIGNvbnN0IHByZXZpb3VzVGV4dCA9IGV4aXN0c1N5bmMoZmlsZSkgPyByZWFkRmlsZVN5bmMoZmlsZSkgOiBcIlwiO1xuICAgIHdyaXRlRmlsZVN5bmMoZmlsZSwgYCR7YCR7dGV4dH1cXG5cXG4ke3ByZXZpb3VzVGV4dH1gLnRyaW0oKX1cXG5gKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IDEwMDsgKytpKSB7XG4gICAgICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlKSkgYnJlYWs7XG4gICAgICBpZiAoaSA9PT0gMTAwKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcIlJlbGVhc2Ugbm90ZXMgZmlsZSB3YXMgbm90IGNyZWF0ZWQgaW4gdGltZSBmb3IgdGhlIGZpbmFsIHJlbGVhc2UgY29tbWl0OlwiLFxuICAgICAgICAgIGNoYWxrLnJlZEJyaWdodEJvbGQoZmlsZSlcbiAgICAgICAgKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEVuc3VyZSBhbGwgZnJhZ21lbnRzIGFyZSBnb2luZyB0byBiZSBpbmNsdWRlZCBpbiB0aGUgY29tbWl0XG4gICAgY29uc29sZS53YXJuKFwiQWRkaW5nIGZyYWdtZW50cyB0byBnaXQuLi5cIik7XG4gICAgaWYgKChhd2FpdCBleGVjU3luY1Jlc3VsdChcImdpdFwiLCBbXCJhZGRcIiwgXCItQVwiXSkpID09PSBudWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiQ291bGQgbm90IGVuc3VyZSBhbGwgZnJhZ21lbnRzIGFyZSBhZGRlZCBmb3IgdGhlIG5leHQgY29tbWl0LlwiXG4gICAgICApO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cblxuICAgIC8vIENvbW1pdCB0aGUgY2hhbmdlc1xuICAgIGNvbnNvbGUud2FybihcIkNvbW1pdHRpbmcgdG8gZ2l0Li4uXCIpO1xuICAgIGNvbnN0IGNvbW1pdEV4ZWMgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChcImdpdFwiLCBbXG4gICAgICBcImNvbW1pdFwiLFxuICAgICAgXCItYW1cIixcbiAgICAgIGBSZWxlYXNlICR7bmV3VmVyc2lvbn1gLFxuICAgIF0pO1xuXG4gICAgaWYgKGNvbW1pdEV4ZWMgPT09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZG4ndCBjb21taXQgY2hhbmdlc1wiKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLndhcm4oYFxcblxcbiR7Y2hhbGsuY3lhbih0ZXh0KX1cXG5cXG5gKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oYFxcblxcbiR7Y2hhbGsuY3lhbih0ZXh0KX1cXG5cXG5gKTtcbiAgfVxuXG4gIC8vIFdoZW5ldmVyIHRoaXMgaXMgcmFuIGl0IG1ha2VzIHNlbnNlIHRvIHVwZGF0ZSBvdXIgcmVsZWFzZSB2ZXJzaW9uIGhlcmUgc29cbiAgLy8gaXQgaXMgYXZhaWFsYmxlIHRvIHRoZSByZXN0IG9mIGFueSBwcm9jZXNzIHJ1bm5pbmcgdW5kZXIgaXQncyBhc3N1bXB0aW9ucy5cbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPSBuZXdWZXJzaW9uO1xufVxuIiwKICAgICJpbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuLi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgY2hlY2tzIGlmIHRoZSBjdXJyZW50IGdpdCBjb250ZXh0IGhhcyBhY2Nlc3MgdG8gdGhlIHNwZWNpZmllZCByZW1vdGVcbiAqIHJlcG9zaXRvcnkuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnaXRDYW5BY2Nlc3NSZW1vdGUocmVtb3RlOiBzdHJpbmcpIHtcbiAgcmV0dXJuIGV4ZWNTeW5jKGBnaXRgLCBbYGxzLXJlbW90ZWAsIHJlbW90ZV0pO1xufVxuIiwKICAgICJpbXBvcnQgeyBkZXNjcmlwdGlvbiB9IGZyb20gXCIuLi91dGlsL2Rlc2NyaXB0aW9uLmpzXCI7XG5pbXBvcnQgeyBleGVjU3luY1Jlc3VsdCB9IGZyb20gXCIuLi9leGVjL2V4ZWMtc3luYy1yZXN1bHQuanNcIjtcbmltcG9ydCB7IGdpdENhbkFjY2Vzc1JlbW90ZSB9IGZyb20gXCIuL2dpdC1jYW4tYWNjZXNzLXJlbW90ZS5qc1wiO1xuXG4vKipcbiAqIEVuc3VyZXMgdGhlIGRldmVsb3BlciBoYXMgZXN0YWJsaXNoZWQgdGhlIHByb3ZpZGVkIHJlbW90ZSBuYW1lIEFORCBoYXMgYWNjZXNzXG4gKiB0byB0aGUgcmVtb3RlIFVSTCBhc3NvY2lhdGVkIHdpdGggdGhlIHJlbW90ZSBuYW1lLiBUaGlzIGlzIGFuIGFzc2VydGlvbiBzb1xuICogd2lsbCBjYXVzZSB0aGUgcHJvZ3JhbSB0byBleGl0IG9uIGZhaWx1cmUuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnaXRFbnN1cmVSZW1vdGUocmVtb3RlOiBzdHJpbmcpIHtcbiAgLy8gV2UgY2hlY2sgb3VyIHJlbW90ZSB0byBlbnN1cmUgd2UgaGF2ZSBhIHByb2plY3Qgd2l0aCBleHBlY3RlZCB2YWx1ZXNcbiAgY29uc3QgcmVtb3RlTGlzdFByb2Nlc3MgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChcImdpdFwiLCBbXCJyZW1vdGVcIiwgXCItdlwiXSk7XG5cbiAgaWYgKHJlbW90ZUxpc3RQcm9jZXNzID09PSBudWxsKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IGxpc3QgcmVtb3RlcyBmb3IgdGhlIGdpdCBwcm9qZWN0LlwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zdCByZW1vdGVzID0gcmVtb3RlTGlzdFByb2Nlc3Muc3BsaXQoL1xccj9cXG4vZyk7XG5cbiAgY29uc3QgZm91bmRSZW1vdGUgPSByZW1vdGVzLmZpbmQoKHJvdykgPT4gcm93LmluZGV4T2YocmVtb3RlKSA+PSAwKTtcblxuICBpZiAoIWZvdW5kUmVtb3RlKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgZGVzY3JpcHRpb25gXG4gICAgICBZb3UgTVVTVCBoYXZlIGEgcmVtb3RlIG5hbWVkICR7cmVtb3RlfSB3aGljaCBwb2ludHMgdG8gdGhlIHJlcG9zaXRvcnkgeW91XG4gICAgICB3aXNoIHRvIGRlcGxveSB0by5cblxuICAgICAgJHtyZW1vdGVzLmpvaW4oXCJcXG5cIil9XG4gICAgYFxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc3QgcmVtb3RlVXJsID0gZm91bmRSZW1vdGUuc3BsaXQoL1xccysvZylbMV07XG5cbiAgLy8gTm93IGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgcmVwbyBzcGVjaWZpZWQgZXhpc3RzIGluIGdpdCBhbmQgaXMgYXZhaWxhYmxlIHRvXG4gIC8vIHRoZSB1c2VyXG4gIGlmICghZ2l0Q2FuQWNjZXNzUmVtb3RlKHJlbW90ZVVybCkpIHtcbiAgICBjb25zb2xlLndhcm4oYFxuICAgICAgWW91IGRvIG5vdCBzZWVtIHRvIGhhdmUgYWNjZXNzIHRvIHRoZSByZXBvIGxpc3RlZCBpbiB0aGUgcGFja2FnZSBqc29uIG9mXG4gICAgICB0aGlzIHByb2plY3QuIFBsZWFzZSBlbnN1cmUgeW91IGhhdmUgd3JpdGUgYWNjZXNzIHRvIHRoZSByZXBvOlxuICAgICAgJHtyZW1vdGVVcmx9XG4gICAgICBhbmQgdGhlbiB0cnkgdG8gcnVuIHRoZSByZWxlYXNlIGFnYWluLlxuICAgIGApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuIiwKICAgICJpbXBvcnQgeyBleGVjU3luY1Jlc3VsdCB9IGZyb20gXCIuLi9leGVjL2V4ZWMtc3luYy1yZXN1bHQuanNcIjtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgYnJhbmNoIGluIHRoZSBjdXJyZW50IGdpdCBjb250ZXh0LiBSZXR1cm5zIHZvaWQgaWYgYVxuICogYnJhbmNoIGNhbiBub3QgYmUgZGV0ZXJtaW5lZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdpdEN1cnJlbnRCcmFuY2goKSB7XG4gIC8vIEdldCB0aGUgY3VycmVudCBicmFuY2ggbmFtZSBzbyB3ZSBjYW4gb2J0YWluIHRoZSBoYXNoIG9mIHRoZSB0aWNrZXRcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoXCJnaXRcIiwgW1xuICAgIFwicmV2LXBhcnNlXCIsXG4gICAgXCItLWFiYnJldi1yZWZcIixcbiAgICBcIkhFQURcIixcbiAgXSk7XG5cbiAgaWYgKHJlc3VsdCA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZGV0ZXJtaW5lIGN1cnJlbnQgYnJhbmNoLlwiKTtcbiAgICByZXR1cm4gdm9pZCAwO1xuICB9XG5cbiAgY29uc3QgYnJhbmNoID0gcmVzdWx0LnRyaW0oKTtcbiAgcmV0dXJuIGJyYW5jaCB8fCB2b2lkIDA7XG59XG4iLAogICAgImltcG9ydCB7IGV4ZWNTeW5jUmVzdWx0IH0gZnJvbSBcIi4uL2V4ZWMvZXhlYy1zeW5jLXJlc3VsdC5qc1wiO1xuaW1wb3J0IHsgZ2l0Q3VycmVudEJyYW5jaCB9IGZyb20gXCIuL2dpdC1jdXJyZW50LWJyYW5jaC5qc1wiO1xuXG4vKipcbiAqIFRoaXMgc3dpdGNoZXMgdG8gdGhlIGJyYW5jaCBzcGVjaWZpZWQsIHRoZW4gcmVzZXQgLS1oYXJkIG9yaWdpbi9icmFuY2ggdG9cbiAqIG1ha2Ugc3VyZSBpdCByZWZsZWN0cyB0aGUgcmVwbywgdGhlbiByZXR1cm5zIHRvIHRoZSBjdXJyZW50IGJyYW5jaC5cbiAqL1xuZXhwb3J0IGNvbnN0IGdpdFVwZGF0ZUJyYW5jaCA9IGFzeW5jIChyZW1vdGU6IHN0cmluZywgYnJhbmNoOiBzdHJpbmcpID0+IHtcbiAgY29uc3QgYnJhbmNoQmFrID0gYXdhaXQgZ2l0Q3VycmVudEJyYW5jaCgpO1xuXG4gIGlmICghYnJhbmNoQmFrKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IGRldGVybWluZSBjdXJyZW50IGJyYW5jaC5cIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gQ2hlY2tvdXQgdGhlIHNwZWNpZmllZCBicmFuY2hcbiAgaWYgKChhd2FpdCBleGVjU3luY1Jlc3VsdChgZ2l0YCwgW1wiY2hlY2tvdXRcIiwgYCR7YnJhbmNofWBdKSkgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBjaGVja291dCBicmFuY2ggJHticmFuY2h9YCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gUGVyZm9ybSB0aGUgcmVzZXRcbiAgaWYgKFxuICAgIChhd2FpdCBleGVjU3luY1Jlc3VsdChgZ2l0YCwgW1xuICAgICAgXCJyZXNldFwiLFxuICAgICAgXCItLWhhcmRcIixcbiAgICAgIGAke3JlbW90ZX0vJHticmFuY2h9YCxcbiAgICBdKSkgPT09IG51bGxcbiAgKSB7XG4gICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgcmVzZXQgYnJhbmNoICR7YnJhbmNofWApO1xuXG4gICAgLy8gUmV0dXJuIHRvIHRoZSBvcmlnaW5hbCBicmFuY2hcbiAgICBpZiAoYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcImNoZWNrb3V0XCIsIGAke2JyYW5jaEJha31gXSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IHJldHVybiB0byBvcmlnaW5hbCBicmFuY2ggJHticmFuY2hCYWt9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gUmV0dXJuIHRvIHRoZSBvcmlnaW5hbCBicmFuY2hcbiAgaWYgKChhd2FpdCBleGVjU3luY1Jlc3VsdChgZ2l0YCwgW1wiY2hlY2tvdXRcIiwgYCR7YnJhbmNoQmFrfWBdKSkgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCByZXR1cm4gdG8gb3JpZ2luYWwgYnJhbmNoICR7YnJhbmNoQmFrfWApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRhcmdldFByb2plY3RSZXBvKCkge1xuICBjb25zdCBwYWNrYWdlSnNvbiA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICByZXR1cm4gcGFja2FnZUpzb24ucmVwb3NpdG9yeSB8fCB7fTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCByZWxlYXNlQnVpbGQgZnJvbSBcIi4vcmVsZWFzZS1idWlsZC5qc1wiO1xuaW1wb3J0IHJlbGVhc2VOb3RlcyBmcm9tIFwiLi9yZWxlYXNlLXZpZXcuanNcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbiB9IGZyb20gXCIuLi8uLi9saWIvdXRpbC9kZXNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgZXhlY1NjcmlwdCB9IGZyb20gXCIuLi8uLi9saWIvZXhlYy9leGVjLXNjcmlwdC5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vLi4vbGliL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5pbXBvcnQgeyBleGVjU3luY1Jlc3VsdCB9IGZyb20gXCIuLi8uLi9saWIvZXhlYy9leGVjLXN5bmMtcmVzdWx0LmpzXCI7XG5pbXBvcnQgeyBnaXRDYW5BY2Nlc3NSZW1vdGUgfSBmcm9tIFwiLi4vLi4vbGliL2dpdC9naXQtY2FuLWFjY2Vzcy1yZW1vdGUuanNcIjtcbmltcG9ydCB7IGdpdEVuc3VyZVJlbW90ZSB9IGZyb20gXCIuLi8uLi9saWIvZ2l0L2dpdC1lbnN1cmUtcmVtb3RlLmpzXCI7XG5pbXBvcnQgeyBnaXRIYXNDaGFuZ2VzIH0gZnJvbSBcIi4uLy4uL2xpYi9naXQvZ2l0LWhhcy1jaGFuZ2VzLmpzXCI7XG5pbXBvcnQgeyBnaXRSZXR1cm5Ub0RldiB9IGZyb20gXCIuLi8uLi9saWIvZ2l0L2dpdC1yZXR1cm4tdG8tZGV2LmpzXCI7XG5pbXBvcnQgeyBnaXRVcGRhdGVCcmFuY2ggfSBmcm9tIFwiLi4vLi4vbGliL2dpdC9naXQtdXBkYXRlLWJyYW5jaC5qc1wiO1xuaW1wb3J0IHsgcHJvbXB0Q29uZmlybSB9IGZyb20gXCIuLi8uLi9saWIvcHJvbXB0L3Byb21wdC1jb25maXJtLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0UmVwbyB9IGZyb20gXCIuLi8uLi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtcmVwby5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vbGliL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LXZlcnNpb24uanNcIjtcblxuLyoqXG4gKiBUaGlzIGlzIHRoZSByZXF1aXJlZCByZW1vdGUgbmFtZSB0aGF0IG11c3QgYmUgcHJlc2VudCBmb3IgdGhlIHJlbGVhc2Ugc2NyaXB0XG4gKiB0byB3b3JrXG4gKi9cbmNvbnN0IEVOU1VSRV9SRU1PVEUgPSBcIm9yaWdpblwiO1xuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyBhbGwgb2YgdGhlIHBhY2thZ2UganNvbiBzZXR0aW5ncyBhbmQgZW5zdXJlcyB0aGVcbiAqIHJlcG9zaXRvcmllcyBsaXN0ZWQgYXJlIHZhbGlkIGZvciB1c2Ugd2l0aGluIHRoaXMgY29udGV4dC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVSZXBvc2l0b3J5KCkge1xuICBjb25zdCBwcm9qZWN0UmVwbyA9IGF3YWl0IHRhcmdldFByb2plY3RSZXBvKCk7XG4gIGNvbnN0IEVOU1VSRV9SRU1PVEVfUFJPSkVDVCA9IHByb2plY3RSZXBvLnVybDtcblxuICBpZiAoXG4gICAgIXByb2plY3RSZXBvIHx8XG4gICAgIShcbiAgICAgIHByb2plY3RSZXBvLnR5cGUgIT09IFwiZ2l0bGFiXCIgfHxcbiAgICAgIHByb2plY3RSZXBvLnR5cGUgIT09IFwiZ2l0XCIgfHxcbiAgICAgIHByb2plY3RSZXBvLnR5cGUgIT09IFwiYml0YnVja2V0XCIgfHxcbiAgICAgIHByb2plY3RSZXBvLnR5cGUgIT09IFwic3Rhc2hcIlxuICAgIClcbiAgKSB7XG4gICAgY29uc29sZS53YXJuKGBcbiAgICAgIFlvdSBNVVNUIGhhdmUgYSByZXBvc2l0b3J5IHNwZWNpZmllZCBpbiB5b3VyIHBhY2thZ2UganNvbiB0byB1c2UgdGhlXG4gICAgICByZWxlYXNlIHNjcmlwdC4gSXQgbXVzdCBiZSBvZiAndHlwZTogZ2l0JyBhbmQgaGF2ZSBhIHZhbGlkIHNzaCB1cmwgdG9cbiAgICAgIHlvdXIgZ2l0IHJlcG8uXG5cbiAgICAgIEFkZGl0aW9uYWxseSwgeW91IE1VU1QgaGF2ZSBhIHJlbW90ZSBjb25maWd1cmVkIGZvciB5b3VyIHByb2plY3Qgb2ZcbiAgICAgICdvcmlnaW4nIHRoYXQgbWF0Y2hlcyB0aGUgcmVwbyB1cmwgbGlzdGVkIGluIHlvdXIgcGFja2FnZS5qc29uLlxuXG4gICAgICBUaHVzOiBcImdpdCByZW1vdGUgLXZcIiBTSE9VTEQgb3V0cHV0IGEgbGluZSB3aXRoXG4gICAgICBvcmlnaW4gPHVybCBpbiB5b3VyIHBhY2thZ2UganNvbiByZXBvc2l0b3J5IGZpZWxkPiAocHVzaClcbiAgICBgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBXZSBjaGVjayBvdXIgcmVtb3RlIHRvIGVuc3VyZSB3ZSBoYXZlIGEgcHJvamVjdCB3aXRoIGV4cGVjdGVkIHZhbHVlc1xuICBjb25zdCByZW1vdGVMaXN0UHJvY2VzcyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwiZ2l0XCIsIFtcInJlbW90ZVwiLCBcIi12XCJdKTtcblxuICBpZiAocmVtb3RlTGlzdFByb2Nlc3MgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgbGlzdCByZW1vdGVzIGZvciB0aGUgZ2l0IHByb2plY3QuXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IHJlbW90ZXMgPSByZW1vdGVMaXN0UHJvY2Vzcy5zcGxpdCgvXFxyP1xcbi9nKTtcblxuICBjb25zdCBmb3VuZFJlbW90ZSA9IHJlbW90ZXMuZmluZChcbiAgICAocm93KSA9PlxuICAgICAgcm93LmluZGV4T2YoRU5TVVJFX1JFTU9URSkgPj0gMCAmJiByb3cuaW5kZXhPZihFTlNVUkVfUkVNT1RFX1BST0pFQ1QpID49IDBcbiAgKTtcblxuICBpZiAoIWZvdW5kUmVtb3RlKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJDb3VsZCBub3QgbWF0Y2ggcGFja2FnZSBqc29uIHJlcG9zaXRvcnkgdG8gYW4gb3JpZ2luIHJlbW90ZSBpbiBnaXQgQ0xJXCIsXG4gICAgICB7IHJlbW90ZUxpc3RQcm9jZXNzLCByZW1vdGVzLCBFTlNVUkVfUkVNT1RFLCBFTlNVUkVfUkVNT1RFX1BST0pFQ1QgfVxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gTm93IGNoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgcmVwbyBzcGVjaWZpZWQgZXhpc3RzIGluIGdpdCBhbmQgaXMgYXZhaWxhYmxlIHRvXG4gIC8vIHRoZSB1c2VyXG4gIGlmICghZ2l0Q2FuQWNjZXNzUmVtb3RlKEVOU1VSRV9SRU1PVEVfUFJPSkVDVCkpIHtcbiAgICBjb25zb2xlLndhcm4oYFxuICAgICAgWW91IGRvIG5vdCBzZWVtIHRvIGhhdmUgYWNjZXNzIHRvIHRoZSByZXBvIGxpc3RlZCBpbiB0aGUgcGFja2FnZSBqc29uIG9mXG4gICAgICB0aGlzIHByb2plY3QuIFBsZWFzZSBlbnN1cmUgeW91IGhhdmUgd3JpdGUgYWNjZXNzIHRvIHRoZSByZXBvOlxuICAgICAgJHtFTlNVUkVfUkVNT1RFX1BST0pFQ1R9XG4gICAgICBhbmQgdGhlbiB0cnkgdG8gcnVuIHRoZSByZWxlYXNlIGFnYWluLlxuICAgIGApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIFdlIGNhbiBvbmx5IGRvIHRoaXMgb3BlcmF0aW9uIGlmIHRoZXJlIGlzIG5vdGhpbmcgdG8gY29tbWl0IG9yIHB1c2hcbiAgLy8gVGhpcyBvbmx5IHdvcmtzIGlmIG5vIGNoYW5nZXMgYXJlIHByZXNlbnRcbiAgaWYgKGF3YWl0IGdpdEhhc0NoYW5nZXMoKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcIllvdSBoYXZlIHVuY29tbWl0dGVkIGNoYW5nZXMgb3IgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHByb2plY3QgY2FuIG5vdCBiZSBkZXRlcm1pbmVkLiBQbGVhc2UgY29tbWl0IG9yIHN0YXNoIHRoZW0gYmVmb3JlIGNvbnRpbnVpbmcuXCJcbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnNvbGUud2FybihcIlJlcG9zaXRvcnkgdmFsaWRhdGlvbiBjb21wbGV0ZVwiKTtcbn1cblxuLyoqXG4gKiBNYWtlcyBzdXJlIHdlIGFyZSBvbiB0aGUgcmVsZWFzZSBicmFuY2ggYW5kIGNvbXBsZXRlbHkgdXBkYXRlZCB3aXRoIHRoZVxuICogY29udGVudHMgb2YgZGV2LlxuICovXG5hc3luYyBmdW5jdGlvbiBjaGVja291dFJlbGVhc2UoKSB7XG4gIC8vIE1ha2Ugc3VyZSB3ZSdyZSBvbiBhIHJlbGVhc2UgYnJhbmNoIHRoYXQgbWF0Y2hlcyBkZXZcbiAgaWYgKCEoYXdhaXQgYXdhaXQgZXhlY1N5bmMoXCJnaXRcIiwgW1wiY2hlY2tvdXRcIiwgXCJyZWxlYXNlXCJdKSkpIHtcbiAgICBpZiAoIShhd2FpdCBleGVjU3luYyhcImdpdFwiLCBbXCJjaGVja291dFwiLCBcIi1iXCIsIFwicmVsZWFzZVwiXSkpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiQ291bGQgbm90IHN3aXRjaCB0byB0aGUgcmVsZWFzZSBicmFuY2guIE1ha2Ugc3VyZSB0aGUgYnJhbmNoIGV4aXN0cyBsb2NhbGx5LlwiXG4gICAgICApO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfVxuXG4gIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIHRoZSBsYXRlc3QgZnJvbSB0aGUgcmVtb3RlXG4gIGlmICghKGF3YWl0IGV4ZWNTeW5jKGBnaXRgLCBbXCJmZXRjaFwiLCBgJHtFTlNVUkVfUkVNT1RFfWBdKSkpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgZmV0Y2ggZnJvbSByZW1vdGUgc2VydmVycy5cIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gTWFrZSBzdXJlIHdlIGFyZSBleGFjdGx5IHdoYXQgaXMgaW4gZGV2XG4gIGlmICghKGF3YWl0IGV4ZWNTeW5jKGBnaXRgLCBbXCJyZXNldFwiLCBcIi0taGFyZFwiLCBgJHtFTlNVUkVfUkVNT1RFfS9kZXZgXSkpKSB7XG4gICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgcmVzZXQgYnJhbmNoIHRvIGRldmApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnNvbGUud2FybihcIkNoZWNrZWQgb3V0IHJlbGVhc2UgYnJhbmNoIGFuZCB1cGRhdGVkIHRvIGRldlwiKTtcbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHRoZSBsYXN0IHJlbGVhc2UgdHlwZSBiYXNlZCBvbiB0aGUgY29udGVudHMgcGxhY2VkIHdpdGhpbiB0aGVcbiAqIHJlbGVhc2Ugbm90ZXMgZmlsZS5cbiAqL1xuZnVuY3Rpb24gZ2V0UmVsZWFzZVR5cGUoKSB7XG4gIHRyeSB7XG4gICAgY29uc3Qgbm90ZXM6IHN0cmluZyA9IGZzLnJlYWRGaWxlU3luYyhcbiAgICAgIHBhdGgucmVzb2x2ZShcIlJFTEVBU0VfTk9URVMubWRcIiksXG4gICAgICBcInV0ZjhcIlxuICAgICk7XG4gICAgY29uc3QgZ3JvdXBzID0gbm90ZXNcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAgIC5tYXAoKGxpbmUpID0+IChsaW5lLm1hdGNoKC8jIyAoXFx3KykvKSB8fCBbXSlbMV0pXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICAgIGlmIChncm91cHMuaW5jbHVkZXMoXCJicmVha2luZ1wiKSkgcmV0dXJuIFwibWFqb3JcIjtcbiAgICBpZiAoZ3JvdXBzLmluY2x1ZGVzKFwiYWRkZWRcIikpIHJldHVybiBcIm1pbm9yXCI7XG4gICAgcmV0dXJuIFwicGF0Y2hcIjtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBkZXRlcm1pbmUgcmVsZWFzZSB0eXBlIGFmdGVyIHJlbGVhc2Ugd2FzIGNyZWF0ZWRcIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59XG5cbi8qKlxuICogVXBkYXRlIG91ciByZWxlYXNlIG5vdGVzIGFuZCBkZXRlcm1pbmUgd2hhdCBvdXIgbmV4dCB2ZXJzaW9uIGlzIGdvaW5nIHRvIGJlXG4gKiBiYXNlZCBvbiBjb21taXQgbWVzc2FnZXMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVZlcnNpb24oYWx0ZXJuYXRlPzogc3RyaW5nKSB7XG4gIC8vIEdldCBvdXIgY3VycmVudCB2ZXJzaW9uIHNvIHdlIGNhbiBlbnN1cmUgb3VyIHZlcnNpb24gY2hhbmdlZC5cbiAgY29uc3QgY3VycmVudFZlcnNpb24gPSBhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpO1xuXG4gIC8vIEVuc3VyZSBhbGwgZnJhZ21lbnRzIGFyZSBnb2luZyB0byBiZSBpbmNsdWRlZCBpbiB0aGUgY29tbWl0XG4gIGlmICghKGF3YWl0IGV4ZWNTeW5jKFwiZ2l0XCIsIFtcImFkZFwiLCBcIi1BXCJdKSkpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIkNvdWxkIG5vdCBlbnN1cmUgYWxsIGZyYWdtZW50cyBhcmUgYWRkZWQgZm9yIHRoZSBuZXh0IGNvbW1pdC5cIlxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gSGF2ZSB0aGlzIGV4ZWN1dGUgdGhlIHJlbGVhc2Utbm90ZXMgc2NyaXB0XG4gIGF3YWl0IHJlbGVhc2VOb3Rlcyh7XG4gICAgZmlsZTogXCJSRUxFQVNFX05PVEVTLm1kXCIsXG4gICAgdXBkYXRlUGFja2FnZTogdHJ1ZSxcbiAgfSk7XG5cbiAgLy8gR2V0IHRoZSB2ZXJzaW9uIHJ1bm5lciBzaG91bGQgaGF2ZSB1cGRhdGVkIHRvXG4gIGNvbnN0IG5ld1ZlcnNpb24gPSBhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpO1xuXG4gIC8vIElmIG91ciB2ZXJzaW9uIGhhcyBub3QgY2hhbmdlZCwgdGhlbiB0aGVyZSB3ZXJlIG5vIGNvbW1pdHMgd2l0aCByZWxlYXNlXG4gIC8vIG5vdGVzXG4gIGlmIChjdXJyZW50VmVyc2lvbiA9PT0gbmV3VmVyc2lvbikge1xuICAgIGNvbnNvbGUud2FybihgXG4gICAgICBUaGUgcmVsZWFzZSBzY3JpcHQgZGlkIG5vdCBkZXRlY3QgYW55IGNoYW5nZXMgZm9yIGEgcmVsZWFzZS4gSWYgeW91IGZpbmRcbiAgICAgIHRoaXMgdG8gYmUgaW4gZXJyb3Igb3IgeW91IHdhbnQgdG8gZm9yY2UgYSBuZXcgcmVsZWFzZS4gTWFrZSBzb21lIGNvbW1pdHNcbiAgICAgIHdpdGggcHJvcGVyIHJlbGVhc2Ugbm90ZSBmb3JtYXR0ZWQgbWVzc2FnZXMgdG8gdHJpZ2dlciBhIHJlbGVhc2UuXG4gICAgYCk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgaWYgKGFsdGVybmF0ZSkge1xuICAgIGlmIChnZXRSZWxlYXNlVHlwZSgpICE9PSBcInBhdGNoXCIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFxuICAgICAgICBDYW5ub3QgY3JlYXRlIGEgcmVsZWFzZSBmb3IgYW4gYWx0ZXJuYXRlIGJyYW5jaCB0aGF0IGlzIG5vdCBhIHNpbXBsZVxuICAgICAgICBwYXRjaC4gRmVhdHVyZXMgYW5kIGJyZWFraW5nIGNoYW5nZXMgY2FuIE9OTFkgYmUgbWFkZSBvbiB0aGUgbWFpbiBicmFuY2ggb2ZcbiAgICAgICAgZGV2ZWxvcG1lbnQuXG4gICAgICBgKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgdGhlIHZlcnNpb24gZ2VuZXJhdGVkIGJ5IHRoZSBydW5uZXIgcmVsZWFzZSBub3RlcyBjb21taXRcbiAgY29uc3QgbGFzdENvbW1pdFByb2Nlc3MgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChcImdpdFwiLCBbXG4gICAgXCJsb2dcIixcbiAgICBcIi0xXCIsXG4gICAgXCItLXByZXR0eT0lQlwiLFxuICBdKTtcblxuICBpZiAobGFzdENvbW1pdFByb2Nlc3MgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgcmVhZCB0aGUgbGFzdCBjb21taXQgdmVyc2lvbiBpbmZvcm1hdGlvblwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zdCB2ZXJzaW9uID0gKFxuICAgIGxhc3RDb21taXRQcm9jZXNzLnRyaW0oKS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwicmVsZWFzZSBcIilbMV0gfHwgXCJcIlxuICApLnRyaW0oKTtcblxuICBpZiAoIXZlcnNpb24pIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIkNvdWxkIG5vdCBkZXRlcm1pbmUgcmVsZWFzZSB2ZXJzaW9uIGZyb20gdGhlIGxhc3QgY29tbWl0OlxcblxcblwiLFxuICAgICAgbGFzdENvbW1pdFByb2Nlc3MudG9TdHJpbmcoKSxcbiAgICAgIFwiXFxuXFxuXCJcbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIFVwZGF0ZSB0aGUgcmVsZWFzZSB2ZXJzaW9uIGpzb24gaW4gdGhlIHNvdXJjZVxuICBpZiAoZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCJ1aS9yZWxlYXNlLmpzb25cIikpKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gZnMucmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInVpL3JlbGVhc2UuanNvblwiKSk7XG4gICAgICBjb250ZW50cy52ZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgIGZzLndyaXRlSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwidWkvcmVsZWFzZS5qc29uXCIpLCBjb250ZW50cyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiQ291bGQgbm90IHVwZGF0ZSB0aGUgcmVsZWFzZS5qc29uIGZpbGUgd2l0aCBjdXJyZW50IGxpYnJhcnkgdmVyc2lvbi5cIlxuICAgICAgKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbGVhc2UganNvbiBmaWxlXG4gICAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoXCJnaXRcIiwgW1wiYWRkXCIsIFwiLUFcIl0pKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIkNvdWxkIG5vdCBlbnN1cmUgdGhlIHJlbGVhc2UganNvbiB3YXMgdXBkYXRlZCBmb3IgdGhlIG5ldyB2ZXJzaW9uLlwiXG4gICAgICApO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cblxuICAgIC8vIEFtZW5kIHRoZSByZWxlYXNlIGNvbW1pdFxuICAgIGlmICghKGF3YWl0IGV4ZWNTeW5jKFwiZ2l0XCIsIFtcImNvbW1pdFwiLCBcIi0tYW1lbmRcIiwgXCItLW5vLWVkaXRcIl0pKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIkNvdWxkIG5vdCBhbWVuZCB0aGUgcmVsZWFzZSBjb21taXQgdG8gaW5jbHVkZSB0aGUgcmVsZWFzZSBqc29uIGZpbGUuXCJcbiAgICAgICk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHZlcnNpb24uaW5jbHVkZXMoJ1wiJykpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIlRoZSB1cGRhdGUgdmVyc2lvbiBnZW5lcmF0ZWQgaXMgaW52YWxpZCBhcyBpdCBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnNcIixcbiAgICAgIHsgdmVyc2lvbiB9XG4gICAgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zb2xlLndhcm4oXCJVcGRhdGluZyB2ZXJzaW9uIHRvXCIsIHsgdmVyc2lvbiB9KTtcbiAgcmV0dXJuIHZlcnNpb247XG59XG5cbi8qKlxuICogVGhpcyBnZW5lcmF0ZXMgYSB0YWcgZm9yIHRoZSBnaXZlbiByZWxlYXNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVRhZyh2ZXJzaW9uOiBzdHJpbmcpIHtcbiAgLy8gVGFnIHRoZSBjb21taXQgd2l0aCB0aGUgdmVyc2lvbiBudW1iZXJcbiAgaWYgKFxuICAgICEoYXdhaXQgZXhlY1N5bmMoYGdpdGAsIFtgdGFnYCwgXCItYVwiLCB2ZXJzaW9uLCBcIi1tXCIsIGBSZWxlYXNlICR7dmVyc2lvbn1gXSkpXG4gICkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBtYWtlIHRhZyBmb3IgZ2l0IGNvbW1pdFwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHBlcmZvcm1zIGFsbCBhY3Rpb25zIHRvIHB1c2hpbmcgdGhlIGdlbmVyYXRlZCByZXN1bHRzIHRvIHRoZSByZW1vdGVcbiAqIHJlcG9zaXRvcnlcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcHVzaFRvUmVtb3RlKFxuICByZW1vdGU6IHN0cmluZyxcbiAgdmVyc2lvbjogc3RyaW5nLFxuICBmcm9tQnJhbmNoOiBzdHJpbmcsXG4gIHRvQnJhbmNoOiBzdHJpbmcsXG4gIGZvcmNlOiBib29sZWFuXG4pIHtcbiAgLy8gUHVzaCB0aGUgY29tbWl0IHRvIHJlbW90ZSByZWxlYXNlIGJyYW5jaFxuICBpZiAoXG4gICAgIShhd2FpdCBleGVjU3luYyhgZ2l0YCwgW1xuICAgICAgXCJwdXNoXCIsXG4gICAgICBmb3JjZSA/IFwiLWZcIiA6IHZvaWQgMCxcbiAgICAgIHJlbW90ZSxcbiAgICAgIGAke2Zyb21CcmFuY2h9OiR7dG9CcmFuY2h9YCxcbiAgICBdKSlcbiAgKSB7XG4gICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgcHVzaCByZWxlYXNlIGNvbW1pdCB0byAke3JlbW90ZX1gKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBQdXNoIHRoZSB0YWcgdG8gcmVtb3RlXG4gIGlmICghKGF3YWl0IGV4ZWNTeW5jKGBnaXRgLCBbXCJwdXNoXCIsIHJlbW90ZSwgdmVyc2lvbl0pKSkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBwdXNoIHRhZyB0byB0aGUgcmVtb3RlIHJlcG9zaXRvcnlcIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyB3aWxsIGVuc3VyZSBlYWNoIHJlbW90ZSBpcyBhY2Nlc3NpYmxlIGJ5IHRoZSB1c2VyIGFuZCB3aWxsIHB1c2ggdGhlXG4gKiByZWxlYXNlIGJyYW5jaCB0byBlYWNoIG9mIHRoZSBzcGVjaWZpZWQgcmVtb3RlcyBhdCB0aGUgcG90ZW50aWFsIHRhcmdldFxuICogYnJhbmNoOlxuICpcbiAqIHJlbW90ZTpmcm9tQnJhbmNoOnRvQnJhbmNoOmZvcmNlXG4gKlxuICogSWYgdGhlIGJyYW5jaCBpcyBub3Qgc3BlY2lmaWVkLCB0aGUgYnJhbmNoIHNwZWNpZmllZCBmb3IgdGhpcyBwcm9qZWN0IHdpbGxcbiAqIGJlIHVzZWQuXG4gKlxuICogVGhlIFwiZm9yY2VcIiBvcHRpb24gaXMgbGl0ZXJhbC4gVXNlIHRoZSB3b3JkIFwiZm9yY2VcIiB0byB0cmlnZ2VyIGEgZm9yY2UgcHVzaC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gcmVsZWFzZUFkZGl0aW9uYWxSZW1vdGVzKGFkZFJlbW90ZXM6IHN0cmluZ1tdLCB2ZXJzaW9uOiBzdHJpbmcpIHtcbiAgaWYgKGFkZFJlbW90ZXMgJiYgYWRkUmVtb3Rlcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3Qgc2hvdWxkUmVsZWFzZVJlbW90ZXMgPSBhd2FpdCBwcm9tcHRDb25maXJtKFxuICAgICAgZGVzY3JpcHRpb25gXG4gICAgICAgIFRoZSBidWlsZCBhbmQgcmVsZWFzZSB3YXMgc3VjY2Vzc2Z1bCwgd291bGQgeW91IGxpa2UgdG8gcmVsZWFzZSB0byB0aGVcbiAgICAgICAgc3BlY2lmaWVkIGFkZGl0aW9uYWwgcmVtb3Rlcz9cblxuICAgICAgICAke2NoYWxrLmN5YW5CcmlnaHRCb2xkKGFkZFJlbW90ZXMuam9pbihcIlxcblwiKSl9XG4gICAgICBgXG4gICAgKTtcblxuICAgIGlmICghc2hvdWxkUmVsZWFzZVJlbW90ZXMpIHJldHVybjtcbiAgfVxuXG4gIC8vIERvIGEgZmV0Y2ggYWdhaW4gdG8gZW5zdXJlIHdlIGhhdmUgdGhlIGxhdGVzdCBmcm9tIHRoZSByZW1vdGVcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoYGdpdGAsIFtcImZldGNoXCIsIEVOU1VSRV9SRU1PVEVdKSkpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgZmV0Y2ggZnJvbSByZW1vdGUgc2VydmVycy5cIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgZm9yIChjb25zdCByZW1vdGVJbmZvIG9mIGFkZFJlbW90ZXMpIHtcbiAgICAvLyBQdXNoIHRoZSByZWxlYXNlIHRvIHRoZSBzcGVjaWZpZWQgcmVtb3Rlc1xuICAgIGNvbnN0IFtyZW1vdGUsIGZyb21CcmFuY2gsIHRvQnJhbmNoLCBmb3JjZV0gPSByZW1vdGVJbmZvLnNwbGl0KFwiOlwiKTtcbiAgICAvLyBNYWtlIHN1cmUgdGhlIGRldiBoYXMgYWNjZXNzIHRvIHRoZSBzcGVjaWZpZWQgcmVtb3RlXG4gICAgYXdhaXQgZ2l0RW5zdXJlUmVtb3RlKHJlbW90ZSk7XG4gICAgLy8gUmVzZXQgdGhlIGZyb21CcmFuY2ggdG8gaXQncyBsYXRlc3QgZnJvbSBvcmlnaW5cbiAgICBhd2FpdCBnaXRVcGRhdGVCcmFuY2goRU5TVVJFX1JFTU9URSwgZnJvbUJyYW5jaCB8fCBcIm1hc3RlclwiKTtcbiAgICAvLyBEZXBsb3kgdG8gdGhlIGNvbmZpZ3VyZWQgYnJhbmNoIG9yIHRvIG1hc3RlclxuICAgIGF3YWl0IHB1c2hUb1JlbW90ZShcbiAgICAgIHJlbW90ZSxcbiAgICAgIHZlcnNpb24sXG4gICAgICBmcm9tQnJhbmNoIHx8IFwibWFzdGVyXCIsXG4gICAgICB0b0JyYW5jaCB8fCBcIm1hc3RlclwiLFxuICAgICAgZm9yY2UgPT09IFwiZm9yY2VcIlxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHBlcmZvcm1zIGFsbCBvZiB0aGUgYnVpbGQgYWN0aW9ucyB0byBnZW5lcmF0ZSBhbGwgZnJhZ21lbnRzIHRoZSBwcm9qZWN0XG4gKiB3aWxsIGdlbmVyYXRlIGZvciBkaXN0cmlidXRpb25zIGFuZCB0aGVuIHdpbGwgcHVzaCB0aG9zZSBmcmFnbWVudHMgaW50byB0aGVcbiAqIHJlcG8uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkQW5kUHVzaChhZGRSZW1vdGVzOiBzdHJpbmdbXSkge1xuICAvLyBQcm9jZXNzIGFuZCBzZXQgZW52aXJvbm1lbnQgdmFyaWFibGVzXG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gXCJwcm9kdWN0aW9uXCI7XG5cbiAgLy8gTWFrZSBzdXJlIHdlIGNhbiBtYWtlIGNhbGxzIHRvIHRoZSByZXBvXG4gIGF3YWl0IHZhbGlkYXRlUmVwb3NpdG9yeSgpO1xuICAvLyBNb3ZlIG91ciBnaXQgY29udGV4dCB0byB0aGUgcmVsZWFzZSBicmFuY2hcbiAgYXdhaXQgY2hlY2tvdXRSZWxlYXNlKCk7XG4gIC8vIEJ1aWxkIHRoZSBwcm9qZWN0IGZyYWdtZW50c1xuICBhd2FpdCByZWxlYXNlQnVpbGQoKTtcbiAgLy8gR2V0IHRoZSBuZXcgdmVyc2lvbiB0aGlzIHJlbGVhc2UgaXMgZ29pbmcgdG8gYmVjb21lLlxuICBjb25zdCB2ZXJzaW9uID0gYXdhaXQgdXBkYXRlVmVyc2lvbigpO1xuICAvLyBUYWcgdGhlIHJlbGVhc2UgY29tbWl0IHdpdGggdGhlIGxhdGVzdCB2ZXJzaW9uXG4gIGF3YWl0IHVwZGF0ZVRhZyh2ZXJzaW9uKTtcbiAgLy8gUHVzaCBldmVyeXRoaW5nIHdlIGhhdmUgdXBkYXRlZCB3aXRoIGdpdCB0byB0aGUgcmVtb3RlIHJlcG9cbiAgYXdhaXQgcHVzaFRvUmVtb3RlKEVOU1VSRV9SRU1PVEUsIHZlcnNpb24sIFwicmVsZWFzZVwiLCBcInJlbGVhc2VcIiwgdHJ1ZSk7XG5cbiAgLy8gQXNrIHRvIHJ1biB0aGUgcHIgcmVsZWFzZSBzY3JpcHRcbiAgY29uc3Qgc2hvdWxkUHIgPSBhd2FpdCBwcm9tcHRDb25maXJtKFwiV291bGQgeW91IGxpa2UgdG8gcnVuIHByIHJlbGVhc2U/XCIpO1xuXG4gIGlmIChzaG91bGRQcikge1xuICAgIC8vIEF0dGVtcHQgdG8gcnVuIHByIHJlbGVhc2UuIFdlIGRvbid0IGNhcmUgaWYgaXQgd29ya3Mgb3Igbm90IGFzIHRoaXMgaXMgYW5cbiAgICAvLyBvcHRpb25hbCBicmFuY2ggdGFrZW4gYnkgdGhlIHVzZXIgYW55d2hvLlxuICAgIGF3YWl0IGV4ZWNTY3JpcHQoXCJwclwiLCBbXCJyZWxlYXNlXCJdKTtcbiAgfVxuXG4gIC8vIEFzayB0byBkZXBsb3kgYWRkaXRpb25hbCBzcGVjaWZpZWQgcmVtb3Rlc1xuICBhd2FpdCByZWxlYXNlQWRkaXRpb25hbFJlbW90ZXMoYWRkUmVtb3RlcywgdmVyc2lvbik7XG4gIC8vIE5vdyB3ZSBhc2sgdG8gcmV0dXJuIHRvIG9yaWdpbmFsIGJyYW5jaFxuICBhd2FpdCBnaXRSZXR1cm5Ub0Rldih0cnVlKTtcbn1cblxuLyoqXG4gKiBFbnRyeSBtZXRob2QgZm9yIHRoZSByZWxlYXNlIHByb2Nlc3NcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKGFkZFJlbW90ZXM6IHN0cmluZ1tdKSB7XG4gIGNvbnNvbGUud2FybihcIkV4ZWN1dGluZyByZWxlYXNlIHNjcmlwdFwiKTtcbiAgYnVpbGRBbmRQdXNoKGFkZFJlbW90ZXMpO1xufVxuIiwKICAgICJpbXBvcnQgeyByZWxlYXNlTGlicmFyeVR5cGVzIH0gZnJvbSBcIi4uLy4uL2xpYi9idWlsZC9saWJyYXJ5L3ZpdGUvcmVsZWFzZS1saWJyYXJ5LXR5cGVzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgYXdhaXQgcmVsZWFzZUxpYnJhcnlUeXBlcygpO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgSWdub3JlIGZyb20gXCJpZ25vcmVcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuLi9saWIvZXhlYy9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi4vbGliL3V0aWwvd2FpdC5qc1wiO1xuXG5jb25zdCBnaXRJZ25vcmVQYXRoID0gcGF0aC5yZXNvbHZlKFwiLmdpdGlnbm9yZVwiKTtcbmxldCBpZ25vcmUgPSBJZ25vcmUuZGVmYXVsdCgpO1xuXG5pZiAoZnMuZXhpc3RzU3luYyhnaXRJZ25vcmVQYXRoKSkge1xuICBpZ25vcmUgPSBpZ25vcmUuYWRkKGZzLnJlYWRGaWxlU3luYyhnaXRJZ25vcmVQYXRoKS50b1N0cmluZygpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0eXBlc2NyaXB0IHR5cGUgY29tcGlsYXRpb24gd2l0aG91dCBlbWl0dGluZyBhbnl0aGluZy4gVGhpcyBjYW4gYmVcbiAqIHVzZWQgdG8gZmluZCBlcnJvcnMgaW4gdGhlIHByb2plY3QgYmVmb3JlIGEgcmVsZWFzZSBpcyBhdHRlbXB0ZWQuIE9yIHlvdSBjYW5cbiAqIHJ1biB0aGlzIGFzIG5vZGVtb24gcHJvY2VzcyB0byBmaW5kIGVycm9ycyBhcyBkZXZlbG9wbWVudCBoYXBwZW5zLlxuICovXG5hc3luYyBmdW5jdGlvbiBydW5UeXBlc2NyaXB0KG1vZGU6IHN0cmluZykge1xuICAvLyBCdWlsZCBkZWNsYXJhdGlvbiBmaWxlcyBmb3IgdGhlIGxpYnJhcnkgb25seVxuICBjb25zdCB0c0NvbmZpZyA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy5qc29uXCIpKTtcbiAgdHNDb25maWcuZXhjbHVkZSA9IHRzQ29uZmlnLmV4Y2x1ZGUgfHwgW107XG4gIHRzQ29uZmlnLmluY2x1ZGUgPSAodHNDb25maWc/LmluY2x1ZGUgfHwgW10pLmZpbHRlcihcbiAgICAocDogc3RyaW5nKSA9PiAhaWdub3JlLmlnbm9yZXMocGF0aC5yZWxhdGl2ZShcIi4vXCIsIHApKVxuICApO1xuICAvLyB0c0NvbmZpZy5leGNsdWRlLnB1c2goXCJsaWIvc2VydmVyXCIpO1xuICBmcy53cml0ZUpTT05TeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSwgdHNDb25maWcpO1xuICAvLyBFbnN1cmUgdGhlIGZpbGUgc3lzdGVtIGhhcyBmbHVzaGVkIHRoZSB0ZW1wIGZpbGUgdG8gZGlza1xuICBhd2FpdCB3YWl0KDUwMCk7XG5cbiAgLy8gTWFrZSBhIGNsZWFuIHVwIHJvdXRpbmUgZm9yIHdhdGNoIG1vZGVcbiAgaWYgKG1vZGUgPT09IFwid2F0Y2hcIikge1xuICAgIGNvbnN0IGhhbmRsZUV4aXQgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oXCJFeGl0IFRTIHByb2Nlc3NcIik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBOT09QXG4gICAgICB9XG5cbiAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICB9O1xuXG4gICAgLy8gQ2F0Y2ggd2hlbiBhcHAgaXMgY2xvc2luZ1xuICAgIHByb2Nlc3Mub24oXCJleGl0XCIsIGhhbmRsZUV4aXQpO1xuICAgIC8vIENhdGNoIGN0cmwrYyBldmVudFxuICAgIHByb2Nlc3Mub24oXCJTSUdJTlRcIiwgaGFuZGxlRXhpdCk7XG4gICAgLy8gQ2F0Y2ggXCJraWxsIHBpZFwiIChmb3IgZXhhbXBsZTogbm9kZW1vbiByZXN0YXJ0KVxuICAgIHByb2Nlc3Mub24oXCJTSUdVU1IxXCIsIGhhbmRsZUV4aXQpO1xuICAgIHByb2Nlc3Mub24oXCJTSUdVU1IyXCIsIGhhbmRsZUV4aXQpO1xuICAgIHByb2Nlc3Mub24oXCJTSUdURVJNXCIsIGhhbmRsZUV4aXQpO1xuICAgIC8vIENhdGNoIHVuY2F1Z2h0IGV4Y2VwdGlvbnNcbiAgICBwcm9jZXNzLm9uKFwidW5jYXVnaHRFeGNlcHRpb25cIiwgaGFuZGxlRXhpdCk7XG4gIH1cbiAgaWYgKFxuICAgICFleGVjU3luYyhcInRzY1wiLCBbXG4gICAgICBcIi1kXCIsXG4gICAgICBtb2RlID09PSBcIndhdGNoXCIgPyBcIi0td2F0Y2hcIiA6IFwiXCIsXG4gICAgICBcIi0taW5jcmVtZW50YWxcIixcbiAgICAgIFwiLS1ub2VtaXRcIixcbiAgICAgIFwiLS1wcmV0dHlcIixcbiAgICAgIFwiLS10c0J1aWxkSW5mb0ZpbGVcIixcbiAgICAgIHBhdGgucmVzb2x2ZShcIm5vZGVfbW9kdWxlcy8uY2FjaGUvdHNjL3RzYy50c2J1aWxkaW5mb1wiKSxcbiAgICAgIFwiLS1vdXREaXJcIixcbiAgICAgIHBhdGgucmVzb2x2ZShcImRpc3RcIiksXG4gICAgICBcIi0tcHJvamVjdFwiLFxuICAgICAgcGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpLFxuICAgIF0pXG4gICkge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjb21waWxlIHR5cGUgZGVjbGFyYXRpb25zXCIpO1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zdCBlc2xpbnRUYXJnZXRzID0gKHRzQ29uZmlnPy5pbmNsdWRlIHx8IFtdKVxuICAgIC5maWx0ZXIoKHA6IHN0cmluZykgPT4gIWlnbm9yZS5pZ25vcmVzKHBhdGgucmVsYXRpdmUoXCIuL1wiLCBwKSkpXG4gICAgLm1hcCgocDogc3RyaW5nKSA9PiBwYXRoLnJlc29sdmUocCkpXG4gICAgLmZpbHRlcigocDogc3RyaW5nKSA9PiBmcy5leGlzdHNTeW5jKHApICYmICFwLmluY2x1ZGVzKFwibm9kZV9tb2R1bGVzXCIpKTtcblxuICBpZiAoZXNsaW50VGFyZ2V0cy5sZW5ndGggPiAwKSB7XG4gICAgaWYgKFxuICAgICAgIWV4ZWNTeW5jKFxuICAgICAgICAvLyBgZXNsaW50ICR7ZXNsaW50VGFyZ2V0cy5qb2luKFwiIFwiKX0gLWMgJHtwYXRoLnJlc29sdmUoXG4gICAgICAgIC8vICAgXCIuZXNsaW50cmNcIlxuICAgICAgICAvLyApfSAtLWV4dCAudHMgLS1leHQgLnRzeGBcbiAgICAgICAgXCJlc2xpbnRcIixcbiAgICAgICAgW1xuICAgICAgICAgIC4uLmVzbGludFRhcmdldHMsXG4gICAgICAgICAgXCItY1wiLFxuICAgICAgICAgIHBhdGgucmVzb2x2ZShcIi5lc2xpbnRyY1wiKSxcbiAgICAgICAgICBcIi0tZXh0XCIsXG4gICAgICAgICAgXCIudHNcIixcbiAgICAgICAgICBcIi0tZXh0XCIsXG4gICAgICAgICAgXCIudHN4XCIsXG4gICAgICAgIF1cbiAgICAgIClcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCBlc2xpbnQgY2hlY2tzLlwiKTtcbiAgICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH1cblxuICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bihtb2RlOiBzdHJpbmcpIHtcbiAgYXdhaXQgcnVuVHlwZXNjcmlwdChtb2RlKTtcbn1cbiIsCiAgICAiaW1wb3J0IHJ1bkFwcFNlcnZlciBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9ydW4tYXBwLXNlcnZlci5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcblxuLyoqXG4gKiBUaGlzIHNpbXBseSBmaXJlcyB1cCB0aGUgYXBwIHNlcnZlciB0byBydW4uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgY29uc29sZS53YXJuKGNoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJTdGFydGluZyBzZXJ2ZXIuLi5cIikpO1xuICBhd2FpdCBydW5BcHBTZXJ2ZXIoKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uL2xpYi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuXG4vKipcbiAqIFN0YXJ0cyBhIHNlcnZlciB3aXRoIGEgZ2l2ZW4gZW50cnkgcG9pbnQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0U2VydmVyKHBhdGhUb1NlcnZlcjogc3RyaW5nKSB7XG4gIGlmICghZnMuZXhpc3RzU3luYyhwYXRoVG9TZXJ2ZXIpKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJBdHRlbXB0ZWQgdG8gc3RhcnQgYSBzZXJ2ZXIgYnV0IG5vIHNlcnZlciBkaXN0cmlidXRpb24gd2FzIGZvdW5kIGF0XCIsXG4gICAgICBwYXRoVG9TZXJ2ZXJcbiAgICApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGF3YWl0IGV4ZWNTeW5jKGBidW5gLCBbYCR7cGF0aFRvU2VydmVyfWBdKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogU3RhcnRzIHRoZSBEZXZvcHMgQVBJIGhvc3RpbmcgaWYgYSBEZXZvcHMgYXBwIGRpc3RyaWJ1dGlvbiBpcyBhdmFpbGFibGVcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc3RhcnREZXZvcHNBUEkoKSB7XG4gIGNvbnN0IHBhdGhUb1NlcnZlciA9IHBhdGgucmVzb2x2ZShcImRvY3MvaW5kZXguanNcIik7XG4gIHJldHVybiBhd2FpdCBzdGFydFNlcnZlcihwYXRoVG9TZXJ2ZXIpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyB0aGUgd2ViIGFwcCBpZiBhIHdlYiBhcHAgc2VydmVyIGlzIGF2YWlsYWJsZVxuICovXG5hc3luYyBmdW5jdGlvbiBzdGFydFdlYkFwcCgpIHtcbiAgLy8gVGVsbCB0aGUgcHJvY2VzcyB3aGVyZSB0byBmaW5kIGl0J3MgcmVzb3VyY2VzIHRoYXQgd2VyZSBzcGVjaWZpZWQgaW4gY2xpZW50XG4gIHByb2Nlc3MuZW52LlJFU09VUkNFX1BBVEggPSBwYXRoLnJlc29sdmUoXCJkaXN0L2FwcC9jbGllbnRcIik7XG4gIC8vIEdldCB0aGUgcGF0aCB0byBvdXIgc2VydmVyIGJ1bmRsZVxuICBjb25zdCBwYXRoVG9TZXJ2ZXIgPSBwYXRoLnJlc29sdmUoXCJkaXN0L2FwcC9zZXJ2ZXIvaW5kZXguanNcIik7XG4gIC8vIFN0YXJ0IHRoZSBzZXJ2ZXIgZGlzdHJpYnV0aW9uXG4gIHJldHVybiBhd2FpdCBzdGFydFNlcnZlcihwYXRoVG9TZXJ2ZXIpO1xufVxuXG4vKipcbiAqIEVudHJ5IG1ldGhvZCBmb3IgdGhlIHN0YXJ0IGNvbW1hbmRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKHRhcmdldDogc3RyaW5nLCBfb3B0aW9uczogYW55KSB7XG4gIC8vIERlZmF1bHQgb3VyIHBvcnQgdG8gYSBwcm9wZXIgSFRUUCBwb3J0IHByb3RvY29sXG4gIGNvbnN0IHsgUE9SVCA9IFwiODBcIiB9ID0gcHJvY2Vzcy5lbnY7XG4gIHByb2Nlc3MuZW52LlBPUlQgPSBQT1JUO1xuXG4gIGxldCBzZXJ2ZXJSdW5uaW5nID0gZmFsc2U7XG5cbiAgc3dpdGNoICh0YXJnZXQpIHtcbiAgICBjYXNlIFwiYXBwXCI6XG4gICAgICBzZXJ2ZXJSdW5uaW5nID0gYXdhaXQgc3RhcnRXZWJBcHAoKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcImRldm9wc1wiOlxuICAgICAgc2VydmVyUnVubmluZyA9IGF3YWl0IHN0YXJ0RGV2b3BzQVBJKCk7XG4gICAgICBicmVhaztcblxuICAgIC8vIERvIG5vdGhpbmcgaWYgYSBwcm9wZXIgdGFyZ2V0IHdhcyBub3QgcGlja2VkXG4gICAgZGVmYXVsdDpcbiAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiSW52YWxpZCB0YXJnZXQgZm9yIHN0YXJ0IHNjcmlwdCBzcGVjaWZpZWRcIiwgdGFyZ2V0KTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgLy8gSWYgd2UgaGF2bid0IGJlZW4gYWJsZSB0byBwaWNrIGEgc2VydmVyIGJhc2VkIG9uIHRhcmdldCwgdGhlbiB3ZSBhdHRlbXB0IHRvIHN0YXJ0IHRoZSBzZXJ2ZXIgdmlhIGRlZmF1bHQgYmVoYXZpb3JcbiAgaWYgKCFzZXJ2ZXJSdW5uaW5nKSB7XG4gICAgc2VydmVyUnVubmluZyA9IGF3YWl0IHN0YXJ0V2ViQXBwKCk7XG4gICAgaWYgKHNlcnZlclJ1bm5pbmcpIHJldHVybjtcbiAgICBzZXJ2ZXJSdW5uaW5nID0gYXdhaXQgc3RhcnREZXZvcHNBUEkoKTtcbiAgICBpZiAoc2VydmVyUnVubmluZykgcmV0dXJuO1xuICB9XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBleGVjU2NyaXB0WCB9IGZyb20gXCIuLi9leGVjL2V4ZWMtc2NyaXB0eC5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vZXhlYy9leGVjLXN5bmMuanNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1blRlc3RzKCkge1xuICBjb25zdCB0c2NvbmZpZ1BhdGggPSBwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy5qc29uXCIpO1xuXG4gIGlmICghZnMuZXhpc3RzU3luYyh0c2NvbmZpZ1BhdGgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGFyZ2V0IHByb2plY3QgZG9lcyBub3QgaGF2ZSBhIFRTQ29uZmlnXCIpO1xuICB9XG5cbiAgLy8gU2VlIGlmIHdlIGFyZSBydW5uaW5nIHRoZSB1bml0IHRlc3RzIHdpdGggdGhlIG5lZWQgdG8gYXR0YWNoIGEgZGVidWcgY29uc29sZVxuICBjb25zdCBkZWJ1ZyA9IEJvb2xlYW4ocHJvY2Vzcy5lbnYuREVCVUcpO1xuICBjb25zdCBwYXR0ZXJuID0gcHJvY2Vzcy5lbnYuUEFUVEVSTjtcbiAgY29uc3Qgd2F0Y2ggPSBwcm9jZXNzLmVudi5XQVRDSDtcbiAgY29uc3QgbGVzcyA9IHByb2Nlc3MuZW52LkxFU1M7XG4gIC8vIFJ1biBwcmV0dGllciBvbmNlXG4gIGNvbnN0IGplc3RDb25maWcgPSBwYXRoLnJlc29sdmUoXCJqZXN0LmNvbmZpZy5qc1wiKTtcbiAgLy8gU3RvcCBleGVjU3luYyBjYXVnaHQgZXJyb3JzLiBXZSB3YW50IGplc3QgdG8gaGFuZGxlIHRob3NlIGxvZ3MgZm9yIHVzXG4gIGV4ZWNTeW5jLnNpbGVudCA9IHRydWU7XG5cbiAgdHJ5IHtcbiAgICBpZiAoZGVidWcpIHtcbiAgICAgIGV4ZWNTeW5jKFwibm9kZVwiLCBbXG4gICAgICAgIFwiLS1pbnNwZWN0LWJya1wiLFxuICAgICAgICBwYXRoLnJlc29sdmUoXCJub2RlX21vZHVsZXMvLmJpbi9qZXN0XCIpLFxuICAgICAgICBcIi0tcnVuSW5CYW5kXCIsXG4gICAgICAgIHdhdGNoID8gXCItLXdhdGNoQWxsXCIgOiBcIlwiLFxuICAgICAgICBcIi0tdmVyYm9zZVwiLFxuICAgICAgICBsZXNzID09PSBcInRydWVcIiA/IFwiZmFsc2VcIiA6IHZvaWQgMCxcbiAgICAgICAgXCItLWNvbG9yc1wiLFxuICAgICAgICBcIi0tY29uZmlnXCIsXG4gICAgICAgIGplc3RDb25maWcsXG4gICAgICAgIHBhdHRlcm4gPyBgLS10ZXN0TmFtZVBhdHRlcm4gJHtwYXR0ZXJufWAgOiBcIlwiLFxuICAgICAgXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4ZWNTY3JpcHRYKFxuICAgICAgICBbXG4gICAgICAgICAgXCJqZXN0XCIsXG4gICAgICAgICAgd2F0Y2ggPyBcIi0td2F0Y2hBbGxcIiA6IFwiXCIsXG4gICAgICAgICAgXCItLXZlcmJvc2VcIixcbiAgICAgICAgICBsZXNzID09PSBcInRydWVcIiA/IFwiZmFsc2VcIiA6IHZvaWQgMCxcbiAgICAgICAgICBcIi0tY29sb3JzXCIsXG4gICAgICAgICAgXCItLWNvbmZpZ1wiLFxuICAgICAgICAgIGplc3RDb25maWcsXG4gICAgICAgICAgcGF0dGVybiA/IGAtLXRlc3ROYW1lUGF0dGVybj0ke3BhdHRlcm59YCA6IFwiXCIsXG4gICAgICAgIF0sXG4gICAgICAgIC8vIFRoZSBidW4gZmxhZyBjdXJyZW50bHkgY2F1c2VzIGplc3QgdG8gYnJlYWsgdGhlIHRzLWplc3QgdHlwZSBjaGVja3NcbiAgICAgICAge1xuICAgICAgICAgIGV4Y2x1ZGVCdW5GbGFnOiB0cnVlLFxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJUZXN0cyBmYWlsZWQuIFBsZWFzZSBsb29rIGF0IGxvZ3MgdG8gc2VlIHRoZSBlcnJvcnMgZGlzY292ZXJlZFwiXG4gICAgKTtcbiAgfVxuXG4gIGNvbnNvbGUud2FybihjaGFsay5jeWFuQnJpZ2h0KFwiVGVzdHMgY29tcGxldGVcIikpO1xufVxuIiwKICAgICJpbXBvcnQgeyBydW5UZXN0cyB9IGZyb20gXCIuLi8uLi9saWIvdW5pdC10ZXN0L3J1bi10ZXN0cy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oKSB7XG4gIGNvbnNvbGUud2FybihcIlJ1bm5pbmcgdW5pdCB0ZXN0cy4uLlwiKTtcbiAgLy8gRXhlY3V0ZSB0aGUgdGVzdHNcbiAgYXdhaXQgcnVuVGVzdHMoKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBybXJmIGZyb20gXCJyaW1yYWZcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uLy4uL2xpYi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgc2NyaXB0IGNsZWFucyBvdXQgc3Rvcnlib29rIGNhY2hpbmcgdGhhdCBjYXVzZXMgdXBkYXRlcyB0byBiZSBoaWRkZW5cbiAqIHdoZW4gZWRpdGluZyBzdG9yeWJvb2sgY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKCkge1xuICBjb25zdCBjYWNoZSA9IHBhdGgucmVzb2x2ZShcIi4vbm9kZV9tb2R1bGVzLy5jYWNoZS9cIik7XG4gIGNvbnN0IGJ1aWxkID0gcGF0aC5yZXNvbHZlKFwiLi9idWlsZFwiKTtcblxuICBpZiAoZnMuZXhpc3RzU3luYyhjYWNoZSkpIHtcbiAgICBybXJmLnN5bmMoY2FjaGUpO1xuICAgIGNvbnNvbGUud2FybihcIkNhY2hlOiBDbGVhbiBjb21wbGV0ZVwiKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJDYWNoZTogQWxyZWFkeSBjbGVhblwiKTtcbiAgfVxuXG4gIGlmIChmcy5leGlzdHNTeW5jKGJ1aWxkKSkge1xuICAgIHJtcmYuc3luYyhidWlsZCk7XG4gICAgY29uc29sZS53YXJuKFwiQnVpbGQ6IENsZWFuIGNvbXBsZXRlXCIpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybihcIkJ1aWxkOiBBbHJlYWR5IGNsZWFuXCIpO1xuICB9XG5cbiAgaWYgKGF3YWl0IGV4ZWNTeW5jKFwiYnVuXCIsIFtcInBtXCIsIFwiY2FjaGVcIiwgXCJybVwiXSkpIHtcbiAgICBjb25zb2xlLndhcm4oXCJCdW46IENsZWFuIGNvbXBsZXRlXCIpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybihcIkJ1bjogQWxyZWFkeSBjbGVhblwiKTtcbiAgfVxufVxuIiwKICAgICJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY3JlYXRlUmVxdWlyZSB9IGZyb20gXCJtb2R1bGVcIjtcblxuLyoqXG4gKiBHZXQgdGhlIHBhdGggdG8gdGhlIG5vZGVfbW9kdWxlcy8uY2FjaGUgZm9sZGVyIGZvciBhIGdpdmVuIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIHBhY2thZ2VOYW1lIFJlcXVpcmVkIG5hbWUgb2YgdGhlIG5wbSBwYWNrYWdlIHRvIGlkZW50aWZ5XG4gKiBAcGFyYW0gZm9sZGVyIFJlcXVpcmVkIG5hbWUgb2YgdGhlIGZvbGRlciB0byBwbGFjZSBpbnNpZGUgdGhlIG5vZGVfbW9kdWxlcy8uY2FjaGUgZm9sZGVyXG4gKiBAcmV0dXJucyBGdWxsIHBhdGggdG8gdGhlIGNhY2hlIGZvbGRlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFja2FnZUNhY2hlUGF0aChcbiAgcGFja2FnZU5hbWU6IHN0cmluZyxcbiAgZm9sZGVyOiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHJlcXVpcmUgPSBjcmVhdGVSZXF1aXJlKGltcG9ydC5tZXRhLnVybCk7XG4gIGNvbnN0IG1vZHVsZVBhdGggPSByZXF1aXJlLnJlc29sdmUocGFja2FnZU5hbWUpO1xuXG4gIC8vIEdldCBwdXBwZXRlZXIncyBub2RlX21vZHVsZSBwYXRoXG4gIGNvbnN0IHBhcnRzID0gbW9kdWxlUGF0aC5zcGxpdChcIm5vZGVfbW9kdWxlc1wiKTtcbiAgY29uc3QgbW9kdWxlUm9vdCA9IHBhcnRzWzBdO1xuICBjb25zdCBtb2R1bGVEaXIgPSBwYXJ0c1sxXS5zcGxpdChwYXRoLnNlcClbMV07XG5cbiAgLy8gQ3JlYXRlIGEgcGF0aCB0byB0aGUgZGVzaXJlZCBjYWNoZSBsb2NhdGlvblxuICBjb25zdCBtb2R1bGVDYWNoZVBhdGggPSBwYXRoLmpvaW4oXG4gICAgbW9kdWxlUm9vdCxcbiAgICBcIm5vZGVfbW9kdWxlc1wiLFxuICAgIG1vZHVsZURpcixcbiAgICBcIm5vZGVfbW9kdWxlc1wiLFxuICAgIFwiLmNhY2hlXCIsXG4gICAgZm9sZGVyXG4gICk7XG5cbiAgcmV0dXJuIG1vZHVsZUNhY2hlUGF0aDtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB1cmwgZnJvbSBcInVybFwiO1xuaW1wb3J0IHsgZ2V0UGFja2FnZUNhY2hlUGF0aCB9IGZyb20gXCIuLi8uLi9saWIvdXRpbC9wYWNrYWdlLWNhY2hlLXBhdGguanNcIjtcbmltcG9ydCB7IGdpdEhhc0NoYW5nZXMgfSBmcm9tIFwiLi4vLi4vbGliL2dpdC9naXQtaGFzLWNoYW5nZXMuanNcIjtcblxuY29uc3QgX19kaXJuYW1lID0gdXJsLmZpbGVVUkxUb1BhdGgobmV3IFVSTChcIi5cIiwgaW1wb3J0Lm1ldGEudXJsKSk7XG5cbi8qKlxuICogVG8gb3BlbiB1cCBnaXRsYWIgbWVyZ2UgcmVxdWVzdCwgd2UgbmVlZCB0byBmZXRjaCB0aGUgcHJvamVjdCBJRC4gVGhlIHByb2plY3RcbiAqIElEIGlzIGF2YWlsYWJsZSBvbiB0aGUgYm9keSBvZiB0aGUgcGFnZSBsb2FkZWQgZm9yIHRoZSByZXBvLlxuICovXG5hc3luYyBmdW5jdGlvbiBvcGVuR2l0bGFiUFIoXG4gIHJlcG9Vcmw6IHN0cmluZyxcbiAgcmVsZWFzZVZlcnNpb246IHN0cmluZyxcbiAgbWFzdGVyQnJhbmNoOiBzdHJpbmdcbikge1xuICBjb25zdCBwdXBwZXRlZXIgPSBhd2FpdCBpbXBvcnQoXCJwdXBwZXRlZXJcIik7XG4gIGNvbnN0IGNhY2hlUGF0aCA9IGF3YWl0IGdldFBhY2thZ2VDYWNoZVBhdGgoXCJwdXBwZXRlZXJcIiwgXCJwci1yZWxlYXNlXCIpO1xuICBjb25zdCBicm93c2VyID0gYXdhaXQgcHVwcGV0ZWVyLmxhdW5jaCh7XG4gICAgLy8gSWYgc2hvd0xvZ0luLCB0aGVuIHdlIG11c3QgcHJlc2VudCB0aGUgYnJvd3NlciBzbyB0aGUgdXNlciBjYW4gZW50ZXJcbiAgICAvLyB0aGVpciBjcmVkZW50aWFscy5cbiAgICBoZWFkbGVzczogZmFsc2UsXG4gICAgdXNlckRhdGFEaXI6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIGNhY2hlUGF0aCksXG4gICAgZGVmYXVsdFZpZXdwb3J0OiBudWxsLFxuICB9KTtcblxuICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG4gIGNvbnNvbGUud2FybihcIk9wZW5pbmcgcHJvamVjdCB1cmwuLi5cIik7XG4gIGF3YWl0IHBhZ2UuZ290byhyZXBvVXJsKTtcblxuICAvLyBUaGUgcHJvamVjdCBJRCBpcyBsb2NhdGVkIG9uIHRoZSBib2R5IHdpdGhpbiBhdHRyaWJ1dGVcbiAgLy8gZGF0YS1wcm9qZWN0LWlkPVwiNzIyXCJcbiAgY29uc3QgcHJvamVjdElkID0gYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PlxuICAgIGRvY3VtZW50LmJvZHkuZ2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0LWlkXCIpXG4gICk7XG5cbiAgaWYgKCFwcm9qZWN0SWQpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyBwcm9qZWN0IGlkIGZvdW5kLCBVc2VyIGxvZ2luIHJlcXVpcmVkLi4uXCIpO1xuICAgIGxldCBzaG91bGRFeGl0ID0gdHJ1ZTtcblxuICAgIGJyb3dzZXIub24oXCJkaXNjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgICAgaWYgKCFzaG91bGRFeGl0KSByZXR1cm47XG4gICAgICBjb25zb2xlLndhcm4oXCJCcm93c2VyIHdhcyBjbG9zZWQgb3IgY3Jhc2hlZC4gVHJ5IHRoZSBjb21tYW5kIGFnYWluLlwiKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KTtcblxuICAgIGF3YWl0IHBhZ2UuZ290byhyZXBvVXJsKTtcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JGdW5jdGlvbihcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdElkID0gZG9jdW1lbnQ/LmJvZHk/LmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdC1pZFwiKTtcbiAgICAgICAgcmV0dXJuIHByb2plY3RJZCAhPT0gbnVsbCAmJiBwcm9qZWN0SWQgIT09IHZvaWQgMDtcbiAgICAgIH0sXG4gICAgICB7IHRpbWVvdXQ6IDAgfVxuICAgICk7XG5cbiAgICBhd2FpdCBwYWdlLmNsb3NlKCk7XG4gICAgc2hvdWxkRXhpdCA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGF3YWl0IHBhZ2UuY2xvc2UoKTtcbiAgfVxuXG4gIGNvbnNvbGUud2FybihcIlByb2plY3QgSUQgZm91bmQ6XCIsIHByb2plY3RJZCwgXCJcXG5PcGVuaW5nIG1lcmdlIHJlcXVlc3QuLi5cIik7XG5cbiAgY29uc3QgbWFrZVBSID0gYXN5bmMgKFxuICAgIHNvdXJjZTogc3RyaW5nLFxuICAgIHRhcmdldDogc3RyaW5nLFxuICAgIGluY2x1ZGVVdGY/OiBib29sZWFuXG4gICkgPT4ge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCBicm93c2VyLm5ld1BhZ2UoKTtcblxuICAgIC8vIFVzZSB0aGUgcHJvcGVyIFVSTCBzdHJ1Y3R1cmUgdG8gZ2VuZXJhdGUgdGhlIHBhZ2Ugd2l0aCB0aGUgY29ycmVjdCBtZXJnZSByZXF1ZXN0XG4gICAgYXdhaXQgcGFnZS5nb3RvKFxuICAgICAgYCR7cmVwb1VybH0vLS9tZXJnZV9yZXF1ZXN0cy9uZXc/JHtcbiAgICAgICAgaW5jbHVkZVV0ZiA/IFwidXRmOD0lRTIlOUMlOTMmXCIgOiBcIlwiXG4gICAgICB9bWVyZ2VfcmVxdWVzdCU1QnNvdXJjZV9wcm9qZWN0X2lkJTVEPSR7cHJvamVjdElkfSZtZXJnZV9yZXF1ZXN0JTVCc291cmNlX2JyYW5jaCU1RD0ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgc291cmNlXG4gICAgICApfSZtZXJnZV9yZXF1ZXN0JTVCdGFyZ2V0X3Byb2plY3RfaWQlNUQ9JHtwcm9qZWN0SWR9Jm1lcmdlX3JlcXVlc3QlNUJ0YXJnZXRfYnJhbmNoJTVEPSR7dGFyZ2V0fWBcbiAgICApO1xuXG4gICAgLy8gV2FpdCBmb3IgdGhlIGVsZW1lbnRzIHRvIGJlIGF2YWlsYWJsZSB0byBtYW5pcHVsYXRlXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yRnVuY3Rpb24oXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21lcmdlX3JlcXVlc3RfdGl0bGVcIik7XG4gICAgICAgIHJldHVybiBub2RlICE9PSBudWxsICYmIG5vZGUgIT09IHZvaWQgMDtcbiAgICAgIH0sXG4gICAgICB7IHRpbWVvdXQ6IDAgfVxuICAgICk7XG5cbiAgICAvLyBQb3B1bGF0ZSB0aGUgZWxlbWVudHMgd2l0aCBleHBlY3RlZCBjb25maWd1cmF0aW9uXG4gICAgYXdhaXQgcGFnZS5ldmFsdWF0ZSgocmVsZWFzZVZlcnNpb24pID0+IHtcbiAgICAgIC8vIFBvcHVsYXRlIHRoZSB0aXRsZVxuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICAgICBcIiNtZXJnZV9yZXF1ZXN0X3RpdGxlXCJcbiAgICAgICk7XG4gICAgICBpZiAobm9kZSkgbm9kZS52YWx1ZSA9IGBSZWxlYXNlICR7cmVsZWFzZVZlcnNpb259YDtcblxuICAgICAgLy8gUG9wdWxhdGUgZGVzY3JpcHRpb25cbiAgICAgIG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICAgICBcIiNtZXJnZV9yZXF1ZXN0X2Rlc2NyaXB0aW9uXCJcbiAgICAgICk7XG4gICAgICBpZiAobm9kZSkgbm9kZS52YWx1ZSA9IGBSZWxlYXNlICR7cmVsZWFzZVZlcnNpb259YDtcblxuICAgICAgLy8gVW5jaGVjayBkZWxldGUgYnJhbmNoXG4gICAgICBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAgICAgXCIjbWVyZ2VfcmVxdWVzdF9mb3JjZV9yZW1vdmVfc291cmNlX2JyYW5jaFwiXG4gICAgICApO1xuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgbm9kZS5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgIG5vZGUudmFsdWUgPSBcIjBcIjtcbiAgICAgIH1cbiAgICB9LCByZWxlYXNlVmVyc2lvbik7XG5cbiAgICAvLyBXYWl0IGZvciB0aGUgcGFnZSB0byBjbG9zZVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiB7XG4gICAgICBwYWdlLm9uKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICByKHZvaWQgMCk7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkdpdGxhYiB0aWNrZXQgcHJvY2VzcyBmaW5pc2hlZFxcblxcblwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFdhaXQgZm9yIGJvdGggUFJzIHRvIGNvbWUgdG8gY29tcGxldGlvblxuICBjb25zb2xlLndhcm4oXCJcXG5cXG5XYWl0aW5nIGZvciBicm93c2VyIHdpbmRvd3MgdG8gYmUgY2xvc2VkLi4uXFxuXFxuXCIpO1xuICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgbWFrZVBSKFwicmVsZWFzZVwiLCBcImRldlwiKSxcbiAgICBtYWtlUFIoXCJyZWxlYXNlXCIsIG1hc3RlckJyYW5jaCksXG4gIF0pO1xuXG4gIC8vIENsb3NlIGFmdGVyIGFsbCBwYWdlcyBjbG9zZWRcbiAgYnJvd3Nlci5jbG9zZSgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBvcGVuR2l0UFIoXG4gIHJlcG9Vcmw6IHN0cmluZyxcbiAgcmVsZWFzZVZlcnNpb246IHN0cmluZyxcbiAgbWFzdGVyQnJhbmNoOiBzdHJpbmcsXG4gIHNob3dMb2dJbj86IGJvb2xlYW5cbikge1xuICBjb25zdCBwdXBwZXRlZXIgPSBhd2FpdCBpbXBvcnQoXCJwdXBwZXRlZXJcIik7XG4gIGNvbnN0IGNhY2hlUGF0aCA9IGF3YWl0IGdldFBhY2thZ2VDYWNoZVBhdGgoXCJwdXBwZXRlZXJcIiwgXCJwci1yZWxlYXNlXCIpO1xuICBsZXQgYnJvd3NlciA9IGF3YWl0IHB1cHBldGVlci5sYXVuY2goe1xuICAgIC8vIElmIHNob3dMb2dJbiwgdGhlbiB3ZSBtdXN0IHByZXNlbnQgdGhlIGJyb3dzZXIgc28gdGhlIHVzZXIgY2FuIGVudGVyXG4gICAgLy8gdGhlaXIgY3JlZGVudGlhbHMuXG4gICAgaGVhZGxlc3M6ICFzaG93TG9nSW4sXG4gICAgdXNlckRhdGFEaXI6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIGNhY2hlUGF0aCksXG4gICAgZGVmYXVsdFZpZXdwb3J0OiBudWxsLFxuICB9KTtcblxuICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG5cbiAgaWYgKHNob3dMb2dJbikge1xuICAgIGNvbnNvbGUud2FybihcIlVzZXIgbG9naW4gcmVxdWlyZWQuLi5cIik7XG4gICAgbGV0IHNob3VsZEV4aXQgPSB0cnVlO1xuXG4gICAgYnJvd3Nlci5vbihcImRpc2Nvbm5lY3RlZFwiLCAoKSA9PiB7XG4gICAgICBpZiAoIXNob3VsZEV4aXQpIHJldHVybjtcbiAgICAgIGNvbnNvbGUud2FybihcIkJyb3dzZXIgd2FzIGNsb3NlZCBvciBjcmFzaGVkLiBUcnkgdGhlIGNvbW1hbmQgYWdhaW4uXCIpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbG9naW5VcmwgPSBcImh0dHBzOi8vZ2l0aHViLmNvbS9sb2dpblwiO1xuICAgIGNvbnNvbGUud2FybihcIk9wZW5pbmcgZ2l0aHViIGxvZ2luIHBhZ2U6IFwiLCBsb2dpblVybCk7XG4gICAgYXdhaXQgcGFnZS5nb3RvKGxvZ2luVXJsKTtcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JGdW5jdGlvbihcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdElkID0gZG9jdW1lbnQ/LmJvZHlcbiAgICAgICAgICA/LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpXG4gICAgICAgICAgPy5zcGxpdChcIiBcIilcbiAgICAgICAgICAuZmluZCgoYykgPT4gYy5zdGFydHNXaXRoKFwibG9nZ2VkLWluXCIpKTtcbiAgICAgICAgcmV0dXJuIHByb2plY3RJZCAhPT0gbnVsbCAmJiBwcm9qZWN0SWQgIT09IHZvaWQgMDtcbiAgICAgIH0sXG4gICAgICB7IHRpbWVvdXQ6IDAgfVxuICAgICk7XG5cbiAgICBzaG91bGRFeGl0ID0gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKFwiT3BlbmluZyBwcm9qZWN0IHVybDogXCIsIHJlcG9VcmwpO1xuICAgIGF3YWl0IHBhZ2UuZ290byhyZXBvVXJsKTtcbiAgfVxuXG4gIC8vIFRoZSBwcm9qZWN0IElEIGlzIGxvY2F0ZWQgb24gdGhlIGJvZHkgd2l0aGluIGF0dHJpYnV0ZVxuICAvLyBkYXRhLXByb2plY3QtaWQ9XCI3MjJcIlxuICBjb25zb2xlLndhcm4oXCJDaGVja2luZyBmb3IgbG9nZ2VkLWluIGF0dHJpYnV0ZSBvbiBib2R5Li4uXCIpO1xuICBjb25zdCBsb2dnZWRJbiA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwibG9nZ2VkLWluIGNoZWNrOlwiLFxuICAgICAgZG9jdW1lbnQ/LmJvZHlcbiAgICAgICAgPy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKVxuICAgICAgICA/LnNwbGl0KFwiIFwiKVxuICAgICAgICAuZmluZCgoYykgPT4gYy5zdGFydHNXaXRoKFwibG9nZ2VkLWluXCIpKVxuICAgICk7XG4gICAgcmV0dXJuIGRvY3VtZW50Py5ib2R5XG4gICAgICA/LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpXG4gICAgICA/LnNwbGl0KFwiIFwiKVxuICAgICAgLmZpbmQoKGMpID0+IGMuc3RhcnRzV2l0aChcImxvZ2dlZC1pblwiKSk7XG4gIH0pO1xuXG4gIGNvbnNvbGUud2FybihcIkxvZ2dpbiBpbiBjaGVjazpcIiwgbG9nZ2VkSW4pO1xuXG4gIC8vIElGIHdlIGF0dGVtcHRlZCBhIGxvZ2luIEFORCB0aGVyZSBpcyBubyBwcm9qZWN0IElEIGF2YWlsYWJsZSwgdGhlbiB3ZSBhcmVcbiAgLy8gdW5hYmxlIHRvIGRldGVybWluZSB0aGUgcHJvamVjdCBJRC5cbiAgaWYgKCFsb2dnZWRJbiAmJiBzaG93TG9nSW4pIHtcbiAgICBhd2FpdCBicm93c2VyLmNsb3NlKCk7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBsb2cgaW4gdGhlIHVzZXIgZm9yIGdpdGh1Yi5cIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gSWYgd2UgY291bGQgbm90IGdldCBhIHByb2plY3QgSUQsIHByZXNlbnQgYSBub24taGVhZGxlc3MgYnJvd3NlciB0byBhbGxvd1xuICAvLyB0aGUgdXNlciB0byBsb2dpbi5cbiAgZWxzZSBpZiAoIWxvZ2dlZEluKSB7XG4gICAgY29uc29sZS53YXJuKFwiTG9nZ2VkLWluIG5vdCBmb3VuZCBvbiBib2R5LCBsb2dpbiBtaWdodCBiZSBuZWVkZWQuLi5cIik7XG4gICAgYXdhaXQgYnJvd3Nlci5jbG9zZSgpO1xuICAgIG9wZW5HaXRQUihyZXBvVXJsLCByZWxlYXNlVmVyc2lvbiwgbWFzdGVyQnJhbmNoLCB0cnVlKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBMb2cgaW4gdmFsaWRhdGVkLCBjbG9zZSB0aGUgbG9nIGluIGJyb3dzZXIgYXMgaXQgbWF5IGJlIGluIGhlYWRsZXNzIG1vZGVcbiAgZWxzZSB7XG4gICAgYnJvd3Nlci5jbG9zZSgpO1xuICB9XG5cbiAgY29uc3QgcHVwcGV0ZWVyRGF0YSA9IHtcbiAgICBoZWFkbGVzczogZmFsc2UsXG4gICAgdXNlckRhdGFEaXI6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIGNhY2hlUGF0aCksXG4gICAgZGVmYXVsdFZpZXdwb3J0OiBudWxsLFxuICB9O1xuXG4gIC8vIFJlb3BlbiB0aGUgYnJvd3NlciBidXQgZW5zdXJlIHdlJ3JlIG5vdCBoZWFkbGVzcyBhbnltb3JlXG4gIGJyb3dzZXIgPSBhd2FpdCBwdXBwZXRlZXIubGF1bmNoKHB1cHBldGVlckRhdGEpO1xuXG4gIGNvbnN0IG1ha2VQUiA9IGFzeW5jIChzb3VyY2U6IHN0cmluZywgdGFyZ2V0OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vRGluaWRlbi9zaW1wbGUtZGF0YS1wcm92aWRlci9jb21wYXJlL21hc3Rlci4uLnJlbGVhc2VcbiAgICAvLyBVc2UgdGhlIHByb3BlciBVUkwgc3RydWN0dXJlIHRvIGdlbmVyYXRlIHRoZSBwYWdlIHdpdGggdGhlIGNvcnJlY3QgbWVyZ2UgcmVxdWVzdFxuICAgIGF3YWl0IHBhZ2UuZ290byhgJHtyZXBvVXJsfS9jb21wYXJlLyR7dGFyZ2V0fS4uLiR7c291cmNlfWApO1xuXG4gICAgLy8gV2FpdCBmb3IgdGhlIGVsZW1lbnRzIHRvIGJlIGF2YWlsYWJsZSB0byBtYW5pcHVsYXRlXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yRnVuY3Rpb24oKCkgPT4ge1xuICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEJ1dHRvbkVsZW1lbnQ+KFxuICAgICAgICBcIiNyZXBvLWNvbnRlbnQtcGpheC1jb250YWluZXIgPiBkaXYgPiBkaXYuanMtZGV0YWlscy1jb250YWluZXIuRGV0YWlscy5qcy1jb21wYXJlLXByID4gZGl2ID4gYnV0dG9uXCJcbiAgICAgICk7XG4gICAgICBub2RlPy5jbGljaygpO1xuICAgICAgcmV0dXJuIG5vZGUgIT09IG51bGwgJiYgbm9kZSAhPT0gdm9pZCAwO1xuICAgIH0pO1xuXG4gICAgLy8gQ2xpY2sgdGhlIGNyZWF0ZSBQUiBidXR0b24gdG8gb3BlbiBuZXh0IGRpYWxvZ1xuICAgIC8vIGF3YWl0IHBhZ2UuZXZhbHVhdGUoYXN5bmMgKCkgPT4ge1xuICAgIC8vICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JlcG8tY29udGVudC1wamF4LWNvbnRhaW5lciA+IGRpdiA+IGRpdi5qcy1kZXRhaWxzLWNvbnRhaW5lci5EZXRhaWxzLmpzLWNvbXBhcmUtcHIgPiBkaXYgPiBidXR0b24nKS5jbGljaygpO1xuICAgIC8vIH0pO1xuXG4gICAgLy8gUG9wdWxhdGUgdGhlIGVsZW1lbnRzIHdpdGggZXhwZWN0ZWQgY29uZmlndXJhdGlvblxuICAgIGF3YWl0IHBhZ2UuZXZhbHVhdGUoYXN5bmMgKHJlbGVhc2VWZXJzaW9uKSA9PiB7XG4gICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXG4gICAgICAgIFwiI3B1bGxfcmVxdWVzdF90aXRsZVwiXG4gICAgICApO1xuICAgICAgaWYgKG5vZGUpIG5vZGUudmFsdWUgPSBgUmVsZWFzZSAke3JlbGVhc2VWZXJzaW9ufWA7XG4gICAgICBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAgICAgJ1tuYW1lPVwicHVsbF9yZXF1ZXN0W2JvZHldXCJdJ1xuICAgICAgKTtcbiAgICAgIGlmIChub2RlKSBub2RlLnZhbHVlID0gYFJlbGVhc2UgJHtyZWxlYXNlVmVyc2lvbn1gO1xuICAgIH0sIHJlbGVhc2VWZXJzaW9uKTtcblxuICAgIC8vIFdhaXQgZm9yIHRoZSBwYWdlIHRvIGNsb3NlXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHtcbiAgICAgIHBhZ2Uub24oXCJjbG9zZVwiLCAoKSA9PiB7XG4gICAgICAgIHIodm9pZCAwKTtcbiAgICAgICAgY29uc29sZS53YXJuKFwiR2l0aHViIHRpY2tldCBwcm9jZXNzIGZpbmlzaGVkXFxuXFxuXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gV2FpdCBmb3IgYm90aCBQUnMgdG8gY29tZSB0byBjb21wbGV0aW9uXG4gIGNvbnNvbGUud2FybihcIlxcblxcbldhaXRpbmcgZm9yIGJyb3dzZXIgd2luZG93cyB0byBiZSBjbG9zZWQuLi5cXG5cXG5cIik7XG4gIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBtYWtlUFIoXCJyZWxlYXNlXCIsIFwiZGV2XCIpLFxuICAgIG1ha2VQUihcInJlbGVhc2VcIiwgbWFzdGVyQnJhbmNoKSxcbiAgXSk7XG5cbiAgLy8gQ2xvc2UgYWZ0ZXIgYWxsIHBhZ2VzIGNsb3NlZFxuICBicm93c2VyLmNsb3NlKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG9wZW5BenVyZVBSKFxuICByZXBvVXJsOiBzdHJpbmcsXG4gIHJlbGVhc2VWZXJzaW9uOiBzdHJpbmcsXG4gIG1hc3RlckJyYW5jaDogc3RyaW5nLFxuICBzaG93TG9nSW4/OiBib29sZWFuXG4pIHtcbiAgY29uc3QgcHVwcGV0ZWVyID0gYXdhaXQgaW1wb3J0KFwicHVwcGV0ZWVyXCIpO1xuICAvLyBFeGFtcGxlIFVSTFxuICAvLyBodHRwczovL2Rldi5henVyZS5jb20vcmV0aXJlb25lL19naXQvUmV0aXJlT25lJTIwUklQUC9wdWxscmVxdWVzdGNyZWF0ZT9zb3VyY2VSZXBvc2l0b3J5SWQ9NDA1MDc0YmItYjFiMS00ZmVhLTgzNTItYmQ0ZDc4ODhiMWFkJnRhcmdldFJlcG9zaXRvcnlJZD00MDUwNzRiYi1iMWIxLTRmZWEtODM1Mi1iZDRkNzg4OGIxYWQmc291cmNlUmVmPXJlbGVhc2UmdGFyZ2V0UmVmPW1haW5cbiAgY29uc3QgY2FjaGVQYXRoID0gYXdhaXQgZ2V0UGFja2FnZUNhY2hlUGF0aChcInB1cHBldGVlclwiLCBcInByLXJlbGVhc2VcIik7XG4gIGxldCBicm93c2VyID0gYXdhaXQgcHVwcGV0ZWVyLmxhdW5jaCh7XG4gICAgLy8gSWYgc2hvd0xvZ0luLCB0aGVuIHdlIG11c3QgcHJlc2VudCB0aGUgYnJvd3NlciBzbyB0aGUgdXNlciBjYW4gZW50ZXJcbiAgICAvLyB0aGVpciBjcmVkZW50aWFscy5cbiAgICBoZWFkbGVzczogIXNob3dMb2dJbixcbiAgICB1c2VyRGF0YURpcjogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgY2FjaGVQYXRoKSxcbiAgICBkZWZhdWx0Vmlld3BvcnQ6IG51bGwsXG4gIH0pO1xuXG4gIGNvbnN0IHBhZ2UgPSBhd2FpdCBicm93c2VyLm5ld1BhZ2UoKTtcblxuICBpZiAoc2hvd0xvZ0luKSB7XG4gICAgY29uc29sZS53YXJuKFwiVXNlciBsb2dpbiByZXF1aXJlZC4uLlwiKTtcbiAgICBsZXQgc2hvdWxkRXhpdCA9IHRydWU7XG5cbiAgICBicm93c2VyLm9uKFwiZGlzY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICAgIGlmICghc2hvdWxkRXhpdCkgcmV0dXJuO1xuICAgICAgY29uc29sZS53YXJuKFwiQnJvd3NlciB3YXMgY2xvc2VkIG9yIGNyYXNoZWQuIFRyeSB0aGUgY29tbWFuZCBhZ2Fpbi5cIik7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBsb2dpblVybCA9IHJlcG9Vcmw7XG4gICAgY29uc29sZS53YXJuKFwiT3BlbmluZyBhenVyZSByZXBvIGxvZ2luIHBhZ2U6IFwiLCBsb2dpblVybCk7XG4gICAgYXdhaXQgcGFnZS5nb3RvKGxvZ2luVXJsKTtcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JGdW5jdGlvbihcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3QgbXNJZCA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5tc2FtZWlkO1xuICAgICAgICByZXR1cm4gbXNJZCAhPT0gbnVsbCAmJiBtc0lkICE9PSB2b2lkIDA7XG4gICAgICB9LFxuICAgICAgeyB0aW1lb3V0OiAwIH1cbiAgICApO1xuXG4gICAgc2hvdWxkRXhpdCA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybihcIk9wZW5pbmcgcHJvamVjdCB1cmw6IFwiLCByZXBvVXJsKTtcbiAgICBhd2FpdCBwYWdlLmdvdG8ocmVwb1VybCk7XG4gIH1cblxuICAvLyBUaGUgbXNpZCBpcyBsb2NhdGVkIGluIHNlc3Npb25TdG9yYWdlIGF0IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5tc2FtZWlkXG4gIGNvbnNvbGUud2FybihcIkNoZWNraW5nIGZvciBsb2dnZWQtaW4gYXR0cmlidXRlIG9uIGJvZHkuLi5cIik7XG4gIGNvbnN0IGxvZ2dlZEluID0gYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKFwibG9nZ2VkLWluIGNoZWNrOlwiLCB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UubXNhbWVpZCk7XG4gICAgcmV0dXJuIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5tc2FtZWlkO1xuICB9KTtcblxuICBjb25zb2xlLndhcm4oXCJMb2dnaW4gaW4gY2hlY2s6XCIsIGxvZ2dlZEluKTtcblxuICAvLyBJRiB3ZSBhdHRlbXB0ZWQgYSBsb2dpbiBBTkQgdGhlcmUgaXMgbm8gbXMgaWQgYXZhaWxhYmxlLCB0aGVuIHdlIGFyZVxuICAvLyB1bmFibGUgdG8gZGV0ZXJtaW5lIHRoZSBtcyBpZC5cbiAgaWYgKCFsb2dnZWRJbiAmJiBzaG93TG9nSW4pIHtcbiAgICBhd2FpdCBicm93c2VyLmNsb3NlKCk7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBsb2cgaW4gdGhlIHVzZXIgZm9yIGF6dXJlLlwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBJZiB3ZSBjb3VsZCBub3QgZ2V0IGEgbXNpZCwgcHJlc2VudCBhIG5vbi1oZWFkbGVzcyBicm93c2VyIHRvIGFsbG93XG4gIC8vIHRoZSB1c2VyIHRvIGxvZ2luLlxuICBlbHNlIGlmICghbG9nZ2VkSW4pIHtcbiAgICBjb25zb2xlLndhcm4oXCJNUyBpZCBub3QgZm91bmQsIGxvZ2luIG1pZ2h0IGJlIG5lZWRlZC4uLlwiKTtcbiAgICBhd2FpdCBicm93c2VyLmNsb3NlKCk7XG4gICAgb3BlbkdpdFBSKHJlcG9VcmwsIHJlbGVhc2VWZXJzaW9uLCBtYXN0ZXJCcmFuY2gsIHRydWUpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIExvZyBpbiB2YWxpZGF0ZWQsIGNsb3NlIHRoZSBsb2cgaW4gYnJvd3NlciBhcyBpdCBtYXkgYmUgaW4gaGVhZGxlc3MgbW9kZVxuICBlbHNlIHtcbiAgICBicm93c2VyLmNsb3NlKCk7XG4gIH1cblxuICAvLyBSZW9wZW4gdGhlIGJyb3dzZXIgYnV0IGVuc3VyZSB3ZSdyZSBub3QgaGVhZGxlc3MgYW55bW9yZVxuICBjb25zdCBwdXBwZXRlZXJEYXRhID0ge1xuICAgIGhlYWRsZXNzOiBmYWxzZSxcbiAgICB1c2VyRGF0YURpcjogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgY2FjaGVQYXRoKSxcbiAgICBkZWZhdWx0Vmlld3BvcnQ6IG51bGwsXG4gIH07XG5cbiAgYnJvd3NlciA9IGF3YWl0IHB1cHBldGVlci5sYXVuY2gocHVwcGV0ZWVyRGF0YSk7XG5cbiAgLy8gTWFrZSBhIGNvbW1vbiBtZXRob2QgZm9yIGxhdW5jaGluZyBhIFBSXG4gIGNvbnN0IG1ha2VQUiA9IGFzeW5jIChzb3VyY2U6IHN0cmluZywgdGFyZ2V0OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG5cbiAgICAvLyBVc2UgdGhlIHByb3BlciBVUkwgc3RydWN0dXJlIHRvIGdlbmVyYXRlIHRoZSBwYWdlIHdpdGggdGhlIGNvcnJlY3QgbWVyZ2UgcmVxdWVzdFxuICAgIGF3YWl0IHBhZ2UuZ290byhgJHtyZXBvVXJsfSZzb3VyY2VSZWY9JHtzb3VyY2V9JnRhcmdldFJlZj0ke3RhcmdldH1gKTtcblxuICAgIC8vIFdhaXQgZm9yIHRoZSBlbGVtZW50cyB0byBiZSBhdmFpbGFibGUgdG8gbWFuaXB1bGF0ZVxuICAgIGF3YWl0IHBhZ2Uud2FpdEZvckZ1bmN0aW9uKCgpID0+IHtcbiAgICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxCdXR0b25FbGVtZW50PihcImJ1dHRvbi5wcmltYXJ5XCIpO1xuICAgICAgcmV0dXJuIG5vZGUgIT09IG51bGwgJiYgbm9kZSAhPT0gdm9pZCAwO1xuICAgIH0pO1xuXG4gICAgLy8gUG9wdWxhdGUgdGhlIGVsZW1lbnRzIHdpdGggZXhwZWN0ZWQgY29uZmlndXJhdGlvblxuICAgIGF3YWl0IHBhZ2UuZXZhbHVhdGUoYXN5bmMgKHJlbGVhc2VWZXJzaW9uKSA9PiB7XG4gICAgICAvLyBHZXQgdGhlIG5vZGUgd2l0aCB0YWIgaW5kZXggMCAodGhlIGlkIG9uIHRoZSBwYWdlIGNoYW5nZXMgZWFjaCB0aW1lKVxuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICAgICAnW2FyaWEtbGFiZWw9XCJFbnRlciBhIHRpdGxlXCJdJ1xuICAgICAgKTtcbiAgICAgIGlmIChub2RlKSBub2RlLnZhbHVlID0gYFJlbGVhc2UgJHtyZWxlYXNlVmVyc2lvbn1gO1xuXG4gICAgICAvL1xuICAgICAgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXG4gICAgICAgICdbYXJpYS1sYWJlbD1cIkRlc2NyaXB0aW9uXCJdJ1xuICAgICAgKTtcbiAgICAgIGlmIChub2RlKSBub2RlLnZhbHVlID0gYFJlbGVhc2UgJHtyZWxlYXNlVmVyc2lvbn1gO1xuICAgIH0sIHJlbGVhc2VWZXJzaW9uKTtcblxuICAgIC8vIFdhaXQgZm9yIHRoZSBwYWdlIHRvIGNsb3NlXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHtcbiAgICAgIHBhZ2Uub24oXCJjbG9zZVwiLCAoKSA9PiB7XG4gICAgICAgIHIodm9pZCAwKTtcbiAgICAgICAgY29uc29sZS53YXJuKFwiQXp1cmUgcHJvamVjdCB0aWNrZXQgcHJvY2VzcyBmaW5pc2hlZFxcblxcblwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFdhaXQgZm9yIGJvdGggUFJzIHRvIGNvbWUgdG8gY29tcGxldGlvblxuICBjb25zb2xlLndhcm4oXCJcXG5cXG5XYWl0aW5nIGZvciBicm93c2VyIHdpbmRvd3MgdG8gYmUgY2xvc2VkLi4uXFxuXFxuXCIpO1xuICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgbWFrZVBSKFwicmVsZWFzZVwiLCBcImRldlwiKSxcbiAgICBtYWtlUFIoXCJyZWxlYXNlXCIsIG1hc3RlckJyYW5jaCksXG4gIF0pO1xuXG4gIC8vIENsb3NlIGFmdGVyIGFsbCBwYWdlcyBjbG9zZWRcbiAgYnJvd3Nlci5jbG9zZSgpO1xufVxuXG4vKipcbiAqIFRoaXMgY29tbWFuZCBpcyBpbnRlbmRlZCB0byB3b3JrIHdpdGggdGhlIGN1cnJlbnQgYnJhbmNoIElGIHRoZSBicmFuY2ggaGFzXG4gKiBiZWVuIGNyZWF0ZWQgdXNpbmcgdGhlIFwibnBtIHJ1biB0aWNrZXRcIiBjb21tYW5kLlxuICpcbiAqIFRoaXMgd2lsbCBsb29rIGludG8gdGhlIGN1cnJlbnQgYnJhbmNoIGFuZCBmaW5kIHRoZSBjb21taXQgdGhhdCBjb250YWlucyB0aGVcbiAqIHRpY2tldCBicmFuY2ggbmFtZSBhbmQgdGlja2V0IFVSTC4gVGhpcyB3aWxsIGdlbmVyYXRlIGEgY29tbWl0IGFuZCBtZXJnZVxuICogcmVxdWVzdCB0aGF0IGNvbnRhaW5zIHRoZSB0aWNrZXQgdGhhdCBpcyBsaW5rZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bihcbiAgcmVwb1VybDogc3RyaW5nLFxuICByZXBvVHlwZTogc3RyaW5nLFxuICBtYXN0ZXJCcmFuY2ggPSBcIm1hc3RlclwiLFxuICAuLi5fYXJnczogYW55W11cbikge1xuICAvLyBWYWxpZGF0ZSB3ZSBoYXZlIGltcGxlbWVudGVkIGEgc3RyYXRlZ3kgZm9yIGEgZ2l2ZW4gcmVwbyB0eXBlLlxuICBjb25zdCB2YWxpZFJlcG9zID0gbmV3IFNldChbXCJnaXRsYWJcIiwgXCJnaXRcIiwgXCJnaXRodWJcIiwgXCJhenVyZVwiXSk7XG5cbiAgaWYgKCF2YWxpZFJlcG9zLmhhcyhyZXBvVHlwZSkpIHtcbiAgICBjb25zb2xlLmVycm9yKGBVbnN1cHBvcnRlZCByZXBvIHR5cGU6ICR7cmVwb1R5cGV9YCk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gV2UgY2FuIG9ubHkgZG8gdGhpcyBvcGVyYXRpb24gaWYgdGhlcmUgaXMgbm90aGluZyB0byBjb21taXQgb3IgcHVzaFxuICAvLyBUaGlzIG9ubHkgd29ya3MgaWYgbm8gY2hhbmdlcyBhcmUgcHJlc2VudFxuICBpZiAoYXdhaXQgZ2l0SGFzQ2hhbmdlcygpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiWW91IGhhdmUgdW5jb21taXR0ZWQgY2hhbmdlcyBvciB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgcHJvamVjdCBjYW4gbm90IGJlIGRldGVybWluZWQuIFBsZWFzZSBjb21taXQgb3Igc3Rhc2ggdGhlbSBiZWZvcmUgY29udGludWluZy5cIlxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gY29uc3QgY2hlY2tCcmFuY2ggPSBzaGVsbC5leGVjKFwiZ2l0IHN5bWJvbGljLXJlZiAtLXNob3J0IEhFQURcIiwgeyBzaWxlbnQ6IHRydWUgfSk7XG4gIC8vIGlmIChjaGVja0JyYW5jaCAhPT0gXCJyZWxlYXNlXCIpIHtcbiAgLy8gICBjb25zb2xlLmVycm9yKFwiWW91IG11c3QgYmUgb24gdGhlIHJlbGVhc2UgYnJhbmNoIHRvIGNyZWF0ZSBhIHJlbGVhc2UgUFJcIik7XG4gIC8vICAgcHJvY2Vzcy5leGl0KDEpO1xuICAvLyB9XG5cbiAgLy8gR2V0IHRoZSBjdXJyZW50IHByb2plY3QgdmVyc2lvbiBmcm9tIHRoZSBwYWNrYWdlLmpzb24gZmlsZVxuICBjb25zdCBwYWNrYWdlSnNvbiA9IGZzLnJlYWRKc29uU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICBjb25zdCB2ZXJzaW9uID0gcGFja2FnZUpzb24udmVyc2lvbjtcblxuICAvLyBOb3cgd2Ugb3BlbiB0aGUgdXJsIHRvIHRoZSBuZXcgbWVyZ2UgcmVxdWVzdFxuICBzd2l0Y2ggKHJlcG9UeXBlKSB7XG4gICAgY2FzZSBcImdpdGxhYlwiOlxuICAgICAgYXdhaXQgb3BlbkdpdGxhYlBSKHJlcG9VcmwsIHZlcnNpb24sIG1hc3RlckJyYW5jaCk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJnaXRcIjpcbiAgICBjYXNlIFwiZ2l0aHViXCI6XG4gICAgICBhd2FpdCBvcGVuR2l0UFIocmVwb1VybCwgdmVyc2lvbiwgbWFzdGVyQnJhbmNoKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcImF6dXJlXCI6XG4gICAgICBhd2FpdCBvcGVuQXp1cmVQUihyZXBvVXJsLCB2ZXJzaW9uLCBtYXN0ZXJCcmFuY2gpO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS53YXJuKFwiTm8gc3VwcG9ydGVkIHJlcG8gdHlwZSBmb3VuZFwiKTtcbiAgfVxufVxuIiwKICAgICIjIS91c3IvYmluL2VudiBidW5cbmltcG9ydCAqIGFzIGNvbW1hbmRlciBmcm9tIFwiY29tbWFuZGVyXCI7XG5pbXBvcnQgQXV0b0NvbXBsZXRlUHJvbXB0IGZyb20gXCJpbnF1aXJlci1hdXRvY29tcGxldGUtcHJvbXB0XCI7XG5pbXBvcnQgaW5xdWlyZXIgZnJvbSBcImlucXVpcmVyXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHlhcmdzIGZyb20gXCJ5YXJnc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi9saWIvdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgY29uZmlnRW52IH0gZnJvbSBcIi4vbGliL3V0aWwvY29uZmlnLWVudi5qc1wiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb24gfSBmcm9tIFwiLi9saWIvdXRpbC9kZXNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgZW5zdXJlRGVwZW5kZW5jaWVzIH0gZnJvbSBcIi4vY29tbWFuZHMvZW5zdXJlLWRlcGVuZGVuY2llcy5qc1wiO1xuaW1wb3J0IHsgZXhlY0luc3RhbGwgfSBmcm9tIFwiLi9saWIvZXhlYy9leGVjLWluc3RhbGwuanNcIjtcblxuaW5xdWlyZXIucmVnaXN0ZXJQcm9tcHQoXCJhdXRvY29tcGxldGVcIiwgQXV0b0NvbXBsZXRlUHJvbXB0KTtcblxuY29uc3QgeyBDb21tYW5kIH0gPSBjb21tYW5kZXI7XG5jb25zdCBwcm9ncmFtOiBhbnkgPSBuZXcgQ29tbWFuZCgpO1xuY29uc3Qgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG5mdW5jdGlvbiBnZXRPcHRpb25zKCkge1xuICBvcHRpb25zLmRlYnVnID0gcHJvZ3JhbS5kZWJ1ZztcbiAgb3B0aW9ucy52ZXJib3NlID0gcHJvZ3JhbS52ZXJib3NlO1xuICBvcHRpb25zLnBhdHRlcm4gPSBwcm9ncmFtLnBhdHRlcm47XG5cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbnByb2dyYW0udmVyc2lvbihcIjAuMC4xXCIpO1xucHJvZ3JhbS5vcHRpb24oXG4gIFwiLXYsIC0tdmVyYm9zZVwiLFxuICBcIk91dHB1dHMgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBkdXJpbmcgY3Jhc2hlcy5cIlxuKTtcbnByb2dyYW0ub3B0aW9uKFxuICBcIi0tZGVidWcgW3BhcmFtXVwiLFxuICBkZXNjcmlwdGlvbmBcbiAgICBQcm92aWRlcyBkZWJ1Z2dpbmcgY29udGV4dHVhbCBpbmZvcm1hdGlvbiB2YXJpb3VzIGNvbW1hbmRzIG1pZ2h0IHVzZSB0b1xuICAgIGFpZCBpbiBkZXZlbG9waW5nIERldm9wcy5cbiAgYFxuKTtcblxucHJvZ3JhbS5vcHRpb24oXG4gIFwiLXAsIC0tcGF0dGVybiBbcGFyYW1dXCIsXG4gIGRlc2NyaXB0aW9uYFxuICAgIFByb3ZpZGVzIGEgcGF0dGVybiBmb3IgY2VydGFpbiBvcGVyYXRpb25zIHRvIHV0aWxpemUuIFRoaXMgaXMgcHJpbWFyaWx5XG4gICAgdXNlZCBieSB1bml0IHRlc3RzIHRvIGZpbHRlciB0ZXN0cyB0byBzcGVjaWZpZWQgdGVzdHMuXG4gIGBcbik7XG5cbmNvbnN0IGRldiA9IHByb2dyYW0uY29tbWFuZChcImRldlwiKS5kZXNjcmlwdGlvbihcbiAgZGVzY3JpcHRpb25gXG4gICAgVGhlc2UgYXJlIHRoZSBjb21tYW5kcyBhc3NvY2lhdGVkIHdpdGggc3RhcnRpbmcgdXAgZGV2ZWxvcGVyIGVudmlyb25tZW50c1xuICAgIGZvciB2YXJpb3VzIHByb2plY3QgdHlwZXMgb3IgcG9ydGlvbnMgb2YgYSBwcm9qZWN0LlxuICBgXG4pO1xuXG5kZXZcbiAgLmNvbW1hbmQoXCJ2aXRlXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFN0YXJ0cyB1cCBhIGRldmVsb3BlciBlbnZpcm9ubWVudCB0aGF0IHBlcmZvcm1zIGluY3JlbWVudGFsIGJ1aWxkcyB3aGlsZVxuICAgICAgZGV2ZWxvcGluZyB3aXRoaW4gdGhlIGxpYiBhbmQgYXBwIGZvbGRlcnMuIFVzZXMgdml0ZSBhbmQgdml0ZVxuICAgICAgY29uZmlnLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9kZXYvZGV2LXZpdGUuanNcIikpXG4gICAgICAuZGVmYXVsdCgpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiZGV2LXZpdGUgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5kZXZcbiAgLmNvbW1hbmQoXCJzdG9yeWJvb2tcIilcbiAgLm9wdGlvbihcbiAgICBcIi1pLCAtLWluY2x1ZGUgPGluY2x1ZGUuLi4+XCIsXG4gICAgXCJBZGRpdGlvbmFsIHN0b3J5Ym9vayBtb2R1bGVzIHRvIGxvYWQgaW50byBzdG9yeWJvb2suIFRoZXNlIGFyZSB0aGUgbmFtZXMgb2YgcHJvcGVybHkgZm9ybWF0dGVkIGRlcGVuZGVuY2llcyBpbnN0YWxsZWQgaW50byBub2RlX21vZHVsZXMuXCJcbiAgKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBTdGFydHMgYSBzdG9yeWJvb2sgaW5zdGFuY2UgZm9yIGRldmVsb3BpbmcgdGhlIFVJIGNvbXBvbmVudHMgb2YgdGhlXG4gICAgICBwcm9qZWN0LiBUaGlzIG1ha2VzIHRoZSBcInVpL3N0b3JpZXNcIiBmb2xkZXIgaW4gdGhlIHByb2plY3QgdGhlIGV4cGVjdGVkXG4gICAgICBkZXZlbG9wbWVudCBwb2ludC5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoeyBpbmNsdWRlIH06IHsgaW5jbHVkZTogc3RyaW5nW10gfSkgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3N0b3J5Ym9vay5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KFwiXCIsIGluY2x1ZGUsIHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpKSwgZ2V0T3B0aW9ucygpKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcInN0b3J5Ym9vayBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbmNvbnN0IHN0b3J5Ym9vayA9IHByb2dyYW0uY29tbWFuZChcInN0b3J5Ym9va1wiKTtcblxuc3Rvcnlib29rXG4gIC5jb21tYW5kKFwicnVuXCIpXG4gIC5vcHRpb24oXG4gICAgXCItaSwgLS1pbmNsdWRlIDxpbmNsdWRlLi4uPlwiLFxuICAgIFwiQWRkaXRpb25hbCBzdG9yeWJvb2sgbW9kdWxlcyB0byBsb2FkIGludG8gc3Rvcnlib29rLiBUaGVzZSBhcmUgdGhlIG5hbWVzIG9mIHByb3Blcmx5IGZvcm1hdHRlZCBkZXBlbmRlbmNpZXMgaW5zdGFsbGVkIGludG8gbm9kZV9tb2R1bGVzLlwiXG4gIClcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgU3RhcnRzIGEgc3Rvcnlib29rIGluc3RhbmNlIGZvciBkZXZlbG9waW5nIHRoZSBVSSBjb21wb25lbnRzIG9mIHRoZVxuICAgICAgcHJvamVjdC4gVGhpcyBtYWtlcyB0aGUgXCJ1aS9zdG9yaWVzXCIgZm9sZGVyIGluIHRoZSBwcm9qZWN0IHRoZSBleHBlY3RlZFxuICAgICAgZGV2ZWxvcG1lbnQgcG9pbnQuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKHsgaW5jbHVkZSB9OiB7IGluY2x1ZGU6IHN0cmluZ1tdIH0pID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9zdG9yeWJvb2suanNcIikpXG4gICAgICAuZGVmYXVsdChcIlwiLCBpbmNsdWRlLCBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSksIGdldE9wdGlvbnMoKSlcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJzdG9yeWJvb2sgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5wcm9ncmFtXG4gIC5jb21tYW5kKFwidXJsIFt1cmkuLi5dXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFNpbXBsZSBjb21tYW5kIHRvIG9wZW4gYSBzcGVjaWZpZWQgVVJMIGluIHRoZSBicm93c2VyLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICh1cmk6IHN0cmluZykgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3VybC5qc1wiKSkuZGVmYXVsdCh1cmkpLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oXCJ1cmwgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG4gIH0pO1xuXG5jb25zdCByZWxlYXNlID0gcHJvZ3JhbS5jb21tYW5kKFwicmVsZWFzZVwiKS5kZXNjcmlwdGlvbihcbiAgZGVzY3JpcHRpb25gXG4gICAgVGhlc2UgY29tbWFuZHMgYXJlIHVzZWQgZm9yIGZhY2lsaXRhdGluZyBkaXN0cmlidXRpb24gcmVsZWFzZXMgb2ZcbiAgICBhcHBsaWNhdGlvbnMuIFRoaXMgaW5jbHVkZXMgdG9vbHMgZm9yIGJ1aWxkaW5nIHRoIGRpc3QgZm9sZGVyIGZyYWdtZW50cyxcbiAgICB2aWV3aW5nIHRoZSBleHBlY3RlZCByZWxlYXNlIG5vdGVzLCBhbmQgYWN0dWFsbHkgcGVyZm9ybWluZyBhIGNvbXBsZXRlXG4gICAgcmVsZWFzZSBjeWNsZS5cbiAgYFxuKTtcblxucmVsZWFzZVxuICAuY29tbWFuZChcImRlcGxveSBbYWRkLXJlbW90ZS4uLl1cIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgUGVyZm9ybXMgYWN0aW9ucyBuZWNlc3NhcnkgdG8gdXBkYXRlIHRoZSBkaXN0cmlidXRpb24gb2YgdGhlIHByb2plY3QuXG4gICAgICBUaGlzIHdpbGwgYXV0b21hdGljYWxseSB1cGRhdGUgcmVsZWFzZSBub3RlcywgdGFnIHRoZSByZWxlYXNlLCBhbmRcbiAgICAgIGNvbW1pdCBhbmQgcHVzaCB0byBhICdyZWxlYXNlJyBicmFuY2ggd2hpY2ggd2lsbCBiZSByZWFkeSBmb3IgbWVyZ2luZ1xuICAgICAgaW50byBtYXN0ZXIgYW5kIGRldi5cblxuICAgICAgU3BlY2lmeSBhZGRpdGlvbmFsIHJlbW90ZXMgdG8gZGVwbG95IHRvIHZpYSB0aGUgYWRkLXJlbW90ZSBvcHRpb24uXG4gICAgICBUaGlzIHdpbGwgZGVwbG95IHRoZSByZWxlYXNlIHRvIGFkZGl0aW9uYWwgcmVtb3RlcyAoQUZURVIgYWxsIG90aGVyIG5vcm1hbFxuICAgICAgZGVwbG95IG9wZXJhdGlvbnMgY29tcGxldGUpLiBUaGlzIHZhbHVlIGlzIHRoZSBOQU1FIG9mIHRoZSByZW1vdGUgYXMgaXRcbiAgICAgIGFwcGVhcnMgd2hlbiB5b3UgcGVyZm9ybSBhIFwiZ2l0IHJlbW90ZSAtdlwiIGNvbW1hbmQuXG5cbiAgICAgIFlvdSBjYW4gc3BlY2lmeSBhIHNwZWNpZmljIHRhcmdldCBicmFuY2ggdmlhIGEgY29sb246IHJlbW90ZTpicmFuY2hcbiAgICAgIE90aGVyd2lzZSwgdGhpcyB3aWxsIHVzZSB0aGUgc2FtZSBtYWluIGJyYW5jaCBhcyBjb25maWd1cmVkIGZvciB0aGlzXG4gICAgICBwcm9qZWN0LlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jIChyZW1vdGVzOiBzdHJpbmdbXSkgPT4ge1xuICAgIC8vIEJlZm9yZSBzdGFydGluZyB0aGUgcmVsZWFzZSBzY3JpcHQgbWFrZSBzdXJlIG91ciBwYWNrYWdlcyBhcmUgdXAgdG8gZGF0ZSB0byB0aGUgbGF0ZXN0XG4gICAgZXhlY0luc3RhbGwoW10pO1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3JlbGVhc2UvcmVsZWFzZS1kZXBsb3kuanNcIikpXG4gICAgICAuZGVmYXVsdChyZW1vdGVzKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcInJlbGVhc2UtZGVwbG95IHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVxcblwiLFxuICAgICAgICAgIGVyci5zdGFjayB8fCBlcnIubWVzc2FnZVxuICAgICAgICApO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbnJlbGVhc2VcbiAgLmNvbW1hbmQoXCJ0eXBlc1wiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBVcGRhdGVzIEpVU1QgdGhlIHR5cGVzIGluIHRoZSBkaXN0IGZvbGRlci4gVGhlc2UgYXJlIHRoZSBzYW1lIHR5cGVzXG4gICAgICBnZW5lcmF0ZWQgd2hlbiBidWlsZGluZyBhIHJlbGVhc2UuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKCkgPT4ge1xuICAgIC8vIEJlZm9yZSBzdGFydGluZyB0aGUgcmVsZWFzZSBzY3JpcHQgbWFrZSBzdXJlIG91ciBwYWNrYWdlcyBhcmUgdXAgdG8gZGF0ZSB0byB0aGUgbGF0ZXN0XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLXR5cGVzLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcInJlbGVhc2UtdHlwZXMgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XFxuXCIsXG4gICAgICAgICAgZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlXG4gICAgICAgICk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxucmVsZWFzZVxuICAuY29tbWFuZChcInZpZXdcIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgVGhpcyBydW5zIHRoZSByZWxlYXNlLXZpZXcgc2NyaXB0LiBGb3IgdGhpcyBjYXNlLCBpdCB3aWxsIG9ubHkgZGlzcGxheVxuICAgICAgdGhlIHJlbGVhc2Ugbm90ZXMgaW4gdGhlIGNvbnNvbGUuIEFjdHVhbCBnZW5lcmF0ZWQgcmVsZWFzZSBub3RlcyBhcmUgYVxuICAgICAgcGFydCBvZiB0aGUgcmVsZWFzZSBwcm9jZXNzLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy90cy5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KFwiXCIpXG4gICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBjaGFsay5jeWFuQnJpZ2h0Qm9sZChcIlRTIGNoZWNrIHBhc3NlZCwgZ2VuZXJhdGluZyBub3Rlcy4uLlwiKVxuICAgICAgICApO1xuICAgICAgICAvLyBCZWZvcmUgc3RhcnRpbmcgdGhlIHJlbGVhc2Ugc2NyaXB0IG1ha2Ugc3VyZSBvdXIgcGFja2FnZXMgYXJlIHVwIHRvIGRhdGUgdG8gdGhlIGxhdGVzdFxuICAgICAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2Utdmlldy5qc1wiKSlcbiAgICAgICAgICAuZGVmYXVsdCgpXG4gICAgICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgIFwicmVsZWFzZS1ub3RlcyBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIixcbiAgICAgICAgICAgICAgZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgY2hhbGsucmVkQnJpZ2h0Qm9sZChcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uYFxuICAgICAgICAgICAgICBGYWlsZWQgVFMgY2hlY2suIFJlbGVhc2Ugbm90ZXMgd2lsbCBub3QgYmUgcHJvZHVjZWQgdW50aWwgYWxsIFRTXG4gICAgICAgICAgICAgIGVycm9ycyBhcmUgcmVzb2x2ZWQuXG4gICAgICAgICAgICBgXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5yZWxlYXNlXG4gIC5jb21tYW5kKFwiYnVpbGRcIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgVGhpcyBydW5zIHRoZSByZWxlYXNlLWJ1aWxkIHNjcmlwdC4gVGhpcyBnZW5lcmF0ZXMgYWxsIG9mIHRoZSByZWxlYXNlXG4gICAgICBmcmFnbWVudHMuIFRoaXMgc2hvdWxkIE9OTFkgYmUgdXNlZCBmb3IgdGVzdGluZyBhbmQgZXhwZXJpbWVudGluZy4gQWN0dWFsXG4gICAgICByZWxlYXNlIGZyYWdtZW50cyBzaG91bGQgYmUgcHJvcGVybHkgY3JlYXRlZCBhbmQgZGVwbG95ZWQgdXNpbmcgdGhlXG4gICAgICByZWxlYXNlIGRlcGxveSBjb21tYW5kLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2UtYnVpbGQuanNcIikpXG4gICAgICAuZGVmYXVsdCgpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwicmVsZWFzZS1kZXBsb3kgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XFxuXCIsXG4gICAgICAgICAgZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlXG4gICAgICAgICk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxuY29uc3QgcmVsZWFzZVN0YXJ0ID0gcmVsZWFzZS5jb21tYW5kKFwic3RhcnRcIikuZGVzY3JpcHRpb24oXG4gIGRlc2NyaXB0aW9uYFxuICAgICAgVGhpcyBzdGFydHMgdXAgcmVsZWFzZWQgcmVsYXRlZCBwcm9jZXNzZXMuIFRoaXMgaW5jbHVkZXMgdGhpbmdzIGxpa2VcbiAgICAgIHN0YXJ0aW5nIHVwIHRoZSBkZXYgc2VydmVyIHdpdGhvdXQgYW55IGFkZGl0aW9uYWwgYnVpbGRzIG9yIGF1dG9cbiAgICAgIGNvbmZpZ3VyYXRpb24gZm9yIGRldmVsb3BtZW50LlxuICAgIGBcbik7XG5cbnJlbGVhc2VTdGFydFxuICAuY29tbWFuZChcInNlcnZlclwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBTdGFydHMgdXAgdGhlIGFwcCBzZXJ2ZXIgd2l0aG91dCBhbnkgYWRkaXRpb25hbCBidWlsZHMgZXRjLiBVc2UgdGhlXG4gICAgICBlbnZpcm9ubWVudHM6XG5cbiAgICAgICAgQlVJTERfTU9ERTogVGFyZ2V0cyBhbiBlbnYgdG8gcnVuIHRoZSBzZXJ2ZXIgZm9yLlxuICAgICAgICBSRVNPVVJDRV9QQVRIOiBUaGUgcGF0aCB0byB0aGUgc3RhdGljIGZpbGVzIHRvIHNlcnZlLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2Utc3RhcnQtc2VydmVyLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcInJlbGVhc2Utc3RhcnQtc2VydmVyIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVxcblwiLFxuICAgICAgICAgIGVyci5zdGFjayB8fCBlcnIubWVzc2FnZVxuICAgICAgICApO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbnByb2dyYW1cbiAgLmNvbW1hbmQoXCJzdGFydCBbdGFyZ2V0XVwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBUaGlzIGZpcmVzIHVwIGEgc2VydmVyIHRvIG1ha2UgYW55IHN0YXRpYyBjb250ZW50IGF2YWlsYWJsZSBmb3IgYmVpbmdcbiAgICAgIHNlcnZlZC5cbiAgICAgIFRoZXJlIGFyZSBhIGZldyBvcHRpb25zIGZvciB3aGF0IGNvbnRlbnQgd2lsbCBiZSBzZXJ2ZWQgYnkgdGhpcyBzY3JpcHQ6XG5cbiAgICAgIC0gVGhlIHdlYiBhcHBcbiAgICAgIC0gRGV2b3BzIEFQSVxuXG4gICAgICBUaGUgc3RhcnQgc2NyaXB0IHdpbGwgYXV0b21hdGljYWxseSBwaWNrIHRoZSB3ZWIgYXBwIG92ZXIgdGhlIGRldm9wc1xuICAgICAgZmlsZXMsIGJ1dCB5b3UgY2FuIHNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IGhhdmUgYSBkZXZvcHMgQVBJIGFuZCBhIHdlYlxuICAgICAgYXBwOlxuXG4gICAgICAtIGFwcFxuICAgICAgLSBkZXZvcHNcbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAodGFyZ2V0OiBzdHJpbmcpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9zdGFydC5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KHRhcmdldCwgZ2V0T3B0aW9ucygpKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcInN0YXJ0IHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiKTtcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxuY29uc3QgdGVzdCA9IHByb2dyYW0uY29tbWFuZChcInRlc3RcIikuZGVzY3JpcHRpb24oXG4gIGRlc2NyaXB0aW9uYFxuICAgIFRoZXNlIGNvbW1hbmRzIGFyZSB1c2VkIGZvciBydW5uaW5nIHRlc3RzLiBUaGlzIGluY2x1ZGVzIHRvb2xzIGZvclxuICAgIHJ1bm5pbmcgdW5pdCB0ZXN0cyBhIHNpbmdsZSB0aW1lIG9yIGluIGEgd2F0Y2ggbW9kZS5cblxuICAgIFVzZSB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBtb2RpZnlpbmcgYmVoYXZpb3I6XG5cbiAgICAke2NoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJQQVRURVJOXCIpfSAtIFRoaXMgY2F1c2VzIHRoZSB0ZXN0cyB0byBvbmx5IHJ1biBvblxuICAgIGZpbGVzIHRoYXQgbWF0Y2ggdGhlIHBhdHRlcm5cblxuICAgICR7Y2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIkxFU1NcIil9IC0gVGhpcyByZW1vdmVzIHRoZSB2ZXJib3NlIG91dHB1dCBsaXN0IG9mXG4gICAgYWxsIHRlc3RzIHJhblxuICBgXG4pO1xuXG50ZXN0XG4gIC5jb21tYW5kKFwicnVuXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFJ1bnMgYWxsIHVuaXQgdGVzdHMgaW4gdGhlIHVuaXQtdGVzdCBmb2xkZXIgb25jZS5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvdGVzdC90ZXN0LXJ1bi5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KClcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJ0ZXN0LXJ1biBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbmNvbnN0IGNsZWFuID0gcHJvZ3JhbS5jb21tYW5kKFwiY2xlYW5cIikuZGVzY3JpcHRpb24oXG4gIGRlc2NyaXB0aW9uYFxuICAgIENvbW1vbiBjbGVhbmluZyB0b29scyBmb3IgdmFyaW91cyBmcmFnbWVudHMgd2l0aGluIHRoZSBwcm9qZWN0LlxuICBgXG4pO1xuXG5jbGVhblxuICAuY29tbWFuZChcImNhY2hlXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIENsZWFucyBvdXQgYnVpbGQgYW5kIGNhY2hlIGZpbGVzIHRvIGhlbHAgZW5zdXJlIGEgY29tcGxldGUgcmVidWlsZCB0YWtlc1xuICAgICAgcGxhY2UuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL2NsZWFuL2NsZWFuLWNhY2hlLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcImNsZWFuLWNhY2hlIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiKTtcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxuY29uc3QgdHMgPSBwcm9ncmFtLmNvbW1hbmQoXCJ0c1wiKS5kZXNjcmlwdGlvbihcbiAgZGVzY3JpcHRpb25gXG4gICAgVGhlc2UgY29tbWFuZHMgYXJlIHVzZWQgZm9yIHJ1bm5pbmcgdHlwZXNjcmlwdC4gVGhpcyBpbmNsdWRlcyB0b29scyBmb3JcbiAgICBydW5uaW5nIHR5cGVzY3JpcHQgY29tcGlsYXRpb24gYSBzaW5nbGUgdGltZSBvciBpbiBhIHdhdGNoIG1vZGUuXG4gIGBcbik7XG5cbnRzLmNvbW1hbmQoXCJydW5cIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgUnVucyB0eXBlc2NyaXB0IGNvbXBpbGF0aW9uIHRvIGNoZWNrIGZvciBlcnJvcnMuIERvZXMgTk9UIGVtaXQgZmlsZXMsIHRodXNcbiAgICAgIGlzIGEgZ29vZCBtZWNoYW5pc20gZm9yIGNoZWNraW5nIGEgYnVpbGQgYmVmb3JlIHJ1bm5pbmcgYSByZWxlYXNlLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy90cy5qc1wiKSkuZGVmYXVsdChcIlwiKS5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgY29uc29sZS53YXJuKFwidHMgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG4gIH0pO1xuXG5jb25zdCBwciA9IHByb2dyYW1cbiAgLmNvbW1hbmQoXCJwclwiKVxuICAub3B0aW9uKFxuICAgIFwiLS1yZXBvVXJsIDx2YWx1ZT5cIixcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFRoZSBodHRwcyBVUkwgdG8gdGhlIHJlcG8gdG8gbWFrZSB0aGUgUFIgaW50b1xuICAgIGBcbiAgKVxuICAub3B0aW9uKFxuICAgIFwiLS1yZXBvVHlwZSA8dmFsdWU+XCIsXG4gICAgZGVzY3JpcHRpb25gXG4gICAgVGhlIHJlcG9zaXRvcnkgdHlwZSB0byBtYWtlIHRoZSBQUiBpbnRvLiBTdXBwb3J0ZWQgdHlwZXMgYXJlOiBnaXQsIGdpdGxhYlxuICBgXG4gIClcbiAgLm9wdGlvbihcbiAgICBcIi0tbWFzdGVyQnJhbmNoIDx2YWx1ZT5cIixcbiAgICBkZXNjcmlwdGlvbmBcbiAgICBUaGlzIGluZGljYXRlcyB3aGljaCBicmFuY2ggaXMgdGhlIG1hc3Rlci9tYWluIG9mIHRoZSByZXBvc2l0b3J5LlxuICBgXG4gICk7XG5cbnByLmNvbW1hbmQoXCJyZWxlYXNlXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFRoaXMgY3JlYXRlcyB0d28gUFJzIHRoYXQgbWVyZ2VzIHRoZSBjdXJyZW50IHJlbW90ZSByZWxlYXNlIGJyYW5jaCBpbnRvXG4gICAgICB0aGUgcmVtb3RlIGRldiBhbmQgbWFzdGVyIGJyYW5jaGVzLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IHJlcG9VcmwsIHJlcG9UeXBlLCBtYXN0ZXJCcmFuY2ggfSA9IHlhcmdzKHByb2Nlc3MuYXJndikuYXJndiBhcyB7XG4gICAgICByZXBvVHlwZT86IHN0cmluZztcbiAgICAgIHJlcG9Vcmw/OiBzdHJpbmc7XG4gICAgICBtYXN0ZXJCcmFuY2g/OiBzdHJpbmc7XG4gICAgfTtcblxuICAgIGlmICghcmVwb1VybCB8fCAhcmVwb1R5cGUgfHwgIW1hc3RlckJyYW5jaCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIllvdSBtdXN0IHNwZWNpZnkgYm90aCAtLXJlcG9VcmwgYW5kIC0tcmVwb1R5cGUgdG8gdXNlIHRoaXMgY29tbWFuZFwiXG4gICAgICApO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cblxuICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGFueSByZXF1aXJlZCBwZWVyIGRlcGVuZGVuY2llcyBmb3IgdGhpc1xuICAgIGF3YWl0IGVuc3VyZURlcGVuZGVuY2llcygpLmNhdGNoKCgpID0+IHByb2Nlc3MuZXhpdCgxKSk7XG4gICAgY29uc29sZS53YXJuKFwiRGVwZW5kZW5jeSBjaGVja3MgcGFzc2VkLCBjb250aW51aW5nLi4uXCIpO1xuXG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvcHIvcHItcmVsZWFzZS5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KHJlcG9VcmwsIHJlcG9UeXBlLCBtYXN0ZXJCcmFuY2gpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFwicHItcmVsZWFzZSBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgLy8gTG9hZCBpbiBlbnZpcm9ubWVudCBmcm9tIGVudiBmaWxlIGFuZCBhbHNvIGVuc3VyZSBjb25maWd1cmF0aW9uIG1hdGNoZXMgdGhlXG4gIC8vIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb24gc3BlY2lmaWVkIGluIGVudi5jb25maWcudHNcbiAgYXdhaXQgY29uZmlnRW52KHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIik7XG4gIHByb2dyYW0ucGFyc2UocHJvY2Vzcy5hcmd2KTtcbn1cblxucnVuKCk7XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbiB9IGZyb20gXCIuL2Rlc2NyaXB0aW9uLmpzXCI7XG5pbXBvcnQgeyBkb3RlbnYgfSBmcm9tIFwiLi9kb3QtZW52LmpzXCI7XG5pbXBvcnQgeyBpc0RlZmluZWQsIGlzU3RyaW5nIH0gZnJvbSBcIi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IHByb21wdENvbmZpcm0gfSBmcm9tIFwiLi4vcHJvbXB0L3Byb21wdC1jb25maXJtLmpzXCI7XG5pbXBvcnQgeyBwcm9tcHRPdmVycmlkZUZpbGUgfSBmcm9tIFwiLi4vcHJvbXB0L3Byb21wdC1vdmVycmlkZS1maWxlLmpzXCI7XG5cbnR5cGUgRW52Q29uZmlnT3B0aW9uID0ge1xuICByZXF1aXJlZDogYm9vbGVhbjtcbiAgd2Fybj86IGJvb2xlYW47XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZGVmYXVsdD86IHN0cmluZyB8ICgoKSA9PiBQcm9taXNlPHN0cmluZz4pO1xufTtcblxuLyoqXG4gKiBNZXRob2QgdXNlZCB0byByZXRyaWV2ZSB0aGUgZW52aXJvbm1lbnQgY29uZmlndXJhdGlvbiBmaWxlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29uZmlnRW52KCkge1xuICBjb25zdCBlbnZDb25maWc6IEVudkNvbmZpZ09wdGlvbltdID0gKFxuICAgIGF3YWl0IGltcG9ydChwYXRoLnJlc29sdmUoXCJlbnYuY29uZmlnLnRzXCIpKVxuICApLmRlZmF1bHQ7XG4gIGlmICghZW52Q29uZmlnKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBlbnYuY29uZmlnLnRzIGZpbGUgZm91bmQuXCIpO1xuXG4gIGlmICghQXJyYXkuaXNBcnJheShlbnZDb25maWcpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiZW52LmNvbmZpZy50cyBpcyBub3QgZm9ybWF0dGVkIGNvcnJlY3RseS4gUGxlYXNlIGZvbGxvdyB0aGUgY29ycmVjdCB0eXBlIGNvbnZlbnRpb24uXCJcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGVudkNvbmZpZztcbn1cblxuLyoqXG4gKiBUaGlzIGVuc3VyZXMgdGhlIGVudmlyb25tZW50IGhhcyBhbGwgb2YgdGhlIG5lY2Vzc2FyeSBjb25maWd1cmF0aW9uIHZhcmlhYmxlc1xuICogdG8gbWFrZSB0aGUgc3lzdGVtIHdvcmsuIFRoaXMgYWxzbyBleGVjdXRlcyB0aGUgZG90ZW52IGxpYnJhcnkgdG8gZW5hYmxlIGVudlxuICogY29uZmlndXJhdGlvbiB2aWEgZW52IGZpbGUuXG4gKlxuICogSWYgdGhlIGVudmlyb25tZW50IGRvZXMgbm90IG1lZXQgdGhlIHByb2NvbmZpZ3VyZWQgZW52aXJvbm1lbnQgbmVlZHMsIHRoZW5cbiAqIHRoaXMgc2NyaXB0IHdpbGwgZXJyb3IgYW5kIGxvZyB3aGF0IGlzIG1pc3NpbmcgYW5kIGRldGFpbHMgYWJvdXQgdGhlXG4gKiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgdGhhdCBhcmUgbWlzc2luZy5cbiAqXG4gKiBJZiByZXF1ZXN0RGVmYXVsdCBpcyB0cnVlLCB0aGlzIHdpbGwgcHJvbXB0IHRoZSB1c2VyIGlmIHRoZXkgd291bGQgbGlrZSB0b1xuICogZ2VuZXJhdGUgYSAuZW52IGZpbGUgd2l0aCBhbGwgb2YgdGhlIGVudmlyb25tZW50J3Mgc2V0IHRoYXQgaGF2ZSBhIGRlZmF1bHRcbiAqIHZhbHVlLiBJZiB0aGUgdXNlciBjaG9vc2VzIHRvIGNyZWF0ZSB0aGUgZW52IGZpbGUsIHRoZSBkZWZhdWx0cyB3aWxsIGdldFxuICogYXBwbGllZCB0byB0aGUgZW52IGFzIHdlbGwgYW5kIG5vdCBlcnJvci5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbmZpZ0VudihyZXF1ZXN0RGVmYXVsdD86IGJvb2xlYW4pIHtcbiAgLy8gVGVsbCBkb3RlbnYgdG8gbG9hZCB0aGUgLmVudiBmaWxlXG4gIGRvdGVudigpO1xuXG4gIC8vIFdlIGxvYWQgaW4gdGhlIGVudi5jb25maWcudHMgZmlsZSBmcm9tIHRoZSBwcm9qZWN0IHJvb3QgdG8gYW5hbHl6ZSBpdCBmb3JcbiAgLy8gY29tcGxpYW5jZSB3aXRoIHRoZSBlbnZpcm9ubWVudC5cbiAgdHJ5IHtcbiAgICBjb25zdCBlbnZDb25maWc6IEVudkNvbmZpZ09wdGlvbltdID0gYXdhaXQgZ2V0Q29uZmlnRW52KCk7XG4gICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZW52Q29uZmlnLmZvckVhY2goKGVudjogRW52Q29uZmlnT3B0aW9uKSA9PiB7XG4gICAgICAvLyBTa2lwIGZhbHNleSB2YWx1ZXNcbiAgICAgIGlmICghZW52KSByZXR1cm47XG5cbiAgICAgIGlmIChlbnYucmVxdWlyZWQpIHtcbiAgICAgICAgaWYgKCFwcm9jZXNzLmVudltlbnYubmFtZV0pIHtcbiAgICAgICAgICBlcnJvcnMucHVzaChkZXNjcmlwdGlvbmBcbiAgICAgICAgICAgICAgTWlzc2luZzogJHtlbnYubmFtZX1cXG5EZXNyaXB0aW9uOiAke2Vudi5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgIGApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXByb2Nlc3MuZW52W2Vudi5uYW1lXSAmJiBlbnYud2FybiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICB3YXJuaW5ncy5wdXNoKGRlc2NyaXB0aW9uYFxuICAgICAgICAgICAgICBNaXNzaW5nOiAke2Vudi5uYW1lfVxcbkRlc3JpcHRpb246ICR7ZW52LmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh3YXJuaW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGNoYWxrLnllbGxvd0JyaWdodEJvbGQoXG4gICAgICAgICAgXCJUaGUgZm9sbG93aW5nIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgcmVjb21tZW5kZWQgYnV0IG1pc3NpbmcgZnJvbSB5b3VyIGVudmlyb25tZW50OlxcblwiXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGNoYWxrLnllbGxvd0JyaWdodChkZXNjcmlwdGlvbmBcbiAgICAgICAgICAke3dhcm5pbmdzLmpvaW4oXCJcXG5cIil9XG4gICAgICAgIGApXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgY2hhbGsucmVkQnJpZ2h0Qm9sZChcbiAgICAgICAgICBcIlRoZSBmb2xsb3dpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSByZXF1aXJlZCBidXQgbWlzc2luZyBmcm9tIHlvdXIgZW52aXJvbm1lbnQ6XFxuXCJcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGNoYWxrLnJlZEJyaWdodChkZXNjcmlwdGlvbmBcbiAgICAgICAgICAke2Vycm9ycy5qb2luKFwiXFxuXCIpfVxuICAgICAgICBgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBRdWl0IHRoZSBwcm9jZXNzIGlmIHJlcXVpcmVtZW50cyBhcmUgbm90IG1ldFxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHJlcXVlc3REZWZhdWx0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb21wdENvbmZpcm0oZGVzY3JpcHRpb25gXG4gICAgICAgICAgVGhlcmUgc2VlbXMgdG8gYmUgc29tZSBtaXNzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlcy4gV291bGQgeW91IGxpa2VcbiAgICAgICAgICB0byBnZW5lcmF0ZSBhIC5lbnYgZmlsZSB3aXRoIHRoZSBkZWZhdWx0IHZhbHVlcyBzcGVjaWZpZWQgaW4gdGhlXG4gICAgICAgICAgZW52LmNvbmZpZyBmaWxlP1xuICAgICAgICBgKTtcblxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdHM6IFtzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZF1bXSA9IFtdO1xuXG4gICAgICAgICAgZm9yIChjb25zdCBlbnYgb2YgZW52Q29uZmlnKSB7XG4gICAgICAgICAgICBkZWZhdWx0cy5wdXNoKFtcbiAgICAgICAgICAgICAgZW52Lm5hbWUsXG4gICAgICAgICAgICAgIGlzU3RyaW5nKGVudi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgID8gZW52LmRlZmF1bHRcbiAgICAgICAgICAgICAgICA6IGlzRGVmaW5lZChlbnYuZGVmYXVsdClcbiAgICAgICAgICAgICAgICA/IGF3YWl0IGVudi5kZWZhdWx0KClcbiAgICAgICAgICAgICAgICA6IHZvaWQgMCxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGRlZmF1bHRFbnYgPSBkZWZhdWx0c1xuICAgICAgICAgICAgLmZpbHRlcigoZCkgPT4gZFsxXSlcbiAgICAgICAgICAgIC5tYXAoKGQpID0+IGAke2RbMF19PSR7ZFsxXX1gKVxuICAgICAgICAgICAgLmpvaW4oXCJcXG5cIik7XG5cbiAgICAgICAgICBpZiAoIWRlZmF1bHRFbnYpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihkZXNjcmlwdGlvbmBcbiAgICAgICAgICAgICAgVGhlcmUgYXJlIG5vIGRlZmF1bHRzIGF2YWlsYWJsZSBmb3IgdGhpcyBlbnYuY29uZmlnLiBTbyB3ZSBjYW4gbm90XG4gICAgICAgICAgICAgIGdlbmVyYXRlIGFuIGVudiBmaWxlIHlvdS4gUGxlYXNlIHJldmlldyB0aGUgZW52LmNvbmZpZy50cyBmaWxlIGFuZFxuICAgICAgICAgICAgICBwcm9wZXJseSBzZXQgdGhlIGRlZmF1bHQgdmFsdWVzIGZvciB0aGUgcmVxdWlyZWQgZW52aXJvbm1lbnRcbiAgICAgICAgICAgICAgdmFyaWFibGVzLlxuICAgICAgICAgICAgYCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgZW52RmlsZVBhdGggPSBwYXRoLnJlc29sdmUoXCIuZW52XCIpO1xuXG4gICAgICAgICAgY29uc3QgZGlkV3JpdGUgPSBhd2FpdCBwcm9tcHRPdmVycmlkZUZpbGUoXG4gICAgICAgICAgICBlbnZGaWxlUGF0aCxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uYFxuICAgICAgICAgICAgICBUaGVyZSBhcHBlYXJzIHRvIGFscmVhZHkgYmUgYSAuZW52IGZpbGUuXG4gICAgICAgICAgICAgIFdvdWxkIHlvdSBsaWtlIHRvIGFkZCB0aGUgbWlzc2luZyBkZWZhdWx0cyB0byBpdD9cbiAgICAgICAgICAgIGAsXG4gICAgICAgICAgICAoKSA9PiB7fSxcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBuZXcgZW52IGZpbGVcbiAgICAgICAgICAgICgpID0+IGZzLndyaXRlRmlsZShlbnZGaWxlUGF0aCwgZGVmYXVsdEVudiksXG5cbiAgICAgICAgICAgIC8vIFdlIHdpbGwgYWRkIHRoZSBlbnYgcGFyYW1zIHRvIHRoZSBleGlzdGluZyBlbnYgZmlsZSBpbnN0ZWFkIG9mXG4gICAgICAgICAgICAvLyBvdmVycmlkZSBpdFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhlbnZGaWxlUGF0aCwgYFxcbiR7ZGVmYXVsdEVudn1gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoIWRpZFdyaXRlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcIkRpZCBub3Qgd3JpdGUgdGhlIC5lbnYgZmlsZS4gUGxlYXNlIGNvcnJlY3QgdGhlIGVudiBhbmQgdHJ5IGFnYWluLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENvbnN1bWUgdGhlIC5lbnYgZmlsZSBhZ2FpbiBhbmQgc2VlIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZVxuICAgICAgICAgIC8vIGVudmlyb25tZW50XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgXCJBdHRlbXB0aW5nIHRvIGJ1aWxkIHRoZSBlbnYgYWdhaW4gYW5kIGNvbnRpbnVlIHdpdGggdGhlIGNvbW1hbmQuLi5cIlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICByZXR1cm4gY29uZmlnRW52KGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKGRlc2NyaXB0aW9uYFxuICAgICAgTm8gJHtjaGFsay5jeWFuQnJpZ2h0Qm9sZChcbiAgICAgICAgXCJlbnYuY29uZmlnLnRzXCJcbiAgICAgICl9IGZpbGUgZm91bmQuIEVudmlyb25tZW50IHdpbGwgbm90IGJlIHZhbGlkYXRlZC5cbiAgICBgKTtcbiAgfVxufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi9jaGFsay5qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9wcyB9IGZyb20gXCIuL3BhcnNlLXByb3BzLmpzXCI7XG5cbi8qKlxuICogQ3VzdG9tIGRvdGVudiByb3V0aW5lIHRvIHJlZHVjZSBkZXBlbmRlbmNpZXMuXG4gKlxuICogVGhpcyB0YWtlcyBpbiB0aGUgcHJvamVjdCdzIC5lbnYgZmlsZSBhbmQgYXBwbGllcyB0aGUgdmFsdWVzIHRoZXJlaW4gdG8gdGhlXG4gKiBwcm9jZXNzLmVudiBvYmplY3QuXG4gKlxuICogVGhpcyBPTkxZIHN1cHBvcnRzIHNpbXBsZSBrZXkvdmFsdWUgcGFpcnMgYW5kIGRvZXMgTk9UIHN1cHBvcnQgYW55IGNvbXBsZXhcbiAqIHByb3BzIGZpbGUgc3RydWN0dXJlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdGVudih0YXJnZXRGaWxlPzogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcIi5lbnZcIikpKSByZXR1cm47XG4gICAgLy8gUmVhZCB0aGUgLmVudiBmaWxlXG4gICAgY29uc3QgY29udGVudHMgPSBmcy5yZWFkRmlsZVN5bmMoXG4gICAgICBwYXRoLnJlc29sdmUodGFyZ2V0RmlsZSB8fCBcIi5lbnZcIiksXG4gICAgICBcInV0ZjhcIlxuICAgICk7XG4gICAgLy8gUGFyc2UgdGhlIGZpbGVcbiAgICBjb25zdCBwcm9wcyA9IHBhcnNlUHJvcHMoY29udGVudHMpO1xuXG4gICAgLy8gQXBwbHkgb25seSBzaW1wbGUga2V5IHZhbHVlIHBhaXJzIHRvIHByb2Nlc3MuZW52XG4gICAgT2JqZWN0LmVudHJpZXMocHJvcHMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBwcm9jZXNzLmVudltrZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBwcm9jZXNzLmVudltrZXldID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICBwcm9jZXNzLmVudltrZXldID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBjaGFsay5yZWQoXG4gICAgICAgICAgYEVycm9yIHJlYWRpbmcgLmVudiBmaWxlOlxcbmAsXG4gICAgICAgICAgY2hhbGsueWVsbG93KGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbiIsCiAgICAidHlwZSBWYWx1ZSA9IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW47XG50eXBlIFBhcnNlUmVzdWx0ID0gUmVjb3JkPHN0cmluZywgVmFsdWUgfCBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4+O1xuXG4vKipcbiAqIFRoaXMgcGFyc2VzIGEgcHJvcHMgZmlsZSBpbnRvIGEgbWFwIG9mIGtleS92YWx1ZSBwYWlycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvcHMoY29udGVudHM6IHN0cmluZyk6IFBhcnNlUmVzdWx0IHtcbiAgY29uc3QgbGluZXMgPSBjb250ZW50cy5zcGxpdCgvXFxyP1xcbi8pO1xuXG4gIGNvbnN0IHJlc3VsdDogUGFyc2VSZXN1bHQgPSB7fTtcbiAgbGV0IGN1cnJlbnRTZWN0aW9uOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgbGV0IGN1cnJlbnRPYmplY3Q6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIGxpbmVzLmZvckVhY2goKGxpbmUpID0+IHtcbiAgICBsaW5lID0gbGluZS50cmltKCk7XG5cbiAgICAvLyBJZ25vcmUgZW1wdHkgbGluZXMgYW5kIGNvbW1lbnRzXG4gICAgaWYgKGxpbmUgPT09IFwiXCIgfHwgbGluZS5zdGFydHNXaXRoKFwiI1wiKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBhIG5ldyBzZWN0aW9uXG4gICAgaWYgKGxpbmUuZW5kc1dpdGgoXCJ7XCIpKSB7XG4gICAgICBjb25zdCBzZWN0aW9uTmFtZSA9IGxpbmUuc3BsaXQoL1xccysvKVswXTtcbiAgICAgIGN1cnJlbnRTZWN0aW9uID0gc2VjdGlvbk5hbWU7XG4gICAgICByZXN1bHRbY3VycmVudFNlY3Rpb25dID0ge307XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIHRoZSBlbmQgb2YgYSBzZWN0aW9uXG4gICAgaWYgKGxpbmUgPT09IFwifVwiKSB7XG4gICAgICBjdXJyZW50U2VjdGlvbiA9IG51bGw7XG4gICAgICBjdXJyZW50T2JqZWN0ID0gbnVsbDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQYXJzZSBrZXktdmFsdWUgcGFpcnNcbiAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14oW1xcdy5dKylcXHMqPVxccyooLiopJC8pO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgY29uc3Qga2V5ID0gbWF0Y2hbMV07XG4gICAgICBsZXQgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gPSBtYXRjaFsyXTtcblxuICAgICAgLy8gQ29udmVydCB2YWx1ZXMgdG8gdGhlIGFwcHJvcHJpYXRlIHR5cGVcbiAgICAgIGlmICghaXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpKSB7XG4gICAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBcInRydWVcIikge1xuICAgICAgICB2YWx1ZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBcImZhbHNlXCIpIHtcbiAgICAgICAgdmFsdWUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHRoZSBrZXktdmFsdWUgcGFpciB0byB0aGUgcmVzdWx0XG4gICAgICBpZiAoY3VycmVudE9iamVjdCkge1xuICAgICAgICAoXG4gICAgICAgICAgcmVzdWx0W2N1cnJlbnRTZWN0aW9uID8/IFwibnVsbFwiXSBhcyB1bmtub3duIGFzIFJlY29yZDxcbiAgICAgICAgICAgIHN0cmluZyxcbiAgICAgICAgICAgIFJlY29yZDxzdHJpbmcsIFZhbHVlPlxuICAgICAgICAgID5cbiAgICAgICAgKVtjdXJyZW50T2JqZWN0XVtrZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uKSB7XG4gICAgICAgIChyZXN1bHRbY3VycmVudFNlY3Rpb25dIGFzIFJlY29yZDxzdHJpbmcsIFZhbHVlPilba2V5XSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBhIG5ldyBvYmplY3QgaW4gYSBzZWN0aW9uXG4gICAgY29uc3Qgb2JqZWN0TWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFtcXHcuXSspXFwuKFtcXHcuXSspXFxzKj1cXHMqKC4qKSQvKTtcbiAgICBpZiAob2JqZWN0TWF0Y2gpIHtcbiAgICAgIGNvbnN0IHNlY3Rpb25OYW1lID0gb2JqZWN0TWF0Y2hbMV07XG4gICAgICBjb25zdCBvYmplY3ROYW1lID0gb2JqZWN0TWF0Y2hbMl07XG4gICAgICBjb25zdCBrZXkgPSBvYmplY3RNYXRjaFszXTtcblxuICAgICAgaWYgKCFyZXN1bHRbc2VjdGlvbk5hbWVdKSB7XG4gICAgICAgIHJlc3VsdFtzZWN0aW9uTmFtZV0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAhKFxuICAgICAgICAgIHJlc3VsdFtzZWN0aW9uTmFtZV0gYXMgdW5rbm93biBhcyBSZWNvcmQ8XG4gICAgICAgICAgICBzdHJpbmcsXG4gICAgICAgICAgICBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT5cbiAgICAgICAgICA+XG4gICAgICAgIClbb2JqZWN0TmFtZV1cbiAgICAgICkge1xuICAgICAgICAoXG4gICAgICAgICAgcmVzdWx0W3NlY3Rpb25OYW1lXSBhcyB1bmtub3duIGFzIFJlY29yZDxcbiAgICAgICAgICAgIHN0cmluZyxcbiAgICAgICAgICAgIFJlY29yZDxzdHJpbmcsIFZhbHVlPlxuICAgICAgICAgID5cbiAgICAgICAgKVtvYmplY3ROYW1lXSA9IHt9O1xuICAgICAgfVxuXG4gICAgICAoKHJlc3VsdFtzZWN0aW9uTmFtZV0gYXMgYW55KVtvYmplY3ROYW1lXSBhcyBhbnkpW2tleV0gPSBudWxsO1xuICAgICAgY3VycmVudFNlY3Rpb24gPSBzZWN0aW9uTmFtZTtcbiAgICAgIGN1cnJlbnRPYmplY3QgPSBvYmplY3ROYW1lO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5lcnJvcihgVW5yZWNvZ25pemVkIGxpbmU6ICR7bGluZX1gKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IGlucXVpcmVyIGZyb20gXCJpbnF1aXJlclwiO1xuaW1wb3J0IHsgc3RyaXBJbmRlbnQgfSBmcm9tIFwiY29tbW9uLXRhZ3NcIjtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSB3cmFwcGVyIGFyb3VuZCBjdXJyZW50IHByb21wdCBsaWJyYXJ5IG9mIGNob2ljZSB0byBwcmVzZW50IGFcbiAqIGNvbmZpcm1hdGlvbiBkaWFsb2cgZm9yIHdoZW4gYSBmaWxlIHBhdGggZXhpc3RzLiBJZiB0aGUgZmlsZSBkb2VzIG5vdCBleGlzdCxcbiAqIHRoZXJlIHdpbGwgYmUgbm8gcHJvbXB0LlxuICpcbiAqIEFwcGxpZXMgc3RyaXBJbmRlbnQgdG8gdGhlIGlucHV0IG1lc3NhZ2UuXG4gKlxuICogUmV0dXJucyB0aGUgdHJ1ZSBmYWxzZSB2YWx1ZSBvZiB0aGUgcHJvbXB0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvbXB0T3ZlcnJpZGVGaWxlKFxuICBmaWxlUGF0aDogc3RyaW5nLFxuICBtZXNzYWdlOiBzdHJpbmcsXG4gIG9uV3JpdGU6IChwYXRoOiBzdHJpbmcpID0+IHZvaWQsXG4gIG9uTmV3PzogKHBhdGg6IHN0cmluZykgPT4gdm9pZCxcbiAgb25PdmVycmlkZT86IChwYXRoOiBzdHJpbmcpID0+IHZvaWQsXG4gIGRlZmF1bHRWYWx1ZT86IGJvb2xlYW5cbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBsZXQgb3V0ID0gZGVmYXVsdFZhbHVlIHx8IGZhbHNlO1xuXG4gIGlmIChmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSBhd2FpdCBpbnF1aXJlci5wcm9tcHQ8e1xuICAgICAgcmVzdWx0OiBib29sZWFuO1xuICAgIH0+KFtcbiAgICAgIHtcbiAgICAgICAgdHlwZTogXCJjb25maXJtXCIsXG4gICAgICAgIG5hbWU6IFwicmVzdWx0XCIsXG4gICAgICAgIG1lc3NhZ2U6IHN0cmlwSW5kZW50YCR7bWVzc2FnZX1gLFxuICAgICAgICBkZWZhdWx0OiBkZWZhdWx0VmFsdWUsXG4gICAgICB9LFxuICAgIF0pO1xuXG4gICAgLy8gV2hlbiB5ZXMvdHJ1ZSBpcyBzZWxlY3RlZCwgcnVuIHRoZSBvbkNvbmZpcm1lZCBjYWxsYmFja1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIG9uV3JpdGUoZmlsZVBhdGgpO1xuICAgICAgb25PdmVycmlkZT8uKGZpbGVQYXRoKTtcbiAgICB9XG5cbiAgICBvdXQgPSByZXN1bHQ7XG4gIH0gZWxzZSB7XG4gICAgb25Xcml0ZShmaWxlUGF0aCk7XG4gICAgb25OZXc/LihmaWxlUGF0aCk7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgaW5xdWlyZXIgZnJvbSBcImlucXVpcmVyXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgZXhlY0luc3RhbGwgfSBmcm9tIFwiLi4vbGliL2V4ZWMvZXhlYy1pbnN0YWxsLmpzXCI7XG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuLi9saWIvZXhlYy9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IGZ1enp5U291cmNlIH0gZnJvbSBcIi4uL2xpYi91dGlsL2Z1enp5LXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgZ2V0UGFja2FnZU1hbmFnZXIgfSBmcm9tIFwiLi4vbGliL2V4ZWMvZ2V0LXBhY2thZ2UtbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgaXNQYWNrYWdlQXZhaWxhYmxlIH0gZnJvbSBcIi4uL2xpYi91dGlsL2lzLXBhY2thZ2UtYXZhaWxhYmxlLmpzXCI7XG5pbXBvcnQgeyB3YWl0IH0gZnJvbSBcIi4uL2xpYi91dGlsL3dhaXQuanNcIjtcblxuZXhwb3J0IGVudW0gRGVwZW5kZW5jeVJlc29sdXRpb24ge1xuICBJbnN0YWxsID0gXCJJbnN0YWxsIHRvIGN1cnJlbnQgcHJvamVjdFwiLFxuICBJbnN0YWxsT25jZSA9IFwiSW5zdGFsbCBvbmNlIHRvIGN1cnJlbnQgcHJvamVjdFwiLFxuICBJbnN0YWxsQWJvdmUgPSBcIkluc3RhbGwgaW4gcGFyZW50IGRpcmVjdG9yeSAoTWFrZXMgcGFja2FnZSBhdmFpbGFibGUgdG8gYWxsIHBlZXIgcHJvamVjdHMpXCIsXG4gIERvTm90aGluZyA9IFwiRG8gTm90aGluZyAodGhpcyB3aWxsIGVuZCB0aGlzIGN1cnJlbnQgcHJvY2VzcyBhcyB0aGUgcGFja2FnZSBpcyByZXF1aXJlZClcIixcbn1cblxuLyoqXG4gKiBUaGlzIGNoZWNrcyB0aGUgdGFyZ2V0IHByb2plY3QgZm9yIHRoZSBwcmVzZW5jZSBvZiBkZXBlbmRlbmNpZXMgdGhhdCBhcmVcbiAqIHJlcXVpcmVkIGJ1dCBhcmUgZGV0cmltZW50YWwgdG8gZXhwZXJpZW5jZSBhbmQgcGVyZm9ybWFuY2UgdG8gaW5jbHVkZSBhcyBhXG4gKiBkZXBlbmRlbmN5IG9mIHRoZSBwYWNrYWdlIGRpcmVjdGx5LlxuICpcbiAqIEFuIGV4YW1wbGUgb2Ygc3VjaCBkZXBlbmRlbmN5IHdvdWxkIGJlIHB1cHBldGVlciBhcyBoYXZpbmcgaXQgY2FuIHRyaWdnZXJcbiAqIGZ1bGwgaW5zdGFsbHMgYW5kIGNvbXBpbGF0aW9uIG9mIHRoZSBkZXBlbmRlbmN5IHBlciBwcm9qZWN0IHRoYXQgbmVlZHMgaXQuXG4gKlxuICogU28sIHRoaXMgd2lsbCByZXF1ZXN0IHRoZSBkZXBlbmRlbmN5IHRvIGJlIGluc3RhbGxlZCBhcyBhIG9uZSB0aW1lIHRvIHRoZVxuICogY3VycmVudCBwcm9qZWN0IG9yIHJlcXVlc3QgdG8gYmUgaW5zdGFsbGVkIGFib3ZlIHRoZSB0YXJnZXQgcHJvamVjdCB0byBjYXVzZVxuICogaXQgdG8gYmUgYXZhaWxhYmxlIHRvIHBlZXIgcHJvamVjdHMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVEZXBlbmRlbmNpZXMoXG4gIGRlcGVuZGVuY2llcz86IHN0cmluZ1tdLFxuICBmb3JjZVJlc29sdXRpb24/OiBEZXBlbmRlbmN5UmVzb2x1dGlvblxuKSB7XG4gIGNvbnN0IHJlcXVpcmVkRGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzIHx8IFtcInB1cHBldGVlclwiXTtcblxuICBmb3IgKGNvbnN0IGRlcGVuZGVuY3kgb2YgcmVxdWlyZWREZXBlbmRlbmNpZXMpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDaGVja2luZyBvbiBkZXBlbmRlbmN5IGF2YWlsYWJpbGl0eTpcIiwgZGVwZW5kZW5jeSk7XG4gICAgY29uc3QgaXNBdmFpbGFibGUgPSBhd2FpdCBpc1BhY2thZ2VBdmFpbGFibGUoZGVwZW5kZW5jeSk7XG5cbiAgICBpZiAoIWlzQXZhaWxhYmxlKSB7XG4gICAgICBsZXQgcmVzb2x1dGlvbiA9IGZvcmNlUmVzb2x1dGlvbjtcblxuICAgICAgaWYgKCFyZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGlucXVpcmVyLnByb21wdDx7XG4gICAgICAgICAgcmVzb2x1dGlvbjogRGVwZW5kZW5jeVJlc29sdXRpb247XG4gICAgICAgIH0+KFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBcImF1dG9jb21wbGV0ZVwiLFxuICAgICAgICAgICAgbmFtZTogXCJyZXNvbHV0aW9uXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBgSG93IGRvIHlvdSB3YW50IHRvIHJlc29sdmUgdGhlIG1pc3NpbmcgcGFja2FnZSBcIiR7ZGVwZW5kZW5jeX1cIjpgLFxuICAgICAgICAgICAgc291cmNlOiBmdXp6eVNvdXJjZShbXG4gICAgICAgICAgICAgIERlcGVuZGVuY3lSZXNvbHV0aW9uLkluc3RhbGxPbmNlLFxuICAgICAgICAgICAgICBEZXBlbmRlbmN5UmVzb2x1dGlvbi5JbnN0YWxsQWJvdmUsXG4gICAgICAgICAgICAgIERlcGVuZGVuY3lSZXNvbHV0aW9uLkRvTm90aGluZyxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuXG4gICAgICAgIHJlc29sdXRpb24gPSByZXN1bHQucmVzb2x1dGlvbjtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChyZXNvbHV0aW9uKSB7XG4gICAgICAgIGNhc2UgRGVwZW5kZW5jeVJlc29sdXRpb24uSW5zdGFsbDpcbiAgICAgICAgICBhd2FpdCBleGVjSW5zdGFsbChbZGVwZW5kZW5jeV0sIFwiRVwiKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIERlcGVuZGVuY3lSZXNvbHV0aW9uLkluc3RhbGxPbmNlOlxuICAgICAgICAgIGV4ZWNJbnN0YWxsKFtkZXBlbmRlbmN5XSwgXCJFXCIsIHRydWUpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRGVwZW5kZW5jeVJlc29sdXRpb24uSW5zdGFsbEFib3ZlOiB7XG4gICAgICAgICAgLy8gU2F2ZSB0aGUgY3VycmVudCBjd2RcbiAgICAgICAgICBjb25zdCBjd2QgPSBwcm9jZXNzLmN3ZCgpO1xuICAgICAgICAgIC8vIENoYW5nZSBkaXJlY3RvcnkgdG8gdGhlIHBhcmVudCBkaXJlY3RvcnkuXG4gICAgICAgICAgcHJvY2Vzcy5jaGRpcihcIi4uXCIpO1xuICAgICAgICAgIGNvbnN0IHBhY2thZ2VNYW5hZ2VyID0gYXdhaXQgZ2V0UGFja2FnZU1hbmFnZXIoKTtcblxuICAgICAgICAgIC8vIENoZWNrIGZvciBhIHBhY2thZ2UuanNvblxuICAgICAgICAgIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpKSB7XG4gICAgICAgICAgICAvLyBQZXJmb3JtIGFuIGluaXQgdG8gbWFrZSB0aGUgcGFja2FnZVxuICAgICAgICAgICAgZXhlY1N5bmMocGFja2FnZU1hbmFnZXJbMF0sIFtcImluaXRcIiwgXCIteVwiXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSW5zdGFsbCB0aGUgZGVwZW5kZW5jeVxuICAgICAgICAgIGF3YWl0IGV4ZWNJbnN0YWxsKFtkZXBlbmRlbmN5XSwgXCJFXCIpO1xuICAgICAgICAgIC8vIFJldHVybiB0byBvcmlnaW5hbCBjd2RcbiAgICAgICAgICBwcm9jZXNzLmNoZGlyKGN3ZCk7XG4gICAgICAgICAgLy8gUGVyZm9ybSBhbiBhd2FpdCB0byBsZXQgZmlsZSBzeXN0ZW0gZmx1c2hcbiAgICAgICAgICBhd2FpdCB3YWl0KDEwMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IGdldFBhY2thZ2VNYW5hZ2VyIH0gZnJvbSBcIi4vZ2V0LXBhY2thZ2UtbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgaXNEZWZpbmVkIH0gZnJvbSBcIi4uL3V0aWwvdHlwZXMuanNcIjtcblxuLyoqXG4gKiBFeGVjdXRlcyBhbiBgbnBtIGluc3RhbGwgW3BhY2thZ2VzLi4uXWAgaW4gdGhlIGN1cnJlbnQgY29udGV4dC5cbiAqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGNvbW1hbmQgc3VjY2VlZGVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY0luc3RhbGwoXG4gIHBhY2thZ2VzOiBzdHJpbmdbXSxcbiAgbW9kZT86IFwiRFwiIHwgXCJERVwiIHwgXCJFXCIsXG4gIG5vU2F2ZT86IGJvb2xlYW5cbikge1xuICBjb25zdCBtYW5hZ2VyID0gYXdhaXQgZ2V0UGFja2FnZU1hbmFnZXIoKTtcbiAgY29uc3QgdG9JbnN0YWxsID0gcGFja2FnZXMuZmlsdGVyKGlzRGVmaW5lZCk7XG5cbiAgcmV0dXJuIGF3YWl0IGV4ZWNTeW5jKG1hbmFnZXJbMF0sIFtcbiAgICBcImlcIixcbiAgICBub1NhdmUgPyBcIi0tbm8tc2F2ZVwiIDogbnVsbCxcbiAgICBtb2RlID8gYC0ke21vZGV9YCA6IG51bGwsXG4gICAgLi4udG9JbnN0YWxsLFxuICBdKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZ1enp5IGZyb20gXCJmdXp6eVwiO1xuXG5leHBvcnQgY29uc3QgZnV6enlTb3VyY2UgPVxuICAob3B0aW9uczogU2V0PHN0cmluZz4gfCBzdHJpbmdbXSkgPT4gYXN5bmMgKF86IHVua25vd24sIGlucHV0OiBzdHJpbmcpID0+IHtcbiAgICBsZXQgb3B0czogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChvcHRpb25zIGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICBvcHRzID0gQXJyYXkuZnJvbShvcHRpb25zKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3B0cyA9IG9wdGlvbnM7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1enp5LmZpbHRlcihpbnB1dCB8fCBcIlwiLCBvcHRzKS5tYXAoKGUpID0+IGUuc3RyaW5nKTtcbiAgfTtcbiIsCiAgICAiLyoqXG4gKiBDaGVja3MgaWYgdGhlIHJlcXVlc3RlZCBwYWNrYWdlIGlzIGF2YWlsYWJsZSB0byB0aGUgdGFyZ2V0IHByb2plY3QuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc1BhY2thZ2VBdmFpbGFibGUocGFja2FnZU5hbWU6IHN0cmluZykge1xuICB0cnkge1xuICAgIGF3YWl0IGltcG9ydChwYWNrYWdlTmFtZSk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcIlJlcXVlc3RlZCBwYWNrYWdlIGlzIG5vdCBhdmFpbGFibGUgaW4gdGhpcyBjdXJyZW50IHByb2plY3Q6XCIsXG4gICAgICBwYWNrYWdlTmFtZVxuICAgICk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iCiAgXSwKICAibWFwcGluZ3MiOiAiOztxbEJBQWEsaUJBQVEsQ0FDbkIsS0FBTSxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDckQsSUFBSyxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDcEQsT0FBUSxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDdkQsTUFBTyxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDdEQsS0FBTSxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDckQsUUFBUyxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDeEQsV0FBWSxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDM0QsVUFBVyxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDMUQsYUFBYyxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDN0QsWUFBYSxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDNUQsV0FBWSxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDM0QsY0FBZSxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDOUQsWUFBYSxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDNUQsS0FBTSxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FDckQsS0FBTSxJQUFJLElBQW1CLFdBQVcsRUFBSyxLQUFLLEdBQUcsV0FD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QUFRLE9BQU8sRUFBRSxZQUNyQztBQUFBO0FBQUEsR0FHRixFQUVBLEdBQ0csUUFBUSxPQUFPLEVBQ2YsWUFDQztBQUFBO0FBQUE7QUFBQSxLQUlGLEVBQ0MsT0FBTyxTQUFZLENBQ2xCLENBQUMsK0NBQ0UsUUFBUSxFQUNSLE1BQU0sQ0FBQyxJQUFlLENBQ3JCLFFBQVEsS0FBSyx5Q0FBeUMsRUFDdEQsUUFBUSxLQUFLLEVBQUksT0FBUyxFQUFJLE9BQU8sRUFDckMsUUFBUSxLQUFLLENBQUMsRUFDZixFQUNKLEVBRUgsSUFBTSxHQUFLLEVBQVEsUUFBUSxJQUFJLEVBQUUsWUFDL0I7QUFBQTtBQUFBO0FBQUEsR0FJRixFQUVBLEdBQUcsUUFBUSxLQUFLLEVBQ2IsWUFDQztBQUFBO0FBQUE7QUFBQSxLQUlGLEVBQ0MsT0FBTyxTQUFZLENBQ2xCLENBQUMsK0NBQWtDLFFBQVEsRUFBRSxFQUFFLE1BQU0sQ0FBQyxJQUFlLENBQ25FLFFBQVEsS0FBSyxnQ0FBZ0MsRUFDN0MsUUFBUSxLQUFLLEVBQUksT0FBUyxFQUFJLE9BQU8sRUFDckMsUUFBUSxLQUFLLENBQUMsRUFDZixFQUNGLEVBRUgsSUFBTSxHQUFLLEVBQ1IsUUFBUSxJQUFJLEVBQ1osT0FDQyxvQkFDQTtBQUFBO0FBQUEsS0FHRixFQUNDLE9BQ0MscUJBQ0E7QUFBQTtBQUFBLEdBR0YsRUFDQyxPQUNDLHlCQUNBO0FBQUE7QUFBQSxHQUdGLEVBRUYsR0FBRyxRQUFRLFNBQVMsRUFDakIsWUFDQztBQUFBO0FBQUE7QUFBQSxLQUlGLEVBQ0MsT0FBTyxTQUFZLENBQ2xCLE1BQVEsVUFBUyxXQUFVLGdCQUFpQixHQUFNLFFBQVEsSUFBSSxFQUFFLEtBTWhFLElBQUssSUFBWSxJQUFhLEVBQzVCLFFBQVEsS0FDTixvRUFDRixFQUNBLFFBQVEsS0FBSyxDQUFDLEVBSWhCLE1BQU0sR0FBbUIsRUFBRSxNQUFNLElBQU0sUUFBUSxLQUFLLENBQUMsQ0FBQyxFQUN0RCxRQUFRLEtBQUsseUNBQXlDLEdBRXJELCtDQUNFLFFBQVEsRUFBUyxFQUFVLENBQVksRUFDdkMsTUFBTSxDQUFDLElBQWUsQ0FDckIsUUFBUSxLQUFLLHdDQUF3QyxFQUNyRCxRQUFRLEtBQUssRUFBSSxPQUFTLEVBQUksT0FBTyxFQUNyQyxRQUFRLEtBQUssQ0FBQyxFQUNmLEVBQ0osRUFTSCxHQUFJIiwKICAiZGVidWdJZCI6ICJBOTRENjVDMDgyNTdERjM0NjQ3NTZFMjE2NDc1NkUyMSIsCiAgIm5hbWVzIjogW10KfQ==
