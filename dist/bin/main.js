#!/usr/bin/env bun
// @bun
import{createRequire as d9}from"node:module";var v9=Object.create;var{getPrototypeOf:m9,defineProperty:f1,getOwnPropertyNames:f9}=Object;var g9=Object.prototype.hasOwnProperty;var u9=($,Y,K)=>{K=$!=null?v9(m9($)):{};const Z=Y||!$||!$.__esModule?f1(K,"default",{value:$,enumerable:!0}):K;for(let G of f9($))if(!g9.call(Z,G))f1(Z,G,{get:()=>$[G],enumerable:!0});return Z};var F1=($,Y)=>()=>(Y||$((Y={exports:{}}).exports,Y),Y.exports);var j=($,Y)=>{for(var K in Y)f1($,K,{get:Y[K],enumerable:!0,configurable:!0,set:(Z)=>Y[K]=()=>Z})};var L=($,Y)=>()=>($&&(Y=$($=0)),Y);var P=d9(import.meta.url);var z;var A=L(()=>{z={cyan:(...$)=>`\x1B[36m${$.join(" ")}\x1B[0m`,red:(...$)=>`\x1B[31m${$.join(" ")}\x1B[0m`,yellow:(...$)=>`\x1B[33m${$.join(" ")}\x1B[0m`,green:(...$)=>`\x1B[32m${$.join(" ")}\x1B[0m`,blue:(...$)=>`\x1B[34m${$.join(" ")}\x1B[0m`,magenta:(...$)=>`\x1B[35m${$.join(" ")}\x1B[0m`,cyanBright:(...$)=>`\x1B[96m${$.join(" ")}\x1B[0m`,redBright:(...$)=>`\x1B[91m${$.join(" ")}\x1B[0m`,yellowBright:(...$)=>`\x1B[93m${$.join(" ")}\x1B[0m`,greenBright:(...$)=>`\x1B[92m${$.join(" ")}\x1B[0m`,blueBright:(...$)=>`\x1B[94m${$.join(" ")}\x1B[0m`,magentaBright:(...$)=>`\x1B[95m${$.join(" ")}\x1B[0m`,whiteBright:(...$)=>`\x1B[97m${$.join(" ")}\x1B[0m`,gray:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,grey:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,white:(...$)=>`\x1B[37m${$.join(" ")}\x1B[0m`,black:(...$)=>`\x1B[30m${$.join(" ")}\x1B[0m`,blackBright:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,bgCyan:(...$)=>`\x1B[46m${$.join(" ")}\x1B[0m`,bgRed:(...$)=>`\x1B[41m${$.join(" ")}\x1B[0m`,bgYellow:(...$)=>`\x1B[43m${$.join(" ")}\x1B[0m`,bgGreen:(...$)=>`\x1B[42m${$.join(" ")}\x1B[0m`,bgBlue:(...$)=>`\x1B[44m${$.join(" ")}\x1B[0m`,bgMagenta:(...$)=>`\x1B[45m${$.join(" ")}\x1B[0m`,bgCyanBright:(...$)=>`\x1B[106m${$.join(" ")}\x1B[0m`,bgRedBright:(...$)=>`\x1B[101m${$.join(" ")}\x1B[0m`,bgYellowBright:(...$)=>`\x1B[103m${$.join(" ")}\x1B[0m`,bgGreenBright:(...$)=>`\x1B[102m${$.join(" ")}\x1B[0m`,bgBlueBright:(...$)=>`\x1B[104m${$.join(" ")}\x1B[0m`,bgMagentaBright:(...$)=>`\x1B[105m${$.join(" ")}\x1B[0m`,cyanBrightBold:(...$)=>`\x1B[96m\x1B[1m${$.join(" ")}\x1B[0m`,redBrightBold:(...$)=>`\x1B[91m\x1B[1m${$.join(" ")}\x1B[0m`,yellowBrightBold:(...$)=>`\x1B[93m\x1B[1m${$.join(" ")}\x1B[0m`,greenBrightBold:(...$)=>`\x1B[92m\x1B[1m${$.join(" ")}\x1B[0m`,blueBrightBold:(...$)=>`\x1B[94m\x1B[1m${$.join(" ")}\x1B[0m`,magentaBrightBold:(...$)=>`\x1B[95m\x1B[1m${$.join(" ")}\x1B[0m`,whiteBrightBold:(...$)=>`\x1B[97m\x1B[1m${$.join(" ")}\x1B[0m`,grayBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`,greyBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`,whiteBold:(...$)=>`\x1B[37m\x1B[1m${$.join(" ")}\x1B[0m`,blackBold:(...$)=>`\x1B[30m\x1B[1m${$.join(" ")}\x1B[0m`,blackBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`}});import{stripIndent as h9}from"common-tags";function b($,...Y){return`${h9($,...Y)}\n\n`}var n=()=>{};function V0($){return $&&$.charCodeAt!==void 0}function R($){return $!==void 0&&$!==null}import l9 from"inquirer";import{stripIndent as c9}from"common-tags";async function v($,Y,K){const{result:Z}=await l9.prompt([{type:"confirm",name:"result",message:c9`${$}`,default:Y}]);if(Z)K?.();return Z}var G1=()=>{};function u1($){return $!==void 0&&$!==null}function L1($){return u1($)&&u1($.status)&&u1($.stderr)}async function M1($,Y=[]){try{const K=Bun.spawnSync([$,...Y.filter(R)],{stdio:["inherit","inherit","inherit"],env:process.env});if(K.exitCode!==0){if(!M1.silent)console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.exitCode}`),console.error(new Error().stack);return!1}}catch(K){if(!M1.silent){if(L1(K))console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.status}`);else if(K instanceof Error)console.error(K.message);console.error(new Error().stack)}return!1}return!0}var M;var C=L(()=>{M1.silent=!1;M=M1});async function k(){if(J1)return J1;if(await M("bun",["--version"]))J1=["bun","bunx"];else J1=["npm","npx"];return J1}var J1=null;var s=L(()=>{C()});async function E($){await new Promise((Y)=>setTimeout(Y,$))}import r9 from"fs-extra";import h from"path";async function a(){console.warn("Building Vite config using base:",z.yellowBrightBold(h.resolve("vite.config.ts")));let $=await(await import(h.resolve("vite.config.ts"))).default();const Y=await r9.readJSONSync(h.resolve("tsconfig.json"));return $={...$,logLevel:"info",mode:"development",root:h.resolve("app/client"),clearScreen:!0,build:{...$.build,cssCodeSplit:!0,outDir:h.resolve("build/client"),sourcemap:!0,rollupOptions:{output:{manualChunks:void 0}},watch:{...$.build?.watch,include:[...(Array.isArray($.build?.watch?.include)?$.build?.watch?.include:[$.build?.watch?.include])||[],...Y?.include?.map((K)=>h.resolve(K))||[],"tsconfig.json"].filter(Boolean)},emptyOutDir:!0},resolve:{alias:{config:h.resolve("app/config")}}},$}var b1=L(()=>{A()});import e9 from"deepmerge";import $3 from"fs-extra";import Y3 from"path";async function u(){const $=$3.readJSONSync(Y3.resolve("package.json"));return e9($.dependencies||{},$.peerDependencies||{})}var _1=()=>{};import k0 from"fs-extra";import P0 from"path";async function w(){return k0.readJSONSync(P0.resolve("package.json")).version||""}var m=()=>{};import*as y0 from"vite";import K3 from"fs-extra";import d1 from"path";async function Q1(){if(process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await w(),console.warn(z.yellowBrightBold("Starting Vite client build...")),!K3.existsSync(d1.resolve("app/client/index.ts"))){console.warn("Tried to start development process for the app client, but no entry file was found.");return}const $=await a();$.root=d1.resolve("app/client"),$.build.outDir=d1.resolve("build/client"),$.build.rollupOptions.external=Object.keys(await u()),await y0.build($),console.warn(z.yellowBrightBold("Vite client build process started..."))}var h1=L(()=>{b1();A();_1();m()});function v0($){const Y=(K)=>(Z)=>{if($(K,Z),Z)process.exit(1);else process.exit(0)};process.on("exit",Y("exit")),process.on("SIGINT",Y("SIGINT")),process.on("SIGUSR1",Y("SIGUSR1")),process.on("SIGUSR2",Y("SIGUSR2")),process.on("SIGTERM",Y("SIGTERM")),process.on("uncaughtException",Y("uncaughtException"))}function Z3(){if(m0!==null)return;m0=setInterval(()=>{while(l1.length>0){const $=l1.shift();if($)console.log(...$)}},400)}function c1(...$){l1.push($),Z3()}var l1,m0=null;var f0=L(()=>{l1=[]});import G3 from"child_process";import p1 from"path";import J3 from"readline";async function z1($){console.warn("\nRunning the App server at: ",z.yellowBrightBold(p1.resolve("app/server")),"\n"),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await w(),process.env.RESOURCE_PATH=process.env.RESOURCE_PATH||p1.resolve("build/client");const Y=await k();if(Y[0]!=="bun")console.error("Currently only an environment with bun installed is supported for this command.");const K=G3.spawn(Y[0],["--watch",p1.resolve("app/server/index.ts")]);process.stdin.setRawMode?.(!0),process.stdin.resume(),process.stdin.setEncoding("utf8"),J3.emitKeypressEvents(process.stdin);let Z=!1;if(process.stdin.on("keypress",async(G,J)=>{if(J&&J.ctrl&&J.name==="c")K.kill(),process.exit(0);else if(J&&J.ctrl&&J.name==="d")K.kill(),process.exit(0);else if(G.toString()==="b"||G.toString()==="B"){if(Z)return;Z=!0,await Q1(),Z=!1}else if(G.toString()==="q"||G.toString()==="Q")if(K.kill(),J.shift)process.exit(123);else process.exit(0)}),process.stdin.pipe(K.stdin),$)$(K);else K.stdout.on("data",function(G){c1(`${G.toString().slice(0,-1)}`)}),K.stderr.on("data",function(G){c1(`${G.toString().slice(0,-1)}`)});v0(async(G,J)=>{if(K.kill(),console.warn("EXIT BUILD SERVER"),console.warn(z.redBrightBold(G)),J&&J instanceof Error)console.warn(z.redBrightBold(J.stack||J.message));process.exit(0)})}var i1=L(()=>{h1();A();s();f0();m()});var u0={};j(u0,{default:()=>g0});async function g0(){process.env.NODE_ENV="development",Q1(),console.warn(z.yellowBrightBold("Starting dev server...")),process.env.VITE_RELEASE_VERSION=await w(),await z1()}var d0=L(()=>{h1();i1();A();m()});import t from"path";import Q3 from"url";async function h0(){if(t.basename(t.resolve(n1,".."))==="dist")return t.resolve(n1,"../../");return t.resolve(n1,"../../../")}var n1;var l0=L(()=>{n1=Q3.fileURLToPath(new URL(".",import.meta.url))});async function l($,Y=[]){const K=await k();return M(K[0],["run",$,Y.length>0&&Y[0]!=="--"?"--":void 0,...Y])}var q1=L(()=>{C();s()});var o1={};j(o1,{default:()=>c0});import s1 from"path";async function c0($,Y,...K){const Z=s1.resolve(".");process.env.PROJECT_ROOT=Z,process.env.VITE_RELEASE_VERSION=await w();const G=s1.resolve(".storybook"),J=await h0();if(process.chdir(J),Y&&Y.length>0)process.env.NODE_MODULES_STORIES=Y.join(",");if($==="build"){if(!l("storybook",["build","-c",G,"-o",`"${s1.resolve(Z,"storybook-static")}"`]))console.error(z.redBrightBold("Failed to build storybook"))}else if(!l("storybook",["dev","--no-version-updates","-p",process.env.PORT||"6006","-c",`"${G}"`]))console.error(z.redBrightBold("Failed to run storybook"))}var a1=L(()=>{A();l0();q1();m()});var r1=F1((G5,i0)=>{function z3(){try{return p0.statSync("/.dockerenv"),!0}catch($){return!1}}function X3(){try{return p0.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch($){return!1}}var p0=import.meta.require("fs"),t1;i0.exports=()=>{if(t1===void 0)t1=z3()||X3();return t1}});var o0=F1((J5,e1)=>{var W3=import.meta.require("os"),B3=import.meta.require("fs"),n0=r1(),s0=()=>{if(process.platform!=="linux")return!1;if(W3.release().toLowerCase().includes("microsoft")){if(n0())return!1;return!0}try{return B3.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!n0():!1}catch($){return!1}};if(process.env.__IS_WSL_TEST__)e1.exports=s0;else e1.exports=s0()});var t0=F1((Q5,a0)=>{a0.exports=($,Y,K)=>{const Z=(G)=>Object.defineProperty($,Y,{value:G,enumerable:!0,writable:!0});return Object.defineProperty($,Y,{configurable:!0,enumerable:!0,get(){const G=K();return Z(G),G},set(G){Z(G)}}),$}});var G$=F1((z5,Z$)=>{function b3(){if($0===void 0)$0=M3()||L3();return $0}function Y$($){if(typeof $==="string"||Array.isArray($))return $;const{[e0]:Y}=$;if(!Y)throw new Error(`${e0} is not supported`);return Y}function Z0({[r]:$},{wsl:Y}){if(Y&&D1)return Y$(Y);if(!$)throw new Error(`${r} is not supported`);return Y$($)}var __dirname="/Users/diniden/Desktop/VoidRay/dev-ops/node-devops/node_modules/open",H3=import.meta.require("path"),F3=import.meta.require("child_process"),{promises:N1,constants:K$}=import.meta.require("fs"),D1=o0(),L3=r1(),Y0=t0(),r0=H3.join(__dirname,"xdg-open"),{platform:r,arch:e0}=process,M3=()=>{try{return N1.statSync("/run/.containerenv"),!0}catch{return!1}},$0,_3=(()=>{let Y;return async function(){if(Y)return Y;const K="/etc/wsl.conf";let Z=!1;try{await N1.access(K,K$.F_OK),Z=!0}catch{}if(!Z)return"/mnt/";const G=await N1.readFile(K,{encoding:"utf8"}),J=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(G);if(!J)return"/mnt/";return Y=J.groups.mountPoint.trim(),Y=Y.endsWith("/")?Y:`${Y}/`,Y}})(),$$=async($,Y)=>{let K;for(let Z of $)try{return await Y(Z)}catch(G){K=G}throw K},O1=async($)=>{if($={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...$},Array.isArray($.app))return $$($.app,(X)=>O1({...$,app:X}));let{name:Y,arguments:K=[]}=$.app||{};if(K=[...K],Array.isArray(Y))return $$(Y,(X)=>O1({...$,app:{name:X,arguments:K}}));let Z;const G=[],J={};if(r==="darwin"){if(Z="open",$.wait)G.push("--wait-apps");if($.background)G.push("--background");if($.newInstance)G.push("--new");if(Y)G.push("-a",Y)}else if(r==="win32"||D1&&!b3()&&!Y){const X=await _3();if(Z=D1?`${X}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,G.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),!D1)J.windowsVerbatimArguments=!0;const W=["Start"];if($.wait)W.push("-Wait");if(Y){if(W.push(`"\`"${Y}\`""`,"-ArgumentList"),$.target)K.unshift($.target)}else if($.target)W.push(`"${$.target}"`);if(K.length>0)K=K.map((F)=>`"\`"${F}\`""`),W.push(K.join(","));$.target=Buffer.from(W.join(" "),"utf16le").toString("base64")}else{if(Y)Z=Y;else{const X=!__dirname||__dirname==="/";let W=!1;try{await N1.access(r0,K$.X_OK),W=!0}catch{}Z=process.versions.electron||r==="android"||X||!W?"xdg-open":r0}if(K.length>0)G.push(...K);if(!$.wait)J.stdio="ignore",J.detached=!0}if($.target)G.push($.target);if(r==="darwin"&&K.length>0)G.push("--args",...K);const Q=F3.spawn(Z,G,J);if($.wait)return new Promise((X,W)=>{Q.once("error",W),Q.once("close",(F)=>{if(!$.allowNonzeroExitCode&&F>0){W(new Error(`Exited with code ${F}`));return}X(Q)})});return Q.unref(),Q},K0=($,Y)=>{if(typeof $!=="string")throw new TypeError("Expected a `target`");return O1({...Y,target:$})},q3=($,Y)=>{if(typeof $!=="string")throw new TypeError("Expected a `name`");const{arguments:K=[]}=Y||{};if(K!==void 0&&K!==null&&!Array.isArray(K))throw new TypeError("Expected `appArguments` as Array type");return O1({...Y,app:{name:$,arguments:K}})},A1={};Y0(A1,"chrome",()=>Z0({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Y0(A1,"firefox",()=>Z0({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Y0(A1,"edge",()=>Z0({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));K0.apps=A1;K0.openApp=q3;Z$.exports=K0});async function O($,Y=[]){try{const K=Bun.spawnSync([$,...Y.filter(R)],{stdio:["inherit","pipe","pipe"],env:process.env});if(K.exitCode!==0)return console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.exitCode}`),console.error(new Error().stack),null;return(K.stdout||"").toString()}catch(K){if(L1(K))console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.status}`);else if(K instanceof Error)console.error(K.message);return console.error(new Error().stack),null}}var c=()=>{};function J$({template:$,options:Y,required:K,doubleCurlyBrackets:Z,onError:G,onToken:J}){const Q=new Map,X=new Map,W=new Map,F=new Map;let B=/\$\{([^\}]*)\}/g;if(Z)B=/\$\{\{([^\}]*)\}\}/g;const D=$.replace(B,(q,H)=>{let I="";if(F.set(H,(F.get(H)||0)+1),H in Y){Q.set(H,(Q.get(H)||0)+1);const O0=Y[H];if(O0!==void 0)I=O0}else X.set(H,(X.get(H)||0)+1);if(J){if(I=J(H,I),I!==H)Q.set(H,(Q.get(H)||0)+1),X.delete(H)}return I});Object.keys(Y).forEach((q)=>{if(!Q.get(q))W.set(q,(W.get(q)||0)+1)});const N={resolvedtemplateOptions:Q,template:D,templateProvidedOptions:F,unresolvedProvidedOptions:W,unresolvedTemplateOptions:X};if(K)K.values.forEach((q)=>{if(N.unresolvedProvidedOptions.get(q)){const H=`${K.name}: Could not resolve all the required inputs. Input: ${q}`;if(G)G(H);else console.error(H)}else if(N.unresolvedTemplateOptions.get(q)){const H=`${K.name}: A required option was not provided in the options parameter. Option: ${q}`;if(G)G(H);else console.error(H)}else if(!N.resolvedtemplateOptions.get(q)){const H=`${K.name}: A required option was not provided in the options parameter. Option: ${q}`;if(G)G(H);else console.error(H)}});return N}var F$={};j(F$,{default:()=>H$});import X1 from"fs-extra";import Q$ from"hostile";import G0 from"path";import z$ from"valid-url";function D3($){return $&&typeof $==="function"}function X$($,Y,...K){return new Promise((Z,G)=>{const J=$[Y];if(!D3(J)){G(new Error(`${String(Y)} is not a function`));return}J(...K,(Q,X)=>{if(Q)console.warn(Q),G(Q),process.exit(1);else Z(X||void 0)})})}async function N3(){const Y=X1.readJSONSync(G0.resolve("package.json")).hosts;if(!Y)return;const K=Object.keys(Y);let Z=await X$(Q$,"get",!1);const G=[];console.warn(z.yellow("Updating hosts file..."));for(let Q of K)try{if(!Z.find((X)=>X[0]===Q&&X[1]===Y[Q]))G.push([Q,Y[Q]])}catch(X){if(X instanceof Error)console.warn(z.red(X.message))}if(G.length>0){console.warn(z.yellow("Adding hosts (You may be prompted for administrator password):\n\t",G.map((X)=>`${X[0]} => ${X[1]}`).join("\n\t"))),await M("sudo",["echo","Granted sudo access to update hosts file."]);const Q=await O("stat",["-f","%p","/etc/hosts"]).toString();await M("sudo",["chmod","666","/etc/hosts"]);for(let X of G)X1.appendFileSync("/etc/hosts",`${X[0]} ${X[1]}`);X1.appendFileSync("/etc/hosts","\n"),await M("sudo",["chmod",Q.substring(Q.length-4).trim(),"/etc/hosts"])}await E(500),console.warn(z.yellow("Verifying hosts file...")),Z=await X$(Q$,"get",!1);let J=!1;if(G.forEach(([Q,X])=>{if(!Z.find((W)=>W[0]===Q&&W[1]===Y[Q]))J=!0,console.warn(z.redBright(`Failed to add host: ${z.yellowBright(Q)} => ${z.yellowBright(X)}`))}),J)console.warn(z.red(b`
        *************************************************************************
        * Some hosts specified in the package.json were not able to be written  *
        * to the hosts file for the system. You can amend this by editing the   *
        * file yourself, or by trying to run this script again as an admin.     *
        *************************************************************************
      `))}function W$($,Y,K){let Z=Y;if(z$.isWebUri(Y))Z=Y;else if($[Y])Z=$[Y];const G=J$({options:K,template:Z});if(G.unresolvedTemplateOptions.size>0)throw console.warn(z.red(b`
          You must specify these env variables for this URL to work:
          ${Array.from(G.unresolvedTemplateOptions.keys()).join("\n\t")}
        `)),new Error("Missing env configuration for URL");if(Z=G.template,z$.isWebUri(Z))console.warn("Navigating to:",z.cyanBrightBold(Z)),B$.default(Z);else console.warn("Can not open invalid URL:",z.redBrightBold(Z))}async function H$($,Y){const Z=X1.readJSONSync(G0.resolve("package.json"))?.url||{},G=Y?.reduce((Q,X,W)=>{return Q[`${W+1}`]=X,Q},{})||{};if(!$||$.length<=0){console.warn(b`
      Available URLs:
        ${z.cyanBrightBold(Object.keys(Z).join("\n        "))}
    `);return}await N3();const J={...process.env,...G};if(Array.isArray($))$.forEach((Q)=>{W$(Z,Q,J)});else W$(Z,$,J)}var B$;var L$=L(()=>{B$=u9(G$(),1);A();n();C();c()});import M$ from"child_process";async function e(){try{if(M$.execSync("git status --porcelain=v1 2>/dev/null",{encoding:"utf-8"}).trim().split("\n").filter(Boolean).length===0)return!1}catch($){return!0}return!0}var x1=()=>{};async function I1($){if($){if(!await v(`
      Would you like to return back to development?
      Runs the following:
        git fetch
        git checkout dev
        git reset --hard origin/dev
    `))return}if(await e())return console.error("Can not return to dev branch as changes are present on the current branch."),!1;let Y=!1;if(!await M("git",["fetch"]))Y=!0;if(!await M("git",["checkout","dev"]))Y=!0;if(!await M("git",["reset","--hard","origin/dev"]))Y=!0;if(Y)return console.error("Could not return to dev branch."),!1;return!0}var J0=L(()=>{C();x1();G1()});import x from"fs-extra";import O3 from"ignore";import _ from"path";async function A3(){const $=await u();console.warn("Building full distribution...");let Y=await Bun.build({entrypoints:[_.resolve("./bin/main.ts")],target:"bun",external:Object.keys($),minify:!0,sourcemap:"inline"});for(let K of Y.outputs)console.warn("Writing bin bundle resource:",z.cyanBrightBold(K.path)),await Bun.write(_.resolve("./dist/bin",K.path),K);console.warn("Building gimped distribution..."),Y=await Bun.build({entrypoints:[_.resolve("./bin/main-gimp.ts")],target:"node",external:Object.keys($),minify:!0,sourcemap:"inline"});for(let K of Y.outputs)console.warn("Writing bin bundle resource:",z.cyanBrightBold(K.path)),await Bun.write(_.resolve("./dist/bin",K.path),K);console.warn("Copying entry cross-platform distribution..."),x.copyFileSync(_.resolve("./bin/main-entry.cjs"),_.resolve("./dist/bin/main-entry.cjs"))}async function x3(){if(!x.existsSync(_.resolve("./bin/shim")))console.error("No shim distribution files found to be built");if(x.existsSync(_.resolve("./shim")))x.removeSync(_.resolve("./shim"));const $=await u();console.warn("Building shim distribution...");const Y=await Bun.build({entrypoints:[_.resolve("./bin/shim/index.ts")],target:"node",external:Object.keys($),minify:!0});for(let Z of Y.outputs)console.warn("Writing shim bundle resource:",z.cyanBrightBold(Z.path)),await Bun.write(_.resolve("./shim/src/bin/shim",Z.path),Z);x.writeFileSync(_.resolve("./shim/index.js"),'export * from "./src/bin/shim/index.js";\n',{encoding:"utf-8"}),x.writeFileSync(_.resolve("./shim/index.d.ts"),'export * from "./src/bin/shim/index.d.ts";\n',{encoding:"utf-8"});const K=x.readJSONSync(_.resolve("tsconfig.json"));if(K.exclude=K.exclude||[],K.exclude.push("./bin/lib/**"),K.include=["./bin/shim"],x.writeJSONSync(_.resolve("tsconfig.temp.json"),K),await E(500),!M("tsc",["-d","--emitDeclarationOnly","--pretty","--outDir",_.resolve("./shim/src/bin"),"--project",_.resolve("tsconfig.temp.json")]))console.warn("Failed to compile type declarations for the shim files."),x.removeSync(_.resolve("tsconfig.temp.json")),process.exit(1);x.removeSync(_.resolve("tsconfig.temp.json"))}async function I3(){console.warn(z.yellowBright("Copying template files for bin distribution"));const $=_.resolve(__dirname,"../../template"),Y=_.resolve("./dist/bin/template");x.copySync($,Y);const K=x.readdirSync(Y).map((J)=>_.resolve(Y,J,"index.ts")).filter((J)=>{if(x.existsSync(J))return!0}),Z=await u();let G=!1;for(let J of K){const Q=await Bun.build({entrypoints:[J],target:"bun",external:Object.keys(Z),minify:!0});if(!Q.success){console.error(z.redBrightBold("Build failed for template:"),z.cyanBrightBold(_.relative(Y,_.dirname(J))));for(let X of Q.logs)console.error(X);G=!0}for(let X of Q.outputs)console.warn("Writing template entry file:",z.cyanBrightBold(_.relative(Y,_.resolve(_.dirname(J),X.path)))),await Bun.write(_.resolve(_.dirname(J),X.path),X)}if(G)console.error(z.redBrightBold("Some templates have errors (see above), stopping the build process.")),process.exit(1)}async function U3(){console.warn(z.yellowBright("Copying entry shell script for bin distribution")),x.copySync(_.resolve("./bin/main-entry.sh"),_.resolve("./dist/bin/main-entry.sh")),x.copySync(_.resolve("./bin/main-entry.ps1"),_.resolve("./dist/bin/main-entry.ps1"))}async function _$(){if(console.warn(z.cyanBright("Building bin commands for the distribution.")),!x.existsSync(_.resolve("./bin/main.ts"))||!x.existsSync(_.resolve("./bin/main-entry.sh"))||Q0.ignores("bin")){console.warn(`Tried to make a release for the bin commands, but no bin/main.ts or bin/main.sh entry file was found. (or was gitignored):\n\t${_.resolve("./bin/main.ts")}\n\t${_.resolve("./bin/main.sh")}`);return}x.ensureDirSync(_.resolve("./dist")),x.ensureDirSync(_.resolve("./dist/bin/template")),await A3(),await x3(),await I3(),await U3()}var __dirname="/Users/diniden/Desktop/VoidRay/dev-ops/node-devops/bin/lib/build/bin",b$,Q0;var q$=L(()=>{A();C();_1();b$=_.resolve(".gitignore"),Q0=O3.default();if(x.existsSync(b$))Q0=Q0.add(x.readFileSync(b$).toString())});import D$ from"fs";import N$ from"path";function O$($){return{name:"vite-devops-string-replace-plugin",enforce:"pre",load(Y){const K=N$.resolve(Y),Z=[".ts",".js",".tsx",".jsx"];if(D$.existsSync(K)&&Z.includes(N$.extname(K))&&!K.includes("node_modules")&&!K.includes("\0")){let G=D$.readFileSync(K,{encoding:"utf-8"});return $.forEach((J)=>{G=G.replace(J.from,J.to)}),G}}}}var A$=()=>{};import U from"fs-extra";import V from"path";function x$($){const Y=process.env.PROJECT_ROOT||".",K=V.resolve(Y,"app/config");if(!U.existsSync(K)){console.warn(`viteDevopsAppConfigPlugin: ${z.cyanBrightBold("No app/config folder found.")}`);return}try{const Z=U.readdirSync(K).filter((B)=>{return U.statSync(V.join(K,B)).isDirectory()}),G=Z.map((B)=>V.join(K,B)),Q=Z.map((B,D)=>{if(!$)if(U.existsSync(V.join(G[D],`${B}.local`))||U.existsSync(V.join(G[D],`${B}.local.js`))||U.existsSync(V.join(G[D],`${B}.local.ts`))||U.existsSync(V.join(G[D],`${B}.local.tsx`))||U.existsSync(V.join(G[D],`${B}.local.jsx`)))return[{from:`"config/${B}/${B}"`,to:`"config/${B}/${B}.local"`},{from:`"config/${B}/${B}.js"`,to:`"config/${B}/${B}.local.js"`},{from:`"config/${B}/${B}.ts"`,to:`"config/${B}/${B}.local.ts"`}];else return[];return[{from:`"config/${B}/${B}"`,to:`"config/${B}/${B}.${$}"`},{from:`"config/${B}/${B}.js"`,to:`"config/${B}/${B}.${$}.js"`},{from:`"config/${B}/${B}.ts"`,to:`"config/${B}/${B}.${$}.ts"`}]}).reduce((B,D)=>B.concat(D),[]),F=[...!$&&(U.existsSync(V.join(K,"env.local"))||U.existsSync(V.join(K,"env.local.js"))||U.existsSync(V.join(K,"env.local.ts"))||U.existsSync(V.join(K,"env.local.tsx"))||U.existsSync(V.join(K,"env.local.jsx")))?[{from:'"config/env"',to:'"config/env.local"'},{from:'"config/env.js"',to:'"config/env.local.js"'},{from:'"config/env.ts"',to:'"config/env.local.ts"'}]:$?[{from:'"config/env"',to:`"config/env.${$}"`},{from:'"config/env.js"',to:`"config/env.${$}.js"`},{from:'"config/env.ts"',to:`"config/env.${$}.ts"`}]:[],...Q];if(F.length>0)console.warn(`

  ${z.yellowBrightBold("Using the following mappings for app config:")}

  \t${z.cyanBrightBold(F.map((B)=>`\n  ${B.from} => ${B.to}`).join("\n\t"))}

      `);return O$(F)}catch(Z){console.error(Z),console.error(z.redBrightBold(`
      App config plugin failed to load. The default config paths will be used
      and any specific environment requested will be ignored.
    `))}}var I$=L(()=>{A();A$()});import*as V$ from"vite";import U1 from"fs-extra";import V3 from"ignore";import $1 from"path";async function w$($){if(console.warn(z.cyanBright("Building client files for the distribution.")),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await w(),process.env.FORCE_BUILD!=="true"){if(!U1.existsSync($1.resolve("app/client"))||z0.ignores("app/client")){console.error(`Tried to make a release for the web app client, but no app/client entry file was found. (or was gitignored):\n\t${$1.resolve("app/client")}`);return}}const Y="development";process.env.NODE_ENV="production",console.warn(`Releasing ${z.yellowBrightBold("app/client")} for Environment:`,z.cyanBrightBold($)),process.env.BUILD_ENV=$;const K=await a();if(K.plugins=[x$($),...K.plugins||[]],K.logLevel="warn",K.mode="production",K.root=$1.resolve("app/client"),K.build.outDir=$1.resolve("dist/app/client",$),K.build.watch=void 0,K.build.rollupOptions.output={dir:K.build.outDir,entryFileNames:"index.js",chunkFileNames:"index.js",manualChunks:void 0},await V$.build(K),process.env.NODE_ENV=Y,!U1.existsSync($1.resolve(`dist/app/client/${$}/index.js`)))console.error("\n\nFailed to create Client output bundle. Exiting process...\n\n"),process.exit(1)}var U$,z0;var T$=L(()=>{b1();A();m();I$();U$=$1.resolve(".gitignore"),z0=V3.default();if(U1.existsSync(U$))z0=z0.add(U1.readFileSync(U$).toString())});async function Y1($=[],Y){const K=await k();if(Y1.optimize){if(K[1]==="bunx")return M(K[1],[Y?.excludeBunFlag?null:"--bun",...$].filter(R))}return M(K[1],[...$])}var X0=L(()=>{C();s();Y1.optimize=!0});import V1 from"fs-extra";import W1 from"path";async function w1(){if(!V1.existsSync(W1.resolve("ui")))return;V1.ensureDir(W1.resolve("dist/types")),console.warn(z.yellowBrightBold("Generating .d.ts files...")),Y1(["tsc","--emitDeclarationOnly","--declaration","--outDir","dist/types","--project",W1.resolve("tsconfig.json")]);const $=V1.readdirSync(W1.resolve("dist/types"));for(let Y of $){if(Y==="ui"||Y==="util")continue;console.warn(z.yellowBright(`Removing types for folder: ${Y}`)),V1.removeSync(W1.resolve("dist/types",Y))}}var W0=L(()=>{A();X0()});import C$ from"fs-extra";import S$ from"path";async function j$(){return C$.readJSONSync(S$.resolve("package.json")).name||""}var E$=()=>{};import*as k$ from"vite";import T1 from"fs";import w3 from"ignore";import d from"path";async function P$(){if(console.warn(z.cyanBright("Copying ui files for the distribution.")),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await w(),!process.env.FORCE_BUILD){if(!T1.existsSync(d.resolve("ui"))||B0.ignores("ui")){console.error(`"No library project found (or was gitignored) for bundling release at:\n\t${d.resolve("ui")}`);return}}if(console.warn(z.yellowBrightBold("Starting Vite client build...")),!T1.existsSync(d.resolve("ui/index.ts"))){console.error("The UI folder project has no index.ts entry point to create the library.");return}await w1(),console.warn(z.yellowBrightBold("Building library bundle..."));const $=await a();$.logLevel="warn",$.root=d.resolve("ui"),$.build.lib={entry:d.resolve("ui/index.ts"),name:(await j$()).split("@").join("").split("/").join("_"),fileName:"index"},$.mode="production",$.root=d.resolve("app/client"),$.build.outDir=d.resolve("dist/ui"),$.build.watch=void 0,$.build.rollupOptions.output={dir:$.build.outDir,entryFileNames:"index.js",chunkFileNames:"index.js",manualChunks:void 0};const Y=Object.keys(await u());console.warn("Externalized Libraries that will not be included in the bundle:",Y),$.build.rollupOptions={...$.build.rollupOptions,external:Y},await k$.build($)}var R$,B0;var y$=L(()=>{b1();A();W0();_1();E$();m();R$=d.resolve(".gitignore"),B0=w3.default();if(T1.existsSync(R$))B0=B0.add(T1.readFileSync(R$).toString())});import p from"fs-extra";import f from"path";async function v$(){process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await w(),console.warn(z.cyanBright("Copying story files for the distribution."));const $=f.resolve("dist/stories"),Y=f.resolve("ui/stories"),K=f.resolve("dist");if(!p.existsSync(Y)){console.error(`Could not find stories directory:\n\t${Y}`);return}p.ensureDirSync($),p.copySync(Y,$);const Z=f.resolve("package.json"),J={name:p.readJSONSync(Z).name||"unknown",private:!0,type:"module",main:"./ui/index.js",types:"./types/ui/index.d.ts",dependencies:{},repository:{},scripts:{},devDependencies:{}};console.warn("Writing distribution package.json:",f.resolve(K,"package.json")),p.writeJSONSync(f.resolve(K,"package.json"),J),await E(500),p.ensureDirSync(f.resolve(K,"components")),J.main="../ui/index.js",J.types="../types/ui/index.d.ts",console.warn("Writing distribution package.json:",f.resolve(K,"components/package.json")),p.writeJSONSync(f.resolve(K,"components/package.json"),J),await E(500),console.warn("Finished copying stories.")}var m$=L(()=>{A();m()});var f$={};j(f$,{default:()=>S1});import C1 from"fs-extra";import K1 from"path";async function T3(){if(process.env.QUICK_BUILD==="true")return;if(await l("release",["view"]),!await v("\nShould the release continue being made?"))await I1(!0),process.exit(1)}async function C3(){console.warn("Gathering build targets from:",z.yellowBright(K1.resolve("build.conf.js")));const $=(await import(K1.resolve("build.conf.js"))).BUILD_TARGETS;if(process.env.NODE_ENV="production",console.warn("Building environments",z.redBrightBold(JSON.stringify($))),!Array.isArray($))console.error("build.conf.js must be an array of string values"),process.exit(1);for(let Y of $)await w$(Y);await P$(),await v$(),await _$()}async function S3(){try{C1.removeSync(K1.resolve("dist"))}catch($){console.warn("No dist folder to clean out.")}C1.ensureDirSync(K1.resolve("dist"))}async function j3(){try{C1.removeSync(K1.resolve("dist/test"))}catch($){console.warn("No test folder to clean out")}try{C1.removeSync(K1.resolve("dist/unit-test"))}catch($){console.warn("No unit-test folder to clean out")}}async function S1(){console.warn("Validating the release..."),await T3(),console.warn("Clear previous build..."),await S3(),console.warn("Bundling project..."),await C3(),console.warn("Final cleanup..."),await j3(),console.warn("Release Build complete!")}var H0=L(()=>{A();q1();J0();G1();q$();T$();y$();m$()});var l$={};j(l$,{default:()=>E1});import d$ from"fs-extra";import E3 from"lodash/groupBy.js";import j1 from"path";import R3 from"lodash/uniq.js";import k3 from"lodash/upperFirst.js";import{compare as P3,inc as y3}from"semver";function g3($){const Y=$.toLowerCase().split("\n").map((K)=>(K.match(/## (\w+)/)||[])[1]).filter(Boolean);if(Y.includes("breaking"))return"major";if(Y.includes("added"))return"minor";return"patch"}async function u3($){console.warn("Building release notes..."),console.warn("fetching tags...");const Y=await O("git",["tag","--list"]);if(Y===null)console.error("Could not get git tags"),process.exit(1);const K=Y.trim().split("\n").sort(P3),Z=K[(K.includes($)?K.indexOf($):K.length)-1];console.warn("fetching version hash...");const G=await O("git",["rev-list","-1",`${$}`]);if(G===null)console.error("Couldn't get current version hash"),process.exit(1);const J=G.trim();console.warn("fetching previous version hash...");let Q=await O("git",["rev-list","-1",`${Z}`]);if(Q===null){if(Q=await O("git",["rev-list","--max-parents=0","HEAD"]),Q===null)console.error("Couldn't get previous version hash"),process.exit(1)}const X=Q.trim();console.warn("fetching logs...");const W=await O("git",["log","--pretty=%B",`${X}...${J}`]);if(W===null)console.error("Couldn't get logs"),process.exit(1);const F=W.split("\n").map((N)=>{const[,q="",H=""]=N.match(/^\s*(\w+?)\s*:\s*(.*)\s*$/)||[];return{tag:h$[q.toLowerCase()],message:k3(H)}}).filter((N)=>N.tag),B=E3(F,"tag"),D=f3.filter((N)=>B[N]).map((N)=>{const q=B[N];return`## ${N.replace(/(\w)/,(H)=>H.toUpperCase())}\n\n${q.map(({tag:H,message:I})=>`- [\`${H.toUpperCase()}\`]: ${I}`).join("\n")}`}).join("\n\n");return console.warn("New release notes completed"),D}async function E1($={}){if(console.warn("Generating Release Notes..."),await O("git",["fetch","--tags"])===null)console.error("Couldn't fetch tags"),process.exit(1);const K=g$(j1.resolve("package.json")),{version:Z="0.0.1"}=K;console.warn("Current Project version:",{currentVersion:Z});const G=await u3("HEAD"),J=g3(G),Q=J&&y3(Z,J);if(!Q)console.error("Unable to determine next version",{currentVersion:Z}),process.exit(1);if($.tag){if(console.warn("Creating the new tag..."),await O("git",["tag","-a",Q,"-m",`Release ${Q}`])===null)console.error("Couldn't create tag"),process.exit(1)}if($.updatePackage){console.warn("Updating the package.json...");const W=g$(j1.resolve("package.json"));W.version=Q,u$(j1.resolve("package.json"),`${JSON.stringify(W,null,"  ")}\n`)}const X=`## ${Q}\n\n${G}`;if(!G.trim()&&$.errorOnEmpty)throw new Error("No notes were generated as no semver style messages were found");if($.file){console.warn("Writing the release notes to file:",$.file);const W=j1.resolve($.file),F=v3(W)?m3(W):"";u$(W,`${`${X}\n\n${F}`.trim()}\n`);for(let D=0;D<=100;++D){if(d$.existsSync(W))break;if(D===100)console.warn("Release notes file was not created in time for the final release commit:",z.redBrightBold(W)),process.exit(1)}if(console.warn("Adding fragments to git..."),await O("git",["add","-A"])===null)console.warn("Could not ensure all fragments are added for the next commit."),process.exit(1);if(console.warn("Committing to git..."),await O("git",["commit","-am",`Release ${Q}`])===null)console.error("Couldn't commit changes"),process.exit(1);console.warn(`\n\n${z.cyan(X)}\n\n`)}else console.warn(`\n\n${z.cyan(X)}\n\n`);process.env.VITE_RELEASE_VERSION=Q}var v3,m3,g$,u$,h$,f3;var F0=L(()=>{A();c();({existsSync:v3,readFileSync:m3,readJSONSync:g$,writeFileSync:u$}=d$),h$={breaking:"breaking",feat:"added",feature:"added",added:"added",fix:"fixed",fixed:"fixed",hotfix:"fixed",task:"task"},f3=R3(Object.values(h$))});async function R1($){return M("git",["ls-remote",$])}var L0=L(()=>{C()});async function c$($){const Y=await O("git",["remote","-v"]);if(Y===null)console.warn("Could not list remotes for the git project."),process.exit(1);const K=Y.split(/\r?\n/g),Z=K.find((J)=>J.indexOf($)>=0);if(!Z)console.warn(b`
      You MUST have a remote named ${$} which points to the repository you
      wish to deploy to.

      ${K.join("\n")}
    `),process.exit(1);const G=Z.split(/\s+/g)[1];if(!R1(G))console.warn(`
      You do not seem to have access to the repo listed in the package json of
      this project. Please ensure you have write access to the repo:
      ${G}
      and then try to run the release again.
    `),process.exit(1)}var p$=L(()=>{n();c();L0()});async function i$(){const $=await O("git",["rev-parse","--abbrev-ref","HEAD"]);if($===null){console.error("Failed to determine current branch.");return}return $.trim()||void 0}var n$=L(()=>{c()});var s$=async($,Y)=>{const K=await i$();if(!K)return console.warn("Could not determine current branch."),!1;if(await O("git",["checkout",`${Y}`])===null)return console.warn(`Could not checkout branch ${Y}`),!1;if(await O("git",["reset","--hard",`${$}/${Y}`])===null){if(console.warn(`Could not reset branch ${Y}`),await O("git",["checkout",`${K}`]))console.warn(`Could not return to original branch ${K}`);return!1}if(await O("git",["checkout",`${K}`])===null)return console.warn(`Could not return to original branch ${K}`),!1;return!0};var o$=L(()=>{c();n$()});import a$ from"fs-extra";import t$ from"path";async function r$(){return a$.readJSONSync(t$.resolve("package.json")).repository||{}}var e$=()=>{};var K9={};j(K9,{default:()=>Y9});import k1 from"fs-extra";import P1 from"path";async function d3(){const $=await r$(),Y=$.url;if(!$||!($.type!=="gitlab"||$.type!=="git"||$.type!=="bitbucket"||$.type!=="stash"))console.warn(`
      You MUST have a repository specified in your package json to use the
      release script. It must be of 'type: git' and have a valid ssh url to
      your git repo.

      Additionally, you MUST have a remote configured for your project of
      'origin' that matches the repo url listed in your package.json.

      Thus: "git remote -v" SHOULD output a line with
      origin <url in your package json repository field> (push)
    `),process.exit(1);const K=await O("git",["remote","-v"]);if(K===null)console.warn("Could not list remotes for the git project."),process.exit(1);const Z=K.split(/\r?\n/g);if(!Z.find((J)=>J.indexOf(i)>=0&&J.indexOf(Y)>=0))console.warn("Could not match package json repository to an origin remote in git CLI",{remoteListProcess:K,remotes:Z,ENSURE_REMOTE:i,ENSURE_REMOTE_PROJECT:Y}),process.exit(1);if(!R1(Y))console.warn(`
      You do not seem to have access to the repo listed in the package json of
      this project. Please ensure you have write access to the repo:
      ${Y}
      and then try to run the release again.
    `),process.exit(1);if(await e())console.error("You have uncommitted changes or the current state of the project can not be determined. Please commit or stash them before continuing."),process.exit(1);console.warn("Repository validation complete")}async function h3(){if(!await await M("git",["checkout","release"])){if(!await M("git",["checkout","-b","release"]))console.warn("Could not switch to the release branch. Make sure the branch exists locally."),process.exit(1)}if(!await M("git",["fetch",`${i}`]))console.warn("Could not fetch from remote servers."),process.exit(1);if(!await M("git",["reset","--hard",`${i}/dev`]))console.warn("Could not reset branch to dev"),process.exit(1);console.warn("Checked out release branch and updated to dev")}function l3(){try{const Y=k1.readFileSync(P1.resolve("RELEASE_NOTES.md"),"utf8").toLowerCase().split("\n").map((K)=>(K.match(/## (\w+)/)||[])[1]).filter(Boolean);if(Y.includes("breaking"))return"major";if(Y.includes("added"))return"minor";return"patch"}catch($){console.error("Could not determine release type after release was created"),process.exit(1)}}async function c3($){const Y=await w();if(!await M("git",["add","-A"]))console.warn("Could not ensure all fragments are added for the next commit."),process.exit(1);await E1({file:"RELEASE_NOTES.md",updatePackage:!0});const K=await w();if(Y===K)console.warn(`
      The release script did not detect any changes for a release. If you find
      this to be in error or you want to force a new release. Make some commits
      with proper release note formatted messages to trigger a release.
    `),process.exit(1);if($){if(l3()!=="patch")console.error(`
        Cannot create a release for an alternate branch that is not a simple
        patch. Features and breaking changes can ONLY be made on the main branch of
        development.
      `),process.exit(1)}const Z=await O("git",["log","-1","--pretty=%B"]);if(Z===null)console.warn("Could not read the last commit version information"),process.exit(1);const G=(Z.trim().toLowerCase().split("release ")[1]||"").trim();if(!G)console.warn("Could not determine release version from the last commit:\n\n",Z.toString(),"\n\n"),process.exit(1);if(k1.existsSync(P1.resolve("ui/release.json"))){try{const J=k1.readJSONSync(P1.resolve("ui/release.json"));J.version=G,k1.writeJSONSync(P1.resolve("ui/release.json"),J)}catch(J){console.warn("Could not update the release.json file with current library version."),process.exit(1)}if(!await M("git",["add","-A"]))console.warn("Could not ensure the release json was updated for the new version."),process.exit(1);if(!await M("git",["commit","--amend","--no-edit"]))console.warn("Could not amend the release commit to include the release json file."),process.exit(1)}if(G.includes('"'))console.warn("The update version generated is invalid as it contains invalid characters",{version:G}),process.exit(1);return console.warn("Updating version to",{version:G}),G}async function p3($){if(!await M("git",["tag","-a",$,"-m",`Release ${$}`]))console.warn("Could not make tag for git commit"),process.exit(1)}async function $9($,Y,K,Z,G){if(!await M("git",["push",G?"-f":void 0,$,`${K}:${Z}`]))console.warn(`Could not push release commit to ${$}`),process.exit(1);if(!await M("git",["push",$,Y]))console.warn("Could not push tag to the remote repository"),process.exit(1)}async function i3($,Y){if($&&$.length>0){if(!await v(b`
        The build and release was successful, would you like to release to the
        specified additional remotes?

        ${z.cyanBrightBold($.join("\n"))}
      `))return}if(!await M("git",["fetch",i]))console.warn("Could not fetch from remote servers."),process.exit(1);for(let K of $){const[Z,G,J,Q]=K.split(":");await c$(Z),await s$(i,G||"master"),await $9(Z,Y,G||"master",J||"master",Q==="force")}}async function n3($){process.env.NODE_ENV="production",await d3(),await h3(),await S1();const Y=await c3();if(await p3(Y),await $9(i,Y,"release","release",!0),await v("Would you like to run pr release?"))await l("pr",["release"]);await i3($,Y),await I1(!0)}async function Y9($){console.warn("Executing release script"),n3($)}var i="origin";var Z9=L(()=>{H0();F0();A();n();q1();C();c();L0();p$();x1();J0();o$();G1();e$();m()});var J9={};j(J9,{default:()=>G9});async function G9(){await w1()}var Q9=L(()=>{W0()});var M0={};j(M0,{default:()=>X9});import g from"fs-extra";import s3 from"ignore";import S from"path";async function o3($){const Y=g.readJSONSync(S.resolve("tsconfig.json"));if(Y.exclude=Y.exclude||[],Y.include=(Y?.include||[]).filter((Z)=>!y1.ignores(S.relative("./",Z))),g.writeJSONSync(S.resolve("tsconfig.temp.json"),Y),await E(500),$==="watch"){const Z=async()=>{console.warn("Exit TS process");try{g.removeSync(S.resolve("tsconfig.temp.json"))}catch(G){}process.exit(0)};process.on("exit",Z),process.on("SIGINT",Z),process.on("SIGUSR1",Z),process.on("SIGUSR2",Z),process.on("SIGTERM",Z),process.on("uncaughtException",Z)}if(!M("tsc",["-d",$==="watch"?"--watch":"","--incremental","--noemit","--pretty","--tsBuildInfoFile",S.resolve("node_modules/.cache/tsc/tsc.tsbuildinfo"),"--outDir",S.resolve("dist"),"--project",S.resolve("tsconfig.temp.json")]))console.warn("Failed to compile type declarations"),g.removeSync(S.resolve("tsconfig.temp.json")),process.exit(1);const K=(Y?.include||[]).filter((Z)=>!y1.ignores(S.relative("./",Z))).map((Z)=>S.resolve(Z)).filter((Z)=>g.existsSync(Z)&&!Z.includes("node_modules"));if(K.length>0){if(!M("eslint",[...K,"-c",S.resolve(".eslintrc"),"--ext",".ts","--ext",".tsx"]))console.warn("Failed eslint checks."),g.removeSync(S.resolve("tsconfig.temp.json")),process.exit(1)}g.removeSync(S.resolve("tsconfig.temp.json"))}async function X9($){await o3($)}var z9,y1;var b0=L(()=>{C();z9=S.resolve(".gitignore"),y1=s3.default();if(g.existsSync(z9))y1=y1.add(g.readFileSync(z9).toString())});var B9={};j(B9,{default:()=>W9});async function W9(){console.warn(z.yellowBrightBold("Starting server...")),await z1()}var H9=L(()=>{i1();A()});var _9={};j(_9,{default:()=>b9});import a3 from"fs-extra";import _0 from"path";async function M9($){if(!a3.existsSync($))return console.warn("Attempted to start a server but no server distribution was found at",$),!1;return await M("bun",[`${$}`]),!0}async function F9(){const $=_0.resolve("docs/index.js");return await M9($)}async function L9(){process.env.RESOURCE_PATH=_0.resolve("dist/app/client");const $=_0.resolve("dist/app/server/index.js");return await M9($)}async function b9($,Y){const{PORT:K="80"}=process.env;process.env.PORT=K;let Z=!1;switch($){case"app":Z=await L9();break;case"devops":Z=await F9();break;default:if($)console.warn("Invalid target for start script specified",$);break}if(!Z){if(Z=await L9(),Z)return;if(Z=await F9(),Z)return}}var q9=L(()=>{C()});import t3 from"fs-extra";import q0 from"path";async function D9(){const $=q0.resolve("tsconfig.json");if(!t3.existsSync($))throw new Error("Target project does not have a TSConfig");const Y=Boolean(process.env.DEBUG),K=process.env.PATTERN,Z=process.env.WATCH,G=process.env.LESS,J=q0.resolve("jest.config.js");M.silent=!0;try{if(Y)M("node",["--inspect-brk",q0.resolve("node_modules/.bin/jest"),"--runInBand",Z?"--watchAll":"","--verbose",G==="true"?"false":void 0,"--colors","--config",J,K?`--testNamePattern ${K}`:""]);else Y1(["jest",Z?"--watchAll":"","--verbose",G==="true"?"false":void 0,"--colors","--config",J,K?`--testNamePattern=${K}`:""],{excludeBunFlag:!0})}catch(Q){console.warn("Tests failed. Please look at logs to see the errors discovered")}console.warn(z.cyanBright("Tests complete"))}var N9=L(()=>{A();X0();C()});var A9={};j(A9,{default:()=>O9});async function O9(){console.warn("Running unit tests..."),await D9()}var x9=L(()=>{N9()});var T9={};j(T9,{default:()=>w9});import I9 from"fs";import U9 from"path";import V9 from"rimraf";async function w9(){const $=U9.resolve("./node_modules/.cache/"),Y=U9.resolve("./build");if(I9.existsSync($))V9.sync($),console.warn("Cache: Clean complete");else console.warn("Cache: Already clean");if(I9.existsSync(Y))V9.sync(Y),console.warn("Build: Clean complete");else console.warn("Build: Already clean");if(await M("bun",["pm","cache","rm"]))console.warn("Bun: Clean complete");else console.warn("Bun: Already clean")}var C9=L(()=>{C()});import S9 from"path";import{createRequire as r3}from"module";async function v1($,Y){const G=r3(import.meta.url).resolve($).split("node_modules"),J=G[0],Q=G[1].split(S9.sep)[1];return S9.join(J,"node_modules",Q,"node_modules",".cache",Y)}var j9=()=>{};var R9={};j(R9,{default:()=>E9});import e3 from"fs-extra";import Z1 from"path";import $4 from"url";async function Y4($,Y,K){const Z=await import("puppeteer"),G=await v1("puppeteer","pr-release"),J=await Z.launch({headless:!1,userDataDir:Z1.resolve(B1,G),defaultViewport:null}),Q=await J.newPage();console.warn("Opening project url..."),await Q.goto($);const X=await Q.evaluate(()=>document.body.getAttribute("data-project-id"));if(!X){console.warn("No project id found, User login required...");let F=!0;J.on("disconnected",()=>{if(!F)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)}),await Q.goto($),await Q.waitForFunction(()=>{const B=document?.body?.getAttribute("data-project-id");return B!==null&&B!==void 0},{timeout:0}),await Q.close(),F=!1}else await Q.close();console.warn("Project ID found:",X,"\nOpening merge request...");const W=async(F,B,D)=>{const N=await J.newPage();await N.goto(`${$}/-/merge_requests/new?${D?"utf8=%E2%9C%93&":""}merge_request%5Bsource_project_id%5D=${X}&merge_request%5Bsource_branch%5D=${encodeURIComponent(F)}&merge_request%5Btarget_project_id%5D=${X}&merge_request%5Btarget_branch%5D=${B}`),await N.waitForFunction(()=>{const q=document.querySelector("#merge_request_title");return q!==null&&q!==void 0},{timeout:0}),await N.evaluate((q)=>{let H=document.querySelector("#merge_request_title");if(H)H.value=`Release ${q}`;if(H=document.querySelector("#merge_request_description"),H)H.value=`Release ${q}`;if(H=document.querySelector("#merge_request_force_remove_source_branch"),H)H.checked=!1,H.value="0"},Y),await new Promise((q)=>{N.on("close",()=>{q(void 0),console.warn("Gitlab ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([W("release","dev"),W("release",K)]),J.close()}async function D0($,Y,K,Z){const G=await import("puppeteer"),J=await v1("puppeteer","pr-release");let Q=await G.launch({headless:!Z,userDataDir:Z1.resolve(B1,J),defaultViewport:null});const X=await Q.newPage();if(Z){console.warn("User login required...");let D=!0;Q.on("disconnected",()=>{if(!D)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)});const N="https://github.com/login";console.warn("Opening github login page: ",N),await X.goto(N),await X.waitForFunction(()=>{const q=document?.body?.getAttribute("class")?.split(" ").find((H)=>H.startsWith("logged-in"));return q!==null&&q!==void 0},{timeout:0}),D=!1}else console.warn("Opening project url: ",$),await X.goto($);console.warn("Checking for logged-in attribute on body...");const W=await X.evaluate(()=>{return console.warn("logged-in check:",document?.body?.getAttribute("class")?.split(" ").find((D)=>D.startsWith("logged-in"))),document?.body?.getAttribute("class")?.split(" ").find((D)=>D.startsWith("logged-in"))});if(console.warn("Loggin in check:",W),!W&&Z)await Q.close(),console.error("Failed to log in the user for github."),process.exit(1);else if(!W){console.warn("Logged-in not found on body, login might be needed..."),await Q.close(),D0($,Y,K,!0);return}else Q.close();const F={headless:!1,userDataDir:Z1.resolve(B1,J),defaultViewport:null};Q=await G.launch(F);const B=async(D,N)=>{const q=await Q.newPage();await q.goto(`${$}/compare/${N}...${D}`),await q.waitForFunction(()=>{const H=document.querySelector("#repo-content-pjax-container > div > div.js-details-container.Details.js-compare-pr > div > button");return H?.click(),H!==null&&H!==void 0}),await q.evaluate(async(H)=>{let I=document.querySelector("#pull_request_title");if(I)I.value=`Release ${H}`;if(I=document.querySelector('[name="pull_request[body]"]'),I)I.value=`Release ${H}`},Y),await new Promise((H)=>{q.on("close",()=>{H(void 0),console.warn("Github ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([B("release","dev"),B("release",K)]),Q.close()}async function K4($,Y,K,Z){const G=await import("puppeteer"),J=await v1("puppeteer","pr-release");let Q=await G.launch({headless:!Z,userDataDir:Z1.resolve(B1,J),defaultViewport:null});const X=await Q.newPage();if(Z){console.warn("User login required...");let D=!0;Q.on("disconnected",()=>{if(!D)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)});const N=$;console.warn("Opening azure repo login page: ",N),await X.goto(N),await X.waitForFunction(()=>{const q=window.sessionStorage.msameid;return q!==null&&q!==void 0},{timeout:0}),D=!1}else console.warn("Opening project url: ",$),await X.goto($);console.warn("Checking for logged-in attribute on body...");const W=await X.evaluate(()=>{return console.warn("logged-in check:",window.sessionStorage.msameid),window.sessionStorage.msameid});if(console.warn("Loggin in check:",W),!W&&Z)await Q.close(),console.error("Failed to log in the user for azure."),process.exit(1);else if(!W){console.warn("MS id not found, login might be needed..."),await Q.close(),D0($,Y,K,!0);return}else Q.close();const F={headless:!1,userDataDir:Z1.resolve(B1,J),defaultViewport:null};Q=await G.launch(F);const B=async(D,N)=>{const q=await Q.newPage();await q.goto(`${$}&sourceRef=${D}&targetRef=${N}`),await q.waitForFunction(()=>{const H=document.querySelector("button.primary");return H!==null&&H!==void 0}),await q.evaluate(async(H)=>{let I=document.querySelector('[aria-label="Enter a title"]');if(I)I.value=`Release ${H}`;if(I=document.querySelector('[aria-label="Description"]'),I)I.value=`Release ${H}`},Y),await new Promise((H)=>{q.on("close",()=>{H(void 0),console.warn("Azure project ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([B("release","dev"),B("release",K)]),Q.close()}async function E9($,Y,K="master",...Z){if(!(new Set(["gitlab","git","github","azure"])).has(Y))console.error(`Unsupported repo type: ${Y}`),process.exit(1);if(await e())console.error("You have uncommitted changes or the current state of the project can not be determined. Please commit or stash them before continuing."),process.exit(1);const Q=e3.readJsonSync(Z1.resolve("package.json")).version;switch(Y){case"gitlab":await Y4($,Q,K);break;case"git":case"github":await D0($,Q,K);break;case"azure":await K4($,Q,K);break;default:console.warn("No supported repo type found")}}var B1;var k9=L(()=>{j9();x1();B1=$4.fileURLToPath(new URL(".",import.meta.url))});A();import*as Z4 from"commander";import G4 from"inquirer-autocomplete-prompt";import J4 from"inquirer";import P9 from"path";import Q4 from"yargs";A();n();import T0 from"fs-extra";import C0 from"path";A();import x0 from"fs";import I0 from"path";function A0($){const Y=$.split(/\r?\n/),K={};let Z=null,G=null;return Y.forEach((J)=>{if(J=J.trim(),J===""||J.startsWith("#"))return;if(J.endsWith("{")){Z=J.split(/\s+/)[0],K[Z]={};return}if(J==="}"){Z=null,G=null;return}const Q=J.match(/^([\w.]+)\s*=\s*(.*)$/);if(Q){const W=Q[1];let F=Q[2];if(!isNaN(parseFloat(F)))F=parseFloat(F);else if(F==="true")F=!0;else if(F==="false")F=!1;if(G)K[Z??"null"][G][W]=F;else if(Z)K[Z][W]=F;else K[W]=F;return}const X=J.match(/^([\w.]+)\.([\w.]+)\s*=\s*(.*)$/);if(X){const W=X[1],F=X[2],B=X[3];if(!K[W])K[W]={};if(!K[W][F])K[W][F]={};K[W][F][B]=null,Z=W,G=F;return}console.error(`Unrecognized line: ${J}`)}),K}function U0($){try{if(!x0.existsSync(I0.resolve(".env")))return;const Y=x0.readFileSync(I0.resolve($||".env"),"utf8"),K=A0(Y);Object.entries(K).forEach(([Z,G])=>{if(typeof G==="string")process.env[Z]=G;else if(typeof G==="number")process.env[Z]=G.toString();else if(typeof G==="boolean")process.env[Z]=G.toString()})}catch(Y){if(Y instanceof Error)console.error(z.red("Error reading .env file:\n",z.yellow(Y.stack||Y.message)))}}G1();import p9 from"fs-extra";import i9 from"inquirer";import{stripIndent as n9}from"common-tags";async function w0($,Y,K,Z,G,J){let Q=J||!1;if(p9.existsSync($)){const{result:X}=await i9.prompt([{type:"confirm",name:"result",message:n9`${Y}`,default:J}]);if(X)K($),G?.($);Q=X}else K($),Z?.($);return Q}async function s9(){const $=(await import(C0.resolve("env.config.ts"))).default;if(!$)throw new Error("No env.config.ts file found.");if(!Array.isArray($))console.error("env.config.ts is not formatted correctly. Please follow the correct type convention.");return $}async function g1($){U0();try{const Y=await s9(),K=[],Z=[];if(Y.forEach((G)=>{if(!G)return;if(G.required){if(!process.env[G.name])K.push(b`
              Missing: ${G.name}\nDesription: ${G.description}
            `)}else if(!process.env[G.name]&&G.warn!==!1)Z.push(b`
              Missing: ${G.name}\nDesription: ${G.description}
            `)}),Z.length>0)console.warn(z.yellowBrightBold("The following environment variables are recommended but missing from your environment:\n")),console.warn(z.yellowBright(b`
          ${Z.join("\n")}
        `));if(K.length>0)console.error(z.redBrightBold("The following environment variables are required but missing from your environment:\n")),console.error(z.redBright(b`
          ${K.join("\n")}
        `));if(K.length>0){if($){if(await v(b`
          There seems to be some missing environment variables. Would you like
          to generate a .env file with the default values specified in the
          env.config file?
        `)){const J=[];for(let F of Y)J.push([F.name,V0(F.default)?F.default:R(F.default)?await F.default():void 0]);const Q=J.filter((F)=>F[1]).map((F)=>`${F[0]}=${F[1]}`).join("\n");if(!Q)console.warn(b`
              There are no defaults available for this env.config. So we can not
              generate an env file you. Please review the env.config.ts file and
              properly set the default values for the required environment
              variables.
            `);const X=C0.resolve(".env");if(!await w0(X,b`
              There appears to already be a .env file.
              Would you like to add the missing defaults to it?
            `,()=>{},()=>T0.writeFile(X,Q),()=>{T0.appendFileSync(X,`\n${Q}`)},!1))console.error("Did not write the .env file. Please correct the env and try again."),process.exit(1);return console.warn("Attempting to build the env again and continue with the command..."),g1(!1)}}process.exit(1)}}catch(Y){console.warn(b`
      No ${z.cyanBrightBold("env.config.ts")} file found. Environment will not be validated.
    `)}}n();import a9 from"fs-extra";import E0 from"inquirer";import t9 from"path";C();s();async function o($,Y,K){const Z=await k(),G=$.filter(R);return await M(Z[0],["i",K?"--no-save":null,Y?`-${Y}`:null,...G])}C();import o9 from"fuzzy";var S0=($)=>async(Y,K)=>{let Z=[];if($ instanceof Set)Z=Array.from($);else Z=$;return o9.filter(K||"",Z).map((G)=>G.string)};s();async function j0($){try{return await import($),!0}catch(Y){return console.error("Requested package is not available in this current project:",$),!1}}async function R0($,Y){const K=$||["puppeteer"];for(let Z of K)if(console.warn("Checking on dependency availability:",Z),!await j0(Z)){let J=Y;if(!J)J=(await E0.prompt([{type:"autocomplete",name:"resolution",message:`How do you want to resolve the missing package "${Z}":`,source:S0(["Install once to current project","Install in parent directory (Makes package available to all peer projects)","Do Nothing (this will end this current process as the package is required)"])}])).resolution;switch(J){case"Install to current project":await o([Z],"E");break;case"Install once to current project":o([Z],"E",!0);break;case"Install in parent directory (Makes package available to all peer projects)":{const Q=process.cwd();process.chdir("..");const X=await k();if(!a9.existsSync(t9.resolve("package.json")))M(X[0],["init","-y"]);await o([Z],"E"),process.chdir(Q),await E(100);break}default:process.exit(1)}}}function N0(){return m1.debug=T.debug,m1.verbose=T.verbose,m1.pattern=T.pattern,m1}async function M4(){await g1(!0),T.parse(process.argv)}J4.registerPrompt("autocomplete",G4);var{Command:z4}=Z4,T=new z4,m1={};T.version("0.0.1");T.option("-v, --verbose","Outputs more detailed information during crashes.");T.option("--debug [param]",b`
    Provides debugging contextual information various commands might use to
    aid in developing Devops.
  `);T.option("-p, --pattern [param]",b`
    Provides a pattern for certain operations to utilize. This is primarily
    used by unit tests to filter tests to specified tests.
  `);var y9=T.command("dev").description(b`
    These are the commands associated with starting up developer environments
    for various project types or portions of a project.
  `);y9.command("vite").description(b`
      Starts up a developer environment that performs incremental builds while
      developing within the lib and app folders. Uses vite and vite
      config.
    `).action(async()=>{(await Promise.resolve().then(() => (d0(),u0))).default().catch(($)=>{console.warn("dev-vite process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});y9.command("storybook").option("-i, --include <include...>","Additional storybook modules to load into storybook. These are the names of properly formatted dependencies installed into node_modules.").description(b`
      Starts a storybook instance for developing the UI components of the
      project. This makes the "ui/stories" folder in the project the expected
      development point.
    `).action(async({include:$})=>{(await Promise.resolve().then(() => (a1(),o1))).default("",$,P9.resolve(process.cwd()),N0()).catch((Y)=>{console.warn("storybook process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var X4=T.command("storybook");X4.command("run").option("-i, --include <include...>","Additional storybook modules to load into storybook. These are the names of properly formatted dependencies installed into node_modules.").description(b`
      Starts a storybook instance for developing the UI components of the
      project. This makes the "ui/stories" folder in the project the expected
      development point.
    `).action(async({include:$})=>{(await Promise.resolve().then(() => (a1(),o1))).default("",$,P9.resolve(process.cwd()),N0()).catch((Y)=>{console.warn("storybook process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});T.command("url [uri...]").description(b`
      Simple command to open a specified URL in the browser.
    `).action(async($)=>{(await Promise.resolve().then(() => (L$(),F$))).default($).catch((Y)=>{console.warn("url process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var H1=T.command("release").description(b`
    These commands are used for facilitating distribution releases of
    applications. This includes tools for building th dist folder fragments,
    viewing the expected release notes, and actually performing a complete
    release cycle.
  `);H1.command("deploy [add-remote...]").description(b`
      Performs actions necessary to update the distribution of the project.
      This will automatically update release notes, tag the release, and
      commit and push to a 'release' branch which will be ready for merging
      into master and dev.

      Specify additional remotes to deploy to via the add-remote option.
      This will deploy the release to additional remotes (AFTER all other normal
      deploy operations complete). This value is the NAME of the remote as it
      appears when you perform a "git remote -v" command.

      You can specify a specific target branch via a colon: remote:branch
      Otherwise, this will use the same main branch as configured for this
      project.
    `).action(async($)=>{o([]),(await Promise.resolve().then(() => (Z9(),K9))).default($).catch((Y)=>{console.warn("release-deploy process exited unexpectedly\n",Y.stack||Y.message),process.exit(1)})});H1.command("types").description(b`
      Updates JUST the types in the dist folder. These are the same types
      generated when building a release.
    `).action(async()=>{(await Promise.resolve().then(() => (Q9(),J9))).default().catch(($)=>{console.warn("release-types process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});H1.command("view").description(b`
      This runs the release-view script. For this case, it will only display
      the release notes in the console. Actual generated release notes are a
      part of the release process.
    `).action(async()=>{(await Promise.resolve().then(() => (b0(),M0))).default("").then(async()=>{console.warn(z.cyanBrightBold("TS check passed, generating notes...")),(await Promise.resolve().then(() => (F0(),l$))).default().catch(($)=>{console.warn("release-notes process exited unexpectedly",$.stack||$.message),process.exit(1)})}).catch(($)=>{console.warn(z.redBrightBold(b`
              Failed TS check. Release notes will not be produced until all TS
              errors are resolved.
            `)),console.warn($.stack||$.message),process.exit(1)})});H1.command("build").description(b`
      This runs the release-build script. This generates all of the release
      fragments. This should ONLY be used for testing and experimenting. Actual
      release fragments should be properly created and deployed using the
      release deploy command.
    `).action(async()=>{(await Promise.resolve().then(() => (H0(),f$))).default().catch(($)=>{console.warn("release-deploy process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});var W4=H1.command("start").description(b`
      This starts up released related processes. This includes things like
      starting up the dev server without any additional builds or auto
      configuration for development.
    `);W4.command("server").description(b`
      Starts up the app server without any additional builds etc. Use the
      environments:

        BUILD_MODE: Targets an env to run the server for.
        RESOURCE_PATH: The path to the static files to serve.
    `).action(async()=>{(await Promise.resolve().then(() => (H9(),B9))).default().catch(($)=>{console.warn("release-start-server process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});T.command("start [target]").description(b`
      This fires up a server to make any static content available for being
      served.
      There are a few options for what content will be served by this script:

      - The web app
      - Devops API

      The start script will automatically pick the web app over the devops
      files, but you can specify a target if you have a devops API and a web
      app:

      - app
      - devops
    `).action(async($)=>{(await Promise.resolve().then(() => (q9(),_9))).default($,N0()).catch((Y)=>{console.warn("start process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var B4=T.command("test").description(b`
    These commands are used for running tests. This includes tools for
    running unit tests a single time or in a watch mode.

    Use the environment variables for modifying behavior:

    ${z.yellowBrightBold("PATTERN")} - This causes the tests to only run on
    files that match the pattern

    ${z.yellowBrightBold("LESS")} - This removes the verbose output list of
    all tests ran
  `);B4.command("run").description(b`
      Runs all unit tests in the unit-test folder once.
    `).action(async()=>{(await Promise.resolve().then(() => (x9(),A9))).default().catch(($)=>{console.warn("test-run process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var H4=T.command("clean").description(b`
    Common cleaning tools for various fragments within the project.
  `);H4.command("cache").description(b`
      Cleans out build and cache files to help ensure a complete rebuild takes
      place.
    `).action(async()=>{(await Promise.resolve().then(() => (C9(),T9))).default().catch(($)=>{console.warn("clean-cache process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var F4=T.command("ts").description(b`
    These commands are used for running typescript. This includes tools for
    running typescript compilation a single time or in a watch mode.
  `);F4.command("run").description(b`
      Runs typescript compilation to check for errors. Does NOT emit files, thus
      is a good mechanism for checking a build before running a release.
    `).action(async()=>{(await Promise.resolve().then(() => (b0(),M0))).default("").catch(($)=>{console.warn("ts process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var L4=T.command("pr").option("--repoUrl <value>",b`
      The https URL to the repo to make the PR into
    `).option("--repoType <value>",b`
    The repository type to make the PR into. Supported types are: git, gitlab
  `).option("--masterBranch <value>",b`
    This indicates which branch is the master/main of the repository.
  `);L4.command("release").description(b`
      This creates two PRs that merges the current remote release branch into
      the remote dev and master branches.
    `).action(async()=>{const{repoUrl:$,repoType:Y,masterBranch:K}=Q4(process.argv).argv;if(!$||!Y||!K)console.warn("You must specify both --repoUrl and --repoType to use this command"),process.exit(1);await R0().catch(()=>process.exit(1)),console.warn("Dependency checks passed, continuing..."),(await Promise.resolve().then(() => (k9(),R9))).default($,Y,K).catch((Z)=>{console.warn("pr-release process exited unexpectedly"),console.warn(Z.stack||Z.message),process.exit(1)})});M4();

//# debugId=C046D2F4AA29440564756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiYmluL2xpYi91dGlsL2NoYWxrLnRzIiwgImJpbi9saWIvdXRpbC9kZXNjcmlwdGlvbi50cyIsICJiaW4vbGliL3V0aWwvdHlwZXMudHMiLCAiYmluL2xpYi9wcm9tcHQvcHJvbXB0LWNvbmZpcm0udHMiLCAiYmluL2xpYi91dGlsL2lzLWNoaWxkLXByb2Nlc3MtZXJyb3IudHMiLCAiYmluL2xpYi9leGVjL2V4ZWMtc3luYy50cyIsICJiaW4vbGliL2V4ZWMvZ2V0LXBhY2thZ2UtbWFuYWdlci50cyIsICJiaW4vbGliL3V0aWwvd2FpdC50cyIsICJiaW4vbGliL2J1aWxkL2J1aWxkLXZpdGUtY29uZmlnLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtZGVwZW5kZW5jaWVzLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi50cyIsICJiaW4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9idWlsZC1jbGllbnQudHMiLCAiYmluL2xpYi91dGlsL2hhbmRsZS1wcm9jZXNzLWV4aXQudHMiLCAiYmluL2xpYi91dGlsL2xvZy1xdWV1ZS50cyIsICJiaW4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9ydW4tYXBwLXNlcnZlci50cyIsICJiaW4vY29tbWFuZHMvZGV2L2Rldi12aXRlLnRzIiwgImJpbi9saWIvZGV2b3BzLXByb2plY3QvZGV2b3BzLXByb2plY3QtcGF0aC50cyIsICJiaW4vbGliL2V4ZWMvZXhlYy1zY3JpcHQudHMiLCAiYmluL2NvbW1hbmRzL3N0b3J5Ym9vay50cyIsICJub2RlX21vZHVsZXMvaXMtZG9ja2VyL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9pcy13c2wvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2RlZmluZS1sYXp5LXByb3AvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL29wZW4vaW5kZXguanMiLCAiYmluL2xpYi9leGVjL2V4ZWMtc3luYy1yZXN1bHQudHMiLCAiYmluL2xpYi91dGlsL3RlbXBsYXRlLnRzIiwgImJpbi9jb21tYW5kcy91cmwudHMiLCAiYmluL2xpYi9naXQvZ2l0LWhhcy1jaGFuZ2VzLnRzIiwgImJpbi9saWIvZ2l0L2dpdC1yZXR1cm4tdG8tZGV2LnRzIiwgImJpbi9saWIvYnVpbGQvYmluL3JlbGVhc2UtYmluLnRzIiwgImJpbi9zaGltL3ZpdGUtcGx1Z2lucy92aXRlLWRldm9wcy1zdHJpbmctcmVwbGFjZS1wbHVnaW4udHMiLCAiYmluL3NoaW0vdml0ZS1wbHVnaW5zL3ZpdGUtZGV2b3BzLWFwcC1jb25maWctcGx1Z2luLnRzIiwgImJpbi9saWIvYnVpbGQvd2ViLWFwcC92aXRlL3JlbGVhc2UtY2xpZW50LnRzIiwgImJpbi9saWIvZXhlYy9leGVjLXNjcmlwdHgudHMiLCAiYmluL2xpYi9idWlsZC9saWJyYXJ5L3ZpdGUvcmVsZWFzZS1saWJyYXJ5LXR5cGVzLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtbmFtZS50cyIsICJiaW4vbGliL2J1aWxkL2xpYnJhcnkvdml0ZS9yZWxlYXNlLWxpYnJhcnkudHMiLCAiYmluL2xpYi9idWlsZC9saWJyYXJ5L3JlbGVhc2Utc3Rvcmllcy50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLWJ1aWxkLnRzIiwgImJpbi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2Utdmlldy50cyIsICJiaW4vbGliL2dpdC9naXQtY2FuLWFjY2Vzcy1yZW1vdGUudHMiLCAiYmluL2xpYi9naXQvZ2l0LWVuc3VyZS1yZW1vdGUudHMiLCAiYmluL2xpYi9naXQvZ2l0LWN1cnJlbnQtYnJhbmNoLnRzIiwgImJpbi9saWIvZ2l0L2dpdC11cGRhdGUtYnJhbmNoLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtcmVwby50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLWRlcGxveS50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLXR5cGVzLnRzIiwgImJpbi9jb21tYW5kcy90cy50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLXN0YXJ0LXNlcnZlci50cyIsICJiaW4vY29tbWFuZHMvc3RhcnQudHMiLCAiYmluL2xpYi91bml0LXRlc3QvcnVuLXRlc3RzLnRzIiwgImJpbi9jb21tYW5kcy90ZXN0L3Rlc3QtcnVuLnRzIiwgImJpbi9jb21tYW5kcy9jbGVhbi9jbGVhbi1jYWNoZS50cyIsICJiaW4vbGliL3V0aWwvcGFja2FnZS1jYWNoZS1wYXRoLnRzIiwgImJpbi9jb21tYW5kcy9wci9wci1yZWxlYXNlLnRzIiwgImJpbi9tYWluLWdpbXAudHMiLCAiYmluL2xpYi91dGlsL2NvbmZpZy1lbnYudHMiLCAiYmluL2xpYi91dGlsL2RvdC1lbnYudHMiLCAiYmluL2xpYi91dGlsL3BhcnNlLXByb3BzLnRzIiwgImJpbi9saWIvcHJvbXB0L3Byb21wdC1vdmVycmlkZS1maWxlLnRzIiwgImJpbi9jb21tYW5kcy9lbnN1cmUtZGVwZW5kZW5jaWVzLnRzIiwgImJpbi9saWIvZXhlYy9leGVjLWluc3RhbGwudHMiLCAiYmluL2xpYi91dGlsL2Z1enp5LXNvdXJjZS50cyIsICJiaW4vbGliL3V0aWwvaXMtcGFja2FnZS1hdmFpbGFibGUudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbCiAgICAiZXhwb3J0IGNvbnN0IGNoYWxrID0ge1xuICBjeWFuOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlszNm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICByZWQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzMxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHllbGxvdzogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMzNtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JlZW46ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzMybSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJsdWU6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzM0bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIG1hZ2VudGE6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzM1bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGN5YW5CcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzk2bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHJlZEJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgeWVsbG93QnJpZ2h0OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls5M20ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBncmVlbkJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTJtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmx1ZUJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTRtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgbWFnZW50YUJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTVtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgd2hpdGVCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzk3bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGdyYXk6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzkwbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGdyZXk6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzkwbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHdoaXRlOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlszN20ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBibGFjazogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMzBtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmxhY2tCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzkwbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnQ3lhbjogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbNDZtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdSZWQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzQxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnWWVsbG93OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls0M20ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ0dyZWVuOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls0Mm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ0JsdWU6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzQ0bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnTWFnZW50YTogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbNDVtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdDeWFuQnJpZ2h0OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlsxMDZtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdSZWRCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ1llbGxvd0JyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMTAzbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnR3JlZW5CcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwMm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ0JsdWVCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwNG0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ01hZ2VudGFCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwNW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBjeWFuQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5Nm1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHJlZEJyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTFtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICB5ZWxsb3dCcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzkzbVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JlZW5CcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzkybVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmx1ZUJyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTRtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBtYWdlbnRhQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5NW1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHdoaXRlQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5N21cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGdyYXlCcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzkwbVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JleUJyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTBtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICB3aGl0ZUJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzM3bVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmxhY2tCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlszMG1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJsYWNrQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5MG1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG59O1xuIiwKICAgICJpbXBvcnQgeyBzdHJpcEluZGVudCB9IGZyb20gXCJjb21tb24tdGFnc1wiO1xuXG4vKipcbiAqIFRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFsIHRoYXQgZm9ybWF0cyBhIHN0cmluZyB0byBiZSBzdGFuZGFyZGl6ZWQgYW5kXG4gKiBhcHByb3ByaWF0ZSBmb3IgY29tbWFuZGVyIGRlc2NyaXB0aW9ucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKHN0cjogVGVtcGxhdGVTdHJpbmdzQXJyYXksIC4uLmFyZ3M6IGFueVtdKSB7XG4gIHJldHVybiBgJHtzdHJpcEluZGVudChzdHIsIC4uLmFyZ3MpfVxcblxcbmA7XG59XG4iLAogICAgIi8qKlxuICogSW50ZXJmYWNlIGZvciBkZWNsYXJpbmcgYSBnZW5lcmljIEpTT04gdmFsaWQgb2JqZWN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUpzb24ge1xuICBbeDogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IERhdGUgfCBJSnNvbiB8IElKc29uQXJyYXk7XG59XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBkZWNsYXJpbmcgYSBnZW5lcmljIEpTT04gdmFsaWQgb2JqZWN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUpzb25UeXBlIHtcbiAgW3g6IHN0cmluZ106XG4gICAgfCBzdHJpbmdcbiAgICB8IG51bWJlclxuICAgIHwgYm9vbGVhblxuICAgIHwgRGF0ZVxuICAgIHwgSUpzb25UeXBlXG4gICAgfCBJSnNvbkFycmF5XG4gICAgfCB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogUGFydCBvZiB0aGUgSUpzb24gZGVjbGFyYXRpb24gdG8gbWFrZSBhIHZhbGlkIEpTT04gdHlwZS5cbiAqL1xuZXhwb3J0IHR5cGUgSUpzb25BcnJheSA9IChcbiAgfCBzdHJpbmdcbiAgfCBudW1iZXJcbiAgfCBib29sZWFuXG4gIHwgRGF0ZVxuICB8IElKc29uXG4gIHwgSUpzb25BcnJheVxuKVtdO1xuXG4vKipcbiAqIFRoaXMgaXMgdG8gaGVscCBlc3RhYmxpc2ggYSBjdXN0b20gY2hpbGQgcGF0dGVybiBmb3IgUmVhY3QuIFRoZSBwcm9wcyBmb3IgeW91ciByZWFjdCBjb21wb25lbnQgc2ltcGx5IG5lZWRzIHRvIGV4dGVuZFxuICogdGhpcyBpbnRlcmZhY2UuXG4gKi9cbmV4cG9ydCB0eXBlIElDaGlsZHJlbjxUIGV4dGVuZHMgb2JqZWN0PiA9IFQgJiB7XG4gIGNoaWxkcmVuPzogUGFydGlhbDxUPjtcbn07XG5cbi8qKlxuICogVGhpcyBsZXRzIHlvdSBkZWZpbmUgY2hpbGRyZW4gZm9yIGEgY29tcG9uZW50IGFuZCBmb3JjZXMgdGhlIGNoaWxkcmVuIHRvIGJlIGRlY2xhcmVkIGluIHRoZSBwcm9wcyBhcyBvcHBvc2VkIHRvXG4gKiBuZXN0aW5nIHRoZSBjaGlsZHJlbi5cbiAqL1xuZXhwb3J0IHR5cGUgSVByb3BzQ2hpbGRyZW48VCBleHRlbmRzIG9iamVjdD4gPSBUICYge1xuICBjaGlsZHJlbjogbmV2ZXI7XG59O1xuXG4vKipcbiAqIFRoaXMgbGV0cyB5b3UgZGVmaW5lIGNoaWxkcmVuIGZvciBhIGNvbXBvbmVudCBhbmQgZm9yY2VzIHRoZSBjaGlsZHJlbiB0byBiZSBuZXN0ZWQgYXMgb3Bwb3NlZCB0b1xuICogYmVpbmcgZGVjbGFyZWQgaW4gdGhlIHByb3BzLlxuICovXG5leHBvcnQgdHlwZSBJTmVzdGVkQ2hpbGRyZW48VD4gPSB7XG4gIGNoaWxkcmVuPzogVDtcbn07XG5cbi8qKlxuICogQSBzbGlnaHRseSBzdHJvbmdlciB0eXBlIGZvciBmb3IgaW5kaWNhdGluZyBcIkZ1bmN0aW9uXCIuIFRoaXMgaGFzIGdyZWF0ZXJcbiAqIGZsZXhpYmlsaXR5IHRvIGZpdCBpbnRvIGdlbmVyaWMgY2FsbGJhY2tzLlxuICovXG5leHBvcnQgdHlwZSBHZW5lcmljRnVuY3Rpb248VD4gPSAoLi4uYXJnczogYW55W10pID0+IFQ7XG5cbi8qKlxuICogVGhpcyB0eXBlIGlzIGludGVuZGVkIGZvciB0aGUgYXN5bmMgb3BlcmF0aW9uIG9mIGEgXCJmbG93XCIuIEEgZmxvdyBjYW4gaGF2ZVxuICogc2V2ZXJhbCB5aWVsZCBzdGF0ZW1lbnRzLCBidXQgYXJlIE5PVCBmb3IgdGhlIGludGVudGlvbiBvZiByZXR1cm5pbmcgdmFsdWVzXG4gKiB0byB0aGUgY2FsbGVyLCBidXQgcmF0aGVyIGZvciB0aGUgaW50ZW50IG9mIHBlcmZvcm1pbmcgYSBtb2J4IGFjdGlvbiB0aGF0IGhhc1xuICogYXN5bmNocm9ub3VzIHByb3BlcnRpZXMuXG4gKi9cbmV4cG9ydCB0eXBlIEZsb3dUeXBlID0gR2VuZXJhdG9yPHVua25vd24sIHVua25vd24sIHVua25vd24+IHwgdW5kZWZpbmVkO1xuXG4vKipcbiAqIFR5cGVndWFyZCBmb3Igc3RyaW5nc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFsOiBhbnkpOiB2YWwgaXMgc3RyaW5nIHtcbiAgcmV0dXJuIHZhbCAmJiB2YWwuY2hhckNvZGVBdCAhPT0gdm9pZCAwO1xufVxuXG4vKipcbiAqIFR5cGVndWFyZCBmb3IgbnVtYmVyc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIodmFsOiBhbnkpOiB2YWwgaXMgbnVtYmVyIHtcbiAgcmV0dXJuIHZhbCAhPT0gdm9pZCAwICYmIHZhbC50b0V4cG9uZW50aWFsO1xufVxuXG4vKipcbiAqIFR5cGVndWFyZCBmb3IgZnVuY3Rpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbDogYW55KTogdmFsIGlzIEZ1bmN0aW9uIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLyoqXG4gKiBUeXBlZ2F1cmQgZm9yIGVuc3VyaW5nIGFuIGVsZW1lbnQgaXMgbm9uLW51bGwgYW5kIG5vdCB1bmRlZmluZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RlZmluZWQ8VD4odmFsOiBUIHwgdW5kZWZpbmVkIHwgbnVsbCk6IHZhbCBpcyBUIHtcbiAgcmV0dXJuIHZhbCAhPT0gdm9pZCAwICYmIHZhbCAhPT0gbnVsbDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgaWYgaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUcnV0aHk8VD4odmFsOiBUIHwgbnVsbCB8IHVuZGVmaW5lZCB8IGZhbHNlKTogdmFsIGlzIFQge1xuICByZXR1cm4gQm9vbGVhbih2YWwpO1xufVxuIiwKICAgICJpbXBvcnQgaW5xdWlyZXIgZnJvbSBcImlucXVpcmVyXCI7XG5pbXBvcnQgeyBzdHJpcEluZGVudCB9IGZyb20gXCJjb21tb24tdGFnc1wiO1xuXG4vKipcbiAqIENvbnZlbmllbmNlIHdyYXBwZXIgYXJvdW5kIGN1cnJlbnQgcHJvbXB0IGxpYnJhcnkgb2YgY2hvaWNlIHRvIHByZXNlbnQgYVxuICogY29uZmlybWF0aW9uIGRpYWxvZy5cbiAqXG4gKiBBcHBsaWVzIHN0cmlwSW5kZW50IHRvIHRoZSBpbnB1dCBtZXNzYWdlLlxuICpcbiAqIFJldHVybnMgdGhlIHRydWUgZmFsc2UgdmFsdWUgb2YgdGhlIHByb21wdC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb21wdENvbmZpcm0oXG4gIG1lc3NhZ2U6IHN0cmluZyxcbiAgZGVmYXVsdFZhbHVlPzogYm9vbGVhbixcbiAgb25Db25maXJtZWQ/OiAoKSA9PiB2b2lkXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgeyByZXN1bHQgfSA9IGF3YWl0IGlucXVpcmVyLnByb21wdDx7XG4gICAgcmVzdWx0OiBib29sZWFuO1xuICB9PihbXG4gICAge1xuICAgICAgdHlwZTogXCJjb25maXJtXCIsXG4gICAgICBuYW1lOiBcInJlc3VsdFwiLFxuICAgICAgbWVzc2FnZTogc3RyaXBJbmRlbnRgJHttZXNzYWdlfWAsXG4gICAgICBkZWZhdWx0OiBkZWZhdWx0VmFsdWUsXG4gICAgfSxcbiAgXSk7XG5cbiAgLy8gV2hlbiB5ZXMvdHJ1ZSBpcyBzZWxlY3RlZCwgcnVuIHRoZSBvbkNvbmZpcm1lZCBjYWxsYmFja1xuICBpZiAocmVzdWx0KSBvbkNvbmZpcm1lZD8uKCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsCiAgICAiaW1wb3J0IGNoaWxkX3Byb2Nlc3MgZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcblxuZnVuY3Rpb24gaXNEZWZpbmVkPFQ+KHZhbDogYW55KTogdmFsIGlzIFQge1xuICByZXR1cm4gdmFsICE9PSB2b2lkIDAgJiYgdmFsICE9PSBudWxsO1xufVxuXG4vKipcbiAqIFR5cGUgZ3VhcmQgZm9yIGVycm9ycyB0aHJvd24gZnJvbSB0aGUgY2hpbGRfcHJvY2Vzcy5leGVjRmlsZVN5bmMgbWV0aG9kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDaGlsZFByb2Nlc3NFcnJvcihcbiAgdmFsOiBhbnlcbik6IHZhbCBpcyBjaGlsZF9wcm9jZXNzLlNwYXduU3luY1JldHVybnM8QnVmZmVyPiB7XG4gIHJldHVybiAoXG4gICAgaXNEZWZpbmVkPGFueT4odmFsKSAmJlxuICAgIGlzRGVmaW5lZDxhbnk+KHZhbC5zdGF0dXMpICYmXG4gICAgaXNEZWZpbmVkPGFueT4odmFsLnN0ZGVycilcbiAgKTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgaXNDaGlsZFByb2Nlc3NFcnJvciB9IGZyb20gXCIuLi91dGlsL2lzLWNoaWxkLXByb2Nlc3MtZXJyb3IuanNcIjtcbmltcG9ydCB7IGlzRGVmaW5lZCB9IGZyb20gXCIuLi91dGlsL3R5cGVzLmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUV4ZWNTeW5jIHtcbiAgLyoqIFNldCB0byB0cnVlIHRvIHByZXZlbnQgZXJyb3IgbG9ncyAqL1xuICBzaWxlbnQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGEgY29tbWFuZCBvbiB0aGUgc2FtZSBzdGRpbyBhcyB0aGUgY3VycmVudCBwcm9jZXNzLiBUaGlzIGFic29yYnNcbiAqIGVycm9ycyBhbmQgYWxzbyBpZ25vcmVzIG51bGwvdW5kZWZpbmVkIGFyZ3VtZW50cy5cbiAqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGNvbW1hbmQgc3VjY2VlZGVkLlxuICovXG5hc3luYyBmdW5jdGlvbiBydW4oY29tbWFuZDogc3RyaW5nLCBhcmdzOiAoc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZClbXSA9IFtdKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gQnVuLnNwYXduU3luYyhbY29tbWFuZCwgLi4uYXJncy5maWx0ZXIoaXNEZWZpbmVkKV0sIHtcbiAgICAgIHN0ZGlvOiBbXCJpbmhlcml0XCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIl0sXG4gICAgICBlbnY6IHByb2Nlc3MuZW52LFxuICAgIH0pO1xuXG4gICAgaWYgKHJlc3VsdC5leGl0Q29kZSAhPT0gMCkge1xuICAgICAgaWYgKCFydW4uc2lsZW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgYEVycm9yOiAke2NvbW1hbmR9ICR7YXJncy5qb2luKFwiIFwiKX0gZmFpbGVkIHdpdGggY29kZTogJHtcbiAgICAgICAgICAgIHJlc3VsdC5leGl0Q29kZVxuICAgICAgICAgIH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKCkuc3RhY2spO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKCFydW4uc2lsZW50KSB7XG4gICAgICBpZiAoaXNDaGlsZFByb2Nlc3NFcnJvcihlcnIpKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgYEVycm9yOiAke2NvbW1hbmR9ICR7YXJncy5qb2luKFwiIFwiKX0gZmFpbGVkIHdpdGggY29kZTogJHtlcnIuc3RhdHVzfWBcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBEZWZhdWx0IHRoZSBleGVjdXRpb24gc3R5bGUuXG5ydW4uc2lsZW50ID0gZmFsc2U7XG5cbmV4cG9ydCBjb25zdCBleGVjU3luYzogdHlwZW9mIHJ1biAmIElFeGVjU3luYyA9IHJ1bjtcbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi9leGVjLXN5bmMuanNcIjtcblxubGV0IG1lbW9pemVkOiBbXCJidW5cIiwgXCJidW54XCJdIHwgW1wibnBtXCIsIFwibnB4XCJdIHwgbnVsbCA9IG51bGw7XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSBjb3JyZWN0IGFuZCBtb3N0IGlkZWFsIHBhY2thZ2UgbWFuYWdlciB0byB1c2UgZm9yIGEgY29tbWFuZC5cbiAqIEZpcnN0IHZhbHVlIHdpbGwgYmUgdGhlIHBhY2thZ2UgbWFuYWdlciBjb21tYW5kLCB0aGUgc2Vjb25kIHdpbGwgYmUgdGhlIGF1dG9cbiAqIGV4ZWN1dGlvbiBtYW5hZ2VyIG9mIHRoYXQgbWFuYWdlciBpZSAtIFtucG0sIG5weF1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhY2thZ2VNYW5hZ2VyKCkge1xuICBpZiAobWVtb2l6ZWQpIHJldHVybiBtZW1vaXplZDtcblxuICBpZiAoYXdhaXQgZXhlY1N5bmMoXCJidW5cIiwgW1wiLS12ZXJzaW9uXCJdKSkge1xuICAgIG1lbW9pemVkID0gW1wiYnVuXCIsIFwiYnVueFwiXTtcbiAgfSBlbHNlIHtcbiAgICBtZW1vaXplZCA9IFtcIm5wbVwiLCBcIm5weFwiXTtcbiAgfVxuXG4gIHJldHVybiBtZW1vaXplZDtcbn1cbiIsCiAgICAiLyoqXG4gKiBBIHNpbXBsZSB3YWl0IG1ldGhvZCBmb3IgYSBkdXJhdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2FpdCh0OiBudW1iZXIpIHtcbiAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgdCkpO1xufVxuIiwKICAgICJpbXBvcnQgKiBhcyBWaXRlIGZyb20gXCJ2aXRlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vdXRpbC9jaGFsay5qc1wiO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHZpdGUgY29uZmlnIHN1aXRhYmxlIGZvciBydW5uaW5nIGEgVml0ZS5idWlsZCBvcGVyYXRpb24uIFRoZVxuICogdmFyaW91cyBhdmFpbGFibGUgdGFyZ2V0cyBtb2RpZmllcyB0aGUgYmVoYXZpb3IgdG8gdGFyZ2V0IGRpZmZlcmVudCBmb2xkZXJzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYnVpbGRWaXRlQ29uZmlnKCkge1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJCdWlsZGluZyBWaXRlIGNvbmZpZyB1c2luZyBiYXNlOlwiLFxuICAgIGNoYWxrLnllbGxvd0JyaWdodEJvbGQocGF0aC5yZXNvbHZlKFwidml0ZS5jb25maWcudHNcIikpXG4gICk7XG4gIC8vIFN0YXJ0IHdpdGggdGhlIHRhcmdldCBwcm9qZWN0IGRlZmluZWQgY29uZmlndXJhdGlvblxuICBsZXQgY29uZmlnOiBWaXRlLlVzZXJDb25maWcgPSBhd2FpdCAoXG4gICAgYXdhaXQgaW1wb3J0KHBhdGgucmVzb2x2ZShcInZpdGUuY29uZmlnLnRzXCIpKVxuICApLmRlZmF1bHQoKTtcblxuICAvLyBJbXBvcnQgdGhlIHRhcmdldCBwcm9qZWN0J3MgdHNjb25maWcgc28gd2UgY2FuIGluY2x1ZGUgdGhlIHNhbWUgaW5jbHVzaW9uc1xuICAvLyB0aGUgVFMgY29tcGlsZXIgd291bGQgdXNlIGZvciB0aGUgd2F0Y2ggcHJvY2Vzcy5cbiAgY29uc3QgdHNjb25maWcgPSBhd2FpdCBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcuanNvblwiKSk7XG5cbiAgY29uZmlnID0ge1xuICAgIC4uLmNvbmZpZyxcbiAgICBsb2dMZXZlbDogXCJpbmZvXCIsXG4gICAgbW9kZTogXCJkZXZlbG9wbWVudFwiLFxuICAgIHJvb3Q6IHBhdGgucmVzb2x2ZShcImFwcC9jbGllbnRcIiksXG4gICAgY2xlYXJTY3JlZW46IHRydWUsXG4gICAgYnVpbGQ6IHtcbiAgICAgIC4uLmNvbmZpZy5idWlsZCxcbiAgICAgIGNzc0NvZGVTcGxpdDogdHJ1ZSxcbiAgICAgIG91dERpcjogcGF0aC5yZXNvbHZlKFwiYnVpbGQvY2xpZW50XCIpLFxuICAgICAgc291cmNlbWFwOiB0cnVlLFxuICAgICAgcm9sbHVwT3B0aW9uczoge1xuICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICBtYW51YWxDaHVua3M6IHVuZGVmaW5lZCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB3YXRjaDoge1xuICAgICAgICAuLi5jb25maWcuYnVpbGQ/LndhdGNoLFxuICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgLi4uKChBcnJheS5pc0FycmF5KGNvbmZpZy5idWlsZD8ud2F0Y2g/LmluY2x1ZGUpXG4gICAgICAgICAgICA/IGNvbmZpZy5idWlsZD8ud2F0Y2g/LmluY2x1ZGVcbiAgICAgICAgICAgIDogW2NvbmZpZy5idWlsZD8ud2F0Y2g/LmluY2x1ZGVdKSB8fCBbXSksXG4gICAgICAgICAgLi4uKHRzY29uZmlnPy5pbmNsdWRlPy5tYXAoKGk6IHN0cmluZykgPT4gcGF0aC5yZXNvbHZlKGkpKSB8fCBbXSksXG4gICAgICAgICAgXCJ0c2NvbmZpZy5qc29uXCIsXG4gICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pLFxuICAgICAgfSxcbiAgICAgIGVtcHR5T3V0RGlyOiB0cnVlLFxuICAgIH0sXG4gICAgcmVzb2x2ZToge1xuICAgICAgYWxpYXM6IHtcbiAgICAgICAgY29uZmlnOiBwYXRoLnJlc29sdmUoYGFwcC9jb25maWdgKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcblxuICByZXR1cm4gY29uZmlnO1xufVxuIiwKICAgICJpbXBvcnQgZGVlcG1lcmdlIGZyb20gXCJkZWVwbWVyZ2VcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzKCkge1xuICBjb25zdCBwYWNrYWdlSnNvbiA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuXG4gIHJldHVybiBkZWVwbWVyZ2U8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4oXG4gICAgcGFja2FnZUpzb24uZGVwZW5kZW5jaWVzIHx8IHt9LFxuICAgIHBhY2thZ2VKc29uLnBlZXJEZXBlbmRlbmNpZXMgfHwge31cbiAgKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRhcmdldFByb2plY3RWZXJzaW9uKCkge1xuICBjb25zdCBwYWNrYWdlSnNvbiA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICByZXR1cm4gcGFja2FnZUpzb24udmVyc2lvbiB8fCBcIlwiO1xufVxuIiwKICAgICJpbXBvcnQgKiBhcyBWaXRlIGZyb20gXCJ2aXRlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgYnVpbGRWaXRlQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2J1aWxkLXZpdGUtY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzIH0gZnJvbSBcIi4uLy4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LWRlcGVuZGVuY2llcy5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgdGhlIGJ1bmRsaW5nIHByb2Nlc3MgZm9yIGRpc3RyaWJ1dGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKCkge1xuICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiA9XG4gICAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gfHwgKGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCkpO1xuXG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiU3RhcnRpbmcgVml0ZSBjbGllbnQgYnVpbGQuLi5cIikpO1xuICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiYXBwL2NsaWVudC9pbmRleC50c1wiKSkpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIlRyaWVkIHRvIHN0YXJ0IGRldmVsb3BtZW50IHByb2Nlc3MgZm9yIHRoZSBhcHAgY2xpZW50LCBidXQgbm8gZW50cnkgZmlsZSB3YXMgZm91bmQuXCJcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGJ1aWxkVml0ZUNvbmZpZygpO1xuXG4gIGNvbmZpZy5yb290ID0gcGF0aC5yZXNvbHZlKFwiYXBwL2NsaWVudFwiKTtcbiAgY29uZmlnLmJ1aWxkIS5vdXREaXIgPSBwYXRoLnJlc29sdmUoXCJidWlsZC9jbGllbnRcIik7XG5cbiAgY29uZmlnLmJ1aWxkIS5yb2xsdXBPcHRpb25zIS5leHRlcm5hbCA9IE9iamVjdC5rZXlzKFxuICAgIGF3YWl0IHRhcmdldFByb2plY3REZXBlbmRlbmNpZXMoKVxuICApO1xuXG4gIGF3YWl0IFZpdGUuYnVpbGQoY29uZmlnKTtcbiAgY29uc29sZS53YXJuKGNoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJWaXRlIGNsaWVudCBidWlsZCBwcm9jZXNzIHN0YXJ0ZWQuLi5cIikpO1xufVxuIiwKICAgICIvKipcbiAqIExpc3RlbnMgZm9yIHByb2Nlc3MgZXhpdCBzaWduYWxzIG9mIHZhcmlvdXMgdHlwZXMgYW5kIGZpcmVzIHRoZSBwcm92aWRlZFxuICogY2FsbGJhY2sgd2hlbiBpdCBoYXBwZW5zIHdpdGggc29tZSBlYXN5IHRvIGhhbmRsZSBkZXRhaWxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUHJvY2Vzc0V4aXQoXG4gIGNiOiAobWVzc2FnZTogc3RyaW5nLCBlcnI/OiBFcnJvciB8IHN0cmluZyB8IG51bWJlcikgPT4gUHJvbWlzZTx2b2lkPlxuKSB7XG4gIGNvbnN0IGhhbmRsZUV4aXQgPSAobWVzc2FnZTogc3RyaW5nKSA9PiAoZXJyPzogRXJyb3IgfCBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICBjYihtZXNzYWdlLCBlcnIpO1xuICAgIGlmIChlcnIpIHByb2Nlc3MuZXhpdCgxKTtcbiAgICBlbHNlIHByb2Nlc3MuZXhpdCgwKTtcbiAgfTtcblxuICAvLyBDYXRjaCB3aGVuIGFwcCBpcyBjbG9zaW5nXG4gIHByb2Nlc3Mub24oXCJleGl0XCIsIGhhbmRsZUV4aXQoXCJleGl0XCIpKTtcbiAgLy8gQ2F0Y2ggY3RybCtjIGV2ZW50XG4gIHByb2Nlc3Mub24oXCJTSUdJTlRcIiwgaGFuZGxlRXhpdChcIlNJR0lOVFwiKSk7XG4gIC8vIENhdGNoIFwia2lsbCBwaWRcIiAoZm9yIGV4YW1wbGU6IG5vZGVtb24gcmVzdGFydClcbiAgcHJvY2Vzcy5vbihcIlNJR1VTUjFcIiwgaGFuZGxlRXhpdChcIlNJR1VTUjFcIikpO1xuICBwcm9jZXNzLm9uKFwiU0lHVVNSMlwiLCBoYW5kbGVFeGl0KFwiU0lHVVNSMlwiKSk7XG4gIHByb2Nlc3Mub24oXCJTSUdURVJNXCIsIGhhbmRsZUV4aXQoXCJTSUdURVJNXCIpKTtcbiAgLy8gQ2F0Y2ggdW5jYXVnaHQgZXhjZXB0aW9uc1xuICBwcm9jZXNzLm9uKFwidW5jYXVnaHRFeGNlcHRpb25cIiwgaGFuZGxlRXhpdChcInVuY2F1Z2h0RXhjZXB0aW9uXCIpKTtcbn1cbiIsCiAgICAiY29uc3QgcXVldWU6IGFueVtdW10gPSBbXTtcbmxldCBxdWV1ZUlkOiBUaW1lciB8IG51bGwgPSBudWxsO1xuXG5mdW5jdGlvbiBzdGFydFF1ZXVlKCkge1xuICBpZiAocXVldWVJZCAhPT0gbnVsbCkgcmV0dXJuO1xuXG4gIHF1ZXVlSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5sb2coLi4ubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICB9LCA0MDApO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSBzaW1wbGUgcXVldWUgZm9yIGxvZ2dpbmcgbWVzc2FnZXMgYXQgZ2l2ZW4gaW50ZXJ2YWxzIHdoaWNoIHByZXZlbnRzXG4gKiBzb21lIGxvZ2dpbmcgaW5maWdodGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gbG9nUXVldWUoLi4ubWVzc2FnZTogYW55W10pIHtcbiAgcXVldWUucHVzaChtZXNzYWdlKTtcbiAgc3RhcnRRdWV1ZSgpO1xufVxuIiwKICAgICJpbXBvcnQgYnVpbGRDbGllbnQgZnJvbSBcIi4vYnVpbGQtY2xpZW50LmpzXCI7XG5pbXBvcnQgY2hpbGRfcHJvY2VzcyBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCByZWFkbGluZSBmcm9tIFwicmVhZGxpbmVcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGdldFBhY2thZ2VNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uLy4uL2V4ZWMvZ2V0LXBhY2thZ2UtbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgaGFuZGxlUHJvY2Vzc0V4aXQgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9oYW5kbGUtcHJvY2Vzcy1leGl0LmpzXCI7XG5pbXBvcnQgeyBsb2dRdWV1ZSB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2xvZy1xdWV1ZS5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG4vKipcbiAqIEVudHJ5IG1ldGhvZCBmb3IgdGhlIGFwcCBkZXYgc2VydmVyXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bihcbiAgbGlzdGVuZXI/OiAoY2hpbGQ6IGNoaWxkX3Byb2Nlc3MuQ2hpbGRQcm9jZXNzV2l0aG91dE51bGxTdHJlYW1zKSA9PiB2b2lkXG4pIHtcbiAgY29uc29sZS53YXJuKFxuICAgIFwiXFxuUnVubmluZyB0aGUgQXBwIHNlcnZlciBhdDogXCIsXG4gICAgY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChwYXRoLnJlc29sdmUoXCJhcHAvc2VydmVyXCIpKSxcbiAgICBcIlxcblwiXG4gICk7XG5cbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPVxuICAgIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OIHx8IChhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpKTtcbiAgcHJvY2Vzcy5lbnYuUkVTT1VSQ0VfUEFUSCA9XG4gICAgcHJvY2Vzcy5lbnYuUkVTT1VSQ0VfUEFUSCB8fCBwYXRoLnJlc29sdmUoXCJidWlsZC9jbGllbnRcIik7XG4gIGNvbnN0IHBhY2thZ2VNYW5hZ2VyID0gYXdhaXQgZ2V0UGFja2FnZU1hbmFnZXIoKTtcblxuICBpZiAocGFja2FnZU1hbmFnZXJbMF0gIT09IFwiYnVuXCIpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJDdXJyZW50bHkgb25seSBhbiBlbnZpcm9ubWVudCB3aXRoIGJ1biBpbnN0YWxsZWQgaXMgc3VwcG9ydGVkIGZvciB0aGlzIGNvbW1hbmQuXCJcbiAgICApO1xuICB9XG5cbiAgY29uc3QgY2hpbGRQcm9jZXNzID0gY2hpbGRfcHJvY2Vzcy5zcGF3bihwYWNrYWdlTWFuYWdlclswXSwgW1xuICAgIFwiLS13YXRjaFwiLFxuICAgIHBhdGgucmVzb2x2ZShcImFwcC9zZXJ2ZXIvaW5kZXgudHNcIiksXG4gIF0pO1xuXG4gIC8vIExpc3RlbiBmb3IgdGhlIGIga2V5IHRvIGJlIHByZXNzZWQuIFRoaXMgc2hvdWxkIHRyaWdnZXIgYSBkZW1vIGJ1aWxkIG9mIHRoZVxuICAvLyBhcHAgYW5kIG91dHB1dCB0byB0aGUgYnVpbGQgZm9sZGVyLiBUaGlzIGlzIG1lYW50IGZvciB0ZXN0aW5nIHRoZSBidWlsZCBhbmRcbiAgLy8gbm90aGluZyBlbHNlLlxuICBwcm9jZXNzLnN0ZGluLnNldFJhd01vZGU/Lih0cnVlKTtcbiAgcHJvY2Vzcy5zdGRpbi5yZXN1bWUoKTtcbiAgcHJvY2Vzcy5zdGRpbi5zZXRFbmNvZGluZyhcInV0ZjhcIik7XG4gIHJlYWRsaW5lLmVtaXRLZXlwcmVzc0V2ZW50cyhwcm9jZXNzLnN0ZGluKTtcbiAgbGV0IGJ1aWxkaW5nID0gZmFsc2U7XG5cbiAgcHJvY2Vzcy5zdGRpbi5vbihcImtleXByZXNzXCIsIGFzeW5jIChjaHVuaywga2V5KSA9PiB7XG4gICAgaWYgKGtleSAmJiBrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gXCJjXCIpIHtcbiAgICAgIGNoaWxkUHJvY2Vzcy5raWxsKCk7XG4gICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgfSBlbHNlIGlmIChrZXkgJiYga2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09IFwiZFwiKSB7XG4gICAgICBjaGlsZFByb2Nlc3Mua2lsbCgpO1xuICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgIH0gZWxzZSBpZiAoY2h1bmsudG9TdHJpbmcoKSA9PT0gXCJiXCIgfHwgY2h1bmsudG9TdHJpbmcoKSA9PT0gXCJCXCIpIHtcbiAgICAgIGlmIChidWlsZGluZykgcmV0dXJuO1xuICAgICAgYnVpbGRpbmcgPSB0cnVlO1xuICAgICAgYXdhaXQgYnVpbGRDbGllbnQoKTtcbiAgICAgIGJ1aWxkaW5nID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChjaHVuay50b1N0cmluZygpID09PSBcInFcIiB8fCBjaHVuay50b1N0cmluZygpID09PSBcIlFcIikge1xuICAgICAgY2hpbGRQcm9jZXNzLmtpbGwoKTtcblxuICAgICAgLy8gU3BlY2lhbCBxdWl0IGNvZGUgdG8gaW5kaWNhdGUgd2Ugd2FudCBhIHNwZWNpYWwgc2h1dGRvd24gcm91dGluZS5cbiAgICAgIGlmIChrZXkuc2hpZnQpIHtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEyMyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBNYWtlIHN1cmUgdGhlIHNlcnZlciBhcHBsaWNhdGlvbiByZWNlaXZlcyBpbnB1dCBmcm9tIHRoZSB0ZXJtaW5hbFxuICBwcm9jZXNzLnN0ZGluLnBpcGUoY2hpbGRQcm9jZXNzLnN0ZGluKTtcblxuICBpZiAobGlzdGVuZXIpIHtcbiAgICBsaXN0ZW5lcihjaGlsZFByb2Nlc3MpO1xuICB9IGVsc2Uge1xuICAgIGNoaWxkUHJvY2Vzcy5zdGRvdXQub24oXCJkYXRhXCIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBsb2dRdWV1ZShgJHtkYXRhLnRvU3RyaW5nKCkuc2xpY2UoMCwgLTEpfWApO1xuICAgIH0pO1xuXG4gICAgY2hpbGRQcm9jZXNzLnN0ZGVyci5vbihcImRhdGFcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGxvZ1F1ZXVlKGAke2RhdGEudG9TdHJpbmcoKS5zbGljZSgwLCAtMSl9YCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBIYW5kbGUgd2hlbiB0aGUgcHJvY2VzcyBleGlzdHMgYnkgY2xlYW5pbmcgdXAgYW55IGNoaWxkIHByb2Nlc3NlcyBldGNcbiAgaGFuZGxlUHJvY2Vzc0V4aXQoYXN5bmMgKG1lc3NhZ2U6IHN0cmluZywgZXJyPzogRXJyb3IgfCBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICBjaGlsZFByb2Nlc3Mua2lsbCgpO1xuICAgIGNvbnNvbGUud2FybihcIkVYSVQgQlVJTEQgU0VSVkVSXCIpO1xuICAgIGNvbnNvbGUud2FybihjaGFsay5yZWRCcmlnaHRCb2xkKG1lc3NhZ2UpKTtcbiAgICBpZiAoZXJyICYmIGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oY2hhbGsucmVkQnJpZ2h0Qm9sZChlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpKTtcbiAgICB9XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9KTtcbn1cbiIsCiAgICAiaW1wb3J0IGJ1aWxkQ2xpZW50IGZyb20gXCIuLi8uLi9saWIvYnVpbGQvd2ViLWFwcC92aXRlL2J1aWxkLWNsaWVudC5qc1wiO1xuaW1wb3J0IHJ1bkFwcFNlcnZlciBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9ydW4tYXBwLXNlcnZlci5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3RWZXJzaW9uIH0gZnJvbSBcIi4uLy4uL2xpYi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC12ZXJzaW9uLmpzXCI7XG5cbi8qKlxuICogRW50cnkgcG9pbnQgZm9yIHRoaXMgc2NyaXB0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBcImRldmVsb3BtZW50XCI7XG5cbiAgLy8gQnVpbGQgdGhlIGNsaWVudCBpbiB3YXRjaCBtb2RlLiBUaGUgQ2xpZW50IGJ1aWxkIElTIE9OTFkgbWFkZSBzbyB3ZSBjYW4gc2VlXG4gIC8vIHRoZSBnZW5lcmF0ZWQgZmlsZXMgdG8gYWlkIGluIGRlYnVnZ2luZy5cbiAgYnVpbGRDbGllbnQoKTtcblxuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIlN0YXJ0aW5nIGRldiBzZXJ2ZXIuLi5cIikpO1xuICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiA9IGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCk7XG4gIGF3YWl0IHJ1bkFwcFNlcnZlcigpO1xufVxuIiwKICAgICJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHVybCBmcm9tIFwidXJsXCI7XG5cbmNvbnN0IF9fZGlybmFtZSA9IHVybC5maWxlVVJMVG9QYXRoKG5ldyBVUkwoXCIuXCIsIGltcG9ydC5tZXRhLnVybCkpO1xuXG4vKipcbiAqIFRoaXMgcmV0dXJucyB0aGUgcGF0aCB0byB0aGUgcm9vdCBvZiB0aGUgZGV2b3BzIHByb2plY3QgKGluc3RhbGxhdGlvbiBvclxuICogZGV2ZWxvcG1lbnQgbG9jYXRpb24pXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXZvcHNQcm9qZWN0UGF0aCgpIHtcbiAgY29uc3QgaXNEaXN0ID0gcGF0aC5iYXNlbmFtZShwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uXCIpKSA9PT0gXCJkaXN0XCI7XG4gIGlmIChpc0Rpc3QpIHJldHVybiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uLy4uL1wiKTtcbiAgcmV0dXJuIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi4vLi4vLi4vXCIpO1xufVxuIiwKICAgICJpbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgZ2V0UGFja2FnZU1hbmFnZXIgfSBmcm9tIFwiLi9nZXQtcGFja2FnZS1tYW5hZ2VyLmpzXCI7XG5cbi8qKlxuICogRXhlY3V0ZXMgYW4gYG5wbSBydW4gPGNvbW1hbmQ+YCBpbiB0aGUgY3VycmVudCBjb250ZXh0LlxuICpcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY29tbWFuZCBzdWNjZWVkZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjU2NyaXB0KFxuICBjb21tYW5kOiBzdHJpbmcsXG4gIGFyZ3M6IChzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsKVtdID0gW11cbikge1xuICBjb25zdCBtYW5hZ2VyID0gYXdhaXQgZ2V0UGFja2FnZU1hbmFnZXIoKTtcblxuICByZXR1cm4gZXhlY1N5bmMobWFuYWdlclswXSwgW1xuICAgIFwicnVuXCIsXG4gICAgY29tbWFuZCxcbiAgICBhcmdzLmxlbmd0aCA+IDAgJiYgYXJnc1swXSAhPT0gXCItLVwiID8gXCItLVwiIDogdm9pZCAwLFxuICAgIC4uLmFyZ3MsXG4gIF0pO1xufVxuIiwKICAgICJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGRldm9wc1Byb2plY3RQYXRoIH0gZnJvbSBcIi4uL2xpYi9kZXZvcHMtcHJvamVjdC9kZXZvcHMtcHJvamVjdC1wYXRoLmpzXCI7XG5pbXBvcnQgeyBleGVjU2NyaXB0IH0gZnJvbSBcIi4uL2xpYi9leGVjL2V4ZWMtc2NyaXB0LmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0VmVyc2lvbiB9IGZyb20gXCIuLi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG4vKipcbiAqIFRoaXMgcnVucyBzdG9yeWJvb2sgaW4gdGhpcyBjb250ZXh0IG9uIGJlaGFsZiBvZiB0aGUgcHJvamVjdCB0aGUgZGV2b3BzIGlzXG4gKiBpbnN0YWxsZWQgd2l0aGluLlxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oXG4gIGJ1aWxkOiBzdHJpbmcsXG4gIGluY2x1ZGU6IHN0cmluZ1tdLFxuICAuLi5fYXJnczogYW55W11cbikge1xuICBjb25zdCBQUk9KRUNUX1JPT1QgPSBwYXRoLnJlc29sdmUoXCIuXCIpO1xuICBwcm9jZXNzLmVudi5QUk9KRUNUX1JPT1QgPSBQUk9KRUNUX1JPT1Q7XG4gIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OID0gYXdhaXQgdGFyZ2V0UHJvamVjdFZlcnNpb24oKTtcbiAgY29uc3Qgc3Rvcnlib29rQ29uZmlnUGF0aCA9IHBhdGgucmVzb2x2ZShcIi5zdG9yeWJvb2tcIik7XG4gIC8vIFJ1biB0aGlzIHBhY2thZ2UncyBzdG9yeWJvb2sgc2NyaXB0IGNvbW1hbmQuXG4gIGNvbnN0IHJvb3RQYXRoID0gYXdhaXQgZGV2b3BzUHJvamVjdFBhdGgoKTtcbiAgcHJvY2Vzcy5jaGRpcihyb290UGF0aCk7XG5cbiAgLy8gU2V0IHVwIGFuIGVudmlyb25tZW50IHRoYXQgd2lsbCBiZSBwcm9jZXNzZWQgaW4gdGhlIG1haW4uanMgb2Ygc3Rvcnl5Ym9va1xuICAvLyBjb25maWcuIFRoaXMgd2lsbCBjYXVzZSBhbGwgc3BlY2lmaWVkIG1vZHVsZXMgdG8gYmUgbG9va2VkIGZvciB3aGVuXG4gIC8vIGdhdGhlcmluZyBzdG9yaWVzIHRvIGluY2x1ZGUgaW4gdGhlIGJ1aWxkLlxuICBpZiAoaW5jbHVkZSAmJiBpbmNsdWRlLmxlbmd0aCA+IDApIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX01PRFVMRVNfU1RPUklFUyA9IGluY2x1ZGUuam9pbihcIixcIik7XG4gIH1cblxuICBpZiAoYnVpbGQgPT09IFwiYnVpbGRcIikge1xuICAgIGlmIChcbiAgICAgICFleGVjU2NyaXB0KFwic3Rvcnlib29rXCIsIFtcbiAgICAgICAgXCJidWlsZFwiLFxuICAgICAgICBcIi1jXCIsXG4gICAgICAgIHN0b3J5Ym9va0NvbmZpZ1BhdGgsXG4gICAgICAgIFwiLW9cIixcbiAgICAgICAgYFwiJHtwYXRoLnJlc29sdmUoUFJPSkVDVF9ST09ULCBcInN0b3J5Ym9vay1zdGF0aWNcIil9XCJgLFxuICAgICAgXSlcbiAgICApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoY2hhbGsucmVkQnJpZ2h0Qm9sZChcIkZhaWxlZCB0byBidWlsZCBzdG9yeWJvb2tcIikpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoXG4gICAgICAhZXhlY1NjcmlwdChcInN0b3J5Ym9va1wiLCBbXG4gICAgICAgIFwiZGV2XCIsXG4gICAgICAgIFwiLS1uby12ZXJzaW9uLXVwZGF0ZXNcIixcbiAgICAgICAgXCItcFwiLFxuICAgICAgICBwcm9jZXNzLmVudi5QT1JUIHx8IFwiNjAwNlwiLFxuICAgICAgICBcIi1jXCIsXG4gICAgICAgIGBcIiR7c3Rvcnlib29rQ29uZmlnUGF0aH1cImAsXG4gICAgICBdKVxuICAgICkge1xuICAgICAgY29uc29sZS5lcnJvcihjaGFsay5yZWRCcmlnaHRCb2xkKFwiRmFpbGVkIHRvIHJ1biBzdG9yeWJvb2tcIikpO1xuICAgIH1cbiAgfVxufVxuIiwKICAgICIndXNlIHN0cmljdCc7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cbmxldCBpc0RvY2tlcjtcblxuZnVuY3Rpb24gaGFzRG9ja2VyRW52KCkge1xuXHR0cnkge1xuXHRcdGZzLnN0YXRTeW5jKCcvLmRvY2tlcmVudicpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9IGNhdGNoIChfKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGhhc0RvY2tlckNHcm91cCgpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gZnMucmVhZEZpbGVTeW5jKCcvcHJvYy9zZWxmL2Nncm91cCcsICd1dGY4JykuaW5jbHVkZXMoJ2RvY2tlcicpO1xuXHR9IGNhdGNoIChfKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xuXHRpZiAoaXNEb2NrZXIgPT09IHVuZGVmaW5lZCkge1xuXHRcdGlzRG9ja2VyID0gaGFzRG9ja2VyRW52KCkgfHwgaGFzRG9ja2VyQ0dyb3VwKCk7XG5cdH1cblxuXHRyZXR1cm4gaXNEb2NrZXI7XG59O1xuIiwKICAgICIndXNlIHN0cmljdCc7XG5jb25zdCBvcyA9IHJlcXVpcmUoJ29zJyk7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBpc0RvY2tlciA9IHJlcXVpcmUoJ2lzLWRvY2tlcicpO1xuXG5jb25zdCBpc1dzbCA9ICgpID0+IHtcblx0aWYgKHByb2Nlc3MucGxhdGZvcm0gIT09ICdsaW51eCcpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRpZiAob3MucmVsZWFzZSgpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21pY3Jvc29mdCcpKSB7XG5cdFx0aWYgKGlzRG9ja2VyKCkpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHRyeSB7XG5cdFx0cmV0dXJuIGZzLnJlYWRGaWxlU3luYygnL3Byb2MvdmVyc2lvbicsICd1dGY4JykudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbWljcm9zb2Z0JykgP1xuXHRcdFx0IWlzRG9ja2VyKCkgOiBmYWxzZTtcblx0fSBjYXRjaCAoXykge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcblxuaWYgKHByb2Nlc3MuZW52Ll9fSVNfV1NMX1RFU1RfXykge1xuXHRtb2R1bGUuZXhwb3J0cyA9IGlzV3NsO1xufSBlbHNlIHtcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1dzbCgpO1xufVxuIiwKICAgICIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IChvYmplY3QsIHByb3BlcnR5TmFtZSwgZm4pID0+IHtcblx0Y29uc3QgZGVmaW5lID0gdmFsdWUgPT4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwgcHJvcGVydHlOYW1lLCB7dmFsdWUsIGVudW1lcmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlfSk7XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwgcHJvcGVydHlOYW1lLCB7XG5cdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0Z2V0KCkge1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gZm4oKTtcblx0XHRcdGRlZmluZShyZXN1bHQpO1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9LFxuXHRcdHNldCh2YWx1ZSkge1xuXHRcdFx0ZGVmaW5lKHZhbHVlKTtcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiBvYmplY3Q7XG59O1xuIiwKICAgICJjb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgY2hpbGRQcm9jZXNzID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpO1xuY29uc3Qge3Byb21pc2VzOiBmcywgY29uc3RhbnRzOiBmc0NvbnN0YW50c30gPSByZXF1aXJlKCdmcycpO1xuY29uc3QgaXNXc2wgPSByZXF1aXJlKCdpcy13c2wnKTtcbmNvbnN0IGlzRG9ja2VyID0gcmVxdWlyZSgnaXMtZG9ja2VyJyk7XG5jb25zdCBkZWZpbmVMYXp5UHJvcGVydHkgPSByZXF1aXJlKCdkZWZpbmUtbGF6eS1wcm9wJyk7XG5cbi8vIFBhdGggdG8gaW5jbHVkZWQgYHhkZy1vcGVuYC5cbmNvbnN0IGxvY2FsWGRnT3BlblBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAneGRnLW9wZW4nKTtcblxuY29uc3Qge3BsYXRmb3JtLCBhcmNofSA9IHByb2Nlc3M7XG5cbi8vIFBvZG1hbiBkZXRlY3Rpb25cbmNvbnN0IGhhc0NvbnRhaW5lckVudiA9ICgpID0+IHtcblx0dHJ5IHtcblx0XHRmcy5zdGF0U3luYygnL3J1bi8uY29udGFpbmVyZW52Jyk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcblxubGV0IGNhY2hlZFJlc3VsdDtcbmZ1bmN0aW9uIGlzSW5zaWRlQ29udGFpbmVyKCkge1xuXHRpZiAoY2FjaGVkUmVzdWx0ID09PSB1bmRlZmluZWQpIHtcblx0XHRjYWNoZWRSZXN1bHQgPSBoYXNDb250YWluZXJFbnYoKSB8fCBpc0RvY2tlcigpO1xuXHR9XG5cblx0cmV0dXJuIGNhY2hlZFJlc3VsdDtcbn1cblxuLyoqXG5HZXQgdGhlIG1vdW50IHBvaW50IGZvciBmaXhlZCBkcml2ZXMgaW4gV1NMLlxuXG5AaW5uZXJcbkByZXR1cm5zIHtzdHJpbmd9IFRoZSBtb3VudCBwb2ludC5cbiovXG5jb25zdCBnZXRXc2xEcml2ZXNNb3VudFBvaW50ID0gKCgpID0+IHtcblx0Ly8gRGVmYXVsdCB2YWx1ZSBmb3IgXCJyb290XCIgcGFyYW1cblx0Ly8gYWNjb3JkaW5nIHRvIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL3dpbmRvd3Mvd3NsL3dzbC1jb25maWdcblx0Y29uc3QgZGVmYXVsdE1vdW50UG9pbnQgPSAnL21udC8nO1xuXG5cdGxldCBtb3VudFBvaW50O1xuXG5cdHJldHVybiBhc3luYyBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKG1vdW50UG9pbnQpIHtcblx0XHRcdC8vIFJldHVybiBtZW1vaXplZCBtb3VudCBwb2ludCB2YWx1ZVxuXHRcdFx0cmV0dXJuIG1vdW50UG9pbnQ7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29uZmlnRmlsZVBhdGggPSAnL2V0Yy93c2wuY29uZic7XG5cblx0XHRsZXQgaXNDb25maWdGaWxlRXhpc3RzID0gZmFsc2U7XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IGZzLmFjY2Vzcyhjb25maWdGaWxlUGF0aCwgZnNDb25zdGFudHMuRl9PSyk7XG5cdFx0XHRpc0NvbmZpZ0ZpbGVFeGlzdHMgPSB0cnVlO1xuXHRcdH0gY2F0Y2gge31cblxuXHRcdGlmICghaXNDb25maWdGaWxlRXhpc3RzKSB7XG5cdFx0XHRyZXR1cm4gZGVmYXVsdE1vdW50UG9pbnQ7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29uZmlnQ29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKGNvbmZpZ0ZpbGVQYXRoLCB7ZW5jb2Rpbmc6ICd1dGY4J30pO1xuXHRcdGNvbnN0IGNvbmZpZ01vdW50UG9pbnQgPSAvKD88ISMuKilyb290XFxzKj1cXHMqKD88bW91bnRQb2ludD4uKikvZy5leGVjKGNvbmZpZ0NvbnRlbnQpO1xuXG5cdFx0aWYgKCFjb25maWdNb3VudFBvaW50KSB7XG5cdFx0XHRyZXR1cm4gZGVmYXVsdE1vdW50UG9pbnQ7XG5cdFx0fVxuXG5cdFx0bW91bnRQb2ludCA9IGNvbmZpZ01vdW50UG9pbnQuZ3JvdXBzLm1vdW50UG9pbnQudHJpbSgpO1xuXHRcdG1vdW50UG9pbnQgPSBtb3VudFBvaW50LmVuZHNXaXRoKCcvJykgPyBtb3VudFBvaW50IDogYCR7bW91bnRQb2ludH0vYDtcblxuXHRcdHJldHVybiBtb3VudFBvaW50O1xuXHR9O1xufSkoKTtcblxuY29uc3QgcFRyeUVhY2ggPSBhc3luYyAoYXJyYXksIG1hcHBlcikgPT4ge1xuXHRsZXQgbGF0ZXN0RXJyb3I7XG5cblx0Zm9yIChjb25zdCBpdGVtIG9mIGFycmF5KSB7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBhd2FpdCBtYXBwZXIoaXRlbSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tYXdhaXQtaW4tbG9vcFxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRsYXRlc3RFcnJvciA9IGVycm9yO1xuXHRcdH1cblx0fVxuXG5cdHRocm93IGxhdGVzdEVycm9yO1xufTtcblxuY29uc3QgYmFzZU9wZW4gPSBhc3luYyBvcHRpb25zID0+IHtcblx0b3B0aW9ucyA9IHtcblx0XHR3YWl0OiBmYWxzZSxcblx0XHRiYWNrZ3JvdW5kOiBmYWxzZSxcblx0XHRuZXdJbnN0YW5jZTogZmFsc2UsXG5cdFx0YWxsb3dOb256ZXJvRXhpdENvZGU6IGZhbHNlLFxuXHRcdC4uLm9wdGlvbnNcblx0fTtcblxuXHRpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmFwcCkpIHtcblx0XHRyZXR1cm4gcFRyeUVhY2gob3B0aW9ucy5hcHAsIHNpbmdsZUFwcCA9PiBiYXNlT3Blbih7XG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0YXBwOiBzaW5nbGVBcHBcblx0XHR9KSk7XG5cdH1cblxuXHRsZXQge25hbWU6IGFwcCwgYXJndW1lbnRzOiBhcHBBcmd1bWVudHMgPSBbXX0gPSBvcHRpb25zLmFwcCB8fCB7fTtcblx0YXBwQXJndW1lbnRzID0gWy4uLmFwcEFyZ3VtZW50c107XG5cblx0aWYgKEFycmF5LmlzQXJyYXkoYXBwKSkge1xuXHRcdHJldHVybiBwVHJ5RWFjaChhcHAsIGFwcE5hbWUgPT4gYmFzZU9wZW4oe1xuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdGFwcDoge1xuXHRcdFx0XHRuYW1lOiBhcHBOYW1lLFxuXHRcdFx0XHRhcmd1bWVudHM6IGFwcEFyZ3VtZW50c1xuXHRcdFx0fVxuXHRcdH0pKTtcblx0fVxuXG5cdGxldCBjb21tYW5kO1xuXHRjb25zdCBjbGlBcmd1bWVudHMgPSBbXTtcblx0Y29uc3QgY2hpbGRQcm9jZXNzT3B0aW9ucyA9IHt9O1xuXG5cdGlmIChwbGF0Zm9ybSA9PT0gJ2RhcndpbicpIHtcblx0XHRjb21tYW5kID0gJ29wZW4nO1xuXG5cdFx0aWYgKG9wdGlvbnMud2FpdCkge1xuXHRcdFx0Y2xpQXJndW1lbnRzLnB1c2goJy0td2FpdC1hcHBzJyk7XG5cdFx0fVxuXG5cdFx0aWYgKG9wdGlvbnMuYmFja2dyb3VuZCkge1xuXHRcdFx0Y2xpQXJndW1lbnRzLnB1c2goJy0tYmFja2dyb3VuZCcpO1xuXHRcdH1cblxuXHRcdGlmIChvcHRpb25zLm5ld0luc3RhbmNlKSB7XG5cdFx0XHRjbGlBcmd1bWVudHMucHVzaCgnLS1uZXcnKTtcblx0XHR9XG5cblx0XHRpZiAoYXBwKSB7XG5cdFx0XHRjbGlBcmd1bWVudHMucHVzaCgnLWEnLCBhcHApO1xuXHRcdH1cblx0fSBlbHNlIGlmIChwbGF0Zm9ybSA9PT0gJ3dpbjMyJyB8fCAoaXNXc2wgJiYgIWlzSW5zaWRlQ29udGFpbmVyKCkgJiYgIWFwcCkpIHtcblx0XHRjb25zdCBtb3VudFBvaW50ID0gYXdhaXQgZ2V0V3NsRHJpdmVzTW91bnRQb2ludCgpO1xuXG5cdFx0Y29tbWFuZCA9IGlzV3NsID9cblx0XHRcdGAke21vdW50UG9pbnR9Yy9XaW5kb3dzL1N5c3RlbTMyL1dpbmRvd3NQb3dlclNoZWxsL3YxLjAvcG93ZXJzaGVsbC5leGVgIDpcblx0XHRcdGAke3Byb2Nlc3MuZW52LlNZU1RFTVJPT1R9XFxcXFN5c3RlbTMyXFxcXFdpbmRvd3NQb3dlclNoZWxsXFxcXHYxLjBcXFxccG93ZXJzaGVsbGA7XG5cblx0XHRjbGlBcmd1bWVudHMucHVzaChcblx0XHRcdCctTm9Qcm9maWxlJyxcblx0XHRcdCctTm9uSW50ZXJhY3RpdmUnLFxuXHRcdFx0J+KAk0V4ZWN1dGlvblBvbGljeScsXG5cdFx0XHQnQnlwYXNzJyxcblx0XHRcdCctRW5jb2RlZENvbW1hbmQnXG5cdFx0KTtcblxuXHRcdGlmICghaXNXc2wpIHtcblx0XHRcdGNoaWxkUHJvY2Vzc09wdGlvbnMud2luZG93c1ZlcmJhdGltQXJndW1lbnRzID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRjb25zdCBlbmNvZGVkQXJndW1lbnRzID0gWydTdGFydCddO1xuXG5cdFx0aWYgKG9wdGlvbnMud2FpdCkge1xuXHRcdFx0ZW5jb2RlZEFyZ3VtZW50cy5wdXNoKCctV2FpdCcpO1xuXHRcdH1cblxuXHRcdGlmIChhcHApIHtcblx0XHRcdC8vIERvdWJsZSBxdW90ZSB3aXRoIGRvdWJsZSBxdW90ZXMgdG8gZW5zdXJlIHRoZSBpbm5lciBxdW90ZXMgYXJlIHBhc3NlZCB0aHJvdWdoLlxuXHRcdFx0Ly8gSW5uZXIgcXVvdGVzIGFyZSBkZWxpbWl0ZWQgZm9yIFBvd2VyU2hlbGwgaW50ZXJwcmV0YXRpb24gd2l0aCBiYWNrdGlja3MuXG5cdFx0XHRlbmNvZGVkQXJndW1lbnRzLnB1c2goYFwiXFxgXCIke2FwcH1cXGBcIlwiYCwgJy1Bcmd1bWVudExpc3QnKTtcblx0XHRcdGlmIChvcHRpb25zLnRhcmdldCkge1xuXHRcdFx0XHRhcHBBcmd1bWVudHMudW5zaGlmdChvcHRpb25zLnRhcmdldCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChvcHRpb25zLnRhcmdldCkge1xuXHRcdFx0ZW5jb2RlZEFyZ3VtZW50cy5wdXNoKGBcIiR7b3B0aW9ucy50YXJnZXR9XCJgKTtcblx0XHR9XG5cblx0XHRpZiAoYXBwQXJndW1lbnRzLmxlbmd0aCA+IDApIHtcblx0XHRcdGFwcEFyZ3VtZW50cyA9IGFwcEFyZ3VtZW50cy5tYXAoYXJnID0+IGBcIlxcYFwiJHthcmd9XFxgXCJcImApO1xuXHRcdFx0ZW5jb2RlZEFyZ3VtZW50cy5wdXNoKGFwcEFyZ3VtZW50cy5qb2luKCcsJykpO1xuXHRcdH1cblxuXHRcdC8vIFVzaW5nIEJhc2U2NC1lbmNvZGVkIGNvbW1hbmQsIGFjY2VwdGVkIGJ5IFBvd2VyU2hlbGwsIHRvIGFsbG93IHNwZWNpYWwgY2hhcmFjdGVycy5cblx0XHRvcHRpb25zLnRhcmdldCA9IEJ1ZmZlci5mcm9tKGVuY29kZWRBcmd1bWVudHMuam9pbignICcpLCAndXRmMTZsZScpLnRvU3RyaW5nKCdiYXNlNjQnKTtcblx0fSBlbHNlIHtcblx0XHRpZiAoYXBwKSB7XG5cdFx0XHRjb21tYW5kID0gYXBwO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBXaGVuIGJ1bmRsZWQgYnkgV2VicGFjaywgdGhlcmUncyBubyBhY3R1YWwgcGFja2FnZSBmaWxlIHBhdGggYW5kIG5vIGxvY2FsIGB4ZGctb3BlbmAuXG5cdFx0XHRjb25zdCBpc0J1bmRsZWQgPSAhX19kaXJuYW1lIHx8IF9fZGlybmFtZSA9PT0gJy8nO1xuXG5cdFx0XHQvLyBDaGVjayBpZiBsb2NhbCBgeGRnLW9wZW5gIGV4aXN0cyBhbmQgaXMgZXhlY3V0YWJsZS5cblx0XHRcdGxldCBleGVMb2NhbFhkZ09wZW4gPSBmYWxzZTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLmFjY2Vzcyhsb2NhbFhkZ09wZW5QYXRoLCBmc0NvbnN0YW50cy5YX09LKTtcblx0XHRcdFx0ZXhlTG9jYWxYZGdPcGVuID0gdHJ1ZTtcblx0XHRcdH0gY2F0Y2gge31cblxuXHRcdFx0Y29uc3QgdXNlU3lzdGVtWGRnT3BlbiA9IHByb2Nlc3MudmVyc2lvbnMuZWxlY3Ryb24gfHxcblx0XHRcdFx0cGxhdGZvcm0gPT09ICdhbmRyb2lkJyB8fCBpc0J1bmRsZWQgfHwgIWV4ZUxvY2FsWGRnT3Blbjtcblx0XHRcdGNvbW1hbmQgPSB1c2VTeXN0ZW1YZGdPcGVuID8gJ3hkZy1vcGVuJyA6IGxvY2FsWGRnT3BlblBhdGg7XG5cdFx0fVxuXG5cdFx0aWYgKGFwcEFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjbGlBcmd1bWVudHMucHVzaCguLi5hcHBBcmd1bWVudHMpO1xuXHRcdH1cblxuXHRcdGlmICghb3B0aW9ucy53YWl0KSB7XG5cdFx0XHQvLyBgeGRnLW9wZW5gIHdpbGwgYmxvY2sgdGhlIHByb2Nlc3MgdW5sZXNzIHN0ZGlvIGlzIGlnbm9yZWRcblx0XHRcdC8vIGFuZCBpdCdzIGRldGFjaGVkIGZyb20gdGhlIHBhcmVudCBldmVuIGlmIGl0J3MgdW5yZWYnZC5cblx0XHRcdGNoaWxkUHJvY2Vzc09wdGlvbnMuc3RkaW8gPSAnaWdub3JlJztcblx0XHRcdGNoaWxkUHJvY2Vzc09wdGlvbnMuZGV0YWNoZWQgPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnRhcmdldCkge1xuXHRcdGNsaUFyZ3VtZW50cy5wdXNoKG9wdGlvbnMudGFyZ2V0KTtcblx0fVxuXG5cdGlmIChwbGF0Zm9ybSA9PT0gJ2RhcndpbicgJiYgYXBwQXJndW1lbnRzLmxlbmd0aCA+IDApIHtcblx0XHRjbGlBcmd1bWVudHMucHVzaCgnLS1hcmdzJywgLi4uYXBwQXJndW1lbnRzKTtcblx0fVxuXG5cdGNvbnN0IHN1YnByb2Nlc3MgPSBjaGlsZFByb2Nlc3Muc3Bhd24oY29tbWFuZCwgY2xpQXJndW1lbnRzLCBjaGlsZFByb2Nlc3NPcHRpb25zKTtcblxuXHRpZiAob3B0aW9ucy53YWl0KSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHN1YnByb2Nlc3Mub25jZSgnZXJyb3InLCByZWplY3QpO1xuXG5cdFx0XHRzdWJwcm9jZXNzLm9uY2UoJ2Nsb3NlJywgZXhpdENvZGUgPT4ge1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMuYWxsb3dOb256ZXJvRXhpdENvZGUgJiYgZXhpdENvZGUgPiAwKSB7XG5cdFx0XHRcdFx0cmVqZWN0KG5ldyBFcnJvcihgRXhpdGVkIHdpdGggY29kZSAke2V4aXRDb2RlfWApKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXNvbHZlKHN1YnByb2Nlc3MpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRzdWJwcm9jZXNzLnVucmVmKCk7XG5cblx0cmV0dXJuIHN1YnByb2Nlc3M7XG59O1xuXG5jb25zdCBvcGVuID0gKHRhcmdldCwgb3B0aW9ucykgPT4ge1xuXHRpZiAodHlwZW9mIHRhcmdldCAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIGB0YXJnZXRgJyk7XG5cdH1cblxuXHRyZXR1cm4gYmFzZU9wZW4oe1xuXHRcdC4uLm9wdGlvbnMsXG5cdFx0dGFyZ2V0XG5cdH0pO1xufTtcblxuY29uc3Qgb3BlbkFwcCA9IChuYW1lLCBvcHRpb25zKSA9PiB7XG5cdGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIGBuYW1lYCcpO1xuXHR9XG5cblx0Y29uc3Qge2FyZ3VtZW50czogYXBwQXJndW1lbnRzID0gW119ID0gb3B0aW9ucyB8fCB7fTtcblx0aWYgKGFwcEFyZ3VtZW50cyAhPT0gdW5kZWZpbmVkICYmIGFwcEFyZ3VtZW50cyAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShhcHBBcmd1bWVudHMpKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYGFwcEFyZ3VtZW50c2AgYXMgQXJyYXkgdHlwZScpO1xuXHR9XG5cblx0cmV0dXJuIGJhc2VPcGVuKHtcblx0XHQuLi5vcHRpb25zLFxuXHRcdGFwcDoge1xuXHRcdFx0bmFtZSxcblx0XHRcdGFyZ3VtZW50czogYXBwQXJndW1lbnRzXG5cdFx0fVxuXHR9KTtcbn07XG5cbmZ1bmN0aW9uIGRldGVjdEFyY2hCaW5hcnkoYmluYXJ5KSB7XG5cdGlmICh0eXBlb2YgYmluYXJ5ID09PSAnc3RyaW5nJyB8fCBBcnJheS5pc0FycmF5KGJpbmFyeSkpIHtcblx0XHRyZXR1cm4gYmluYXJ5O1xuXHR9XG5cblx0Y29uc3Qge1thcmNoXTogYXJjaEJpbmFyeX0gPSBiaW5hcnk7XG5cblx0aWYgKCFhcmNoQmluYXJ5KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGAke2FyY2h9IGlzIG5vdCBzdXBwb3J0ZWRgKTtcblx0fVxuXG5cdHJldHVybiBhcmNoQmluYXJ5O1xufVxuXG5mdW5jdGlvbiBkZXRlY3RQbGF0Zm9ybUJpbmFyeSh7W3BsYXRmb3JtXTogcGxhdGZvcm1CaW5hcnl9LCB7d3NsfSkge1xuXHRpZiAod3NsICYmIGlzV3NsKSB7XG5cdFx0cmV0dXJuIGRldGVjdEFyY2hCaW5hcnkod3NsKTtcblx0fVxuXG5cdGlmICghcGxhdGZvcm1CaW5hcnkpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYCR7cGxhdGZvcm19IGlzIG5vdCBzdXBwb3J0ZWRgKTtcblx0fVxuXG5cdHJldHVybiBkZXRlY3RBcmNoQmluYXJ5KHBsYXRmb3JtQmluYXJ5KTtcbn1cblxuY29uc3QgYXBwcyA9IHt9O1xuXG5kZWZpbmVMYXp5UHJvcGVydHkoYXBwcywgJ2Nocm9tZScsICgpID0+IGRldGVjdFBsYXRmb3JtQmluYXJ5KHtcblx0ZGFyd2luOiAnZ29vZ2xlIGNocm9tZScsXG5cdHdpbjMyOiAnY2hyb21lJyxcblx0bGludXg6IFsnZ29vZ2xlLWNocm9tZScsICdnb29nbGUtY2hyb21lLXN0YWJsZScsICdjaHJvbWl1bSddXG59LCB7XG5cdHdzbDoge1xuXHRcdGlhMzI6ICcvbW50L2MvUHJvZ3JhbSBGaWxlcyAoeDg2KS9Hb29nbGUvQ2hyb21lL0FwcGxpY2F0aW9uL2Nocm9tZS5leGUnLFxuXHRcdHg2NDogWycvbW50L2MvUHJvZ3JhbSBGaWxlcy9Hb29nbGUvQ2hyb21lL0FwcGxpY2F0aW9uL2Nocm9tZS5leGUnLCAnL21udC9jL1Byb2dyYW0gRmlsZXMgKHg4NikvR29vZ2xlL0Nocm9tZS9BcHBsaWNhdGlvbi9jaHJvbWUuZXhlJ11cblx0fVxufSkpO1xuXG5kZWZpbmVMYXp5UHJvcGVydHkoYXBwcywgJ2ZpcmVmb3gnLCAoKSA9PiBkZXRlY3RQbGF0Zm9ybUJpbmFyeSh7XG5cdGRhcndpbjogJ2ZpcmVmb3gnLFxuXHR3aW4zMjogJ0M6XFxcXFByb2dyYW0gRmlsZXNcXFxcTW96aWxsYSBGaXJlZm94XFxcXGZpcmVmb3guZXhlJyxcblx0bGludXg6ICdmaXJlZm94J1xufSwge1xuXHR3c2w6ICcvbW50L2MvUHJvZ3JhbSBGaWxlcy9Nb3ppbGxhIEZpcmVmb3gvZmlyZWZveC5leGUnXG59KSk7XG5cbmRlZmluZUxhenlQcm9wZXJ0eShhcHBzLCAnZWRnZScsICgpID0+IGRldGVjdFBsYXRmb3JtQmluYXJ5KHtcblx0ZGFyd2luOiAnbWljcm9zb2Z0IGVkZ2UnLFxuXHR3aW4zMjogJ21zZWRnZScsXG5cdGxpbnV4OiBbJ21pY3Jvc29mdC1lZGdlJywgJ21pY3Jvc29mdC1lZGdlLWRldiddXG59LCB7XG5cdHdzbDogJy9tbnQvYy9Qcm9ncmFtIEZpbGVzICh4ODYpL01pY3Jvc29mdC9FZGdlL0FwcGxpY2F0aW9uL21zZWRnZS5leGUnXG59KSk7XG5cbm9wZW4uYXBwcyA9IGFwcHM7XG5vcGVuLm9wZW5BcHAgPSBvcGVuQXBwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9wZW47XG4iLAogICAgImltcG9ydCB7IGlzQ2hpbGRQcm9jZXNzRXJyb3IgfSBmcm9tIFwiLi4vdXRpbC9pcy1jaGlsZC1wcm9jZXNzLWVycm9yLmpzXCI7XG5pbXBvcnQgeyBpc0RlZmluZWQgfSBmcm9tIFwiLi4vdXRpbC90eXBlcy5qc1wiO1xuXG4vKipcbiAqIEV4ZWN1dGVzIGEgY29tbWFuZCBvbiB0aGUgc2FtZSBzdGRpbyBhcyB0aGUgY3VycmVudCBwcm9jZXNzLiBUaGlzIGFic29yYnNcbiAqIGVycm9ycyBhbmQgYWxzbyBpZ25vcmVzIG51bGwvdW5kZWZpbmVkIGFyZ3VtZW50cy5cbiAqXG4gKiBSZXR1cm5zIHRoZSBzdGRvdXQgcmVzdWx0IG9mIHRoZSBjb21tYW5kIGlmIGl0IHN1Y2NlZWRzIGFuZCBudWxsIGlmIGl0IGZhaWxzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY1N5bmNSZXN1bHQoXG4gIGNvbW1hbmQ6IHN0cmluZyxcbiAgYXJnczogKHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpW10gPSBbXVxuKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gQnVuLnNwYXduU3luYyhbY29tbWFuZCwgLi4uYXJncy5maWx0ZXIoaXNEZWZpbmVkKV0sIHtcbiAgICAgIHN0ZGlvOiBbXCJpbmhlcml0XCIsIFwicGlwZVwiLCBcInBpcGVcIl0sXG4gICAgICBlbnY6IHByb2Nlc3MuZW52LFxuICAgIH0pO1xuXG4gICAgaWYgKHJlc3VsdC5leGl0Q29kZSAhPT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYEVycm9yOiAke2NvbW1hbmR9ICR7YXJncy5qb2luKFwiIFwiKX0gZmFpbGVkIHdpdGggY29kZTogJHtcbiAgICAgICAgICByZXN1bHQuZXhpdENvZGVcbiAgICAgICAgfWBcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmVycm9yKG5ldyBFcnJvcigpLnN0YWNrKTtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIChyZXN1bHQuc3Rkb3V0IHx8IFwiXCIpLnRvU3RyaW5nKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChpc0NoaWxkUHJvY2Vzc0Vycm9yKGVycikpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBFcnJvcjogJHtjb21tYW5kfSAke2FyZ3Muam9pbihcIiBcIil9IGZhaWxlZCB3aXRoIGNvZGU6ICR7ZXJyLnN0YXR1c31gXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKCkuc3RhY2spO1xuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbiIsCiAgICAiZXhwb3J0IGludGVyZmFjZSBJVGVtcGxhdGVSZXN1bHRzIHtcbiAgLyoqIFRoaXMgaXMgdGhlIHJlc3VsdGluZyB0ZW1wbGF0ZSBzdHJpbmcgZ2VuZXJhdGVkIGZyb20gdGhlIHRlbXBsYXRpbmcgKi9cbiAgdGVtcGxhdGU6IHN0cmluZztcbiAgLyoqIFRoaXMgaXMgdGhlIHRlbXBsYXRlIG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIHRlbXBsYXRlLiB7b3B0aW9uOiBudW0gb2NjdXJyZW5jZXN9ICovXG4gIHRlbXBsYXRlUHJvdmlkZWRPcHRpb25zOiBNYXA8c3RyaW5nLCBudW1iZXI+O1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgdGVtcGxhdGUgb3B0aW9ucyBwcm92aWRlZCBieSB0aGUgdGVtcGxhdGUgdGhhdCB3ZXJlIG5vdCByZXNvbHZlZCBieSB0aGUgb3B0aW9ucyBwYXJhbWV0ZXJcbiAgICoge29wdGlvbjogbnVtIG9jY3VycmVuY2VzfVxuICAgKi9cbiAgdW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9uczogTWFwPHN0cmluZywgbnVtYmVyPjtcbiAgLyoqIFRoaXMgaXMgdGhlIG9wdGlvbnMgcHJvdmlkZWQgdG8gdGhlIHRlbXBsYXRlIHRoYXQgZGlkIG5vdCBnZXQgcmVzb2x2ZWQgYnkgdGhlIHRlbXBsYXRlIHtvcHRpb246IDF9ICovXG4gIHVucmVzb2x2ZWRQcm92aWRlZE9wdGlvbnM6IE1hcDxzdHJpbmcsIG51bWJlcj47XG4gIC8qKiBUaGlzIGlzIHRoZSBsaXN0IG9mIG9wdGlvbnMgdGhhdCBESUQgZ2V0IHJlc29sdmVkIGJ5IHRoZSBvcHRpb25zIHByb3ZpZGVkIHtvcHRpb246IG51bSBvY2N1cnJlbmNlc30gKi9cbiAgcmVzb2x2ZWR0ZW1wbGF0ZU9wdGlvbnM6IE1hcDxzdHJpbmcsIG51bWJlcj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRlbXBsYXRlUmVxdWlyZW1lbnRzIHtcbiAgLyoqIEEgc3RyaW5nIGlkZW50aWZpZXIgdG8gbWFrZSBpdCBlYXNpZXIgdG8gaWRlbnRpZnkgd2hpY2ggdGVtcGxhdGUgdGVtcGxhdGUgZmFpbGVkIHJlcXVpcmVtZW50cyAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKiBUaGUgb3B0aW9ucyB0aGF0IG11c3QgYmUgcHJlc2VudCB3aXRoaW4gYm90aCBwcm92aWRlZCBvcHRpb25zIEFORCB3aXRoaW4gdGhlIHRlbXBsYXRlICovXG4gIHZhbHVlczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRlbXBsYXRlT3B0aW9ucyB7XG4gIC8qKiBEb3VibGUgY3VybHkgYnJhY2tldHMgZm9yIHRlbXBsYXRlIGl0ZW1zIGluc3RlYWQgb2Ygb25lICovXG4gIGRvdWJsZUN1cmx5QnJhY2tldHM/OiBib29sZWFuO1xuICAvKiogQ2FsbGJhY2sgZm9yICdyZXF1aXJlZCcgZXJyb3JzIGJlaW5nIGVtaXR0ZWQgKi9cbiAgb25FcnJvcj8obXNnOiBzdHJpbmcpOiB2b2lkO1xuICAvKipcbiAgICogQ2FsbGJhY2sgdGhhdCBhbGxvd3Mgb3ZlcnJpZGVzIGZvciB0b2tlbiByZXBsYWNlbWVudC4gUHJvdmlkZXMgdGhlIHRva2VuIGZvdW5kIGFuZCB0aGVcbiAgICogc3VnZ2VzdGVkIHJlcGxhY2VtZW50IGZvciBpdFxuICAgKi9cbiAgb25Ub2tlbj8odG9rZW46IHN0cmluZywgcmVwbGFjZTogc3RyaW5nKTogc3RyaW5nO1xuICAvKiogVGhpcyBpcyBhIGtleSB2YWx1ZSBwYWlyIHRoZSB0ZW1wbGF0ZSB1c2VzIHRvIG1hdGNoIHRva2VucyBmb3VuZCB0byByZXBsYWNlbWVudCB2YWx1ZXMgKi9cbiAgb3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPjtcbiAgLyoqIFRoaXMgaXMgdXNlZCB0byBpbmRpY2F0ZSB3aGljaCB0b2tlbnMgYXJlIHJlcXVpcmVkIGJvdGggd2l0aGluIHRoZSB0ZW1wbGF0ZSBBTkQgd2l0aGluIHRoZSAnb3B0aW9ucycgKi9cbiAgcmVxdWlyZWQ/OiBJVGVtcGxhdGVSZXF1aXJlbWVudHM7XG4gIC8qKiBUaGlzIGlzIHRoZSB0ZW1wbGF0ZSB3cml0dGVuIHdpdGggdGVtcGxhdGluZyBpbmZvcm1hdGlvbiAqL1xuICB0ZW1wbGF0ZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSBtZXRob2QgdGhhdCBhaWRzIGluIG1ha2luZyB0ZW1wbGF0ZXMgYSBiaXQgbW9yZSBkeW5hbWljIHdpdGggc2ltcGxlIHN0cmluZyByZXBsYWNlbWVudCBiYXNlZCBvblxuICogdG9rZW5zIHdyaXR0ZW4gaW50byB0aGUgdGVtcGxhdGUuIFRva2VucyBpbiB0aGUgdGVtcGxhdGUgd2lsbCBhcHBlYXIgYXMgJHt0b2tlbn0gYW5kIHdpbGwgZWl0aGVyIGJlIGlnbm9yZWQgYnkgdGhpc1xuICogbWV0aG9kIGFuZCB0aHVzIHJlbW92ZWQgb3Igd2lsbCBiZSByZXBsYWNlZCB3aXRoIGEgcHJvdmlkZWQgdmFsdWUuXG4gKlxuICogVGhpcyBtZXRob2Qgd2lsbCBnaXZlIGZlZWRiYWNrIG9uIHRoZSByZXBsYWNlbWVudHMgdGFraW5nIHBsYWNlIGFuZCBzaW1wbGlmeSB0aGUgcHJvY2VzcyBvZiBkZXRlY3RpbmcgZXJyb3JzXG4gKiB3aXRoaW4gdGhlIHByb2Nlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZSh7XG4gIHRlbXBsYXRlLFxuICBvcHRpb25zLFxuICByZXF1aXJlZCxcbiAgZG91YmxlQ3VybHlCcmFja2V0cyxcbiAgb25FcnJvcixcbiAgb25Ub2tlbixcbn06IElUZW1wbGF0ZU9wdGlvbnMpOiBJVGVtcGxhdGVSZXN1bHRzIHtcbiAgY29uc3QgbWF0Y2hlZCA9IG5ldyBNYXAoKTtcbiAgY29uc3Qgbm9WYWx1ZVByb3ZpZGVkID0gbmV3IE1hcCgpO1xuICBjb25zdCBub3RGb3VuZCA9IG5ldyBNYXAoKTtcbiAgY29uc3QgdGVtcGxhdGVQcm92aWRlZE9wdGlvbnMgPSBuZXcgTWFwKCk7XG5cbiAgbGV0IHBhdHRlcm4gPSAvXFwkXFx7KFteXFx9XSopXFx9L2c7XG5cbiAgaWYgKGRvdWJsZUN1cmx5QnJhY2tldHMpIHtcbiAgICBwYXR0ZXJuID0gL1xcJFxce1xceyhbXlxcfV0qKVxcfVxcfS9nO1xuICB9XG5cbiAgY29uc3QgdGVtcGxhdGVSZXN1bHRzID0gdGVtcGxhdGUucmVwbGFjZShwYXR0ZXJuLCAoX3gsIG1hdGNoKSA9PiB7XG4gICAgbGV0IHJlcGxhY2UgPSBcIlwiO1xuICAgIHRlbXBsYXRlUHJvdmlkZWRPcHRpb25zLnNldChcbiAgICAgIG1hdGNoLFxuICAgICAgKHRlbXBsYXRlUHJvdmlkZWRPcHRpb25zLmdldChtYXRjaCkgfHwgMCkgKyAxXG4gICAgKTtcblxuICAgIGlmIChtYXRjaCBpbiBvcHRpb25zKSB7XG4gICAgICBtYXRjaGVkLnNldChtYXRjaCwgKG1hdGNoZWQuZ2V0KG1hdGNoKSB8fCAwKSArIDEpO1xuICAgICAgY29uc3QgdmFsdWUgPSBvcHRpb25zW21hdGNoXTtcblxuICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmVwbGFjZSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBub1ZhbHVlUHJvdmlkZWQuc2V0KG1hdGNoLCAobm9WYWx1ZVByb3ZpZGVkLmdldChtYXRjaCkgfHwgMCkgKyAxKTtcbiAgICB9XG5cbiAgICBpZiAob25Ub2tlbikge1xuICAgICAgcmVwbGFjZSA9IG9uVG9rZW4obWF0Y2gsIHJlcGxhY2UpO1xuICAgICAgaWYgKHJlcGxhY2UgIT09IG1hdGNoKSB7XG4gICAgICAgIG1hdGNoZWQuc2V0KG1hdGNoLCAobWF0Y2hlZC5nZXQobWF0Y2gpIHx8IDApICsgMSk7XG4gICAgICAgIG5vVmFsdWVQcm92aWRlZC5kZWxldGUobWF0Y2gpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXBsYWNlO1xuICB9KTtcblxuICBPYmplY3Qua2V5cyhvcHRpb25zKS5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICBpZiAoIW1hdGNoZWQuZ2V0KG9wdGlvbikpIHtcbiAgICAgIG5vdEZvdW5kLnNldChvcHRpb24sIChub3RGb3VuZC5nZXQob3B0aW9uKSB8fCAwKSArIDEpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gUHJvdmlkZSBtZXRyaWNzXG4gIGNvbnN0IHJlc3VsdHM6IElUZW1wbGF0ZVJlc3VsdHMgPSB7XG4gICAgcmVzb2x2ZWR0ZW1wbGF0ZU9wdGlvbnM6IG1hdGNoZWQsXG4gICAgdGVtcGxhdGU6IHRlbXBsYXRlUmVzdWx0cyxcbiAgICB0ZW1wbGF0ZVByb3ZpZGVkT3B0aW9ucyxcbiAgICB1bnJlc29sdmVkUHJvdmlkZWRPcHRpb25zOiBub3RGb3VuZCxcbiAgICB1bnJlc29sdmVkVGVtcGxhdGVPcHRpb25zOiBub1ZhbHVlUHJvdmlkZWQsXG4gIH07XG5cbiAgaWYgKHJlcXVpcmVkKSB7XG4gICAgLy8gVGhpcyB3aWxsIGVuc3VyZSB0aGF0IEJPVEggdGhlIHBhcmFtZXRlciBpbnB1dCBBTkQgdGhlIHRlbXBsYXRlIHByb3ZpZGVkIHRoZSByZXF1aXJlZCBvcHRpb25zLlxuICAgIHJlcXVpcmVkLnZhbHVlcy5mb3JFYWNoKChyZXF1aXJlKSA9PiB7XG4gICAgICBpZiAocmVzdWx0cy51bnJlc29sdmVkUHJvdmlkZWRPcHRpb25zLmdldChyZXF1aXJlKSkge1xuICAgICAgICBjb25zdCBtc2cgPSBgJHtyZXF1aXJlZC5uYW1lfTogQ291bGQgbm90IHJlc29sdmUgYWxsIHRoZSByZXF1aXJlZCBpbnB1dHMuIElucHV0OiAke3JlcXVpcmV9YDtcbiAgICAgICAgaWYgKG9uRXJyb3IpIG9uRXJyb3IobXNnKTtcbiAgICAgICAgZWxzZSBjb25zb2xlLmVycm9yKG1zZyk7XG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdHMudW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9ucy5nZXQocmVxdWlyZSkpIHtcbiAgICAgICAgY29uc3QgbXNnID0gYCR7cmVxdWlyZWQubmFtZX06IEEgcmVxdWlyZWQgb3B0aW9uIHdhcyBub3QgcHJvdmlkZWQgaW4gdGhlIG9wdGlvbnMgcGFyYW1ldGVyLiBPcHRpb246ICR7cmVxdWlyZX1gO1xuICAgICAgICBpZiAob25FcnJvcikgb25FcnJvcihtc2cpO1xuICAgICAgICBlbHNlIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAoIXJlc3VsdHMucmVzb2x2ZWR0ZW1wbGF0ZU9wdGlvbnMuZ2V0KHJlcXVpcmUpKSB7XG4gICAgICAgIGNvbnN0IG1zZyA9IGAke3JlcXVpcmVkLm5hbWV9OiBBIHJlcXVpcmVkIG9wdGlvbiB3YXMgbm90IHByb3ZpZGVkIGluIHRoZSBvcHRpb25zIHBhcmFtZXRlci4gT3B0aW9uOiAke3JlcXVpcmV9YDtcbiAgICAgICAgaWYgKG9uRXJyb3IpIG9uRXJyb3IobXNnKTtcbiAgICAgICAgZWxzZSBjb25zb2xlLmVycm9yKG1zZyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0cztcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IGhvc3RpbGUgZnJvbSBcImhvc3RpbGVcIjtcbmltcG9ydCBvcGVuIGZyb20gXCJvcGVuXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHZhbGlkVVJMIGZyb20gXCJ2YWxpZC11cmxcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbiB9IGZyb20gXCIuLi9saWIvdXRpbC9kZXNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vbGliL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5pbXBvcnQgeyBleGVjU3luY1Jlc3VsdCB9IGZyb20gXCIuLi9saWIvZXhlYy9leGVjLXN5bmMtcmVzdWx0LmpzXCI7XG5pbXBvcnQgeyB0ZW1wbGF0ZSB9IGZyb20gXCIuLi9saWIvdXRpbC90ZW1wbGF0ZS5qc1wiO1xuaW1wb3J0IHsgd2FpdCB9IGZyb20gXCIuLi9saWIvdXRpbC93YWl0LmpzXCI7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsOiBhbnkpOiB2YWwgaXMgRnVuY3Rpb24ge1xuICByZXR1cm4gdmFsICYmIHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLyoqXG4gKiBXcmFwcyBhIG1ldGhvZCB0aGF0IG5vcm1hbGx5IGhhcyBhbiBhc3luYyBjYWxsYmFjayBwYXR0ZXJuIGludG8gYSBQcm9taXNlLFxuICogdGh1cyBtYWtpbmcgYXdhaXQgcGF0dGVybnMgcG9zc2libGUuXG4gKi9cbmZ1bmN0aW9uIHByb21pc2lmeTxUPihjb250ZXh0OiBULCBtZXRob2ROYW1lOiBrZXlvZiBULCAuLi5hcmdzOiBhbnlbXSkge1xuICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgbWV0aG9kID0gY29udGV4dFttZXRob2ROYW1lXTtcblxuICAgIGlmICghaXNGdW5jdGlvbihtZXRob2QpKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKGAke1N0cmluZyhtZXRob2ROYW1lKX0gaXMgbm90IGEgZnVuY3Rpb25gKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbWV0aG9kKC4uLmFyZ3MsIChlcnJvcjogRXJyb3IsIHZhbHVlOiBhbnkpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHZhbHVlIHx8IHZvaWQgMCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFRoaXMgbG9va3MgYXQgdGhlIHBhY2thZ2UuanNvbiBhbmQgbW9kaWZpZXMgdGhlIGhvc3QgZmlsZSB0byBpbmNsdWRlIHRoZVxuICogaG9zdHMgc3BlY2lmaWVkIGluIHRoZSBcImhvc3RzXCIgcHJvcGVydHkuIFRoaXMgd2lsbCBvbmx5IHdvcmsgaWYgdGhpcyBzY3JpcHRcbiAqIHdhcyByYW4gYXMgYW4gYWRtaW5pc3RyYXRvci5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29uZmlndXJlSG9zdHMoKSB7XG4gIC8vIEdldCB0aGUgcGFja2FnZSBmb3IgdGhlIHByb2plY3RcbiAgY29uc3QgcGtnID0gZnMucmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSk7XG4gIGNvbnN0IGhvc3RzID0gcGtnLmhvc3RzO1xuXG4gIC8vIE5vIGhvc3RzIHByZXNlbnQsIG1lYW5zIHdlIGRvIG5vdCBuZWVkIHRvIGRvIGFueXRoaW5nIGluIHRoaXMgcHJvY2Vzcy5cbiAgaWYgKCFob3N0cykgcmV0dXJuO1xuXG4gIC8vIFVwZGF0ZSB0aGUgaG9zdHMgZmlsZSB0byBtYXRjaCB0aGUgaG9zdHMgc3BlY2lmaWVkIGluIHBhY2thZ2UuanNvblxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoaG9zdHMpO1xuICBsZXQgbGluZXMgPSBhd2FpdCBwcm9taXNpZnkoaG9zdGlsZSwgXCJnZXRcIiwgZmFsc2UpO1xuICBjb25zdCBuZWVkc0hvc3Q6IFtzdHJpbmcsIHN0cmluZ11bXSA9IFtdO1xuXG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3coXCJVcGRhdGluZyBob3N0cyBmaWxlLi4uXCIpKTtcbiAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgIHRyeSB7XG4gICAgICAvLyBJZiB0aGUgaG9zdCBpcyBub3QgcHJlc2VudCBpbiB0aGUgY29uZmlnIGFscmVhZHksIGFkZCBpdCBpblxuICAgICAgaWYgKFxuICAgICAgICAhbGluZXMuZmluZChcbiAgICAgICAgICAobDogW3N0cmluZywgc3RyaW5nXSkgPT4gbFswXSA9PT0ga2V5ICYmIGxbMV0gPT09IGhvc3RzW2tleV1cbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIG5lZWRzSG9zdC5wdXNoKFtrZXksIGhvc3RzW2tleV1dKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikgY29uc29sZS53YXJuKGNoYWxrLnJlZChlcnIubWVzc2FnZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFwcGVuZCB0aGUgaG9zdHMgdG8gL2V0Yy9ob3N0c1xuICBpZiAobmVlZHNIb3N0Lmxlbmd0aCA+IDApIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBjaGFsay55ZWxsb3coXG4gICAgICAgIFwiQWRkaW5nIGhvc3RzIChZb3UgbWF5IGJlIHByb21wdGVkIGZvciBhZG1pbmlzdHJhdG9yIHBhc3N3b3JkKTpcXG5cXHRcIixcbiAgICAgICAgbmVlZHNIb3N0Lm1hcCgoaCkgPT4gYCR7aFswXX0gPT4gJHtoWzFdfWApLmpvaW4oXCJcXG5cXHRcIilcbiAgICAgIClcbiAgICApO1xuXG4gICAgYXdhaXQgZXhlY1N5bmMoXCJzdWRvXCIsIFtcbiAgICAgIFwiZWNob1wiLFxuICAgICAgXCJHcmFudGVkIHN1ZG8gYWNjZXNzIHRvIHVwZGF0ZSBob3N0cyBmaWxlLlwiLFxuICAgIF0pO1xuXG4gICAgLy8gTGFzdCB0aHJlZSBjaGFyYWN0ZXJzIGFyZSB0aGUgcGVybWlzc2lvbnNcbiAgICBjb25zdCBjaG1vZEJhayA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwic3RhdFwiLCBbXG4gICAgICBcIi1mXCIsXG4gICAgICBcIiVwXCIsXG4gICAgICBcIi9ldGMvaG9zdHNcIixcbiAgICBdKS50b1N0cmluZygpO1xuXG4gICAgLy8gTWFrZSB0aGUgZmlsZSB3cml0ZWFibGVcbiAgICBhd2FpdCBleGVjU3luYyhcInN1ZG9cIiwgW1wiY2htb2RcIiwgXCI2NjZcIiwgXCIvZXRjL2hvc3RzXCJdKTtcblxuICAgIGZvciAoY29uc3QgaG9zdCBvZiBuZWVkc0hvc3QpIHtcbiAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKFwiL2V0Yy9ob3N0c1wiLCBgJHtob3N0WzBdfSAke2hvc3RbMV19YCk7XG4gICAgfVxuXG4gICAgZnMuYXBwZW5kRmlsZVN5bmMoXCIvZXRjL2hvc3RzXCIsIGBcXG5gKTtcblxuICAgIC8vIFJlc3RvcmUgdGhlIHBlcm1pc3Npb25zXG4gICAgYXdhaXQgZXhlY1N5bmMoXCJzdWRvXCIsIFtcbiAgICAgIFwiY2htb2RcIixcbiAgICAgIGNobW9kQmFrLnN1YnN0cmluZyhjaG1vZEJhay5sZW5ndGggLSA0KS50cmltKCksXG4gICAgICBcIi9ldGMvaG9zdHNcIixcbiAgICBdKTtcbiAgfVxuXG4gIGF3YWl0IHdhaXQoNTAwKTtcblxuICAvLyBBZnRlciB1cGRhdGluZyB0aGUgaG9zdCBmaWxlLCBsZXQncyBlbnN1cmUgYWxsIGhvc3RzIHdlcmUgYWRkZWQuXG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3coXCJWZXJpZnlpbmcgaG9zdHMgZmlsZS4uLlwiKSk7XG4gIGxpbmVzID0gYXdhaXQgcHJvbWlzaWZ5KGhvc3RpbGUsIFwiZ2V0XCIsIGZhbHNlKTtcbiAgbGV0IGRpZEZhaWwgPSBmYWxzZTtcblxuICBuZWVkc0hvc3QuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgaWYgKFxuICAgICAgIWxpbmVzLmZpbmQoKGw6IFtzdHJpbmcsIHN0cmluZ10pID0+IGxbMF0gPT09IGtleSAmJiBsWzFdID09PSBob3N0c1trZXldKVxuICAgICkge1xuICAgICAgZGlkRmFpbCA9IHRydWU7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGNoYWxrLnJlZEJyaWdodChcbiAgICAgICAgICBgRmFpbGVkIHRvIGFkZCBob3N0OiAke2NoYWxrLnllbGxvd0JyaWdodChcbiAgICAgICAgICAgIGtleVxuICAgICAgICAgICl9ID0+ICR7Y2hhbGsueWVsbG93QnJpZ2h0KHZhbHVlKX1gXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICBpZiAoZGlkRmFpbCkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGNoYWxrLnJlZChkZXNjcmlwdGlvbmBcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICAqIFNvbWUgaG9zdHMgc3BlY2lmaWVkIGluIHRoZSBwYWNrYWdlLmpzb24gd2VyZSBub3QgYWJsZSB0byBiZSB3cml0dGVuICAqXG4gICAgICAgICogdG8gdGhlIGhvc3RzIGZpbGUgZm9yIHRoZSBzeXN0ZW0uIFlvdSBjYW4gYW1lbmQgdGhpcyBieSBlZGl0aW5nIHRoZSAgICpcbiAgICAgICAgKiBmaWxlIHlvdXJzZWxmLCBvciBieSB0cnlpbmcgdG8gcnVuIHRoaXMgc2NyaXB0IGFnYWluIGFzIGFuIGFkbWluLiAgICAgKlxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICBgKVxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3BlblVSTChcbiAgdXJsQ29uZmlnOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxuICB1cmw6IHN0cmluZyxcbiAgb3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPlxuKSB7XG4gIGxldCB0YXJnZXRVcmwgPSB1cmw7XG5cbiAgaWYgKHZhbGlkVVJMLmlzV2ViVXJpKHVybCkpIHtcbiAgICB0YXJnZXRVcmwgPSB1cmw7XG4gIH0gZWxzZSBpZiAodXJsQ29uZmlnW3VybF0pIHtcbiAgICB0YXJnZXRVcmwgPSB1cmxDb25maWdbdXJsXTtcbiAgfVxuXG4gIC8vIFJlcGxhY2UgYW55XG4gIGNvbnN0IHJlc3VsdCA9IHRlbXBsYXRlKHtcbiAgICBvcHRpb25zLFxuICAgIHRlbXBsYXRlOiB0YXJnZXRVcmwsXG4gIH0pO1xuXG4gIGlmIChyZXN1bHQudW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9ucy5zaXplID4gMCkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGNoYWxrLnJlZChcbiAgICAgICAgZGVzY3JpcHRpb25gXG4gICAgICAgICAgWW91IG11c3Qgc3BlY2lmeSB0aGVzZSBlbnYgdmFyaWFibGVzIGZvciB0aGlzIFVSTCB0byB3b3JrOlxuICAgICAgICAgICR7QXJyYXkuZnJvbShyZXN1bHQudW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9ucy5rZXlzKCkpLmpvaW4oXCJcXG5cXHRcIil9XG4gICAgICAgIGBcbiAgICAgIClcbiAgICApO1xuICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgZW52IGNvbmZpZ3VyYXRpb24gZm9yIFVSTFwiKTtcbiAgfVxuXG4gIHRhcmdldFVybCA9IHJlc3VsdC50ZW1wbGF0ZTtcblxuICBpZiAodmFsaWRVUkwuaXNXZWJVcmkodGFyZ2V0VXJsKSkge1xuICAgIGNvbnNvbGUud2FybihcIk5hdmlnYXRpbmcgdG86XCIsIGNoYWxrLmN5YW5CcmlnaHRCb2xkKHRhcmdldFVybCkpO1xuICAgIG9wZW4odGFyZ2V0VXJsKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJDYW4gbm90IG9wZW4gaW52YWxpZCBVUkw6XCIsIGNoYWxrLnJlZEJyaWdodEJvbGQodGFyZ2V0VXJsKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNvbW1hbmQgc2ltcGx5IG9wZW5zIGEgVVJMIHZpYSBhbiBucG0gY29tbWFuZC4gVGhlIHZhbHVlIHByb3ZpZGVkIGNhbiBiZVxuICogYSB2YWxpZCBVUkkgT1IgaXQgY2FuIGJlIGEga2V5IGZvciB0aGUgdmFsdWUgZm91bmQgaW4gcGFja2FnZS5qc29uIFwidXJsXCIuXG4gKlxuICogZWcgLVxuICogdXJsOiBcIm5vZGUgYmluL21haW4gdXJsIFxcXCJodHRwczovL2ZpZ21hLmNvbVxcXCJcIlxuICpcbiAqIG9yIGlmIHRoZXJlIGlzIGEgXCJmaWdtYVwiIGVudHJ5IGluIHRoZSBcInVybFwiIHByb3BlcnR5IGluIHBhY2thZ2UuanNvbiAtXG4gKiB1cmw6IFwibm9kZSBiaW4vbWFpbiB1cmwgXFxcImZpZ21hXFxcIlwiXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bih1cmw/OiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9ucz86IHN0cmluZ1tdKSB7XG4gIGNvbnN0IHBrZyA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICBjb25zdCB1cmxDb25maWc6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSBwa2c/LnVybCB8fCB7fTtcbiAgY29uc3Qgb3B0aW9uc0NvbmZpZzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9XG4gICAgb3B0aW9ucz8ucmVkdWNlKFxuICAgICAgKHAsIG9wdCwgaSkgPT4ge1xuICAgICAgICBwW2Ake2kgKyAxfWBdID0gb3B0O1xuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH0sXG4gICAgICB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gICAgKSB8fCB7fTtcblxuICBpZiAoIXVybCB8fCB1cmwubGVuZ3RoIDw9IDApIHtcbiAgICBjb25zb2xlLndhcm4oZGVzY3JpcHRpb25gXG4gICAgICBBdmFpbGFibGUgVVJMczpcbiAgICAgICAgJHtjaGFsay5jeWFuQnJpZ2h0Qm9sZChPYmplY3Qua2V5cyh1cmxDb25maWcpLmpvaW4oXCJcXG4gICAgICAgIFwiKSl9XG4gICAgYCk7XG5cbiAgICByZXR1cm47XG4gIH1cblxuICBhd2FpdCBjb25maWd1cmVIb3N0cygpO1xuXG4gIGNvbnN0IGFsbE9wdGlvbnMgPSB7XG4gICAgLi4ucHJvY2Vzcy5lbnYsXG4gICAgLi4ub3B0aW9uc0NvbmZpZyxcbiAgfTtcblxuICBpZiAoQXJyYXkuaXNBcnJheSh1cmwpKSB7XG4gICAgdXJsLmZvckVhY2goKHVyaSkgPT4ge1xuICAgICAgb3BlblVSTCh1cmxDb25maWcsIHVyaSwgYWxsT3B0aW9ucyk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb3BlblVSTCh1cmxDb25maWcsIHVybCwgYWxsT3B0aW9ucyk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IGNoaWxkX3Byb2Nlc3MgZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcblxuLyoqXG4gKiBUaGlzIGNoZWNrcyB0aGUgY3VycmVudCBnaXQgcmVwb3NpdG9yeSB0byBzZWUgaWYgaXQgaGFzIHVuY29taXR0ZWQgY2hhbmdlc1xuICogbGluZ2VyaW5nLiBUaGlzIGNoZWNrIGlzIG5lY2Vzc2FyeSBiZWZvcmUgc29tZSBwcm9jZXNzIGNhbiBiZSBleGVjdXRlZFxuICogc2FmZWx5LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2l0SGFzQ2hhbmdlcygpIHtcbiAgdHJ5IHtcbiAgICAvLyBFeGVjdXRlIHRoZSBHaXQgY29tbWFuZCBhbmQgY2FwdHVyZSB0aGUgb3V0cHV0XG4gICAgY29uc3Qgb3V0cHV0ID0gY2hpbGRfcHJvY2Vzcy5leGVjU3luYyhcbiAgICAgIFwiZ2l0IHN0YXR1cyAtLXBvcmNlbGFpbj12MSAyPi9kZXYvbnVsbFwiLFxuICAgICAge1xuICAgICAgICBlbmNvZGluZzogXCJ1dGYtOFwiLFxuICAgICAgfVxuICAgICk7XG5cbiAgICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGxpbmVzIGluIHRoZSBvdXRwdXRcbiAgICAvLyBBIGNvdW50IG9mIDAgbWVhbnMgdGhlcmUgYXJlIG5vIGNoYW5nZXNcbiAgICBjb25zdCBsaW5lQ291bnQgPSBvdXRwdXQudHJpbSgpLnNwbGl0KFwiXFxuXCIpLmZpbHRlcihCb29sZWFuKS5sZW5ndGg7XG5cbiAgICBpZiAobGluZUNvdW50ID09PSAwKSByZXR1cm4gZmFsc2U7XG4gIH0gY2F0Y2ggKF9lKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vZXhlYy9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IGdpdEhhc0NoYW5nZXMgfSBmcm9tIFwiLi9naXQtaGFzLWNoYW5nZXMuanNcIjtcbmltcG9ydCB7IHByb21wdENvbmZpcm0gfSBmcm9tIFwiLi4vcHJvbXB0L3Byb21wdC1jb25maXJtLmpzXCI7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudCBjb250ZXh0IGJhY2sgdG8gZGV2IGFuZCByZXNldHMgdG8gdGhlIGxhdGVzdCBpbiBkZXYuXG4gKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBvcGVyYXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cbiAqXG4gKiBJZiBmYWxzZSBpcyByZXR1cm5lZCwgdGhlIGdpdCBzdGF0ZSBzaG91bGQgYmUgY29uc2lkZXJlZCB1bmRlZmluZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnaXRSZXR1cm5Ub0Rldih3aXRoUHJvbXB0PzogYm9vbGVhbikge1xuICAvLyBJZiBhIHByb21wdCB3YXMgcmVxdWVzdGVkLCB3ZSB3aWxsIGFzayB0aGUgdXNlciBpZiB0aGV5IHdpc2ggdG8gbGV0IHRoaXNcbiAgLy8gb3BlcmF0aW9uIGhhcHBlbi5cbiAgaWYgKHdpdGhQcm9tcHQpIHtcbiAgICBjb25zdCBzaG91bGRHaXRCcmFuY2ggPSBhd2FpdCBwcm9tcHRDb25maXJtKGBcbiAgICAgIFdvdWxkIHlvdSBsaWtlIHRvIHJldHVybiBiYWNrIHRvIGRldmVsb3BtZW50P1xuICAgICAgUnVucyB0aGUgZm9sbG93aW5nOlxuICAgICAgICBnaXQgZmV0Y2hcbiAgICAgICAgZ2l0IGNoZWNrb3V0IGRldlxuICAgICAgICBnaXQgcmVzZXQgLS1oYXJkIG9yaWdpbi9kZXZcbiAgICBgKTtcblxuICAgIGlmICghc2hvdWxkR2l0QnJhbmNoKSByZXR1cm47XG4gIH1cblxuICBpZiAoYXdhaXQgZ2l0SGFzQ2hhbmdlcygpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiQ2FuIG5vdCByZXR1cm4gdG8gZGV2IGJyYW5jaCBhcyBjaGFuZ2VzIGFyZSBwcmVzZW50IG9uIHRoZSBjdXJyZW50IGJyYW5jaC5cIlxuICAgICk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBsZXQgZmFpbCA9IGZhbHNlO1xuXG4gIGlmICghKGF3YWl0IGV4ZWNTeW5jKFwiZ2l0XCIsIFtcImZldGNoXCJdKSkpIGZhaWwgPSB0cnVlO1xuICBpZiAoIShhd2FpdCBleGVjU3luYyhcImdpdFwiLCBbXCJjaGVja291dFwiLCBcImRldlwiXSkpKSBmYWlsID0gdHJ1ZTtcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoXCJnaXRcIiwgW1wicmVzZXRcIiwgXCItLWhhcmRcIiwgXCJvcmlnaW4vZGV2XCJdKSkpIGZhaWwgPSB0cnVlO1xuXG4gIGlmIChmYWlsKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCByZXR1cm4gdG8gZGV2IGJyYW5jaC5cIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBJZ25vcmUgZnJvbSBcImlnbm9yZVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uLy4uL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzIH0gZnJvbSBcIi4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LWRlcGVuZGVuY2llcy5qc1wiO1xuaW1wb3J0IHsgd2FpdCB9IGZyb20gXCIuLi8uLi91dGlsL3dhaXQuanNcIjtcblxuY29uc3QgZ2l0SWdub3JlUGF0aCA9IHBhdGgucmVzb2x2ZShcIi5naXRpZ25vcmVcIik7XG5sZXQgaWdub3JlID0gSWdub3JlLmRlZmF1bHQoKTtcblxuaWYgKGZzLmV4aXN0c1N5bmMoZ2l0SWdub3JlUGF0aCkpIHtcbiAgaWdub3JlID0gaWdub3JlLmFkZChmcy5yZWFkRmlsZVN5bmMoZ2l0SWdub3JlUGF0aCkudG9TdHJpbmcoKSk7XG59XG5cbi8qKlxuICogQnVuZGxlIHRoZSBjb21tYW5kc1xuICovXG5hc3luYyBmdW5jdGlvbiBidWlsZENvbW1hbmRzKCkge1xuICAvLyBXZSBnZXQgYWxsIGRlcGVuZGVuY2llcyBvZiB0aGUgcHJvamVjdCBhbmQgY29uc2lkZXIgdGhlbSBleHRlcm5hbC4gVGhpc1xuICAvLyBpbXByb3ZlcyB0aGUgYWJpbGl0eSBmb3IgdGhlIGNvZGUgdG8gYmUgYnVuZGxlZCBzaW5jZSBiaW4gY29tbWFuZHMgaGl0IGFcbiAgLy8gTE9UIG9mIHNuYWdzIGluIGhvdyB0aGV5IGFyZSBpbXBsZW1lbnRlZC5cbiAgY29uc3QgZGVwcyA9IGF3YWl0IHRhcmdldFByb2plY3REZXBlbmRlbmNpZXMoKTtcblxuICAvLyBCdWlsZCB0aGUgc291cmNlIGRpcmVjdGx5IHRvIHRoZSBkaXN0IGZvbGRlci4gVGhpcyBrZWVwcyBzYW1lIHJlbGF0aXZlXG4gIC8vIGRlcHRoIGZvciBhbGwgZmlsZXMgYXMgd2hlbiB0aGV5IGFyZSBpbiB0aGUgYmluIGZvbGRlciB0aGVtc2VsdmVzIGFuZFxuICAvLyByZWR1Y2VzIHByb2plY3QgY29tcGxleGl0eS5cbiAgY29uc29sZS53YXJuKFwiQnVpbGRpbmcgZnVsbCBkaXN0cmlidXRpb24uLi5cIik7XG4gIGxldCByZXN1bHRzID0gYXdhaXQgQnVuLmJ1aWxkKHtcbiAgICBlbnRyeXBvaW50czogW3BhdGgucmVzb2x2ZShcIi4vYmluL21haW4udHNcIildLFxuICAgIHRhcmdldDogXCJidW5cIixcbiAgICBleHRlcm5hbDogT2JqZWN0LmtleXMoZGVwcyksXG4gICAgbWluaWZ5OiB0cnVlLFxuICAgIHNvdXJjZW1hcDogXCJpbmxpbmVcIixcbiAgfSk7XG5cbiAgZm9yIChjb25zdCByZXNvdXJjZSBvZiByZXN1bHRzLm91dHB1dHMpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIldyaXRpbmcgYmluIGJ1bmRsZSByZXNvdXJjZTpcIixcbiAgICAgIGNoYWxrLmN5YW5CcmlnaHRCb2xkKHJlc291cmNlLnBhdGgpXG4gICAgKTtcblxuICAgIGF3YWl0IEJ1bi53cml0ZShwYXRoLnJlc29sdmUoXCIuL2Rpc3QvYmluXCIsIHJlc291cmNlLnBhdGgpLCByZXNvdXJjZSk7XG4gIH1cblxuICBjb25zb2xlLndhcm4oXCJCdWlsZGluZyBnaW1wZWQgZGlzdHJpYnV0aW9uLi4uXCIpO1xuICByZXN1bHRzID0gYXdhaXQgQnVuLmJ1aWxkKHtcbiAgICBlbnRyeXBvaW50czogW3BhdGgucmVzb2x2ZShcIi4vYmluL21haW4tZ2ltcC50c1wiKV0sXG4gICAgdGFyZ2V0OiBcIm5vZGVcIixcbiAgICBleHRlcm5hbDogT2JqZWN0LmtleXMoZGVwcyksXG4gICAgbWluaWZ5OiB0cnVlLFxuICAgIHNvdXJjZW1hcDogXCJpbmxpbmVcIixcbiAgfSk7XG5cbiAgZm9yIChjb25zdCByZXNvdXJjZSBvZiByZXN1bHRzLm91dHB1dHMpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIldyaXRpbmcgYmluIGJ1bmRsZSByZXNvdXJjZTpcIixcbiAgICAgIGNoYWxrLmN5YW5CcmlnaHRCb2xkKHJlc291cmNlLnBhdGgpXG4gICAgKTtcblxuICAgIGF3YWl0IEJ1bi53cml0ZShwYXRoLnJlc29sdmUoXCIuL2Rpc3QvYmluXCIsIHJlc291cmNlLnBhdGgpLCByZXNvdXJjZSk7XG4gIH1cblxuICBjb25zb2xlLndhcm4oXCJDb3B5aW5nIGVudHJ5IGNyb3NzLXBsYXRmb3JtIGRpc3RyaWJ1dGlvbi4uLlwiKTtcbiAgZnMuY29weUZpbGVTeW5jKFxuICAgIHBhdGgucmVzb2x2ZShcIi4vYmluL21haW4tZW50cnkuY2pzXCIpLFxuICAgIHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW4vbWFpbi1lbnRyeS5janNcIilcbiAgKTtcbn1cblxuLyoqXG4gKiBCdWlsZHMgdGhlIGRpc3RyaWJ1dGlvbiB2ZXJzaW9ucyBvZiBzaGltIGZpbGVzLlxuICovXG5hc3luYyBmdW5jdGlvbiBidWlsZFNoaW0oKSB7XG4gIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCIuL2Jpbi9zaGltXCIpKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzaGltIGRpc3RyaWJ1dGlvbiBmaWxlcyBmb3VuZCB0byBiZSBidWlsdFwiKTtcbiAgfVxuXG4gIC8vICBEZWxldGUgdGhlIGN1cnJlbnQgc2hpbSBkaXN0cmlidXRpb25cbiAgaWYgKGZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiLi9zaGltXCIpKSkge1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwiLi9zaGltXCIpKTtcbiAgfVxuXG4gIC8vIFdlIGdldCBhbGwgZGVwZW5kZW5jaWVzIG9mIHRoZSBwcm9qZWN0IGFuZCBjb25zaWRlciB0aGVtIGV4dGVybmFsLiBUaGlzXG4gIC8vIGltcHJvdmVzIHRoZSBhYmlsaXR5IGZvciB0aGUgY29kZSB0byBiZSBidW5kbGVkIHNpbmNlIGJpbiBjb21tYW5kcyBoaXQgYVxuICAvLyBMT1Qgb2Ygc25hZ3MgaW4gaG93IHRoZXkgYXJlIGltcGxlbWVudGVkLlxuICBjb25zdCBkZXBzID0gYXdhaXQgdGFyZ2V0UHJvamVjdERlcGVuZGVuY2llcygpO1xuXG4gIGNvbnNvbGUud2FybihcIkJ1aWxkaW5nIHNoaW0gZGlzdHJpYnV0aW9uLi4uXCIpO1xuICBjb25zdCByZXN1bHRzID0gYXdhaXQgQnVuLmJ1aWxkKHtcbiAgICBlbnRyeXBvaW50czogW3BhdGgucmVzb2x2ZShcIi4vYmluL3NoaW0vaW5kZXgudHNcIildLFxuICAgIHRhcmdldDogXCJub2RlXCIsXG4gICAgZXh0ZXJuYWw6IE9iamVjdC5rZXlzKGRlcHMpLFxuICAgIG1pbmlmeTogdHJ1ZSxcbiAgfSk7XG5cbiAgLy8gV3JpdGUgb3VyIGZpbGVzIHRvIGEgbmFtZXNwYWNlIGZvbGRlciB0aGF0IGNhbiBjb250YWluIGFueSBwcm9qZWN0IGltcG9ydHNcbiAgLy8gd2l0aGluIHRoZSBzaGltIHByb2plY3Qgd2l0aG91dCBwb2xsdXRpbmcgdGhlIHByb2plY3Qgd2l0aCBkaXN0cmlidXRpb25cbiAgLy8gZmlsZXMuXG4gIGZvciAoY29uc3QgcmVzb3VyY2Ugb2YgcmVzdWx0cy5vdXRwdXRzKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJXcml0aW5nIHNoaW0gYnVuZGxlIHJlc291cmNlOlwiLFxuICAgICAgY2hhbGsuY3lhbkJyaWdodEJvbGQocmVzb3VyY2UucGF0aClcbiAgICApO1xuXG4gICAgYXdhaXQgQnVuLndyaXRlKFxuICAgICAgcGF0aC5yZXNvbHZlKFwiLi9zaGltL3NyYy9iaW4vc2hpbVwiLCByZXNvdXJjZS5wYXRoKSxcbiAgICAgIHJlc291cmNlXG4gICAgKTtcbiAgfVxuXG4gIC8vIFdyaXRlIGEgYmFycmVsIGV4cG9ydCBpbiB0aGUgc2hpbSBmb2xkZXIgdG8gbm9ybWFsaXplIHRoZSBpbXBvcnQgcGF0aCBpbiBhXG4gIC8vIHdheSB0aGF0IGlzIGNvbnZlbmllbnQgZm9yIHRoZSBkZXZlbG9wZXI6XG4gIC8vIGltcG9ydCB7IC4uLiB9IGZyb20gXCJkZXZvcHMvc2hpbS9pbmRleC5qc1wiO1xuICBmcy53cml0ZUZpbGVTeW5jKFxuICAgIHBhdGgucmVzb2x2ZShcIi4vc2hpbS9pbmRleC5qc1wiKSxcbiAgICBgZXhwb3J0ICogZnJvbSBcIi4vc3JjL2Jpbi9zaGltL2luZGV4LmpzXCI7XFxuYCxcbiAgICB7IGVuY29kaW5nOiBcInV0Zi04XCIgfVxuICApO1xuICBmcy53cml0ZUZpbGVTeW5jKFxuICAgIHBhdGgucmVzb2x2ZShcIi4vc2hpbS9pbmRleC5kLnRzXCIpLFxuICAgIGBleHBvcnQgKiBmcm9tIFwiLi9zcmMvYmluL3NoaW0vaW5kZXguZC50c1wiO1xcbmAsXG4gICAgeyBlbmNvZGluZzogXCJ1dGYtOFwiIH1cbiAgKTtcblxuICAvLyBXcml0ZSB0aGUgdHlwZSBkZWNhbHJhdGlvbnMgZm9yIHRoZSBmaWxlcy4gTWFrZSBhIHRlbXAgdHNjb25maWcgcHJvamVjdFxuICAvLyBmaWxlIHRvIHRhcmdldCB0aGUgc2hpbSBzb3VyY2UgZmlsZXMgb25seS5cbiAgY29uc3QgdHNDb25maWcgPSBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcuanNvblwiKSk7XG4gIHRzQ29uZmlnLmV4Y2x1ZGUgPSB0c0NvbmZpZy5leGNsdWRlIHx8IFtdO1xuICB0c0NvbmZpZy5leGNsdWRlLnB1c2goXCIuL2Jpbi9saWIvKipcIik7XG4gIHRzQ29uZmlnLmluY2x1ZGUgPSBbXCIuL2Jpbi9zaGltXCJdO1xuICBmcy53cml0ZUpTT05TeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSwgdHNDb25maWcpO1xuICAvLyBFbnN1cmUgdGhlIGZpbGUgc3lzdGVtIGhhcyBmbHVzaGVkIHRoZSB0ZW1wIGZpbGUgdG8gZGlza1xuICBhd2FpdCB3YWl0KDUwMCk7XG5cbiAgLy8gUnVuIHRzYyBhbmQgb3V0cHV0IHRoZVxuICBpZiAoXG4gICAgIWV4ZWNTeW5jKFwidHNjXCIsIFtcbiAgICAgIFwiLWRcIixcbiAgICAgIFwiLS1lbWl0RGVjbGFyYXRpb25Pbmx5XCIsXG4gICAgICBcIi0tcHJldHR5XCIsXG4gICAgICBcIi0tb3V0RGlyXCIsXG4gICAgICBwYXRoLnJlc29sdmUoXCIuL3NoaW0vc3JjL2JpblwiKSxcbiAgICAgIFwiLS1wcm9qZWN0XCIsXG4gICAgICBwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIiksXG4gICAgXSlcbiAgKSB7XG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGNvbXBpbGUgdHlwZSBkZWNsYXJhdGlvbnMgZm9yIHRoZSBzaGltIGZpbGVzLlwiKTtcbiAgICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIHRoZSB0ZW1wIGZpbGVcbiAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIikpO1xufVxuXG4vKipcbiAqIFdlIG11c3QgY29weSBhbGwgb2YgdGhlIHRlbXBsYXRpbmcgZmlsZXMgYW5kIHN0cnVjdHVyZSB0byB0aGUgZGlzdHJpYnV0aW9uIGFzXG4gKiB0aG9zZSBmaWxlcyBhcmUgdXRpbGl6ZWQgaW4gbWFueSBvZiB0aGUgY29tbWFuZHMgYW5kIHRoZSB0ZW1wbGF0aW5nIHN5c3RlbSBhc1xuICogYSB3aG9sZSBtdXN0IHVzZSB0aGVtIGZvciB0aGUgc2FrZSBvZi4uLi55b3Uga25vdy4uLnRlbXBsYXRpbmcuLi5cbiAqXG4gKiBUaGlzIHByZXNlbnRzIHNvbWUgY2hhbGxlbmdlcyBhcyB0aGUgdGVtcGxhdGluZyBzeXN0ZW0gaGFzIGdyb3duIHRvIGJlIGFcbiAqIHJvYnVzdCBzeXN0ZW0gZm9yIHdoaWNoIGl0IGhhcyB0aGUgY2FwYWJpbGl0aWVzIHRvIHJlcGxhY2UgbW9yZSBjb21wbGV4XG4gKiBjb21tYW5kcyBzdWNoIGFzIGBjb21wb25lbnQgbmV3YC4gQnV0IHRoaXMgY29tcGxleGl0eSBtZWFucyB0aGUgdGVtcGxhdGVzXG4gKiB0aGVtc2VsdmVzIG5vdyBoYXZlIGEgc3RydWN0dXJlIHRoYXQgcmVxdWlyZXMgdGhlIHRlbXBsYXRlIHRvIGJlIHRyYW5zcGlsZWRcbiAqIHNvIHRoYXQgaXQgZG9lcyBub3QgY2FycnkgYSBidXJkZW4gb2YgY29tcGxleGl0eSB3aGVuIHRyeWluZyB0byBydW4gdGhlXG4gKiBjb21tYW5kLiBpZSAtIGlmIGEgdGVtcGxhdGUgaW4gdGhlIGRldm9wcyBkaXJlY3RvcnkgdXRpbGl6ZXMgdG9vbGluZyBmcm9tIHRoZVxuICogZGV2b3BzIHByb2plY3Qgc3BlY2lmaWNhbGx5LCB3ZSBkb24ndCB3YW50IHRvIGhhdmUgdG8gY29weSBhbGwgb2YgdGhhdFxuICogdG9vbGluZyBvdmVyIHRvIHRoZSBkaXN0cmlidXRpb24ganVzdCB0byBtYWtlIHRoZSB0ZW1wbGF0ZSB3b3JrLlxuICpcbiAqIFRoaXMgd291bGQgYWxzbyBjYXVzZSBodWdlIGlzc3VlcyBmb3Igb3ZlcnJpZGVzIGFuZCB3aGF0IG5vdC4gU28gd2UgYnVuZGxlXG4gKiB0aGUgdGVtcGxhdGUgdG8gcmVkdWNlIHRoaXMgY29tcGxleGl0eSBhbmQgbWFrZSB0aGUgdGVtcGxhdGUgZ3VhcmFudGVlZCB0b1xuICogd29yayBldmVuIGluIHRoZSB0YXJnZXQgcHJvamVjdHMgd2l0aCBtdWNoIGxlc3MgZnVzcy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29weVRlbXBsYXRlcygpIHtcbiAgLy8gV2Ugbm93IG5lZWQgdG8gY29weSBhbnkgZmlsZXMgdGhhdCBhcmUgXCJyZWFkXCIgZnJvbSB0aGUgYmluIGZvbGRlciBzdWNoIGFzXG4gIC8vIHRlbXBsYXRlcy5cbiAgY29uc29sZS53YXJuKFxuICAgIGNoYWxrLnllbGxvd0JyaWdodChcIkNvcHlpbmcgdGVtcGxhdGUgZmlsZXMgZm9yIGJpbiBkaXN0cmlidXRpb25cIilcbiAgKTtcblxuICBjb25zdCB0ZW1wbGF0ZVNyYyA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi4vLi4vdGVtcGxhdGVcIik7XG4gIGNvbnN0IHRlbXBsYXRlRGlzdCA9IHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW4vdGVtcGxhdGVcIik7XG5cbiAgZnMuY29weVN5bmModGVtcGxhdGVTcmMsIHRlbXBsYXRlRGlzdCk7XG5cbiAgLy8gRmluZCBhbGwgb2YgdGhlIGluZGV4IGZpbGVzIHRoYXQgd2lsbCBuZWVkIHRvIGJlIGNvbXBpbGVkXG4gIGNvbnN0IHRlbXBsYXRlcyA9IGZzXG4gICAgLnJlYWRkaXJTeW5jKHRlbXBsYXRlRGlzdClcbiAgICAubWFwKChmaWxlKSA9PiBwYXRoLnJlc29sdmUodGVtcGxhdGVEaXN0LCBmaWxlLCBcImluZGV4LnRzXCIpKVxuICAgIC5maWx0ZXIoKGZpbGUpID0+IHtcbiAgICAgIGlmIChmcy5leGlzdHNTeW5jKGZpbGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIC8vIFdlIGdldCBhbGwgZGVwZW5kZW5jaWVzIG9mIHRoZSBwcm9qZWN0IGFuZCBjb25zaWRlciB0aGVtIGV4dGVybmFsLiBUaGlzXG4gIC8vIGltcHJvdmVzIHRoZSBhYmlsaXR5IGZvciB0aGUgY29kZSB0byBiZSBidW5kbGVkIHNpbmNlIGJpbiBjb21tYW5kcyBoaXQgYVxuICAvLyBMT1Qgb2Ygc25hZ3MgaW4gaG93IHRoZXkgYXJlIGltcGxlbWVudGVkLlxuICBjb25zdCBkZXBzID0gYXdhaXQgdGFyZ2V0UHJvamVjdERlcGVuZGVuY2llcygpO1xuICBsZXQgZGlkRXJyb3IgPSBmYWxzZTtcblxuICAvLyBCdWlsZCB0aGUgdGVtcGxhdGVzXG4gIGZvciAoY29uc3QgdGVtcGxhdGUgb2YgdGVtcGxhdGVzKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IEJ1bi5idWlsZCh7XG4gICAgICBlbnRyeXBvaW50czogW3RlbXBsYXRlXSxcbiAgICAgIHRhcmdldDogXCJidW5cIixcbiAgICAgIGV4dGVybmFsOiBPYmplY3Qua2V5cyhkZXBzKSxcbiAgICAgIG1pbmlmeTogdHJ1ZSxcbiAgICB9KTtcblxuICAgIC8vIEVuc3VyZSB0aGUgYnVuZGxlIHByb2R1Y2VkIHJlc3VsdHMgb3IgdGhpcyBtZWFucyB0aGUgYnVpbGQgZmFpbGVkXG4gICAgaWYgKCFyZXN1bHRzLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGNoYWxrLnJlZEJyaWdodEJvbGQoXCJCdWlsZCBmYWlsZWQgZm9yIHRlbXBsYXRlOlwiKSxcbiAgICAgICAgY2hhbGsuY3lhbkJyaWdodEJvbGQoXG4gICAgICAgICAgcGF0aC5yZWxhdGl2ZSh0ZW1wbGF0ZURpc3QsIHBhdGguZGlybmFtZSh0ZW1wbGF0ZSkpXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiByZXN1bHRzLmxvZ3MpIHtcbiAgICAgICAgLy8gQnVuIHdpbGwgcHJldHR5IHByaW50IHRoZSBtZXNzYWdlIG9iamVjdFxuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuXG4gICAgICBkaWRFcnJvciA9IHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCByZXNvdXJjZSBvZiByZXN1bHRzLm91dHB1dHMpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJXcml0aW5nIHRlbXBsYXRlIGVudHJ5IGZpbGU6XCIsXG4gICAgICAgIGNoYWxrLmN5YW5CcmlnaHRCb2xkKFxuICAgICAgICAgIHBhdGgucmVsYXRpdmUoXG4gICAgICAgICAgICB0ZW1wbGF0ZURpc3QsXG4gICAgICAgICAgICBwYXRoLnJlc29sdmUocGF0aC5kaXJuYW1lKHRlbXBsYXRlKSwgcmVzb3VyY2UucGF0aClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IEJ1bi53cml0ZShcbiAgICAgICAgcGF0aC5yZXNvbHZlKHBhdGguZGlybmFtZSh0ZW1wbGF0ZSksIHJlc291cmNlLnBhdGgpLFxuICAgICAgICByZXNvdXJjZVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZGlkRXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgY2hhbGsucmVkQnJpZ2h0Qm9sZChcbiAgICAgICAgXCJTb21lIHRlbXBsYXRlcyBoYXZlIGVycm9ycyAoc2VlIGFib3ZlKSwgc3RvcHBpbmcgdGhlIGJ1aWxkIHByb2Nlc3MuXCJcbiAgICAgIClcbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHkgYW55IHN1cHBvcnRpbmcgZmlsZXMgdGhhdCBhcmUgcmVxdWlyZWQgZm9yIHRoZSBjb21tYW5kcyB0byB3b3JrXG4gKiBjb3JyZWN0bHkuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvcHlBcnRpZmFjdHMoKSB7XG4gIC8vIENvcHkgdGhlIHNoIHNjcmlwdCBmb3Igc3RhcnRpbmcgdXAgdGhlIGJpbiBjb21tYW5kc1xuICBjb25zb2xlLndhcm4oXG4gICAgY2hhbGsueWVsbG93QnJpZ2h0KFwiQ29weWluZyBlbnRyeSBzaGVsbCBzY3JpcHQgZm9yIGJpbiBkaXN0cmlidXRpb25cIilcbiAgKTtcblxuICBmcy5jb3B5U3luYyhcbiAgICBwYXRoLnJlc29sdmUoXCIuL2Jpbi9tYWluLWVudHJ5LnNoXCIpLFxuICAgIHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW4vbWFpbi1lbnRyeS5zaFwiKVxuICApO1xuXG4gIGZzLmNvcHlTeW5jKFxuICAgIHBhdGgucmVzb2x2ZShcIi4vYmluL21haW4tZW50cnkucHMxXCIpLFxuICAgIHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW4vbWFpbi1lbnRyeS5wczFcIilcbiAgKTtcbn1cblxuLyoqXG4gKiBUaGlzIHJ1bnMgdGhlIGJ1aWxkIHNjcmlwdCBmb3IgYnVuZGxpbmcgdGhlIGRldm9wcyBlbnZpcm9ubWVudFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVsZWFzZUJpbigpIHtcbiAgY29uc29sZS53YXJuKGNoYWxrLmN5YW5CcmlnaHQoXCJCdWlsZGluZyBiaW4gY29tbWFuZHMgZm9yIHRoZSBkaXN0cmlidXRpb24uXCIpKTtcblxuICBpZiAoXG4gICAgIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiLi9iaW4vbWFpbi50c1wiKSkgfHxcbiAgICAhZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCIuL2Jpbi9tYWluLWVudHJ5LnNoXCIpKSB8fFxuICAgIGlnbm9yZS5pZ25vcmVzKFwiYmluXCIpXG4gICkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGBUcmllZCB0byBtYWtlIGEgcmVsZWFzZSBmb3IgdGhlIGJpbiBjb21tYW5kcywgYnV0IG5vIGJpbi9tYWluLnRzIG9yIGJpbi9tYWluLnNoIGVudHJ5IGZpbGUgd2FzIGZvdW5kLiAob3Igd2FzIGdpdGlnbm9yZWQpOlxcblxcdCR7cGF0aC5yZXNvbHZlKFxuICAgICAgICBcIi4vYmluL21haW4udHNcIlxuICAgICAgKX1cXG5cXHQke3BhdGgucmVzb2x2ZShcIi4vYmluL21haW4uc2hcIil9YFxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZnMuZW5zdXJlRGlyU3luYyhwYXRoLnJlc29sdmUoXCIuL2Rpc3RcIikpO1xuICBmcy5lbnN1cmVEaXJTeW5jKHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW4vdGVtcGxhdGVcIikpO1xuXG4gIGF3YWl0IGJ1aWxkQ29tbWFuZHMoKTtcbiAgYXdhaXQgYnVpbGRTaGltKCk7XG4gIGF3YWl0IGNvcHlUZW1wbGF0ZXMoKTtcbiAgYXdhaXQgY29weUFydGlmYWN0cygpO1xufVxuIiwKICAgICJpbXBvcnQgKiBhcyBWaXRlIGZyb20gXCJ2aXRlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdml0ZURldm9wc1N0cmluZ1JlcGxhY2VQbHVnaW4oXG4gIHJlcGxhY2VtZW50czogeyBmcm9tOiBzdHJpbmc7IHRvOiBzdHJpbmcgfVtdXG4pOiBWaXRlLlBsdWdpbk9wdGlvbiB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogXCJ2aXRlLWRldm9wcy1zdHJpbmctcmVwbGFjZS1wbHVnaW5cIixcbiAgICBlbmZvcmNlOiBcInByZVwiLFxuXG4gICAgbG9hZChpZDogc3RyaW5nKSB7XG4gICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGgucmVzb2x2ZShpZCk7XG4gICAgICAvLyBEZXRlcm1pbmUgYXBwcm9wcmlhdGUgTUlNRSB0eXBlXG4gICAgICBjb25zdCBleHRlbnNpb25zID0gW1wiLnRzXCIsIFwiLmpzXCIsIFwiLnRzeFwiLCBcIi5qc3hcIl07XG5cbiAgICAgIC8vIElmIHRoZSBleHRlbnNpb24gdHlwZSB3YXMgZXN0YWJsaXNoZWQsIHRoaXMgcmVzb3VyY2Ugd2lsbCBiZSBiYXNlNjQgaW5saW5lZC5cbiAgICAgIGlmIChcbiAgICAgICAgZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkgJiZcbiAgICAgICAgZXh0ZW5zaW9ucy5pbmNsdWRlcyhwYXRoLmV4dG5hbWUoZmlsZVBhdGgpKSAmJlxuICAgICAgICAhZmlsZVBhdGguaW5jbHVkZXMoXCJub2RlX21vZHVsZXNcIikgJiZcbiAgICAgICAgIWZpbGVQYXRoLmluY2x1ZGVzKFwiXFx4MDBcIilcbiAgICAgICkge1xuICAgICAgICBsZXQgY29kZSA9IGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCwgeyBlbmNvZGluZzogXCJ1dGYtOFwiIH0pO1xuICAgICAgICAvLyBSZXBsYWNlIHRoZSBkaXNjb3ZlcmVkIHN0cmluZyBpbiB0aGUgY29kZVxuICAgICAgICByZXBsYWNlbWVudHMuZm9yRWFjaCgocmVwbGFjZW1lbnQpID0+IHtcbiAgICAgICAgICBjb2RlID0gY29kZS5yZXBsYWNlKHJlcGxhY2VtZW50LmZyb20sIHJlcGxhY2VtZW50LnRvKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNvZGU7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn1cbiIsCiAgICAiLyoqXG4gKiBUaGlzIGlzIGEgc3BlY2lhbGl6ZWQgcGx1Z2luIGZvciBzdXBwb3J0aW5nIHRoZSBgYXBwL2NvbmZpZ2AgZm9sZGVyIHRvIGhhdmVcbiAqIHRhcmdldHRlZCBlbnZpcm9ubWVudCBmaWxlcyB0aGF0IGF1dG9tYXRpY2FsbHkgc3dhcCBmb3IgdGhlIGNvcnJlY3RcbiAqIGVudmlyb25tZW50IGJlaW5nIGJ1aWx0IGZvci5cbiAqXG4gKiBUaGUgZGVmYXVsdCBjb25maWd1cmF0aW9uIHdvdWxkIGJlIHRvIGhhdmUgYGVudmAgZmlsZXMgYXQgdGhlIHJvb3Qgb2YgdGhlXG4gKiBmb2xkZXI6XG4gKlxuICogYGBgXG4gKiBhcHAvY29uZmlnOlxuICogICBlbnYudHNcbiAqICAgZW52LnByb2QudHNcbiAqICAgZW52LnN0YWdlLnRzXG4gKiAgIGVudi5jdXN0b20udHNcbiAqIGBgYFxuICpcbiAqIFlvdSBoYXZlIHR3byB3YXlzIHRvIHRhcmdldCB0aGUgY29uZmlndXJhdGlvbjpcbiAqXG4gKiBGb3IgZGV2ZWxvcG1lbnQgdXNlIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBgRU5WX01PREVgIHRvIHRhcmdldCB0aGVcbiAqIGVudmlyb25tZW50IG9mIGNob2ljZSBzdWNoIGFzXG4gKlxuICogYGBgXG4gKiBFTlZfTU9ERT1jdXN0b21cbiAqIGBgYFxuICpcbiAqIEZvciByZWxlYXNlcyB5b3Ugc3BlY2lmeSBhIGBidWlsZC5jb25mLmpzYCBmaWxlIGluIHRoZSByb290IG9mIHRoZSBwcm9qZWN0XG4gKiB3aXRoIHRoZSBjb250ZW50czpcbiAqXG4gKiBgYGBcbiAqIGV4cG9ydCBjb25zdCBCVUlMRF9UQVJHRVRTID0gW1wicHJvZFwiLCBcImN1c3RvbVwiXTtcbiAqIGBgYFxuICpcbiAqIFdoaWNoIHdpbGwgY2F1c2UgdGhlIHJlbGVhc2UgcHJvY2VzcyB0byBtYWtlIGEgZGlzdHJpYnV0aW9uIHBlciByZWxlYXNlXG4gKiB0YXJnZXQgc3BlY2lmaWVkLlxuICpcbiAqIGVudiB3aXRoaW4gdGhpcyBkZXZvcHMgc3lzdGVtIGlzIGludGVuZGVkIHRvIGhlbHAgc21vb3RoZSBvdmVyIGEgZGV2IHNlcnZlclxuICogd2l0aCB0aGUgZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnQgdG8gbWFrZSBpdCBlYXNpZXIgdG8gaW50ZXJmYWNlIHdpdGggYW55XG4gKiByZW1vdGUgc2VydmVyIHVuZGVyIGFueSBkb21haW4uXG4gKlxuICogSG93ZXZlciwgdGhlIGNvbmNlcHQgY2FuIGJlIGV4cGFuZGVkIGZvciB0aGUgZGV2ZWxvcGVyIGJ5IGFkZGluZyBzdWIgZm9sZGVyc1xuICogdG8gY3JlYXRlIG1vcmUgc3BlY2lmaWMgZW52aXJvbm1lbnQgY29uZmlndXJhdGlvbnMgdGhhdCBtYXkgYmUgbmVlZGVkIGZvciBhXG4gKiBmcm9udCBlbmQgYnV0IE5PVCBhIHNlcnZlci4gT3IgbWF5IGJlIGl0J3MganVzdCBmb3IgZWFzaWVyIG9yZ2FuaXphdGlvbiBvZlxuICogY29uZmlndXJhdGlvbi4gT25lIGNvbW1vbiB1c2Ugd291bGQgYmUgYSB0aGVtZTpcbiAqXG4gKiBgYGBcbiAqIGFwcC9jb25maWc6XG4gKiAgIGVudjpcbiAqICAgICBlbnYudHNcbiAqICAgICBlbnYucHJvZC50c1xuICogICAgIGVudi5zdGFnZS50c1xuICogICAgIGVudi5jdXN0b20udHNcbiAqICB0aGVtZTpcbiAqICAgICB0aGVtZS50c1xuICogICAgIHRoZW1lLnByb2QudHNcbiAqICAgICB0aGVtZS5zdGFnZS50c1xuICogICAgIHRoZW1lLmN1c3RvbS50c1xuICogYGBgXG4gKlxuICogWW91ciBjb2RlIGltcG9ydHMgdGhlc2UgY29uZmlndXJhdGlvbnMgdmlhOlxuICpcbiAqIGBgYFxuICogaW1wb3J0IHsgVGhpbmcgfSBmcm9tIFwiY29uZmlnL3RoaW5nXCI7XG4gKiBgYGBcbiAqXG4gKiBUaGUgaW1wb3J0YW50IGZvcm1hdHRpbmcgY29uY2VybnMgaGVyZSBpcyB0byBlbnN1cmUgeW91IG1ha2UgYSBjb21tb24gZW50cnlcbiAqIGZpbGUgd2l0aCB0aGUgc2FtZSBuYW1lIGFzIHRoZSBwYXJlbnQgZm9sZGVyOlxuICpcbiAqIGBgYFxuICogYXBwL2NvbmZpZzpcbiAqICAgZW52OlxuICogICAgIGVudi50c1xuICogICB0aGVtZTpcbiAqICAgICB0aGVtZS50c1xuICogYGBgXG4gKlxuICogVGhlbiB5b3UgYWRkIGFueSBhZGRpdGlvbmFsIGVudmlyb25tZW50cyBvZiB0aGUgc2FtZSBmaWxlIG5hbWUuXG4gKiBgPGZpbGU+LjxlbnZpcm9ubWVudD4udHNgLlxuICpcbiAqIFRoZSBmaWxlIHdpdGggbm8gZW52aXJvbm1lbnQgaW4gaXQncyBmaWxlIHBhdGggaXMgdGhlIGZpbGUgdXNlZCBpblxuICogZGV2ZWxvcG1lbnQgd2hlbiBubyBlbnZpcm9ubWVudCBpcyBzcGVjaWZpZWQuXG4gKi9cblxuaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyB2aXRlRGV2b3BzU3RyaW5nUmVwbGFjZVBsdWdpbiB9IGZyb20gXCIuL3ZpdGUtZGV2b3BzLXN0cmluZy1yZXBsYWNlLXBsdWdpbi5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gdml0ZURldm9wc0FwcENvbmZpZ1BsdWdpbihlbnY/OiBzdHJpbmcgfCBudWxsKSB7XG4gIC8vIFRoaXMgaXMgYSBmaXggZm9yIHJ1bm5pbmcgc3Rvcnlib29rIGhvdyB3ZSBydW4gaXQgd2hpY2ggYWRqdXN0cyB0aGUgY3dkXG4gIC8vIHRvIHRoZSBkZXZvcHMgZm9sZGVyXG4gIGNvbnN0IHByb2plY3RSb290ID0gcHJvY2Vzcy5lbnYuUFJPSkVDVF9ST09UIHx8IFwiLlwiO1xuICAvLyBMb29rIGluIHRoZSBhcHAgY29uZmlnIGZvbGRlciBmb3IgYW55IGZvbGRlciBlbnZpcm9ubWVudHNcbiAgY29uc3QgY29uZmlnUGF0aCA9IHBhdGgucmVzb2x2ZShwcm9qZWN0Um9vdCwgXCJhcHAvY29uZmlnXCIpO1xuXG4gIGlmICghZnMuZXhpc3RzU3luYyhjb25maWdQYXRoKSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGB2aXRlRGV2b3BzQXBwQ29uZmlnUGx1Z2luOiAke2NoYWxrLmN5YW5CcmlnaHRCb2xkKFxuICAgICAgICBcIk5vIGFwcC9jb25maWcgZm9sZGVyIGZvdW5kLlwiXG4gICAgICApfWBcbiAgICApO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBhbGxGb2xkZXJzID0gZnMucmVhZGRpclN5bmMoY29uZmlnUGF0aCkuZmlsdGVyKChmKSA9PiB7XG4gICAgICByZXR1cm4gZnMuc3RhdFN5bmMocGF0aC5qb2luKGNvbmZpZ1BhdGgsIGYpKS5pc0RpcmVjdG9yeSgpO1xuICAgIH0pO1xuICAgIGNvbnN0IGZvbGRlclBhdGhzID0gYWxsRm9sZGVycy5tYXAoKGYpID0+IHBhdGguam9pbihjb25maWdQYXRoLCBmKSk7XG4gICAgY29uc3QgcmVwbGFjZW1lbnRzID0gYWxsRm9sZGVycy5tYXAoKGZvbGRlciwgaSkgPT4ge1xuICAgICAgLy8gV2l0aCBubyBlbnZpcm9ubWVudCwgd2UgY2hlY2sgZm9yIHRoZSBzcGVjaWFsIGNhc2Ugb2YgYSAubG9jYWwgZmlsZSBiZWluZ1xuICAgICAgLy8gcHJlc2VudCBpbiB0aGUgZm9sZGVyLiBJZiBpdCBpcywgd2UgdXNlIHRoYXQgYXMgdGhlIGVudmlyb25tZW50LlxuICAgICAgaWYgKCFlbnYpIHtcbiAgICAgICAgLy8gSWYgbG9jYWwgZXhpc3RzLCBjcmVhdGUgc3BlY2lhbCByZXBsYWNlbWVudCB0byB0YXJnZXQgdGhlIGxvY2FsIGZpbGVcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGZvbGRlclBhdGhzW2ldLCBgJHtmb2xkZXJ9LmxvY2FsYCkpIHx8XG4gICAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oZm9sZGVyUGF0aHNbaV0sIGAke2ZvbGRlcn0ubG9jYWwuanNgKSkgfHxcbiAgICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihmb2xkZXJQYXRoc1tpXSwgYCR7Zm9sZGVyfS5sb2NhbC50c2ApKSB8fFxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGZvbGRlclBhdGhzW2ldLCBgJHtmb2xkZXJ9LmxvY2FsLnRzeGApKSB8fFxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGZvbGRlclBhdGhzW2ldLCBgJHtmb2xkZXJ9LmxvY2FsLmpzeGApKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBmcm9tOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfVwiYCxcbiAgICAgICAgICAgICAgdG86IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LmxvY2FsXCJgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZnJvbTogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0uanNcImAsXG4gICAgICAgICAgICAgIHRvOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS5sb2NhbC5qc1wiYCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGZyb206IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LnRzXCJgLFxuICAgICAgICAgICAgICB0bzogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0ubG9jYWwudHNcImAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPdGhlcndpc2UsIHRoZSBkZWZhdWx0IGVudiBmaWxlIHdpbGwgYmUgdXNlZFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQW4gZW52aXJvbWVudCB3YXMgc3BlY2lmaWVkLCBzbyB3ZSB3aWxsIHRhcmdldCB0aGF0IGVudmlyb25tZW50XG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgZnJvbTogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn1cImAsXG4gICAgICAgICAgdG86IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LiR7ZW52fVwiYCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZyb206IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LmpzXCJgLFxuICAgICAgICAgIHRvOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS4ke2Vudn0uanNcImAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBmcm9tOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS50c1wiYCxcbiAgICAgICAgICB0bzogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0uJHtlbnZ9LnRzXCJgLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICB9KTtcblxuICAgIC8vIEZsYXR0ZW4gYWxsIG9mIG91ciBtYXBwaW5ncyBpbnRvIGEgc2luZ2xlIGFycmF5XG4gICAgY29uc3QgZmxhdHRlbmVkID0gcmVwbGFjZW1lbnRzLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYy5jb25jYXQodmFsKSwgW10pO1xuXG4gICAgLy8gU2VlIGlmIHRoZXJlJ3MgYSBiYXNlIGVudiBsb2NhbCBmaWxlIHRvIHVzZVxuICAgIGNvbnN0IHNob3VsZFVzZUxvY2FsVG9wRW52ID1cbiAgICAgICFlbnYgJiZcbiAgICAgIChmcy5leGlzdHNTeW5jKHBhdGguam9pbihjb25maWdQYXRoLCBgZW52LmxvY2FsYCkpIHx8XG4gICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGNvbmZpZ1BhdGgsIGBlbnYubG9jYWwuanNgKSkgfHxcbiAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oY29uZmlnUGF0aCwgYGVudi5sb2NhbC50c2ApKSB8fFxuICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihjb25maWdQYXRoLCBgZW52LmxvY2FsLnRzeGApKSB8fFxuICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihjb25maWdQYXRoLCBgZW52LmxvY2FsLmpzeGApKSk7XG5cbiAgICAvLyBHZW5lcmF0ZSBtYXBwaW5ncyBmb3IgdGhlIHRvcCBsZXZlbCBlbnYgZmlsZS4gVGhpcyBpcyBhIGxlZ2FjeSBzdXBwb3J0XG4gICAgLy8gZmVhdHVyZS5cbiAgICBjb25zdCBtYXBUb3BFbnYgPSBzaG91bGRVc2VMb2NhbFRvcEVudlxuICAgICAgPyAvLyBVc2UgdGhlIGxvY2FsIGVudiBmaWxlIGlmIGl0IGV4aXN0c1xuICAgICAgICBbXG4gICAgICAgICAgeyBmcm9tOiAnXCJjb25maWcvZW52XCInLCB0bzogYFwiY29uZmlnL2Vudi5sb2NhbFwiYCB9LFxuICAgICAgICAgIHsgZnJvbTogJ1wiY29uZmlnL2Vudi5qc1wiJywgdG86IGBcImNvbmZpZy9lbnYubG9jYWwuanNcImAgfSxcbiAgICAgICAgICB7IGZyb206ICdcImNvbmZpZy9lbnYudHNcIicsIHRvOiBgXCJjb25maWcvZW52LmxvY2FsLnRzXCJgIH0sXG4gICAgICAgIF1cbiAgICAgIDogZW52XG4gICAgICA/IC8vIFVzZSB0aGUgY29ycmVjdCBlbnZpcm9ubWVudCB3aGVuIHNwZWNpZmllZFxuICAgICAgICBbXG4gICAgICAgICAgeyBmcm9tOiAnXCJjb25maWcvZW52XCInLCB0bzogYFwiY29uZmlnL2Vudi4ke2Vudn1cImAgfSxcbiAgICAgICAgICB7IGZyb206ICdcImNvbmZpZy9lbnYuanNcIicsIHRvOiBgXCJjb25maWcvZW52LiR7ZW52fS5qc1wiYCB9LFxuICAgICAgICAgIHsgZnJvbTogJ1wiY29uZmlnL2Vudi50c1wiJywgdG86IGBcImNvbmZpZy9lbnYuJHtlbnZ9LnRzXCJgIH0sXG4gICAgICAgIF1cbiAgICAgIDogLy8gSWYgbm8gZW52aXJvbm1lbnQgd2FzIHNwZWNpZmllZCwgbm8gbWFwcGluZyBzaG91bGQgaGFwcGVuXG4gICAgICAgIFtdO1xuXG4gICAgY29uc3QgYWxsTWFwcGluZ3MgPSBbXG4gICAgICAvLyBTdXBwb3J0IGVudiBmcm9tIHRoZSByb290IG9mIHRoZSBjb25maWcgZm9sZGVyXG4gICAgICAuLi5tYXBUb3BFbnYsXG4gICAgICAvLyBTdXBwb3J0IGFueSBmb2xkZXIgZW52aXJvbm1lbnRzXG4gICAgICAuLi5mbGF0dGVuZWQsXG4gICAgXTtcblxuICAgIC8vIExvZyB0aGUgbWFwcGluZyBjb25maWd1cmF0aW9uIGluIHVzZVxuICAgIGlmIChhbGxNYXBwaW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFxuXG4gICR7Y2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIlVzaW5nIHRoZSBmb2xsb3dpbmcgbWFwcGluZ3MgZm9yIGFwcCBjb25maWc6XCIpfVxuXG4gIFxcdCR7Y2hhbGsuY3lhbkJyaWdodEJvbGQoXG4gICAgYWxsTWFwcGluZ3MubWFwKChtKSA9PiBgXFxuICAke20uZnJvbX0gPT4gJHttLnRvfWApLmpvaW4oXCJcXG5cXHRcIilcbiAgKX1cblxuICAgICAgYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZpdGVEZXZvcHNTdHJpbmdSZXBsYWNlUGx1Z2luKGFsbE1hcHBpbmdzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIGNoYWxrLnJlZEJyaWdodEJvbGQoYFxuICAgICAgQXBwIGNvbmZpZyBwbHVnaW4gZmFpbGVkIHRvIGxvYWQuIFRoZSBkZWZhdWx0IGNvbmZpZyBwYXRocyB3aWxsIGJlIHVzZWRcbiAgICAgIGFuZCBhbnkgc3BlY2lmaWMgZW52aXJvbm1lbnQgcmVxdWVzdGVkIHdpbGwgYmUgaWdub3JlZC5cbiAgICBgKVxuICAgICk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0ICogYXMgVml0ZSBmcm9tIFwidml0ZVwiO1xuaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IElnbm9yZSBmcm9tIFwiaWdub3JlXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgYnVpbGRWaXRlQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2J1aWxkLXZpdGUtY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0VmVyc2lvbiB9IGZyb20gXCIuLi8uLi8uLi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC12ZXJzaW9uLmpzXCI7XG5pbXBvcnQgeyB2aXRlRGV2b3BzQXBwQ29uZmlnUGx1Z2luIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NoaW0vdml0ZS1wbHVnaW5zL3ZpdGUtZGV2b3BzLWFwcC1jb25maWctcGx1Z2luLmpzXCI7XG5cbmNvbnN0IGdpdElnbm9yZVBhdGggPSBwYXRoLnJlc29sdmUoXCIuZ2l0aWdub3JlXCIpO1xubGV0IGlnbm9yZSA9IElnbm9yZS5kZWZhdWx0KCk7XG5cbmlmIChmcy5leGlzdHNTeW5jKGdpdElnbm9yZVBhdGgpKSB7XG4gIGlnbm9yZSA9IGlnbm9yZS5hZGQoZnMucmVhZEZpbGVTeW5jKGdpdElnbm9yZVBhdGgpLnRvU3RyaW5nKCkpO1xufVxuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgdGhlIGJ1bmRsaW5nIHByb2Nlc3MgZm9yIGRpc3RyaWJ1dGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbGVhc2VDbGllbnQoZW52OiBzdHJpbmcpIHtcbiAgY29uc29sZS53YXJuKGNoYWxrLmN5YW5CcmlnaHQoXCJCdWlsZGluZyBjbGllbnQgZmlsZXMgZm9yIHRoZSBkaXN0cmlidXRpb24uXCIpKTtcblxuICAvLyBQcm92aWRlIHRoZSBidW5kbGluZyBwcm9jZXNzIHRoZSBjdXJyZW50IGJ1aWxkIHZlcnNpb24uIFRoaXMgYWxsb3dzXG4gIC8vIHByaW50aW5nIHRoZSB2ZXJzaW9uIGluIGEgbWVhbmluZ2Z1bCB3YXkgZm9yIGRlYnVnZ2luZy5cbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPVxuICAgIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OIHx8IChhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpKTtcblxuICBpZiAocHJvY2Vzcy5lbnYuRk9SQ0VfQlVJTEQgIT09IFwidHJ1ZVwiKSB7XG4gICAgaWYgKFxuICAgICAgIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiYXBwL2NsaWVudFwiKSkgfHxcbiAgICAgIGlnbm9yZS5pZ25vcmVzKFwiYXBwL2NsaWVudFwiKVxuICAgICkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYFRyaWVkIHRvIG1ha2UgYSByZWxlYXNlIGZvciB0aGUgd2ViIGFwcCBjbGllbnQsIGJ1dCBubyBhcHAvY2xpZW50IGVudHJ5IGZpbGUgd2FzIGZvdW5kLiAob3Igd2FzIGdpdGlnbm9yZWQpOlxcblxcdCR7cGF0aC5yZXNvbHZlKFxuICAgICAgICAgIFwiYXBwL2NsaWVudFwiXG4gICAgICAgICl9YFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBjb25zdCBub2RlRW52QmFrID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlY7XG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gXCJwcm9kdWN0aW9uXCI7XG5cbiAgY29uc29sZS53YXJuKFxuICAgIGBSZWxlYXNpbmcgJHtjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiYXBwL2NsaWVudFwiKX0gZm9yIEVudmlyb25tZW50OmAsXG4gICAgY2hhbGsuY3lhbkJyaWdodEJvbGQoZW52KVxuICApO1xuICBwcm9jZXNzLmVudi5CVUlMRF9FTlYgPSBlbnY7XG5cbiAgY29uc3QgY29uZmlnID0gYXdhaXQgYnVpbGRWaXRlQ29uZmlnKCk7XG5cbiAgLy8gTWFrZSBzdXJlIG91ciBlbnZpcm9ubWVudCBpcyByZXBsYWNlZCBmb3IgdGhlIGJ1aWxkXG4gIGNvbmZpZy5wbHVnaW5zID0gW3ZpdGVEZXZvcHNBcHBDb25maWdQbHVnaW4oZW52KSwgLi4uKGNvbmZpZy5wbHVnaW5zIHx8IFtdKV07XG5cbiAgY29uZmlnLmxvZ0xldmVsID0gXCJ3YXJuXCI7XG4gIGNvbmZpZy5tb2RlID0gXCJwcm9kdWN0aW9uXCI7XG4gIGNvbmZpZy5yb290ID0gcGF0aC5yZXNvbHZlKFwiYXBwL2NsaWVudFwiKTtcbiAgY29uZmlnLmJ1aWxkIS5vdXREaXIgPSBwYXRoLnJlc29sdmUoXCJkaXN0L2FwcC9jbGllbnRcIiwgZW52KTtcbiAgY29uZmlnLmJ1aWxkIS53YXRjaCA9IHZvaWQgMDtcbiAgY29uZmlnLmJ1aWxkIS5yb2xsdXBPcHRpb25zIS5vdXRwdXQgPSB7XG4gICAgZGlyOiBjb25maWcuYnVpbGQhLm91dERpcixcbiAgICBlbnRyeUZpbGVOYW1lczogXCJpbmRleC5qc1wiLFxuICAgIGNodW5rRmlsZU5hbWVzOiBcImluZGV4LmpzXCIsXG4gICAgbWFudWFsQ2h1bmtzOiB1bmRlZmluZWQsXG4gIH07XG5cbiAgYXdhaXQgVml0ZS5idWlsZChjb25maWcpO1xuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IG5vZGVFbnZCYWs7XG5cbiAgLy8gUnVuIGEgcXVpY2sgY2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBkaXN0cmlidXRpb24gZmlsZSB3YXMgbWFkZVxuICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKGBkaXN0L2FwcC9jbGllbnQvJHtlbnZ9L2luZGV4LmpzYCkpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiXFxuXFxuRmFpbGVkIHRvIGNyZWF0ZSBDbGllbnQgb3V0cHV0IGJ1bmRsZS4gRXhpdGluZyBwcm9jZXNzLi4uXFxuXFxuXCJcbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuIiwKICAgICJpbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgZ2V0UGFja2FnZU1hbmFnZXIgfSBmcm9tIFwiLi9nZXQtcGFja2FnZS1tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBpc0RlZmluZWQgfSBmcm9tIFwiLi4vdXRpbC90eXBlcy5qc1wiO1xuXG4vKipcbiAqIEV4ZWN1dGVzIGFuIGBucHggPGNvbW1hbmQ+YCBpbiB0aGUgY3VycmVudCBjb250ZXh0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY1NjcmlwdFgoXG4gIGFyZ3M6IChzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsKVtdID0gW10sXG4gIG9wdGlvbnM/OiB7XG4gICAgZXhjbHVkZUJ1bkZsYWc/OiBib29sZWFuO1xuICB9XG4pIHtcbiAgY29uc3QgbWFuYWdlciA9IGF3YWl0IGdldFBhY2thZ2VNYW5hZ2VyKCk7XG5cbiAgaWYgKGV4ZWNTY3JpcHRYLm9wdGltaXplKSB7XG4gICAgaWYgKG1hbmFnZXJbMV0gPT09IFwiYnVueFwiKSB7XG4gICAgICByZXR1cm4gZXhlY1N5bmMoXG4gICAgICAgIG1hbmFnZXJbMV0sXG4gICAgICAgIFtvcHRpb25zPy5leGNsdWRlQnVuRmxhZyA/IG51bGwgOiBcIi0tYnVuXCIsIC4uLmFyZ3NdLmZpbHRlcihpc0RlZmluZWQpXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBleGVjU3luYyhtYW5hZ2VyWzFdLCBbLi4uYXJnc10pO1xufVxuXG5leGVjU2NyaXB0WC5vcHRpbWl6ZSA9IHRydWU7XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBleGVjU2NyaXB0WCB9IGZyb20gXCIuLi8uLi8uLi9leGVjL2V4ZWMtc2NyaXB0eC5qc1wiO1xuXG4vKipcbiAqIEdlbmVyYXRlcyB0eXBlcyBmb3IgdGhlIGJ1aWxkIGZvciB0aGUgdGFyZ2V0IHByb2plY3QgdWkgZm9sZGVyLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVsZWFzZUxpYnJhcnlUeXBlcygpIHtcbiAgLy8gTXVzdCBoYXZlIGEgY29tcG9uZW50IGxpYiBmb2xkZXIgdG8gY29uc2lkZXJcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcInVpXCIpKSkgcmV0dXJuO1xuICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIGZvbGRlciB0byBpbmplY3QgdGhlIHR5cGVzIGludG9cbiAgZnMuZW5zdXJlRGlyKHBhdGgucmVzb2x2ZShcImRpc3QvdHlwZXNcIikpO1xuICAvLyBHZW5lcmF0ZSB0aGUgLmQudHMgZmlsZXMgdXNpbmcgdHNjIGNvbW1hbmQgdmlhIGJ1bnhcbiAgY29uc29sZS53YXJuKGNoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJHZW5lcmF0aW5nIC5kLnRzIGZpbGVzLi4uXCIpKTtcblxuICAvLyBQZXJmb3JtIHRoZSBkdHMgZ2VuZXJhdGlvblxuICBleGVjU2NyaXB0WChbXG4gICAgXCJ0c2NcIixcbiAgICBcIi0tZW1pdERlY2xhcmF0aW9uT25seVwiLFxuICAgIFwiLS1kZWNsYXJhdGlvblwiLFxuICAgIFwiLS1vdXREaXJcIixcbiAgICBcImRpc3QvdHlwZXNcIixcbiAgICBcIi0tcHJvamVjdFwiLFxuICAgIHBhdGgucmVzb2x2ZShcInRzY29uZmlnLmpzb25cIiksXG4gIF0pO1xuXG4gIC8vIERlbGV0ZSB0aGUgZ2VuZXJhdGVkIHR5cGUgb2YgZXZlcnkgZm9sZGVyIEVYQ0VQVCB0aGUgdWkgYW5kIHV0aWwgZm9sZGVyXG4gIGNvbnN0IGZvbGRlcnMgPSBmcy5yZWFkZGlyU3luYyhwYXRoLnJlc29sdmUoXCJkaXN0L3R5cGVzXCIpKTtcbiAgZm9yIChjb25zdCBmb2xkZXIgb2YgZm9sZGVycykge1xuICAgIGlmIChmb2xkZXIgPT09IFwidWlcIiB8fCBmb2xkZXIgPT09IFwidXRpbFwiKSBjb250aW51ZTtcbiAgICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93QnJpZ2h0KGBSZW1vdmluZyB0eXBlcyBmb3IgZm9sZGVyOiAke2ZvbGRlcn1gKSk7XG4gICAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJkaXN0L3R5cGVzXCIsIGZvbGRlcikpO1xuICB9XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0YXJnZXRQcm9qZWN0TmFtZSgpIHtcbiAgY29uc3QgcGFja2FnZUpzb24gPSBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpKTtcbiAgcmV0dXJuIHBhY2thZ2VKc29uLm5hbWUgfHwgXCJcIjtcbn1cbiIsCiAgICAiaW1wb3J0ICogYXMgVml0ZSBmcm9tIFwidml0ZVwiO1xuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IElnbm9yZSBmcm9tIFwiaWdub3JlXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgYnVpbGRWaXRlQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2J1aWxkLXZpdGUtY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyByZWxlYXNlTGlicmFyeVR5cGVzIH0gZnJvbSBcIi4vcmVsZWFzZS1saWJyYXJ5LXR5cGVzLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzIH0gZnJvbSBcIi4uLy4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LWRlcGVuZGVuY2llcy5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdE5hbWUgfSBmcm9tIFwiLi4vLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtbmFtZS5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG5jb25zdCBnaXRJZ25vcmVQYXRoID0gcGF0aC5yZXNvbHZlKFwiLmdpdGlnbm9yZVwiKTtcbmxldCBpZ25vcmUgPSBJZ25vcmUuZGVmYXVsdCgpO1xuXG5pZiAoZnMuZXhpc3RzU3luYyhnaXRJZ25vcmVQYXRoKSkge1xuICBpZ25vcmUgPSBpZ25vcmUuYWRkKGZzLnJlYWRGaWxlU3luYyhnaXRJZ25vcmVQYXRoKS50b1N0cmluZygpKTtcbn1cblxuLyoqXG4gKiBCdW5kbGVzIHRoZSBsaWJyYXJ5IGZvciBkaXN0cmlidXRpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbGVhc2VMaWJyYXJ5KCkge1xuICBjb25zb2xlLndhcm4oY2hhbGsuY3lhbkJyaWdodChcIkNvcHlpbmcgdWkgZmlsZXMgZm9yIHRoZSBkaXN0cmlidXRpb24uXCIpKTtcblxuICAvLyBQcm92aWRlIHRoZSBidW5kbGluZyBwcm9jZXNzIHRoZSBjdXJyZW50IGJ1aWxkIHZlcnNpb24uIFRoaXMgYWxsb3dzXG4gIC8vIHByaW50aW5nIHRoZSB2ZXJzaW9uIGluIGEgbWVhbmluZ2Z1bCB3YXkgZm9yIGRlYnVnZ2luZy5cbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPVxuICAgIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OIHx8IChhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpKTtcblxuICBpZiAoIXByb2Nlc3MuZW52LkZPUkNFX0JVSUxEKSB7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcInVpXCIpKSB8fCBpZ25vcmUuaWdub3JlcyhcInVpXCIpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgXCJObyBsaWJyYXJ5IHByb2plY3QgZm91bmQgKG9yIHdhcyBnaXRpZ25vcmVkKSBmb3IgYnVuZGxpbmcgcmVsZWFzZSBhdDpcXG5cXHQke3BhdGgucmVzb2x2ZShcbiAgICAgICAgICBcInVpXCJcbiAgICAgICAgKX1gXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiU3RhcnRpbmcgVml0ZSBjbGllbnQgYnVpbGQuLi5cIikpO1xuICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwidWkvaW5kZXgudHNcIikpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiVGhlIFVJIGZvbGRlciBwcm9qZWN0IGhhcyBubyBpbmRleC50cyBlbnRyeSBwb2ludCB0byBjcmVhdGUgdGhlIGxpYnJhcnkuXCJcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIFVwZGF0ZSB0aGUgLmQudHMgZmlsZXMgZm9yIHRoZSBsaWJyYXJ5IHByb2plY3RcbiAgYXdhaXQgcmVsZWFzZUxpYnJhcnlUeXBlcygpO1xuXG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiQnVpbGRpbmcgbGlicmFyeSBidW5kbGUuLi5cIikpO1xuICBjb25zdCBjb25maWcgPSBhd2FpdCBidWlsZFZpdGVDb25maWcoKTtcblxuICBjb25maWcubG9nTGV2ZWwgPSBcIndhcm5cIjtcbiAgY29uZmlnLnJvb3QgPSBwYXRoLnJlc29sdmUoXCJ1aVwiKTtcbiAgY29uZmlnLmJ1aWxkIS5saWIgPSB7XG4gICAgLy8gQ291bGQgYWxzbyBiZSBhIGRpY3Rpb25hcnkgb3IgYXJyYXkgb2YgbXVsdGlwbGUgZW50cnkgcG9pbnRzXG4gICAgZW50cnk6IHBhdGgucmVzb2x2ZShcInVpL2luZGV4LnRzXCIpLFxuICAgIG5hbWU6IChhd2FpdCB0YXJnZXRQcm9qZWN0TmFtZSgpKS5zcGxpdChcIkBcIikuam9pbihcIlwiKS5zcGxpdChcIi9cIikuam9pbihcIl9cIiksXG4gICAgLy8gVGhlIHByb3BlciBleHRlbnNpb25zIHdpbGwgYmUgYWRkZWRcbiAgICBmaWxlTmFtZTogXCJpbmRleFwiLFxuICB9O1xuXG4gIGNvbmZpZy5tb2RlID0gXCJwcm9kdWN0aW9uXCI7XG4gIGNvbmZpZy5yb290ID0gcGF0aC5yZXNvbHZlKFwiYXBwL2NsaWVudFwiKTtcbiAgY29uZmlnLmJ1aWxkIS5vdXREaXIgPSBwYXRoLnJlc29sdmUoXCJkaXN0L3VpXCIpO1xuICBjb25maWcuYnVpbGQhLndhdGNoID0gdm9pZCAwO1xuICBjb25maWcuYnVpbGQhLnJvbGx1cE9wdGlvbnMhLm91dHB1dCA9IHtcbiAgICBkaXI6IGNvbmZpZy5idWlsZCEub3V0RGlyLFxuICAgIGVudHJ5RmlsZU5hbWVzOiBcImluZGV4LmpzXCIsXG4gICAgY2h1bmtGaWxlTmFtZXM6IFwiaW5kZXguanNcIixcbiAgICBtYW51YWxDaHVua3M6IHVuZGVmaW5lZCxcbiAgfTtcblxuICBjb25zdCBleHRlcm5hbCA9IE9iamVjdC5rZXlzKGF3YWl0IHRhcmdldFByb2plY3REZXBlbmRlbmNpZXMoKSk7XG4gIGNvbnNvbGUud2FybihcbiAgICBcIkV4dGVybmFsaXplZCBMaWJyYXJpZXMgdGhhdCB3aWxsIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgYnVuZGxlOlwiLFxuICAgIGV4dGVybmFsXG4gICk7XG5cbiAgY29uZmlnLmJ1aWxkIS5yb2xsdXBPcHRpb25zID0ge1xuICAgIC4uLmNvbmZpZy5idWlsZCEucm9sbHVwT3B0aW9ucyxcbiAgICBleHRlcm5hbCxcbiAgfTtcblxuICBhd2FpdCBWaXRlLmJ1aWxkKGNvbmZpZyk7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0VmVyc2lvbiB9IGZyb20gXCIuLi8uLi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC12ZXJzaW9uLmpzXCI7XG5pbXBvcnQgeyB3YWl0IH0gZnJvbSBcIi4uLy4uL3V0aWwvd2FpdC5qc1wiO1xuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgdGhlIGJ1bmRsaW5nIHByb2Nlc3MgZm9yIGRpc3RyaWJ1dGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbGVhc2VTdG9yaWVzKCkge1xuICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiA9XG4gICAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gfHwgKGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCkpO1xuXG4gIGNvbnNvbGUud2FybihjaGFsay5jeWFuQnJpZ2h0KFwiQ29weWluZyBzdG9yeSBmaWxlcyBmb3IgdGhlIGRpc3RyaWJ1dGlvbi5cIikpO1xuICBjb25zdCBvdXRwdXRQYXRoID0gcGF0aC5yZXNvbHZlKFwiZGlzdC9zdG9yaWVzXCIpO1xuICBjb25zdCBzdG9yaWVzUGF0aCA9IHBhdGgucmVzb2x2ZShcInVpL3N0b3JpZXNcIik7XG4gIGNvbnN0IGRpc3RQYXRoID0gcGF0aC5yZXNvbHZlKFwiZGlzdFwiKTtcblxuICBpZiAoIWZzLmV4aXN0c1N5bmMoc3Rvcmllc1BhdGgpKSB7XG4gICAgY29uc29sZS5lcnJvcihgQ291bGQgbm90IGZpbmQgc3RvcmllcyBkaXJlY3Rvcnk6XFxuXFx0JHtzdG9yaWVzUGF0aH1gKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBFbnN1cmUgdGhlIGRpcmVjdG9yeSBmb3IgdGhlIHN0b3JpZXMgZXhpc3RzIGluIHRoZSBzeXN0ZW1cbiAgZnMuZW5zdXJlRGlyU3luYyhvdXRwdXRQYXRoKTtcbiAgLy8gRGVlcCBjb3B5IHRoZSBzdG9yaWVzIGZvbGRlciB0byB0aGUgZGlzdHJpYnV0aW9uXG4gIGZzLmNvcHlTeW5jKHN0b3JpZXNQYXRoLCBvdXRwdXRQYXRoKTtcblxuICAvLyBHZXQgdGhlIG5hbWUgb2YgdGhpcyBwcm9qZWN0IGZyb20gaXQncyBwYWNrYWdlLmpzb25cbiAgY29uc3QgcGFja2FnZUpzb25QYXRoID0gcGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpO1xuICBjb25zdCBwcm9qZWN0UGFja2FnZSA9IGZzLnJlYWRKU09OU3luYyhwYWNrYWdlSnNvblBhdGgpO1xuXG4gIC8vIFdlIG5vdyBuZWVkIHRvIHdyaXRlIGEgc2ltcGxlIHBhY2thZ2UuanNvbiBmaWxlIHRvIHRoZSBkaXN0IGZvbGRlciB0b1xuICAvLyBlbnN1cmUgdGhlIHN0b3JpZXMgaW1wb3J0cyByZWZlcmVuY2UgdGhlIHNhbWUgbGlicmFyeSB2aWEgcmVsYXRpdmUgcGF0aFxuICAvLyBpbXBvcnRzLlxuICAvLyBUaGlzIGNvcnJlY3RzIGltcG9ydHMgdGhhdCBkbzogZnJvbSBcIi4uLy4uLy4uXCJcbiAgY29uc3QgcGFja2FnZUpzb24gPSB7XG4gICAgbmFtZTogcHJvamVjdFBhY2thZ2UubmFtZSB8fCBcInVua25vd25cIixcbiAgICBwcml2YXRlOiB0cnVlLFxuICAgIHR5cGU6IFwibW9kdWxlXCIsXG4gICAgbWFpbjogXCIuL3VpL2luZGV4LmpzXCIsXG4gICAgdHlwZXM6IFwiLi90eXBlcy91aS9pbmRleC5kLnRzXCIsXG4gICAgZGVwZW5kZW5jaWVzOiB7fSxcbiAgICByZXBvc2l0b3J5OiB7fSxcbiAgICBzY3JpcHRzOiB7fSxcbiAgICBkZXZEZXBlbmRlbmNpZXM6IHt9LFxuICB9O1xuXG4gIGNvbnNvbGUud2FybihcbiAgICBcIldyaXRpbmcgZGlzdHJpYnV0aW9uIHBhY2thZ2UuanNvbjpcIixcbiAgICBwYXRoLnJlc29sdmUoZGlzdFBhdGgsIFwicGFja2FnZS5qc29uXCIpXG4gICk7XG4gIGZzLndyaXRlSlNPTlN5bmMocGF0aC5yZXNvbHZlKGRpc3RQYXRoLCBcInBhY2thZ2UuanNvblwiKSwgcGFja2FnZUpzb24pO1xuXG4gIC8vIExldCB0aGUgd3JpdGUgY29tcGxldGVcbiAgYXdhaXQgd2FpdCg1MDApO1xuXG4gIC8vIFdyaXRlIGEgZGlzdHJpYnV0aW9uIGZvbGRlciBjYWxsZWQgY29tcG9uZW50cyB3aGljaCB3aWxsIHNpbXBseSBiZSBhXG4gIC8vIHBhY2thZ2UganNvbiBjb25maWd1cmF0aW9uIHRoYXQgcm91dGVzIHRoZSBpbXBvcnQgdG8gdGhlIHVpIHJlbGVhc2VcbiAgZnMuZW5zdXJlRGlyU3luYyhwYXRoLnJlc29sdmUoZGlzdFBhdGgsIFwiY29tcG9uZW50c1wiKSk7XG5cbiAgLy8gQWxzbyB3cml0ZSB0aGUgcGFja2FnZS5qc29uIGZpbGUgdG8gdGhlIGNvbXBvbmVudHMgZm9sZGVyIHRvIHJlcm91dGVcbiAgLy8gY29tcG9uZW50IGltcG9ydHMgdG8gdGhlIHVpIHJlbGVhc2UgZGlzdHJpYnV0aW9uIGFzIHdlbGwuXG4gIC8vIFRoaXMgY29ycmVjdHMgaW1wb3J0cyB0aGF0IGRvOiBmcm9tIFwiLi4vLi4vLi4vY29tcG9uZW50c1wiXG4gIHBhY2thZ2VKc29uLm1haW4gPSBcIi4uL3VpL2luZGV4LmpzXCI7XG4gIHBhY2thZ2VKc29uLnR5cGVzID0gXCIuLi90eXBlcy91aS9pbmRleC5kLnRzXCI7XG5cbiAgY29uc29sZS53YXJuKFxuICAgIFwiV3JpdGluZyBkaXN0cmlidXRpb24gcGFja2FnZS5qc29uOlwiLFxuICAgIHBhdGgucmVzb2x2ZShkaXN0UGF0aCwgXCJjb21wb25lbnRzL3BhY2thZ2UuanNvblwiKVxuICApO1xuICBmcy53cml0ZUpTT05TeW5jKFxuICAgIHBhdGgucmVzb2x2ZShkaXN0UGF0aCwgXCJjb21wb25lbnRzL3BhY2thZ2UuanNvblwiKSxcbiAgICBwYWNrYWdlSnNvblxuICApO1xuXG4gIC8vIExldCB0aGUgd3JpdGUgY29tcGxldGVcbiAgYXdhaXQgd2FpdCg1MDApO1xuICBjb25zb2xlLndhcm4oXCJGaW5pc2hlZCBjb3B5aW5nIHN0b3JpZXMuXCIpO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGV4ZWNTY3JpcHQgfSBmcm9tIFwiLi4vLi4vbGliL2V4ZWMvZXhlYy1zY3JpcHQuanNcIjtcbmltcG9ydCB7IGdpdFJldHVyblRvRGV2IH0gZnJvbSBcIi4uLy4uL2xpYi9naXQvZ2l0LXJldHVybi10by1kZXYuanNcIjtcbmltcG9ydCB7IHByb21wdENvbmZpcm0gfSBmcm9tIFwiLi4vLi4vbGliL3Byb21wdC9wcm9tcHQtY29uZmlybS5qc1wiO1xuaW1wb3J0IHsgcmVsZWFzZUJpbiB9IGZyb20gXCIuLi8uLi9saWIvYnVpbGQvYmluL3JlbGVhc2UtYmluLmpzXCI7XG5pbXBvcnQgeyByZWxlYXNlQ2xpZW50IH0gZnJvbSBcIi4uLy4uL2xpYi9idWlsZC93ZWItYXBwL3ZpdGUvcmVsZWFzZS1jbGllbnQuanNcIjtcbmltcG9ydCB7IHJlbGVhc2VMaWJyYXJ5IH0gZnJvbSBcIi4uLy4uL2xpYi9idWlsZC9saWJyYXJ5L3ZpdGUvcmVsZWFzZS1saWJyYXJ5LmpzXCI7XG5pbXBvcnQgeyByZWxlYXNlU3RvcmllcyB9IGZyb20gXCIuLi8uLi9saWIvYnVpbGQvbGlicmFyeS9yZWxlYXNlLXN0b3JpZXMuanNcIjtcblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgYWxsIG9mIHRoZSBwYWNrYWdlIGpzb24gc2V0dGluZ3MgYW5kIGVuc3VyZXMgdGhlXG4gKiByZXBvc2l0b3JpZXMgbGlzdGVkIGFyZSB2YWxpZCBmb3IgdXNlIHdpdGhpbiB0aGlzIGNvbnRleHQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlUmVsZWFzZSgpIHtcbiAgaWYgKHByb2Nlc3MuZW52LlFVSUNLX0JVSUxEID09PSBcInRydWVcIikgcmV0dXJuO1xuICAvLyBSdW4gdGhlIHZpZXctcmVsZWFzZSBjb21tYW5kIHRvIHNlZSBpZiB0aGUgcmVsZWFzZSBwcm9jZXNzIHByb2R1Y2VzXG4gIC8vIGEgdmFsaWQgb3V0cHV0XG4gIC8vIFJ1biB0aGUgdmlldy1yZWxlYXNlIHNjcmlwdFxuICBhd2FpdCBleGVjU2NyaXB0KFwicmVsZWFzZVwiLCBbXCJ2aWV3XCJdKTtcblxuICAvLyBBc2sgaWYgdGhlIHZpZXctcmVsZWFzZSBzY3JpcHQgbG9va3MgZ29vZCBhbmQgc2hvdWxkIGNvbnRpbnVlXG4gIGNvbnN0IHNob3VsZENvbnRpbnVlID0gYXdhaXQgcHJvbXB0Q29uZmlybShcbiAgICBcIlxcblNob3VsZCB0aGUgcmVsZWFzZSBjb250aW51ZSBiZWluZyBtYWRlP1wiXG4gICk7XG5cbiAgLy8gUXVpdCB0aGUgcHJvY2VzcyBpZiB0aGUgdmlldyByZWxlYXNlIGRpZCBub3Qgd29ya1xuICBpZiAoIXNob3VsZENvbnRpbnVlKSB7XG4gICAgYXdhaXQgZ2l0UmV0dXJuVG9EZXYodHJ1ZSk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBwZXJmb3JtcyBhbGwgYnVuZGxpbmcgcHJvY2VkdXJlcyBhbmQgc2V0IHVwIG5lZWRlZCB0byBidW5kbGUgdGhlXG4gKiBwcm9qZWN0LlxuICovXG5hc3luYyBmdW5jdGlvbiBidW5kbGVQcm9qZWN0KCkge1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJHYXRoZXJpbmcgYnVpbGQgdGFyZ2V0cyBmcm9tOlwiLFxuICAgIGNoYWxrLnllbGxvd0JyaWdodChwYXRoLnJlc29sdmUoXCJidWlsZC5jb25mLmpzXCIpKVxuICApO1xuICBjb25zdCBidWlsZEVudmlyb25tZW50cyA9IChhd2FpdCBpbXBvcnQocGF0aC5yZXNvbHZlKFwiYnVpbGQuY29uZi5qc1wiKSkpXG4gICAgLkJVSUxEX1RBUkdFVFM7XG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gXCJwcm9kdWN0aW9uXCI7XG5cbiAgY29uc29sZS53YXJuKFxuICAgIFwiQnVpbGRpbmcgZW52aXJvbm1lbnRzXCIsXG4gICAgY2hhbGsucmVkQnJpZ2h0Qm9sZChKU09OLnN0cmluZ2lmeShidWlsZEVudmlyb25tZW50cykpXG4gICk7XG5cbiAgaWYgKCFBcnJheS5pc0FycmF5KGJ1aWxkRW52aXJvbm1lbnRzKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJidWlsZC5jb25mLmpzIG11c3QgYmUgYW4gYXJyYXkgb2Ygc3RyaW5nIHZhbHVlc1wiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBmb3IgKGNvbnN0IGVudiBvZiBidWlsZEVudmlyb25tZW50cykge1xuICAgIGF3YWl0IHJlbGVhc2VDbGllbnQoZW52KTtcbiAgfVxuXG4gIGF3YWl0IHJlbGVhc2VMaWJyYXJ5KCk7XG4gIGF3YWl0IHJlbGVhc2VTdG9yaWVzKCk7XG4gIGF3YWl0IHJlbGVhc2VCaW4oKTtcbn1cblxuLyoqXG4gKiBUaGlzIGNsZWFycyBvdXQgdGhlIGRpc3RyaWJ1dGlvbiBmb2xkZXIgc28gbm8gbGluZ2VyaW5nIGlycmVsZXZhbnQgZnJhZ21lbnRzXG4gKiBleGlzdHMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNsZWFyUHJldmlvdXNEaXN0cmlidXRpb24oKSB7XG4gIHRyeSB7XG4gICAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJkaXN0XCIpKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS53YXJuKFwiTm8gZGlzdCBmb2xkZXIgdG8gY2xlYW4gb3V0LlwiKTtcbiAgfVxuXG4gIGZzLmVuc3VyZURpclN5bmMocGF0aC5yZXNvbHZlKFwiZGlzdFwiKSk7XG59XG5cbi8qKlxuICogVGhpcyBjb3BpZXMgYWxsIG5lY2Vzc2FyeSBlbGVtZW50cyBmcm9tIHRoZSBwcm9qZWN0IGludG8gdGhlIGRpc3RyaWJ1dGlvblxuICovXG5hc3luYyBmdW5jdGlvbiBjb3B5QW5kQ2xlYW5GcmFnbWVudHMoKSB7XG4gIC8vIENsZWFuIG91dCB0aGUgY29tcGlsZWQgdGVzdCBmaWxlIHR5cGluZ3NcbiAgdHJ5IHtcbiAgICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcImRpc3QvdGVzdFwiKSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUud2FybihcIk5vIHRlc3QgZm9sZGVyIHRvIGNsZWFuIG91dFwiKTtcbiAgfVxuXG4gIC8vIENsZWFuIG91dCB1bml0LXRlc3RzXG4gIHRyeSB7XG4gICAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJkaXN0L3VuaXQtdGVzdFwiKSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUud2FybihcIk5vIHVuaXQtdGVzdCBmb2xkZXIgdG8gY2xlYW4gb3V0XCIpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgLy8gUGVyZm9ybSBhbnkgdHlwZXNjcmlwdCBzcGVjaWZpYyBhY3Rpb25zXG4gIGNvbnNvbGUud2FybihcIlZhbGlkYXRpbmcgdGhlIHJlbGVhc2UuLi5cIik7XG4gIGF3YWl0IHZhbGlkYXRlUmVsZWFzZSgpO1xuICAvLyBEZWxldGUgYW55IGZpbGVzIGluIHRoZSBkaXN0IGZvbGRlciBzbyB3ZSBoYXZlIGEgY2xlYW4gYnVpbGQgd2l0aCBub1xuICAvLyBjaGFuY2VzIG9mIGNhY2hpbmcgb3Iga2VlcGluZyBubyBsb25nZXIgcmVsZXZhbnQgZmlsZXMuXG4gIGNvbnNvbGUud2FybihcIkNsZWFyIHByZXZpb3VzIGJ1aWxkLi4uXCIpO1xuICBhd2FpdCBjbGVhclByZXZpb3VzRGlzdHJpYnV0aW9uKCk7XG4gIC8vIEJ1aWxkIHRoZSBtb25vbGl0aGljIGRpc3RyaWJ1dGlvblxuICBjb25zb2xlLndhcm4oXCJCdW5kbGluZyBwcm9qZWN0Li4uXCIpO1xuICBhd2FpdCBidW5kbGVQcm9qZWN0KCk7XG4gIC8vIENvcHkgYW5kIGRlbGV0ZSBhbnkgZnJhZ21lbnRzIGluIHRoZSBkaXN0IGZvbGRlciB0aGF0IGlzIG5lY2Vzc2FyeVxuICBjb25zb2xlLndhcm4oXCJGaW5hbCBjbGVhbnVwLi4uXCIpO1xuICBhd2FpdCBjb3B5QW5kQ2xlYW5GcmFnbWVudHMoKTtcbiAgY29uc29sZS53YXJuKFwiUmVsZWFzZSBCdWlsZCBjb21wbGV0ZSFcIik7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBncm91cEJ5IGZyb20gXCJsb2Rhc2gvZ3JvdXBCeS5qc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB1bmlxIGZyb20gXCJsb2Rhc2gvdW5pcS5qc1wiO1xuaW1wb3J0IHVwcGVyRmlyc3QgZnJvbSBcImxvZGFzaC91cHBlckZpcnN0LmpzXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi9saWIvdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgY29tcGFyZSwgaW5jIH0gZnJvbSBcInNlbXZlclwiO1xuaW1wb3J0IHsgZXhlY1N5bmNSZXN1bHQgfSBmcm9tIFwiLi4vLi4vbGliL2V4ZWMvZXhlYy1zeW5jLXJlc3VsdC5qc1wiO1xuXG5jb25zdCB7IGV4aXN0c1N5bmMsIHJlYWRGaWxlU3luYywgcmVhZEpTT05TeW5jLCB3cml0ZUZpbGVTeW5jIH0gPSBmcztcblxuLyoqIEB0eXBlIHt7W2tleTogc3RyaW5nXTogJ2JyZWFraW5nJyB8ICdhZGRlZCcgfCAnZml4ZWQnIHwgJ3Rhc2snfX0gKi9cbmNvbnN0IHJlbGVhc2VUYWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBicmVha2luZzogXCJicmVha2luZ1wiLFxuXG4gIGZlYXQ6IFwiYWRkZWRcIixcbiAgZmVhdHVyZTogXCJhZGRlZFwiLFxuICBhZGRlZDogXCJhZGRlZFwiLFxuXG4gIGZpeDogXCJmaXhlZFwiLFxuICBmaXhlZDogXCJmaXhlZFwiLFxuICBob3RmaXg6IFwiZml4ZWRcIixcblxuICB0YXNrOiBcInRhc2tcIixcbn07XG5cbmNvbnN0IHRhZ09yZGVyID0gdW5pcShPYmplY3QudmFsdWVzKHJlbGVhc2VUYWdzKSk7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5vdGVzXG4gKi9cbmZ1bmN0aW9uIGdldFJlbGVhc2VUeXBlKG5vdGVzOiBzdHJpbmcpIHtcbiAgY29uc3QgZ3JvdXBzID0gbm90ZXNcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC5zcGxpdChcIlxcblwiKVxuICAgIC5tYXAoKGxpbmUpID0+IChsaW5lLm1hdGNoKC8jIyAoXFx3KykvKSB8fCBbXSlbMV0pXG4gICAgLmZpbHRlcihCb29sZWFuKTtcbiAgaWYgKGdyb3Vwcy5pbmNsdWRlcyhcImJyZWFraW5nXCIpKSByZXR1cm4gXCJtYWpvclwiO1xuICBpZiAoZ3JvdXBzLmluY2x1ZGVzKFwiYWRkZWRcIikpIHJldHVybiBcIm1pbm9yXCI7XG4gIHJldHVybiBcInBhdGNoXCI7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvclZlcnNpb24gVGhlIHZlcnNpb24gdG8gYnVpbGQgdGhlIHJlbGVhc2Ugbm90ZXMgZm9yXG4gKlxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5hc3luYyBmdW5jdGlvbiBidWlsZFJlbGVhc2VOb3Rlcyhmb3JWZXJzaW9uOiBzdHJpbmcpIHtcbiAgY29uc29sZS53YXJuKFwiQnVpbGRpbmcgcmVsZWFzZSBub3Rlcy4uLlwiKTtcblxuICBjb25zb2xlLndhcm4oXCJmZXRjaGluZyB0YWdzLi4uXCIpO1xuICBjb25zdCBnZXRUYWdzID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoXCJnaXRcIiwgW1widGFnXCIsIFwiLS1saXN0XCJdKTtcblxuICBpZiAoZ2V0VGFncyA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3QgZ2V0IGdpdCB0YWdzXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IHRhZ3MgPSBnZXRUYWdzLnRyaW0oKS5zcGxpdChcIlxcblwiKS5zb3J0KGNvbXBhcmUpO1xuXG4gIGNvbnN0IHByZXZpb3VzVmVyc2lvbiA9XG4gICAgdGFnc1tcbiAgICAgICh0YWdzLmluY2x1ZGVzKGZvclZlcnNpb24pID8gdGFncy5pbmRleE9mKGZvclZlcnNpb24pIDogdGFncy5sZW5ndGgpIC0gMVxuICAgIF07XG5cbiAgY29uc29sZS53YXJuKFwiZmV0Y2hpbmcgdmVyc2lvbiBoYXNoLi4uXCIpO1xuICBjb25zdCBjdXJyZW50VmVyc2lvbkhhc2hFeGVjID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcbiAgICBcInJldi1saXN0XCIsXG4gICAgXCItMVwiLFxuICAgIGAke2ZvclZlcnNpb259YCxcbiAgXSk7XG5cbiAgaWYgKGN1cnJlbnRWZXJzaW9uSGFzaEV4ZWMgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQ291bGRuJ3QgZ2V0IGN1cnJlbnQgdmVyc2lvbiBoYXNoXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRWZXJzaW9uSGFzaCA9IGN1cnJlbnRWZXJzaW9uSGFzaEV4ZWMudHJpbSgpO1xuXG4gIGNvbnNvbGUud2FybihcImZldGNoaW5nIHByZXZpb3VzIHZlcnNpb24gaGFzaC4uLlwiKTtcbiAgbGV0IHByZXZpb3VzVmVyc2lvbkhhc2hFeGVjID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcbiAgICBgcmV2LWxpc3RgLFxuICAgIGAtMWAsXG4gICAgYCR7cHJldmlvdXNWZXJzaW9ufWAsXG4gIF0pO1xuXG4gIGlmIChwcmV2aW91c1ZlcnNpb25IYXNoRXhlYyA9PT0gbnVsbCkge1xuICAgIHByZXZpb3VzVmVyc2lvbkhhc2hFeGVjID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcbiAgICAgIGByZXYtbGlzdGAsXG4gICAgICBcIi0tbWF4LXBhcmVudHM9MFwiLFxuICAgICAgXCJIRUFEXCIsXG4gICAgXSk7XG5cbiAgICBpZiAocHJldmlvdXNWZXJzaW9uSGFzaEV4ZWMgPT09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZG4ndCBnZXQgcHJldmlvdXMgdmVyc2lvbiBoYXNoXCIpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHByZXZpb3VzVmVyc2lvbkhhc2ggPSBwcmV2aW91c1ZlcnNpb25IYXNoRXhlYy50cmltKCk7XG5cbiAgY29uc29sZS53YXJuKFwiZmV0Y2hpbmcgbG9ncy4uLlwiKTtcbiAgY29uc3QgbG9nc0V4ZWMgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChgZ2l0YCwgW1xuICAgIFwibG9nXCIsXG4gICAgXCItLXByZXR0eT0lQlwiLFxuICAgIGAke3ByZXZpb3VzVmVyc2lvbkhhc2h9Li4uJHtjdXJyZW50VmVyc2lvbkhhc2h9YCxcbiAgXSk7XG5cbiAgaWYgKGxvZ3NFeGVjID09PSBudWxsKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkNvdWxkbid0IGdldCBsb2dzXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IGxvZ3MgPSBsb2dzRXhlY1xuICAgIC5zcGxpdChcIlxcblwiKVxuICAgIC8vIENvbnZlcnQgdGhlIGxpbmVzIGludG8gYW4gYXJyYXkgb2YgdGFnIGFuZCBtZXNzYWdlIG9iamVjdHNcbiAgICAubWFwKChsaW5lKSA9PiB7XG4gICAgICBjb25zdCBbLCB0YWcgPSBcIlwiLCBtZXNzYWdlID0gXCJcIl0gPVxuICAgICAgICBsaW5lLm1hdGNoKC9eXFxzKihcXHcrPylcXHMqOlxccyooLiopXFxzKiQvKSB8fCBbXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRhZzogcmVsZWFzZVRhZ3NbdGFnLnRvTG93ZXJDYXNlKCldLFxuICAgICAgICBtZXNzYWdlOiB1cHBlckZpcnN0KG1lc3NhZ2UpLFxuICAgICAgfTtcbiAgICB9KVxuICAgIC8vIFJlbW92ZSBsaW5lcyB0aGF0IGRvIG5vdCBjb250YWluIGEga25vd24gdGFnXG4gICAgLmZpbHRlcigobm90ZSkgPT4gbm90ZS50YWcpO1xuXG4gIGNvbnN0IGdyb3VwcyA9IGdyb3VwQnkobG9ncywgXCJ0YWdcIik7XG4gIC8vIEJ1aWxkIHRoZSByZWxlYXNlIG5vdGVzXG4gIGNvbnN0IHRleHQgPSB0YWdPcmRlclxuICAgIC8vIFJlbW92ZSB0YWdzIHRoYXQgZG9uJ3QgZXhpc3QgaW4gdGhlIGN1cnJlbnQgb3V0cHV0XG4gICAgLmZpbHRlcigoZ3JvdXBOYW1lKSA9PiBncm91cHNbZ3JvdXBOYW1lXSlcbiAgICAubWFwKChncm91cE5hbWUpID0+IHtcbiAgICAgIGNvbnN0IGdyb3VwID0gZ3JvdXBzW2dyb3VwTmFtZV07XG4gICAgICByZXR1cm4gYCMjICR7Z3JvdXBOYW1lLnJlcGxhY2UoLyhcXHcpLywgKGMpID0+IGMudG9VcHBlckNhc2UoKSl9XFxuXFxuJHtncm91cFxuICAgICAgICAubWFwKCh7IHRhZywgbWVzc2FnZSB9KSA9PiBgLSBbXFxgJHt0YWcudG9VcHBlckNhc2UoKX1cXGBdOiAke21lc3NhZ2V9YClcbiAgICAgICAgLmpvaW4oXCJcXG5cIil9YDtcbiAgICB9KVxuICAgIC5qb2luKFwiXFxuXFxuXCIpO1xuXG4gIGNvbnNvbGUud2FybihcIk5ldyByZWxlYXNlIG5vdGVzIGNvbXBsZXRlZFwiKTtcbiAgcmV0dXJuIHRleHQ7XG59XG5cbi8qKlxuICogUHJpbnQgcmVsZWFzZSBub3RlcyBzaW5jZSB0aGUgbGFzdCByZWxlYXNlXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9wdGlvbnMgU2VlIGJlbG93XG4gKiBAcGFyYW0ge3N0cmluZ30gb3B0aW9ucy5maWxlIFRoZSBmaWxlIHRvIHByaW50IHJlbGVhc2Ugbm90ZXMgdG8uIElmIHRoaXMgaXNcbiAqIGxlZnQgYmxhbmssIHRoZW4gdGhlIHJlbGVhc2Ugbm90ZXMgd2lsbCBiZSBwcmludGVkIHRvIFNURE9VVC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy51cGRhdGVQYWNrYWdlIFVwZGF0ZSB0aGUgcGFja2FnZS5qc29uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMudGFnIFRydWUgaWYgYSBnaXQgdGFnIHNob3VsZCBiZSBjcmVhdGVkXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG9wdGlvbnMuZXJyb3JPbkVtcHR5IFRydWUgaWYgbm8gcmVsZWFzZSBub3RlcyB3aWxsIGJlIGNyZWF0ZWRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKFxuICBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuIHwgbnVtYmVyPiA9IHt9XG4pIHtcbiAgY29uc29sZS53YXJuKFwiR2VuZXJhdGluZyBSZWxlYXNlIE5vdGVzLi4uXCIpO1xuICAvLyBQdWxsIGluIGFueSB0YWdzXG4gIGNvbnN0IGZldGNoRXhlYyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwiZ2l0XCIsIFtcImZldGNoXCIsIFwiLS10YWdzXCJdKTtcblxuICBpZiAoZmV0Y2hFeGVjID09PSBudWxsKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkNvdWxkbid0IGZldGNoIHRhZ3NcIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBjdXJyZW50IHZlcnNpb25cbiAgY29uc3QgcGtnID0gcmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSk7XG4gIGNvbnN0IHsgdmVyc2lvbjogY3VycmVudFZlcnNpb24gPSBcIjAuMC4xXCIgfSA9IHBrZztcbiAgY29uc29sZS53YXJuKFwiQ3VycmVudCBQcm9qZWN0IHZlcnNpb246XCIsIHsgY3VycmVudFZlcnNpb24gfSk7XG5cbiAgY29uc3Qgbm90ZXMgPSBhd2FpdCBidWlsZFJlbGVhc2VOb3RlcyhcIkhFQURcIik7XG4gIGNvbnN0IHJlbGVhc2VUeXBlID0gZ2V0UmVsZWFzZVR5cGUobm90ZXMpO1xuICBjb25zdCBuZXdWZXJzaW9uID0gcmVsZWFzZVR5cGUgJiYgaW5jKGN1cnJlbnRWZXJzaW9uLCByZWxlYXNlVHlwZSk7XG5cbiAgaWYgKCFuZXdWZXJzaW9uKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBkZXRlcm1pbmUgbmV4dCB2ZXJzaW9uXCIsIHsgY3VycmVudFZlcnNpb24gfSk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gQ3JlYXRlIHRoZSB0YWcgaWYgd2Ugd2VyZSB0b2xkIHRvIGRvIHNvXG4gIGlmIChvcHRpb25zLnRhZykge1xuICAgIGNvbnNvbGUud2FybihcIkNyZWF0aW5nIHRoZSBuZXcgdGFnLi4uXCIpO1xuICAgIGNvbnN0IHRhZ0V4ZWMgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChgZ2l0YCwgW1xuICAgICAgXCJ0YWdcIixcbiAgICAgIFwiLWFcIixcbiAgICAgIG5ld1ZlcnNpb24sXG4gICAgICBcIi1tXCIsXG4gICAgICBgUmVsZWFzZSAke25ld1ZlcnNpb259YCxcbiAgICBdKTtcblxuICAgIGlmICh0YWdFeGVjID09PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQ291bGRuJ3QgY3JlYXRlIHRhZ1wiKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgcGFja2FnZS5qc29uIGlmIHdlIHdlcmUgdG9sZCB0byBkbyBzb1xuICBpZiAob3B0aW9ucy51cGRhdGVQYWNrYWdlKSB7XG4gICAgY29uc29sZS53YXJuKFwiVXBkYXRpbmcgdGhlIHBhY2thZ2UuanNvbi4uLlwiKTtcbiAgICBjb25zdCBwa2cgPSByZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpKTtcbiAgICBwa2cudmVyc2lvbiA9IG5ld1ZlcnNpb247XG5cbiAgICB3cml0ZUZpbGVTeW5jKFxuICAgICAgcGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpLFxuICAgICAgYCR7SlNPTi5zdHJpbmdpZnkocGtnLCBudWxsLCBcIiAgXCIpfVxcbmBcbiAgICApO1xuICB9XG5cbiAgY29uc3QgdGV4dCA9IGAjIyAke25ld1ZlcnNpb259XFxuXFxuJHtub3Rlc31gO1xuXG4gIC8vIElmIHRoZSBub3RlcyBhcmUgZW1wdHksIHRocm93IGFuIGVycm9yIGlmIHJlcXVlc3RlZCB0byBkbyBzb1xuICBpZiAoIW5vdGVzLnRyaW0oKSAmJiBvcHRpb25zLmVycm9yT25FbXB0eSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiTm8gbm90ZXMgd2VyZSBnZW5lcmF0ZWQgYXMgbm8gc2VtdmVyIHN0eWxlIG1lc3NhZ2VzIHdlcmUgZm91bmRcIlxuICAgICk7XG4gIH1cblxuICAvLyBPdXRwdXQgdGhlIG5vdGVzIHRvIHRoZSBjb25zb2xlIG9yIGEgZmlsZVxuICBpZiAob3B0aW9ucy5maWxlKSB7XG4gICAgY29uc29sZS53YXJuKFwiV3JpdGluZyB0aGUgcmVsZWFzZSBub3RlcyB0byBmaWxlOlwiLCBvcHRpb25zLmZpbGUpO1xuICAgIGNvbnN0IGZpbGUgPSBwYXRoLnJlc29sdmUob3B0aW9ucy5maWxlIGFzIHN0cmluZyk7XG4gICAgY29uc3QgcHJldmlvdXNUZXh0ID0gZXhpc3RzU3luYyhmaWxlKSA/IHJlYWRGaWxlU3luYyhmaWxlKSA6IFwiXCI7XG4gICAgd3JpdGVGaWxlU3luYyhmaWxlLCBgJHtgJHt0ZXh0fVxcblxcbiR7cHJldmlvdXNUZXh0fWAudHJpbSgpfVxcbmApO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gMTAwOyArK2kpIHtcbiAgICAgIGlmIChmcy5leGlzdHNTeW5jKGZpbGUpKSBicmVhaztcbiAgICAgIGlmIChpID09PSAxMDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiUmVsZWFzZSBub3RlcyBmaWxlIHdhcyBub3QgY3JlYXRlZCBpbiB0aW1lIGZvciB0aGUgZmluYWwgcmVsZWFzZSBjb21taXQ6XCIsXG4gICAgICAgICAgY2hhbGsucmVkQnJpZ2h0Qm9sZChmaWxlKVxuICAgICAgICApO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIGFsbCBmcmFnbWVudHMgYXJlIGdvaW5nIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBjb21taXRcbiAgICBjb25zb2xlLndhcm4oXCJBZGRpbmcgZnJhZ21lbnRzIHRvIGdpdC4uLlwiKTtcbiAgICBpZiAoKGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwiZ2l0XCIsIFtcImFkZFwiLCBcIi1BXCJdKSkgPT09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJDb3VsZCBub3QgZW5zdXJlIGFsbCBmcmFnbWVudHMgYXJlIGFkZGVkIGZvciB0aGUgbmV4dCBjb21taXQuXCJcbiAgICAgICk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuXG4gICAgLy8gQ29tbWl0IHRoZSBjaGFuZ2VzXG4gICAgY29uc29sZS53YXJuKFwiQ29tbWl0dGluZyB0byBnaXQuLi5cIik7XG4gICAgY29uc3QgY29tbWl0RXhlYyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwiZ2l0XCIsIFtcbiAgICAgIFwiY29tbWl0XCIsXG4gICAgICBcIi1hbVwiLFxuICAgICAgYFJlbGVhc2UgJHtuZXdWZXJzaW9ufWAsXG4gICAgXSk7XG5cbiAgICBpZiAoY29tbWl0RXhlYyA9PT0gbnVsbCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkbid0IGNvbW1pdCBjaGFuZ2VzXCIpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cblxuICAgIGNvbnNvbGUud2FybihgXFxuXFxuJHtjaGFsay5jeWFuKHRleHQpfVxcblxcbmApO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybihgXFxuXFxuJHtjaGFsay5jeWFuKHRleHQpfVxcblxcbmApO1xuICB9XG5cbiAgLy8gV2hlbmV2ZXIgdGhpcyBpcyByYW4gaXQgbWFrZXMgc2Vuc2UgdG8gdXBkYXRlIG91ciByZWxlYXNlIHZlcnNpb24gaGVyZSBzb1xuICAvLyBpdCBpcyBhdmFpYWxibGUgdG8gdGhlIHJlc3Qgb2YgYW55IHByb2Nlc3MgcnVubmluZyB1bmRlciBpdCdzIGFzc3VtcHRpb25zLlxuICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiA9IG5ld1ZlcnNpb247XG59XG4iLAogICAgImltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5cbi8qKlxuICogVGhpcyBjaGVja3MgaWYgdGhlIGN1cnJlbnQgZ2l0IGNvbnRleHQgaGFzIGFjY2VzcyB0byB0aGUgc3BlY2lmaWVkIHJlbW90ZVxuICogcmVwb3NpdG9yeS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdpdENhbkFjY2Vzc1JlbW90ZShyZW1vdGU6IHN0cmluZykge1xuICByZXR1cm4gZXhlY1N5bmMoYGdpdGAsIFtgbHMtcmVtb3RlYCwgcmVtb3RlXSk7XG59XG4iLAogICAgImltcG9ydCB7IGRlc2NyaXB0aW9uIH0gZnJvbSBcIi4uL3V0aWwvZGVzY3JpcHRpb24uanNcIjtcbmltcG9ydCB7IGV4ZWNTeW5jUmVzdWx0IH0gZnJvbSBcIi4uL2V4ZWMvZXhlYy1zeW5jLXJlc3VsdC5qc1wiO1xuaW1wb3J0IHsgZ2l0Q2FuQWNjZXNzUmVtb3RlIH0gZnJvbSBcIi4vZ2l0LWNhbi1hY2Nlc3MtcmVtb3RlLmpzXCI7XG5cbi8qKlxuICogRW5zdXJlcyB0aGUgZGV2ZWxvcGVyIGhhcyBlc3RhYmxpc2hlZCB0aGUgcHJvdmlkZWQgcmVtb3RlIG5hbWUgQU5EIGhhcyBhY2Nlc3NcbiAqIHRvIHRoZSByZW1vdGUgVVJMIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVtb3RlIG5hbWUuIFRoaXMgaXMgYW4gYXNzZXJ0aW9uIHNvXG4gKiB3aWxsIGNhdXNlIHRoZSBwcm9ncmFtIHRvIGV4aXQgb24gZmFpbHVyZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdpdEVuc3VyZVJlbW90ZShyZW1vdGU6IHN0cmluZykge1xuICAvLyBXZSBjaGVjayBvdXIgcmVtb3RlIHRvIGVuc3VyZSB3ZSBoYXZlIGEgcHJvamVjdCB3aXRoIGV4cGVjdGVkIHZhbHVlc1xuICBjb25zdCByZW1vdGVMaXN0UHJvY2VzcyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwiZ2l0XCIsIFtcInJlbW90ZVwiLCBcIi12XCJdKTtcblxuICBpZiAocmVtb3RlTGlzdFByb2Nlc3MgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgbGlzdCByZW1vdGVzIGZvciB0aGUgZ2l0IHByb2plY3QuXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IHJlbW90ZXMgPSByZW1vdGVMaXN0UHJvY2Vzcy5zcGxpdCgvXFxyP1xcbi9nKTtcblxuICBjb25zdCBmb3VuZFJlbW90ZSA9IHJlbW90ZXMuZmluZCgocm93KSA9PiByb3cuaW5kZXhPZihyZW1vdGUpID49IDApO1xuXG4gIGlmICghZm91bmRSZW1vdGUpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFlvdSBNVVNUIGhhdmUgYSByZW1vdGUgbmFtZWQgJHtyZW1vdGV9IHdoaWNoIHBvaW50cyB0byB0aGUgcmVwb3NpdG9yeSB5b3VcbiAgICAgIHdpc2ggdG8gZGVwbG95IHRvLlxuXG4gICAgICAke3JlbW90ZXMuam9pbihcIlxcblwiKX1cbiAgICBgXG4gICAgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zdCByZW1vdGVVcmwgPSBmb3VuZFJlbW90ZS5zcGxpdCgvXFxzKy9nKVsxXTtcblxuICAvLyBOb3cgY2hlY2sgdG8gbWFrZSBzdXJlIHRoZSByZXBvIHNwZWNpZmllZCBleGlzdHMgaW4gZ2l0IGFuZCBpcyBhdmFpbGFibGUgdG9cbiAgLy8gdGhlIHVzZXJcbiAgaWYgKCFnaXRDYW5BY2Nlc3NSZW1vdGUocmVtb3RlVXJsKSkge1xuICAgIGNvbnNvbGUud2FybihgXG4gICAgICBZb3UgZG8gbm90IHNlZW0gdG8gaGF2ZSBhY2Nlc3MgdG8gdGhlIHJlcG8gbGlzdGVkIGluIHRoZSBwYWNrYWdlIGpzb24gb2ZcbiAgICAgIHRoaXMgcHJvamVjdC4gUGxlYXNlIGVuc3VyZSB5b3UgaGF2ZSB3cml0ZSBhY2Nlc3MgdG8gdGhlIHJlcG86XG4gICAgICAke3JlbW90ZVVybH1cbiAgICAgIGFuZCB0aGVuIHRyeSB0byBydW4gdGhlIHJlbGVhc2UgYWdhaW4uXG4gICAgYCk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59XG4iLAogICAgImltcG9ydCB7IGV4ZWNTeW5jUmVzdWx0IH0gZnJvbSBcIi4uL2V4ZWMvZXhlYy1zeW5jLXJlc3VsdC5qc1wiO1xuXG4vKipcbiAqIFJldHJpZXZlcyB0aGUgY3VycmVudCBicmFuY2ggaW4gdGhlIGN1cnJlbnQgZ2l0IGNvbnRleHQuIFJldHVybnMgdm9pZCBpZiBhXG4gKiBicmFuY2ggY2FuIG5vdCBiZSBkZXRlcm1pbmVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2l0Q3VycmVudEJyYW5jaCgpIHtcbiAgLy8gR2V0IHRoZSBjdXJyZW50IGJyYW5jaCBuYW1lIHNvIHdlIGNhbiBvYnRhaW4gdGhlIGhhc2ggb2YgdGhlIHRpY2tldFxuICBjb25zdCByZXN1bHQgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChcImdpdFwiLCBbXG4gICAgXCJyZXYtcGFyc2VcIixcbiAgICBcIi0tYWJicmV2LXJlZlwiLFxuICAgIFwiSEVBRFwiLFxuICBdKTtcblxuICBpZiAocmVzdWx0ID09PSBudWxsKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBkZXRlcm1pbmUgY3VycmVudCBicmFuY2guXCIpO1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cblxuICBjb25zdCBicmFuY2ggPSByZXN1bHQudHJpbSgpO1xuICByZXR1cm4gYnJhbmNoIHx8IHZvaWQgMDtcbn1cbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmNSZXN1bHQgfSBmcm9tIFwiLi4vZXhlYy9leGVjLXN5bmMtcmVzdWx0LmpzXCI7XG5pbXBvcnQgeyBnaXRDdXJyZW50QnJhbmNoIH0gZnJvbSBcIi4vZ2l0LWN1cnJlbnQtYnJhbmNoLmpzXCI7XG5cbi8qKlxuICogVGhpcyBzd2l0Y2hlcyB0byB0aGUgYnJhbmNoIHNwZWNpZmllZCwgdGhlbiByZXNldCAtLWhhcmQgb3JpZ2luL2JyYW5jaCB0b1xuICogbWFrZSBzdXJlIGl0IHJlZmxlY3RzIHRoZSByZXBvLCB0aGVuIHJldHVybnMgdG8gdGhlIGN1cnJlbnQgYnJhbmNoLlxuICovXG5leHBvcnQgY29uc3QgZ2l0VXBkYXRlQnJhbmNoID0gYXN5bmMgKHJlbW90ZTogc3RyaW5nLCBicmFuY2g6IHN0cmluZykgPT4ge1xuICBjb25zdCBicmFuY2hCYWsgPSBhd2FpdCBnaXRDdXJyZW50QnJhbmNoKCk7XG5cbiAgaWYgKCFicmFuY2hCYWspIHtcbiAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgZGV0ZXJtaW5lIGN1cnJlbnQgYnJhbmNoLlwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBDaGVja291dCB0aGUgc3BlY2lmaWVkIGJyYW5jaFxuICBpZiAoKGF3YWl0IGV4ZWNTeW5jUmVzdWx0KGBnaXRgLCBbXCJjaGVja291dFwiLCBgJHticmFuY2h9YF0pKSA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IGNoZWNrb3V0IGJyYW5jaCAke2JyYW5jaH1gKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBQZXJmb3JtIHRoZSByZXNldFxuICBpZiAoXG4gICAgKGF3YWl0IGV4ZWNTeW5jUmVzdWx0KGBnaXRgLCBbXG4gICAgICBcInJlc2V0XCIsXG4gICAgICBcIi0taGFyZFwiLFxuICAgICAgYCR7cmVtb3RlfS8ke2JyYW5jaH1gLFxuICAgIF0pKSA9PT0gbnVsbFxuICApIHtcbiAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCByZXNldCBicmFuY2ggJHticmFuY2h9YCk7XG5cbiAgICAvLyBSZXR1cm4gdG8gdGhlIG9yaWdpbmFsIGJyYW5jaFxuICAgIGlmIChhd2FpdCBleGVjU3luY1Jlc3VsdChgZ2l0YCwgW1wiY2hlY2tvdXRcIiwgYCR7YnJhbmNoQmFrfWBdKSkge1xuICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgcmV0dXJuIHRvIG9yaWdpbmFsIGJyYW5jaCAke2JyYW5jaEJha31gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBSZXR1cm4gdG8gdGhlIG9yaWdpbmFsIGJyYW5jaFxuICBpZiAoKGF3YWl0IGV4ZWNTeW5jUmVzdWx0KGBnaXRgLCBbXCJjaGVja291dFwiLCBgJHticmFuY2hCYWt9YF0pKSA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IHJldHVybiB0byBvcmlnaW5hbCBicmFuY2ggJHticmFuY2hCYWt9YCk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGFyZ2V0UHJvamVjdFJlcG8oKSB7XG4gIGNvbnN0IHBhY2thZ2VKc29uID0gZnMucmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSk7XG4gIHJldHVybiBwYWNrYWdlSnNvbi5yZXBvc2l0b3J5IHx8IHt9O1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHJlbGVhc2VCdWlsZCBmcm9tIFwiLi9yZWxlYXNlLWJ1aWxkLmpzXCI7XG5pbXBvcnQgcmVsZWFzZU5vdGVzIGZyb20gXCIuL3JlbGVhc2Utdmlldy5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGRlc2NyaXB0aW9uIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlsL2Rlc2NyaXB0aW9uLmpzXCI7XG5pbXBvcnQgeyBleGVjU2NyaXB0IH0gZnJvbSBcIi4uLy4uL2xpYi9leGVjL2V4ZWMtc2NyaXB0LmpzXCI7XG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuLi8uLi9saWIvZXhlYy9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IGV4ZWNTeW5jUmVzdWx0IH0gZnJvbSBcIi4uLy4uL2xpYi9leGVjL2V4ZWMtc3luYy1yZXN1bHQuanNcIjtcbmltcG9ydCB7IGdpdENhbkFjY2Vzc1JlbW90ZSB9IGZyb20gXCIuLi8uLi9saWIvZ2l0L2dpdC1jYW4tYWNjZXNzLXJlbW90ZS5qc1wiO1xuaW1wb3J0IHsgZ2l0RW5zdXJlUmVtb3RlIH0gZnJvbSBcIi4uLy4uL2xpYi9naXQvZ2l0LWVuc3VyZS1yZW1vdGUuanNcIjtcbmltcG9ydCB7IGdpdEhhc0NoYW5nZXMgfSBmcm9tIFwiLi4vLi4vbGliL2dpdC9naXQtaGFzLWNoYW5nZXMuanNcIjtcbmltcG9ydCB7IGdpdFJldHVyblRvRGV2IH0gZnJvbSBcIi4uLy4uL2xpYi9naXQvZ2l0LXJldHVybi10by1kZXYuanNcIjtcbmltcG9ydCB7IGdpdFVwZGF0ZUJyYW5jaCB9IGZyb20gXCIuLi8uLi9saWIvZ2l0L2dpdC11cGRhdGUtYnJhbmNoLmpzXCI7XG5pbXBvcnQgeyBwcm9tcHRDb25maXJtIH0gZnJvbSBcIi4uLy4uL2xpYi9wcm9tcHQvcHJvbXB0LWNvbmZpcm0uanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3RSZXBvIH0gZnJvbSBcIi4uLy4uL2xpYi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC1yZXBvLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0VmVyc2lvbiB9IGZyb20gXCIuLi8uLi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHJlcXVpcmVkIHJlbW90ZSBuYW1lIHRoYXQgbXVzdCBiZSBwcmVzZW50IGZvciB0aGUgcmVsZWFzZSBzY3JpcHRcbiAqIHRvIHdvcmtcbiAqL1xuY29uc3QgRU5TVVJFX1JFTU9URSA9IFwib3JpZ2luXCI7XG5cbi8qKlxuICogVGhpcyBtZXRob2QgY2hlY2tzIGFsbCBvZiB0aGUgcGFja2FnZSBqc29uIHNldHRpbmdzIGFuZCBlbnN1cmVzIHRoZVxuICogcmVwb3NpdG9yaWVzIGxpc3RlZCBhcmUgdmFsaWQgZm9yIHVzZSB3aXRoaW4gdGhpcyBjb250ZXh0LlxuICovXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVJlcG9zaXRvcnkoKSB7XG4gIGNvbnN0IHByb2plY3RSZXBvID0gYXdhaXQgdGFyZ2V0UHJvamVjdFJlcG8oKTtcbiAgY29uc3QgRU5TVVJFX1JFTU9URV9QUk9KRUNUID0gcHJvamVjdFJlcG8udXJsO1xuXG4gIGlmIChcbiAgICAhcHJvamVjdFJlcG8gfHxcbiAgICAhKFxuICAgICAgcHJvamVjdFJlcG8udHlwZSAhPT0gXCJnaXRsYWJcIiB8fFxuICAgICAgcHJvamVjdFJlcG8udHlwZSAhPT0gXCJnaXRcIiB8fFxuICAgICAgcHJvamVjdFJlcG8udHlwZSAhPT0gXCJiaXRidWNrZXRcIiB8fFxuICAgICAgcHJvamVjdFJlcG8udHlwZSAhPT0gXCJzdGFzaFwiXG4gICAgKVxuICApIHtcbiAgICBjb25zb2xlLndhcm4oYFxuICAgICAgWW91IE1VU1QgaGF2ZSBhIHJlcG9zaXRvcnkgc3BlY2lmaWVkIGluIHlvdXIgcGFja2FnZSBqc29uIHRvIHVzZSB0aGVcbiAgICAgIHJlbGVhc2Ugc2NyaXB0LiBJdCBtdXN0IGJlIG9mICd0eXBlOiBnaXQnIGFuZCBoYXZlIGEgdmFsaWQgc3NoIHVybCB0b1xuICAgICAgeW91ciBnaXQgcmVwby5cblxuICAgICAgQWRkaXRpb25hbGx5LCB5b3UgTVVTVCBoYXZlIGEgcmVtb3RlIGNvbmZpZ3VyZWQgZm9yIHlvdXIgcHJvamVjdCBvZlxuICAgICAgJ29yaWdpbicgdGhhdCBtYXRjaGVzIHRoZSByZXBvIHVybCBsaXN0ZWQgaW4geW91ciBwYWNrYWdlLmpzb24uXG5cbiAgICAgIFRodXM6IFwiZ2l0IHJlbW90ZSAtdlwiIFNIT1VMRCBvdXRwdXQgYSBsaW5lIHdpdGhcbiAgICAgIG9yaWdpbiA8dXJsIGluIHlvdXIgcGFja2FnZSBqc29uIHJlcG9zaXRvcnkgZmllbGQ+IChwdXNoKVxuICAgIGApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIFdlIGNoZWNrIG91ciByZW1vdGUgdG8gZW5zdXJlIHdlIGhhdmUgYSBwcm9qZWN0IHdpdGggZXhwZWN0ZWQgdmFsdWVzXG4gIGNvbnN0IHJlbW90ZUxpc3RQcm9jZXNzID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoXCJnaXRcIiwgW1wicmVtb3RlXCIsIFwiLXZcIl0pO1xuXG4gIGlmIChyZW1vdGVMaXN0UHJvY2VzcyA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBsaXN0IHJlbW90ZXMgZm9yIHRoZSBnaXQgcHJvamVjdC5cIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc3QgcmVtb3RlcyA9IHJlbW90ZUxpc3RQcm9jZXNzLnNwbGl0KC9cXHI/XFxuL2cpO1xuXG4gIGNvbnN0IGZvdW5kUmVtb3RlID0gcmVtb3Rlcy5maW5kKFxuICAgIChyb3cpID0+XG4gICAgICByb3cuaW5kZXhPZihFTlNVUkVfUkVNT1RFKSA+PSAwICYmIHJvdy5pbmRleE9mKEVOU1VSRV9SRU1PVEVfUFJPSkVDVCkgPj0gMFxuICApO1xuXG4gIGlmICghZm91bmRSZW1vdGUpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIkNvdWxkIG5vdCBtYXRjaCBwYWNrYWdlIGpzb24gcmVwb3NpdG9yeSB0byBhbiBvcmlnaW4gcmVtb3RlIGluIGdpdCBDTElcIixcbiAgICAgIHsgcmVtb3RlTGlzdFByb2Nlc3MsIHJlbW90ZXMsIEVOU1VSRV9SRU1PVEUsIEVOU1VSRV9SRU1PVEVfUFJPSkVDVCB9XG4gICAgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBOb3cgY2hlY2sgdG8gbWFrZSBzdXJlIHRoZSByZXBvIHNwZWNpZmllZCBleGlzdHMgaW4gZ2l0IGFuZCBpcyBhdmFpbGFibGUgdG9cbiAgLy8gdGhlIHVzZXJcbiAgaWYgKCFnaXRDYW5BY2Nlc3NSZW1vdGUoRU5TVVJFX1JFTU9URV9QUk9KRUNUKSkge1xuICAgIGNvbnNvbGUud2FybihgXG4gICAgICBZb3UgZG8gbm90IHNlZW0gdG8gaGF2ZSBhY2Nlc3MgdG8gdGhlIHJlcG8gbGlzdGVkIGluIHRoZSBwYWNrYWdlIGpzb24gb2ZcbiAgICAgIHRoaXMgcHJvamVjdC4gUGxlYXNlIGVuc3VyZSB5b3UgaGF2ZSB3cml0ZSBhY2Nlc3MgdG8gdGhlIHJlcG86XG4gICAgICAke0VOU1VSRV9SRU1PVEVfUFJPSkVDVH1cbiAgICAgIGFuZCB0aGVuIHRyeSB0byBydW4gdGhlIHJlbGVhc2UgYWdhaW4uXG4gICAgYCk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gV2UgY2FuIG9ubHkgZG8gdGhpcyBvcGVyYXRpb24gaWYgdGhlcmUgaXMgbm90aGluZyB0byBjb21taXQgb3IgcHVzaFxuICAvLyBUaGlzIG9ubHkgd29ya3MgaWYgbm8gY2hhbmdlcyBhcmUgcHJlc2VudFxuICBpZiAoYXdhaXQgZ2l0SGFzQ2hhbmdlcygpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiWW91IGhhdmUgdW5jb21taXR0ZWQgY2hhbmdlcyBvciB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgcHJvamVjdCBjYW4gbm90IGJlIGRldGVybWluZWQuIFBsZWFzZSBjb21taXQgb3Igc3Rhc2ggdGhlbSBiZWZvcmUgY29udGludWluZy5cIlxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc29sZS53YXJuKFwiUmVwb3NpdG9yeSB2YWxpZGF0aW9uIGNvbXBsZXRlXCIpO1xufVxuXG4vKipcbiAqIE1ha2VzIHN1cmUgd2UgYXJlIG9uIHRoZSByZWxlYXNlIGJyYW5jaCBhbmQgY29tcGxldGVseSB1cGRhdGVkIHdpdGggdGhlXG4gKiBjb250ZW50cyBvZiBkZXYuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrb3V0UmVsZWFzZSgpIHtcbiAgLy8gTWFrZSBzdXJlIHdlJ3JlIG9uIGEgcmVsZWFzZSBicmFuY2ggdGhhdCBtYXRjaGVzIGRldlxuICBpZiAoIShhd2FpdCBhd2FpdCBleGVjU3luYyhcImdpdFwiLCBbXCJjaGVja291dFwiLCBcInJlbGVhc2VcIl0pKSkge1xuICAgIGlmICghKGF3YWl0IGV4ZWNTeW5jKFwiZ2l0XCIsIFtcImNoZWNrb3V0XCIsIFwiLWJcIiwgXCJyZWxlYXNlXCJdKSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJDb3VsZCBub3Qgc3dpdGNoIHRvIHRoZSByZWxlYXNlIGJyYW5jaC4gTWFrZSBzdXJlIHRoZSBicmFuY2ggZXhpc3RzIGxvY2FsbHkuXCJcbiAgICAgICk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICB9XG5cbiAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgdGhlIGxhdGVzdCBmcm9tIHRoZSByZW1vdGVcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoYGdpdGAsIFtcImZldGNoXCIsIGAke0VOU1VSRV9SRU1PVEV9YF0pKSkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBmZXRjaCBmcm9tIHJlbW90ZSBzZXJ2ZXJzLlwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgd2UgYXJlIGV4YWN0bHkgd2hhdCBpcyBpbiBkZXZcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoYGdpdGAsIFtcInJlc2V0XCIsIFwiLS1oYXJkXCIsIGAke0VOU1VSRV9SRU1PVEV9L2RldmBdKSkpIHtcbiAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCByZXNldCBicmFuY2ggdG8gZGV2YCk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc29sZS53YXJuKFwiQ2hlY2tlZCBvdXQgcmVsZWFzZSBicmFuY2ggYW5kIHVwZGF0ZWQgdG8gZGV2XCIpO1xufVxuXG4vKipcbiAqIERldGVybWluZXMgdGhlIGxhc3QgcmVsZWFzZSB0eXBlIGJhc2VkIG9uIHRoZSBjb250ZW50cyBwbGFjZWQgd2l0aGluIHRoZVxuICogcmVsZWFzZSBub3RlcyBmaWxlLlxuICovXG5mdW5jdGlvbiBnZXRSZWxlYXNlVHlwZSgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBub3Rlczogc3RyaW5nID0gZnMucmVhZEZpbGVTeW5jKFxuICAgICAgcGF0aC5yZXNvbHZlKFwiUkVMRUFTRV9OT1RFUy5tZFwiKSxcbiAgICAgIFwidXRmOFwiXG4gICAgKTtcbiAgICBjb25zdCBncm91cHMgPSBub3Rlc1xuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC5zcGxpdChcIlxcblwiKVxuICAgICAgLm1hcCgobGluZSkgPT4gKGxpbmUubWF0Y2goLyMjIChcXHcrKS8pIHx8IFtdKVsxXSlcbiAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgaWYgKGdyb3Vwcy5pbmNsdWRlcyhcImJyZWFraW5nXCIpKSByZXR1cm4gXCJtYWpvclwiO1xuICAgIGlmIChncm91cHMuaW5jbHVkZXMoXCJhZGRlZFwiKSkgcmV0dXJuIFwibWlub3JcIjtcbiAgICByZXR1cm4gXCJwYXRjaFwiO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGRldGVybWluZSByZWxlYXNlIHR5cGUgYWZ0ZXIgcmVsZWFzZSB3YXMgY3JlYXRlZFwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgb3VyIHJlbGVhc2Ugbm90ZXMgYW5kIGRldGVybWluZSB3aGF0IG91ciBuZXh0IHZlcnNpb24gaXMgZ29pbmcgdG8gYmVcbiAqIGJhc2VkIG9uIGNvbW1pdCBtZXNzYWdlcy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gdXBkYXRlVmVyc2lvbihhbHRlcm5hdGU/OiBzdHJpbmcpIHtcbiAgLy8gR2V0IG91ciBjdXJyZW50IHZlcnNpb24gc28gd2UgY2FuIGVuc3VyZSBvdXIgdmVyc2lvbiBjaGFuZ2VkLlxuICBjb25zdCBjdXJyZW50VmVyc2lvbiA9IGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCk7XG5cbiAgLy8gRW5zdXJlIGFsbCBmcmFnbWVudHMgYXJlIGdvaW5nIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBjb21taXRcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoXCJnaXRcIiwgW1wiYWRkXCIsIFwiLUFcIl0pKSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiQ291bGQgbm90IGVuc3VyZSBhbGwgZnJhZ21lbnRzIGFyZSBhZGRlZCBmb3IgdGhlIG5leHQgY29tbWl0LlwiXG4gICAgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBIYXZlIHRoaXMgZXhlY3V0ZSB0aGUgcmVsZWFzZS1ub3RlcyBzY3JpcHRcbiAgYXdhaXQgcmVsZWFzZU5vdGVzKHtcbiAgICBmaWxlOiBcIlJFTEVBU0VfTk9URVMubWRcIixcbiAgICB1cGRhdGVQYWNrYWdlOiB0cnVlLFxuICB9KTtcblxuICAvLyBHZXQgdGhlIHZlcnNpb24gcnVubmVyIHNob3VsZCBoYXZlIHVwZGF0ZWQgdG9cbiAgY29uc3QgbmV3VmVyc2lvbiA9IGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCk7XG5cbiAgLy8gSWYgb3VyIHZlcnNpb24gaGFzIG5vdCBjaGFuZ2VkLCB0aGVuIHRoZXJlIHdlcmUgbm8gY29tbWl0cyB3aXRoIHJlbGVhc2VcbiAgLy8gbm90ZXNcbiAgaWYgKGN1cnJlbnRWZXJzaW9uID09PSBuZXdWZXJzaW9uKSB7XG4gICAgY29uc29sZS53YXJuKGBcbiAgICAgIFRoZSByZWxlYXNlIHNjcmlwdCBkaWQgbm90IGRldGVjdCBhbnkgY2hhbmdlcyBmb3IgYSByZWxlYXNlLiBJZiB5b3UgZmluZFxuICAgICAgdGhpcyB0byBiZSBpbiBlcnJvciBvciB5b3Ugd2FudCB0byBmb3JjZSBhIG5ldyByZWxlYXNlLiBNYWtlIHNvbWUgY29tbWl0c1xuICAgICAgd2l0aCBwcm9wZXIgcmVsZWFzZSBub3RlIGZvcm1hdHRlZCBtZXNzYWdlcyB0byB0cmlnZ2VyIGEgcmVsZWFzZS5cbiAgICBgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBpZiAoYWx0ZXJuYXRlKSB7XG4gICAgaWYgKGdldFJlbGVhc2VUeXBlKCkgIT09IFwicGF0Y2hcIikge1xuICAgICAgY29uc29sZS5lcnJvcihgXG4gICAgICAgIENhbm5vdCBjcmVhdGUgYSByZWxlYXNlIGZvciBhbiBhbHRlcm5hdGUgYnJhbmNoIHRoYXQgaXMgbm90IGEgc2ltcGxlXG4gICAgICAgIHBhdGNoLiBGZWF0dXJlcyBhbmQgYnJlYWtpbmcgY2hhbmdlcyBjYW4gT05MWSBiZSBtYWRlIG9uIHRoZSBtYWluIGJyYW5jaCBvZlxuICAgICAgICBkZXZlbG9wbWVudC5cbiAgICAgIGApO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCB0aGUgdmVyc2lvbiBnZW5lcmF0ZWQgYnkgdGhlIHJ1bm5lciByZWxlYXNlIG5vdGVzIGNvbW1pdFxuICBjb25zdCBsYXN0Q29tbWl0UHJvY2VzcyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwiZ2l0XCIsIFtcbiAgICBcImxvZ1wiLFxuICAgIFwiLTFcIixcbiAgICBcIi0tcHJldHR5PSVCXCIsXG4gIF0pO1xuXG4gIGlmIChsYXN0Q29tbWl0UHJvY2VzcyA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCByZWFkIHRoZSBsYXN0IGNvbW1pdCB2ZXJzaW9uIGluZm9ybWF0aW9uXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IHZlcnNpb24gPSAoXG4gICAgbGFzdENvbW1pdFByb2Nlc3MudHJpbSgpLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCJyZWxlYXNlIFwiKVsxXSB8fCBcIlwiXG4gICkudHJpbSgpO1xuXG4gIGlmICghdmVyc2lvbikge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiQ291bGQgbm90IGRldGVybWluZSByZWxlYXNlIHZlcnNpb24gZnJvbSB0aGUgbGFzdCBjb21taXQ6XFxuXFxuXCIsXG4gICAgICBsYXN0Q29tbWl0UHJvY2Vzcy50b1N0cmluZygpLFxuICAgICAgXCJcXG5cXG5cIlxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gVXBkYXRlIHRoZSByZWxlYXNlIHZlcnNpb24ganNvbiBpbiB0aGUgc291cmNlXG4gIGlmIChmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcInVpL3JlbGVhc2UuanNvblwiKSkpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudHMgPSBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwidWkvcmVsZWFzZS5qc29uXCIpKTtcbiAgICAgIGNvbnRlbnRzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgZnMud3JpdGVKU09OU3luYyhwYXRoLnJlc29sdmUoXCJ1aS9yZWxlYXNlLmpzb25cIiksIGNvbnRlbnRzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJDb3VsZCBub3QgdXBkYXRlIHRoZSByZWxlYXNlLmpzb24gZmlsZSB3aXRoIGN1cnJlbnQgbGlicmFyeSB2ZXJzaW9uLlwiXG4gICAgICApO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgY2hhbmdlcyB0byB0aGUgcmVsZWFzZSBqc29uIGZpbGVcbiAgICBpZiAoIShhd2FpdCBleGVjU3luYyhcImdpdFwiLCBbXCJhZGRcIiwgXCItQVwiXSkpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiQ291bGQgbm90IGVuc3VyZSB0aGUgcmVsZWFzZSBqc29uIHdhcyB1cGRhdGVkIGZvciB0aGUgbmV3IHZlcnNpb24uXCJcbiAgICAgICk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuXG4gICAgLy8gQW1lbmQgdGhlIHJlbGVhc2UgY29tbWl0XG4gICAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoXCJnaXRcIiwgW1wiY29tbWl0XCIsIFwiLS1hbWVuZFwiLCBcIi0tbm8tZWRpdFwiXSkpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiQ291bGQgbm90IGFtZW5kIHRoZSByZWxlYXNlIGNvbW1pdCB0byBpbmNsdWRlIHRoZSByZWxlYXNlIGpzb24gZmlsZS5cIlxuICAgICAgKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH1cblxuICBpZiAodmVyc2lvbi5pbmNsdWRlcygnXCInKSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiVGhlIHVwZGF0ZSB2ZXJzaW9uIGdlbmVyYXRlZCBpcyBpbnZhbGlkIGFzIGl0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVyc1wiLFxuICAgICAgeyB2ZXJzaW9uIH1cbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnNvbGUud2FybihcIlVwZGF0aW5nIHZlcnNpb24gdG9cIiwgeyB2ZXJzaW9uIH0pO1xuICByZXR1cm4gdmVyc2lvbjtcbn1cblxuLyoqXG4gKiBUaGlzIGdlbmVyYXRlcyBhIHRhZyBmb3IgdGhlIGdpdmVuIHJlbGVhc2VcbiAqL1xuYXN5bmMgZnVuY3Rpb24gdXBkYXRlVGFnKHZlcnNpb246IHN0cmluZykge1xuICAvLyBUYWcgdGhlIGNvbW1pdCB3aXRoIHRoZSB2ZXJzaW9uIG51bWJlclxuICBpZiAoXG4gICAgIShhd2FpdCBleGVjU3luYyhgZ2l0YCwgW2B0YWdgLCBcIi1hXCIsIHZlcnNpb24sIFwiLW1cIiwgYFJlbGVhc2UgJHt2ZXJzaW9ufWBdKSlcbiAgKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IG1ha2UgdGFnIGZvciBnaXQgY29tbWl0XCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgYWxsIGFjdGlvbnMgdG8gcHVzaGluZyB0aGUgZ2VuZXJhdGVkIHJlc3VsdHMgdG8gdGhlIHJlbW90ZVxuICogcmVwb3NpdG9yeVxuICovXG5hc3luYyBmdW5jdGlvbiBwdXNoVG9SZW1vdGUoXG4gIHJlbW90ZTogc3RyaW5nLFxuICB2ZXJzaW9uOiBzdHJpbmcsXG4gIGZyb21CcmFuY2g6IHN0cmluZyxcbiAgdG9CcmFuY2g6IHN0cmluZyxcbiAgZm9yY2U6IGJvb2xlYW5cbikge1xuICAvLyBQdXNoIHRoZSBjb21taXQgdG8gcmVtb3RlIHJlbGVhc2UgYnJhbmNoXG4gIGlmIChcbiAgICAhKGF3YWl0IGV4ZWNTeW5jKGBnaXRgLCBbXG4gICAgICBcInB1c2hcIixcbiAgICAgIGZvcmNlID8gXCItZlwiIDogdm9pZCAwLFxuICAgICAgcmVtb3RlLFxuICAgICAgYCR7ZnJvbUJyYW5jaH06JHt0b0JyYW5jaH1gLFxuICAgIF0pKVxuICApIHtcbiAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBwdXNoIHJlbGVhc2UgY29tbWl0IHRvICR7cmVtb3RlfWApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIFB1c2ggdGhlIHRhZyB0byByZW1vdGVcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoYGdpdGAsIFtcInB1c2hcIiwgcmVtb3RlLCB2ZXJzaW9uXSkpKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IHB1c2ggdGFnIHRvIHRoZSByZW1vdGUgcmVwb3NpdG9yeVwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHdpbGwgZW5zdXJlIGVhY2ggcmVtb3RlIGlzIGFjY2Vzc2libGUgYnkgdGhlIHVzZXIgYW5kIHdpbGwgcHVzaCB0aGVcbiAqIHJlbGVhc2UgYnJhbmNoIHRvIGVhY2ggb2YgdGhlIHNwZWNpZmllZCByZW1vdGVzIGF0IHRoZSBwb3RlbnRpYWwgdGFyZ2V0XG4gKiBicmFuY2g6XG4gKlxuICogcmVtb3RlOmZyb21CcmFuY2g6dG9CcmFuY2g6Zm9yY2VcbiAqXG4gKiBJZiB0aGUgYnJhbmNoIGlzIG5vdCBzcGVjaWZpZWQsIHRoZSBicmFuY2ggc3BlY2lmaWVkIGZvciB0aGlzIHByb2plY3Qgd2lsbFxuICogYmUgdXNlZC5cbiAqXG4gKiBUaGUgXCJmb3JjZVwiIG9wdGlvbiBpcyBsaXRlcmFsLiBVc2UgdGhlIHdvcmQgXCJmb3JjZVwiIHRvIHRyaWdnZXIgYSBmb3JjZSBwdXNoLlxuICovXG5hc3luYyBmdW5jdGlvbiByZWxlYXNlQWRkaXRpb25hbFJlbW90ZXMoYWRkUmVtb3Rlczogc3RyaW5nW10sIHZlcnNpb246IHN0cmluZykge1xuICBpZiAoYWRkUmVtb3RlcyAmJiBhZGRSZW1vdGVzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBzaG91bGRSZWxlYXNlUmVtb3RlcyA9IGF3YWl0IHByb21wdENvbmZpcm0oXG4gICAgICBkZXNjcmlwdGlvbmBcbiAgICAgICAgVGhlIGJ1aWxkIGFuZCByZWxlYXNlIHdhcyBzdWNjZXNzZnVsLCB3b3VsZCB5b3UgbGlrZSB0byByZWxlYXNlIHRvIHRoZVxuICAgICAgICBzcGVjaWZpZWQgYWRkaXRpb25hbCByZW1vdGVzP1xuXG4gICAgICAgICR7Y2hhbGsuY3lhbkJyaWdodEJvbGQoYWRkUmVtb3Rlcy5qb2luKFwiXFxuXCIpKX1cbiAgICAgIGBcbiAgICApO1xuXG4gICAgaWYgKCFzaG91bGRSZWxlYXNlUmVtb3RlcykgcmV0dXJuO1xuICB9XG5cbiAgLy8gRG8gYSBmZXRjaCBhZ2FpbiB0byBlbnN1cmUgd2UgaGF2ZSB0aGUgbGF0ZXN0IGZyb20gdGhlIHJlbW90ZVxuICBpZiAoIShhd2FpdCBleGVjU3luYyhgZ2l0YCwgW1wiZmV0Y2hcIiwgRU5TVVJFX1JFTU9URV0pKSkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBmZXRjaCBmcm9tIHJlbW90ZSBzZXJ2ZXJzLlwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBmb3IgKGNvbnN0IHJlbW90ZUluZm8gb2YgYWRkUmVtb3Rlcykge1xuICAgIC8vIFB1c2ggdGhlIHJlbGVhc2UgdG8gdGhlIHNwZWNpZmllZCByZW1vdGVzXG4gICAgY29uc3QgW3JlbW90ZSwgZnJvbUJyYW5jaCwgdG9CcmFuY2gsIGZvcmNlXSA9IHJlbW90ZUluZm8uc3BsaXQoXCI6XCIpO1xuICAgIC8vIE1ha2Ugc3VyZSB0aGUgZGV2IGhhcyBhY2Nlc3MgdG8gdGhlIHNwZWNpZmllZCByZW1vdGVcbiAgICBhd2FpdCBnaXRFbnN1cmVSZW1vdGUocmVtb3RlKTtcbiAgICAvLyBSZXNldCB0aGUgZnJvbUJyYW5jaCB0byBpdCdzIGxhdGVzdCBmcm9tIG9yaWdpblxuICAgIGF3YWl0IGdpdFVwZGF0ZUJyYW5jaChFTlNVUkVfUkVNT1RFLCBmcm9tQnJhbmNoIHx8IFwibWFzdGVyXCIpO1xuICAgIC8vIERlcGxveSB0byB0aGUgY29uZmlndXJlZCBicmFuY2ggb3IgdG8gbWFzdGVyXG4gICAgYXdhaXQgcHVzaFRvUmVtb3RlKFxuICAgICAgcmVtb3RlLFxuICAgICAgdmVyc2lvbixcbiAgICAgIGZyb21CcmFuY2ggfHwgXCJtYXN0ZXJcIixcbiAgICAgIHRvQnJhbmNoIHx8IFwibWFzdGVyXCIsXG4gICAgICBmb3JjZSA9PT0gXCJmb3JjZVwiXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgYWxsIG9mIHRoZSBidWlsZCBhY3Rpb25zIHRvIGdlbmVyYXRlIGFsbCBmcmFnbWVudHMgdGhlIHByb2plY3RcbiAqIHdpbGwgZ2VuZXJhdGUgZm9yIGRpc3RyaWJ1dGlvbnMgYW5kIHRoZW4gd2lsbCBwdXNoIHRob3NlIGZyYWdtZW50cyBpbnRvIHRoZVxuICogcmVwby5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gYnVpbGRBbmRQdXNoKGFkZFJlbW90ZXM6IHN0cmluZ1tdKSB7XG4gIC8vIFByb2Nlc3MgYW5kIHNldCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBcInByb2R1Y3Rpb25cIjtcblxuICAvLyBNYWtlIHN1cmUgd2UgY2FuIG1ha2UgY2FsbHMgdG8gdGhlIHJlcG9cbiAgYXdhaXQgdmFsaWRhdGVSZXBvc2l0b3J5KCk7XG4gIC8vIE1vdmUgb3VyIGdpdCBjb250ZXh0IHRvIHRoZSByZWxlYXNlIGJyYW5jaFxuICBhd2FpdCBjaGVja291dFJlbGVhc2UoKTtcbiAgLy8gQnVpbGQgdGhlIHByb2plY3QgZnJhZ21lbnRzXG4gIGF3YWl0IHJlbGVhc2VCdWlsZCgpO1xuICAvLyBHZXQgdGhlIG5ldyB2ZXJzaW9uIHRoaXMgcmVsZWFzZSBpcyBnb2luZyB0byBiZWNvbWUuXG4gIGNvbnN0IHZlcnNpb24gPSBhd2FpdCB1cGRhdGVWZXJzaW9uKCk7XG4gIC8vIFRhZyB0aGUgcmVsZWFzZSBjb21taXQgd2l0aCB0aGUgbGF0ZXN0IHZlcnNpb25cbiAgYXdhaXQgdXBkYXRlVGFnKHZlcnNpb24pO1xuICAvLyBQdXNoIGV2ZXJ5dGhpbmcgd2UgaGF2ZSB1cGRhdGVkIHdpdGggZ2l0IHRvIHRoZSByZW1vdGUgcmVwb1xuICBhd2FpdCBwdXNoVG9SZW1vdGUoRU5TVVJFX1JFTU9URSwgdmVyc2lvbiwgXCJyZWxlYXNlXCIsIFwicmVsZWFzZVwiLCB0cnVlKTtcblxuICAvLyBBc2sgdG8gcnVuIHRoZSBwciByZWxlYXNlIHNjcmlwdFxuICBjb25zdCBzaG91bGRQciA9IGF3YWl0IHByb21wdENvbmZpcm0oXCJXb3VsZCB5b3UgbGlrZSB0byBydW4gcHIgcmVsZWFzZT9cIik7XG5cbiAgaWYgKHNob3VsZFByKSB7XG4gICAgLy8gQXR0ZW1wdCB0byBydW4gcHIgcmVsZWFzZS4gV2UgZG9uJ3QgY2FyZSBpZiBpdCB3b3JrcyBvciBub3QgYXMgdGhpcyBpcyBhblxuICAgIC8vIG9wdGlvbmFsIGJyYW5jaCB0YWtlbiBieSB0aGUgdXNlciBhbnl3aG8uXG4gICAgYXdhaXQgZXhlY1NjcmlwdChcInByXCIsIFtcInJlbGVhc2VcIl0pO1xuICB9XG5cbiAgLy8gQXNrIHRvIGRlcGxveSBhZGRpdGlvbmFsIHNwZWNpZmllZCByZW1vdGVzXG4gIGF3YWl0IHJlbGVhc2VBZGRpdGlvbmFsUmVtb3RlcyhhZGRSZW1vdGVzLCB2ZXJzaW9uKTtcbiAgLy8gTm93IHdlIGFzayB0byByZXR1cm4gdG8gb3JpZ2luYWwgYnJhbmNoXG4gIGF3YWl0IGdpdFJldHVyblRvRGV2KHRydWUpO1xufVxuXG4vKipcbiAqIEVudHJ5IG1ldGhvZCBmb3IgdGhlIHJlbGVhc2UgcHJvY2Vzc1xuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oYWRkUmVtb3Rlczogc3RyaW5nW10pIHtcbiAgY29uc29sZS53YXJuKFwiRXhlY3V0aW5nIHJlbGVhc2Ugc2NyaXB0XCIpO1xuICBidWlsZEFuZFB1c2goYWRkUmVtb3Rlcyk7XG59XG4iLAogICAgImltcG9ydCB7IHJlbGVhc2VMaWJyYXJ5VHlwZXMgfSBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL2xpYnJhcnkvdml0ZS9yZWxlYXNlLWxpYnJhcnktdHlwZXMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKCkge1xuICBhd2FpdCByZWxlYXNlTGlicmFyeVR5cGVzKCk7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBJZ25vcmUgZnJvbSBcImlnbm9yZVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uL2xpYi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgd2FpdCB9IGZyb20gXCIuLi9saWIvdXRpbC93YWl0LmpzXCI7XG5cbmNvbnN0IGdpdElnbm9yZVBhdGggPSBwYXRoLnJlc29sdmUoXCIuZ2l0aWdub3JlXCIpO1xubGV0IGlnbm9yZSA9IElnbm9yZS5kZWZhdWx0KCk7XG5cbmlmIChmcy5leGlzdHNTeW5jKGdpdElnbm9yZVBhdGgpKSB7XG4gIGlnbm9yZSA9IGlnbm9yZS5hZGQoZnMucmVhZEZpbGVTeW5jKGdpdElnbm9yZVBhdGgpLnRvU3RyaW5nKCkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHR5cGVzY3JpcHQgdHlwZSBjb21waWxhdGlvbiB3aXRob3V0IGVtaXR0aW5nIGFueXRoaW5nLiBUaGlzIGNhbiBiZVxuICogdXNlZCB0byBmaW5kIGVycm9ycyBpbiB0aGUgcHJvamVjdCBiZWZvcmUgYSByZWxlYXNlIGlzIGF0dGVtcHRlZC4gT3IgeW91IGNhblxuICogcnVuIHRoaXMgYXMgbm9kZW1vbiBwcm9jZXNzIHRvIGZpbmQgZXJyb3JzIGFzIGRldmVsb3BtZW50IGhhcHBlbnMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJ1blR5cGVzY3JpcHQobW9kZTogc3RyaW5nKSB7XG4gIC8vIEJ1aWxkIGRlY2xhcmF0aW9uIGZpbGVzIGZvciB0aGUgbGlicmFyeSBvbmx5XG4gIGNvbnN0IHRzQ29uZmlnID0gZnMucmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLmpzb25cIikpO1xuICB0c0NvbmZpZy5leGNsdWRlID0gdHNDb25maWcuZXhjbHVkZSB8fCBbXTtcbiAgdHNDb25maWcuaW5jbHVkZSA9ICh0c0NvbmZpZz8uaW5jbHVkZSB8fCBbXSkuZmlsdGVyKFxuICAgIChwOiBzdHJpbmcpID0+ICFpZ25vcmUuaWdub3JlcyhwYXRoLnJlbGF0aXZlKFwiLi9cIiwgcCkpXG4gICk7XG4gIC8vIHRzQ29uZmlnLmV4Y2x1ZGUucHVzaChcImxpYi9zZXJ2ZXJcIik7XG4gIGZzLndyaXRlSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpLCB0c0NvbmZpZyk7XG4gIC8vIEVuc3VyZSB0aGUgZmlsZSBzeXN0ZW0gaGFzIGZsdXNoZWQgdGhlIHRlbXAgZmlsZSB0byBkaXNrXG4gIGF3YWl0IHdhaXQoNTAwKTtcblxuICAvLyBNYWtlIGEgY2xlYW4gdXAgcm91dGluZSBmb3Igd2F0Y2ggbW9kZVxuICBpZiAobW9kZSA9PT0gXCJ3YXRjaFwiKSB7XG4gICAgY29uc3QgaGFuZGxlRXhpdCA9IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnNvbGUud2FybihcIkV4aXQgVFMgcHJvY2Vzc1wiKTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIikpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8vIE5PT1BcbiAgICAgIH1cblxuICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgIH07XG5cbiAgICAvLyBDYXRjaCB3aGVuIGFwcCBpcyBjbG9zaW5nXG4gICAgcHJvY2Vzcy5vbihcImV4aXRcIiwgaGFuZGxlRXhpdCk7XG4gICAgLy8gQ2F0Y2ggY3RybCtjIGV2ZW50XG4gICAgcHJvY2Vzcy5vbihcIlNJR0lOVFwiLCBoYW5kbGVFeGl0KTtcbiAgICAvLyBDYXRjaCBcImtpbGwgcGlkXCIgKGZvciBleGFtcGxlOiBub2RlbW9uIHJlc3RhcnQpXG4gICAgcHJvY2Vzcy5vbihcIlNJR1VTUjFcIiwgaGFuZGxlRXhpdCk7XG4gICAgcHJvY2Vzcy5vbihcIlNJR1VTUjJcIiwgaGFuZGxlRXhpdCk7XG4gICAgcHJvY2Vzcy5vbihcIlNJR1RFUk1cIiwgaGFuZGxlRXhpdCk7XG4gICAgLy8gQ2F0Y2ggdW5jYXVnaHQgZXhjZXB0aW9uc1xuICAgIHByb2Nlc3Mub24oXCJ1bmNhdWdodEV4Y2VwdGlvblwiLCBoYW5kbGVFeGl0KTtcbiAgfVxuICBpZiAoXG4gICAgIWV4ZWNTeW5jKFwidHNjXCIsIFtcbiAgICAgIFwiLWRcIixcbiAgICAgIG1vZGUgPT09IFwid2F0Y2hcIiA/IFwiLS13YXRjaFwiIDogXCJcIixcbiAgICAgIFwiLS1pbmNyZW1lbnRhbFwiLFxuICAgICAgXCItLW5vZW1pdFwiLFxuICAgICAgXCItLXByZXR0eVwiLFxuICAgICAgXCItLXRzQnVpbGRJbmZvRmlsZVwiLFxuICAgICAgcGF0aC5yZXNvbHZlKFwibm9kZV9tb2R1bGVzLy5jYWNoZS90c2MvdHNjLnRzYnVpbGRpbmZvXCIpLFxuICAgICAgXCItLW91dERpclwiLFxuICAgICAgcGF0aC5yZXNvbHZlKFwiZGlzdFwiKSxcbiAgICAgIFwiLS1wcm9qZWN0XCIsXG4gICAgICBwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIiksXG4gICAgXSlcbiAgKSB7XG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGNvbXBpbGUgdHlwZSBkZWNsYXJhdGlvbnNcIik7XG4gICAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIikpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IGVzbGludFRhcmdldHMgPSAodHNDb25maWc/LmluY2x1ZGUgfHwgW10pXG4gICAgLmZpbHRlcigocDogc3RyaW5nKSA9PiAhaWdub3JlLmlnbm9yZXMocGF0aC5yZWxhdGl2ZShcIi4vXCIsIHApKSlcbiAgICAubWFwKChwOiBzdHJpbmcpID0+IHBhdGgucmVzb2x2ZShwKSlcbiAgICAuZmlsdGVyKChwOiBzdHJpbmcpID0+IGZzLmV4aXN0c1N5bmMocCkgJiYgIXAuaW5jbHVkZXMoXCJub2RlX21vZHVsZXNcIikpO1xuXG4gIGlmIChlc2xpbnRUYXJnZXRzLmxlbmd0aCA+IDApIHtcbiAgICBpZiAoXG4gICAgICAhZXhlY1N5bmMoXG4gICAgICAgIC8vIGBlc2xpbnQgJHtlc2xpbnRUYXJnZXRzLmpvaW4oXCIgXCIpfSAtYyAke3BhdGgucmVzb2x2ZShcbiAgICAgICAgLy8gICBcIi5lc2xpbnRyY1wiXG4gICAgICAgIC8vICl9IC0tZXh0IC50cyAtLWV4dCAudHN4YFxuICAgICAgICBcImVzbGludFwiLFxuICAgICAgICBbXG4gICAgICAgICAgLi4uZXNsaW50VGFyZ2V0cyxcbiAgICAgICAgICBcIi1jXCIsXG4gICAgICAgICAgcGF0aC5yZXNvbHZlKFwiLmVzbGludHJjXCIpLFxuICAgICAgICAgIFwiLS1leHRcIixcbiAgICAgICAgICBcIi50c1wiLFxuICAgICAgICAgIFwiLS1leHRcIixcbiAgICAgICAgICBcIi50c3hcIixcbiAgICAgICAgXVxuICAgICAgKVxuICAgICkge1xuICAgICAgY29uc29sZS53YXJuKFwiRmFpbGVkIGVzbGludCBjaGVja3MuXCIpO1xuICAgICAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIikpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfVxuXG4gIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKG1vZGU6IHN0cmluZykge1xuICBhd2FpdCBydW5UeXBlc2NyaXB0KG1vZGUpO1xufVxuIiwKICAgICJpbXBvcnQgcnVuQXBwU2VydmVyIGZyb20gXCIuLi8uLi9saWIvYnVpbGQvd2ViLWFwcC92aXRlL3J1bi1hcHAtc2VydmVyLmpzXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi9saWIvdXRpbC9jaGFsay5qc1wiO1xuXG4vKipcbiAqIFRoaXMgc2ltcGx5IGZpcmVzIHVwIHRoZSBhcHAgc2VydmVyIHRvIHJ1bi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKCkge1xuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIlN0YXJ0aW5nIHNlcnZlci4uLlwiKSk7XG4gIGF3YWl0IHJ1bkFwcFNlcnZlcigpO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vbGliL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5cbi8qKlxuICogU3RhcnRzIGEgc2VydmVyIHdpdGggYSBnaXZlbiBlbnRyeSBwb2ludC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gc3RhcnRTZXJ2ZXIocGF0aFRvU2VydmVyOiBzdHJpbmcpIHtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGhUb1NlcnZlcikpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIkF0dGVtcHRlZCB0byBzdGFydCBhIHNlcnZlciBidXQgbm8gc2VydmVyIGRpc3RyaWJ1dGlvbiB3YXMgZm91bmQgYXRcIixcbiAgICAgIHBhdGhUb1NlcnZlclxuICAgICk7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgYXdhaXQgZXhlY1N5bmMoYGJ1bmAsIFtgJHtwYXRoVG9TZXJ2ZXJ9YF0pO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBTdGFydHMgdGhlIERldm9wcyBBUEkgaG9zdGluZyBpZiBhIERldm9wcyBhcHAgZGlzdHJpYnV0aW9uIGlzIGF2YWlsYWJsZVxuICovXG5hc3luYyBmdW5jdGlvbiBzdGFydERldm9wc0FQSSgpIHtcbiAgY29uc3QgcGF0aFRvU2VydmVyID0gcGF0aC5yZXNvbHZlKFwiZG9jcy9pbmRleC5qc1wiKTtcbiAgcmV0dXJuIGF3YWl0IHN0YXJ0U2VydmVyKHBhdGhUb1NlcnZlcik7XG59XG5cbi8qKlxuICogU3RhcnRzIHRoZSB3ZWIgYXBwIGlmIGEgd2ViIGFwcCBzZXJ2ZXIgaXMgYXZhaWxhYmxlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0V2ViQXBwKCkge1xuICAvLyBUZWxsIHRoZSBwcm9jZXNzIHdoZXJlIHRvIGZpbmQgaXQncyByZXNvdXJjZXMgdGhhdCB3ZXJlIHNwZWNpZmllZCBpbiBjbGllbnRcbiAgcHJvY2Vzcy5lbnYuUkVTT1VSQ0VfUEFUSCA9IHBhdGgucmVzb2x2ZShcImRpc3QvYXBwL2NsaWVudFwiKTtcbiAgLy8gR2V0IHRoZSBwYXRoIHRvIG91ciBzZXJ2ZXIgYnVuZGxlXG4gIGNvbnN0IHBhdGhUb1NlcnZlciA9IHBhdGgucmVzb2x2ZShcImRpc3QvYXBwL3NlcnZlci9pbmRleC5qc1wiKTtcbiAgLy8gU3RhcnQgdGhlIHNlcnZlciBkaXN0cmlidXRpb25cbiAgcmV0dXJuIGF3YWl0IHN0YXJ0U2VydmVyKHBhdGhUb1NlcnZlcik7XG59XG5cbi8qKlxuICogRW50cnkgbWV0aG9kIGZvciB0aGUgc3RhcnQgY29tbWFuZFxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4odGFyZ2V0OiBzdHJpbmcsIF9vcHRpb25zOiBhbnkpIHtcbiAgLy8gRGVmYXVsdCBvdXIgcG9ydCB0byBhIHByb3BlciBIVFRQIHBvcnQgcHJvdG9jb2xcbiAgY29uc3QgeyBQT1JUID0gXCI4MFwiIH0gPSBwcm9jZXNzLmVudjtcbiAgcHJvY2Vzcy5lbnYuUE9SVCA9IFBPUlQ7XG5cbiAgbGV0IHNlcnZlclJ1bm5pbmcgPSBmYWxzZTtcblxuICBzd2l0Y2ggKHRhcmdldCkge1xuICAgIGNhc2UgXCJhcHBcIjpcbiAgICAgIHNlcnZlclJ1bm5pbmcgPSBhd2FpdCBzdGFydFdlYkFwcCgpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwiZGV2b3BzXCI6XG4gICAgICBzZXJ2ZXJSdW5uaW5nID0gYXdhaXQgc3RhcnREZXZvcHNBUEkoKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgLy8gRG8gbm90aGluZyBpZiBhIHByb3BlciB0YXJnZXQgd2FzIG5vdCBwaWNrZWRcbiAgICBkZWZhdWx0OlxuICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJJbnZhbGlkIHRhcmdldCBmb3Igc3RhcnQgc2NyaXB0IHNwZWNpZmllZFwiLCB0YXJnZXQpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gIH1cblxuICAvLyBJZiB3ZSBoYXZuJ3QgYmVlbiBhYmxlIHRvIHBpY2sgYSBzZXJ2ZXIgYmFzZWQgb24gdGFyZ2V0LCB0aGVuIHdlIGF0dGVtcHQgdG8gc3RhcnQgdGhlIHNlcnZlciB2aWEgZGVmYXVsdCBiZWhhdmlvclxuICBpZiAoIXNlcnZlclJ1bm5pbmcpIHtcbiAgICBzZXJ2ZXJSdW5uaW5nID0gYXdhaXQgc3RhcnRXZWJBcHAoKTtcbiAgICBpZiAoc2VydmVyUnVubmluZykgcmV0dXJuO1xuICAgIHNlcnZlclJ1bm5pbmcgPSBhd2FpdCBzdGFydERldm9wc0FQSSgpO1xuICAgIGlmIChzZXJ2ZXJSdW5uaW5nKSByZXR1cm47XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGV4ZWNTY3JpcHRYIH0gZnJvbSBcIi4uL2V4ZWMvZXhlYy1zY3JpcHR4LmpzXCI7XG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuLi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuVGVzdHMoKSB7XG4gIGNvbnN0IHRzY29uZmlnUGF0aCA9IHBhdGgucmVzb2x2ZShcInRzY29uZmlnLmpzb25cIik7XG5cbiAgaWYgKCFmcy5leGlzdHNTeW5jKHRzY29uZmlnUGF0aCkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUYXJnZXQgcHJvamVjdCBkb2VzIG5vdCBoYXZlIGEgVFNDb25maWdcIik7XG4gIH1cblxuICAvLyBTZWUgaWYgd2UgYXJlIHJ1bm5pbmcgdGhlIHVuaXQgdGVzdHMgd2l0aCB0aGUgbmVlZCB0byBhdHRhY2ggYSBkZWJ1ZyBjb25zb2xlXG4gIGNvbnN0IGRlYnVnID0gQm9vbGVhbihwcm9jZXNzLmVudi5ERUJVRyk7XG4gIGNvbnN0IHBhdHRlcm4gPSBwcm9jZXNzLmVudi5QQVRURVJOO1xuICBjb25zdCB3YXRjaCA9IHByb2Nlc3MuZW52LldBVENIO1xuICBjb25zdCBsZXNzID0gcHJvY2Vzcy5lbnYuTEVTUztcbiAgLy8gUnVuIHByZXR0aWVyIG9uY2VcbiAgY29uc3QgamVzdENvbmZpZyA9IHBhdGgucmVzb2x2ZShcImplc3QuY29uZmlnLmpzXCIpO1xuICAvLyBTdG9wIGV4ZWNTeW5jIGNhdWdodCBlcnJvcnMuIFdlIHdhbnQgamVzdCB0byBoYW5kbGUgdGhvc2UgbG9ncyBmb3IgdXNcbiAgZXhlY1N5bmMuc2lsZW50ID0gdHJ1ZTtcblxuICB0cnkge1xuICAgIGlmIChkZWJ1Zykge1xuICAgICAgZXhlY1N5bmMoXCJub2RlXCIsIFtcbiAgICAgICAgXCItLWluc3BlY3QtYnJrXCIsXG4gICAgICAgIHBhdGgucmVzb2x2ZShcIm5vZGVfbW9kdWxlcy8uYmluL2plc3RcIiksXG4gICAgICAgIFwiLS1ydW5JbkJhbmRcIixcbiAgICAgICAgd2F0Y2ggPyBcIi0td2F0Y2hBbGxcIiA6IFwiXCIsXG4gICAgICAgIFwiLS12ZXJib3NlXCIsXG4gICAgICAgIGxlc3MgPT09IFwidHJ1ZVwiID8gXCJmYWxzZVwiIDogdm9pZCAwLFxuICAgICAgICBcIi0tY29sb3JzXCIsXG4gICAgICAgIFwiLS1jb25maWdcIixcbiAgICAgICAgamVzdENvbmZpZyxcbiAgICAgICAgcGF0dGVybiA/IGAtLXRlc3ROYW1lUGF0dGVybiAke3BhdHRlcm59YCA6IFwiXCIsXG4gICAgICBdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhlY1NjcmlwdFgoXG4gICAgICAgIFtcbiAgICAgICAgICBcImplc3RcIixcbiAgICAgICAgICB3YXRjaCA/IFwiLS13YXRjaEFsbFwiIDogXCJcIixcbiAgICAgICAgICBcIi0tdmVyYm9zZVwiLFxuICAgICAgICAgIGxlc3MgPT09IFwidHJ1ZVwiID8gXCJmYWxzZVwiIDogdm9pZCAwLFxuICAgICAgICAgIFwiLS1jb2xvcnNcIixcbiAgICAgICAgICBcIi0tY29uZmlnXCIsXG4gICAgICAgICAgamVzdENvbmZpZyxcbiAgICAgICAgICBwYXR0ZXJuID8gYC0tdGVzdE5hbWVQYXR0ZXJuPSR7cGF0dGVybn1gIDogXCJcIixcbiAgICAgICAgXSxcbiAgICAgICAgLy8gVGhlIGJ1biBmbGFnIGN1cnJlbnRseSBjYXVzZXMgamVzdCB0byBicmVhayB0aGUgdHMtamVzdCB0eXBlIGNoZWNrc1xuICAgICAgICB7XG4gICAgICAgICAgZXhjbHVkZUJ1bkZsYWc6IHRydWUsXG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIlRlc3RzIGZhaWxlZC4gUGxlYXNlIGxvb2sgYXQgbG9ncyB0byBzZWUgdGhlIGVycm9ycyBkaXNjb3ZlcmVkXCJcbiAgICApO1xuICB9XG5cbiAgY29uc29sZS53YXJuKGNoYWxrLmN5YW5CcmlnaHQoXCJUZXN0cyBjb21wbGV0ZVwiKSk7XG59XG4iLAogICAgImltcG9ydCB7IHJ1blRlc3RzIH0gZnJvbSBcIi4uLy4uL2xpYi91bml0LXRlc3QvcnVuLXRlc3RzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgY29uc29sZS53YXJuKFwiUnVubmluZyB1bml0IHRlc3RzLi4uXCIpO1xuICAvLyBFeGVjdXRlIHRoZSB0ZXN0c1xuICBhd2FpdCBydW5UZXN0cygpO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHJtcmYgZnJvbSBcInJpbXJhZlwiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vLi4vbGliL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5cbi8qKlxuICogVGhpcyBzY3JpcHQgY2xlYW5zIG91dCBzdG9yeWJvb2sgY2FjaGluZyB0aGF0IGNhdXNlcyB1cGRhdGVzIHRvIGJlIGhpZGRlblxuICogd2hlbiBlZGl0aW5nIHN0b3J5Ym9vayBjb25maWd1cmF0aW9uLlxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oKSB7XG4gIGNvbnN0IGNhY2hlID0gcGF0aC5yZXNvbHZlKFwiLi9ub2RlX21vZHVsZXMvLmNhY2hlL1wiKTtcbiAgY29uc3QgYnVpbGQgPSBwYXRoLnJlc29sdmUoXCIuL2J1aWxkXCIpO1xuXG4gIGlmIChmcy5leGlzdHNTeW5jKGNhY2hlKSkge1xuICAgIHJtcmYuc3luYyhjYWNoZSk7XG4gICAgY29uc29sZS53YXJuKFwiQ2FjaGU6IENsZWFuIGNvbXBsZXRlXCIpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybihcIkNhY2hlOiBBbHJlYWR5IGNsZWFuXCIpO1xuICB9XG5cbiAgaWYgKGZzLmV4aXN0c1N5bmMoYnVpbGQpKSB7XG4gICAgcm1yZi5zeW5jKGJ1aWxkKTtcbiAgICBjb25zb2xlLndhcm4oXCJCdWlsZDogQ2xlYW4gY29tcGxldGVcIik7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKFwiQnVpbGQ6IEFscmVhZHkgY2xlYW5cIik7XG4gIH1cblxuICBpZiAoYXdhaXQgZXhlY1N5bmMoXCJidW5cIiwgW1wicG1cIiwgXCJjYWNoZVwiLCBcInJtXCJdKSkge1xuICAgIGNvbnNvbGUud2FybihcIkJ1bjogQ2xlYW4gY29tcGxldGVcIik7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKFwiQnVuOiBBbHJlYWR5IGNsZWFuXCIpO1xuICB9XG59XG4iLAogICAgImltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjcmVhdGVSZXF1aXJlIH0gZnJvbSBcIm1vZHVsZVwiO1xuXG4vKipcbiAqIEdldCB0aGUgcGF0aCB0byB0aGUgbm9kZV9tb2R1bGVzLy5jYWNoZSBmb2xkZXIgZm9yIGEgZ2l2ZW4gcGFja2FnZS5cbiAqXG4gKiBAcGFyYW0gcGFja2FnZU5hbWUgUmVxdWlyZWQgbmFtZSBvZiB0aGUgbnBtIHBhY2thZ2UgdG8gaWRlbnRpZnlcbiAqIEBwYXJhbSBmb2xkZXIgUmVxdWlyZWQgbmFtZSBvZiB0aGUgZm9sZGVyIHRvIHBsYWNlIGluc2lkZSB0aGUgbm9kZV9tb2R1bGVzLy5jYWNoZSBmb2xkZXJcbiAqIEByZXR1cm5zIEZ1bGwgcGF0aCB0byB0aGUgY2FjaGUgZm9sZGVyXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQYWNrYWdlQ2FjaGVQYXRoKFxuICBwYWNrYWdlTmFtZTogc3RyaW5nLFxuICBmb2xkZXI6IHN0cmluZ1xuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgcmVxdWlyZSA9IGNyZWF0ZVJlcXVpcmUoaW1wb3J0Lm1ldGEudXJsKTtcbiAgY29uc3QgbW9kdWxlUGF0aCA9IHJlcXVpcmUucmVzb2x2ZShwYWNrYWdlTmFtZSk7XG5cbiAgLy8gR2V0IHB1cHBldGVlcidzIG5vZGVfbW9kdWxlIHBhdGhcbiAgY29uc3QgcGFydHMgPSBtb2R1bGVQYXRoLnNwbGl0KFwibm9kZV9tb2R1bGVzXCIpO1xuICBjb25zdCBtb2R1bGVSb290ID0gcGFydHNbMF07XG4gIGNvbnN0IG1vZHVsZURpciA9IHBhcnRzWzFdLnNwbGl0KHBhdGguc2VwKVsxXTtcblxuICAvLyBDcmVhdGUgYSBwYXRoIHRvIHRoZSBkZXNpcmVkIGNhY2hlIGxvY2F0aW9uXG4gIGNvbnN0IG1vZHVsZUNhY2hlUGF0aCA9IHBhdGguam9pbihcbiAgICBtb2R1bGVSb290LFxuICAgIFwibm9kZV9tb2R1bGVzXCIsXG4gICAgbW9kdWxlRGlyLFxuICAgIFwibm9kZV9tb2R1bGVzXCIsXG4gICAgXCIuY2FjaGVcIixcbiAgICBmb2xkZXJcbiAgKTtcblxuICByZXR1cm4gbW9kdWxlQ2FjaGVQYXRoO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHVybCBmcm9tIFwidXJsXCI7XG5pbXBvcnQgeyBnZXRQYWNrYWdlQ2FjaGVQYXRoIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlsL3BhY2thZ2UtY2FjaGUtcGF0aC5qc1wiO1xuaW1wb3J0IHsgZ2l0SGFzQ2hhbmdlcyB9IGZyb20gXCIuLi8uLi9saWIvZ2l0L2dpdC1oYXMtY2hhbmdlcy5qc1wiO1xuXG5jb25zdCBfX2Rpcm5hbWUgPSB1cmwuZmlsZVVSTFRvUGF0aChuZXcgVVJMKFwiLlwiLCBpbXBvcnQubWV0YS51cmwpKTtcblxuLyoqXG4gKiBUbyBvcGVuIHVwIGdpdGxhYiBtZXJnZSByZXF1ZXN0LCB3ZSBuZWVkIHRvIGZldGNoIHRoZSBwcm9qZWN0IElELiBUaGUgcHJvamVjdFxuICogSUQgaXMgYXZhaWxhYmxlIG9uIHRoZSBib2R5IG9mIHRoZSBwYWdlIGxvYWRlZCBmb3IgdGhlIHJlcG8uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIG9wZW5HaXRsYWJQUihcbiAgcmVwb1VybDogc3RyaW5nLFxuICByZWxlYXNlVmVyc2lvbjogc3RyaW5nLFxuICBtYXN0ZXJCcmFuY2g6IHN0cmluZ1xuKSB7XG4gIGNvbnN0IHB1cHBldGVlciA9IGF3YWl0IGltcG9ydChcInB1cHBldGVlclwiKTtcbiAgY29uc3QgY2FjaGVQYXRoID0gYXdhaXQgZ2V0UGFja2FnZUNhY2hlUGF0aChcInB1cHBldGVlclwiLCBcInByLXJlbGVhc2VcIik7XG4gIGNvbnN0IGJyb3dzZXIgPSBhd2FpdCBwdXBwZXRlZXIubGF1bmNoKHtcbiAgICAvLyBJZiBzaG93TG9nSW4sIHRoZW4gd2UgbXVzdCBwcmVzZW50IHRoZSBicm93c2VyIHNvIHRoZSB1c2VyIGNhbiBlbnRlclxuICAgIC8vIHRoZWlyIGNyZWRlbnRpYWxzLlxuICAgIGhlYWRsZXNzOiBmYWxzZSxcbiAgICB1c2VyRGF0YURpcjogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgY2FjaGVQYXRoKSxcbiAgICBkZWZhdWx0Vmlld3BvcnQ6IG51bGwsXG4gIH0pO1xuXG4gIGNvbnN0IHBhZ2UgPSBhd2FpdCBicm93c2VyLm5ld1BhZ2UoKTtcbiAgY29uc29sZS53YXJuKFwiT3BlbmluZyBwcm9qZWN0IHVybC4uLlwiKTtcbiAgYXdhaXQgcGFnZS5nb3RvKHJlcG9VcmwpO1xuXG4gIC8vIFRoZSBwcm9qZWN0IElEIGlzIGxvY2F0ZWQgb24gdGhlIGJvZHkgd2l0aGluIGF0dHJpYnV0ZVxuICAvLyBkYXRhLXByb2plY3QtaWQ9XCI3MjJcIlxuICBjb25zdCBwcm9qZWN0SWQgPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+XG4gICAgZG9jdW1lbnQuYm9keS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3QtaWRcIilcbiAgKTtcblxuICBpZiAoIXByb2plY3RJZCkge1xuICAgIGNvbnNvbGUud2FybihcIk5vIHByb2plY3QgaWQgZm91bmQsIFVzZXIgbG9naW4gcmVxdWlyZWQuLi5cIik7XG4gICAgbGV0IHNob3VsZEV4aXQgPSB0cnVlO1xuXG4gICAgYnJvd3Nlci5vbihcImRpc2Nvbm5lY3RlZFwiLCAoKSA9PiB7XG4gICAgICBpZiAoIXNob3VsZEV4aXQpIHJldHVybjtcbiAgICAgIGNvbnNvbGUud2FybihcIkJyb3dzZXIgd2FzIGNsb3NlZCBvciBjcmFzaGVkLiBUcnkgdGhlIGNvbW1hbmQgYWdhaW4uXCIpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH0pO1xuXG4gICAgYXdhaXQgcGFnZS5nb3RvKHJlcG9VcmwpO1xuICAgIGF3YWl0IHBhZ2Uud2FpdEZvckZ1bmN0aW9uKFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSBkb2N1bWVudD8uYm9keT8uZ2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0LWlkXCIpO1xuICAgICAgICByZXR1cm4gcHJvamVjdElkICE9PSBudWxsICYmIHByb2plY3RJZCAhPT0gdm9pZCAwO1xuICAgICAgfSxcbiAgICAgIHsgdGltZW91dDogMCB9XG4gICAgKTtcblxuICAgIGF3YWl0IHBhZ2UuY2xvc2UoKTtcbiAgICBzaG91bGRFeGl0ID0gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgcGFnZS5jbG9zZSgpO1xuICB9XG5cbiAgY29uc29sZS53YXJuKFwiUHJvamVjdCBJRCBmb3VuZDpcIiwgcHJvamVjdElkLCBcIlxcbk9wZW5pbmcgbWVyZ2UgcmVxdWVzdC4uLlwiKTtcblxuICBjb25zdCBtYWtlUFIgPSBhc3luYyAoXG4gICAgc291cmNlOiBzdHJpbmcsXG4gICAgdGFyZ2V0OiBzdHJpbmcsXG4gICAgaW5jbHVkZVV0Zj86IGJvb2xlYW5cbiAgKSA9PiB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFnZSgpO1xuXG4gICAgLy8gVXNlIHRoZSBwcm9wZXIgVVJMIHN0cnVjdHVyZSB0byBnZW5lcmF0ZSB0aGUgcGFnZSB3aXRoIHRoZSBjb3JyZWN0IG1lcmdlIHJlcXVlc3RcbiAgICBhd2FpdCBwYWdlLmdvdG8oXG4gICAgICBgJHtyZXBvVXJsfS8tL21lcmdlX3JlcXVlc3RzL25ldz8ke1xuICAgICAgICBpbmNsdWRlVXRmID8gXCJ1dGY4PSVFMiU5QyU5MyZcIiA6IFwiXCJcbiAgICAgIH1tZXJnZV9yZXF1ZXN0JTVCc291cmNlX3Byb2plY3RfaWQlNUQ9JHtwcm9qZWN0SWR9Jm1lcmdlX3JlcXVlc3QlNUJzb3VyY2VfYnJhbmNoJTVEPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICBzb3VyY2VcbiAgICAgICl9Jm1lcmdlX3JlcXVlc3QlNUJ0YXJnZXRfcHJvamVjdF9pZCU1RD0ke3Byb2plY3RJZH0mbWVyZ2VfcmVxdWVzdCU1QnRhcmdldF9icmFuY2glNUQ9JHt0YXJnZXR9YFxuICAgICk7XG5cbiAgICAvLyBXYWl0IGZvciB0aGUgZWxlbWVudHMgdG8gYmUgYXZhaWxhYmxlIHRvIG1hbmlwdWxhdGVcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JGdW5jdGlvbihcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWVyZ2VfcmVxdWVzdF90aXRsZVwiKTtcbiAgICAgICAgcmV0dXJuIG5vZGUgIT09IG51bGwgJiYgbm9kZSAhPT0gdm9pZCAwO1xuICAgICAgfSxcbiAgICAgIHsgdGltZW91dDogMCB9XG4gICAgKTtcblxuICAgIC8vIFBvcHVsYXRlIHRoZSBlbGVtZW50cyB3aXRoIGV4cGVjdGVkIGNvbmZpZ3VyYXRpb25cbiAgICBhd2FpdCBwYWdlLmV2YWx1YXRlKChyZWxlYXNlVmVyc2lvbikgPT4ge1xuICAgICAgLy8gUG9wdWxhdGUgdGhlIHRpdGxlXG4gICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXG4gICAgICAgIFwiI21lcmdlX3JlcXVlc3RfdGl0bGVcIlxuICAgICAgKTtcbiAgICAgIGlmIChub2RlKSBub2RlLnZhbHVlID0gYFJlbGVhc2UgJHtyZWxlYXNlVmVyc2lvbn1gO1xuXG4gICAgICAvLyBQb3B1bGF0ZSBkZXNjcmlwdGlvblxuICAgICAgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXG4gICAgICAgIFwiI21lcmdlX3JlcXVlc3RfZGVzY3JpcHRpb25cIlxuICAgICAgKTtcbiAgICAgIGlmIChub2RlKSBub2RlLnZhbHVlID0gYFJlbGVhc2UgJHtyZWxlYXNlVmVyc2lvbn1gO1xuXG4gICAgICAvLyBVbmNoZWNrIGRlbGV0ZSBicmFuY2hcbiAgICAgIG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICAgICBcIiNtZXJnZV9yZXF1ZXN0X2ZvcmNlX3JlbW92ZV9zb3VyY2VfYnJhbmNoXCJcbiAgICAgICk7XG4gICAgICBpZiAobm9kZSkge1xuICAgICAgICBub2RlLmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgbm9kZS52YWx1ZSA9IFwiMFwiO1xuICAgICAgfVxuICAgIH0sIHJlbGVhc2VWZXJzaW9uKTtcblxuICAgIC8vIFdhaXQgZm9yIHRoZSBwYWdlIHRvIGNsb3NlXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHtcbiAgICAgIHBhZ2Uub24oXCJjbG9zZVwiLCAoKSA9PiB7XG4gICAgICAgIHIodm9pZCAwKTtcbiAgICAgICAgY29uc29sZS53YXJuKFwiR2l0bGFiIHRpY2tldCBwcm9jZXNzIGZpbmlzaGVkXFxuXFxuXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gV2FpdCBmb3IgYm90aCBQUnMgdG8gY29tZSB0byBjb21wbGV0aW9uXG4gIGNvbnNvbGUud2FybihcIlxcblxcbldhaXRpbmcgZm9yIGJyb3dzZXIgd2luZG93cyB0byBiZSBjbG9zZWQuLi5cXG5cXG5cIik7XG4gIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBtYWtlUFIoXCJyZWxlYXNlXCIsIFwiZGV2XCIpLFxuICAgIG1ha2VQUihcInJlbGVhc2VcIiwgbWFzdGVyQnJhbmNoKSxcbiAgXSk7XG5cbiAgLy8gQ2xvc2UgYWZ0ZXIgYWxsIHBhZ2VzIGNsb3NlZFxuICBicm93c2VyLmNsb3NlKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG9wZW5HaXRQUihcbiAgcmVwb1VybDogc3RyaW5nLFxuICByZWxlYXNlVmVyc2lvbjogc3RyaW5nLFxuICBtYXN0ZXJCcmFuY2g6IHN0cmluZyxcbiAgc2hvd0xvZ0luPzogYm9vbGVhblxuKSB7XG4gIGNvbnN0IHB1cHBldGVlciA9IGF3YWl0IGltcG9ydChcInB1cHBldGVlclwiKTtcbiAgY29uc3QgY2FjaGVQYXRoID0gYXdhaXQgZ2V0UGFja2FnZUNhY2hlUGF0aChcInB1cHBldGVlclwiLCBcInByLXJlbGVhc2VcIik7XG4gIGxldCBicm93c2VyID0gYXdhaXQgcHVwcGV0ZWVyLmxhdW5jaCh7XG4gICAgLy8gSWYgc2hvd0xvZ0luLCB0aGVuIHdlIG11c3QgcHJlc2VudCB0aGUgYnJvd3NlciBzbyB0aGUgdXNlciBjYW4gZW50ZXJcbiAgICAvLyB0aGVpciBjcmVkZW50aWFscy5cbiAgICBoZWFkbGVzczogIXNob3dMb2dJbixcbiAgICB1c2VyRGF0YURpcjogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgY2FjaGVQYXRoKSxcbiAgICBkZWZhdWx0Vmlld3BvcnQ6IG51bGwsXG4gIH0pO1xuXG4gIGNvbnN0IHBhZ2UgPSBhd2FpdCBicm93c2VyLm5ld1BhZ2UoKTtcblxuICBpZiAoc2hvd0xvZ0luKSB7XG4gICAgY29uc29sZS53YXJuKFwiVXNlciBsb2dpbiByZXF1aXJlZC4uLlwiKTtcbiAgICBsZXQgc2hvdWxkRXhpdCA9IHRydWU7XG5cbiAgICBicm93c2VyLm9uKFwiZGlzY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICAgIGlmICghc2hvdWxkRXhpdCkgcmV0dXJuO1xuICAgICAgY29uc29sZS53YXJuKFwiQnJvd3NlciB3YXMgY2xvc2VkIG9yIGNyYXNoZWQuIFRyeSB0aGUgY29tbWFuZCBhZ2Fpbi5cIik7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBsb2dpblVybCA9IFwiaHR0cHM6Ly9naXRodWIuY29tL2xvZ2luXCI7XG4gICAgY29uc29sZS53YXJuKFwiT3BlbmluZyBnaXRodWIgbG9naW4gcGFnZTogXCIsIGxvZ2luVXJsKTtcbiAgICBhd2FpdCBwYWdlLmdvdG8obG9naW5VcmwpO1xuICAgIGF3YWl0IHBhZ2Uud2FpdEZvckZ1bmN0aW9uKFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSBkb2N1bWVudD8uYm9keVxuICAgICAgICAgID8uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIilcbiAgICAgICAgICA/LnNwbGl0KFwiIFwiKVxuICAgICAgICAgIC5maW5kKChjKSA9PiBjLnN0YXJ0c1dpdGgoXCJsb2dnZWQtaW5cIikpO1xuICAgICAgICByZXR1cm4gcHJvamVjdElkICE9PSBudWxsICYmIHByb2plY3RJZCAhPT0gdm9pZCAwO1xuICAgICAgfSxcbiAgICAgIHsgdGltZW91dDogMCB9XG4gICAgKTtcblxuICAgIHNob3VsZEV4aXQgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJPcGVuaW5nIHByb2plY3QgdXJsOiBcIiwgcmVwb1VybCk7XG4gICAgYXdhaXQgcGFnZS5nb3RvKHJlcG9VcmwpO1xuICB9XG5cbiAgLy8gVGhlIHByb2plY3QgSUQgaXMgbG9jYXRlZCBvbiB0aGUgYm9keSB3aXRoaW4gYXR0cmlidXRlXG4gIC8vIGRhdGEtcHJvamVjdC1pZD1cIjcyMlwiXG4gIGNvbnNvbGUud2FybihcIkNoZWNraW5nIGZvciBsb2dnZWQtaW4gYXR0cmlidXRlIG9uIGJvZHkuLi5cIik7XG4gIGNvbnN0IGxvZ2dlZEluID0gYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJsb2dnZWQtaW4gY2hlY2s6XCIsXG4gICAgICBkb2N1bWVudD8uYm9keVxuICAgICAgICA/LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpXG4gICAgICAgID8uc3BsaXQoXCIgXCIpXG4gICAgICAgIC5maW5kKChjKSA9PiBjLnN0YXJ0c1dpdGgoXCJsb2dnZWQtaW5cIikpXG4gICAgKTtcbiAgICByZXR1cm4gZG9jdW1lbnQ/LmJvZHlcbiAgICAgID8uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIilcbiAgICAgID8uc3BsaXQoXCIgXCIpXG4gICAgICAuZmluZCgoYykgPT4gYy5zdGFydHNXaXRoKFwibG9nZ2VkLWluXCIpKTtcbiAgfSk7XG5cbiAgY29uc29sZS53YXJuKFwiTG9nZ2luIGluIGNoZWNrOlwiLCBsb2dnZWRJbik7XG5cbiAgLy8gSUYgd2UgYXR0ZW1wdGVkIGEgbG9naW4gQU5EIHRoZXJlIGlzIG5vIHByb2plY3QgSUQgYXZhaWxhYmxlLCB0aGVuIHdlIGFyZVxuICAvLyB1bmFibGUgdG8gZGV0ZXJtaW5lIHRoZSBwcm9qZWN0IElELlxuICBpZiAoIWxvZ2dlZEluICYmIHNob3dMb2dJbikge1xuICAgIGF3YWl0IGJyb3dzZXIuY2xvc2UoKTtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvZyBpbiB0aGUgdXNlciBmb3IgZ2l0aHViLlwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBJZiB3ZSBjb3VsZCBub3QgZ2V0IGEgcHJvamVjdCBJRCwgcHJlc2VudCBhIG5vbi1oZWFkbGVzcyBicm93c2VyIHRvIGFsbG93XG4gIC8vIHRoZSB1c2VyIHRvIGxvZ2luLlxuICBlbHNlIGlmICghbG9nZ2VkSW4pIHtcbiAgICBjb25zb2xlLndhcm4oXCJMb2dnZWQtaW4gbm90IGZvdW5kIG9uIGJvZHksIGxvZ2luIG1pZ2h0IGJlIG5lZWRlZC4uLlwiKTtcbiAgICBhd2FpdCBicm93c2VyLmNsb3NlKCk7XG4gICAgb3BlbkdpdFBSKHJlcG9VcmwsIHJlbGVhc2VWZXJzaW9uLCBtYXN0ZXJCcmFuY2gsIHRydWUpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIExvZyBpbiB2YWxpZGF0ZWQsIGNsb3NlIHRoZSBsb2cgaW4gYnJvd3NlciBhcyBpdCBtYXkgYmUgaW4gaGVhZGxlc3MgbW9kZVxuICBlbHNlIHtcbiAgICBicm93c2VyLmNsb3NlKCk7XG4gIH1cblxuICBjb25zdCBwdXBwZXRlZXJEYXRhID0ge1xuICAgIGhlYWRsZXNzOiBmYWxzZSxcbiAgICB1c2VyRGF0YURpcjogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgY2FjaGVQYXRoKSxcbiAgICBkZWZhdWx0Vmlld3BvcnQ6IG51bGwsXG4gIH07XG5cbiAgLy8gUmVvcGVuIHRoZSBicm93c2VyIGJ1dCBlbnN1cmUgd2UncmUgbm90IGhlYWRsZXNzIGFueW1vcmVcbiAgYnJvd3NlciA9IGF3YWl0IHB1cHBldGVlci5sYXVuY2gocHVwcGV0ZWVyRGF0YSk7XG5cbiAgY29uc3QgbWFrZVBSID0gYXN5bmMgKHNvdXJjZTogc3RyaW5nLCB0YXJnZXQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCBicm93c2VyLm5ld1BhZ2UoKTtcblxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9EaW5pZGVuL3NpbXBsZS1kYXRhLXByb3ZpZGVyL2NvbXBhcmUvbWFzdGVyLi4ucmVsZWFzZVxuICAgIC8vIFVzZSB0aGUgcHJvcGVyIFVSTCBzdHJ1Y3R1cmUgdG8gZ2VuZXJhdGUgdGhlIHBhZ2Ugd2l0aCB0aGUgY29ycmVjdCBtZXJnZSByZXF1ZXN0XG4gICAgYXdhaXQgcGFnZS5nb3RvKGAke3JlcG9Vcmx9L2NvbXBhcmUvJHt0YXJnZXR9Li4uJHtzb3VyY2V9YCk7XG5cbiAgICAvLyBXYWl0IGZvciB0aGUgZWxlbWVudHMgdG8gYmUgYXZhaWxhYmxlIHRvIG1hbmlwdWxhdGVcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JGdW5jdGlvbigoKSA9PiB7XG4gICAgICBjb25zdCBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oXG4gICAgICAgIFwiI3JlcG8tY29udGVudC1wamF4LWNvbnRhaW5lciA+IGRpdiA+IGRpdi5qcy1kZXRhaWxzLWNvbnRhaW5lci5EZXRhaWxzLmpzLWNvbXBhcmUtcHIgPiBkaXYgPiBidXR0b25cIlxuICAgICAgKTtcbiAgICAgIG5vZGU/LmNsaWNrKCk7XG4gICAgICByZXR1cm4gbm9kZSAhPT0gbnVsbCAmJiBub2RlICE9PSB2b2lkIDA7XG4gICAgfSk7XG5cbiAgICAvLyBDbGljayB0aGUgY3JlYXRlIFBSIGJ1dHRvbiB0byBvcGVuIG5leHQgZGlhbG9nXG4gICAgLy8gYXdhaXQgcGFnZS5ldmFsdWF0ZShhc3luYyAoKSA9PiB7XG4gICAgLy8gICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVwby1jb250ZW50LXBqYXgtY29udGFpbmVyID4gZGl2ID4gZGl2LmpzLWRldGFpbHMtY29udGFpbmVyLkRldGFpbHMuanMtY29tcGFyZS1wciA+IGRpdiA+IGJ1dHRvbicpLmNsaWNrKCk7XG4gICAgLy8gfSk7XG5cbiAgICAvLyBQb3B1bGF0ZSB0aGUgZWxlbWVudHMgd2l0aCBleHBlY3RlZCBjb25maWd1cmF0aW9uXG4gICAgYXdhaXQgcGFnZS5ldmFsdWF0ZShhc3luYyAocmVsZWFzZVZlcnNpb24pID0+IHtcbiAgICAgIGxldCBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAgICAgXCIjcHVsbF9yZXF1ZXN0X3RpdGxlXCJcbiAgICAgICk7XG4gICAgICBpZiAobm9kZSkgbm9kZS52YWx1ZSA9IGBSZWxlYXNlICR7cmVsZWFzZVZlcnNpb259YDtcbiAgICAgIG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICAgICAnW25hbWU9XCJwdWxsX3JlcXVlc3RbYm9keV1cIl0nXG4gICAgICApO1xuICAgICAgaWYgKG5vZGUpIG5vZGUudmFsdWUgPSBgUmVsZWFzZSAke3JlbGVhc2VWZXJzaW9ufWA7XG4gICAgfSwgcmVsZWFzZVZlcnNpb24pO1xuXG4gICAgLy8gV2FpdCBmb3IgdGhlIHBhZ2UgdG8gY2xvc2VcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4ge1xuICAgICAgcGFnZS5vbihcImNsb3NlXCIsICgpID0+IHtcbiAgICAgICAgcih2b2lkIDApO1xuICAgICAgICBjb25zb2xlLndhcm4oXCJHaXRodWIgdGlja2V0IHByb2Nlc3MgZmluaXNoZWRcXG5cXG5cIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBXYWl0IGZvciBib3RoIFBScyB0byBjb21lIHRvIGNvbXBsZXRpb25cbiAgY29uc29sZS53YXJuKFwiXFxuXFxuV2FpdGluZyBmb3IgYnJvd3NlciB3aW5kb3dzIHRvIGJlIGNsb3NlZC4uLlxcblxcblwiKTtcbiAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIG1ha2VQUihcInJlbGVhc2VcIiwgXCJkZXZcIiksXG4gICAgbWFrZVBSKFwicmVsZWFzZVwiLCBtYXN0ZXJCcmFuY2gpLFxuICBdKTtcblxuICAvLyBDbG9zZSBhZnRlciBhbGwgcGFnZXMgY2xvc2VkXG4gIGJyb3dzZXIuY2xvc2UoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gb3BlbkF6dXJlUFIoXG4gIHJlcG9Vcmw6IHN0cmluZyxcbiAgcmVsZWFzZVZlcnNpb246IHN0cmluZyxcbiAgbWFzdGVyQnJhbmNoOiBzdHJpbmcsXG4gIHNob3dMb2dJbj86IGJvb2xlYW5cbikge1xuICBjb25zdCBwdXBwZXRlZXIgPSBhd2FpdCBpbXBvcnQoXCJwdXBwZXRlZXJcIik7XG4gIC8vIEV4YW1wbGUgVVJMXG4gIC8vIGh0dHBzOi8vZGV2LmF6dXJlLmNvbS9yZXRpcmVvbmUvX2dpdC9SZXRpcmVPbmUlMjBSSVBQL3B1bGxyZXF1ZXN0Y3JlYXRlP3NvdXJjZVJlcG9zaXRvcnlJZD00MDUwNzRiYi1iMWIxLTRmZWEtODM1Mi1iZDRkNzg4OGIxYWQmdGFyZ2V0UmVwb3NpdG9yeUlkPTQwNTA3NGJiLWIxYjEtNGZlYS04MzUyLWJkNGQ3ODg4YjFhZCZzb3VyY2VSZWY9cmVsZWFzZSZ0YXJnZXRSZWY9bWFpblxuICBjb25zdCBjYWNoZVBhdGggPSBhd2FpdCBnZXRQYWNrYWdlQ2FjaGVQYXRoKFwicHVwcGV0ZWVyXCIsIFwicHItcmVsZWFzZVwiKTtcbiAgbGV0IGJyb3dzZXIgPSBhd2FpdCBwdXBwZXRlZXIubGF1bmNoKHtcbiAgICAvLyBJZiBzaG93TG9nSW4sIHRoZW4gd2UgbXVzdCBwcmVzZW50IHRoZSBicm93c2VyIHNvIHRoZSB1c2VyIGNhbiBlbnRlclxuICAgIC8vIHRoZWlyIGNyZWRlbnRpYWxzLlxuICAgIGhlYWRsZXNzOiAhc2hvd0xvZ0luLFxuICAgIHVzZXJEYXRhRGlyOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBjYWNoZVBhdGgpLFxuICAgIGRlZmF1bHRWaWV3cG9ydDogbnVsbCxcbiAgfSk7XG5cbiAgY29uc3QgcGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFnZSgpO1xuXG4gIGlmIChzaG93TG9nSW4pIHtcbiAgICBjb25zb2xlLndhcm4oXCJVc2VyIGxvZ2luIHJlcXVpcmVkLi4uXCIpO1xuICAgIGxldCBzaG91bGRFeGl0ID0gdHJ1ZTtcblxuICAgIGJyb3dzZXIub24oXCJkaXNjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgICAgaWYgKCFzaG91bGRFeGl0KSByZXR1cm47XG4gICAgICBjb25zb2xlLndhcm4oXCJCcm93c2VyIHdhcyBjbG9zZWQgb3IgY3Jhc2hlZC4gVHJ5IHRoZSBjb21tYW5kIGFnYWluLlwiKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGxvZ2luVXJsID0gcmVwb1VybDtcbiAgICBjb25zb2xlLndhcm4oXCJPcGVuaW5nIGF6dXJlIHJlcG8gbG9naW4gcGFnZTogXCIsIGxvZ2luVXJsKTtcbiAgICBhd2FpdCBwYWdlLmdvdG8obG9naW5VcmwpO1xuICAgIGF3YWl0IHBhZ2Uud2FpdEZvckZ1bmN0aW9uKFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjb25zdCBtc0lkID0gd2luZG93LnNlc3Npb25TdG9yYWdlLm1zYW1laWQ7XG4gICAgICAgIHJldHVybiBtc0lkICE9PSBudWxsICYmIG1zSWQgIT09IHZvaWQgMDtcbiAgICAgIH0sXG4gICAgICB7IHRpbWVvdXQ6IDAgfVxuICAgICk7XG5cbiAgICBzaG91bGRFeGl0ID0gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKFwiT3BlbmluZyBwcm9qZWN0IHVybDogXCIsIHJlcG9VcmwpO1xuICAgIGF3YWl0IHBhZ2UuZ290byhyZXBvVXJsKTtcbiAgfVxuXG4gIC8vIFRoZSBtc2lkIGlzIGxvY2F0ZWQgaW4gc2Vzc2lvblN0b3JhZ2UgYXQgd2luZG93LnNlc3Npb25TdG9yYWdlLm1zYW1laWRcbiAgY29uc29sZS53YXJuKFwiQ2hlY2tpbmcgZm9yIGxvZ2dlZC1pbiBhdHRyaWJ1dGUgb24gYm9keS4uLlwiKTtcbiAgY29uc3QgbG9nZ2VkSW4gPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IHtcbiAgICBjb25zb2xlLndhcm4oXCJsb2dnZWQtaW4gY2hlY2s6XCIsIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5tc2FtZWlkKTtcbiAgICByZXR1cm4gd2luZG93LnNlc3Npb25TdG9yYWdlLm1zYW1laWQ7XG4gIH0pO1xuXG4gIGNvbnNvbGUud2FybihcIkxvZ2dpbiBpbiBjaGVjazpcIiwgbG9nZ2VkSW4pO1xuXG4gIC8vIElGIHdlIGF0dGVtcHRlZCBhIGxvZ2luIEFORCB0aGVyZSBpcyBubyBtcyBpZCBhdmFpbGFibGUsIHRoZW4gd2UgYXJlXG4gIC8vIHVuYWJsZSB0byBkZXRlcm1pbmUgdGhlIG1zIGlkLlxuICBpZiAoIWxvZ2dlZEluICYmIHNob3dMb2dJbikge1xuICAgIGF3YWl0IGJyb3dzZXIuY2xvc2UoKTtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGxvZyBpbiB0aGUgdXNlciBmb3IgYXp1cmUuXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIElmIHdlIGNvdWxkIG5vdCBnZXQgYSBtc2lkLCBwcmVzZW50IGEgbm9uLWhlYWRsZXNzIGJyb3dzZXIgdG8gYWxsb3dcbiAgLy8gdGhlIHVzZXIgdG8gbG9naW4uXG4gIGVsc2UgaWYgKCFsb2dnZWRJbikge1xuICAgIGNvbnNvbGUud2FybihcIk1TIGlkIG5vdCBmb3VuZCwgbG9naW4gbWlnaHQgYmUgbmVlZGVkLi4uXCIpO1xuICAgIGF3YWl0IGJyb3dzZXIuY2xvc2UoKTtcbiAgICBvcGVuR2l0UFIocmVwb1VybCwgcmVsZWFzZVZlcnNpb24sIG1hc3RlckJyYW5jaCwgdHJ1ZSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gTG9nIGluIHZhbGlkYXRlZCwgY2xvc2UgdGhlIGxvZyBpbiBicm93c2VyIGFzIGl0IG1heSBiZSBpbiBoZWFkbGVzcyBtb2RlXG4gIGVsc2Uge1xuICAgIGJyb3dzZXIuY2xvc2UoKTtcbiAgfVxuXG4gIC8vIFJlb3BlbiB0aGUgYnJvd3NlciBidXQgZW5zdXJlIHdlJ3JlIG5vdCBoZWFkbGVzcyBhbnltb3JlXG4gIGNvbnN0IHB1cHBldGVlckRhdGEgPSB7XG4gICAgaGVhZGxlc3M6IGZhbHNlLFxuICAgIHVzZXJEYXRhRGlyOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBjYWNoZVBhdGgpLFxuICAgIGRlZmF1bHRWaWV3cG9ydDogbnVsbCxcbiAgfTtcblxuICBicm93c2VyID0gYXdhaXQgcHVwcGV0ZWVyLmxhdW5jaChwdXBwZXRlZXJEYXRhKTtcblxuICAvLyBNYWtlIGEgY29tbW9uIG1ldGhvZCBmb3IgbGF1bmNoaW5nIGEgUFJcbiAgY29uc3QgbWFrZVBSID0gYXN5bmMgKHNvdXJjZTogc3RyaW5nLCB0YXJnZXQ6IHN0cmluZykgPT4ge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCBicm93c2VyLm5ld1BhZ2UoKTtcblxuICAgIC8vIFVzZSB0aGUgcHJvcGVyIFVSTCBzdHJ1Y3R1cmUgdG8gZ2VuZXJhdGUgdGhlIHBhZ2Ugd2l0aCB0aGUgY29ycmVjdCBtZXJnZSByZXF1ZXN0XG4gICAgYXdhaXQgcGFnZS5nb3RvKGAke3JlcG9Vcmx9JnNvdXJjZVJlZj0ke3NvdXJjZX0mdGFyZ2V0UmVmPSR7dGFyZ2V0fWApO1xuXG4gICAgLy8gV2FpdCBmb3IgdGhlIGVsZW1lbnRzIHRvIGJlIGF2YWlsYWJsZSB0byBtYW5pcHVsYXRlXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yRnVuY3Rpb24oKCkgPT4ge1xuICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEJ1dHRvbkVsZW1lbnQ+KFwiYnV0dG9uLnByaW1hcnlcIik7XG4gICAgICByZXR1cm4gbm9kZSAhPT0gbnVsbCAmJiBub2RlICE9PSB2b2lkIDA7XG4gICAgfSk7XG5cbiAgICAvLyBQb3B1bGF0ZSB0aGUgZWxlbWVudHMgd2l0aCBleHBlY3RlZCBjb25maWd1cmF0aW9uXG4gICAgYXdhaXQgcGFnZS5ldmFsdWF0ZShhc3luYyAocmVsZWFzZVZlcnNpb24pID0+IHtcbiAgICAgIC8vIEdldCB0aGUgbm9kZSB3aXRoIHRhYiBpbmRleCAwICh0aGUgaWQgb24gdGhlIHBhZ2UgY2hhbmdlcyBlYWNoIHRpbWUpXG4gICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXG4gICAgICAgICdbYXJpYS1sYWJlbD1cIkVudGVyIGEgdGl0bGVcIl0nXG4gICAgICApO1xuICAgICAgaWYgKG5vZGUpIG5vZGUudmFsdWUgPSBgUmVsZWFzZSAke3JlbGVhc2VWZXJzaW9ufWA7XG5cbiAgICAgIC8vXG4gICAgICBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAgICAgJ1thcmlhLWxhYmVsPVwiRGVzY3JpcHRpb25cIl0nXG4gICAgICApO1xuICAgICAgaWYgKG5vZGUpIG5vZGUudmFsdWUgPSBgUmVsZWFzZSAke3JlbGVhc2VWZXJzaW9ufWA7XG4gICAgfSwgcmVsZWFzZVZlcnNpb24pO1xuXG4gICAgLy8gV2FpdCBmb3IgdGhlIHBhZ2UgdG8gY2xvc2VcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4ge1xuICAgICAgcGFnZS5vbihcImNsb3NlXCIsICgpID0+IHtcbiAgICAgICAgcih2b2lkIDApO1xuICAgICAgICBjb25zb2xlLndhcm4oXCJBenVyZSBwcm9qZWN0IHRpY2tldCBwcm9jZXNzIGZpbmlzaGVkXFxuXFxuXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gV2FpdCBmb3IgYm90aCBQUnMgdG8gY29tZSB0byBjb21wbGV0aW9uXG4gIGNvbnNvbGUud2FybihcIlxcblxcbldhaXRpbmcgZm9yIGJyb3dzZXIgd2luZG93cyB0byBiZSBjbG9zZWQuLi5cXG5cXG5cIik7XG4gIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBtYWtlUFIoXCJyZWxlYXNlXCIsIFwiZGV2XCIpLFxuICAgIG1ha2VQUihcInJlbGVhc2VcIiwgbWFzdGVyQnJhbmNoKSxcbiAgXSk7XG5cbiAgLy8gQ2xvc2UgYWZ0ZXIgYWxsIHBhZ2VzIGNsb3NlZFxuICBicm93c2VyLmNsb3NlKCk7XG59XG5cbi8qKlxuICogVGhpcyBjb21tYW5kIGlzIGludGVuZGVkIHRvIHdvcmsgd2l0aCB0aGUgY3VycmVudCBicmFuY2ggSUYgdGhlIGJyYW5jaCBoYXNcbiAqIGJlZW4gY3JlYXRlZCB1c2luZyB0aGUgXCJucG0gcnVuIHRpY2tldFwiIGNvbW1hbmQuXG4gKlxuICogVGhpcyB3aWxsIGxvb2sgaW50byB0aGUgY3VycmVudCBicmFuY2ggYW5kIGZpbmQgdGhlIGNvbW1pdCB0aGF0IGNvbnRhaW5zIHRoZVxuICogdGlja2V0IGJyYW5jaCBuYW1lIGFuZCB0aWNrZXQgVVJMLiBUaGlzIHdpbGwgZ2VuZXJhdGUgYSBjb21taXQgYW5kIG1lcmdlXG4gKiByZXF1ZXN0IHRoYXQgY29udGFpbnMgdGhlIHRpY2tldCB0aGF0IGlzIGxpbmtlZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKFxuICByZXBvVXJsOiBzdHJpbmcsXG4gIHJlcG9UeXBlOiBzdHJpbmcsXG4gIG1hc3RlckJyYW5jaCA9IFwibWFzdGVyXCIsXG4gIC4uLl9hcmdzOiBhbnlbXVxuKSB7XG4gIC8vIFZhbGlkYXRlIHdlIGhhdmUgaW1wbGVtZW50ZWQgYSBzdHJhdGVneSBmb3IgYSBnaXZlbiByZXBvIHR5cGUuXG4gIGNvbnN0IHZhbGlkUmVwb3MgPSBuZXcgU2V0KFtcImdpdGxhYlwiLCBcImdpdFwiLCBcImdpdGh1YlwiLCBcImF6dXJlXCJdKTtcblxuICBpZiAoIXZhbGlkUmVwb3MuaGFzKHJlcG9UeXBlKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoYFVuc3VwcG9ydGVkIHJlcG8gdHlwZTogJHtyZXBvVHlwZX1gKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBXZSBjYW4gb25seSBkbyB0aGlzIG9wZXJhdGlvbiBpZiB0aGVyZSBpcyBub3RoaW5nIHRvIGNvbW1pdCBvciBwdXNoXG4gIC8vIFRoaXMgb25seSB3b3JrcyBpZiBubyBjaGFuZ2VzIGFyZSBwcmVzZW50XG4gIGlmIChhd2FpdCBnaXRIYXNDaGFuZ2VzKCkpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJZb3UgaGF2ZSB1bmNvbW1pdHRlZCBjaGFuZ2VzIG9yIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBwcm9qZWN0IGNhbiBub3QgYmUgZGV0ZXJtaW5lZC4gUGxlYXNlIGNvbW1pdCBvciBzdGFzaCB0aGVtIGJlZm9yZSBjb250aW51aW5nLlwiXG4gICAgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBjb25zdCBjaGVja0JyYW5jaCA9IHNoZWxsLmV4ZWMoXCJnaXQgc3ltYm9saWMtcmVmIC0tc2hvcnQgSEVBRFwiLCB7IHNpbGVudDogdHJ1ZSB9KTtcbiAgLy8gaWYgKGNoZWNrQnJhbmNoICE9PSBcInJlbGVhc2VcIikge1xuICAvLyAgIGNvbnNvbGUuZXJyb3IoXCJZb3UgbXVzdCBiZSBvbiB0aGUgcmVsZWFzZSBicmFuY2ggdG8gY3JlYXRlIGEgcmVsZWFzZSBQUlwiKTtcbiAgLy8gICBwcm9jZXNzLmV4aXQoMSk7XG4gIC8vIH1cblxuICAvLyBHZXQgdGhlIGN1cnJlbnQgcHJvamVjdCB2ZXJzaW9uIGZyb20gdGhlIHBhY2thZ2UuanNvbiBmaWxlXG4gIGNvbnN0IHBhY2thZ2VKc29uID0gZnMucmVhZEpzb25TeW5jKHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSk7XG4gIGNvbnN0IHZlcnNpb24gPSBwYWNrYWdlSnNvbi52ZXJzaW9uO1xuXG4gIC8vIE5vdyB3ZSBvcGVuIHRoZSB1cmwgdG8gdGhlIG5ldyBtZXJnZSByZXF1ZXN0XG4gIHN3aXRjaCAocmVwb1R5cGUpIHtcbiAgICBjYXNlIFwiZ2l0bGFiXCI6XG4gICAgICBhd2FpdCBvcGVuR2l0bGFiUFIocmVwb1VybCwgdmVyc2lvbiwgbWFzdGVyQnJhbmNoKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcImdpdFwiOlxuICAgIGNhc2UgXCJnaXRodWJcIjpcbiAgICAgIGF3YWl0IG9wZW5HaXRQUihyZXBvVXJsLCB2ZXJzaW9uLCBtYXN0ZXJCcmFuY2gpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwiYXp1cmVcIjpcbiAgICAgIGF3YWl0IG9wZW5BenVyZVBSKHJlcG9VcmwsIHZlcnNpb24sIG1hc3RlckJyYW5jaCk7XG4gICAgICBicmVhaztcblxuICAgIGRlZmF1bHQ6XG4gICAgICBjb25zb2xlLndhcm4oXCJObyBzdXBwb3J0ZWQgcmVwbyB0eXBlIGZvdW5kXCIpO1xuICB9XG59XG4iLAogICAgIiMhL3Vzci9iaW4vZW52IGJ1blxuaW1wb3J0ICogYXMgY29tbWFuZGVyIGZyb20gXCJjb21tYW5kZXJcIjtcbmltcG9ydCBBdXRvQ29tcGxldGVQcm9tcHQgZnJvbSBcImlucXVpcmVyLWF1dG9jb21wbGV0ZS1wcm9tcHRcIjtcbmltcG9ydCBpbnF1aXJlciBmcm9tIFwiaW5xdWlyZXJcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeWFyZ3MgZnJvbSBcInlhcmdzXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBjb25maWdFbnYgfSBmcm9tIFwiLi9saWIvdXRpbC9jb25maWctZW52LmpzXCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbiB9IGZyb20gXCIuL2xpYi91dGlsL2Rlc2NyaXB0aW9uLmpzXCI7XG5pbXBvcnQgeyBlbnN1cmVEZXBlbmRlbmNpZXMgfSBmcm9tIFwiLi9jb21tYW5kcy9lbnN1cmUtZGVwZW5kZW5jaWVzLmpzXCI7XG5pbXBvcnQgeyBleGVjSW5zdGFsbCB9IGZyb20gXCIuL2xpYi9leGVjL2V4ZWMtaW5zdGFsbC5qc1wiO1xuXG5pbnF1aXJlci5yZWdpc3RlclByb21wdChcImF1dG9jb21wbGV0ZVwiLCBBdXRvQ29tcGxldGVQcm9tcHQpO1xuXG5jb25zdCB7IENvbW1hbmQgfSA9IGNvbW1hbmRlcjtcbmNvbnN0IHByb2dyYW06IGFueSA9IG5ldyBDb21tYW5kKCk7XG5jb25zdCBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge307XG5cbmZ1bmN0aW9uIGdldE9wdGlvbnMoKSB7XG4gIG9wdGlvbnMuZGVidWcgPSBwcm9ncmFtLmRlYnVnO1xuICBvcHRpb25zLnZlcmJvc2UgPSBwcm9ncmFtLnZlcmJvc2U7XG4gIG9wdGlvbnMucGF0dGVybiA9IHByb2dyYW0ucGF0dGVybjtcblxuICByZXR1cm4gb3B0aW9ucztcbn1cblxucHJvZ3JhbS52ZXJzaW9uKFwiMC4wLjFcIik7XG5wcm9ncmFtLm9wdGlvbihcbiAgXCItdiwgLS12ZXJib3NlXCIsXG4gIFwiT3V0cHV0cyBtb3JlIGRldGFpbGVkIGluZm9ybWF0aW9uIGR1cmluZyBjcmFzaGVzLlwiXG4pO1xucHJvZ3JhbS5vcHRpb24oXG4gIFwiLS1kZWJ1ZyBbcGFyYW1dXCIsXG4gIGRlc2NyaXB0aW9uYFxuICAgIFByb3ZpZGVzIGRlYnVnZ2luZyBjb250ZXh0dWFsIGluZm9ybWF0aW9uIHZhcmlvdXMgY29tbWFuZHMgbWlnaHQgdXNlIHRvXG4gICAgYWlkIGluIGRldmVsb3BpbmcgRGV2b3BzLlxuICBgXG4pO1xuXG5wcm9ncmFtLm9wdGlvbihcbiAgXCItcCwgLS1wYXR0ZXJuIFtwYXJhbV1cIixcbiAgZGVzY3JpcHRpb25gXG4gICAgUHJvdmlkZXMgYSBwYXR0ZXJuIGZvciBjZXJ0YWluIG9wZXJhdGlvbnMgdG8gdXRpbGl6ZS4gVGhpcyBpcyBwcmltYXJpbHlcbiAgICB1c2VkIGJ5IHVuaXQgdGVzdHMgdG8gZmlsdGVyIHRlc3RzIHRvIHNwZWNpZmllZCB0ZXN0cy5cbiAgYFxuKTtcblxuY29uc3QgZGV2ID0gcHJvZ3JhbS5jb21tYW5kKFwiZGV2XCIpLmRlc2NyaXB0aW9uKFxuICBkZXNjcmlwdGlvbmBcbiAgICBUaGVzZSBhcmUgdGhlIGNvbW1hbmRzIGFzc29jaWF0ZWQgd2l0aCBzdGFydGluZyB1cCBkZXZlbG9wZXIgZW52aXJvbm1lbnRzXG4gICAgZm9yIHZhcmlvdXMgcHJvamVjdCB0eXBlcyBvciBwb3J0aW9ucyBvZiBhIHByb2plY3QuXG4gIGBcbik7XG5cbmRldlxuICAuY29tbWFuZChcInZpdGVcIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgU3RhcnRzIHVwIGEgZGV2ZWxvcGVyIGVudmlyb25tZW50IHRoYXQgcGVyZm9ybXMgaW5jcmVtZW50YWwgYnVpbGRzIHdoaWxlXG4gICAgICBkZXZlbG9waW5nIHdpdGhpbiB0aGUgbGliIGFuZCBhcHAgZm9sZGVycy4gVXNlcyB2aXRlIGFuZCB2aXRlXG4gICAgICBjb25maWcuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL2Rldi9kZXYtdml0ZS5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KClcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJkZXYtdml0ZSBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbmRldlxuICAuY29tbWFuZChcInN0b3J5Ym9va1wiKVxuICAub3B0aW9uKFxuICAgIFwiLWksIC0taW5jbHVkZSA8aW5jbHVkZS4uLj5cIixcbiAgICBcIkFkZGl0aW9uYWwgc3Rvcnlib29rIG1vZHVsZXMgdG8gbG9hZCBpbnRvIHN0b3J5Ym9vay4gVGhlc2UgYXJlIHRoZSBuYW1lcyBvZiBwcm9wZXJseSBmb3JtYXR0ZWQgZGVwZW5kZW5jaWVzIGluc3RhbGxlZCBpbnRvIG5vZGVfbW9kdWxlcy5cIlxuICApXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFN0YXJ0cyBhIHN0b3J5Ym9vayBpbnN0YW5jZSBmb3IgZGV2ZWxvcGluZyB0aGUgVUkgY29tcG9uZW50cyBvZiB0aGVcbiAgICAgIHByb2plY3QuIFRoaXMgbWFrZXMgdGhlIFwidWkvc3Rvcmllc1wiIGZvbGRlciBpbiB0aGUgcHJvamVjdCB0aGUgZXhwZWN0ZWRcbiAgICAgIGRldmVsb3BtZW50IHBvaW50LlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICh7IGluY2x1ZGUgfTogeyBpbmNsdWRlOiBzdHJpbmdbXSB9KSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvc3Rvcnlib29rLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoXCJcIiwgaW5jbHVkZSwgcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCkpLCBnZXRPcHRpb25zKCkpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFwic3Rvcnlib29rIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiKTtcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxuY29uc3Qgc3Rvcnlib29rID0gcHJvZ3JhbS5jb21tYW5kKFwic3Rvcnlib29rXCIpO1xuXG5zdG9yeWJvb2tcbiAgLmNvbW1hbmQoXCJydW5cIilcbiAgLm9wdGlvbihcbiAgICBcIi1pLCAtLWluY2x1ZGUgPGluY2x1ZGUuLi4+XCIsXG4gICAgXCJBZGRpdGlvbmFsIHN0b3J5Ym9vayBtb2R1bGVzIHRvIGxvYWQgaW50byBzdG9yeWJvb2suIFRoZXNlIGFyZSB0aGUgbmFtZXMgb2YgcHJvcGVybHkgZm9ybWF0dGVkIGRlcGVuZGVuY2llcyBpbnN0YWxsZWQgaW50byBub2RlX21vZHVsZXMuXCJcbiAgKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBTdGFydHMgYSBzdG9yeWJvb2sgaW5zdGFuY2UgZm9yIGRldmVsb3BpbmcgdGhlIFVJIGNvbXBvbmVudHMgb2YgdGhlXG4gICAgICBwcm9qZWN0LiBUaGlzIG1ha2VzIHRoZSBcInVpL3N0b3JpZXNcIiBmb2xkZXIgaW4gdGhlIHByb2plY3QgdGhlIGV4cGVjdGVkXG4gICAgICBkZXZlbG9wbWVudCBwb2ludC5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoeyBpbmNsdWRlIH06IHsgaW5jbHVkZTogc3RyaW5nW10gfSkgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3N0b3J5Ym9vay5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KFwiXCIsIGluY2x1ZGUsIHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpKSwgZ2V0T3B0aW9ucygpKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcInN0b3J5Ym9vayBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbnByb2dyYW1cbiAgLmNvbW1hbmQoXCJ1cmwgW3VyaS4uLl1cIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgU2ltcGxlIGNvbW1hbmQgdG8gb3BlbiBhIHNwZWNpZmllZCBVUkwgaW4gdGhlIGJyb3dzZXIuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKHVyaTogc3RyaW5nKSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvdXJsLmpzXCIpKS5kZWZhdWx0KHVyaSkuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUud2FybihcInVybCBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbmNvbnN0IHJlbGVhc2UgPSBwcm9ncmFtLmNvbW1hbmQoXCJyZWxlYXNlXCIpLmRlc2NyaXB0aW9uKFxuICBkZXNjcmlwdGlvbmBcbiAgICBUaGVzZSBjb21tYW5kcyBhcmUgdXNlZCBmb3IgZmFjaWxpdGF0aW5nIGRpc3RyaWJ1dGlvbiByZWxlYXNlcyBvZlxuICAgIGFwcGxpY2F0aW9ucy4gVGhpcyBpbmNsdWRlcyB0b29scyBmb3IgYnVpbGRpbmcgdGggZGlzdCBmb2xkZXIgZnJhZ21lbnRzLFxuICAgIHZpZXdpbmcgdGhlIGV4cGVjdGVkIHJlbGVhc2Ugbm90ZXMsIGFuZCBhY3R1YWxseSBwZXJmb3JtaW5nIGEgY29tcGxldGVcbiAgICByZWxlYXNlIGN5Y2xlLlxuICBgXG4pO1xuXG5yZWxlYXNlXG4gIC5jb21tYW5kKFwiZGVwbG95IFthZGQtcmVtb3RlLi4uXVwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBQZXJmb3JtcyBhY3Rpb25zIG5lY2Vzc2FyeSB0byB1cGRhdGUgdGhlIGRpc3RyaWJ1dGlvbiBvZiB0aGUgcHJvamVjdC5cbiAgICAgIFRoaXMgd2lsbCBhdXRvbWF0aWNhbGx5IHVwZGF0ZSByZWxlYXNlIG5vdGVzLCB0YWcgdGhlIHJlbGVhc2UsIGFuZFxuICAgICAgY29tbWl0IGFuZCBwdXNoIHRvIGEgJ3JlbGVhc2UnIGJyYW5jaCB3aGljaCB3aWxsIGJlIHJlYWR5IGZvciBtZXJnaW5nXG4gICAgICBpbnRvIG1hc3RlciBhbmQgZGV2LlxuXG4gICAgICBTcGVjaWZ5IGFkZGl0aW9uYWwgcmVtb3RlcyB0byBkZXBsb3kgdG8gdmlhIHRoZSBhZGQtcmVtb3RlIG9wdGlvbi5cbiAgICAgIFRoaXMgd2lsbCBkZXBsb3kgdGhlIHJlbGVhc2UgdG8gYWRkaXRpb25hbCByZW1vdGVzIChBRlRFUiBhbGwgb3RoZXIgbm9ybWFsXG4gICAgICBkZXBsb3kgb3BlcmF0aW9ucyBjb21wbGV0ZSkuIFRoaXMgdmFsdWUgaXMgdGhlIE5BTUUgb2YgdGhlIHJlbW90ZSBhcyBpdFxuICAgICAgYXBwZWFycyB3aGVuIHlvdSBwZXJmb3JtIGEgXCJnaXQgcmVtb3RlIC12XCIgY29tbWFuZC5cblxuICAgICAgWW91IGNhbiBzcGVjaWZ5IGEgc3BlY2lmaWMgdGFyZ2V0IGJyYW5jaCB2aWEgYSBjb2xvbjogcmVtb3RlOmJyYW5jaFxuICAgICAgT3RoZXJ3aXNlLCB0aGlzIHdpbGwgdXNlIHRoZSBzYW1lIG1haW4gYnJhbmNoIGFzIGNvbmZpZ3VyZWQgZm9yIHRoaXNcbiAgICAgIHByb2plY3QuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKHJlbW90ZXM6IHN0cmluZ1tdKSA9PiB7XG4gICAgLy8gQmVmb3JlIHN0YXJ0aW5nIHRoZSByZWxlYXNlIHNjcmlwdCBtYWtlIHN1cmUgb3VyIHBhY2thZ2VzIGFyZSB1cCB0byBkYXRlIHRvIHRoZSBsYXRlc3RcbiAgICBleGVjSW5zdGFsbChbXSk7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLWRlcGxveS5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KHJlbW90ZXMpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwicmVsZWFzZS1kZXBsb3kgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XFxuXCIsXG4gICAgICAgICAgZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlXG4gICAgICAgICk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxucmVsZWFzZVxuICAuY29tbWFuZChcInR5cGVzXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFVwZGF0ZXMgSlVTVCB0aGUgdHlwZXMgaW4gdGhlIGRpc3QgZm9sZGVyLiBUaGVzZSBhcmUgdGhlIHNhbWUgdHlwZXNcbiAgICAgIGdlbmVyYXRlZCB3aGVuIGJ1aWxkaW5nIGEgcmVsZWFzZS5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoKSA9PiB7XG4gICAgLy8gQmVmb3JlIHN0YXJ0aW5nIHRoZSByZWxlYXNlIHNjcmlwdCBtYWtlIHN1cmUgb3VyIHBhY2thZ2VzIGFyZSB1cCB0byBkYXRlIHRvIHRoZSBsYXRlc3RcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2UtdHlwZXMuanNcIikpXG4gICAgICAuZGVmYXVsdCgpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwicmVsZWFzZS10eXBlcyBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcXG5cIixcbiAgICAgICAgICBlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2VcbiAgICAgICAgKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5yZWxlYXNlXG4gIC5jb21tYW5kKFwidmlld1wiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBUaGlzIHJ1bnMgdGhlIHJlbGVhc2UtdmlldyBzY3JpcHQuIEZvciB0aGlzIGNhc2UsIGl0IHdpbGwgb25seSBkaXNwbGF5XG4gICAgICB0aGUgcmVsZWFzZSBub3RlcyBpbiB0aGUgY29uc29sZS4gQWN0dWFsIGdlbmVyYXRlZCByZWxlYXNlIG5vdGVzIGFyZSBhXG4gICAgICBwYXJ0IG9mIHRoZSByZWxlYXNlIHByb2Nlc3MuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3RzLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoXCJcIilcbiAgICAgIC50aGVuKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGNoYWxrLmN5YW5CcmlnaHRCb2xkKFwiVFMgY2hlY2sgcGFzc2VkLCBnZW5lcmF0aW5nIG5vdGVzLi4uXCIpXG4gICAgICAgICk7XG4gICAgICAgIC8vIEJlZm9yZSBzdGFydGluZyB0aGUgcmVsZWFzZSBzY3JpcHQgbWFrZSBzdXJlIG91ciBwYWNrYWdlcyBhcmUgdXAgdG8gZGF0ZSB0byB0aGUgbGF0ZXN0XG4gICAgICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3JlbGVhc2UvcmVsZWFzZS12aWV3LmpzXCIpKVxuICAgICAgICAgIC5kZWZhdWx0KClcbiAgICAgICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgICAgXCJyZWxlYXNlLW5vdGVzIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiLFxuICAgICAgICAgICAgICBlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2VcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBjaGFsay5yZWRCcmlnaHRCb2xkKFxuICAgICAgICAgICAgZGVzY3JpcHRpb25gXG4gICAgICAgICAgICAgIEZhaWxlZCBUUyBjaGVjay4gUmVsZWFzZSBub3RlcyB3aWxsIG5vdCBiZSBwcm9kdWNlZCB1bnRpbCBhbGwgVFNcbiAgICAgICAgICAgICAgZXJyb3JzIGFyZSByZXNvbHZlZC5cbiAgICAgICAgICAgIGBcbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbnJlbGVhc2VcbiAgLmNvbW1hbmQoXCJidWlsZFwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBUaGlzIHJ1bnMgdGhlIHJlbGVhc2UtYnVpbGQgc2NyaXB0LiBUaGlzIGdlbmVyYXRlcyBhbGwgb2YgdGhlIHJlbGVhc2VcbiAgICAgIGZyYWdtZW50cy4gVGhpcyBzaG91bGQgT05MWSBiZSB1c2VkIGZvciB0ZXN0aW5nIGFuZCBleHBlcmltZW50aW5nLiBBY3R1YWxcbiAgICAgIHJlbGVhc2UgZnJhZ21lbnRzIHNob3VsZCBiZSBwcm9wZXJseSBjcmVhdGVkIGFuZCBkZXBsb3llZCB1c2luZyB0aGVcbiAgICAgIHJlbGVhc2UgZGVwbG95IGNvbW1hbmQuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3JlbGVhc2UvcmVsZWFzZS1idWlsZC5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KClcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJyZWxlYXNlLWRlcGxveSBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcXG5cIixcbiAgICAgICAgICBlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2VcbiAgICAgICAgKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5jb25zdCByZWxlYXNlU3RhcnQgPSByZWxlYXNlLmNvbW1hbmQoXCJzdGFydFwiKS5kZXNjcmlwdGlvbihcbiAgZGVzY3JpcHRpb25gXG4gICAgICBUaGlzIHN0YXJ0cyB1cCByZWxlYXNlZCByZWxhdGVkIHByb2Nlc3Nlcy4gVGhpcyBpbmNsdWRlcyB0aGluZ3MgbGlrZVxuICAgICAgc3RhcnRpbmcgdXAgdGhlIGRldiBzZXJ2ZXIgd2l0aG91dCBhbnkgYWRkaXRpb25hbCBidWlsZHMgb3IgYXV0b1xuICAgICAgY29uZmlndXJhdGlvbiBmb3IgZGV2ZWxvcG1lbnQuXG4gICAgYFxuKTtcblxucmVsZWFzZVN0YXJ0XG4gIC5jb21tYW5kKFwic2VydmVyXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFN0YXJ0cyB1cCB0aGUgYXBwIHNlcnZlciB3aXRob3V0IGFueSBhZGRpdGlvbmFsIGJ1aWxkcyBldGMuIFVzZSB0aGVcbiAgICAgIGVudmlyb25tZW50czpcblxuICAgICAgICBCVUlMRF9NT0RFOiBUYXJnZXRzIGFuIGVudiB0byBydW4gdGhlIHNlcnZlciBmb3IuXG4gICAgICAgIFJFU09VUkNFX1BBVEg6IFRoZSBwYXRoIHRvIHRoZSBzdGF0aWMgZmlsZXMgdG8gc2VydmUuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3JlbGVhc2UvcmVsZWFzZS1zdGFydC1zZXJ2ZXIuanNcIikpXG4gICAgICAuZGVmYXVsdCgpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwicmVsZWFzZS1zdGFydC1zZXJ2ZXIgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XFxuXCIsXG4gICAgICAgICAgZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlXG4gICAgICAgICk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxucHJvZ3JhbVxuICAuY29tbWFuZChcInN0YXJ0IFt0YXJnZXRdXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFRoaXMgZmlyZXMgdXAgYSBzZXJ2ZXIgdG8gbWFrZSBhbnkgc3RhdGljIGNvbnRlbnQgYXZhaWxhYmxlIGZvciBiZWluZ1xuICAgICAgc2VydmVkLlxuICAgICAgVGhlcmUgYXJlIGEgZmV3IG9wdGlvbnMgZm9yIHdoYXQgY29udGVudCB3aWxsIGJlIHNlcnZlZCBieSB0aGlzIHNjcmlwdDpcblxuICAgICAgLSBUaGUgd2ViIGFwcFxuICAgICAgLSBEZXZvcHMgQVBJXG5cbiAgICAgIFRoZSBzdGFydCBzY3JpcHQgd2lsbCBhdXRvbWF0aWNhbGx5IHBpY2sgdGhlIHdlYiBhcHAgb3ZlciB0aGUgZGV2b3BzXG4gICAgICBmaWxlcywgYnV0IHlvdSBjYW4gc3BlY2lmeSBhIHRhcmdldCBpZiB5b3UgaGF2ZSBhIGRldm9wcyBBUEkgYW5kIGEgd2ViXG4gICAgICBhcHA6XG5cbiAgICAgIC0gYXBwXG4gICAgICAtIGRldm9wc1xuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICh0YXJnZXQ6IHN0cmluZykgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3N0YXJ0LmpzXCIpKVxuICAgICAgLmRlZmF1bHQodGFyZ2V0LCBnZXRPcHRpb25zKCkpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFwic3RhcnQgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5jb25zdCB0ZXN0ID0gcHJvZ3JhbS5jb21tYW5kKFwidGVzdFwiKS5kZXNjcmlwdGlvbihcbiAgZGVzY3JpcHRpb25gXG4gICAgVGhlc2UgY29tbWFuZHMgYXJlIHVzZWQgZm9yIHJ1bm5pbmcgdGVzdHMuIFRoaXMgaW5jbHVkZXMgdG9vbHMgZm9yXG4gICAgcnVubmluZyB1bml0IHRlc3RzIGEgc2luZ2xlIHRpbWUgb3IgaW4gYSB3YXRjaCBtb2RlLlxuXG4gICAgVXNlIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZm9yIG1vZGlmeWluZyBiZWhhdmlvcjpcblxuICAgICR7Y2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIlBBVFRFUk5cIil9IC0gVGhpcyBjYXVzZXMgdGhlIHRlc3RzIHRvIG9ubHkgcnVuIG9uXG4gICAgZmlsZXMgdGhhdCBtYXRjaCB0aGUgcGF0dGVyblxuXG4gICAgJHtjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiTEVTU1wiKX0gLSBUaGlzIHJlbW92ZXMgdGhlIHZlcmJvc2Ugb3V0cHV0IGxpc3Qgb2ZcbiAgICBhbGwgdGVzdHMgcmFuXG4gIGBcbik7XG5cbnRlc3RcbiAgLmNvbW1hbmQoXCJydW5cIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgUnVucyBhbGwgdW5pdCB0ZXN0cyBpbiB0aGUgdW5pdC10ZXN0IGZvbGRlciBvbmNlLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy90ZXN0L3Rlc3QtcnVuLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcInRlc3QtcnVuIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiKTtcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxuY29uc3QgY2xlYW4gPSBwcm9ncmFtLmNvbW1hbmQoXCJjbGVhblwiKS5kZXNjcmlwdGlvbihcbiAgZGVzY3JpcHRpb25gXG4gICAgQ29tbW9uIGNsZWFuaW5nIHRvb2xzIGZvciB2YXJpb3VzIGZyYWdtZW50cyB3aXRoaW4gdGhlIHByb2plY3QuXG4gIGBcbik7XG5cbmNsZWFuXG4gIC5jb21tYW5kKFwiY2FjaGVcIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgQ2xlYW5zIG91dCBidWlsZCBhbmQgY2FjaGUgZmlsZXMgdG8gaGVscCBlbnN1cmUgYSBjb21wbGV0ZSByZWJ1aWxkIHRha2VzXG4gICAgICBwbGFjZS5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvY2xlYW4vY2xlYW4tY2FjaGUuanNcIikpXG4gICAgICAuZGVmYXVsdCgpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiY2xlYW4tY2FjaGUgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5jb25zdCB0cyA9IHByb2dyYW0uY29tbWFuZChcInRzXCIpLmRlc2NyaXB0aW9uKFxuICBkZXNjcmlwdGlvbmBcbiAgICBUaGVzZSBjb21tYW5kcyBhcmUgdXNlZCBmb3IgcnVubmluZyB0eXBlc2NyaXB0LiBUaGlzIGluY2x1ZGVzIHRvb2xzIGZvclxuICAgIHJ1bm5pbmcgdHlwZXNjcmlwdCBjb21waWxhdGlvbiBhIHNpbmdsZSB0aW1lIG9yIGluIGEgd2F0Y2ggbW9kZS5cbiAgYFxuKTtcblxudHMuY29tbWFuZChcInJ1blwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBSdW5zIHR5cGVzY3JpcHQgY29tcGlsYXRpb24gdG8gY2hlY2sgZm9yIGVycm9ycy4gRG9lcyBOT1QgZW1pdCBmaWxlcywgdGh1c1xuICAgICAgaXMgYSBnb29kIG1lY2hhbmlzbSBmb3IgY2hlY2tpbmcgYSBidWlsZCBiZWZvcmUgcnVubmluZyBhIHJlbGVhc2UuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3RzLmpzXCIpKS5kZWZhdWx0KFwiXCIpLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oXCJ0cyBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbmNvbnN0IHByID0gcHJvZ3JhbVxuICAuY29tbWFuZChcInByXCIpXG4gIC5vcHRpb24oXG4gICAgXCItLXJlcG9VcmwgPHZhbHVlPlwiLFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgVGhlIGh0dHBzIFVSTCB0byB0aGUgcmVwbyB0byBtYWtlIHRoZSBQUiBpbnRvXG4gICAgYFxuICApXG4gIC5vcHRpb24oXG4gICAgXCItLXJlcG9UeXBlIDx2YWx1ZT5cIixcbiAgICBkZXNjcmlwdGlvbmBcbiAgICBUaGUgcmVwb3NpdG9yeSB0eXBlIHRvIG1ha2UgdGhlIFBSIGludG8uIFN1cHBvcnRlZCB0eXBlcyBhcmU6IGdpdCwgZ2l0bGFiXG4gIGBcbiAgKVxuICAub3B0aW9uKFxuICAgIFwiLS1tYXN0ZXJCcmFuY2ggPHZhbHVlPlwiLFxuICAgIGRlc2NyaXB0aW9uYFxuICAgIFRoaXMgaW5kaWNhdGVzIHdoaWNoIGJyYW5jaCBpcyB0aGUgbWFzdGVyL21haW4gb2YgdGhlIHJlcG9zaXRvcnkuXG4gIGBcbiAgKTtcblxucHIuY29tbWFuZChcInJlbGVhc2VcIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgVGhpcyBjcmVhdGVzIHR3byBQUnMgdGhhdCBtZXJnZXMgdGhlIGN1cnJlbnQgcmVtb3RlIHJlbGVhc2UgYnJhbmNoIGludG9cbiAgICAgIHRoZSByZW1vdGUgZGV2IGFuZCBtYXN0ZXIgYnJhbmNoZXMuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVwb1VybCwgcmVwb1R5cGUsIG1hc3RlckJyYW5jaCB9ID0geWFyZ3MocHJvY2Vzcy5hcmd2KS5hcmd2IGFzIHtcbiAgICAgIHJlcG9UeXBlPzogc3RyaW5nO1xuICAgICAgcmVwb1VybD86IHN0cmluZztcbiAgICAgIG1hc3RlckJyYW5jaD86IHN0cmluZztcbiAgICB9O1xuXG4gICAgaWYgKCFyZXBvVXJsIHx8ICFyZXBvVHlwZSB8fCAhbWFzdGVyQnJhbmNoKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiWW91IG11c3Qgc3BlY2lmeSBib3RoIC0tcmVwb1VybCBhbmQgLS1yZXBvVHlwZSB0byB1c2UgdGhpcyBjb21tYW5kXCJcbiAgICAgICk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuXG4gICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYW55IHJlcXVpcmVkIHBlZXIgZGVwZW5kZW5jaWVzIGZvciB0aGlzXG4gICAgYXdhaXQgZW5zdXJlRGVwZW5kZW5jaWVzKCkuY2F0Y2goKCkgPT4gcHJvY2Vzcy5leGl0KDEpKTtcbiAgICBjb25zb2xlLndhcm4oXCJEZXBlbmRlbmN5IGNoZWNrcyBwYXNzZWQsIGNvbnRpbnVpbmcuLi5cIik7XG5cbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9wci9wci1yZWxlYXNlLmpzXCIpKVxuICAgICAgLmRlZmF1bHQocmVwb1VybCwgcmVwb1R5cGUsIG1hc3RlckJyYW5jaClcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJwci1yZWxlYXNlIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiKTtcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxuYXN5bmMgZnVuY3Rpb24gcnVuKCkge1xuICAvLyBMb2FkIGluIGVudmlyb25tZW50IGZyb20gZW52IGZpbGUgYW5kIGFsc28gZW5zdXJlIGNvbmZpZ3VyYXRpb24gbWF0Y2hlcyB0aGVcbiAgLy8gZW52aXJvbm1lbnQgY29uZmlndXJhdGlvbiBzcGVjaWZpZWQgaW4gZW52LmNvbmZpZy50c1xuICBhd2FpdCBjb25maWdFbnYocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiKTtcbiAgcHJvZ3JhbS5wYXJzZShwcm9jZXNzLmFyZ3YpO1xufVxuXG5ydW4oKTtcbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4vY2hhbGsuanNcIjtcbmltcG9ydCB7IGRlc2NyaXB0aW9uIH0gZnJvbSBcIi4vZGVzY3JpcHRpb24uanNcIjtcbmltcG9ydCB7IGRvdGVudiB9IGZyb20gXCIuL2RvdC1lbnYuanNcIjtcbmltcG9ydCB7IGlzRGVmaW5lZCwgaXNTdHJpbmcgfSBmcm9tIFwiLi90eXBlcy5qc1wiO1xuaW1wb3J0IHsgcHJvbXB0Q29uZmlybSB9IGZyb20gXCIuLi9wcm9tcHQvcHJvbXB0LWNvbmZpcm0uanNcIjtcbmltcG9ydCB7IHByb21wdE92ZXJyaWRlRmlsZSB9IGZyb20gXCIuLi9wcm9tcHQvcHJvbXB0LW92ZXJyaWRlLWZpbGUuanNcIjtcblxudHlwZSBFbnZDb25maWdPcHRpb24gPSB7XG4gIHJlcXVpcmVkOiBib29sZWFuO1xuICB3YXJuPzogYm9vbGVhbjtcbiAgbmFtZTogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBkZWZhdWx0Pzogc3RyaW5nIHwgKCgpID0+IFByb21pc2U8c3RyaW5nPik7XG59O1xuXG4vKipcbiAqIE1ldGhvZCB1c2VkIHRvIHJldHJpZXZlIHRoZSBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9uIGZpbGUuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb25maWdFbnYoKSB7XG4gIGNvbnN0IGVudkNvbmZpZzogRW52Q29uZmlnT3B0aW9uW10gPSAoXG4gICAgYXdhaXQgaW1wb3J0KHBhdGgucmVzb2x2ZShcImVudi5jb25maWcudHNcIikpXG4gICkuZGVmYXVsdDtcbiAgaWYgKCFlbnZDb25maWcpIHRocm93IG5ldyBFcnJvcihcIk5vIGVudi5jb25maWcudHMgZmlsZSBmb3VuZC5cIik7XG5cbiAgaWYgKCFBcnJheS5pc0FycmF5KGVudkNvbmZpZykpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJlbnYuY29uZmlnLnRzIGlzIG5vdCBmb3JtYXR0ZWQgY29ycmVjdGx5LiBQbGVhc2UgZm9sbG93IHRoZSBjb3JyZWN0IHR5cGUgY29udmVudGlvbi5cIlxuICAgICk7XG4gIH1cblxuICByZXR1cm4gZW52Q29uZmlnO1xufVxuXG4vKipcbiAqIFRoaXMgZW5zdXJlcyB0aGUgZW52aXJvbm1lbnQgaGFzIGFsbCBvZiB0aGUgbmVjZXNzYXJ5IGNvbmZpZ3VyYXRpb24gdmFyaWFibGVzXG4gKiB0byBtYWtlIHRoZSBzeXN0ZW0gd29yay4gVGhpcyBhbHNvIGV4ZWN1dGVzIHRoZSBkb3RlbnYgbGlicmFyeSB0byBlbmFibGUgZW52XG4gKiBjb25maWd1cmF0aW9uIHZpYSBlbnYgZmlsZS5cbiAqXG4gKiBJZiB0aGUgZW52aXJvbm1lbnQgZG9lcyBub3QgbWVldCB0aGUgcHJvY29uZmlndXJlZCBlbnZpcm9ubWVudCBuZWVkcywgdGhlblxuICogdGhpcyBzY3JpcHQgd2lsbCBlcnJvciBhbmQgbG9nIHdoYXQgaXMgbWlzc2luZyBhbmQgZGV0YWlscyBhYm91dCB0aGVcbiAqIGVudmlyb25tZW50IHZhcmlhYmxlcyB0aGF0IGFyZSBtaXNzaW5nLlxuICpcbiAqIElmIHJlcXVlc3REZWZhdWx0IGlzIHRydWUsIHRoaXMgd2lsbCBwcm9tcHQgdGhlIHVzZXIgaWYgdGhleSB3b3VsZCBsaWtlIHRvXG4gKiBnZW5lcmF0ZSBhIC5lbnYgZmlsZSB3aXRoIGFsbCBvZiB0aGUgZW52aXJvbm1lbnQncyBzZXQgdGhhdCBoYXZlIGEgZGVmYXVsdFxuICogdmFsdWUuIElmIHRoZSB1c2VyIGNob29zZXMgdG8gY3JlYXRlIHRoZSBlbnYgZmlsZSwgdGhlIGRlZmF1bHRzIHdpbGwgZ2V0XG4gKiBhcHBsaWVkIHRvIHRoZSBlbnYgYXMgd2VsbCBhbmQgbm90IGVycm9yLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29uZmlnRW52KHJlcXVlc3REZWZhdWx0PzogYm9vbGVhbikge1xuICAvLyBUZWxsIGRvdGVudiB0byBsb2FkIHRoZSAuZW52IGZpbGVcbiAgZG90ZW52KCk7XG5cbiAgLy8gV2UgbG9hZCBpbiB0aGUgZW52LmNvbmZpZy50cyBmaWxlIGZyb20gdGhlIHByb2plY3Qgcm9vdCB0byBhbmFseXplIGl0IGZvclxuICAvLyBjb21wbGlhbmNlIHdpdGggdGhlIGVudmlyb25tZW50LlxuICB0cnkge1xuICAgIGNvbnN0IGVudkNvbmZpZzogRW52Q29uZmlnT3B0aW9uW10gPSBhd2FpdCBnZXRDb25maWdFbnYoKTtcbiAgICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgd2FybmluZ3M6IHN0cmluZ1tdID0gW107XG5cbiAgICBlbnZDb25maWcuZm9yRWFjaCgoZW52OiBFbnZDb25maWdPcHRpb24pID0+IHtcbiAgICAgIC8vIFNraXAgZmFsc2V5IHZhbHVlc1xuICAgICAgaWYgKCFlbnYpIHJldHVybjtcblxuICAgICAgaWYgKGVudi5yZXF1aXJlZCkge1xuICAgICAgICBpZiAoIXByb2Nlc3MuZW52W2Vudi5uYW1lXSkge1xuICAgICAgICAgIGVycm9ycy5wdXNoKGRlc2NyaXB0aW9uYFxuICAgICAgICAgICAgICBNaXNzaW5nOiAke2Vudi5uYW1lfVxcbkRlc3JpcHRpb246ICR7ZW52LmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgYCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghcHJvY2Vzcy5lbnZbZW52Lm5hbWVdICYmIGVudi53YXJuICE9PSBmYWxzZSkge1xuICAgICAgICAgIHdhcm5pbmdzLnB1c2goZGVzY3JpcHRpb25gXG4gICAgICAgICAgICAgIE1pc3Npbmc6ICR7ZW52Lm5hbWV9XFxuRGVzcmlwdGlvbjogJHtlbnYuZGVzY3JpcHRpb259XG4gICAgICAgICAgICBgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHdhcm5pbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcbiAgICAgICAgICBcIlRoZSBmb2xsb3dpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSByZWNvbW1lbmRlZCBidXQgbWlzc2luZyBmcm9tIHlvdXIgZW52aXJvbm1lbnQ6XFxuXCJcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgY2hhbGsueWVsbG93QnJpZ2h0KGRlc2NyaXB0aW9uYFxuICAgICAgICAgICR7d2FybmluZ3Muam9pbihcIlxcblwiKX1cbiAgICAgICAgYClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBjaGFsay5yZWRCcmlnaHRCb2xkKFxuICAgICAgICAgIFwiVGhlIGZvbGxvd2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHJlcXVpcmVkIGJ1dCBtaXNzaW5nIGZyb20geW91ciBlbnZpcm9ubWVudDpcXG5cIlxuICAgICAgICApXG4gICAgICApO1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgY2hhbGsucmVkQnJpZ2h0KGRlc2NyaXB0aW9uYFxuICAgICAgICAgICR7ZXJyb3JzLmpvaW4oXCJcXG5cIil9XG4gICAgICAgIGApXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFF1aXQgdGhlIHByb2Nlc3MgaWYgcmVxdWlyZW1lbnRzIGFyZSBub3QgbWV0XG4gICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAocmVxdWVzdERlZmF1bHQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvbXB0Q29uZmlybShkZXNjcmlwdGlvbmBcbiAgICAgICAgICBUaGVyZSBzZWVtcyB0byBiZSBzb21lIG1pc3NpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzLiBXb3VsZCB5b3UgbGlrZVxuICAgICAgICAgIHRvIGdlbmVyYXRlIGEgLmVudiBmaWxlIHdpdGggdGhlIGRlZmF1bHQgdmFsdWVzIHNwZWNpZmllZCBpbiB0aGVcbiAgICAgICAgICBlbnYuY29uZmlnIGZpbGU/XG4gICAgICAgIGApO1xuXG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICBjb25zdCBkZWZhdWx0czogW3N0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkXVtdID0gW107XG5cbiAgICAgICAgICBmb3IgKGNvbnN0IGVudiBvZiBlbnZDb25maWcpIHtcbiAgICAgICAgICAgIGRlZmF1bHRzLnB1c2goW1xuICAgICAgICAgICAgICBlbnYubmFtZSxcbiAgICAgICAgICAgICAgaXNTdHJpbmcoZW52LmRlZmF1bHQpXG4gICAgICAgICAgICAgICAgPyBlbnYuZGVmYXVsdFxuICAgICAgICAgICAgICAgIDogaXNEZWZpbmVkKGVudi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgID8gYXdhaXQgZW52LmRlZmF1bHQoKVxuICAgICAgICAgICAgICAgIDogdm9pZCAwLFxuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgZGVmYXVsdEVudiA9IGRlZmF1bHRzXG4gICAgICAgICAgICAuZmlsdGVyKChkKSA9PiBkWzFdKVxuICAgICAgICAgICAgLm1hcCgoZCkgPT4gYCR7ZFswXX09JHtkWzFdfWApXG4gICAgICAgICAgICAuam9pbihcIlxcblwiKTtcblxuICAgICAgICAgIGlmICghZGVmYXVsdEVudikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGRlc2NyaXB0aW9uYFxuICAgICAgICAgICAgICBUaGVyZSBhcmUgbm8gZGVmYXVsdHMgYXZhaWxhYmxlIGZvciB0aGlzIGVudi5jb25maWcuIFNvIHdlIGNhbiBub3RcbiAgICAgICAgICAgICAgZ2VuZXJhdGUgYW4gZW52IGZpbGUgeW91LiBQbGVhc2UgcmV2aWV3IHRoZSBlbnYuY29uZmlnLnRzIGZpbGUgYW5kXG4gICAgICAgICAgICAgIHByb3Blcmx5IHNldCB0aGUgZGVmYXVsdCB2YWx1ZXMgZm9yIHRoZSByZXF1aXJlZCBlbnZpcm9ubWVudFxuICAgICAgICAgICAgICB2YXJpYWJsZXMuXG4gICAgICAgICAgICBgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBlbnZGaWxlUGF0aCA9IHBhdGgucmVzb2x2ZShcIi5lbnZcIik7XG5cbiAgICAgICAgICBjb25zdCBkaWRXcml0ZSA9IGF3YWl0IHByb21wdE92ZXJyaWRlRmlsZShcbiAgICAgICAgICAgIGVudkZpbGVQYXRoLFxuICAgICAgICAgICAgZGVzY3JpcHRpb25gXG4gICAgICAgICAgICAgIFRoZXJlIGFwcGVhcnMgdG8gYWxyZWFkeSBiZSBhIC5lbnYgZmlsZS5cbiAgICAgICAgICAgICAgV291bGQgeW91IGxpa2UgdG8gYWRkIHRoZSBtaXNzaW5nIGRlZmF1bHRzIHRvIGl0P1xuICAgICAgICAgICAgYCxcbiAgICAgICAgICAgICgpID0+IHt9LFxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIG5ldyBlbnYgZmlsZVxuICAgICAgICAgICAgKCkgPT4gZnMud3JpdGVGaWxlKGVudkZpbGVQYXRoLCBkZWZhdWx0RW52KSxcblxuICAgICAgICAgICAgLy8gV2Ugd2lsbCBhZGQgdGhlIGVudiBwYXJhbXMgdG8gdGhlIGV4aXN0aW5nIGVudiBmaWxlIGluc3RlYWQgb2ZcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0XG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKGVudkZpbGVQYXRoLCBgXFxuJHtkZWZhdWx0RW52fWApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmICghZGlkV3JpdGUpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgIFwiRGlkIG5vdCB3cml0ZSB0aGUgLmVudiBmaWxlLiBQbGVhc2UgY29ycmVjdCB0aGUgZW52IGFuZCB0cnkgYWdhaW4uXCJcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQ29uc3VtZSB0aGUgLmVudiBmaWxlIGFnYWluIGFuZCBzZWUgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlXG4gICAgICAgICAgLy8gZW52aXJvbm1lbnRcbiAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICBcIkF0dGVtcHRpbmcgdG8gYnVpbGQgdGhlIGVudiBhZ2FpbiBhbmQgY29udGludWUgd2l0aCB0aGUgY29tbWFuZC4uLlwiXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIHJldHVybiBjb25maWdFbnYoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oZGVzY3JpcHRpb25gXG4gICAgICBObyAke2NoYWxrLmN5YW5CcmlnaHRCb2xkKFxuICAgICAgICBcImVudi5jb25maWcudHNcIlxuICAgICAgKX0gZmlsZSBmb3VuZC4gRW52aXJvbm1lbnQgd2lsbCBub3QgYmUgdmFsaWRhdGVkLlxuICAgIGApO1xuICB9XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBwYXJzZVByb3BzIH0gZnJvbSBcIi4vcGFyc2UtcHJvcHMuanNcIjtcblxuLyoqXG4gKiBDdXN0b20gZG90ZW52IHJvdXRpbmUgdG8gcmVkdWNlIGRlcGVuZGVuY2llcy5cbiAqXG4gKiBUaGlzIHRha2VzIGluIHRoZSBwcm9qZWN0J3MgLmVudiBmaWxlIGFuZCBhcHBsaWVzIHRoZSB2YWx1ZXMgdGhlcmVpbiB0byB0aGVcbiAqIHByb2Nlc3MuZW52IG9iamVjdC5cbiAqXG4gKiBUaGlzIE9OTFkgc3VwcG9ydHMgc2ltcGxlIGtleS92YWx1ZSBwYWlycyBhbmQgZG9lcyBOT1Qgc3VwcG9ydCBhbnkgY29tcGxleFxuICogcHJvcHMgZmlsZSBzdHJ1Y3R1cmVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG90ZW52KHRhcmdldEZpbGU/OiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiLmVudlwiKSkpIHJldHVybjtcbiAgICAvLyBSZWFkIHRoZSAuZW52IGZpbGVcbiAgICBjb25zdCBjb250ZW50cyA9IGZzLnJlYWRGaWxlU3luYyhcbiAgICAgIHBhdGgucmVzb2x2ZSh0YXJnZXRGaWxlIHx8IFwiLmVudlwiKSxcbiAgICAgIFwidXRmOFwiXG4gICAgKTtcbiAgICAvLyBQYXJzZSB0aGUgZmlsZVxuICAgIGNvbnN0IHByb3BzID0gcGFyc2VQcm9wcyhjb250ZW50cyk7XG5cbiAgICAvLyBBcHBseSBvbmx5IHNpbXBsZSBrZXkgdmFsdWUgcGFpcnMgdG8gcHJvY2Vzcy5lbnZcbiAgICBPYmplY3QuZW50cmllcyhwcm9wcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHByb2Nlc3MuZW52W2tleV0gPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHByb2Nlc3MuZW52W2tleV0gPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwiYm9vbGVhblwiKSB7XG4gICAgICAgIHByb2Nlc3MuZW52W2tleV0gPSB2YWx1ZS50b1N0cmluZygpO1xuICAgICAgfVxuICAgIH0pO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGNoYWxrLnJlZChcbiAgICAgICAgICBgRXJyb3IgcmVhZGluZyAuZW52IGZpbGU6XFxuYCxcbiAgICAgICAgICBjaGFsay55ZWxsb3coZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKVxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuIiwKICAgICJ0eXBlIFZhbHVlID0gc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbjtcbnR5cGUgUGFyc2VSZXN1bHQgPSBSZWNvcmQ8c3RyaW5nLCBWYWx1ZSB8IFJlY29yZDxzdHJpbmcsIFZhbHVlPj47XG5cbi8qKlxuICogVGhpcyBwYXJzZXMgYSBwcm9wcyBmaWxlIGludG8gYSBtYXAgb2Yga2V5L3ZhbHVlIHBhaXJzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VQcm9wcyhjb250ZW50czogc3RyaW5nKTogUGFyc2VSZXN1bHQge1xuICBjb25zdCBsaW5lcyA9IGNvbnRlbnRzLnNwbGl0KC9cXHI/XFxuLyk7XG5cbiAgY29uc3QgcmVzdWx0OiBQYXJzZVJlc3VsdCA9IHt9O1xuICBsZXQgY3VycmVudFNlY3Rpb246IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBsZXQgY3VycmVudE9iamVjdDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgbGluZXMuZm9yRWFjaCgobGluZSkgPT4ge1xuICAgIGxpbmUgPSBsaW5lLnRyaW0oKTtcblxuICAgIC8vIElnbm9yZSBlbXB0eSBsaW5lcyBhbmQgY29tbWVudHNcbiAgICBpZiAobGluZSA9PT0gXCJcIiB8fCBsaW5lLnN0YXJ0c1dpdGgoXCIjXCIpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGEgbmV3IHNlY3Rpb25cbiAgICBpZiAobGluZS5lbmRzV2l0aChcIntcIikpIHtcbiAgICAgIGNvbnN0IHNlY3Rpb25OYW1lID0gbGluZS5zcGxpdCgvXFxzKy8pWzBdO1xuICAgICAgY3VycmVudFNlY3Rpb24gPSBzZWN0aW9uTmFtZTtcbiAgICAgIHJlc3VsdFtjdXJyZW50U2VjdGlvbl0gPSB7fTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgdGhlIGVuZCBvZiBhIHNlY3Rpb25cbiAgICBpZiAobGluZSA9PT0gXCJ9XCIpIHtcbiAgICAgIGN1cnJlbnRTZWN0aW9uID0gbnVsbDtcbiAgICAgIGN1cnJlbnRPYmplY3QgPSBudWxsO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFBhcnNlIGtleS12YWx1ZSBwYWlyc1xuICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCgvXihbXFx3Ll0rKVxccyo9XFxzKiguKikkLyk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBjb25zdCBrZXkgPSBtYXRjaFsxXTtcbiAgICAgIGxldCB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiA9IG1hdGNoWzJdO1xuXG4gICAgICAvLyBDb252ZXJ0IHZhbHVlcyB0byB0aGUgYXBwcm9wcmlhdGUgdHlwZVxuICAgICAgaWYgKCFpc05hTihwYXJzZUZsb2F0KHZhbHVlKSkpIHtcbiAgICAgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IFwidHJ1ZVwiKSB7XG4gICAgICAgIHZhbHVlID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IFwiZmFsc2VcIikge1xuICAgICAgICB2YWx1ZSA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBBZGQgdGhlIGtleS12YWx1ZSBwYWlyIHRvIHRoZSByZXN1bHRcbiAgICAgIGlmIChjdXJyZW50T2JqZWN0KSB7XG4gICAgICAgIChcbiAgICAgICAgICByZXN1bHRbY3VycmVudFNlY3Rpb24gPz8gXCJudWxsXCJdIGFzIHVua25vd24gYXMgUmVjb3JkPFxuICAgICAgICAgICAgc3RyaW5nLFxuICAgICAgICAgICAgUmVjb3JkPHN0cmluZywgVmFsdWU+XG4gICAgICAgICAgPlxuICAgICAgICApW2N1cnJlbnRPYmplY3RdW2tleV0gPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlY3Rpb24pIHtcbiAgICAgICAgKHJlc3VsdFtjdXJyZW50U2VjdGlvbl0gYXMgUmVjb3JkPHN0cmluZywgVmFsdWU+KVtrZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGEgbmV3IG9iamVjdCBpbiBhIHNlY3Rpb25cbiAgICBjb25zdCBvYmplY3RNYXRjaCA9IGxpbmUubWF0Y2goL14oW1xcdy5dKylcXC4oW1xcdy5dKylcXHMqPVxccyooLiopJC8pO1xuICAgIGlmIChvYmplY3RNYXRjaCkge1xuICAgICAgY29uc3Qgc2VjdGlvbk5hbWUgPSBvYmplY3RNYXRjaFsxXTtcbiAgICAgIGNvbnN0IG9iamVjdE5hbWUgPSBvYmplY3RNYXRjaFsyXTtcbiAgICAgIGNvbnN0IGtleSA9IG9iamVjdE1hdGNoWzNdO1xuXG4gICAgICBpZiAoIXJlc3VsdFtzZWN0aW9uTmFtZV0pIHtcbiAgICAgICAgcmVzdWx0W3NlY3Rpb25OYW1lXSA9IHt9O1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgICEoXG4gICAgICAgICAgcmVzdWx0W3NlY3Rpb25OYW1lXSBhcyB1bmtub3duIGFzIFJlY29yZDxcbiAgICAgICAgICAgIHN0cmluZyxcbiAgICAgICAgICAgIFJlY29yZDxzdHJpbmcsIFZhbHVlPlxuICAgICAgICAgID5cbiAgICAgICAgKVtvYmplY3ROYW1lXVxuICAgICAgKSB7XG4gICAgICAgIChcbiAgICAgICAgICByZXN1bHRbc2VjdGlvbk5hbWVdIGFzIHVua25vd24gYXMgUmVjb3JkPFxuICAgICAgICAgICAgc3RyaW5nLFxuICAgICAgICAgICAgUmVjb3JkPHN0cmluZywgVmFsdWU+XG4gICAgICAgICAgPlxuICAgICAgICApW29iamVjdE5hbWVdID0ge307XG4gICAgICB9XG5cbiAgICAgICgocmVzdWx0W3NlY3Rpb25OYW1lXSBhcyBhbnkpW29iamVjdE5hbWVdIGFzIGFueSlba2V5XSA9IG51bGw7XG4gICAgICBjdXJyZW50U2VjdGlvbiA9IHNlY3Rpb25OYW1lO1xuICAgICAgY3VycmVudE9iamVjdCA9IG9iamVjdE5hbWU7XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmVycm9yKGBVbnJlY29nbml6ZWQgbGluZTogJHtsaW5lfWApO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgaW5xdWlyZXIgZnJvbSBcImlucXVpcmVyXCI7XG5pbXBvcnQgeyBzdHJpcEluZGVudCB9IGZyb20gXCJjb21tb24tdGFnc1wiO1xuXG4vKipcbiAqIENvbnZlbmllbmNlIHdyYXBwZXIgYXJvdW5kIGN1cnJlbnQgcHJvbXB0IGxpYnJhcnkgb2YgY2hvaWNlIHRvIHByZXNlbnQgYVxuICogY29uZmlybWF0aW9uIGRpYWxvZyBmb3Igd2hlbiBhIGZpbGUgcGF0aCBleGlzdHMuIElmIHRoZSBmaWxlIGRvZXMgbm90IGV4aXN0LFxuICogdGhlcmUgd2lsbCBiZSBubyBwcm9tcHQuXG4gKlxuICogQXBwbGllcyBzdHJpcEluZGVudCB0byB0aGUgaW5wdXQgbWVzc2FnZS5cbiAqXG4gKiBSZXR1cm5zIHRoZSB0cnVlIGZhbHNlIHZhbHVlIG9mIHRoZSBwcm9tcHQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9tcHRPdmVycmlkZUZpbGUoXG4gIGZpbGVQYXRoOiBzdHJpbmcsXG4gIG1lc3NhZ2U6IHN0cmluZyxcbiAgb25Xcml0ZTogKHBhdGg6IHN0cmluZykgPT4gdm9pZCxcbiAgb25OZXc/OiAocGF0aDogc3RyaW5nKSA9PiB2b2lkLFxuICBvbk92ZXJyaWRlPzogKHBhdGg6IHN0cmluZykgPT4gdm9pZCxcbiAgZGVmYXVsdFZhbHVlPzogYm9vbGVhblxuKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIGxldCBvdXQgPSBkZWZhdWx0VmFsdWUgfHwgZmFsc2U7XG5cbiAgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpKSB7XG4gICAgY29uc3QgeyByZXN1bHQgfSA9IGF3YWl0IGlucXVpcmVyLnByb21wdDx7XG4gICAgICByZXN1bHQ6IGJvb2xlYW47XG4gICAgfT4oW1xuICAgICAge1xuICAgICAgICB0eXBlOiBcImNvbmZpcm1cIixcbiAgICAgICAgbmFtZTogXCJyZXN1bHRcIixcbiAgICAgICAgbWVzc2FnZTogc3RyaXBJbmRlbnRgJHttZXNzYWdlfWAsXG4gICAgICAgIGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZSxcbiAgICAgIH0sXG4gICAgXSk7XG5cbiAgICAvLyBXaGVuIHllcy90cnVlIGlzIHNlbGVjdGVkLCBydW4gdGhlIG9uQ29uZmlybWVkIGNhbGxiYWNrXG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgb25Xcml0ZShmaWxlUGF0aCk7XG4gICAgICBvbk92ZXJyaWRlPy4oZmlsZVBhdGgpO1xuICAgIH1cblxuICAgIG91dCA9IHJlc3VsdDtcbiAgfSBlbHNlIHtcbiAgICBvbldyaXRlKGZpbGVQYXRoKTtcbiAgICBvbk5ldz8uKGZpbGVQYXRoKTtcbiAgfVxuXG4gIHJldHVybiBvdXQ7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBpbnF1aXJlciBmcm9tIFwiaW5xdWlyZXJcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBleGVjSW5zdGFsbCB9IGZyb20gXCIuLi9saWIvZXhlYy9leGVjLWluc3RhbGwuanNcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uL2xpYi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgZnV6enlTb3VyY2UgfSBmcm9tIFwiLi4vbGliL3V0aWwvZnV6enktc291cmNlLmpzXCI7XG5pbXBvcnQgeyBnZXRQYWNrYWdlTWFuYWdlciB9IGZyb20gXCIuLi9saWIvZXhlYy9nZXQtcGFja2FnZS1tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBpc1BhY2thZ2VBdmFpbGFibGUgfSBmcm9tIFwiLi4vbGliL3V0aWwvaXMtcGFja2FnZS1hdmFpbGFibGUuanNcIjtcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi4vbGliL3V0aWwvd2FpdC5qc1wiO1xuXG5leHBvcnQgZW51bSBEZXBlbmRlbmN5UmVzb2x1dGlvbiB7XG4gIEluc3RhbGwgPSBcIkluc3RhbGwgdG8gY3VycmVudCBwcm9qZWN0XCIsXG4gIEluc3RhbGxPbmNlID0gXCJJbnN0YWxsIG9uY2UgdG8gY3VycmVudCBwcm9qZWN0XCIsXG4gIEluc3RhbGxBYm92ZSA9IFwiSW5zdGFsbCBpbiBwYXJlbnQgZGlyZWN0b3J5IChNYWtlcyBwYWNrYWdlIGF2YWlsYWJsZSB0byBhbGwgcGVlciBwcm9qZWN0cylcIixcbiAgRG9Ob3RoaW5nID0gXCJEbyBOb3RoaW5nICh0aGlzIHdpbGwgZW5kIHRoaXMgY3VycmVudCBwcm9jZXNzIGFzIHRoZSBwYWNrYWdlIGlzIHJlcXVpcmVkKVwiLFxufVxuXG4vKipcbiAqIFRoaXMgY2hlY2tzIHRoZSB0YXJnZXQgcHJvamVjdCBmb3IgdGhlIHByZXNlbmNlIG9mIGRlcGVuZGVuY2llcyB0aGF0IGFyZVxuICogcmVxdWlyZWQgYnV0IGFyZSBkZXRyaW1lbnRhbCB0byBleHBlcmllbmNlIGFuZCBwZXJmb3JtYW5jZSB0byBpbmNsdWRlIGFzIGFcbiAqIGRlcGVuZGVuY3kgb2YgdGhlIHBhY2thZ2UgZGlyZWN0bHkuXG4gKlxuICogQW4gZXhhbXBsZSBvZiBzdWNoIGRlcGVuZGVuY3kgd291bGQgYmUgcHVwcGV0ZWVyIGFzIGhhdmluZyBpdCBjYW4gdHJpZ2dlclxuICogZnVsbCBpbnN0YWxscyBhbmQgY29tcGlsYXRpb24gb2YgdGhlIGRlcGVuZGVuY3kgcGVyIHByb2plY3QgdGhhdCBuZWVkcyBpdC5cbiAqXG4gKiBTbywgdGhpcyB3aWxsIHJlcXVlc3QgdGhlIGRlcGVuZGVuY3kgdG8gYmUgaW5zdGFsbGVkIGFzIGEgb25lIHRpbWUgdG8gdGhlXG4gKiBjdXJyZW50IHByb2plY3Qgb3IgcmVxdWVzdCB0byBiZSBpbnN0YWxsZWQgYWJvdmUgdGhlIHRhcmdldCBwcm9qZWN0IHRvIGNhdXNlXG4gKiBpdCB0byBiZSBhdmFpbGFibGUgdG8gcGVlciBwcm9qZWN0cy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGVuc3VyZURlcGVuZGVuY2llcyhcbiAgZGVwZW5kZW5jaWVzPzogc3RyaW5nW10sXG4gIGZvcmNlUmVzb2x1dGlvbj86IERlcGVuZGVuY3lSZXNvbHV0aW9uXG4pIHtcbiAgY29uc3QgcmVxdWlyZWREZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmNpZXMgfHwgW1wicHVwcGV0ZWVyXCJdO1xuXG4gIGZvciAoY29uc3QgZGVwZW5kZW5jeSBvZiByZXF1aXJlZERlcGVuZGVuY2llcykge1xuICAgIGNvbnNvbGUud2FybihcIkNoZWNraW5nIG9uIGRlcGVuZGVuY3kgYXZhaWxhYmlsaXR5OlwiLCBkZXBlbmRlbmN5KTtcbiAgICBjb25zdCBpc0F2YWlsYWJsZSA9IGF3YWl0IGlzUGFja2FnZUF2YWlsYWJsZShkZXBlbmRlbmN5KTtcblxuICAgIGlmICghaXNBdmFpbGFibGUpIHtcbiAgICAgIGxldCByZXNvbHV0aW9uID0gZm9yY2VSZXNvbHV0aW9uO1xuXG4gICAgICBpZiAoIXJlc29sdXRpb24pIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgaW5xdWlyZXIucHJvbXB0PHtcbiAgICAgICAgICByZXNvbHV0aW9uOiBEZXBlbmRlbmN5UmVzb2x1dGlvbjtcbiAgICAgICAgfT4oW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6IFwiYXV0b2NvbXBsZXRlXCIsXG4gICAgICAgICAgICBuYW1lOiBcInJlc29sdXRpb25cIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBIb3cgZG8geW91IHdhbnQgdG8gcmVzb2x2ZSB0aGUgbWlzc2luZyBwYWNrYWdlIFwiJHtkZXBlbmRlbmN5fVwiOmAsXG4gICAgICAgICAgICBzb3VyY2U6IGZ1enp5U291cmNlKFtcbiAgICAgICAgICAgICAgRGVwZW5kZW5jeVJlc29sdXRpb24uSW5zdGFsbE9uY2UsXG4gICAgICAgICAgICAgIERlcGVuZGVuY3lSZXNvbHV0aW9uLkluc3RhbGxBYm92ZSxcbiAgICAgICAgICAgICAgRGVwZW5kZW5jeVJlc29sdXRpb24uRG9Ob3RoaW5nLFxuICAgICAgICAgICAgXSksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSk7XG5cbiAgICAgICAgcmVzb2x1dGlvbiA9IHJlc3VsdC5yZXNvbHV0aW9uO1xuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKHJlc29sdXRpb24pIHtcbiAgICAgICAgY2FzZSBEZXBlbmRlbmN5UmVzb2x1dGlvbi5JbnN0YWxsOlxuICAgICAgICAgIGF3YWl0IGV4ZWNJbnN0YWxsKFtkZXBlbmRlbmN5XSwgXCJFXCIpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRGVwZW5kZW5jeVJlc29sdXRpb24uSW5zdGFsbE9uY2U6XG4gICAgICAgICAgZXhlY0luc3RhbGwoW2RlcGVuZGVuY3ldLCBcIkVcIiwgdHJ1ZSk7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBEZXBlbmRlbmN5UmVzb2x1dGlvbi5JbnN0YWxsQWJvdmU6IHtcbiAgICAgICAgICAvLyBTYXZlIHRoZSBjdXJyZW50IGN3ZFxuICAgICAgICAgIGNvbnN0IGN3ZCA9IHByb2Nlc3MuY3dkKCk7XG4gICAgICAgICAgLy8gQ2hhbmdlIGRpcmVjdG9yeSB0byB0aGUgcGFyZW50IGRpcmVjdG9yeS5cbiAgICAgICAgICBwcm9jZXNzLmNoZGlyKFwiLi5cIik7XG4gICAgICAgICAgY29uc3QgcGFja2FnZU1hbmFnZXIgPSBhd2FpdCBnZXRQYWNrYWdlTWFuYWdlcigpO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgZm9yIGEgcGFja2FnZS5qc29uXG4gICAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSkpIHtcbiAgICAgICAgICAgIC8vIFBlcmZvcm0gYW4gaW5pdCB0byBtYWtlIHRoZSBwYWNrYWdlXG4gICAgICAgICAgICBleGVjU3luYyhwYWNrYWdlTWFuYWdlclswXSwgW1wiaW5pdFwiLCBcIi15XCJdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBJbnN0YWxsIHRoZSBkZXBlbmRlbmN5XG4gICAgICAgICAgYXdhaXQgZXhlY0luc3RhbGwoW2RlcGVuZGVuY3ldLCBcIkVcIik7XG4gICAgICAgICAgLy8gUmV0dXJuIHRvIG9yaWdpbmFsIGN3ZFxuICAgICAgICAgIHByb2Nlc3MuY2hkaXIoY3dkKTtcbiAgICAgICAgICAvLyBQZXJmb3JtIGFuIGF3YWl0IHRvIGxldCBmaWxlIHN5c3RlbSBmbHVzaFxuICAgICAgICAgIGF3YWl0IHdhaXQoMTAwKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwKICAgICJpbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgZ2V0UGFja2FnZU1hbmFnZXIgfSBmcm9tIFwiLi9nZXQtcGFja2FnZS1tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBpc0RlZmluZWQgfSBmcm9tIFwiLi4vdXRpbC90eXBlcy5qc1wiO1xuXG4vKipcbiAqIEV4ZWN1dGVzIGFuIGBucG0gaW5zdGFsbCBbcGFja2FnZXMuLi5dYCBpbiB0aGUgY3VycmVudCBjb250ZXh0LlxuICpcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY29tbWFuZCBzdWNjZWVkZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjSW5zdGFsbChcbiAgcGFja2FnZXM6IHN0cmluZ1tdLFxuICBtb2RlPzogXCJEXCIgfCBcIkRFXCIgfCBcIkVcIixcbiAgbm9TYXZlPzogYm9vbGVhblxuKSB7XG4gIGNvbnN0IG1hbmFnZXIgPSBhd2FpdCBnZXRQYWNrYWdlTWFuYWdlcigpO1xuICBjb25zdCB0b0luc3RhbGwgPSBwYWNrYWdlcy5maWx0ZXIoaXNEZWZpbmVkKTtcblxuICByZXR1cm4gYXdhaXQgZXhlY1N5bmMobWFuYWdlclswXSwgW1xuICAgIFwiaVwiLFxuICAgIG5vU2F2ZSA/IFwiLS1uby1zYXZlXCIgOiBudWxsLFxuICAgIG1vZGUgPyBgLSR7bW9kZX1gIDogbnVsbCxcbiAgICAuLi50b0luc3RhbGwsXG4gIF0pO1xufVxuIiwKICAgICJpbXBvcnQgZnV6enkgZnJvbSBcImZ1enp5XCI7XG5cbmV4cG9ydCBjb25zdCBmdXp6eVNvdXJjZSA9XG4gIChvcHRpb25zOiBTZXQ8c3RyaW5nPiB8IHN0cmluZ1tdKSA9PiBhc3luYyAoXzogdW5rbm93biwgaW5wdXQ6IHN0cmluZykgPT4ge1xuICAgIGxldCBvcHRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgIG9wdHMgPSBBcnJheS5mcm9tKG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRzID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICByZXR1cm4gZnV6enkuZmlsdGVyKGlucHV0IHx8IFwiXCIsIG9wdHMpLm1hcCgoZSkgPT4gZS5zdHJpbmcpO1xuICB9O1xuIiwKICAgICIvKipcbiAqIENoZWNrcyBpZiB0aGUgcmVxdWVzdGVkIHBhY2thZ2UgaXMgYXZhaWxhYmxlIHRvIHRoZSB0YXJnZXQgcHJvamVjdC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzUGFja2FnZUF2YWlsYWJsZShwYWNrYWdlTmFtZTogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgaW1wb3J0KHBhY2thZ2VOYW1lKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiUmVxdWVzdGVkIHBhY2thZ2UgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGN1cnJlbnQgcHJvamVjdDpcIixcbiAgICAgIHBhY2thZ2VOYW1lXG4gICAgKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiIKICBdLAogICJtYXBwaW5ncyI6ICI7O3FsQkFBYSxpQkFBUSxDQUNuQixLQUFNLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUNyRCxJQUFLLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUNwRCxPQUFRLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN2RCxNQUFPLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN0RCxLQUFNLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUNyRCxRQUFTLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN4RCxXQUFZLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUMzRCxVQUFXLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUMxRCxhQUFjLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUM3RCxZQUFhLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUM1RCxXQUFZLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUMzRCxjQUFlLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUM5RCxZQUFhLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUM1RCxLQUFNLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUNyRCxLQUFNLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUNyRCxNQUFPLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN0RCxNQUFPLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN0RCxZQUFhLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUM1RCxPQUFRLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN2RCxNQUFPLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN0RCxTQUFVLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN6RCxRQUFTLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN4RCxPQUFRLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN2RCxVQUFXLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUMxRCxhQUFjLElBQUksSUFBbUIsWUFBWSxFQUFLLEtBQUssR0FBRyxXQUM5RCxZQUFhLElBQUksSUFBbUIsWUFBWSxFQUFLLEtBQUssR0FBRyxXQUM3RCxlQUFnQixJQUFJLElBQW1CLFlBQVksRUFBSyxLQUFLLEdBQUcsV0FDaEUsY0FBZSxJQUFJLElBQW1CLFlBQVksRUFBSyxLQUFLLEdBQUcsV0FDL0QsYUFBYyxJQUFJLElBQW1CLFlBQVksRUFBSyxLQUFLLEdBQUcsV0FDOUQsZ0JBQWlCLElBQUksSUFBbUIsWUFBWSxFQUFLLEtBQUssR0FBRyxXQUNqRSxlQUFnQixJQUFJLElBQ2xCLGtCQUFrQixFQUFLLEtBQUssR0FBRyxXQUNqQyxjQUFlLElBQUksSUFDakIsa0JBQWtCLEVBQUssS0FBSyxHQUFHLFdBQ2pDLGlCQUFrQixJQUFJLElBQ3BCLGtCQUFrQixFQUFLLEtBQUssR0FBRyxXQUNqQyxnQkFBaUIsSUFBSSxJQUNuQixrQkFBa0IsRUFBSyxLQUFLLEdBQUcsV0FDakMsZUFBZ0IsSUFBSSxJQUNsQixrQkFBa0IsRUFBSyxLQUFLLEdBQUcsV0FDakMsa0JBQW1CLElBQUksSUFDckIsa0JBQWtCLEVBQUssS0FBSyxHQUFHLFdBQ2pDLGdCQUFpQixJQUFJLElBQ25CLGtCQUFrQixFQUFLLEtBQUssR0FBRyxXQUNqQyxlQUFnQixJQUFJLElBQ2xCLGtCQUFrQixFQUFLLEtBQUssR0FBRyxXQUNqQyxlQUFnQixJQUFJLElBQ2xCLGtCQUFrQixFQUFLLEtBQUssR0FBRyxXQUNqQyxVQUFXLElBQUksSUFBbUIsa0JBQWtCLEVBQUssS0FBSyxHQUFHLFdBQ2pFLFVBQVcsSUFBSSxJQUFtQixrQkFBa0IsRUFBSyxLQUFLLEdBQUcsV0FDakUsZ0JBQWlCLElBQUksSUFDbkIsa0JBQWtCLEVBQUssS0FBSyxHQUFHLFVBQ25DLElDckRBLHNCQUFTLHFCQU1GLFNBQVMsQ0FBVyxDQUFDLEtBQThCLEVBQWEsQ0FDckUsTUFBTyxHQUFHLEdBQVksRUFBSyxHQUFHLENBQUkscUJDbUU3QixTQUFTLEVBQVEsQ0FBQyxFQUF5QixDQUNoRCxPQUFPLEdBQU8sRUFBSSxhQUFvQixPQW9CakMsU0FBUyxDQUFZLENBQUMsRUFBcUMsQ0FDaEUsT0FBTyxJQUFhLFFBQUssSUFBUSxLQ2hHbkMseUJBQ0Esc0JBQVMscUJBVVQsZUFBc0IsQ0FBYSxDQUNqQyxFQUNBLEVBQ0EsRUFDa0IsQ0FDbEIsTUFBUSxVQUFXLE1BQU0sR0FBUyxPQUUvQixDQUNELENBQ0UsS0FBTSxVQUNOLEtBQU0sU0FDTixRQUFTLEtBQWMsSUFDdkIsUUFBUyxDQUNYLENBQ0YsQ0FBQyxFQUdELEdBQUksRUFBUSxJQUFjLEVBRTFCLE9BQU8sZ0JDNUJULFNBQVMsRUFBWSxDQUFDLEVBQW9CLENBQ3hDLE9BQU8sSUFBYSxRQUFLLElBQVEsS0FNNUIsU0FBUyxFQUFtQixDQUNqQyxFQUMrQyxDQUMvQyxPQUNFLEdBQWUsQ0FBRyxHQUNsQixHQUFlLEVBQUksTUFBTSxHQUN6QixHQUFlLEVBQUksTUFBTSxFQ0Q3QixlQUFlLEVBQUcsQ0FBQyxFQUFpQixFQUFzQyxDQUFDLEVBQUcsQ0FDNUUsR0FBSSxDQUNGLE1BQU0sRUFBUyxJQUFJLFVBQVUsQ0FBQyxFQUFTLEdBQUcsRUFBSyxPQUFPLENBQVMsQ0FBQyxFQUFHLENBQ2pFLE1BQU8sQ0FBQyxVQUFXLFVBQVcsU0FBUyxFQUN2QyxJQUFLLFFBQVEsR0FDZixDQUFDLEVBRUQsR0FBSSxFQUFPLFdBQWEsRUFBRyxDQUN6QixJQUFLLEdBQUksT0FDUCxRQUFRLE1BQ04sVUFBVSxLQUFXLEVBQUssS0FBSyxHQUFHLHVCQUNoQyxFQUFPLFVBRVgsRUFDQSxRQUFRLE1BQU0sSUFBSSxNQUFNLEVBQUUsS0FBSyxFQUVqQyxNQUFPLFVBRUYsRUFBUCxDQUNBLElBQUssR0FBSSxPQUFRLENBQ2YsR0FBSSxHQUFvQixDQUFHLEVBQ3pCLFFBQVEsTUFDTixVQUFVLEtBQVcsRUFBSyxLQUFLLEdBQUcsdUJBQXVCLEVBQUksUUFDL0QsVUFDUyxhQUFlLE1BQ3hCLFFBQVEsTUFBTSxFQUFJLE9BQU8sRUFHM0IsUUFBUSxNQUFNLElBQUksTUFBTSxFQUFFLEtBQUssRUFHakMsTUFBTyxHQUdULE1BQU8sT0FNSSxlQUZiLEdBQUksT0FBUyxHQUVBLEVBQW1DLEtDN0NoRCxlQUFzQixDQUFpQixFQUFHLENBQ3hDLEdBQUksR0FBVSxPQUFPLEdBRXJCLEdBQUksTUFBTSxFQUFTLE1BQU8sQ0FBQyxXQUFXLENBQUMsRUFDckMsR0FBVyxDQUFDLE1BQU8sTUFBTSxNQUV6QixJQUFXLENBQUMsTUFBTyxLQUFLLEVBRzFCLE9BQU8sT0FoQkwsR0FBb0Qsa0JBRnhELE1DR0EsZUFBc0IsQ0FBSSxDQUFDLEVBQVcsQ0FDcEMsTUFBTSxJQUFJLFFBQVEsQ0FBQyxJQUFNLFdBQVcsRUFBRyxDQUFDLENBQUMsRUNIM0MseUJBQ0Esb0JBT0EsZUFBc0IsQ0FBZSxFQUFHLENBQ3RDLFFBQVEsS0FDTixtQ0FDQSxFQUFNLGlCQUFpQixFQUFLLFFBQVEsZ0JBQWdCLENBQUMsQ0FDdkQsRUFFQSxJQUFJLEVBQTBCLE1BQzVCLE1BQWEsU0FBSyxRQUFRLGdCQUFnQixJQUMxQyxRQUFRLEVBSVYsTUFBTSxFQUFXLE1BQU0sR0FBRyxhQUFhLEVBQUssUUFBUSxlQUFlLENBQUMsRUFxQ3BFLE9BbkNBLEVBQVMsSUFDSixFQUNILFNBQVUsT0FDVixLQUFNLGNBQ04sS0FBTSxFQUFLLFFBQVEsWUFBWSxFQUMvQixZQUFhLEdBQ2IsTUFBTyxJQUNGLEVBQU8sTUFDVixhQUFjLEdBQ2QsT0FBUSxFQUFLLFFBQVEsY0FBYyxFQUNuQyxVQUFXLEdBQ1gsY0FBZSxDQUNiLE9BQVEsQ0FDTixhQUFjLE1BQ2hCLENBQ0YsRUFDQSxNQUFPLElBQ0YsRUFBTyxPQUFPLE1BQ2pCLFFBQVMsQ0FDUCxJQUFLLE1BQU0sUUFBUSxFQUFPLE9BQU8sT0FBTyxPQUFPLEVBQzNDLEVBQU8sT0FBTyxPQUFPLFFBQ3JCLENBQUMsRUFBTyxPQUFPLE9BQU8sT0FBTyxJQUFNLENBQUMsRUFDeEMsR0FBSSxHQUFVLFNBQVMsSUFBSSxDQUFDLElBQWMsRUFBSyxRQUFRLENBQUMsQ0FBQyxHQUFLLENBQUMsRUFDL0QsZUFDRixFQUFFLE9BQU8sT0FBTyxDQUNsQixFQUNBLFlBQWEsRUFDZixFQUNBLFFBQVMsQ0FDUCxNQUFPLENBQ0wsT0FBUSxFQUFLLFFBQVEsWUFBWSxDQUNuQyxDQUNGLENBQ0YsRUFFTyxnQkF2RFQsTUNIQSwwQkFDQSx5QkFDQSxxQkFFQSxlQUFzQixDQUF5QixFQUFHLENBQ2hELE1BQU0sRUFBYyxHQUFHLGFBQWEsR0FBSyxRQUFRLGNBQWMsQ0FBQyxFQUVoRSxPQUFPLEdBQ0wsRUFBWSxjQUFnQixDQUFDLEVBQzdCLEVBQVksa0JBQW9CLENBQUMsQ0FDbkMsZ0JDVkYseUJBQ0EscUJBRUEsZUFBc0IsQ0FBb0IsRUFBRyxDQUUzQyxPQURvQixHQUFHLGFBQWEsR0FBSyxRQUFRLGNBQWMsQ0FBQyxFQUM3QyxTQUFXLGdCQ0xoQyx3QkFDQSx5QkFDQSxxQkFTQSxlQUE4QixFQUFHLEVBQUcsQ0FLbEMsR0FKQSxRQUFRLElBQUkscUJBQ1YsUUFBUSxJQUFJLHNCQUF5QixNQUFNLEVBQXFCLEVBRWxFLFFBQVEsS0FBSyxFQUFNLGlCQUFpQiwrQkFBK0IsQ0FBQyxHQUMvRCxHQUFHLFdBQVcsR0FBSyxRQUFRLHFCQUFxQixDQUFDLEVBQUcsQ0FDdkQsUUFBUSxLQUNOLHFGQUNGLEVBQ0EsT0FHRixNQUFNLEVBQVMsTUFBTSxFQUFnQixFQUVyQyxFQUFPLEtBQU8sR0FBSyxRQUFRLFlBQVksRUFDdkMsRUFBTyxNQUFPLE9BQVMsR0FBSyxRQUFRLGNBQWMsRUFFbEQsRUFBTyxNQUFPLGNBQWUsU0FBVyxPQUFPLEtBQzdDLE1BQU0sRUFBMEIsQ0FDbEMsRUFFQSxNQUFXLFNBQU0sQ0FBTSxFQUN2QixRQUFRLEtBQUssRUFBTSxpQkFBaUIsc0NBQXNDLENBQUMsZ0JBOUI3RSxLQUNBLElBQ0EsS0FDQSxNQ0ZPLFNBQVMsRUFBaUIsQ0FDL0IsRUFDQSxDQUNBLE1BQU0sRUFBYSxDQUFDLElBQW9CLENBQUMsSUFBa0MsQ0FFekUsR0FEQSxFQUFHLEVBQVMsQ0FBRyxFQUNYLEVBQUssUUFBUSxLQUFLLENBQUMsTUFDbEIsU0FBUSxLQUFLLENBQUMsR0FJckIsUUFBUSxHQUFHLE9BQVEsRUFBVyxNQUFNLENBQUMsRUFFckMsUUFBUSxHQUFHLFNBQVUsRUFBVyxRQUFRLENBQUMsRUFFekMsUUFBUSxHQUFHLFVBQVcsRUFBVyxTQUFTLENBQUMsRUFDM0MsUUFBUSxHQUFHLFVBQVcsRUFBVyxTQUFTLENBQUMsRUFDM0MsUUFBUSxHQUFHLFVBQVcsRUFBVyxTQUFTLENBQUMsRUFFM0MsUUFBUSxHQUFHLG9CQUFxQixFQUFXLG1CQUFtQixDQUFDLEVDbkJqRSxTQUFTLEVBQVUsRUFBRyxDQUNwQixHQUFJLEtBQVksS0FBTSxPQUV0QixHQUFVLFlBQVksSUFBTSxDQUMxQixNQUFPLEdBQU0sT0FBUyxFQUFHLENBQ3ZCLE1BQU0sRUFBVSxHQUFNLE1BQU0sRUFDNUIsR0FBSSxFQUVGLFFBQVEsSUFBSSxHQUFHLENBQU8sSUFHekIsR0FBRyxFQU9ELFNBQVMsRUFBUSxJQUFJLEVBQWdCLENBQzFDLEdBQU0sS0FBSyxDQUFPLEVBQ2xCLEdBQVcsTUF2QlAsR0FDRixHQUF3QixtQkFEdEIsR0FBaUIsQ0FBQyxJQ0N4Qiw4QkFDQSxxQkFDQSx5QkFVQSxlQUE4QixFQUFHLENBQy9CLEVBQ0EsQ0FDQSxRQUFRLEtBQ04sZ0NBQ0EsRUFBTSxpQkFBaUIsR0FBSyxRQUFRLFlBQVksQ0FBQyxFQUNqRCxJQUNGLEVBRUEsUUFBUSxJQUFJLHFCQUNWLFFBQVEsSUFBSSxzQkFBeUIsTUFBTSxFQUFxQixFQUNsRSxRQUFRLElBQUksY0FDVixRQUFRLElBQUksZUFBaUIsR0FBSyxRQUFRLGNBQWMsRUFDMUQsTUFBTSxFQUFpQixNQUFNLEVBQWtCLEVBRS9DLEdBQUksRUFBZSxLQUFPLE1BQ3hCLFFBQVEsTUFDTixpRkFDRixFQUdGLE1BQU0sRUFBZSxHQUFjLE1BQU0sRUFBZSxHQUFJLENBQzFELFVBQ0EsR0FBSyxRQUFRLHFCQUFxQixDQUNwQyxDQUFDLEVBS0QsUUFBUSxNQUFNLGFBQWEsRUFBSSxFQUMvQixRQUFRLE1BQU0sT0FBTyxFQUNyQixRQUFRLE1BQU0sWUFBWSxNQUFNLEVBQ2hDLEdBQVMsbUJBQW1CLFFBQVEsS0FBSyxFQUN6QyxJQUFJLEVBQVcsR0E2QmYsR0EzQkEsUUFBUSxNQUFNLEdBQUcsV0FBWSxNQUFPLEVBQU8sSUFBUSxDQUNqRCxHQUFJLEdBQU8sRUFBSSxNQUFRLEVBQUksT0FBUyxJQUNsQyxFQUFhLEtBQUssRUFDbEIsUUFBUSxLQUFLLENBQUMsVUFDTCxHQUFPLEVBQUksTUFBUSxFQUFJLE9BQVMsSUFDekMsRUFBYSxLQUFLLEVBQ2xCLFFBQVEsS0FBSyxDQUFDLFVBQ0wsRUFBTSxTQUFTLElBQU0sS0FBTyxFQUFNLFNBQVMsSUFBTSxJQUFLLENBQy9ELEdBQUksRUFBVSxPQUNkLEVBQVcsR0FDWCxNQUFNLEdBQVksRUFDbEIsRUFBVyxXQUNGLEVBQU0sU0FBUyxJQUFNLEtBQU8sRUFBTSxTQUFTLElBQU0sSUFJMUQsR0FIQSxFQUFhLEtBQUssRUFHZCxFQUFJLE1BQ04sUUFBUSxLQUFLLEdBQUcsTUFFaEIsU0FBUSxLQUFLLENBQUMsRUFHbkIsRUFHRCxRQUFRLE1BQU0sS0FBSyxFQUFhLEtBQUssRUFFakMsRUFDRixFQUFTLENBQVksTUFFckIsR0FBYSxPQUFPLEdBQUcsZUFBaUIsQ0FBQyxFQUFNLENBQzdDLEdBQVMsR0FBRyxFQUFLLFNBQVMsRUFBRSxNQUFNLEVBQUcsRUFBRSxHQUFHLEVBQzNDLEVBRUQsRUFBYSxPQUFPLEdBQUcsZUFBaUIsQ0FBQyxFQUFNLENBQzdDLEdBQVMsR0FBRyxFQUFLLFNBQVMsRUFBRSxNQUFNLEVBQUcsRUFBRSxHQUFHLEVBQzNDLEVBSUgsR0FBa0IsTUFBTyxFQUFpQixJQUFrQyxDQUkxRSxHQUhBLEVBQWEsS0FBSyxFQUNsQixRQUFRLEtBQUssbUJBQW1CLEVBQ2hDLFFBQVEsS0FBSyxFQUFNLGNBQWMsQ0FBTyxDQUFDLEVBQ3JDLEdBQU8sYUFBZSxNQUN4QixRQUFRLEtBQUssRUFBTSxjQUFjLEVBQUksT0FBUyxFQUFJLE9BQU8sQ0FBQyxFQUU1RCxRQUFRLEtBQUssQ0FBQyxFQUNmLGdCQWhHSCxLQUlBLElBQ0EsSUFFQSxLQUNBLHVDQ0FBLGVBQThCLEVBQUcsRUFBRyxDQUNsQyxRQUFRLElBQUksU0FBVyxjQUl2QixHQUFZLEVBRVosUUFBUSxLQUFLLEVBQU0saUJBQWlCLHdCQUF3QixDQUFDLEVBQzdELFFBQVEsSUFBSSxxQkFBdUIsTUFBTSxFQUFxQixFQUM5RCxNQUFNLEdBQWEsZ0JBakJyQixLQUNBLEtBQ0EsSUFDQSxNQ0hBLG9CQUNBLG9CQVFBLGVBQXNCLEVBQWlCLEVBQUcsQ0FFeEMsR0FEZSxFQUFLLFNBQVMsRUFBSyxRQUFRLEdBQVcsSUFBSSxDQUFDLElBQU0sT0FDcEQsT0FBTyxFQUFLLFFBQVEsR0FBVyxRQUFRLEVBQ25ELE9BQU8sRUFBSyxRQUFRLEdBQVcsV0FBVyxNQVR0QyxvQkFBWSxHQUFJLGNBQWMsSUFBSSxJQUFJLElBQUssWUFBWSxHQUFHLENBQUMsSUNLakUsZUFBc0IsQ0FBVSxDQUM5QixFQUNBLEVBQXNDLENBQUMsRUFDdkMsQ0FDQSxNQUFNLEVBQVUsTUFBTSxFQUFrQixFQUV4QyxPQUFPLEVBQVMsRUFBUSxHQUFJLENBQzFCLE1BQ0EsRUFDQSxFQUFLLE9BQVMsR0FBSyxFQUFLLEtBQU8sS0FBTyxLQUFZLE9BQ2xELEdBQUcsQ0FDTCxDQUFDLGdCQW5CSCxJQUNBLHVDQ0RBLHFCQVVBLGVBQThCLEVBQUcsQ0FDL0IsRUFDQSxLQUNHLEVBQ0gsQ0FDQSxNQUFNLEVBQWUsR0FBSyxRQUFRLEdBQUcsRUFDckMsUUFBUSxJQUFJLGFBQWUsRUFDM0IsUUFBUSxJQUFJLHFCQUF1QixNQUFNLEVBQXFCLEVBQzlELE1BQU0sRUFBc0IsR0FBSyxRQUFRLFlBQVksRUFFL0MsRUFBVyxNQUFNLEdBQWtCLEVBTXpDLEdBTEEsUUFBUSxNQUFNLENBQVEsRUFLbEIsR0FBVyxFQUFRLE9BQVMsRUFDOUIsUUFBUSxJQUFJLHFCQUF1QixFQUFRLEtBQUssR0FBRyxFQUdyRCxHQUFJLElBQVUsU0FDWixJQUNHLEVBQVcsWUFBYSxDQUN2QixRQUNBLEtBQ0EsRUFDQSxLQUNBLElBQUksR0FBSyxRQUFRLEVBQWMsa0JBQWtCLElBQ25ELENBQUMsRUFFRCxRQUFRLE1BQU0sRUFBTSxjQUFjLDJCQUEyQixDQUFDLFdBSTdELEVBQVcsWUFBYSxDQUN2QixNQUNBLHVCQUNBLEtBQ0EsUUFBUSxJQUFJLE1BQVEsT0FDcEIsS0FDQSxJQUFJLElBQ04sQ0FBQyxFQUVELFFBQVEsTUFBTSxFQUFNLGNBQWMseUJBQXlCLENBQUMsZ0JBcERsRSxJQUNBLEtBQ0EsS0FDQSwwQkNDQSxTQUFTLEVBQVksRUFBRyxDQUN2QixHQUFJLENBRUgsT0FEQSxHQUFHLFNBQVMsYUFBYSxFQUNsQixTQUNDLEVBQVAsQ0FDRCxNQUFPLElBSVQsU0FBUyxFQUFlLEVBQUcsQ0FDMUIsR0FBSSxDQUNILE9BQU8sR0FBRyxhQUFhLG9CQUFxQixNQUFNLEVBQUUsU0FBUyxRQUFRLFFBQzdELEVBQVAsQ0FDRCxNQUFPLElBakJULElBQU0sNkJBRUYsR0FtQkosR0FBTyxRQUFVLElBQU0sQ0FDdEIsR0FBSSxLQUFhLE9BQ2hCLEdBQVcsR0FBYSxHQUFLLEdBQWdCLEVBRzlDLE9BQU8sMEJDMUJSLElBQU0sNkJBQ0EsNkJBQ0EsUUFFQSxHQUFRLElBQU0sQ0FDbkIsR0FBSSxRQUFRLFdBQWEsUUFDeEIsTUFBTyxHQUdSLEdBQUksR0FBRyxRQUFRLEVBQUUsWUFBWSxFQUFFLFNBQVMsV0FBVyxFQUFHLENBQ3JELEdBQUksR0FBUyxFQUNaLE1BQU8sR0FHUixNQUFPLEdBR1IsR0FBSSxDQUNILE9BQU8sR0FBRyxhQUFhLGdCQUFpQixNQUFNLEVBQUUsWUFBWSxFQUFFLFNBQVMsV0FBVyxHQUNoRixHQUFTLEVBQUksU0FDUCxFQUFQLENBQ0QsTUFBTyxLQUlULEdBQUksUUFBUSxJQUFJLGdCQUNmLEdBQU8sUUFBVSxPQUVqQixJQUFPLFFBQVUsR0FBTSx3QkM1QnhCLEdBQU8sUUFBVSxDQUFDLEVBQVEsRUFBYyxJQUFPLENBQzlDLE1BQU0sRUFBUyxLQUFTLE9BQU8sZUFBZSxFQUFRLEVBQWMsQ0FBQyxRQUFPLFdBQVksR0FBTSxTQUFVLEVBQUksQ0FBQyxFQWU3RyxPQWJBLE9BQU8sZUFBZSxFQUFRLEVBQWMsQ0FDM0MsYUFBYyxHQUNkLFdBQVksR0FDWixHQUFHLEVBQUcsQ0FDTCxNQUFNLEVBQVMsRUFBRyxFQUVsQixPQURBLEVBQU8sQ0FBTSxFQUNOLEdBRVIsR0FBRyxDQUFDLEVBQU8sQ0FDVixFQUFPLENBQUssRUFFZCxDQUFDLEVBRU0seUJDTVIsU0FBUyxFQUFpQixFQUFHLENBQzVCLEdBQUksS0FBaUIsT0FDcEIsR0FBZSxHQUFnQixHQUFLLEdBQVMsRUFHOUMsT0FBTyxHQXVQUixTQUFTLEVBQWdCLENBQUMsRUFBUSxDQUNqQyxVQUFXLElBQVcsVUFBWSxNQUFNLFFBQVEsQ0FBTSxFQUNyRCxPQUFPLEVBR1IsT0FBUSxJQUFPLEdBQWMsRUFFN0IsSUFBSyxFQUNKLE1BQU0sSUFBSSxNQUFNLEdBQUcscUJBQXVCLEVBRzNDLE9BQU8sRUFHUixTQUFTLEVBQW9CLEdBQUcsR0FBVyxJQUFrQixPQUFNLENBQ2xFLEdBQUksR0FBTyxHQUNWLE9BQU8sR0FBaUIsQ0FBRyxFQUc1QixJQUFLLEVBQ0osTUFBTSxJQUFJLE1BQU0sR0FBRyxvQkFBMkIsRUFHL0MsT0FBTyxHQUFpQixDQUFjLHVGQTFTakMsK0JBQ0EseUNBQ0MsU0FBVSxHQUFJLFVBQVcsOEJBQzFCLFFBQ0EsUUFDQSxRQUdBLEdBQW1CLEdBQUssS0FBSyxVQUFXLFVBQVUsR0FFakQsV0FBVSxTQUFRLFFBR25CLEdBQWtCLElBQU0sQ0FDN0IsR0FBSSxDQUVILE9BREEsR0FBRyxTQUFTLG9CQUFvQixFQUN6QixRQUNOLENBQ0QsTUFBTyxLQUlMLEdBZUUsSUFBMEIsSUFBTSxDQUtyQyxJQUFJLEVBRUosT0FBTyxjQUFlLEVBQUcsQ0FDeEIsR0FBSSxFQUVILE9BQU8sRUFHUixNQUFNLEVBQWlCLGdCQUV2QixJQUFJLEVBQXFCLEdBQ3pCLEdBQUksQ0FDSCxNQUFNLEdBQUcsT0FBTyxFQUFnQixHQUFZLElBQUksRUFDaEQsRUFBcUIsUUFDcEIsRUFFRixJQUFLLEVBQ0osTUFuQndCLFFBc0J6QixNQUFNLEVBQWdCLE1BQU0sR0FBRyxTQUFTLEVBQWdCLENBQUMsU0FBVSxNQUFNLENBQUMsRUFDcEUsRUFBbUIsd0NBQXdDLEtBQUssQ0FBYSxFQUVuRixJQUFLLEVBQ0osTUExQndCLFFBZ0N6QixPQUhBLEVBQWEsRUFBaUIsT0FBTyxXQUFXLEtBQUssRUFDckQsRUFBYSxFQUFXLFNBQVMsR0FBRyxFQUFJLEVBQWEsR0FBRyxLQUVqRCxLQUVOLEVBRUcsR0FBVyxNQUFPLEVBQU8sSUFBVyxDQUN6QyxJQUFJLEVBRUosUUFBVyxLQUFRLEVBQ2xCLEdBQUksQ0FDSCxPQUFPLE1BQU0sRUFBTyxDQUFJLFFBQ2hCLEVBQVAsQ0FDRCxFQUFjLEVBSWhCLE1BQU0sR0FHRCxHQUFXLE1BQU0sSUFBVyxDQVNqQyxHQVJBLEVBQVUsQ0FDVCxLQUFNLEdBQ04sV0FBWSxHQUNaLFlBQWEsR0FDYixxQkFBc0IsTUFDbkIsQ0FDSixFQUVJLE1BQU0sUUFBUSxFQUFRLEdBQUcsRUFDNUIsT0FBTyxHQUFTLEVBQVEsSUFBSyxLQUFhLEdBQVMsSUFDL0MsRUFDSCxJQUFLLENBQ04sQ0FBQyxDQUFDLEVBR0gsSUFBSyxLQUFNLEVBQUssVUFBVyxFQUFlLENBQUMsR0FBSyxFQUFRLEtBQU8sQ0FBQyxFQUdoRSxHQUZBLEVBQWUsQ0FBQyxHQUFHLENBQVksRUFFM0IsTUFBTSxRQUFRLENBQUcsRUFDcEIsT0FBTyxHQUFTLEVBQUssS0FBVyxHQUFTLElBQ3JDLEVBQ0gsSUFBSyxDQUNKLEtBQU0sRUFDTixVQUFXLENBQ1osQ0FDRCxDQUFDLENBQUMsRUFHSCxJQUFJLEVBQ0osTUFBTSxFQUFlLENBQUMsRUFDaEIsRUFBc0IsQ0FBQyxFQUU3QixHQUFJLElBQWEsU0FBVSxDQUcxQixHQUZBLEVBQVUsT0FFTixFQUFRLEtBQ1gsRUFBYSxLQUFLLGFBQWEsRUFHaEMsR0FBSSxFQUFRLFdBQ1gsRUFBYSxLQUFLLGNBQWMsRUFHakMsR0FBSSxFQUFRLFlBQ1gsRUFBYSxLQUFLLE9BQU8sRUFHMUIsR0FBSSxFQUNILEVBQWEsS0FBSyxLQUFNLENBQUcsVUFFbEIsSUFBYSxTQUFZLEtBQVUsR0FBa0IsSUFBTSxFQUFNLENBQzNFLE1BQU0sRUFBYSxNQUFNLEdBQXVCLEVBY2hELEdBWkEsRUFBVSxHQUNULEdBQUcsNERBQ0gsR0FBRyxRQUFRLElBQUksNERBRWhCLEVBQWEsS0FDWixhQUNBLGtCQUNBLHdCQUNBLFNBQ0EsaUJBQ0QsR0FFSyxHQUNKLEVBQW9CLHlCQUEyQixHQUdoRCxNQUFNLEVBQW1CLENBQUMsT0FBTyxFQUVqQyxHQUFJLEVBQVEsS0FDWCxFQUFpQixLQUFLLE9BQU8sRUFHOUIsR0FBSSxHQUlILEdBREEsRUFBaUIsS0FBSyxPQUFPLFFBQVcsZUFBZSxFQUNuRCxFQUFRLE9BQ1gsRUFBYSxRQUFRLEVBQVEsTUFBTSxVQUUxQixFQUFRLE9BQ2xCLEVBQWlCLEtBQUssSUFBSSxFQUFRLFNBQVMsRUFHNUMsR0FBSSxFQUFhLE9BQVMsRUFDekIsRUFBZSxFQUFhLElBQUksS0FBTyxPQUFPLE9BQVMsRUFDdkQsRUFBaUIsS0FBSyxFQUFhLEtBQUssR0FBRyxDQUFDLEVBSTdDLEVBQVEsT0FBUyxPQUFPLEtBQUssRUFBaUIsS0FBSyxHQUFHLEVBQUcsU0FBUyxFQUFFLFNBQVMsUUFBUSxNQUMvRSxDQUNOLEdBQUksRUFDSCxFQUFVLE1BQ0osQ0FFTixNQUFNLEdBQWEsV0FBYSxZQUFjLElBRzlDLElBQUksRUFBa0IsR0FDdEIsR0FBSSxDQUNILE1BQU0sR0FBRyxPQUFPLEdBQWtCLEdBQVksSUFBSSxFQUNsRCxFQUFrQixRQUNqQixFQUlGLEVBRnlCLFFBQVEsU0FBUyxVQUN6QyxJQUFhLFdBQWEsSUFBYyxFQUNaLFdBQWEsR0FHM0MsR0FBSSxFQUFhLE9BQVMsRUFDekIsRUFBYSxLQUFLLEdBQUcsQ0FBWSxFQUdsQyxJQUFLLEVBQVEsS0FHWixFQUFvQixNQUFRLFNBQzVCLEVBQW9CLFNBQVcsR0FJakMsR0FBSSxFQUFRLE9BQ1gsRUFBYSxLQUFLLEVBQVEsTUFBTSxFQUdqQyxHQUFJLElBQWEsVUFBWSxFQUFhLE9BQVMsRUFDbEQsRUFBYSxLQUFLLFNBQVUsR0FBRyxDQUFZLEVBRzVDLE1BQU0sRUFBYSxHQUFhLE1BQU0sRUFBUyxFQUFjLENBQW1CLEVBRWhGLEdBQUksRUFBUSxLQUNYLE9BQU8sSUFBSSxRQUFRLENBQUMsRUFBUyxJQUFXLENBQ3ZDLEVBQVcsS0FBSyxRQUFTLENBQU0sRUFFL0IsRUFBVyxLQUFLLFFBQVMsS0FBWSxDQUNwQyxJQUFLLEVBQVEsc0JBQXdCLEVBQVcsRUFBRyxDQUNsRCxFQUFPLElBQUksTUFBTSxvQkFBb0IsR0FBVSxDQUFDLEVBQ2hELE9BR0QsRUFBUSxDQUFVLEVBQ2xCLEVBQ0QsRUFLRixPQUZBLEVBQVcsTUFBTSxFQUVWLEdBR0YsR0FBTyxDQUFDLEVBQVEsSUFBWSxDQUNqQyxVQUFXLElBQVcsU0FDckIsTUFBTSxJQUFJLFVBQVUscUJBQXFCLEVBRzFDLE9BQU8sR0FBUyxJQUNaLEVBQ0gsUUFDRCxDQUFDLEdBR0ksR0FBVSxDQUFDLEVBQU0sSUFBWSxDQUNsQyxVQUFXLElBQVMsU0FDbkIsTUFBTSxJQUFJLFVBQVUsbUJBQW1CLEVBR3hDLE1BQU8sVUFBVyxFQUFlLENBQUMsR0FBSyxHQUFXLENBQUMsRUFDbkQsR0FBSSxJQUFpQixRQUFhLElBQWlCLE9BQVMsTUFBTSxRQUFRLENBQVksRUFDckYsTUFBTSxJQUFJLFVBQVUsdUNBQXVDLEVBRzVELE9BQU8sR0FBUyxJQUNaLEVBQ0gsSUFBSyxDQUNKLE9BQ0EsVUFBVyxDQUNaLENBQ0QsQ0FBQyxHQTZCSSxHQUFPLENBQUMsRUFFZCxHQUFtQixHQUFNLFNBQVUsSUFBTSxHQUFxQixDQUM3RCxPQUFRLGdCQUNSLE1BQU8sU0FDUCxNQUFPLENBQUMsZ0JBQWlCLHVCQUF3QixVQUFVLENBQzVELEVBQUcsQ0FDRixJQUFLLENBQ0osS0FBTSxrRUFDTixJQUFLLENBQUMsNERBQTZELGlFQUFpRSxDQUNySSxDQUNELENBQUMsQ0FBQyxFQUVGLEdBQW1CLEdBQU0sVUFBVyxJQUFNLEdBQXFCLENBQzlELE9BQVEsVUFDUixNQUFPLGtEQUNQLE1BQU8sU0FDUixFQUFHLENBQ0YsSUFBSyxrREFDTixDQUFDLENBQUMsRUFFRixHQUFtQixHQUFNLE9BQVEsSUFBTSxHQUFxQixDQUMzRCxPQUFRLGlCQUNSLE1BQU8sU0FDUCxNQUFPLENBQUMsaUJBQWtCLG9CQUFvQixDQUMvQyxFQUFHLENBQ0YsSUFBSyxrRUFDTixDQUFDLENBQUMsRUFFRixHQUFLLEtBQU8sR0FDWixHQUFLLFFBQVUsR0FFZixHQUFPLFFBQVUsS0NwVWpCLGVBQXNCLENBQWMsQ0FDbEMsRUFDQSxFQUFzQyxDQUFDLEVBQ2YsQ0FDeEIsR0FBSSxDQUNGLE1BQU0sRUFBUyxJQUFJLFVBQVUsQ0FBQyxFQUFTLEdBQUcsRUFBSyxPQUFPLENBQVMsQ0FBQyxFQUFHLENBQ2pFLE1BQU8sQ0FBQyxVQUFXLE9BQVEsTUFBTSxFQUNqQyxJQUFLLFFBQVEsR0FDZixDQUFDLEVBRUQsR0FBSSxFQUFPLFdBQWEsRUFRdEIsT0FQQSxRQUFRLE1BQ04sVUFBVSxLQUFXLEVBQUssS0FBSyxHQUFHLHVCQUNoQyxFQUFPLFVBRVgsRUFDQSxRQUFRLE1BQU0sSUFBSSxNQUFNLEVBQUUsS0FBSyxFQUV4QixLQUdULE9BQVEsRUFBTyxRQUFVLElBQUksU0FBUyxRQUMvQixFQUFQLENBQ0EsR0FBSSxHQUFvQixDQUFHLEVBQ3pCLFFBQVEsTUFDTixVQUFVLEtBQVcsRUFBSyxLQUFLLEdBQUcsdUJBQXVCLEVBQUksUUFDL0QsVUFDUyxhQUFlLE1BQ3hCLFFBQVEsTUFBTSxFQUFJLE9BQU8sRUFLM0IsT0FGQSxRQUFRLE1BQU0sSUFBSSxNQUFNLEVBQUUsS0FBSyxFQUV4QixtQkNPSixTQUFTLEVBQVEsRUFDdEIsV0FDQSxVQUNBLFdBQ0Esc0JBQ0EsVUFDQSxXQUNxQyxDQUNyQyxNQUFNLEVBQVUsSUFBSSxJQUNkLEVBQWtCLElBQUksSUFDdEIsRUFBVyxJQUFJLElBQ2YsRUFBMEIsSUFBSSxJQUVwQyxJQUFJLEVBQVUsa0JBRWQsR0FBSSxFQUNGLEVBQVUsc0JBR1osTUFBTSxFQUFrQixFQUFTLFFBQVEsRUFBUyxDQUFDLEVBQUksSUFBVSxDQUMvRCxJQUFJLEVBQVUsR0FNZCxHQUxBLEVBQXdCLElBQ3RCLEdBQ0MsRUFBd0IsSUFBSSxDQUFLLEdBQUssR0FBSyxDQUM5QyxFQUVJLEtBQVMsRUFBUyxDQUNwQixFQUFRLElBQUksR0FBUSxFQUFRLElBQUksQ0FBSyxHQUFLLEdBQUssQ0FBQyxFQUNoRCxNQUFNLEdBQVEsRUFBUSxHQUV0QixHQUFJLEtBQWUsT0FDakIsRUFBVSxPQUdaLEdBQWdCLElBQUksR0FBUSxFQUFnQixJQUFJLENBQUssR0FBSyxHQUFLLENBQUMsRUFHbEUsR0FBSSxHQUVGLEdBREEsRUFBVSxFQUFRLEVBQU8sQ0FBTyxFQUM1QixJQUFZLEVBQ2QsRUFBUSxJQUFJLEdBQVEsRUFBUSxJQUFJLENBQUssR0FBSyxHQUFLLENBQUMsRUFDaEQsRUFBZ0IsT0FBTyxDQUFLLEVBSWhDLE9BQU8sRUFDUixFQUVELE9BQU8sS0FBSyxDQUFPLEVBQUUsUUFBUSxDQUFDLElBQVcsQ0FDdkMsSUFBSyxFQUFRLElBQUksQ0FBTSxFQUNyQixFQUFTLElBQUksR0FBUyxFQUFTLElBQUksQ0FBTSxHQUFLLEdBQUssQ0FBQyxFQUV2RCxFQUdELE1BQU0sRUFBNEIsQ0FDaEMsd0JBQXlCLEVBQ3pCLFNBQVUsRUFDViwwQkFDQSwwQkFBMkIsRUFDM0IsMEJBQTJCLENBQzdCLEVBRUEsR0FBSSxFQUVGLEVBQVMsT0FBTyxRQUFRLENBQUMsSUFBWSxDQUNuQyxHQUFJLEVBQVEsMEJBQTBCLElBQUksQ0FBTyxFQUFHLENBQ2xELE1BQU0sRUFBTSxHQUFHLEVBQVMsMkRBQTJELElBQ25GLEdBQUksRUFBUyxFQUFRLENBQUcsTUFDbkIsU0FBUSxNQUFNLENBQUcsVUFDYixFQUFRLDBCQUEwQixJQUFJLENBQU8sRUFBRyxDQUN6RCxNQUFNLEVBQU0sR0FBRyxFQUFTLDhFQUE4RSxJQUN0RyxHQUFJLEVBQVMsRUFBUSxDQUFHLE1BQ25CLFNBQVEsTUFBTSxDQUFHLFdBQ1osRUFBUSx3QkFBd0IsSUFBSSxDQUFPLEVBQUcsQ0FDeEQsTUFBTSxFQUFNLEdBQUcsRUFBUyw4RUFBOEUsSUFDdEcsR0FBSSxFQUFTLEVBQVEsQ0FBRyxNQUNuQixTQUFRLE1BQU0sQ0FBRyxHQUV6QixFQUdILE9BQU8sbUNDbklULHlCQUNBLHdCQUVBLHFCQUNBLDBCQVFBLFNBQVMsRUFBVSxDQUFDLEVBQTJCLENBQzdDLE9BQU8sVUFBYyxJQUFRLFdBTy9CLFNBQVMsRUFBWSxDQUFDLEVBQVksS0FBd0IsRUFBYSxDQUNyRSxPQUFPLElBQUksUUFBYSxDQUFDLEVBQVMsSUFBVyxDQUMzQyxNQUFNLEVBQVMsRUFBUSxHQUV2QixJQUFLLEdBQVcsQ0FBTSxFQUFHLENBQ3ZCLEVBQU8sSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFVLHFCQUFxQixDQUFDLEVBQzNELE9BR0YsRUFBTyxHQUFHLEVBQU0sQ0FBQyxFQUFjLElBQWUsQ0FDNUMsR0FBSSxFQUNGLFFBQVEsS0FBSyxDQUFLLEVBQ2xCLEVBQU8sQ0FBSyxFQUNaLFFBQVEsS0FBSyxDQUFDLE1BRWQsR0FBUSxHQUFjLE1BQUMsRUFFMUIsRUFDRixFQVFILGVBQWUsRUFBYyxFQUFHLENBRzlCLE1BQU0sRUFETSxHQUFHLGFBQWEsR0FBSyxRQUFRLGNBQWMsQ0FBQyxFQUN0QyxNQUdsQixJQUFLLEVBQU8sT0FHWixNQUFNLEVBQU8sT0FBTyxLQUFLLENBQUssRUFDOUIsSUFBSSxFQUFRLE1BQU0sR0FBVSxHQUFTLE1BQU8sRUFBSyxFQUNqRCxNQUFNLEVBQWdDLENBQUMsRUFFdkMsUUFBUSxLQUFLLEVBQU0sT0FBTyx3QkFBd0IsQ0FBQyxFQUNuRCxRQUFXLEtBQU8sRUFDaEIsR0FBSSxDQUVGLElBQ0csRUFBTSxLQUNMLENBQUMsSUFBd0IsRUFBRSxLQUFPLEdBQU8sRUFBRSxLQUFPLEVBQU0sRUFDMUQsRUFFQSxFQUFVLEtBQUssQ0FBQyxFQUFLLEVBQU0sRUFBSSxDQUFDLFFBRTNCLEVBQVAsQ0FDQSxHQUFJLGFBQWUsTUFBTyxRQUFRLEtBQUssRUFBTSxJQUFJLEVBQUksT0FBTyxDQUFDLEVBS2pFLEdBQUksRUFBVSxPQUFTLEVBQUcsQ0FDeEIsUUFBUSxLQUNOLEVBQU0sT0FDSixxRUFDQSxFQUFVLElBQUksQ0FBQyxJQUFNLEdBQUcsRUFBRSxTQUFTLEVBQUUsSUFBSSxFQUFFLEtBQUssTUFBTSxDQUN4RCxDQUNGLEVBRUEsTUFBTSxFQUFTLE9BQVEsQ0FDckIsT0FDQSwyQ0FDRixDQUFDLEVBR0QsTUFBTSxFQUFXLE1BQU0sRUFBZSxPQUFRLENBQzVDLEtBQ0EsS0FDQSxZQUNGLENBQUMsRUFBRSxTQUFTLEVBR1osTUFBTSxFQUFTLE9BQVEsQ0FBQyxRQUFTLE1BQU8sWUFBWSxDQUFDLEVBRXJELFFBQVcsS0FBUSxFQUNqQixHQUFHLGVBQWUsYUFBYyxHQUFHLEVBQUssTUFBTSxFQUFLLElBQUksRUFHekQsR0FBRyxlQUFlLGFBQWMsSUFBSSxFQUdwQyxNQUFNLEVBQVMsT0FBUSxDQUNyQixRQUNBLEVBQVMsVUFBVSxFQUFTLE9BQVMsQ0FBQyxFQUFFLEtBQUssRUFDN0MsWUFDRixDQUFDLEVBR0gsTUFBTSxFQUFLLEdBQUcsRUFHZCxRQUFRLEtBQUssRUFBTSxPQUFPLHlCQUF5QixDQUFDLEVBQ3BELEVBQVEsTUFBTSxHQUFVLEdBQVMsTUFBTyxFQUFLLEVBQzdDLElBQUksRUFBVSxHQWlCZCxHQWZBLEVBQVUsUUFBUSxFQUFFLEVBQUssS0FBVyxDQUNsQyxJQUNHLEVBQU0sS0FBSyxDQUFDLElBQXdCLEVBQUUsS0FBTyxHQUFPLEVBQUUsS0FBTyxFQUFNLEVBQUksRUFFeEUsRUFBVSxHQUNWLFFBQVEsS0FDTixFQUFNLFVBQ0osdUJBQXVCLEVBQU0sYUFDM0IsQ0FDRixRQUFRLEVBQU0sYUFBYSxDQUFLLEdBQ2xDLENBQ0YsRUFFSCxFQUVHLEVBQ0YsUUFBUSxLQUNOLEVBQU0sSUFBSTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxPQU1ULENBQ0gsRUFJSixTQUFTLEVBQU8sQ0FDZCxFQUNBLEVBQ0EsRUFDQSxDQUNBLElBQUksRUFBWSxFQUVoQixHQUFJLEdBQVMsU0FBUyxDQUFHLEVBQ3ZCLEVBQVksVUFDSCxFQUFVLEdBQ25CLEVBQVksRUFBVSxHQUl4QixNQUFNLEVBQVMsR0FBUyxDQUN0QixVQUNBLFNBQVUsQ0FDWixDQUFDLEVBRUQsR0FBSSxFQUFPLDBCQUEwQixLQUFPLEVBUzFDLE1BUkEsUUFBUSxLQUNOLEVBQU0sSUFDSjtBQUFBO0FBQUEsWUFFSSxNQUFNLEtBQUssRUFBTywwQkFBMEIsS0FBSyxDQUFDLEVBQUUsS0FBSyxNQUFNO0FBQUEsU0FFckUsQ0FDRixFQUNNLElBQUksTUFBTSxtQ0FBbUMsRUFLckQsR0FGQSxFQUFZLEVBQU8sU0FFZixHQUFTLFNBQVMsQ0FBUyxFQUM3QixRQUFRLEtBQUssaUJBQWtCLEVBQU0sZUFBZSxDQUFTLENBQUMsRUFDOUQsV0FBSyxDQUFTLE1BRWQsU0FBUSxLQUFLLDRCQUE2QixFQUFNLGNBQWMsQ0FBUyxDQUFDLEVBYzVFLGVBQThCLEVBQUcsQ0FBQyxFQUF5QixFQUFvQixDQUU3RSxNQUFNLEVBRE0sR0FBRyxhQUFhLEdBQUssUUFBUSxjQUFjLENBQUMsR0FDVCxLQUFPLENBQUMsRUFDakQsRUFDSixHQUFTLE9BQ1AsQ0FBQyxFQUFHLEVBQUssSUFBTSxDQUViLE9BREEsRUFBRSxHQUFHLEVBQUksS0FBTyxFQUNULEdBRVQsQ0FBQyxDQUNILEdBQUssQ0FBQyxFQUVSLElBQUssR0FBTyxFQUFJLFFBQVUsRUFBRyxDQUMzQixRQUFRLEtBQUs7QUFBQTtBQUFBLFVBRVAsRUFBTSxlQUFlLE9BQU8sS0FBSyxDQUFTLEVBQUUsS0FBSyxZQUFZLENBQUM7QUFBQSxLQUNuRSxFQUVELE9BR0YsTUFBTSxHQUFlLEVBRXJCLE1BQU0sRUFBYSxJQUNkLFFBQVEsT0FDUixDQUNMLEVBRUEsR0FBSSxNQUFNLFFBQVEsQ0FBRyxFQUNuQixFQUFJLFFBQVEsQ0FBQyxJQUFRLENBQ25CLEdBQVEsRUFBVyxFQUFLLENBQVUsRUFDbkMsTUFFRCxJQUFRLEVBQVcsRUFBSyxDQUFVLE1BdE90QywrQkFHQSxJQUNBLElBQ0EsSUFDQSxNQ1JBLDhCQU9BLGVBQXNCLENBQWEsRUFBRyxDQUNwQyxHQUFJLENBYUYsR0FYZSxHQUFjLFNBQzNCLHdDQUNBLENBQ0UsU0FBVSxPQUNaLENBQ0YsRUFJeUIsS0FBSyxFQUFFLE1BQU0sSUFBSSxFQUFFLE9BQU8sT0FBTyxFQUFFLFNBRTFDLEVBQUcsTUFBTyxTQUNyQixFQUFQLENBQ0EsTUFBTyxHQUdULE1BQU8saUJDZlQsZUFBc0IsRUFBYyxDQUFDLEVBQXNCLENBR3pELEdBQUksR0FTRixJQVJ3QixNQUFNLEVBQWM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsS0FNM0MsRUFFcUIsT0FHeEIsR0FBSSxNQUFNLEVBQWMsRUFLdEIsT0FKQSxRQUFRLE1BQ04sNEVBQ0YsRUFFTyxHQUdULElBQUksRUFBTyxHQUVYLElBQU0sTUFBTSxFQUFTLE1BQU8sQ0FBQyxPQUFPLENBQUMsRUFBSSxFQUFPLEdBQ2hELElBQU0sTUFBTSxFQUFTLE1BQU8sQ0FBQyxXQUFZLEtBQUssQ0FBQyxFQUFJLEVBQU8sR0FDMUQsSUFBTSxNQUFNLEVBQVMsTUFBTyxDQUFDLFFBQVMsU0FBVSxZQUFZLENBQUMsRUFBSSxFQUFPLEdBRXhFLEdBQUksRUFFRixPQURBLFFBQVEsTUFBTSxpQ0FBaUMsRUFDeEMsR0FHVCxNQUFPLGlCQTdDVCxJQUNBLEtBQ0EsT0NGQSx3QkFDQSx1QkFDQSxvQkFnQkEsZUFBZSxFQUFhLEVBQUcsQ0FJN0IsTUFBTSxFQUFPLE1BQU0sRUFBMEIsRUFLN0MsUUFBUSxLQUFLLCtCQUErQixFQUM1QyxJQUFJLEVBQVUsTUFBTSxJQUFJLE1BQU0sQ0FDNUIsWUFBYSxDQUFDLEVBQUssUUFBUSxlQUFlLENBQUMsRUFDM0MsT0FBUSxNQUNSLFNBQVUsT0FBTyxLQUFLLENBQUksRUFDMUIsT0FBUSxHQUNSLFVBQVcsUUFDYixDQUFDLEVBRUQsUUFBVyxLQUFZLEVBQVEsUUFDN0IsUUFBUSxLQUNOLCtCQUNBLEVBQU0sZUFBZSxFQUFTLElBQUksQ0FDcEMsRUFFQSxNQUFNLElBQUksTUFBTSxFQUFLLFFBQVEsYUFBYyxFQUFTLElBQUksRUFBRyxDQUFRLEVBR3JFLFFBQVEsS0FBSyxpQ0FBaUMsRUFDOUMsRUFBVSxNQUFNLElBQUksTUFBTSxDQUN4QixZQUFhLENBQUMsRUFBSyxRQUFRLG9CQUFvQixDQUFDLEVBQ2hELE9BQVEsT0FDUixTQUFVLE9BQU8sS0FBSyxDQUFJLEVBQzFCLE9BQVEsR0FDUixVQUFXLFFBQ2IsQ0FBQyxFQUVELFFBQVcsS0FBWSxFQUFRLFFBQzdCLFFBQVEsS0FDTiwrQkFDQSxFQUFNLGVBQWUsRUFBUyxJQUFJLENBQ3BDLEVBRUEsTUFBTSxJQUFJLE1BQU0sRUFBSyxRQUFRLGFBQWMsRUFBUyxJQUFJLEVBQUcsQ0FBUSxFQUdyRSxRQUFRLEtBQUssOENBQThDLEVBQzNELEVBQUcsYUFDRCxFQUFLLFFBQVEsc0JBQXNCLEVBQ25DLEVBQUssUUFBUSwyQkFBMkIsQ0FDMUMsRUFNRixlQUFlLEVBQVMsRUFBRyxDQUN6QixJQUFLLEVBQUcsV0FBVyxFQUFLLFFBQVEsWUFBWSxDQUFDLEVBQzNDLFFBQVEsTUFBTSw4Q0FBOEMsRUFJOUQsR0FBSSxFQUFHLFdBQVcsRUFBSyxRQUFRLFFBQVEsQ0FBQyxFQUN0QyxFQUFHLFdBQVcsRUFBSyxRQUFRLFFBQVEsQ0FBQyxFQU10QyxNQUFNLEVBQU8sTUFBTSxFQUEwQixFQUU3QyxRQUFRLEtBQUssK0JBQStCLEVBQzVDLE1BQU0sRUFBVSxNQUFNLElBQUksTUFBTSxDQUM5QixZQUFhLENBQUMsRUFBSyxRQUFRLHFCQUFxQixDQUFDLEVBQ2pELE9BQVEsT0FDUixTQUFVLE9BQU8sS0FBSyxDQUFJLEVBQzFCLE9BQVEsRUFDVixDQUFDLEVBS0QsUUFBVyxLQUFZLEVBQVEsUUFDN0IsUUFBUSxLQUNOLGdDQUNBLEVBQU0sZUFBZSxFQUFTLElBQUksQ0FDcEMsRUFFQSxNQUFNLElBQUksTUFDUixFQUFLLFFBQVEsc0JBQXVCLEVBQVMsSUFBSSxFQUNqRCxDQUNGLEVBTUYsRUFBRyxjQUNELEVBQUssUUFBUSxpQkFBaUIsRUFDOUIsNkNBQ0EsQ0FBRSxTQUFVLE9BQVEsQ0FDdEIsRUFDQSxFQUFHLGNBQ0QsRUFBSyxRQUFRLG1CQUFtQixFQUNoQywrQ0FDQSxDQUFFLFNBQVUsT0FBUSxDQUN0QixFQUlBLE1BQU0sRUFBVyxFQUFHLGFBQWEsRUFBSyxRQUFRLGVBQWUsQ0FBQyxFQVM5RCxHQVJBLEVBQVMsUUFBVSxFQUFTLFNBQVcsQ0FBQyxFQUN4QyxFQUFTLFFBQVEsS0FBSyxjQUFjLEVBQ3BDLEVBQVMsUUFBVSxDQUFDLFlBQVksRUFDaEMsRUFBRyxjQUFjLEVBQUssUUFBUSxvQkFBb0IsRUFBRyxDQUFRLEVBRTdELE1BQU0sRUFBSyxHQUFHLEdBSVgsRUFBUyxNQUFPLENBQ2YsS0FDQSx3QkFDQSxXQUNBLFdBQ0EsRUFBSyxRQUFRLGdCQUFnQixFQUM3QixZQUNBLEVBQUssUUFBUSxvQkFBb0IsQ0FDbkMsQ0FBQyxFQUVELFFBQVEsS0FBSyx5REFBeUQsRUFDdEUsRUFBRyxXQUFXLEVBQUssUUFBUSxvQkFBb0IsQ0FBQyxFQUNoRCxRQUFRLEtBQUssQ0FBQyxFQUloQixFQUFHLFdBQVcsRUFBSyxRQUFRLG9CQUFvQixDQUFDLEVBcUJsRCxlQUFlLEVBQWEsRUFBRyxDQUc3QixRQUFRLEtBQ04sRUFBTSxhQUFhLDZDQUE2QyxDQUNsRSxFQUVBLE1BQU0sRUFBYyxFQUFLLFFBQVEsVUFBVyxnQkFBZ0IsRUFDdEQsRUFBZSxFQUFLLFFBQVEscUJBQXFCLEVBRXZELEVBQUcsU0FBUyxFQUFhLENBQVksRUFHckMsTUFBTSxFQUFZLEVBQ2YsWUFBWSxDQUFZLEVBQ3hCLElBQUksQ0FBQyxJQUFTLEVBQUssUUFBUSxFQUFjLEVBQU0sVUFBVSxDQUFDLEVBQzFELE9BQU8sQ0FBQyxJQUFTLENBQ2hCLEdBQUksRUFBRyxXQUFXLENBQUksRUFDcEIsTUFBTyxHQUVWLEVBS0csRUFBTyxNQUFNLEVBQTBCLEVBQzdDLElBQUksRUFBVyxHQUdmLFFBQVcsS0FBWSxFQUFXLENBQ2hDLE1BQU0sRUFBVSxNQUFNLElBQUksTUFBTSxDQUM5QixZQUFhLENBQUMsQ0FBUSxFQUN0QixPQUFRLE1BQ1IsU0FBVSxPQUFPLEtBQUssQ0FBSSxFQUMxQixPQUFRLEVBQ1YsQ0FBQyxFQUdELElBQUssRUFBUSxRQUFTLENBQ3BCLFFBQVEsTUFDTixFQUFNLGNBQWMsNEJBQTRCLEVBQ2hELEVBQU0sZUFDSixFQUFLLFNBQVMsRUFBYyxFQUFLLFFBQVEsQ0FBUSxDQUFDLENBQ3BELENBQ0YsRUFFQSxRQUFXLEtBQVcsRUFBUSxLQUU1QixRQUFRLE1BQU0sQ0FBTyxFQUd2QixFQUFXLEdBR2IsUUFBVyxLQUFZLEVBQVEsUUFDN0IsUUFBUSxLQUNOLCtCQUNBLEVBQU0sZUFDSixFQUFLLFNBQ0gsRUFDQSxFQUFLLFFBQVEsRUFBSyxRQUFRLENBQVEsRUFBRyxFQUFTLElBQUksQ0FDcEQsQ0FDRixDQUNGLEVBRUEsTUFBTSxJQUFJLE1BQ1IsRUFBSyxRQUFRLEVBQUssUUFBUSxDQUFRLEVBQUcsRUFBUyxJQUFJLEVBQ2xELENBQ0YsRUFJSixHQUFJLEVBQ0YsUUFBUSxNQUNOLEVBQU0sY0FDSixxRUFDRixDQUNGLEVBQ0EsUUFBUSxLQUFLLENBQUMsRUFRbEIsZUFBZSxFQUFhLEVBQUcsQ0FFN0IsUUFBUSxLQUNOLEVBQU0sYUFBYSxpREFBaUQsQ0FDdEUsRUFFQSxFQUFHLFNBQ0QsRUFBSyxRQUFRLHFCQUFxQixFQUNsQyxFQUFLLFFBQVEsMEJBQTBCLENBQ3pDLEVBRUEsRUFBRyxTQUNELEVBQUssUUFBUSxzQkFBc0IsRUFDbkMsRUFBSyxRQUFRLDJCQUEyQixDQUMxQyxFQU1GLGVBQXNCLEVBQVUsRUFBRyxDQUdqQyxHQUZBLFFBQVEsS0FBSyxFQUFNLFdBQVcsNkNBQTZDLENBQUMsR0FHekUsRUFBRyxXQUFXLEVBQUssUUFBUSxlQUFlLENBQUMsSUFDM0MsRUFBRyxXQUFXLEVBQUssUUFBUSxxQkFBcUIsQ0FBQyxHQUNsRCxHQUFPLFFBQVEsS0FBSyxFQUNwQixDQUNBLFFBQVEsS0FDTixpSUFBaUksRUFBSyxRQUNwSSxlQUNGLFFBQVEsRUFBSyxRQUFRLGVBQWUsR0FDdEMsRUFDQSxPQUdGLEVBQUcsY0FBYyxFQUFLLFFBQVEsUUFBUSxDQUFDLEVBQ3ZDLEVBQUcsY0FBYyxFQUFLLFFBQVEscUJBQXFCLENBQUMsRUFFcEQsTUFBTSxHQUFjLEVBQ3BCLE1BQU0sR0FBVSxFQUNoQixNQUFNLEdBQWMsRUFDcEIsTUFBTSxHQUFjLHVGQXRTaEIsR0FDRixpQkFOSixJQUNBLElBQ0EsS0FHTSxHQUFnQixFQUFLLFFBQVEsWUFBWSxFQUMzQyxHQUFTLEdBQU8sUUFBUSxFQUU1QixHQUFJLEVBQUcsV0FBVyxFQUFhLEVBQzdCLEdBQVMsR0FBTyxJQUFJLEVBQUcsYUFBYSxFQUFhLEVBQUUsU0FBUyxDQUFDLElDWC9ELG1CQUNBLHFCQUVPLFNBQVMsRUFBNkIsQ0FDM0MsRUFDbUIsQ0FDbkIsTUFBTyxDQUNMLEtBQU0sb0NBQ04sUUFBUyxNQUVULElBQUksQ0FBQyxFQUFZLENBQ2YsTUFBTSxFQUFXLEdBQUssUUFBUSxDQUFFLEVBRTFCLEVBQWEsQ0FBQyxNQUFPLE1BQU8sT0FBUSxNQUFNLEVBR2hELEdBQ0UsR0FBRyxXQUFXLENBQVEsR0FDdEIsRUFBVyxTQUFTLEdBQUssUUFBUSxDQUFRLENBQUMsSUFDekMsRUFBUyxTQUFTLGNBQWMsSUFDaEMsRUFBUyxTQUFTLElBQU0sRUFDekIsQ0FDQSxJQUFJLEVBQU8sR0FBRyxhQUFhLEVBQVUsQ0FBRSxTQUFVLE9BQVEsQ0FBQyxFQU0xRCxPQUpBLEVBQWEsUUFBUSxDQUFDLElBQWdCLENBQ3BDLEVBQU8sRUFBSyxRQUFRLEVBQVksS0FBTSxFQUFZLEVBQUUsRUFDckQsRUFFTSxHQUdiLGdCQ2tERix3QkFDQSxvQkFJTyxTQUFTLEVBQXlCLENBQUMsRUFBcUIsQ0FHN0QsTUFBTSxFQUFjLFFBQVEsSUFBSSxjQUFnQixJQUUxQyxFQUFhLEVBQUssUUFBUSxFQUFhLFlBQVksRUFFekQsSUFBSyxFQUFHLFdBQVcsQ0FBVSxFQUFHLENBQzlCLFFBQVEsS0FDTiw4QkFBOEIsRUFBTSxlQUNsQyw2QkFDRixHQUNGLEVBRUEsT0FHRixHQUFJLENBQ0YsTUFBTSxFQUFhLEVBQUcsWUFBWSxDQUFVLEVBQUUsT0FBTyxDQUFDLElBQU0sQ0FDMUQsT0FBTyxFQUFHLFNBQVMsRUFBSyxLQUFLLEVBQVksQ0FBQyxDQUFDLEVBQUUsWUFBWSxFQUMxRCxFQUNLLEVBQWMsRUFBVyxJQUFJLENBQUMsSUFBTSxFQUFLLEtBQUssRUFBWSxDQUFDLENBQUMsRUFxRDVELEVBcERlLEVBQVcsSUFBSSxDQUFDLEVBQVEsSUFBTSxDQUdqRCxJQUFLLEVBRUgsR0FDRSxFQUFHLFdBQVcsRUFBSyxLQUFLLEVBQVksR0FBSSxHQUFHLFNBQWMsQ0FBQyxHQUMxRCxFQUFHLFdBQVcsRUFBSyxLQUFLLEVBQVksR0FBSSxHQUFHLFlBQWlCLENBQUMsR0FDN0QsRUFBRyxXQUFXLEVBQUssS0FBSyxFQUFZLEdBQUksR0FBRyxZQUFpQixDQUFDLEdBQzdELEVBQUcsV0FBVyxFQUFLLEtBQUssRUFBWSxHQUFJLEdBQUcsYUFBa0IsQ0FBQyxHQUM5RCxFQUFHLFdBQVcsRUFBSyxLQUFLLEVBQVksR0FBSSxHQUFHLGFBQWtCLENBQUMsRUFFOUQsTUFBTyxDQUNMLENBQ0UsS0FBTSxXQUFXLEtBQVUsS0FDM0IsR0FBSSxXQUFXLEtBQVUsVUFDM0IsRUFDQSxDQUNFLEtBQU0sV0FBVyxLQUFVLFFBQzNCLEdBQUksV0FBVyxLQUFVLGFBQzNCLEVBQ0EsQ0FDRSxLQUFNLFdBQVcsS0FBVSxRQUMzQixHQUFJLFdBQVcsS0FBVSxhQUMzQixDQUNGLE1BS0EsT0FBTyxDQUFDLEVBS1osTUFBTyxDQUNMLENBQ0UsS0FBTSxXQUFXLEtBQVUsS0FDM0IsR0FBSSxXQUFXLEtBQVUsS0FBVSxJQUNyQyxFQUNBLENBQ0UsS0FBTSxXQUFXLEtBQVUsUUFDM0IsR0FBSSxXQUFXLEtBQVUsS0FBVSxPQUNyQyxFQUNBLENBQ0UsS0FBTSxXQUFXLEtBQVUsUUFDM0IsR0FBSSxXQUFXLEtBQVUsS0FBVSxPQUNyQyxDQUNGLEVBQ0QsRUFHOEIsT0FBTyxDQUFDLEVBQUssSUFBUSxFQUFJLE9BQU8sQ0FBRyxFQUFHLENBQUMsQ0FBQyxFQThCakUsRUFBYyxDQUVsQixJQTVCQyxJQUNBLEVBQUcsV0FBVyxFQUFLLEtBQUssRUFBWSxXQUFXLENBQUMsR0FDL0MsRUFBRyxXQUFXLEVBQUssS0FBSyxFQUFZLGNBQWMsQ0FBQyxHQUNuRCxFQUFHLFdBQVcsRUFBSyxLQUFLLEVBQVksY0FBYyxDQUFDLEdBQ25ELEVBQUcsV0FBVyxFQUFLLEtBQUssRUFBWSxlQUFlLENBQUMsR0FDcEQsRUFBRyxXQUFXLEVBQUssS0FBSyxFQUFZLGVBQWUsQ0FBQyxHQU1wRCxDQUNFLENBQUUsS0FBTSxlQUFnQixHQUFJLG9CQUFxQixFQUNqRCxDQUFFLEtBQU0sa0JBQW1CLEdBQUksdUJBQXdCLEVBQ3ZELENBQUUsS0FBTSxrQkFBbUIsR0FBSSx1QkFBd0IsQ0FDekQsRUFDQSxFQUVBLENBQ0UsQ0FBRSxLQUFNLGVBQWdCLEdBQUksZUFBZSxJQUFPLEVBQ2xELENBQUUsS0FBTSxrQkFBbUIsR0FBSSxlQUFlLE9BQVUsRUFDeEQsQ0FBRSxLQUFNLGtCQUFtQixHQUFJLGVBQWUsT0FBVSxDQUMxRCxFQUVBLENBQUMsRUFNSCxHQUFHLENBQ0wsRUFHQSxHQUFJLEVBQVksT0FBUyxFQUN2QixRQUFRLEtBQUs7QUFBQTtBQUFBLElBRWYsRUFBTSxpQkFBaUIsOENBQThDO0FBQUE7QUFBQSxNQUVuRSxFQUFNLGVBQ1IsRUFBWSxJQUFJLENBQUMsSUFBTSxPQUFPLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxLQUFLLE1BQU0sQ0FDaEU7QUFBQTtBQUFBLE9BRUssRUFHSCxPQUFPLEdBQThCLENBQVcsUUFDekMsRUFBUCxDQUNBLFFBQVEsTUFBTSxDQUFDLEVBQ2YsUUFBUSxNQUNOLEVBQU0sY0FBYztBQUFBO0FBQUE7QUFBQSxLQUdyQixDQUNELGlCQXZJSixJQUNBLE9DckZBLHdCQUNBLHlCQUNBLHVCQUNBLHFCQWdCQSxlQUFzQixFQUFhLENBQUMsRUFBYSxDQVEvQyxHQVBBLFFBQVEsS0FBSyxFQUFNLFdBQVcsNkNBQTZDLENBQUMsRUFJNUUsUUFBUSxJQUFJLHFCQUNWLFFBQVEsSUFBSSxzQkFBeUIsTUFBTSxFQUFxQixFQUU5RCxRQUFRLElBQUksY0FBZ0IsUUFDOUIsSUFDRyxHQUFHLFdBQVcsR0FBSyxRQUFRLFlBQVksQ0FBQyxHQUN6QyxHQUFPLFFBQVEsWUFBWSxFQUMzQixDQUNBLFFBQVEsTUFDTixtSEFBbUgsR0FBSyxRQUN0SCxZQUNGLEdBQ0YsRUFDQSxRQUlKLE1BQU0sRUFBYSxjQUNuQixRQUFRLElBQUksU0FBVyxhQUV2QixRQUFRLEtBQ04sYUFBYSxFQUFNLGlCQUFpQixZQUFZLHFCQUNoRCxFQUFNLGVBQWUsQ0FBRyxDQUMxQixFQUNBLFFBQVEsSUFBSSxVQUFZLEVBRXhCLE1BQU0sRUFBUyxNQUFNLEVBQWdCLEVBcUJyQyxHQWxCQSxFQUFPLFFBQVUsQ0FBQyxHQUEwQixDQUFHLEVBQUcsR0FBSSxFQUFPLFNBQVcsQ0FBQyxDQUFFLEVBRTNFLEVBQU8sU0FBVyxPQUNsQixFQUFPLEtBQU8sYUFDZCxFQUFPLEtBQU8sR0FBSyxRQUFRLFlBQVksRUFDdkMsRUFBTyxNQUFPLE9BQVMsR0FBSyxRQUFRLGtCQUFtQixDQUFHLEVBQzFELEVBQU8sTUFBTyxNQUFhLE9BQzNCLEVBQU8sTUFBTyxjQUFlLE9BQVMsQ0FDcEMsSUFBSyxFQUFPLE1BQU8sT0FDbkIsZUFBZ0IsV0FDaEIsZUFBZ0IsV0FDaEIsYUFBYyxNQUNoQixFQUVBLE1BQVcsU0FBTSxDQUFNLEVBQ3ZCLFFBQVEsSUFBSSxTQUFXLEdBR2xCLEdBQUcsV0FBVyxHQUFLLFFBQVEsbUJBQW1CLFlBQWMsQ0FBQyxFQUNoRSxRQUFRLE1BQ04sbUVBQ0YsRUFDQSxRQUFRLEtBQUssQ0FBQyxNQWxFWixHQUNGLGlCQU5KLEtBQ0EsSUFDQSxJQUNBLEtBRU0sR0FBZ0IsR0FBSyxRQUFRLFlBQVksRUFDM0MsR0FBUyxHQUFPLFFBQVEsRUFFNUIsR0FBSSxHQUFHLFdBQVcsRUFBYSxFQUM3QixHQUFTLEdBQU8sSUFBSSxHQUFHLGFBQWEsRUFBYSxFQUFFLFNBQVMsQ0FBQyxJQ04vRCxlQUFzQixFQUFXLENBQy9CLEVBQXNDLENBQUMsRUFDdkMsRUFHQSxDQUNBLE1BQU0sRUFBVSxNQUFNLEVBQWtCLEVBRXhDLEdBQUksR0FBWSxVQUNkLEdBQUksRUFBUSxLQUFPLE9BQ2pCLE9BQU8sRUFDTCxFQUFRLEdBQ1IsQ0FBQyxHQUFTLGVBQWlCLEtBQU8sUUFBUyxHQUFHLENBQUksRUFBRSxPQUFPLENBQVMsQ0FDdEUsRUFJSixPQUFPLEVBQVMsRUFBUSxHQUFJLENBQUMsR0FBRyxDQUFJLENBQUMsZ0JBeEJ2QyxJQUNBLElBMEJBLEdBQVksU0FBVyxLQzNCdkIseUJBQ0EscUJBT0EsZUFBc0IsRUFBbUIsRUFBRyxDQUUxQyxJQUFLLEdBQUcsV0FBVyxHQUFLLFFBQVEsSUFBSSxDQUFDLEVBQUcsT0FFeEMsR0FBRyxVQUFVLEdBQUssUUFBUSxZQUFZLENBQUMsRUFFdkMsUUFBUSxLQUFLLEVBQU0saUJBQWlCLDJCQUEyQixDQUFDLEVBR2hFLEdBQVksQ0FDVixNQUNBLHdCQUNBLGdCQUNBLFdBQ0EsYUFDQSxZQUNBLEdBQUssUUFBUSxlQUFlLENBQzlCLENBQUMsRUFHRCxNQUFNLEVBQVUsR0FBRyxZQUFZLEdBQUssUUFBUSxZQUFZLENBQUMsRUFDekQsUUFBVyxLQUFVLEVBQVMsQ0FDNUIsR0FBSSxJQUFXLE1BQVEsSUFBVyxPQUFRLFNBQzFDLFFBQVEsS0FBSyxFQUFNLGFBQWEsOEJBQThCLEdBQVEsQ0FBQyxFQUN2RSxHQUFHLFdBQVcsR0FBSyxRQUFRLGFBQWMsQ0FBTSxDQUFDLGlCQTlCcEQsSUFDQSxPQ0hBLHlCQUNBLHFCQUVBLGVBQXNCLEVBQWlCLEVBQUcsQ0FFeEMsT0FEb0IsR0FBRyxhQUFhLEdBQUssUUFBUSxjQUFjLENBQUMsRUFDN0MsTUFBUSxpQkNMN0Isd0JBQ0EsbUJBQ0EsdUJBQ0Esb0JBa0JBLGVBQXNCLEVBQWMsRUFBRyxDQVFyQyxHQVBBLFFBQVEsS0FBSyxFQUFNLFdBQVcsd0NBQXdDLENBQUMsRUFJdkUsUUFBUSxJQUFJLHFCQUNWLFFBQVEsSUFBSSxzQkFBeUIsTUFBTSxFQUFxQixHQUU3RCxRQUFRLElBQUksYUFDZixJQUFLLEdBQUcsV0FBVyxFQUFLLFFBQVEsSUFBSSxDQUFDLEdBQUssR0FBTyxRQUFRLElBQUksRUFBRyxDQUM5RCxRQUFRLE1BQ04sNkVBQTZFLEVBQUssUUFDaEYsSUFDRixHQUNGLEVBQ0EsUUFLSixHQURBLFFBQVEsS0FBSyxFQUFNLGlCQUFpQiwrQkFBK0IsQ0FBQyxHQUMvRCxHQUFHLFdBQVcsRUFBSyxRQUFRLGFBQWEsQ0FBQyxFQUFHLENBQy9DLFFBQVEsTUFDTiwwRUFDRixFQUNBLE9BSUYsTUFBTSxHQUFvQixFQUUxQixRQUFRLEtBQUssRUFBTSxpQkFBaUIsNEJBQTRCLENBQUMsRUFDakUsTUFBTSxFQUFTLE1BQU0sRUFBZ0IsRUFFckMsRUFBTyxTQUFXLE9BQ2xCLEVBQU8sS0FBTyxFQUFLLFFBQVEsSUFBSSxFQUMvQixFQUFPLE1BQU8sSUFBTSxDQUVsQixNQUFPLEVBQUssUUFBUSxhQUFhLEVBQ2pDLE1BQU8sTUFBTSxHQUFrQixHQUFHLE1BQU0sR0FBRyxFQUFFLEtBQUssRUFBRSxFQUFFLE1BQU0sR0FBRyxFQUFFLEtBQUssR0FBRyxFQUV6RSxTQUFVLE9BQ1osRUFFQSxFQUFPLEtBQU8sYUFDZCxFQUFPLEtBQU8sRUFBSyxRQUFRLFlBQVksRUFDdkMsRUFBTyxNQUFPLE9BQVMsRUFBSyxRQUFRLFNBQVMsRUFDN0MsRUFBTyxNQUFPLE1BQWEsT0FDM0IsRUFBTyxNQUFPLGNBQWUsT0FBUyxDQUNwQyxJQUFLLEVBQU8sTUFBTyxPQUNuQixlQUFnQixXQUNoQixlQUFnQixXQUNoQixhQUFjLE1BQ2hCLEVBRUEsTUFBTSxFQUFXLE9BQU8sS0FBSyxNQUFNLEVBQTBCLENBQUMsRUFDOUQsUUFBUSxLQUNOLGtFQUNBLENBQ0YsRUFFQSxFQUFPLE1BQU8sY0FBZ0IsSUFDekIsRUFBTyxNQUFPLGNBQ2pCLFVBQ0YsRUFFQSxNQUFXLFNBQU0sQ0FBTSxNQTNFbkIsR0FDRixpQkFSSixLQUNBLElBQ0EsS0FDQSxLQUNBLEtBQ0EsSUFFTSxHQUFnQixFQUFLLFFBQVEsWUFBWSxFQUMzQyxHQUFTLEdBQU8sUUFBUSxFQUU1QixHQUFJLEdBQUcsV0FBVyxFQUFhLEVBQzdCLEdBQVMsR0FBTyxJQUFJLEdBQUcsYUFBYSxFQUFhLEVBQUUsU0FBUyxDQUFDLElDZi9ELHdCQUNBLG9CQVFBLGVBQXNCLEVBQWMsRUFBRyxDQUNyQyxRQUFRLElBQUkscUJBQ1YsUUFBUSxJQUFJLHNCQUF5QixNQUFNLEVBQXFCLEVBRWxFLFFBQVEsS0FBSyxFQUFNLFdBQVcsMkNBQTJDLENBQUMsRUFDMUUsTUFBTSxFQUFhLEVBQUssUUFBUSxjQUFjLEVBQ3hDLEVBQWMsRUFBSyxRQUFRLFlBQVksRUFDdkMsRUFBVyxFQUFLLFFBQVEsTUFBTSxFQUVwQyxJQUFLLEVBQUcsV0FBVyxDQUFXLEVBQUcsQ0FDL0IsUUFBUSxNQUFNLHdDQUF3QyxHQUFhLEVBQ25FLE9BSUYsRUFBRyxjQUFjLENBQVUsRUFFM0IsRUFBRyxTQUFTLEVBQWEsQ0FBVSxFQUduQyxNQUFNLEVBQWtCLEVBQUssUUFBUSxjQUFjLEVBTzdDLEVBQWMsQ0FDbEIsS0FQcUIsRUFBRyxhQUFhLENBQWUsRUFPL0IsTUFBUSxVQUM3QixRQUFTLEdBQ1QsS0FBTSxTQUNOLEtBQU0sZ0JBQ04sTUFBTyx3QkFDUCxhQUFjLENBQUMsRUFDZixXQUFZLENBQUMsRUFDYixRQUFTLENBQUMsRUFDVixnQkFBaUIsQ0FBQyxDQUNwQixFQUVBLFFBQVEsS0FDTixxQ0FDQSxFQUFLLFFBQVEsRUFBVSxjQUFjLENBQ3ZDLEVBQ0EsRUFBRyxjQUFjLEVBQUssUUFBUSxFQUFVLGNBQWMsRUFBRyxDQUFXLEVBR3BFLE1BQU0sRUFBSyxHQUFHLEVBSWQsRUFBRyxjQUFjLEVBQUssUUFBUSxFQUFVLFlBQVksQ0FBQyxFQUtyRCxFQUFZLEtBQU8saUJBQ25CLEVBQVksTUFBUSx5QkFFcEIsUUFBUSxLQUNOLHFDQUNBLEVBQUssUUFBUSxFQUFVLHlCQUF5QixDQUNsRCxFQUNBLEVBQUcsY0FDRCxFQUFLLFFBQVEsRUFBVSx5QkFBeUIsRUFDaEQsQ0FDRixFQUdBLE1BQU0sRUFBSyxHQUFHLEVBQ2QsUUFBUSxLQUFLLDJCQUEyQixnQkE1RTFDLElBQ0EsdUNDSEEseUJBQ0EscUJBY0EsZUFBZSxFQUFlLEVBQUcsQ0FDL0IsR0FBSSxRQUFRLElBQUksY0FBZ0IsT0FBUSxPQVl4QyxHQVJBLE1BQU0sRUFBVyxVQUFXLENBQUMsTUFBTSxDQUFDLEdBR2IsTUFBTSxFQUMzQiwyQ0FDRixFQUlFLE1BQU0sR0FBZSxFQUFJLEVBQ3pCLFFBQVEsS0FBSyxDQUFDLEVBUWxCLGVBQWUsRUFBYSxFQUFHLENBQzdCLFFBQVEsS0FDTixnQ0FDQSxFQUFNLGFBQWEsR0FBSyxRQUFRLGVBQWUsQ0FBQyxDQUNsRCxFQUNBLE1BQU0sR0FBcUIsTUFBYSxVQUFLLFFBQVEsZUFBZSxJQUNqRSxjQVFILEdBUEEsUUFBUSxJQUFJLFNBQVcsYUFFdkIsUUFBUSxLQUNOLHdCQUNBLEVBQU0sY0FBYyxLQUFLLFVBQVUsQ0FBaUIsQ0FBQyxDQUN2RCxHQUVLLE1BQU0sUUFBUSxDQUFpQixFQUNsQyxRQUFRLE1BQU0saURBQWlELEVBQy9ELFFBQVEsS0FBSyxDQUFDLEVBR2hCLFFBQVcsS0FBTyxFQUNoQixNQUFNLEdBQWMsQ0FBRyxFQUd6QixNQUFNLEdBQWUsRUFDckIsTUFBTSxHQUFlLEVBQ3JCLE1BQU0sR0FBVyxFQU9uQixlQUFlLEVBQXlCLEVBQUcsQ0FDekMsR0FBSSxDQUNGLEdBQUcsV0FBVyxHQUFLLFFBQVEsTUFBTSxDQUFDLFFBQzNCLEVBQVAsQ0FDQSxRQUFRLEtBQUssOEJBQThCLEVBRzdDLEdBQUcsY0FBYyxHQUFLLFFBQVEsTUFBTSxDQUFDLEVBTXZDLGVBQWUsRUFBcUIsRUFBRyxDQUVyQyxHQUFJLENBQ0YsR0FBRyxXQUFXLEdBQUssUUFBUSxXQUFXLENBQUMsUUFDaEMsRUFBUCxDQUNBLFFBQVEsS0FBSyw2QkFBNkIsRUFJNUMsR0FBSSxDQUNGLEdBQUcsV0FBVyxHQUFLLFFBQVEsZ0JBQWdCLENBQUMsUUFDckMsRUFBUCxDQUNBLFFBQVEsS0FBSyxrQ0FBa0MsR0FJbkQsZUFBOEIsRUFBRyxFQUFHLENBRWxDLFFBQVEsS0FBSywyQkFBMkIsRUFDeEMsTUFBTSxHQUFnQixFQUd0QixRQUFRLEtBQUsseUJBQXlCLEVBQ3RDLE1BQU0sR0FBMEIsRUFFaEMsUUFBUSxLQUFLLHFCQUFxQixFQUNsQyxNQUFNLEdBQWMsRUFFcEIsUUFBUSxLQUFLLGtCQUFrQixFQUMvQixNQUFNLEdBQXNCLEVBQzVCLFFBQVEsS0FBSyx5QkFBeUIsZ0JBL0d4QyxJQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLHdDQ1RBLHlCQUNBLGtDQUNBLHFCQUNBLCtCQUNBLHFDQUVBLGtCQUFTLFVBQVMsZ0JBeUJsQixTQUFTLEVBQWMsQ0FBQyxFQUFlLENBQ3JDLE1BQU0sRUFBUyxFQUNaLFlBQVksRUFDWixNQUFNLElBQUksRUFDVixJQUFJLENBQUMsS0FBVSxFQUFLLE1BQU0sVUFBVSxHQUFLLENBQUMsR0FBRyxFQUFFLEVBQy9DLE9BQU8sT0FBTyxFQUNqQixHQUFJLEVBQU8sU0FBUyxVQUFVLEVBQUcsTUFBTyxRQUN4QyxHQUFJLEVBQU8sU0FBUyxPQUFPLEVBQUcsTUFBTyxRQUNyQyxNQUFPLFFBUVQsZUFBZSxFQUFpQixDQUFDLEVBQW9CLENBQ25ELFFBQVEsS0FBSywyQkFBMkIsRUFFeEMsUUFBUSxLQUFLLGtCQUFrQixFQUMvQixNQUFNLEVBQVUsTUFBTSxFQUFlLE1BQU8sQ0FBQyxNQUFPLFFBQVEsQ0FBQyxFQUU3RCxHQUFJLElBQVksS0FDZCxRQUFRLE1BQU0sd0JBQXdCLEVBQ3RDLFFBQVEsS0FBSyxDQUFDLEVBR2hCLE1BQU0sRUFBTyxFQUFRLEtBQUssRUFBRSxNQUFNLElBQUksRUFBRSxLQUFLLEVBQU8sRUFFOUMsRUFDSixFQUNHLEdBQUssU0FBUyxDQUFVLEVBQUksRUFBSyxRQUFRLENBQVUsRUFBSSxFQUFLLFFBQVUsR0FHM0UsUUFBUSxLQUFLLDBCQUEwQixFQUN2QyxNQUFNLEVBQXlCLE1BQU0sRUFBZSxNQUFPLENBQ3pELFdBQ0EsS0FDQSxHQUFHLEdBQ0wsQ0FBQyxFQUVELEdBQUksSUFBMkIsS0FDN0IsUUFBUSxNQUFNLG1DQUFtQyxFQUNqRCxRQUFRLEtBQUssQ0FBQyxFQUdoQixNQUFNLEVBQXFCLEVBQXVCLEtBQUssRUFFdkQsUUFBUSxLQUFLLG1DQUFtQyxFQUNoRCxJQUFJLEVBQTBCLE1BQU0sRUFBZSxNQUFPLENBQ3hELFdBQ0EsS0FDQSxHQUFHLEdBQ0wsQ0FBQyxFQUVELEdBQUksSUFBNEIsTUFPOUIsR0FOQSxFQUEwQixNQUFNLEVBQWUsTUFBTyxDQUNwRCxXQUNBLGtCQUNBLE1BQ0YsQ0FBQyxFQUVHLElBQTRCLEtBQzlCLFFBQVEsTUFBTSxvQ0FBb0MsRUFDbEQsUUFBUSxLQUFLLENBQUMsRUFJbEIsTUFBTSxFQUFzQixFQUF3QixLQUFLLEVBRXpELFFBQVEsS0FBSyxrQkFBa0IsRUFDL0IsTUFBTSxFQUFXLE1BQU0sRUFBZSxNQUFPLENBQzNDLE1BQ0EsY0FDQSxHQUFHLE9BQXlCLEdBQzlCLENBQUMsRUFFRCxHQUFJLElBQWEsS0FDZixRQUFRLE1BQU0sbUJBQW1CLEVBQ2pDLFFBQVEsS0FBSyxDQUFDLEVBR2hCLE1BQU0sRUFBTyxFQUNWLE1BQU0sSUFBSSxFQUVWLElBQUksQ0FBQyxJQUFTLENBQ2IsT0FBUyxFQUFNLEdBQUksRUFBVSxJQUMzQixFQUFLLE1BQU0sMkJBQTJCLEdBQUssQ0FBQyxFQUM5QyxNQUFPLENBQ0wsSUFBSyxHQUFZLEVBQUksWUFBWSxHQUNqQyxRQUFTLEdBQVcsQ0FBTyxDQUM3QixFQUNELEVBRUEsT0FBTyxDQUFDLElBQVMsRUFBSyxHQUFHLEVBRXRCLEVBQVMsR0FBUSxFQUFNLEtBQUssRUFFNUIsRUFBTyxHQUVWLE9BQU8sQ0FBQyxJQUFjLEVBQU8sRUFBVSxFQUN2QyxJQUFJLENBQUMsSUFBYyxDQUNsQixNQUFNLEVBQVEsRUFBTyxHQUNyQixNQUFPLE1BQU0sRUFBVSxRQUFRLE9BQVEsQ0FBQyxJQUFNLEVBQUUsWUFBWSxDQUFDLFFBQVEsRUFDbEUsSUFBSSxFQUFHLE1BQUssYUFBYyxRQUFRLEVBQUksWUFBWSxTQUFTLEdBQVMsRUFDcEUsS0FBSyxJQUFJLElBQ2IsRUFDQSxLQUFLLE1BQU0sRUFHZCxPQURBLFFBQVEsS0FBSyw2QkFBNkIsRUFDbkMsRUFhVCxlQUE4QixFQUFHLENBQy9CLEVBQXFELENBQUMsRUFDdEQsQ0FLQSxHQUpBLFFBQVEsS0FBSyw2QkFBNkIsRUFFeEIsTUFBTSxFQUFlLE1BQU8sQ0FBQyxRQUFTLFFBQVEsQ0FBQyxJQUUvQyxLQUNoQixRQUFRLE1BQU0scUJBQXFCLEVBQ25DLFFBQVEsS0FBSyxDQUFDLEVBSWhCLE1BQU0sRUFBTSxHQUFhLEdBQUssUUFBUSxjQUFjLENBQUMsR0FDN0MsUUFBUyxFQUFpQixTQUFZLEVBQzlDLFFBQVEsS0FBSywyQkFBNEIsQ0FBRSxnQkFBZSxDQUFDLEVBRTNELE1BQU0sRUFBUSxNQUFNLEdBQWtCLE1BQU0sRUFDdEMsRUFBYyxHQUFlLENBQUssRUFDbEMsRUFBYSxHQUFlLEdBQUksRUFBZ0IsQ0FBVyxFQUVqRSxJQUFLLEVBQ0gsUUFBUSxNQUFNLG1DQUFvQyxDQUFFLGdCQUFlLENBQUMsRUFDcEUsUUFBUSxLQUFLLENBQUMsRUFJaEIsR0FBSSxFQUFRLEtBVVYsR0FUQSxRQUFRLEtBQUsseUJBQXlCLEVBQ3RCLE1BQU0sRUFBZSxNQUFPLENBQzFDLE1BQ0EsS0FDQSxFQUNBLEtBQ0EsV0FBVyxHQUNiLENBQUMsSUFFZSxLQUNkLFFBQVEsTUFBTSxxQkFBcUIsRUFDbkMsUUFBUSxLQUFLLENBQUMsRUFLbEIsR0FBSSxFQUFRLGNBQWUsQ0FDekIsUUFBUSxLQUFLLDhCQUE4QixFQUMzQyxNQUFNLEVBQU0sR0FBYSxHQUFLLFFBQVEsY0FBYyxDQUFDLEVBQ3JELEVBQUksUUFBVSxFQUVkLEdBQ0UsR0FBSyxRQUFRLGNBQWMsRUFDM0IsR0FBRyxLQUFLLFVBQVUsRUFBSyxLQUFNLElBQUksS0FDbkMsRUFHRixNQUFNLEVBQU8sTUFBTSxRQUFpQixJQUdwQyxJQUFLLEVBQU0sS0FBSyxHQUFLLEVBQVEsYUFDM0IsTUFBTSxJQUFJLE1BQ1IsZ0VBQ0YsRUFJRixHQUFJLEVBQVEsS0FBTSxDQUNoQixRQUFRLEtBQUsscUNBQXNDLEVBQVEsSUFBSSxFQUMvRCxNQUFNLEVBQU8sR0FBSyxRQUFRLEVBQVEsSUFBYyxFQUMxQyxFQUFlLEdBQVcsQ0FBSSxFQUFJLEdBQWEsQ0FBSSxFQUFJLEdBQzdELEdBQWMsRUFBTSxHQUFHLEdBQUcsUUFBVyxJQUFlLEtBQUssS0FBSyxFQUU5RCxRQUFTLEVBQUksRUFBRyxHQUFLLE1BQU8sRUFBRyxDQUM3QixHQUFJLEdBQUcsV0FBVyxDQUFJLEVBQUcsTUFDekIsR0FBSSxJQUFNLElBQ1IsUUFBUSxLQUNOLDJFQUNBLEVBQU0sY0FBYyxDQUFJLENBQzFCLEVBQ0EsUUFBUSxLQUFLLENBQUMsRUFNbEIsR0FEQSxRQUFRLEtBQUssNEJBQTRCLEVBQ3BDLE1BQU0sRUFBZSxNQUFPLENBQUMsTUFBTyxJQUFJLENBQUMsSUFBTyxLQUNuRCxRQUFRLEtBQ04sK0RBQ0YsRUFDQSxRQUFRLEtBQUssQ0FBQyxFQVdoQixHQVBBLFFBQVEsS0FBSyxzQkFBc0IsRUFDaEIsTUFBTSxFQUFlLE1BQU8sQ0FDN0MsU0FDQSxNQUNBLFdBQVcsR0FDYixDQUFDLElBRWtCLEtBQ2pCLFFBQVEsTUFBTSx5QkFBeUIsRUFDdkMsUUFBUSxLQUFLLENBQUMsRUFHaEIsUUFBUSxLQUFLLE9BQU8sRUFBTSxLQUFLLENBQUksT0FBTyxNQUUxQyxTQUFRLEtBQUssT0FBTyxFQUFNLEtBQUssQ0FBSSxPQUFPLEVBSzVDLFFBQVEsSUFBSSxxQkFBdUIsTUFoUTdCLEdBQVksR0FBYyxHQUFjLEdBRzFDLEdBY0EsaUJBckJOLElBRUEsSUFFTSxFQUFFLGNBQVksZ0JBQWMsZ0JBQWMsa0JBQWtCLElBRzVELEdBQXNDLENBQzFDLFNBQVUsV0FFVixLQUFNLFFBQ04sUUFBUyxRQUNULE1BQU8sUUFFUCxJQUFLLFFBQ0wsTUFBTyxRQUNQLE9BQVEsUUFFUixLQUFNLE1BQ1IsRUFFTSxHQUFXLEdBQUssT0FBTyxPQUFPLEVBQVcsQ0FBQyxJQ3BCaEQsZUFBc0IsRUFBa0IsQ0FBQyxFQUFnQixDQUN2RCxPQUFPLEVBQVMsTUFBTyxDQUFDLFlBQWEsQ0FBTSxDQUFDLGdCQVA5QyxNQ1NBLGVBQXNCLEVBQWUsQ0FBQyxFQUFnQixDQUVwRCxNQUFNLEVBQW9CLE1BQU0sRUFBZSxNQUFPLENBQUMsU0FBVSxJQUFJLENBQUMsRUFFdEUsR0FBSSxJQUFzQixLQUN4QixRQUFRLEtBQUssNkNBQTZDLEVBQzFELFFBQVEsS0FBSyxDQUFDLEVBR2hCLE1BQU0sRUFBVSxFQUFrQixNQUFNLFFBQVEsRUFFMUMsRUFBYyxFQUFRLEtBQUssQ0FBQyxJQUFRLEVBQUksUUFBUSxDQUFNLEdBQUssQ0FBQyxFQUVsRSxJQUFLLEVBQ0gsUUFBUSxLQUNOO0FBQUEscUNBQytCO0FBQUE7QUFBQTtBQUFBLFFBRzdCLEVBQVEsS0FBSyxJQUFJO0FBQUEsS0FFckIsRUFDQSxRQUFRLEtBQUssQ0FBQyxFQUdoQixNQUFNLEVBQVksRUFBWSxNQUFNLE1BQU0sRUFBRSxHQUk1QyxJQUFLLEdBQW1CLENBQVMsRUFDL0IsUUFBUSxLQUFLO0FBQUE7QUFBQTtBQUFBLFFBR1Q7QUFBQTtBQUFBLEtBRUgsRUFDRCxRQUFRLEtBQUssQ0FBQyxnQkE3Q2xCLElBQ0EsSUFDQSxPQ0lBLGVBQXNCLEVBQWdCLEVBQUcsQ0FFdkMsTUFBTSxFQUFTLE1BQU0sRUFBZSxNQUFPLENBQ3pDLFlBQ0EsZUFDQSxNQUNGLENBQUMsRUFFRCxHQUFJLElBQVcsS0FBTSxDQUNuQixRQUFRLE1BQU0scUNBQXFDLEVBQ25ELE9BSUYsT0FEZSxFQUFPLEtBQUssR0FDTCxxQkFwQnhCLFVDT2EsR0FBa0IsTUFBTyxFQUFnQixJQUFtQixDQUN2RSxNQUFNLEVBQVksTUFBTSxHQUFpQixFQUV6QyxJQUFLLEVBRUgsT0FEQSxRQUFRLEtBQUsscUNBQXFDLEVBQzNDLEdBSVQsR0FBSyxNQUFNLEVBQWUsTUFBTyxDQUFDLFdBQVksR0FBRyxHQUFRLENBQUMsSUFBTyxLQUUvRCxPQURBLFFBQVEsS0FBSyw2QkFBNkIsR0FBUSxFQUMzQyxHQUlULEdBQ0csTUFBTSxFQUFlLE1BQU8sQ0FDM0IsUUFDQSxTQUNBLEdBQUcsS0FBVSxHQUNmLENBQUMsSUFBTyxLQUNSLENBSUEsR0FIQSxRQUFRLEtBQUssMEJBQTBCLEdBQVEsRUFHM0MsTUFBTSxFQUFlLE1BQU8sQ0FBQyxXQUFZLEdBQUcsR0FBVyxDQUFDLEVBQzFELFFBQVEsS0FBSyx1Q0FBdUMsR0FBVyxFQUdqRSxNQUFPLEdBSVQsR0FBSyxNQUFNLEVBQWUsTUFBTyxDQUFDLFdBQVksR0FBRyxHQUFXLENBQUMsSUFBTyxLQUVsRSxPQURBLFFBQVEsS0FBSyx1Q0FBdUMsR0FBVyxFQUN4RCxHQUdULE1BQU8sa0JBN0NULElBQ0EsT0NEQSx5QkFDQSxxQkFFQSxlQUFzQixFQUFpQixFQUFHLENBRXhDLE9BRG9CLEdBQUcsYUFBYSxHQUFLLFFBQVEsY0FBYyxDQUFDLEVBQzdDLFlBQWMsQ0FBQyxpRENMcEMseUJBQ0EscUJBMkJBLGVBQWUsRUFBa0IsRUFBRyxDQUNsQyxNQUFNLEVBQWMsTUFBTSxHQUFrQixFQUN0QyxFQUF3QixFQUFZLElBRTFDLElBQ0csS0FFQyxFQUFZLE9BQVMsVUFDckIsRUFBWSxPQUFTLE9BQ3JCLEVBQVksT0FBUyxhQUNyQixFQUFZLE9BQVMsU0FHdkIsUUFBUSxLQUFLO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsS0FVWixFQUNELFFBQVEsS0FBSyxDQUFDLEVBSWhCLE1BQU0sRUFBb0IsTUFBTSxFQUFlLE1BQU8sQ0FBQyxTQUFVLElBQUksQ0FBQyxFQUV0RSxHQUFJLElBQXNCLEtBQ3hCLFFBQVEsS0FBSyw2Q0FBNkMsRUFDMUQsUUFBUSxLQUFLLENBQUMsRUFHaEIsTUFBTSxFQUFVLEVBQWtCLE1BQU0sUUFBUSxFQU9oRCxJQUxvQixFQUFRLEtBQzFCLENBQUMsSUFDQyxFQUFJLFFBQVEsQ0FBYSxHQUFLLEdBQUssRUFBSSxRQUFRLENBQXFCLEdBQUssQ0FDN0UsRUFHRSxRQUFRLEtBQ04seUVBQ0EsQ0FBRSxvQkFBbUIsVUFBUyxnQkFBZSx1QkFBc0IsQ0FDckUsRUFDQSxRQUFRLEtBQUssQ0FBQyxFQUtoQixJQUFLLEdBQW1CLENBQXFCLEVBQzNDLFFBQVEsS0FBSztBQUFBO0FBQUE7QUFBQSxRQUdUO0FBQUE7QUFBQSxLQUVILEVBQ0QsUUFBUSxLQUFLLENBQUMsRUFLaEIsR0FBSSxNQUFNLEVBQWMsRUFDdEIsUUFBUSxNQUNOLHdJQUNGLEVBQ0EsUUFBUSxLQUFLLENBQUMsRUFHaEIsUUFBUSxLQUFLLGdDQUFnQyxFQU8vQyxlQUFlLEVBQWUsRUFBRyxDQUUvQixJQUFNLE1BQU0sTUFBTSxFQUFTLE1BQU8sQ0FBQyxXQUFZLFNBQVMsQ0FBQyxHQUN2RCxJQUFNLE1BQU0sRUFBUyxNQUFPLENBQUMsV0FBWSxLQUFNLFNBQVMsQ0FBQyxFQUN2RCxRQUFRLEtBQ04sOEVBQ0YsRUFDQSxRQUFRLEtBQUssQ0FBQyxFQUtsQixJQUFNLE1BQU0sRUFBUyxNQUFPLENBQUMsUUFBUyxHQUFHLEdBQWUsQ0FBQyxFQUN2RCxRQUFRLEtBQUssc0NBQXNDLEVBQ25ELFFBQVEsS0FBSyxDQUFDLEVBSWhCLElBQU0sTUFBTSxFQUFTLE1BQU8sQ0FBQyxRQUFTLFNBQVUsR0FBRyxPQUFtQixDQUFDLEVBQ3JFLFFBQVEsS0FBSywrQkFBK0IsRUFDNUMsUUFBUSxLQUFLLENBQUMsRUFHaEIsUUFBUSxLQUFLLCtDQUErQyxFQU85RCxTQUFTLEVBQWMsRUFBRyxDQUN4QixHQUFJLENBS0YsTUFBTSxFQUpnQixHQUFHLGFBQ3ZCLEdBQUssUUFBUSxrQkFBa0IsRUFDL0IsTUFDRixFQUVHLFlBQVksRUFDWixNQUFNLElBQUksRUFDVixJQUFJLENBQUMsS0FBVSxFQUFLLE1BQU0sVUFBVSxHQUFLLENBQUMsR0FBRyxFQUFFLEVBQy9DLE9BQU8sT0FBTyxFQUNqQixHQUFJLEVBQU8sU0FBUyxVQUFVLEVBQUcsTUFBTyxRQUN4QyxHQUFJLEVBQU8sU0FBUyxPQUFPLEVBQUcsTUFBTyxRQUNyQyxNQUFPLGNBQ0EsRUFBUCxDQUNBLFFBQVEsTUFBTSw0REFBNEQsRUFDMUUsUUFBUSxLQUFLLENBQUMsR0FRbEIsZUFBZSxFQUFhLENBQUMsRUFBb0IsQ0FFL0MsTUFBTSxFQUFpQixNQUFNLEVBQXFCLEVBR2xELElBQU0sTUFBTSxFQUFTLE1BQU8sQ0FBQyxNQUFPLElBQUksQ0FBQyxFQUN2QyxRQUFRLEtBQ04sK0RBQ0YsRUFDQSxRQUFRLEtBQUssQ0FBQyxFQUloQixNQUFNLEdBQWEsQ0FDakIsS0FBTSxtQkFDTixjQUFlLEVBQ2pCLENBQUMsRUFHRCxNQUFNLEVBQWEsTUFBTSxFQUFxQixFQUk5QyxHQUFJLElBQW1CLEVBQ3JCLFFBQVEsS0FBSztBQUFBO0FBQUE7QUFBQTtBQUFBLEtBSVosRUFDRCxRQUFRLEtBQUssQ0FBQyxFQUdoQixHQUFJLEdBQ0YsR0FBSSxHQUFlLElBQU0sUUFDdkIsUUFBUSxNQUFNO0FBQUE7QUFBQTtBQUFBO0FBQUEsT0FJYixFQUNELFFBQVEsS0FBSyxDQUFDLEVBS2xCLE1BQU0sRUFBb0IsTUFBTSxFQUFlLE1BQU8sQ0FDcEQsTUFDQSxLQUNBLGFBQ0YsQ0FBQyxFQUVELEdBQUksSUFBc0IsS0FDeEIsUUFBUSxLQUFLLG9EQUFvRCxFQUNqRSxRQUFRLEtBQUssQ0FBQyxFQUdoQixNQUFNLEdBQ0osRUFBa0IsS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLFVBQVUsRUFBRSxJQUFNLElBQy9ELEtBQUssRUFFUCxJQUFLLEVBQ0gsUUFBUSxLQUNOLGdFQUNBLEVBQWtCLFNBQVMsRUFDM0IsTUFDRixFQUNBLFFBQVEsS0FBSyxDQUFDLEVBSWhCLEdBQUksR0FBRyxXQUFXLEdBQUssUUFBUSxpQkFBaUIsQ0FBQyxFQUFHLENBQ2xELEdBQUksQ0FDRixNQUFNLEVBQVcsR0FBRyxhQUFhLEdBQUssUUFBUSxpQkFBaUIsQ0FBQyxFQUNoRSxFQUFTLFFBQVUsRUFDbkIsR0FBRyxjQUFjLEdBQUssUUFBUSxpQkFBaUIsRUFBRyxDQUFRLFFBQ25ELEVBQVAsQ0FDQSxRQUFRLEtBQ04sc0VBQ0YsRUFDQSxRQUFRLEtBQUssQ0FBQyxFQUloQixJQUFNLE1BQU0sRUFBUyxNQUFPLENBQUMsTUFBTyxJQUFJLENBQUMsRUFDdkMsUUFBUSxLQUNOLG9FQUNGLEVBQ0EsUUFBUSxLQUFLLENBQUMsRUFJaEIsSUFBTSxNQUFNLEVBQVMsTUFBTyxDQUFDLFNBQVUsVUFBVyxXQUFXLENBQUMsRUFDNUQsUUFBUSxLQUNOLHNFQUNGLEVBQ0EsUUFBUSxLQUFLLENBQUMsRUFJbEIsR0FBSSxFQUFRLFNBQVMsR0FBRyxFQUN0QixRQUFRLEtBQ04sNEVBQ0EsQ0FBRSxTQUFRLENBQ1osRUFDQSxRQUFRLEtBQUssQ0FBQyxFQUloQixPQURBLFFBQVEsS0FBSyxzQkFBdUIsQ0FBRSxTQUFRLENBQUMsRUFDeEMsRUFNVCxlQUFlLEVBQVMsQ0FBQyxFQUFpQixDQUV4QyxJQUNJLE1BQU0sRUFBUyxNQUFPLENBQUMsTUFBTyxLQUFNLEVBQVMsS0FBTSxXQUFXLEdBQVMsQ0FBQyxFQUUxRSxRQUFRLEtBQUssbUNBQW1DLEVBQ2hELFFBQVEsS0FBSyxDQUFDLEVBUWxCLGVBQWUsRUFBWSxDQUN6QixFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ0EsQ0FFQSxJQUNJLE1BQU0sRUFBUyxNQUFPLENBQ3RCLE9BQ0EsRUFBUSxLQUFZLE9BQ3BCLEVBQ0EsR0FBRyxLQUFjLEdBQ25CLENBQUMsRUFFRCxRQUFRLEtBQUssb0NBQW9DLEdBQVEsRUFDekQsUUFBUSxLQUFLLENBQUMsRUFJaEIsSUFBTSxNQUFNLEVBQVMsTUFBTyxDQUFDLE9BQVEsRUFBUSxDQUFPLENBQUMsRUFDbkQsUUFBUSxLQUFLLDZDQUE2QyxFQUMxRCxRQUFRLEtBQUssQ0FBQyxFQWdCbEIsZUFBZSxFQUF3QixDQUFDLEVBQXNCLEVBQWlCLENBQzdFLEdBQUksR0FBYyxFQUFXLE9BQVMsR0FVcEMsSUFUNkIsTUFBTSxFQUNqQztBQUFBO0FBQUE7QUFBQTtBQUFBLFVBSUksRUFBTSxlQUFlLEVBQVcsS0FBSyxJQUFJLENBQUM7QUFBQSxPQUVoRCxFQUUyQixPQUk3QixJQUFNLE1BQU0sRUFBUyxNQUFPLENBQUMsUUFBUyxDQUFhLENBQUMsRUFDbEQsUUFBUSxLQUFLLHNDQUFzQyxFQUNuRCxRQUFRLEtBQUssQ0FBQyxFQUdoQixRQUFXLEtBQWMsRUFBWSxDQUVuQyxNQUFPLEVBQVEsRUFBWSxFQUFVLEdBQVMsRUFBVyxNQUFNLEdBQUcsRUFFbEUsTUFBTSxHQUFnQixDQUFNLEVBRTVCLE1BQU0sR0FBZ0IsRUFBZSxHQUFjLFFBQVEsRUFFM0QsTUFBTSxHQUNKLEVBQ0EsRUFDQSxHQUFjLFNBQ2QsR0FBWSxTQUNaLElBQVUsT0FDWixHQVNKLGVBQWUsRUFBWSxDQUFDLEVBQXNCLENBRWhELFFBQVEsSUFBSSxTQUFXLGFBR3ZCLE1BQU0sR0FBbUIsRUFFekIsTUFBTSxHQUFnQixFQUV0QixNQUFNLEdBQWEsRUFFbkIsTUFBTSxFQUFVLE1BQU0sR0FBYyxFQVNwQyxHQVBBLE1BQU0sR0FBVSxDQUFPLEVBRXZCLE1BQU0sR0FBYSxFQUFlLEVBQVMsVUFBVyxVQUFXLEVBQUksRUFHcEQsTUFBTSxFQUFjLG1DQUFtQyxFQUt0RSxNQUFNLEVBQVcsS0FBTSxDQUFDLFNBQVMsQ0FBQyxFQUlwQyxNQUFNLEdBQXlCLEVBQVksQ0FBTyxFQUVsRCxNQUFNLEdBQWUsRUFBSSxFQU0zQixlQUE4QixFQUFHLENBQUMsRUFBc0IsQ0FDdEQsUUFBUSxLQUFLLDBCQUEwQixFQUN2QyxHQUFhLENBQVUsTUFoWW5CLEVBQWdCLHVCQXBCdEIsS0FDQSxLQUNBLElBQ0EsSUFDQSxLQUNBLElBQ0EsSUFDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLEtBQ0EsS0FDQSxLQUNBLHVDQ2RBLGVBQThCLEVBQUcsRUFBRyxDQUNsQyxNQUFNLEdBQW9CLGdCQUg1Qix3Q0NBQSx3QkFDQSx1QkFDQSxvQkFnQkEsZUFBZSxFQUFhLENBQUMsRUFBYyxDQUV6QyxNQUFNLEVBQVcsRUFBRyxhQUFhLEVBQUssUUFBUSxlQUFlLENBQUMsRUFXOUQsR0FWQSxFQUFTLFFBQVUsRUFBUyxTQUFXLENBQUMsRUFDeEMsRUFBUyxTQUFXLEdBQVUsU0FBVyxDQUFDLEdBQUcsT0FDM0MsQ0FBQyxLQUFlLEdBQU8sUUFBUSxFQUFLLFNBQVMsS0FBTSxDQUFDLENBQUMsQ0FDdkQsRUFFQSxFQUFHLGNBQWMsRUFBSyxRQUFRLG9CQUFvQixFQUFHLENBQVEsRUFFN0QsTUFBTSxFQUFLLEdBQUcsRUFHVixJQUFTLFFBQVMsQ0FDcEIsTUFBTSxFQUFhLFNBQVksQ0FDN0IsUUFBUSxLQUFLLGlCQUFpQixFQUU5QixHQUFJLENBQ0YsRUFBRyxXQUFXLEVBQUssUUFBUSxvQkFBb0IsQ0FBQyxRQUN6QyxFQUFQLEVBSUYsUUFBUSxLQUFLLENBQUMsR0FJaEIsUUFBUSxHQUFHLE9BQVEsQ0FBVSxFQUU3QixRQUFRLEdBQUcsU0FBVSxDQUFVLEVBRS9CLFFBQVEsR0FBRyxVQUFXLENBQVUsRUFDaEMsUUFBUSxHQUFHLFVBQVcsQ0FBVSxFQUNoQyxRQUFRLEdBQUcsVUFBVyxDQUFVLEVBRWhDLFFBQVEsR0FBRyxvQkFBcUIsQ0FBVSxFQUU1QyxJQUNHLEVBQVMsTUFBTyxDQUNmLEtBQ0EsSUFBUyxRQUFVLFVBQVksR0FDL0IsZ0JBQ0EsV0FDQSxXQUNBLG9CQUNBLEVBQUssUUFBUSx5Q0FBeUMsRUFDdEQsV0FDQSxFQUFLLFFBQVEsTUFBTSxFQUNuQixZQUNBLEVBQUssUUFBUSxvQkFBb0IsQ0FDbkMsQ0FBQyxFQUVELFFBQVEsS0FBSyxxQ0FBcUMsRUFDbEQsRUFBRyxXQUFXLEVBQUssUUFBUSxvQkFBb0IsQ0FBQyxFQUNoRCxRQUFRLEtBQUssQ0FBQyxFQUdoQixNQUFNLEdBQWlCLEdBQVUsU0FBVyxDQUFDLEdBQzFDLE9BQU8sQ0FBQyxLQUFlLEdBQU8sUUFBUSxFQUFLLFNBQVMsS0FBTSxDQUFDLENBQUMsQ0FBQyxFQUM3RCxJQUFJLENBQUMsSUFBYyxFQUFLLFFBQVEsQ0FBQyxDQUFDLEVBQ2xDLE9BQU8sQ0FBQyxJQUFjLEVBQUcsV0FBVyxDQUFDLElBQU0sRUFBRSxTQUFTLGNBQWMsQ0FBQyxFQUV4RSxHQUFJLEVBQWMsT0FBUyxHQUN6QixJQUNHLEVBSUMsU0FDQSxDQUNFLEdBQUcsRUFDSCxLQUNBLEVBQUssUUFBUSxXQUFXLEVBQ3hCLFFBQ0EsTUFDQSxRQUNBLE1BQ0YsQ0FDRixFQUVBLFFBQVEsS0FBSyx1QkFBdUIsRUFDcEMsRUFBRyxXQUFXLEVBQUssUUFBUSxvQkFBb0IsQ0FBQyxFQUNoRCxRQUFRLEtBQUssQ0FBQyxFQUlsQixFQUFHLFdBQVcsRUFBSyxRQUFRLG9CQUFvQixDQUFDLEVBR2xELGVBQThCLEVBQUcsQ0FBQyxFQUFjLENBQzlDLE1BQU0sR0FBYyxDQUFJLE1BdEdwQixHQUNGLGlCQUpKLElBR00sR0FBZ0IsRUFBSyxRQUFRLFlBQVksRUFDM0MsR0FBUyxHQUFPLFFBQVEsRUFFNUIsR0FBSSxFQUFHLFdBQVcsRUFBYSxFQUM3QixHQUFTLEdBQU8sSUFBSSxFQUFHLGFBQWEsRUFBYSxFQUFFLFNBQVMsQ0FBQyxxQ0NKL0QsZUFBOEIsRUFBRyxFQUFHLENBQ2xDLFFBQVEsS0FBSyxFQUFNLGlCQUFpQixvQkFBb0IsQ0FBQyxFQUN6RCxNQUFNLEdBQWEsZ0JBUnJCLEtBQ0EsdUNDREEseUJBQ0EscUJBTUEsZUFBZSxFQUFXLENBQUMsRUFBc0IsQ0FDL0MsSUFBSyxHQUFHLFdBQVcsQ0FBWSxFQUs3QixPQUpBLFFBQVEsS0FDTixzRUFDQSxDQUNGLEVBQ08sR0FJVCxPQURBLE1BQU0sRUFBUyxNQUFPLENBQUMsR0FBRyxHQUFjLENBQUMsRUFDbEMsR0FNVCxlQUFlLEVBQWMsRUFBRyxDQUM5QixNQUFNLEVBQWUsR0FBSyxRQUFRLGVBQWUsRUFDakQsT0FBTyxNQUFNLEdBQVksQ0FBWSxFQU12QyxlQUFlLEVBQVcsRUFBRyxDQUUzQixRQUFRLElBQUksY0FBZ0IsR0FBSyxRQUFRLGlCQUFpQixFQUUxRCxNQUFNLEVBQWUsR0FBSyxRQUFRLDBCQUEwQixFQUU1RCxPQUFPLE1BQU0sR0FBWSxDQUFZLEVBTXZDLGVBQThCLEVBQUcsQ0FBQyxFQUFnQixFQUFlLENBRS9ELE1BQVEsT0FBTyxNQUFTLFFBQVEsSUFDaEMsUUFBUSxJQUFJLEtBQU8sRUFFbkIsSUFBSSxFQUFnQixHQUVwQixPQUFRLE9BQ0QsTUFDSCxFQUFnQixNQUFNLEdBQVksRUFDbEMsVUFFRyxTQUNILEVBQWdCLE1BQU0sR0FBZSxFQUNyQyxjQUlBLEdBQUksRUFDRixRQUFRLEtBQUssNENBQTZDLENBQU0sRUFFbEUsTUFJSixJQUFLLEVBQWUsQ0FFbEIsR0FEQSxFQUFnQixNQUFNLEdBQVksRUFDOUIsRUFBZSxPQUVuQixHQURBLEVBQWdCLE1BQU0sR0FBZSxFQUNqQyxFQUFlLHNCQXRFdkIsTUNGQSx5QkFDQSxxQkFLQSxlQUFzQixFQUFRLEVBQUcsQ0FDL0IsTUFBTSxFQUFlLEdBQUssUUFBUSxlQUFlLEVBRWpELElBQUssR0FBRyxXQUFXLENBQVksRUFDN0IsTUFBTSxJQUFJLE1BQU0seUNBQXlDLEVBSTNELE1BQU0sRUFBUSxRQUFRLFFBQVEsSUFBSSxLQUFLLEVBQ2pDLEVBQVUsUUFBUSxJQUFJLFFBQ3RCLEVBQVEsUUFBUSxJQUFJLE1BQ3BCLEVBQU8sUUFBUSxJQUFJLEtBRW5CLEVBQWEsR0FBSyxRQUFRLGdCQUFnQixFQUVoRCxFQUFTLE9BQVMsR0FFbEIsR0FBSSxDQUNGLEdBQUksRUFDRixFQUFTLE9BQVEsQ0FDZixnQkFDQSxHQUFLLFFBQVEsd0JBQXdCLEVBQ3JDLGNBQ0EsRUFBUSxhQUFlLEdBQ3ZCLFlBQ0EsSUFBUyxPQUFTLFFBQWUsT0FDakMsV0FDQSxXQUNBLEVBQ0EsRUFBVSxxQkFBcUIsSUFBWSxFQUM3QyxDQUFDLE1BRUQsSUFDRSxDQUNFLE9BQ0EsRUFBUSxhQUFlLEdBQ3ZCLFlBQ0EsSUFBUyxPQUFTLFFBQWUsT0FDakMsV0FDQSxXQUNBLEVBQ0EsRUFBVSxxQkFBcUIsSUFBWSxFQUM3QyxFQUVBLENBQ0UsZUFBZ0IsRUFDbEIsQ0FDRixRQUVLLEVBQVAsQ0FDQSxRQUFRLEtBQ04sZ0VBQ0YsRUFHRixRQUFRLEtBQUssRUFBTSxXQUFXLGdCQUFnQixDQUFDLGdCQTNEakQsSUFDQSxLQUNBLHVDQ0ZBLGVBQThCLEVBQUcsRUFBRyxDQUNsQyxRQUFRLEtBQUssdUJBQXVCLEVBRXBDLE1BQU0sR0FBUyxnQkFMakIsd0NDQUEsbUJBQ0EscUJBQ0EsdUJBT0EsZUFBOEIsRUFBRyxFQUFHLENBQ2xDLE1BQU0sRUFBUSxHQUFLLFFBQVEsd0JBQXdCLEVBQzdDLEVBQVEsR0FBSyxRQUFRLFNBQVMsRUFFcEMsR0FBSSxHQUFHLFdBQVcsQ0FBSyxFQUNyQixHQUFLLEtBQUssQ0FBSyxFQUNmLFFBQVEsS0FBSyx1QkFBdUIsTUFFcEMsU0FBUSxLQUFLLHNCQUFzQixFQUdyQyxHQUFJLEdBQUcsV0FBVyxDQUFLLEVBQ3JCLEdBQUssS0FBSyxDQUFLLEVBQ2YsUUFBUSxLQUFLLHVCQUF1QixNQUVwQyxTQUFRLEtBQUssc0JBQXNCLEVBR3JDLEdBQUksTUFBTSxFQUFTLE1BQU8sQ0FBQyxLQUFNLFFBQVMsSUFBSSxDQUFDLEVBQzdDLFFBQVEsS0FBSyxxQkFBcUIsTUFFbEMsU0FBUSxLQUFLLG9CQUFvQixnQkEzQnJDLE1DSEEscUJBQ0Esd0JBQVMsZ0JBU1QsZUFBc0IsRUFBbUIsQ0FDdkMsRUFDQSxFQUNpQixDQUtqQixNQUFNLEVBSlUsR0FBYyxZQUFZLEdBQUcsRUFDbEIsUUFBUSxDQUFXLEVBR3JCLE1BQU0sY0FBYyxFQUN2QyxFQUFhLEVBQU0sR0FDbkIsRUFBWSxFQUFNLEdBQUcsTUFBTSxHQUFLLEdBQUcsRUFBRSxHQVkzQyxPQVR3QixHQUFLLEtBQzNCLEVBQ0EsZUFDQSxFQUNBLGVBQ0EsU0FDQSxDQUNGLGlEQzlCRix5QkFDQSxxQkFDQSxvQkFVQSxlQUFlLEVBQVksQ0FDekIsRUFDQSxFQUNBLEVBQ0EsQ0FDQSxNQUFNLEVBQVksS0FBYSxxQkFDekIsRUFBWSxNQUFNLEdBQW9CLFlBQWEsWUFBWSxFQUMvRCxFQUFVLE1BQU0sRUFBVSxPQUFPLENBR3JDLFNBQVUsR0FDVixZQUFhLEdBQUssUUFBUSxHQUFXLENBQVMsRUFDOUMsZ0JBQWlCLElBQ25CLENBQUMsRUFFSyxFQUFPLE1BQU0sRUFBUSxRQUFRLEVBQ25DLFFBQVEsS0FBSyx3QkFBd0IsRUFDckMsTUFBTSxFQUFLLEtBQUssQ0FBTyxFQUl2QixNQUFNLEVBQVksTUFBTSxFQUFLLFNBQVMsSUFDcEMsU0FBUyxLQUFLLGFBQWEsaUJBQWlCLENBQzlDLEVBRUEsSUFBSyxFQUFXLENBQ2QsUUFBUSxLQUFLLDZDQUE2QyxFQUMxRCxJQUFJLEVBQWEsR0FFakIsRUFBUSxHQUFHLGVBQWdCLElBQU0sQ0FDL0IsSUFBSyxFQUFZLE9BQ2pCLFFBQVEsS0FBSyx1REFBdUQsRUFDcEUsUUFBUSxLQUFLLENBQUMsRUFDZixFQUVELE1BQU0sRUFBSyxLQUFLLENBQU8sRUFDdkIsTUFBTSxFQUFLLGdCQUNULElBQU0sQ0FDSixNQUFNLEVBQVksVUFBVSxNQUFNLGFBQWEsaUJBQWlCLEVBQ2hFLE9BQU8sSUFBYyxNQUFRLElBQW1CLFFBRWxELENBQUUsUUFBUyxDQUFFLENBQ2YsRUFFQSxNQUFNLEVBQUssTUFBTSxFQUNqQixFQUFhLE9BRWIsT0FBTSxFQUFLLE1BQU0sRUFHbkIsUUFBUSxLQUFLLG9CQUFxQixFQUFXLDRCQUE0QixFQUV6RSxNQUFNLEVBQVMsTUFDYixFQUNBLEVBQ0EsSUFDRyxDQUNILE1BQU0sRUFBTyxNQUFNLEVBQVEsUUFBUSxFQUduQyxNQUFNLEVBQUssS0FDVCxHQUFHLDBCQUNELEVBQWEsa0JBQW9CLDBDQUNLLHNDQUE4QyxtQkFDcEYsQ0FDRiwwQ0FBMEMsc0NBQThDLEdBQzFGLEVBR0EsTUFBTSxFQUFLLGdCQUNULElBQU0sQ0FDSixNQUFNLEVBQU8sU0FBUyxjQUFjLHNCQUFzQixFQUMxRCxPQUFPLElBQVMsTUFBUSxJQUFjLFFBRXhDLENBQUUsUUFBUyxDQUFFLENBQ2YsRUFHQSxNQUFNLEVBQUssU0FBUyxDQUFDLElBQW1CLENBRXRDLElBQUksRUFBTyxTQUFTLGNBQ2xCLHNCQUNGLEVBQ0EsR0FBSSxFQUFNLEVBQUssTUFBUSxXQUFXLElBTWxDLEdBSEEsRUFBTyxTQUFTLGNBQ2QsNEJBQ0YsRUFDSSxFQUFNLEVBQUssTUFBUSxXQUFXLElBTWxDLEdBSEEsRUFBTyxTQUFTLGNBQ2QsMkNBQ0YsRUFDSSxFQUNGLEVBQUssUUFBVSxHQUNmLEVBQUssTUFBUSxLQUVkLENBQWMsRUFHakIsTUFBTSxJQUFJLFFBQVEsQ0FBQyxJQUFNLENBQ3ZCLEVBQUssR0FBRyxRQUFTLElBQU0sQ0FDckIsRUFBTyxNQUFDLEVBQ1IsUUFBUSxLQUFLLG9DQUFvQyxFQUNsRCxFQUNGLEdBSUgsUUFBUSxLQUFLLHFEQUFxRCxFQUNsRSxNQUFNLFFBQVEsSUFBSSxDQUNoQixFQUFPLFVBQVcsS0FBSyxFQUN2QixFQUFPLFVBQVcsQ0FBWSxDQUNoQyxDQUFDLEVBR0QsRUFBUSxNQUFNLEVBR2hCLGVBQWUsRUFBUyxDQUN0QixFQUNBLEVBQ0EsRUFDQSxFQUNBLENBQ0EsTUFBTSxFQUFZLEtBQWEscUJBQ3pCLEVBQVksTUFBTSxHQUFvQixZQUFhLFlBQVksRUFDckUsSUFBSSxFQUFVLE1BQU0sRUFBVSxPQUFPLENBR25DLFVBQVcsRUFDWCxZQUFhLEdBQUssUUFBUSxHQUFXLENBQVMsRUFDOUMsZ0JBQWlCLElBQ25CLENBQUMsRUFFRCxNQUFNLEVBQU8sTUFBTSxFQUFRLFFBQVEsRUFFbkMsR0FBSSxFQUFXLENBQ2IsUUFBUSxLQUFLLHdCQUF3QixFQUNyQyxJQUFJLEVBQWEsR0FFakIsRUFBUSxHQUFHLGVBQWdCLElBQU0sQ0FDL0IsSUFBSyxFQUFZLE9BQ2pCLFFBQVEsS0FBSyx1REFBdUQsRUFDcEUsUUFBUSxLQUFLLENBQUMsRUFDZixFQUVELE1BQU0sRUFBVywyQkFDakIsUUFBUSxLQUFLLDhCQUErQixDQUFRLEVBQ3BELE1BQU0sRUFBSyxLQUFLLENBQVEsRUFDeEIsTUFBTSxFQUFLLGdCQUNULElBQU0sQ0FDSixNQUFNLEVBQVksVUFBVSxNQUN4QixhQUFhLE9BQU8sR0FDcEIsTUFBTSxHQUFHLEVBQ1YsS0FBSyxDQUFDLElBQU0sRUFBRSxXQUFXLFdBQVcsQ0FBQyxFQUN4QyxPQUFPLElBQWMsTUFBUSxJQUFtQixRQUVsRCxDQUFFLFFBQVMsQ0FBRSxDQUNmLEVBRUEsRUFBYSxPQUViLFNBQVEsS0FBSyx3QkFBeUIsQ0FBTyxFQUM3QyxNQUFNLEVBQUssS0FBSyxDQUFPLEVBS3pCLFFBQVEsS0FBSyw2Q0FBNkMsRUFDMUQsTUFBTSxFQUFXLE1BQU0sRUFBSyxTQUFTLElBQU0sQ0FRekMsT0FQQSxRQUFRLEtBQ04sbUJBQ0EsVUFBVSxNQUNOLGFBQWEsT0FBTyxHQUNwQixNQUFNLEdBQUcsRUFDVixLQUFLLENBQUMsSUFBTSxFQUFFLFdBQVcsV0FBVyxDQUFDLENBQzFDLEVBQ08sVUFBVSxNQUNiLGFBQWEsT0FBTyxHQUNwQixNQUFNLEdBQUcsRUFDVixLQUFLLENBQUMsSUFBTSxFQUFFLFdBQVcsV0FBVyxDQUFDLEVBQ3pDLEVBTUQsR0FKQSxRQUFRLEtBQUssbUJBQW9CLENBQVEsR0FJcEMsR0FBWSxFQUNmLE1BQU0sRUFBUSxNQUFNLEVBQ3BCLFFBQVEsTUFBTSx1Q0FBdUMsRUFDckQsUUFBUSxLQUFLLENBQUMsV0FLTixFQUFVLENBQ2xCLFFBQVEsS0FBSyx1REFBdUQsRUFDcEUsTUFBTSxFQUFRLE1BQU0sRUFDcEIsR0FBVSxFQUFTLEVBQWdCLEVBQWMsRUFBSSxFQUNyRCxXQUtBLEdBQVEsTUFBTSxFQUdoQixNQUFNLEVBQWdCLENBQ3BCLFNBQVUsR0FDVixZQUFhLEdBQUssUUFBUSxHQUFXLENBQVMsRUFDOUMsZ0JBQWlCLElBQ25CLEVBR0EsRUFBVSxNQUFNLEVBQVUsT0FBTyxDQUFhLEVBRTlDLE1BQU0sRUFBUyxNQUFPLEVBQWdCLElBQW1CLENBQ3ZELE1BQU0sRUFBTyxNQUFNLEVBQVEsUUFBUSxFQUluQyxNQUFNLEVBQUssS0FBSyxHQUFHLGFBQW1CLE9BQVksR0FBUSxFQUcxRCxNQUFNLEVBQUssZ0JBQWdCLElBQU0sQ0FDL0IsTUFBTSxFQUFPLFNBQVMsY0FDcEIsb0dBQ0YsRUFFQSxPQURBLEdBQU0sTUFBTSxFQUNMLElBQVMsTUFBUSxJQUFjLE9BQ3ZDLEVBUUQsTUFBTSxFQUFLLFNBQVMsTUFBTyxJQUFtQixDQUM1QyxJQUFJLEVBQU8sU0FBUyxjQUNsQixxQkFDRixFQUNBLEdBQUksRUFBTSxFQUFLLE1BQVEsV0FBVyxJQUlsQyxHQUhBLEVBQU8sU0FBUyxjQUNkLDZCQUNGLEVBQ0ksRUFBTSxFQUFLLE1BQVEsV0FBVyxLQUNqQyxDQUFjLEVBR2pCLE1BQU0sSUFBSSxRQUFRLENBQUMsSUFBTSxDQUN2QixFQUFLLEdBQUcsUUFBUyxJQUFNLENBQ3JCLEVBQU8sTUFBQyxFQUNSLFFBQVEsS0FBSyxvQ0FBb0MsRUFDbEQsRUFDRixHQUlILFFBQVEsS0FBSyxxREFBcUQsRUFDbEUsTUFBTSxRQUFRLElBQUksQ0FDaEIsRUFBTyxVQUFXLEtBQUssRUFDdkIsRUFBTyxVQUFXLENBQVksQ0FDaEMsQ0FBQyxFQUdELEVBQVEsTUFBTSxFQUdoQixlQUFlLEVBQVcsQ0FDeEIsRUFDQSxFQUNBLEVBQ0EsRUFDQSxDQUNBLE1BQU0sRUFBWSxLQUFhLHFCQUd6QixFQUFZLE1BQU0sR0FBb0IsWUFBYSxZQUFZLEVBQ3JFLElBQUksRUFBVSxNQUFNLEVBQVUsT0FBTyxDQUduQyxVQUFXLEVBQ1gsWUFBYSxHQUFLLFFBQVEsR0FBVyxDQUFTLEVBQzlDLGdCQUFpQixJQUNuQixDQUFDLEVBRUQsTUFBTSxFQUFPLE1BQU0sRUFBUSxRQUFRLEVBRW5DLEdBQUksRUFBVyxDQUNiLFFBQVEsS0FBSyx3QkFBd0IsRUFDckMsSUFBSSxFQUFhLEdBRWpCLEVBQVEsR0FBRyxlQUFnQixJQUFNLENBQy9CLElBQUssRUFBWSxPQUNqQixRQUFRLEtBQUssdURBQXVELEVBQ3BFLFFBQVEsS0FBSyxDQUFDLEVBQ2YsRUFFRCxNQUFNLEVBQVcsRUFDakIsUUFBUSxLQUFLLGtDQUFtQyxDQUFRLEVBQ3hELE1BQU0sRUFBSyxLQUFLLENBQVEsRUFDeEIsTUFBTSxFQUFLLGdCQUNULElBQU0sQ0FDSixNQUFNLEVBQU8sT0FBTyxlQUFlLFFBQ25DLE9BQU8sSUFBUyxNQUFRLElBQWMsUUFFeEMsQ0FBRSxRQUFTLENBQUUsQ0FDZixFQUVBLEVBQWEsT0FFYixTQUFRLEtBQUssd0JBQXlCLENBQU8sRUFDN0MsTUFBTSxFQUFLLEtBQUssQ0FBTyxFQUl6QixRQUFRLEtBQUssNkNBQTZDLEVBQzFELE1BQU0sRUFBVyxNQUFNLEVBQUssU0FBUyxJQUFNLENBRXpDLE9BREEsUUFBUSxLQUFLLG1CQUFvQixPQUFPLGVBQWUsT0FBTyxFQUN2RCxPQUFPLGVBQWUsUUFDOUIsRUFNRCxHQUpBLFFBQVEsS0FBSyxtQkFBb0IsQ0FBUSxHQUlwQyxHQUFZLEVBQ2YsTUFBTSxFQUFRLE1BQU0sRUFDcEIsUUFBUSxNQUFNLHNDQUFzQyxFQUNwRCxRQUFRLEtBQUssQ0FBQyxXQUtOLEVBQVUsQ0FDbEIsUUFBUSxLQUFLLDJDQUEyQyxFQUN4RCxNQUFNLEVBQVEsTUFBTSxFQUNwQixHQUFVLEVBQVMsRUFBZ0IsRUFBYyxFQUFJLEVBQ3JELFdBS0EsR0FBUSxNQUFNLEVBSWhCLE1BQU0sRUFBZ0IsQ0FDcEIsU0FBVSxHQUNWLFlBQWEsR0FBSyxRQUFRLEdBQVcsQ0FBUyxFQUM5QyxnQkFBaUIsSUFDbkIsRUFFQSxFQUFVLE1BQU0sRUFBVSxPQUFPLENBQWEsRUFHOUMsTUFBTSxFQUFTLE1BQU8sRUFBZ0IsSUFBbUIsQ0FDdkQsTUFBTSxFQUFPLE1BQU0sRUFBUSxRQUFRLEVBR25DLE1BQU0sRUFBSyxLQUFLLEdBQUcsZUFBcUIsZUFBb0IsR0FBUSxFQUdwRSxNQUFNLEVBQUssZ0JBQWdCLElBQU0sQ0FDL0IsTUFBTSxFQUFPLFNBQVMsY0FBaUMsZ0JBQWdCLEVBQ3ZFLE9BQU8sSUFBUyxNQUFRLElBQWMsT0FDdkMsRUFHRCxNQUFNLEVBQUssU0FBUyxNQUFPLElBQW1CLENBRTVDLElBQUksRUFBTyxTQUFTLGNBQ2xCLDhCQUNGLEVBQ0EsR0FBSSxFQUFNLEVBQUssTUFBUSxXQUFXLElBTWxDLEdBSEEsRUFBTyxTQUFTLGNBQ2QsNEJBQ0YsRUFDSSxFQUFNLEVBQUssTUFBUSxXQUFXLEtBQ2pDLENBQWMsRUFHakIsTUFBTSxJQUFJLFFBQVEsQ0FBQyxJQUFNLENBQ3ZCLEVBQUssR0FBRyxRQUFTLElBQU0sQ0FDckIsRUFBTyxNQUFDLEVBQ1IsUUFBUSxLQUFLLDJDQUEyQyxFQUN6RCxFQUNGLEdBSUgsUUFBUSxLQUFLLHFEQUFxRCxFQUNsRSxNQUFNLFFBQVEsSUFBSSxDQUNoQixFQUFPLFVBQVcsS0FBSyxFQUN2QixFQUFPLFVBQVcsQ0FBWSxDQUNoQyxDQUFDLEVBR0QsRUFBUSxNQUFNLEVBV2hCLGVBQThCLEVBQUcsQ0FDL0IsRUFDQSxFQUNBLEVBQWUsWUFDWixFQUNILENBSUEsS0FGbUIsSUFBSSxJQUFJLENBQUMsU0FBVSxNQUFPLFNBQVUsT0FBTyxDQUFDLEdBRS9DLElBQUksQ0FBUSxFQUMxQixRQUFRLE1BQU0sMEJBQTBCLEdBQVUsRUFDbEQsUUFBUSxLQUFLLENBQUMsRUFLaEIsR0FBSSxNQUFNLEVBQWMsRUFDdEIsUUFBUSxNQUNOLHdJQUNGLEVBQ0EsUUFBUSxLQUFLLENBQUMsRUFXaEIsTUFBTSxFQURjLEdBQUcsYUFBYSxHQUFLLFFBQVEsY0FBYyxDQUFDLEVBQ3BDLFFBRzVCLE9BQVEsT0FDRCxTQUNILE1BQU0sR0FBYSxFQUFTLEVBQVMsQ0FBWSxFQUNqRCxVQUVHLFVBQ0EsU0FDSCxNQUFNLEdBQVUsRUFBUyxFQUFTLENBQVksRUFDOUMsVUFFRyxRQUNILE1BQU0sR0FBWSxFQUFTLEVBQVMsQ0FBWSxFQUNoRCxjQUdBLFFBQVEsS0FBSyw4QkFBOEIsT0F0ZDNDLGlCQUhOLEtBQ0EsS0FFTSxHQUFZLEdBQUksY0FBYyxJQUFJLElBQUksSUFBSyxZQUFZLEdBQUcsQ0FBQyxJQ0FqRSxJQUxBLDZCQUNBLDZDQUNBLHlCQUNBLHFCQUNBLHNCQ0hBLElBQ0EsSUFIQSx5QkFDQSxxQkNDQSxJQUZBLG1CQUNBLHFCQ0tPLFNBQVMsRUFBVSxDQUFDLEVBQStCLENBQ3hELE1BQU0sRUFBUSxFQUFTLE1BQU0sT0FBTyxFQUU5QixFQUFzQixDQUFDLEVBQzdCLElBQUksRUFBZ0MsS0FDaEMsRUFBK0IsS0E4Rm5DLE9BNUZBLEVBQU0sUUFBUSxDQUFDLElBQVMsQ0FJdEIsR0FIQSxFQUFPLEVBQUssS0FBSyxFQUdiLElBQVMsSUFBTSxFQUFLLFdBQVcsR0FBRyxFQUNwQyxPQUlGLEdBQUksRUFBSyxTQUFTLEdBQUcsRUFBRyxDQUV0QixFQURvQixFQUFLLE1BQU0sS0FBSyxFQUFFLEdBRXRDLEVBQU8sR0FBa0IsQ0FBQyxFQUMxQixPQUlGLEdBQUksSUFBUyxJQUFLLENBQ2hCLEVBQWlCLEtBQ2pCLEVBQWdCLEtBQ2hCLE9BSUYsTUFBTSxFQUFRLEVBQUssTUFBTSx1QkFBdUIsRUFDaEQsR0FBSSxFQUFPLENBQ1QsTUFBTSxFQUFNLEVBQU0sR0FDbEIsSUFBSSxFQUFtQyxFQUFNLEdBRzdDLElBQUssTUFBTSxXQUFXLENBQUssQ0FBQyxFQUMxQixFQUFRLFdBQVcsQ0FBSyxVQUNmLElBQVUsT0FDbkIsRUFBUSxXQUNDLElBQVUsUUFDbkIsRUFBUSxHQUlWLEdBQUksRUFDRixBQUNFLEVBQU8sR0FBa0IsUUFJekIsR0FBZSxHQUFPLFVBQ2YsRUFDVCxBQUFDLEVBQU8sR0FBMEMsR0FBTyxNQUV6RCxHQUFPLEdBQU8sRUFHaEIsT0FJRixNQUFNLEVBQWMsRUFBSyxNQUFNLGlDQUFpQyxFQUNoRSxHQUFJLEVBQWEsQ0FDZixNQUFNLEVBQWMsRUFBWSxHQUMxQixFQUFhLEVBQVksR0FDekIsRUFBTSxFQUFZLEdBRXhCLElBQUssRUFBTyxHQUNWLEVBQU8sR0FBZSxDQUFDLEVBR3pCLElBRUksRUFBTyxHQUlQLEdBRUYsQUFDRSxFQUFPLEdBSVAsR0FBYyxDQUFDLEVBR25CLEFBQUUsRUFBTyxHQUFxQixHQUFvQixHQUFPLEtBQ3pELEVBQWlCLEVBQ2pCLEVBQWdCLEVBRWhCLE9BR0YsUUFBUSxNQUFNLHNCQUFzQixHQUFNLEVBQzNDLEVBRU0sRUQzRkYsU0FBUyxFQUFNLENBQUMsRUFBcUIsQ0FDMUMsR0FBSSxDQUNGLElBQUssR0FBRyxXQUFXLEdBQUssUUFBUSxNQUFNLENBQUMsRUFBRyxPQUUxQyxNQUFNLEVBQVcsR0FBRyxhQUNsQixHQUFLLFFBQVEsR0FBYyxNQUFNLEVBQ2pDLE1BQ0YsRUFFTSxFQUFRLEdBQVcsQ0FBUSxFQUdqQyxPQUFPLFFBQVEsQ0FBSyxFQUFFLFFBQVEsRUFBRSxFQUFLLEtBQVcsQ0FDOUMsVUFBVyxJQUFVLFNBQ25CLFFBQVEsSUFBSSxHQUFPLGlCQUNILElBQVUsU0FDMUIsUUFBUSxJQUFJLEdBQU8sRUFBTSxTQUFTLGlCQUNsQixJQUFVLFVBQzFCLFFBQVEsSUFBSSxHQUFPLEVBQU0sU0FBUyxFQUVyQyxRQUNNLEVBQVAsQ0FDQSxHQUFJLGFBQWUsTUFDakIsUUFBUSxNQUNOLEVBQU0sSUFDSiw2QkFDQSxFQUFNLE9BQU8sRUFBSSxPQUFTLEVBQUksT0FBTyxDQUN2QyxDQUNGLEdEcENOLEtHTkEseUJBQ0EseUJBQ0Esc0JBQVMscUJBV1QsZUFBc0IsRUFBa0IsQ0FDdEMsRUFDQSxFQUNBLEVBQ0EsRUFDQSxFQUNBLEVBQ2tCLENBQ2xCLElBQUksRUFBTSxHQUFnQixHQUUxQixHQUFJLEdBQUcsV0FBVyxDQUFRLEVBQUcsQ0FDM0IsTUFBUSxVQUFXLE1BQU0sR0FBUyxPQUUvQixDQUNELENBQ0UsS0FBTSxVQUNOLEtBQU0sU0FDTixRQUFTLEtBQWMsSUFDdkIsUUFBUyxDQUNYLENBQ0YsQ0FBQyxFQUdELEdBQUksRUFDRixFQUFRLENBQVEsRUFDaEIsSUFBYSxDQUFRLEVBR3ZCLEVBQU0sTUFFTixHQUFRLENBQVEsRUFDaEIsSUFBUSxDQUFRLEVBR2xCLE9BQU8sRUgzQlQsZUFBc0IsRUFBWSxFQUFHLENBQ25DLE1BQU0sR0FDSixNQUFhLFVBQUssUUFBUSxlQUFlLElBQ3pDLFFBQ0YsSUFBSyxFQUFXLE1BQU0sSUFBSSxNQUFNLDhCQUE4QixFQUU5RCxJQUFLLE1BQU0sUUFBUSxDQUFTLEVBQzFCLFFBQVEsTUFDTixzRkFDRixFQUdGLE9BQU8sRUFpQlQsZUFBc0IsRUFBUyxDQUFDLEVBQTBCLENBRXhELEdBQU8sRUFJUCxHQUFJLENBQ0YsTUFBTSxFQUErQixNQUFNLEdBQWEsRUFDbEQsRUFBbUIsQ0FBQyxFQUNwQixFQUFxQixDQUFDLEVBcUI1QixHQW5CQSxFQUFVLFFBQVEsQ0FBQyxJQUF5QixDQUUxQyxJQUFLLEVBQUssT0FFVixHQUFJLEVBQUksVUFDTixJQUFLLFFBQVEsSUFBSSxFQUFJLE1BQ25CLEVBQU8sS0FBSztBQUFBLHlCQUNHLEVBQUkscUJBQXFCLEVBQUk7QUFBQSxhQUN6QyxXQUdBLFFBQVEsSUFBSSxFQUFJLE9BQVMsRUFBSSxPQUFTLEdBQ3pDLEVBQVMsS0FBSztBQUFBLHlCQUNDLEVBQUkscUJBQXFCLEVBQUk7QUFBQSxhQUN6QyxFQUdSLEVBRUcsRUFBUyxPQUFTLEVBQ3BCLFFBQVEsS0FDTixFQUFNLGlCQUNKLDBGQUNGLENBQ0YsRUFDQSxRQUFRLEtBQ04sRUFBTSxhQUFhO0FBQUEsWUFDZixFQUFTLEtBQUssSUFBSTtBQUFBLFNBQ3JCLENBQ0gsRUFHRixHQUFJLEVBQU8sT0FBUyxFQUNsQixRQUFRLE1BQ04sRUFBTSxjQUNKLHVGQUNGLENBQ0YsRUFDQSxRQUFRLE1BQ04sRUFBTSxVQUFVO0FBQUEsWUFDWixFQUFPLEtBQUssSUFBSTtBQUFBLFNBQ25CLENBQ0gsRUFJRixHQUFJLEVBQU8sT0FBUyxFQUFHLENBQ3JCLEdBQUksR0FPRixHQU5lLE1BQU0sRUFBYztBQUFBO0FBQUE7QUFBQTtBQUFBLFNBSWxDLEVBRVcsQ0FDVixNQUFNLEVBQTJDLENBQUMsRUFFbEQsUUFBVyxLQUFPLEVBQ2hCLEVBQVMsS0FBSyxDQUNaLEVBQUksS0FDSixHQUFTLEVBQUksT0FBTyxFQUNoQixFQUFJLFFBQ0osRUFBVSxFQUFJLE9BQU8sRUFDckIsTUFBTSxFQUFJLFFBQVEsRUFDYixNQUNYLENBQUMsRUFHSCxNQUFNLEVBQWEsRUFDaEIsT0FBTyxDQUFDLElBQU0sRUFBRSxFQUFFLEVBQ2xCLElBQUksQ0FBQyxJQUFNLEdBQUcsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUM1QixLQUFLLElBQUksRUFFWixJQUFLLEVBQ0gsUUFBUSxLQUFLO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxhQUtaLEVBR0gsTUFBTSxFQUFjLEdBQUssUUFBUSxNQUFNLEVBb0J2QyxJQWxCaUIsTUFBTSxHQUNyQixFQUNBO0FBQUE7QUFBQTtBQUFBLGNBSUEsSUFBTSxHQUVOLElBQU0sR0FBRyxVQUFVLEVBQWEsQ0FBVSxFQUkxQyxJQUFNLENBQ0osR0FBRyxlQUFlLEVBQWEsS0FBSyxHQUFZLEdBRWxELEVBQ0YsRUFHRSxRQUFRLE1BQ04sb0VBQ0YsRUFDQSxRQUFRLEtBQUssQ0FBQyxFQVNoQixPQUpBLFFBQVEsS0FDTixvRUFDRixFQUVPLEdBQVUsRUFBSyxHQUkxQixRQUFRLEtBQUssQ0FBQyxTQUVULEVBQVAsQ0FDQSxRQUFRLEtBQUs7QUFBQSxXQUNOLEVBQU0sZUFDVCxlQUNGO0FBQUEsS0FDRCxHRGxMTCxJS1JBLHlCQUNBLHlCQUNBLHFCQ0ZBLElBQ0EsSUFRQSxlQUFzQixDQUFXLENBQy9CLEVBQ0EsRUFDQSxFQUNBLENBQ0EsTUFBTSxFQUFVLE1BQU0sRUFBa0IsRUFDbEMsRUFBWSxFQUFTLE9BQU8sQ0FBUyxFQUUzQyxPQUFPLE1BQU0sRUFBUyxFQUFRLEdBQUksQ0FDaEMsSUFDQSxFQUFTLFlBQWMsS0FDdkIsRUFBTyxJQUFJLElBQVMsS0FDcEIsR0FBRyxDQUNMLENBQUMsRURsQkgsSUVKQSxzQkFFTyxJQUFNLEdBQ1gsQ0FBQyxJQUFvQyxNQUFPLEVBQVksSUFBa0IsQ0FDeEUsSUFBSSxFQUFpQixDQUFDLEVBRXRCLEdBQUksYUFBbUIsSUFDckIsRUFBTyxNQUFNLEtBQUssQ0FBTyxNQUV6QixHQUFPLEVBR1QsT0FBTyxHQUFNLE9BQU8sR0FBUyxHQUFJLENBQUksRUFBRSxJQUFJLENBQUMsSUFBTSxFQUFFLE1BQU0sR0ZOOUQsSUdIQSxlQUFzQixFQUFrQixDQUFDLEVBQXFCLENBQzVELEdBQUksQ0FFRixPQURBLE1BQWEsVUFDTixTQUNBLEVBQVAsQ0FLQSxPQUpBLFFBQVEsTUFDTiw4REFDQSxDQUNGLEVBQ08sSUhpQlgsZUFBc0IsRUFBa0IsQ0FDdEMsRUFDQSxFQUNBLENBQ0EsTUFBTSxFQUF1QixHQUFnQixDQUFDLFdBQVcsRUFFekQsUUFBVyxLQUFjLEVBSXZCLEdBSEEsUUFBUSxLQUFLLHVDQUF3QyxDQUFVLEdBQzNDLE1BQU0sR0FBbUIsQ0FBVSxFQUVyQyxDQUNoQixJQUFJLEVBQWEsRUFFakIsSUFBSyxFQWdCSCxHQWZlLE1BQU0sR0FBUyxPQUUzQixDQUNELENBQ0UsS0FBTSxlQUNOLEtBQU0sYUFDTixRQUFTLG1EQUFtRCxNQUM1RCxPQUFRLEdBQVksQ0FDbEIsa0NBQ0EsNkVBQ0EsNEVBQ0YsQ0FBQyxDQUNILENBQ0YsQ0FBQyxHQUVtQixXQUd0QixPQUFRLE9BQ0QsNkJBQ0gsTUFBTSxFQUFZLENBQUMsQ0FBVSxFQUFHLEdBQUcsRUFDbkMsVUFFRyxrQ0FDSCxFQUFZLENBQUMsQ0FBVSxFQUFHLElBQUssRUFBSSxFQUNuQyxVQUVHLDZFQUFtQyxDQUV0QyxNQUFNLEVBQU0sUUFBUSxJQUFJLEVBRXhCLFFBQVEsTUFBTSxJQUFJLEVBQ2xCLE1BQU0sRUFBaUIsTUFBTSxFQUFrQixFQUcvQyxJQUFLLEdBQUcsV0FBVyxHQUFLLFFBQVEsY0FBYyxDQUFDLEVBRTdDLEVBQVMsRUFBZSxHQUFJLENBQUMsT0FBUSxJQUFJLENBQUMsRUFJNUMsTUFBTSxFQUFZLENBQUMsQ0FBVSxFQUFHLEdBQUcsRUFFbkMsUUFBUSxNQUFNLENBQUcsRUFFakIsTUFBTSxFQUFLLEdBQUcsRUFDZCxLQUNGLFNBR0UsUUFBUSxLQUFLLENBQUMsSUwzRXhCLFNBQVMsRUFBVSxFQUFHLENBS3BCLE9BSkEsR0FBUSxNQUFRLEVBQVEsTUFDeEIsR0FBUSxRQUFVLEVBQVEsUUFDMUIsR0FBUSxRQUFVLEVBQVEsUUFFbkIsR0FnYlQsZUFBZSxFQUFHLEVBQUcsQ0FHbkIsTUFBTSxHQUFVLEVBQXFDLEVBQ3JELEVBQVEsTUFBTSxRQUFRLElBQUksRUEvYjVCLEdBQVMsZUFBZSxlQUFnQixFQUFrQixFQUUxRCxJQUFRLFlBQVksR0FDZCxFQUFlLElBQUksR0FDbkIsR0FBK0IsQ0FBQyxFQVV0QyxFQUFRLFFBQVEsT0FBTyxFQUN2QixFQUFRLE9BQ04sZ0JBQ0EsbURBQ0YsRUFDQSxFQUFRLE9BQ04sa0JBQ0E7QUFBQTtBQUFBO0FBQUEsR0FJRixFQUVBLEVBQVEsT0FDTix3QkFDQTtBQUFBO0FBQUE7QUFBQSxHQUlGLEVBRUEsSUFBTSxHQUFNLEVBQVEsUUFBUSxLQUFLLEVBQUUsWUFDakM7QUFBQTtBQUFBO0FBQUEsR0FJRixFQUVBLEdBQ0csUUFBUSxNQUFNLEVBQ2QsWUFDQztBQUFBO0FBQUE7QUFBQTtBQUFBLEtBS0YsRUFDQyxPQUFPLFNBQVksQ0FDbEIsQ0FBQywrQ0FDRSxRQUFRLEVBQ1IsTUFBTSxDQUFDLElBQWUsQ0FDckIsUUFBUSxLQUFLLHNDQUFzQyxFQUNuRCxRQUFRLEtBQUssRUFBSSxPQUFTLEVBQUksT0FBTyxFQUNyQyxRQUFRLEtBQUssQ0FBQyxFQUNmLEVBQ0osRUFFSCxHQUNHLFFBQVEsV0FBVyxFQUNuQixPQUNDLDZCQUNBLDBJQUNGLEVBQ0MsWUFDQztBQUFBO0FBQUE7QUFBQTtBQUFBLEtBS0YsRUFDQyxPQUFPLE9BQVMsYUFBcUMsQ0FDcEQsQ0FBQywrQ0FDRSxRQUFRLEdBQUksRUFBUyxHQUFLLFFBQVEsUUFBUSxJQUFJLENBQUMsRUFBRyxHQUFXLENBQUMsRUFDOUQsTUFBTSxDQUFDLElBQWUsQ0FDckIsUUFBUSxLQUFLLHVDQUF1QyxFQUNwRCxRQUFRLEtBQUssRUFBSSxPQUFTLEVBQUksT0FBTyxFQUNyQyxRQUFRLEtBQUssQ0FBQyxFQUNmLEVBQ0osRUFFSCxJQUFNLEdBQVksRUFBUSxRQUFRLFdBQVcsRUFFN0MsR0FDRyxRQUFRLEtBQUssRUFDYixPQUNDLDZCQUNBLDBJQUNGLEVBQ0MsWUFDQztBQUFBO0FBQUE7QUFBQTtBQUFBLEtBS0YsRUFDQyxPQUFPLE9BQVMsYUFBcUMsQ0FDcEQsQ0FBQywrQ0FDRSxRQUFRLEdBQUksRUFBUyxHQUFLLFFBQVEsUUFBUSxJQUFJLENBQUMsRUFBRyxHQUFXLENBQUMsRUFDOUQsTUFBTSxDQUFDLElBQWUsQ0FDckIsUUFBUSxLQUFLLHVDQUF1QyxFQUNwRCxRQUFRLEtBQUssRUFBSSxPQUFTLEVBQUksT0FBTyxFQUNyQyxRQUFRLEtBQUssQ0FBQyxFQUNmLEVBQ0osRUFFSCxFQUNHLFFBQVEsY0FBYyxFQUN0QixZQUNDO0FBQUE7QUFBQSxLQUdGLEVBQ0MsT0FBTyxNQUFPLElBQWdCLENBQzdCLENBQUMsK0NBQW1DLFFBQVEsQ0FBRyxFQUFFLE1BQU0sQ0FBQyxJQUFlLENBQ3JFLFFBQVEsS0FBSyxpQ0FBaUMsRUFDOUMsUUFBUSxLQUFLLEVBQUksT0FBUyxFQUFJLE9BQU8sRUFDckMsUUFBUSxLQUFLLENBQUMsRUFDZixFQUNGLEVBRUgsSUFBTSxHQUFVLEVBQVEsUUFBUSxTQUFTLEVBQUUsWUFDekM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEdBTUYsRUFFQSxHQUNHLFFBQVEsd0JBQXdCLEVBQ2hDLFlBQ0M7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEtBZUYsRUFDQyxPQUFPLE1BQU8sSUFBc0IsQ0FFbkMsRUFBWSxDQUFDLENBQUMsR0FDYiwrQ0FDRSxRQUFRLENBQU8sRUFDZixNQUFNLENBQUMsSUFBZSxDQUNyQixRQUFRLEtBQ04sK0NBQ0EsRUFBSSxPQUFTLEVBQUksT0FDbkIsRUFDQSxRQUFRLEtBQUssQ0FBQyxFQUNmLEVBQ0osRUFFSCxHQUNHLFFBQVEsT0FBTyxFQUNmLFlBQ0M7QUFBQTtBQUFBO0FBQUEsS0FJRixFQUNDLE9BQU8sU0FBWSxDQUVsQixDQUFDLCtDQUNFLFFBQVEsRUFDUixNQUFNLENBQUMsSUFBZSxDQUNyQixRQUFRLEtBQ04sOENBQ0EsRUFBSSxPQUFTLEVBQUksT0FDbkIsRUFDQSxRQUFRLEtBQUssQ0FBQyxFQUNmLEVBQ0osRUFFSCxHQUNHLFFBQVEsTUFBTSxFQUNkLFlBQ0M7QUFBQTtBQUFBO0FBQUE7QUFBQSxLQUtGLEVBQ0MsT0FBTyxTQUFZLENBQ2xCLENBQUMsK0NBQ0UsUUFBUSxFQUFFLEVBQ1YsS0FBSyxTQUFZLENBQ2hCLFFBQVEsS0FDTixFQUFNLGVBQWUsc0NBQXNDLENBQzdELEdBRUMsK0NBQ0UsUUFBUSxFQUNSLE1BQU0sQ0FBQyxJQUFlLENBQ3JCLFFBQVEsS0FDTiw0Q0FDQSxFQUFJLE9BQVMsRUFBSSxPQUNuQixFQUNBLFFBQVEsS0FBSyxDQUFDLEVBQ2YsRUFDSixFQUNBLE1BQU0sQ0FBQyxJQUFlLENBQ3JCLFFBQVEsS0FDTixFQUFNLGNBQ0o7QUFBQTtBQUFBO0FBQUEsYUFJRixDQUNGLEVBQ0EsUUFBUSxLQUFLLEVBQUksT0FBUyxFQUFJLE9BQU8sRUFDckMsUUFBUSxLQUFLLENBQUMsRUFDZixFQUNKLEVBRUgsR0FDRyxRQUFRLE9BQU8sRUFDZixZQUNDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxLQU1GLEVBQ0MsT0FBTyxTQUFZLENBQ2xCLENBQUMsK0NBQ0UsUUFBUSxFQUNSLE1BQU0sQ0FBQyxJQUFlLENBQ3JCLFFBQVEsS0FDTiwrQ0FDQSxFQUFJLE9BQVMsRUFBSSxPQUNuQixFQUNBLFFBQVEsS0FBSyxDQUFDLEVBQ2YsRUFDSixFQUVILElBQU0sR0FBZSxHQUFRLFFBQVEsT0FBTyxFQUFFLFlBQzVDO0FBQUE7QUFBQTtBQUFBO0FBQUEsS0FLRixFQUVBLEdBQ0csUUFBUSxRQUFRLEVBQ2hCLFlBQ0M7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsS0FPRixFQUNDLE9BQU8sU0FBWSxDQUNsQixDQUFDLCtDQUNFLFFBQVEsRUFDUixNQUFNLENBQUMsSUFBZSxDQUNyQixRQUFRLEtBQ04scURBQ0EsRUFBSSxPQUFTLEVBQUksT0FDbkIsRUFDQSxRQUFRLEtBQUssQ0FBQyxFQUNmLEVBQ0osRUFFSCxFQUNHLFFBQVEsZ0JBQWdCLEVBQ3hCLFlBQ0M7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEtBZUYsRUFDQyxPQUFPLE1BQU8sSUFBbUIsQ0FDaEMsQ0FBQywrQ0FDRSxRQUFRLEVBQVEsR0FBVyxDQUFDLEVBQzVCLE1BQU0sQ0FBQyxJQUFlLENBQ3JCLFFBQVEsS0FBSyxtQ0FBbUMsRUFDaEQsUUFBUSxLQUFLLEVBQUksT0FBUyxFQUFJLE9BQU8sRUFDckMsUUFBUSxLQUFLLENBQUMsRUFDZixFQUNKLEVBRUgsSUFBTSxHQUFPLEVBQVEsUUFBUSxNQUFNLEVBQUUsWUFDbkM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsTUFNSSxFQUFNLGlCQUFpQixTQUFTO0FBQUE7QUFBQTtBQUFBLE1BR2hDLEVBQU0saUJBQWlCLE1BQU07QUFBQTtBQUFBLEdBR25DLEVBRUEsR0FDRyxRQUFRLEtBQUssRUFDYixZQUNDO0FBQUE7QUFBQSxLQUdGLEVBQ0MsT0FBTyxTQUFZLENBQ2xCLENBQUMsK0NBQ0UsUUFBUSxFQUNSLE1BQU0sQ0FBQyxJQUFlLENBQ3JCLFFBQVEsS0FBSyxzQ0FBc0MsRUFDbkQsUUFBUSxLQUFLLEVBQUksT0FBUyxFQUFJLE9BQU8sRUFDckMsUUFBUSxLQUFLLENBQUMsRUFDZixFQUNKLEVBRUgsSUFBTSxHQUFRLEVBQVEsUUFBUSxPQUFPLEVBQUUsWUFDckM7QUFBQTtBQUFBLEdBR0YsRUFFQSxHQUNHLFFBQVEsT0FBTyxFQUNmLFlBQ0M7QUFBQTtBQUFBO0FBQUEsS0FJRixFQUNDLE9BQU8sU0FBWSxDQUNsQixDQUFDLCtDQUNFLFFBQVEsRUFDUixNQUFNLENBQUMsSUFBZSxDQUNyQixRQUFRLEtBQUsseUNBQXlDLEVBQ3RELFFBQVEsS0FBSyxFQUFJLE9BQVMsRUFBSSxPQUFPLEVBQ3JDLFFBQVEsS0FBSyxDQUFDLEVBQ2YsRUFDSixFQUVILElBQU0sR0FBSyxFQUFRLFFBQVEsSUFBSSxFQUFFLFlBQy9CO0FBQUE7QUFBQTtBQUFBLEdBSUYsRUFFQSxHQUFHLFFBQVEsS0FBSyxFQUNiLFlBQ0M7QUFBQTtBQUFBO0FBQUEsS0FJRixFQUNDLE9BQU8sU0FBWSxDQUNsQixDQUFDLCtDQUFrQyxRQUFRLEVBQUUsRUFBRSxNQUFNLENBQUMsSUFBZSxDQUNuRSxRQUFRLEtBQUssZ0NBQWdDLEVBQzdDLFFBQVEsS0FBSyxFQUFJLE9BQVMsRUFBSSxPQUFPLEVBQ3JDLFFBQVEsS0FBSyxDQUFDLEVBQ2YsRUFDRixFQUVILElBQU0sR0FBSyxFQUNSLFFBQVEsSUFBSSxFQUNaLE9BQ0Msb0JBQ0E7QUFBQTtBQUFBLEtBR0YsRUFDQyxPQUNDLHFCQUNBO0FBQUE7QUFBQSxHQUdGLEVBQ0MsT0FDQyx5QkFDQTtBQUFBO0FBQUEsR0FHRixFQUVGLEdBQUcsUUFBUSxTQUFTLEVBQ2pCLFlBQ0M7QUFBQTtBQUFBO0FBQUEsS0FJRixFQUNDLE9BQU8sU0FBWSxDQUNsQixNQUFRLFVBQVMsV0FBVSxnQkFBaUIsR0FBTSxRQUFRLElBQUksRUFBRSxLQU1oRSxJQUFLLElBQVksSUFBYSxFQUM1QixRQUFRLEtBQ04sb0VBQ0YsRUFDQSxRQUFRLEtBQUssQ0FBQyxFQUloQixNQUFNLEdBQW1CLEVBQUUsTUFBTSxJQUFNLFFBQVEsS0FBSyxDQUFDLENBQUMsRUFDdEQsUUFBUSxLQUFLLHlDQUF5QyxHQUVyRCwrQ0FDRSxRQUFRLEVBQVMsRUFBVSxDQUFZLEVBQ3ZDLE1BQU0sQ0FBQyxJQUFlLENBQ3JCLFFBQVEsS0FBSyx3Q0FBd0MsRUFDckQsUUFBUSxLQUFLLEVBQUksT0FBUyxFQUFJLE9BQU8sRUFDckMsUUFBUSxLQUFLLENBQUMsRUFDZixFQUNKLEVBU0gsR0FBSSIsCiAgImRlYnVnSWQiOiAiQzA0NkQyRjRBQTI5NDQwNTY0NzU2RTIxNjQ3NTZFMjEiLAogICJuYW1lcyI6IFtdCn0=
