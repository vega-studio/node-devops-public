#!/usr/bin/env bun
// @bun
import{createRequire as f9} from"node:module";var k9=Object.create;var{defineProperty:u1,getPrototypeOf:P9,getOwnPropertyNames:y9}=Object;var v9=Object.prototype.hasOwnProperty;var m9=($,Y,K)=>{K=$!=null?k9(P9($)):{};const Z=Y||!$||!$.__esModule?u1(K,"default",{value:$,enumerable:!0}):K;for(let G of y9($))if(!v9.call(Z,G))u1(Z,G,{get:()=>$[G],enumerable:!0});return Z};var F1=($,Y)=>()=>(Y||$((Y={exports:{}}).exports,Y),Y.exports);var C=($,Y)=>{for(var K in Y)u1($,K,{get:Y[K],enumerable:!0,configurable:!0,set:(Z)=>Y[K]=()=>Z})};var L=($,Y)=>()=>($&&(Y=$($=0)),Y);var P=f9(import.meta.url);var z;var O=L(()=>{z={cyan:(...$)=>`\x1B[36m${$.join(" ")}\x1B[0m`,red:(...$)=>`\x1B[31m${$.join(" ")}\x1B[0m`,yellow:(...$)=>`\x1B[33m${$.join(" ")}\x1B[0m`,green:(...$)=>`\x1B[32m${$.join(" ")}\x1B[0m`,blue:(...$)=>`\x1B[34m${$.join(" ")}\x1B[0m`,magenta:(...$)=>`\x1B[35m${$.join(" ")}\x1B[0m`,cyanBright:(...$)=>`\x1B[96m${$.join(" ")}\x1B[0m`,redBright:(...$)=>`\x1B[91m${$.join(" ")}\x1B[0m`,yellowBright:(...$)=>`\x1B[93m${$.join(" ")}\x1B[0m`,greenBright:(...$)=>`\x1B[92m${$.join(" ")}\x1B[0m`,blueBright:(...$)=>`\x1B[94m${$.join(" ")}\x1B[0m`,magentaBright:(...$)=>`\x1B[95m${$.join(" ")}\x1B[0m`,whiteBright:(...$)=>`\x1B[97m${$.join(" ")}\x1B[0m`,gray:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,grey:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,white:(...$)=>`\x1B[37m${$.join(" ")}\x1B[0m`,black:(...$)=>`\x1B[30m${$.join(" ")}\x1B[0m`,blackBright:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,bgCyan:(...$)=>`\x1B[46m${$.join(" ")}\x1B[0m`,bgRed:(...$)=>`\x1B[41m${$.join(" ")}\x1B[0m`,bgYellow:(...$)=>`\x1B[43m${$.join(" ")}\x1B[0m`,bgGreen:(...$)=>`\x1B[42m${$.join(" ")}\x1B[0m`,bgBlue:(...$)=>`\x1B[44m${$.join(" ")}\x1B[0m`,bgMagenta:(...$)=>`\x1B[45m${$.join(" ")}\x1B[0m`,bgCyanBright:(...$)=>`\x1B[106m${$.join(" ")}\x1B[0m`,bgRedBright:(...$)=>`\x1B[101m${$.join(" ")}\x1B[0m`,bgYellowBright:(...$)=>`\x1B[103m${$.join(" ")}\x1B[0m`,bgGreenBright:(...$)=>`\x1B[102m${$.join(" ")}\x1B[0m`,bgBlueBright:(...$)=>`\x1B[104m${$.join(" ")}\x1B[0m`,bgMagentaBright:(...$)=>`\x1B[105m${$.join(" ")}\x1B[0m`,cyanBrightBold:(...$)=>`\x1B[96m\x1B[1m${$.join(" ")}\x1B[0m`,redBrightBold:(...$)=>`\x1B[91m\x1B[1m${$.join(" ")}\x1B[0m`,yellowBrightBold:(...$)=>`\x1B[93m\x1B[1m${$.join(" ")}\x1B[0m`,greenBrightBold:(...$)=>`\x1B[92m\x1B[1m${$.join(" ")}\x1B[0m`,blueBrightBold:(...$)=>`\x1B[94m\x1B[1m${$.join(" ")}\x1B[0m`,magentaBrightBold:(...$)=>`\x1B[95m\x1B[1m${$.join(" ")}\x1B[0m`,whiteBrightBold:(...$)=>`\x1B[97m\x1B[1m${$.join(" ")}\x1B[0m`,grayBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`,greyBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`,whiteBold:(...$)=>`\x1B[37m\x1B[1m${$.join(" ")}\x1B[0m`,blackBold:(...$)=>`\x1B[30m\x1B[1m${$.join(" ")}\x1B[0m`,blackBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`}});import{stripIndent as g9} from"common-tags";function b($,...Y){return`${g9($,...Y)}\n\n`}var n=L(()=>{});function T0($){return $&&$.charCodeAt!==void 0}function R($){return $!==void 0&&$!==null}var s=L(()=>{});import u9 from"inquirer";import{stripIndent as d9} from"common-tags";async function y($,Y,K){const{result:Z}=await u9.prompt([{type:"confirm",name:"result",message:d9`${$}`,default:Y}]);if(Z)K?.();return Z}var J1=L(()=>{});function L1($){return h1($)&&h1($.status)&&h1($.stderr)}var h1;var l1=L(()=>{h1=function($){return $!==void 0&&$!==null}});async function M1($,Y=[]){try{const K=Bun.spawnSync([$,...Y.filter(R)],{stdio:["inherit","inherit","inherit"],env:process.env});if(K.exitCode!==0){if(!M1.silent)console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.exitCode}`),console.error(new Error().stack);return!1}}catch(K){if(!M1.silent){if(L1(K))console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.status}`);else if(K instanceof Error)console.error(K.message);console.error(new Error().stack)}return!1}return!0}var M;var w=L(()=>{l1();s();M1.silent=!1;M=M1});async function k(){if(Q1)return Q1;if(await M("bun",["--version"]))Q1=["bun","bunx"];else Q1=["npm","npx"];return Q1}var Q1;var o=L(()=>{w();Q1=null});async function E($){await new Promise((Y)=>setTimeout(Y,$))}var t=L(()=>{});import a9 from"fs-extra";import h from"path";async function r(){console.warn("Building Vite config using base:",z.yellowBrightBold(h.resolve("vite.config.ts")));let $=await(await import(h.resolve("vite.config.ts"))).default();const Y=await a9.readJSONSync(h.resolve("tsconfig.json"));return $={...$,logLevel:"info",mode:"development",root:h.resolve("app/client"),clearScreen:!0,build:{...$.build,cssCodeSplit:!0,outDir:h.resolve("build/client"),sourcemap:!0,rollupOptions:{output:{manualChunks:void 0}},watch:{...$.build?.watch,include:[...(Array.isArray($.build?.watch?.include)?$.build?.watch?.include:[$.build?.watch?.include])||[],...Y?.include?.map((K)=>h.resolve(K))||[],"tsconfig.json"].filter(Boolean)},emptyOutDir:!0},resolve:{alias:{config:h.resolve("app/config")}}},$}var b1=L(()=>{O()});import t9 from"deepmerge";import r9 from"fs-extra";import e9 from"path";async function u(){const $=r9.readJSONSync(e9.resolve("package.json"));return t9($.dependencies||{},$.peerDependencies||{})}var _1=L(()=>{});import $3 from"fs-extra";import Y3 from"path";async function U(){return $3.readJSONSync(Y3.resolve("package.json")).version||""}var v=L(()=>{});import*as P0 from"vite";import K3 from"fs-extra";import c1 from"path";async function z1(){if(process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await U(),console.warn(z.yellowBrightBold("Starting Vite client build...")),!K3.existsSync(c1.resolve("app/client/index.ts"))){console.warn("Tried to start development process for the app client, but no entry file was found.");return}const $=await r();$.root=c1.resolve("app/client"),$.build.outDir=c1.resolve("build/client"),$.build.rollupOptions.external=Object.keys(await u()),await P0.build($),console.warn(z.yellowBrightBold("Vite client build process started..."))}var p1=L(()=>{b1();O();_1();v()});function y0($){const Y=(K)=>(Z)=>{if($(K,Z),Z)process.exit(1);else process.exit(0)};process.on("exit",Y("exit")),process.on("SIGINT",Y("SIGINT")),process.on("SIGUSR1",Y("SIGUSR1")),process.on("SIGUSR2",Y("SIGUSR2")),process.on("SIGTERM",Y("SIGTERM")),process.on("uncaughtException",Y("uncaughtException"))}var v0=L(()=>{});function n1(...$){i1.push($),Z3()}var Z3,i1,m0;var f0=L(()=>{Z3=function(){if(m0!==null)return;m0=setInterval(()=>{while(i1.length>0){const $=i1.shift();if($)console.log(...$)}},400)};i1=[],m0=null});import G3 from"child_process";import s1 from"path";import J3 from"readline";async function X1($){console.warn("\nRunning the App server at: ",z.yellowBrightBold(s1.resolve("app/server")),"\n"),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await U(),process.env.RESOURCE_PATH=process.env.RESOURCE_PATH||s1.resolve("build/client");const Y=await k();if(Y[0]!=="bun")console.error("Currently only an environment with bun installed is supported for this command.");const K=G3.spawn(Y[0],["--watch",s1.resolve("app/server/index.ts")]);process.stdin.setRawMode?.(!0),process.stdin.resume(),process.stdin.setEncoding("utf8"),J3.emitKeypressEvents(process.stdin);let Z=!1;if(process.stdin.on("keypress",async(G,J)=>{if(J&&J.ctrl&&J.name==="c")K.kill(),process.exit(0);else if(J&&J.ctrl&&J.name==="d")K.kill(),process.exit(0);else if(G.toString()==="b"||G.toString()==="B"){if(Z)return;Z=!0,await z1(),Z=!1}else if(G.toString()==="q"||G.toString()==="Q")if(K.kill(),J.shift)process.exit(123);else process.exit(0)}),process.stdin.pipe(K.stdin),$)$(K);else K.stdout.on("data",function(G){n1(`${G.toString().slice(0,-1)}`)}),K.stderr.on("data",function(G){n1(`${G.toString().slice(0,-1)}`)});y0(async(G,J)=>{if(K.kill(),console.warn("EXIT BUILD SERVER"),console.warn(z.redBrightBold(G)),J&&J instanceof Error)console.warn(z.redBrightBold(J.stack||J.message));process.exit(0)})}var o1=L(()=>{p1();O();o();v0();f0();v()});var u0={};C(u0,{default:()=>{{return g0}}});async function g0(){process.env.NODE_ENV="development",z1(),console.warn(z.yellowBrightBold("Starting dev server...")),process.env.VITE_RELEASE_VERSION=await U(),await X1()}var d0=L(()=>{p1();o1();O();v()});import q1 from"path";import Q3 from"url";async function h0(){if(q1.basename(q1.resolve(a1,".."))==="dist")return q1.resolve(a1,"../../");return q1.resolve(a1,"../../../")}var a1;var l0=L(()=>{a1=Q3.fileURLToPath(new URL(".",import.meta.url))});async function l($,Y=[]){const K=await k();return M(K[0],["run",$,Y.length>0&&Y[0]!=="--"?"--":void 0,...Y])}var N1=L(()=>{w();o()});var r1={};C(r1,{default:()=>{{return c0}}});import t1 from"path";async function c0($,Y,...K){const Z=t1.resolve(".");process.env.PROJECT_ROOT=Z,process.env.VITE_RELEASE_VERSION=await U();const G=t1.resolve(".storybook"),J=await h0();if(process.chdir(J),Y&&Y.length>0)process.env.NODE_MODULES_STORIES=Y.join(",");if($==="build"){if(!l("storybook",["build","-c",G,"-o",`"${t1.resolve(Z,"storybook-static")}"`]))console.error(z.redBrightBold("Failed to build storybook"))}else if(!l("storybook",["dev","--no-version-updates","-p",process.env.PORT||"6006","-c",`"${G}"`]))console.error(z.redBrightBold("Failed to run storybook"))}var e1=L(()=>{O();l0();N1();v()});var Y0=F1((W5,i0)=>{var z3=function(){try{return p0.statSync("/.dockerenv"),!0}catch($){return!1}},X3=function(){try{return p0.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch($){return!1}},p0=import.meta.require("fs"),$0;i0.exports=()=>{if($0===void 0)$0=z3()||X3();return $0}});var o0=F1((B5,K0)=>{var W3=import.meta.require("os"),B3=import.meta.require("fs"),n0=Y0(),s0=()=>{if(process.platform!=="linux")return!1;if(W3.release().toLowerCase().includes("microsoft")){if(n0())return!1;return!0}try{return B3.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!n0():!1}catch($){return!1}};if(process.env.__IS_WSL_TEST__)K0.exports=s0;else K0.exports=s0()});var t0=F1((H5,a0)=>{a0.exports=($,Y,K)=>{const Z=(G)=>Object.defineProperty($,Y,{value:G,enumerable:!0,writable:!0});return Object.defineProperty($,Y,{configurable:!0,enumerable:!0,get(){const G=K();return Z(G),G},set(G){Z(G)}}),$}});var G$=F1((F5,Z$)=>{var b3=function(){if(Z0===void 0)Z0=M3()||L3();return Z0},Y$=function($){if(typeof $==="string"||Array.isArray($))return $;const{[e0]:Y}=$;if(!Y)throw new Error(`${e0} is not supported`);return Y},Q0=function({[e]:$},{wsl:Y}){if(Y&&D1)return Y$(Y);if(!$)throw new Error(`${e} is not supported`);return Y$($)},__dirname="/Users/diniden/Desktop/VoidRay/dev-ops/node-devops/node_modules/open",H3=import.meta.require("path"),F3=import.meta.require("child_process"),{promises:A1,constants:K$}=import.meta.require("fs"),D1=o0(),L3=Y0(),G0=t0(),r0=H3.join(__dirname,"xdg-open"),{platform:e,arch:e0}=process,M3=()=>{try{return A1.statSync("/run/.containerenv"),!0}catch{return!1}},Z0,_3=(()=>{let Y;return async function(){if(Y)return Y;const K="/etc/wsl.conf";let Z=!1;try{await A1.access(K,K$.F_OK),Z=!0}catch{}if(!Z)return"/mnt/";const G=await A1.readFile(K,{encoding:"utf8"}),J=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(G);if(!J)return"/mnt/";return Y=J.groups.mountPoint.trim(),Y=Y.endsWith("/")?Y:`${Y}/`,Y}})(),$$=async($,Y)=>{let K;for(let Z of $)try{return await Y(Z)}catch(G){K=G}throw K},O1=async($)=>{if($={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...$},Array.isArray($.app))return $$($.app,(X)=>O1({...$,app:X}));let{name:Y,arguments:K=[]}=$.app||{};if(K=[...K],Array.isArray(Y))return $$(Y,(X)=>O1({...$,app:{name:X,arguments:K}}));let Z;const G=[],J={};if(e==="darwin"){if(Z="open",$.wait)G.push("--wait-apps");if($.background)G.push("--background");if($.newInstance)G.push("--new");if(Y)G.push("-a",Y)}else if(e==="win32"||D1&&!b3()&&!Y){const X=await _3();if(Z=D1?`${X}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,G.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),!D1)J.windowsVerbatimArguments=!0;const W=["Start"];if($.wait)W.push("-Wait");if(Y){if(W.push(`"\`"${Y}\`""`,"-ArgumentList"),$.target)K.unshift($.target)}else if($.target)W.push(`"${$.target}"`);if(K.length>0)K=K.map((F)=>`"\`"${F}\`""`),W.push(K.join(","));$.target=Buffer.from(W.join(" "),"utf16le").toString("base64")}else{if(Y)Z=Y;else{const X=!__dirname||__dirname==="/";let W=!1;try{await A1.access(r0,K$.X_OK),W=!0}catch{}Z=process.versions.electron||e==="android"||X||!W?"xdg-open":r0}if(K.length>0)G.push(...K);if(!$.wait)J.stdio="ignore",J.detached=!0}if($.target)G.push($.target);if(e==="darwin"&&K.length>0)G.push("--args",...K);const Q=F3.spawn(Z,G,J);if($.wait)return new Promise((X,W)=>{Q.once("error",W),Q.once("close",(F)=>{if(!$.allowNonzeroExitCode&&F>0){W(new Error(`Exited with code ${F}`));return}X(Q)})});return Q.unref(),Q},J0=($,Y)=>{if(typeof $!=="string")throw new TypeError("Expected a `target`");return O1({...Y,target:$})},q3=($,Y)=>{if(typeof $!=="string")throw new TypeError("Expected a `name`");const{arguments:K=[]}=Y||{};if(K!==void 0&&K!==null&&!Array.isArray(K))throw new TypeError("Expected `appArguments` as Array type");return O1({...Y,app:{name:$,arguments:K}})},x1={};G0(x1,"chrome",()=>Q0({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));G0(x1,"firefox",()=>Q0({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));G0(x1,"edge",()=>Q0({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));J0.apps=x1;J0.openApp=q3;Z$.exports=J0});async function A($,Y=[]){try{const K=Bun.spawnSync([$,...Y.filter(R)],{stdio:["inherit","pipe","pipe"],env:process.env});if(K.exitCode!==0)return console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.exitCode}`),console.error(new Error().stack),null;return(K.stdout||"").toString()}catch(K){if(L1(K))console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.status}`);else if(K instanceof Error)console.error(K.message);return console.error(new Error().stack),null}}var c=L(()=>{l1();s()});function J$({template:$,options:Y,required:K,doubleCurlyBrackets:Z,onError:G,onToken:J}){const Q=new Map,X=new Map,W=new Map,F=new Map;let B=/\$\{([^\}]*)\}/g;if(Z)B=/\$\{\{([^\}]*)\}\}/g;const N=$.replace(B,(q,H)=>{let I="";if(F.set(H,(F.get(H)||0)+1),H in Y){Q.set(H,(Q.get(H)||0)+1);const x0=Y[H];if(x0!==void 0)I=x0}else X.set(H,(X.get(H)||0)+1);if(J){if(I=J(H,I),I!==H)Q.set(H,(Q.get(H)||0)+1),X.delete(H)}return I});Object.keys(Y).forEach((q)=>{if(!Q.get(q))W.set(q,(W.get(q)||0)+1)});const D={resolvedtemplateOptions:Q,template:N,templateProvidedOptions:F,unresolvedProvidedOptions:W,unresolvedTemplateOptions:X};if(K)K.values.forEach((q)=>{if(D.unresolvedProvidedOptions.get(q)){const H=`${K.name}: Could not resolve all the required inputs. Input: ${q}`;if(G)G(H);else console.error(H)}else if(D.unresolvedTemplateOptions.get(q)){const H=`${K.name}: A required option was not provided in the options parameter. Option: ${q}`;if(G)G(H);else console.error(H)}else if(!D.resolvedtemplateOptions.get(q)){const H=`${K.name}: A required option was not provided in the options parameter. Option: ${q}`;if(G)G(H);else console.error(H)}});return D}var Q$=L(()=>{});var M$={};C(M$,{default:()=>{{return L$}}});import I1 from"fs-extra";import z$ from"hostile";import F$ from"path";import X$ from"valid-url";async function D3(){const Y=I1.readJSONSync(F$.resolve("package.json")).hosts;if(!Y)return;const K=Object.keys(Y);let Z=await W$(z$,"get",!1);const G=[];console.warn(z.yellow("Updating hosts file..."));for(let Q of K)try{if(!Z.find((X)=>X[0]===Q&&X[1]===Y[Q]))G.push([Q,Y[Q]])}catch(X){if(X instanceof Error)console.warn(z.red(X.message))}if(G.length>0){console.warn(z.yellow("Adding hosts (You may be prompted for administrator password):\n\t",G.map((X)=>`${X[0]} => ${X[1]}`).join("\n\t"))),await M("sudo",["echo","Granted sudo access to update hosts file."]);const Q=await A("stat",["-f","%p","/etc/hosts"]).toString();await M("sudo",["chmod","666","/etc/hosts"]);for(let X of G)I1.appendFileSync("/etc/hosts",`${X[0]} ${X[1]}`);I1.appendFileSync("/etc/hosts","\n"),await M("sudo",["chmod",Q.substring(Q.length-4).trim(),"/etc/hosts"])}await E(500),console.warn(z.yellow("Verifying hosts file...")),Z=await W$(z$,"get",!1);let J=!1;if(G.forEach(([Q,X])=>{if(!Z.find((W)=>W[0]===Q&&W[1]===Y[Q]))J=!0,console.warn(z.redBright(`Failed to add host: ${z.yellowBright(Q)} => ${z.yellowBright(X)}`))}),J)console.warn(z.red(b`
        *************************************************************************
        * Some hosts specified in the package.json were not able to be written  *
        * to the hosts file for the system. You can amend this by editing the   *
        * file yourself, or by trying to run this script again as an admin.     *
        *************************************************************************
      `))}async function L$($,Y){const Z=I1.readJSONSync(F$.resolve("package.json"))?.url||{},G=Y?.reduce((Q,X,W)=>{return Q[`${W+1}`]=X,Q},{})||{};if(!$||$.length<=0){console.warn(b`
      Available URLs:
        ${z.cyanBrightBold(Object.keys(Z).join("\n        "))}
    `);return}await D3();const J={...process.env,...G};if(Array.isArray($))$.forEach((Q)=>{B$(Z,Q,J)});else B$(Z,$,J)}var H$,N3,W$,B$;var b$=L(()=>{H$=m9(G$(),1);O();n();w();c();Q$();t();N3=function($){return $&&typeof $==="function"},W$=function($,Y,...K){return new Promise((Z,G)=>{const J=$[Y];if(!N3(J)){G(new Error(`${String(Y)} is not a function`));return}J(...K,(Q,X)=>{if(Q)console.warn(Q),G(Q),process.exit(1);else Z(X||void 0)})})};B$=function($,Y,K){let Z=Y;if(X$.isWebUri(Y))Z=Y;else if($[Y])Z=$[Y];const G=J$({options:K,template:Z});if(G.unresolvedTemplateOptions.size>0)throw console.warn(z.red(b`
          You must specify these env variables for this URL to work:
          ${Array.from(G.unresolvedTemplateOptions.keys()).join("\n\t")}
        `)),new Error("Missing env configuration for URL");if(Z=G.template,X$.isWebUri(Z))console.warn("Navigating to:",z.cyanBrightBold(Z)),H$.default(Z);else console.warn("Can not open invalid URL:",z.redBrightBold(Z))}});import A3 from"child_process";async function $1(){try{A3.execSync("git status --porcelain=v1 2>/dev/null | wc -l | grep 0",{env:process.env})}catch($){return!0}return!1}var U1=L(()=>{});async function V1($){if($){if(!await y(`
      Would you like to return back to development?
      Runs the following:
        git fetch
        git checkout dev
        git reset --hard origin/dev
    `))return}if(await $1())return console.error("Can not return to dev branch as changes are present on the current branch."),!1;let Y=!1;if(!await M("git",["fetch"]))Y=!0;if(!await M("git",["checkout","dev"]))Y=!0;if(!await M("git",["reset","--hard","origin/dev"]))Y=!0;if(Y)return console.error("Could not return to dev branch."),!1;return!0}var z0=L(()=>{w();U1();J1()});import x from"fs-extra";import O3 from"ignore";import _ from"path";async function x3(){const $=await u();console.warn("Building full distribution...");let Y=await Bun.build({entrypoints:[_.resolve("./bin/main.ts")],target:"bun",external:Object.keys($),minify:!0,sourcemap:"inline"});for(let K of Y.outputs)console.warn("Writing bin bundle resource:",z.cyanBrightBold(K.path)),await Bun.write(_.resolve("./dist/bin",K.path),K);console.warn("Building gimped distribution..."),Y=await Bun.build({entrypoints:[_.resolve("./bin/main-gimp.ts")],target:"node",external:Object.keys($),minify:!0,sourcemap:"inline"});for(let K of Y.outputs)console.warn("Writing bin bundle resource:",z.cyanBrightBold(K.path)),await Bun.write(_.resolve("./dist/bin",K.path),K);console.warn("Copying entry cross-platform distribution..."),x.copyFileSync(_.resolve("./bin/main-entry.cjs"),_.resolve("./dist/bin/main-entry.cjs"))}async function I3(){if(!x.existsSync(_.resolve("./bin/shim")))console.error("No shim distribution files found to be built");if(x.existsSync(_.resolve("./shim")))x.removeSync(_.resolve("./shim"));const $=await u();console.warn("Building shim distribution...");const Y=await Bun.build({entrypoints:[_.resolve("./bin/shim/index.ts")],target:"node",external:Object.keys($),minify:!0});for(let Z of Y.outputs)console.warn("Writing shim bundle resource:",z.cyanBrightBold(Z.path)),await Bun.write(_.resolve("./shim/src/bin/shim",Z.path),Z);x.writeFileSync(_.resolve("./shim/index.js"),'export * from "./src/bin/shim/index.js";\n',{encoding:"utf-8"}),x.writeFileSync(_.resolve("./shim/index.d.ts"),'export * from "./src/bin/shim/index.d.ts";\n',{encoding:"utf-8"});const K=x.readJSONSync(_.resolve("tsconfig.json"));if(K.exclude=K.exclude||[],K.exclude.push("./bin/lib/**"),K.include=["./bin/shim"],x.writeJSONSync(_.resolve("tsconfig.temp.json"),K),await E(500),!M("tsc",["-d","--emitDeclarationOnly","--pretty","--outDir",_.resolve("./shim/src/bin"),"--project",_.resolve("tsconfig.temp.json")]))console.warn("Failed to compile type declarations for the shim files."),x.removeSync(_.resolve("tsconfig.temp.json")),process.exit(1);x.removeSync(_.resolve("tsconfig.temp.json"))}async function U3(){console.warn(z.yellowBright("Copying template files for bin distribution"));const $=_.resolve(__dirname,"../../template"),Y=_.resolve("./dist/bin/template");x.copySync($,Y);const K=x.readdirSync(Y).map((J)=>_.resolve(Y,J,"index.ts")).filter((J)=>{if(x.existsSync(J))return!0}),Z=await u();let G=!1;for(let J of K){const Q=await Bun.build({entrypoints:[J],target:"bun",external:Object.keys(Z),minify:!0});if(!Q.success){console.error(z.redBrightBold("Build failed for template:"),z.cyanBrightBold(_.relative(Y,_.dirname(J))));for(let X of Q.logs)console.error(X);G=!0}for(let X of Q.outputs)console.warn("Writing template entry file:",z.cyanBrightBold(_.relative(Y,_.resolve(_.dirname(J),X.path)))),await Bun.write(_.resolve(_.dirname(J),X.path),X)}if(G)console.error(z.redBrightBold("Some templates have errors (see above), stopping the build process.")),process.exit(1)}async function V3(){console.warn(z.yellowBright("Copying entry shell script for bin distribution")),x.copySync(_.resolve("./bin/main-entry.sh"),_.resolve("./dist/bin/main-entry.sh")),x.copySync(_.resolve("./bin/main-entry.ps1"),_.resolve("./dist/bin/main-entry.ps1"))}async function q$(){if(console.warn(z.cyanBright("Building bin commands for the distribution.")),!x.existsSync(_.resolve("./bin/main.ts"))||!x.existsSync(_.resolve("./bin/main-entry.sh"))||X0.ignores("bin")){console.warn(`Tried to make a release for the bin commands, but no bin/main.ts or bin/main.sh entry file was found. (or was gitignored):\n\t${_.resolve("./bin/main.ts")}\n\t${_.resolve("./bin/main.sh")}`);return}x.ensureDirSync(_.resolve("./dist")),x.ensureDirSync(_.resolve("./dist/bin/template")),await x3(),await I3(),await U3(),await V3()}var __dirname,_$,X0;var N$=L(()=>{O();w();_1();t();__dirname="/Users/diniden/Desktop/VoidRay/dev-ops/node-devops/bin/lib/build/bin",_$=_.resolve(".gitignore"),X0=O3.default();if(x.existsSync(_$))X0=X0.add(x.readFileSync(_$).toString())});import D$ from"fs";import A$ from"path";function O$($){return{name:"vite-devops-string-replace-plugin",enforce:"pre",load(Y){const K=A$.resolve(Y),Z=[".ts",".js",".tsx",".jsx"];if(D$.existsSync(K)&&Z.includes(A$.extname(K))&&!K.includes("node_modules")&&!K.includes("\0")){let G=D$.readFileSync(K,{encoding:"utf-8"});return $.forEach((J)=>{G=G.replace(J.from,J.to)}),G}}}}var x$=L(()=>{});import S from"fs-extra";import j from"path";function I$($){const Y=process.env.PROJECT_ROOT||".",K=j.resolve(Y,"app/config");if(!S.existsSync(K)){console.warn(`viteDevopsAppConfigPlugin: ${z.cyanBrightBold("No app/config folder found.")}`);return}try{const Z=S.readdirSync(K).filter((B)=>{return S.statSync(j.join(K,B)).isDirectory()}),G=Z.map((B)=>j.join(K,B)),Q=Z.map((B,N)=>{if(!$)if(S.existsSync(j.join(G[N],`${B}.local`))||S.existsSync(j.join(G[N],`${B}.local.js`))||S.existsSync(j.join(G[N],`${B}.local.ts`))||S.existsSync(j.join(G[N],`${B}.local.tsx`))||S.existsSync(j.join(G[N],`${B}.local.jsx`)))return[{from:`"config/${B}/${B}"`,to:`"config/${B}/${B}.local"`},{from:`"config/${B}/${B}.js"`,to:`"config/${B}/${B}.local.js"`},{from:`"config/${B}/${B}.ts"`,to:`"config/${B}/${B}.local.ts"`}];else return[];return[{from:`"config/${B}/${B}"`,to:`"config/${B}/${B}.${$}"`},{from:`"config/${B}/${B}.js"`,to:`"config/${B}/${B}.${$}.js"`},{from:`"config/${B}/${B}.ts"`,to:`"config/${B}/${B}.${$}.ts"`}]}).reduce((B,N)=>B.concat(N),[]),F=[...!$&&(S.existsSync(j.join(K,"env.local"))||S.existsSync(j.join(K,"env.local.js"))||S.existsSync(j.join(K,"env.local.ts"))||S.existsSync(j.join(K,"env.local.tsx"))||S.existsSync(j.join(K,"env.local.jsx")))?[{from:'"config/env"',to:'"config/env.local"'},{from:'"config/env.js"',to:'"config/env.local.js"'},{from:'"config/env.ts"',to:'"config/env.local.ts"'}]:$?[{from:'"config/env"',to:`"config/env.${$}"`},{from:'"config/env.js"',to:`"config/env.${$}.js"`},{from:'"config/env.ts"',to:`"config/env.${$}.ts"`}]:[],...Q];if(F.length>0)console.warn(`

  ${z.yellowBrightBold("Using the following mappings for app config:")}

  \t${z.cyanBrightBold(F.map((B)=>`\n  ${B.from} => ${B.to}`).join("\n\t"))}

      `);return O$(F)}catch(Z){console.error(Z),console.error(z.redBrightBold(`
      App config plugin failed to load. The default config paths will be used
      and any specific environment requested will be ignored.
    `))}}var U$=L(()=>{O();x$()});import*as w$ from"vite";import w1 from"fs-extra";import w3 from"ignore";import Y1 from"path";async function T$($){if(console.warn(z.cyanBright("Building client files for the distribution.")),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await U(),process.env.FORCE_BUILD!=="true"){if(!w1.existsSync(Y1.resolve("app/client"))||W0.ignores("app/client")){console.error(`Tried to make a release for the web app client, but no app/client entry file was found. (or was gitignored):\n\t${Y1.resolve("app/client")}`);return}}const Y="development";process.env.NODE_ENV="production",console.warn(`Releasing ${z.yellowBrightBold("app/client")} for Environment:`,z.cyanBrightBold($)),process.env.BUILD_ENV=$;const K=await r();if(K.plugins=[I$($),...K.plugins||[]],K.logLevel="warn",K.mode="production",K.root=Y1.resolve("app/client"),K.build.outDir=Y1.resolve("dist/app/client",$),K.build.watch=void 0,K.build.rollupOptions.output={dir:K.build.outDir,entryFileNames:"index.js",chunkFileNames:"index.js",manualChunks:void 0},await w$.build(K),process.env.NODE_ENV=Y,!w1.existsSync(Y1.resolve(`dist/app/client/${$}/index.js`)))console.error("\n\nFailed to create Client output bundle. Exiting process...\n\n"),process.exit(1)}var V$,W0;var C$=L(()=>{b1();O();v();U$();V$=Y1.resolve(".gitignore"),W0=w3.default();if(w1.existsSync(V$))W0=W0.add(w1.readFileSync(V$).toString())});async function K1($=[],Y){const K=await k();if(K1.optimize){if(K[1]==="bunx")return M(K[1],[Y?.excludeBunFlag?null:"--bun",...$].filter(R))}return M(K[1],[...$])}var B0=L(()=>{w();o();s();K1.optimize=!0});import T1 from"fs-extra";import W1 from"path";async function C1(){if(!T1.existsSync(W1.resolve("ui")))return;T1.ensureDir(W1.resolve("dist/types")),console.warn(z.yellowBrightBold("Generating .d.ts files...")),K1(["tsc","--emitDeclarationOnly","--declaration","--outDir","dist/types","--project",W1.resolve("tsconfig.json")]);const $=T1.readdirSync(W1.resolve("dist/types"));for(let Y of $){if(Y==="ui"||Y==="util")continue;console.warn(z.yellowBright(`Removing types for folder: ${Y}`)),T1.removeSync(W1.resolve("dist/types",Y))}}var H0=L(()=>{O();B0()});import T3 from"fs-extra";import C3 from"path";async function S$(){return T3.readJSONSync(C3.resolve("package.json")).name||""}var j$=L(()=>{});import*as R$ from"vite";import S1 from"fs";import S3 from"ignore";import d from"path";async function k$(){if(console.warn(z.cyanBright("Copying ui files for the distribution.")),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await U(),!process.env.FORCE_BUILD){if(!S1.existsSync(d.resolve("ui"))||F0.ignores("ui")){console.error(`"No library project found (or was gitignored) for bundling release at:\n\t${d.resolve("ui")}`);return}}if(console.warn(z.yellowBrightBold("Starting Vite client build...")),!S1.existsSync(d.resolve("ui/index.ts"))){console.error("The UI folder project has no index.ts entry point to create the library.");return}await C1(),console.warn(z.yellowBrightBold("Building library bundle..."));const $=await r();$.logLevel="warn",$.root=d.resolve("ui"),$.build.lib={entry:d.resolve("ui/index.ts"),name:(await S$()).split("@").join("").split("/").join("_"),fileName:"index"},$.mode="production",$.root=d.resolve("app/client"),$.build.outDir=d.resolve("dist/ui"),$.build.watch=void 0,$.build.rollupOptions.output={dir:$.build.outDir,entryFileNames:"index.js",chunkFileNames:"index.js",manualChunks:void 0};const Y=Object.keys(await u());console.warn("Externalized Libraries that will not be included in the bundle:",Y),$.build.rollupOptions={...$.build.rollupOptions,external:Y},await R$.build($)}var E$,F0;var P$=L(()=>{b1();O();H0();_1();j$();v();E$=d.resolve(".gitignore"),F0=S3.default();if(S1.existsSync(E$))F0=F0.add(S1.readFileSync(E$).toString())});import p from"fs-extra";import m from"path";async function y$(){process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await U(),console.warn(z.cyanBright("Copying story files for the distribution."));const $=m.resolve("dist/stories"),Y=m.resolve("ui/stories"),K=m.resolve("dist");if(!p.existsSync(Y)){console.error(`Could not find stories directory:\n\t${Y}`);return}p.ensureDirSync($),p.copySync(Y,$);const Z=m.resolve("package.json"),J={name:p.readJSONSync(Z).name||"unknown",private:!0,type:"module",main:"./ui/index.js",types:"./types/ui/index.d.ts",dependencies:{},repository:{},scripts:{},devDependencies:{}};console.warn("Writing distribution package.json:",m.resolve(K,"package.json")),p.writeJSONSync(m.resolve(K,"package.json"),J),await E(500),p.ensureDirSync(m.resolve(K,"components")),J.main="../ui/index.js",J.types="../types/ui/index.d.ts",console.warn("Writing distribution package.json:",m.resolve(K,"components/package.json")),p.writeJSONSync(m.resolve(K,"components/package.json"),J),await E(500),console.warn("Finished copying stories.")}var v$=L(()=>{O();v();t()});var m$={};C(m$,{default:()=>{{return E1}}});import j1 from"fs-extra";import Z1 from"path";async function j3(){if(process.env.QUICK_BUILD==="true")return;if(await l("release",["view"]),!await y("\nShould the release continue being made?"))await V1(!0),process.exit(1)}async function E3(){console.warn("Gathering build targets from:",z.yellowBright(Z1.resolve("build.conf.js")));const $=(await import(Z1.resolve("build.conf.js"))).BUILD_TARGETS;if(process.env.NODE_ENV="production",console.warn("Building environments",z.redBrightBold(JSON.stringify($))),!Array.isArray($))console.error("build.conf.js must be an array of string values"),process.exit(1);for(let Y of $)await T$(Y);await k$(),await y$(),await q$()}async function R3(){try{j1.removeSync(Z1.resolve("dist"))}catch($){console.warn("No dist folder to clean out.")}j1.ensureDirSync(Z1.resolve("dist"))}async function k3(){try{j1.removeSync(Z1.resolve("dist/test"))}catch($){console.warn("No test folder to clean out")}try{j1.removeSync(Z1.resolve("dist/unit-test"))}catch($){console.warn("No unit-test folder to clean out")}}async function E1(){console.warn("Validating the release..."),await j3(),console.warn("Clear previous build..."),await R3(),console.warn("Bundling project..."),await E3(),console.warn("Final cleanup..."),await k3(),console.warn("Release Build complete!")}var L0=L(()=>{O();N1();z0();J1();N$();C$();P$();v$()});var h$={};C(h$,{default:()=>{{return k1}}});import u$ from"fs-extra";import P3 from"lodash/groupBy.js";import R1 from"path";import y3 from"lodash/uniq.js";import v3 from"lodash/upperFirst.js";import{compare as m3,inc as f3} from"semver";async function l3($){console.warn("Building release notes..."),console.warn("fetching tags...");const Y=await A("git",["tag","--list"]);if(Y===null)console.error("Could not get git tags"),process.exit(1);const K=Y.trim().split("\n").sort(m3),Z=K[(K.includes($)?K.indexOf($):K.length)-1];console.warn("fetching version hash...");const G=await A("git",["rev-list","-1",`${$}`]);if(G===null)console.error("Couldn't get current version hash"),process.exit(1);const J=G.trim();console.warn("fetching previous version hash...");let Q=await A("git",["rev-list","-1",`${Z}`]);if(Q===null){if(Q=await A("git",["rev-list","--max-parents=0","HEAD"]),Q===null)console.error("Couldn't get previous version hash"),process.exit(1)}const X=Q.trim();console.warn("fetching logs...");const W=await A("git",["log","--pretty=%B",`${X}...${J}`]);if(W===null)console.error("Couldn't get logs"),process.exit(1);const F=W.split("\n").map((D)=>{const[,q="",H=""]=D.match(/^\s*(\w+?)\s*:\s*(.*)\s*$/)||[];return{tag:d$[q.toLowerCase()],message:v3(H)}}).filter((D)=>D.tag),B=P3(F,"tag"),N=d3.filter((D)=>B[D]).map((D)=>{const q=B[D];return`## ${D.replace(/(\w)/,(H)=>H.toUpperCase())}\n\n${q.map(({tag:H,message:I})=>`- [\`${H.toUpperCase()}\`]: ${I}`).join("\n")}`}).join("\n\n");return console.warn("New release notes completed"),N}async function k1($={}){if(console.warn("Generating Release Notes..."),await A("git",["fetch","--tags"])===null)console.error("Couldn't fetch tags"),process.exit(1);const K=f$(R1.resolve("package.json")),{version:Z="0.0.1"}=K;console.warn("Current Project version:",{currentVersion:Z});const G=await l3("HEAD"),J=h3(G),Q=J&&f3(Z,J);if(!Q)console.error("Unable to determine next version",{currentVersion:Z}),process.exit(1);if($.tag){if(console.warn("Creating the new tag..."),await A("git",["tag","-a",Q,"-m",`Release ${Q}`])===null)console.error("Couldn't create tag"),process.exit(1)}if($.updatePackage){console.warn("Updating the package.json...");const W=f$(R1.resolve("package.json"));W.version=Q,g$(R1.resolve("package.json"),`${JSON.stringify(W,null,"  ")}\n`)}const X=`## ${Q}\n\n${G}`;if(!G.trim()&&$.errorOnEmpty)throw new Error("No notes were generated as no semver style messages were found");if($.file){console.warn("Writing the release notes to file:",$.file);const W=R1.resolve($.file),F=g3(W)?u3(W):"";g$(W,`${`${X}\n\n${F}`.trim()}\n`);for(let N=0;N<=100;++N){if(u$.existsSync(W))break;if(N===100)console.warn("Release notes file was not created in time for the final release commit:",z.redBrightBold(W)),process.exit(1)}if(console.warn("Adding fragments to git..."),await A("git",["add","-A"])===null)console.warn("Could not ensure all fragments are added for the next commit."),process.exit(1);if(console.warn("Committing to git..."),await A("git",["commit","-am",`Release ${Q}`])===null)console.error("Couldn't commit changes"),process.exit(1);console.warn(`\n\n${z.cyan(X)}\n\n`)}else console.warn(`\n\n${z.cyan(X)}\n\n`);process.env.VITE_RELEASE_VERSION=Q}var h3,g3,u3,f$,g$,d$,d3;var M0=L(()=>{O();c();h3=function($){const Y=$.toLowerCase().split("\n").map((K)=>(K.match(/## (\w+)/)||[])[1]).filter(Boolean);if(Y.includes("breaking"))return"major";if(Y.includes("added"))return"minor";return"patch"};({existsSync:g3,readFileSync:u3,readJSONSync:f$,writeFileSync:g$}=u$),d$={breaking:"breaking",feat:"added",feature:"added",added:"added",fix:"fixed",fixed:"fixed",hotfix:"fixed",task:"task"},d3=y3(Object.values(d$))});async function P1($){return M("git",["ls-remote",$])}var b0=L(()=>{w()});async function l$($){const Y=await A("git",["remote","-v"]);if(Y===null)console.warn("Could not list remotes for the git project."),process.exit(1);const K=Y.split(/\r?\n/g),Z=K.find((J)=>J.indexOf($)>=0);if(!Z)console.warn(b`
      You MUST have a remote named ${$} which points to the repository you
      wish to deploy to.

      ${K.join("\n")}
    `),process.exit(1);const G=Z.split(/\s+/g)[1];if(!P1(G))console.warn(`
      You do not seem to have access to the repo listed in the package json of
      this project. Please ensure you have write access to the repo:
      ${G}
      and then try to run the release again.
    `),process.exit(1)}var c$=L(()=>{n();c();b0()});async function p$(){const $=await A("git",["rev-parse","--abbrev-ref","HEAD"]);if($===null){console.error("Failed to determine current branch.");return}return $.trim()||void 0}var i$=L(()=>{c()});var n$;var s$=L(()=>{c();i$();n$=async($,Y)=>{const K=await p$();if(!K)return console.warn("Could not determine current branch."),!1;if(await A("git",["checkout",`${Y}`])===null)return console.warn(`Could not checkout branch ${Y}`),!1;if(await A("git",["reset","--hard",`${$}/${Y}`])===null){if(console.warn(`Could not reset branch ${Y}`),await A("git",["checkout",`${K}`]))console.warn(`Could not return to original branch ${K}`);return!1}if(await A("git",["checkout",`${K}`])===null)return console.warn(`Could not return to original branch ${K}`),!1;return!0}});import c3 from"fs-extra";import p3 from"path";async function o$(){return c3.readJSONSync(p3.resolve("package.json")).repository||{}}var a$=L(()=>{});var e$={};C(e$,{default:()=>{{return r$}}});import y1 from"fs-extra";import v1 from"path";async function i3(){const $=await o$(),Y=$.url;if(!$||!($.type!=="gitlab"||$.type!=="git"||$.type!=="bitbucket"||$.type!=="stash"))console.warn(`
      You MUST have a repository specified in your package json to use the
      release script. It must be of 'type: git' and have a valid ssh url to
      your git repo.

      Additionally, you MUST have a remote configured for your project of
      'origin' that matches the repo url listed in your package.json.

      Thus: "git remote -v" SHOULD output a line with
      origin <url in your package json repository field> (push)
    `),process.exit(1);const K=await A("git",["remote","-v"]);if(K===null)console.warn("Could not list remotes for the git project."),process.exit(1);const Z=K.split(/\r?\n/g);if(!Z.find((J)=>J.indexOf(i)>=0&&J.indexOf(Y)>=0))console.warn("Could not match package json repository to an origin remote in git CLI",{remoteListProcess:K,remotes:Z,ENSURE_REMOTE:i,ENSURE_REMOTE_PROJECT:Y}),process.exit(1);if(!P1(Y))console.warn(`
      You do not seem to have access to the repo listed in the package json of
      this project. Please ensure you have write access to the repo:
      ${Y}
      and then try to run the release again.
    `),process.exit(1);if(await $1())console.error("You have uncommitted changes or the current state of the project can not be determined. Please commit or stash them before continuing."),process.exit(1);console.warn("Repository validation complete")}async function n3(){if(!await await M("git",["checkout","release"])){if(!await M("git",["checkout","-b","release"]))console.warn("Could not switch to the release branch. Make sure the branch exists locally."),process.exit(1)}if(!await M("git",["fetch",`${i}`]))console.warn("Could not fetch from remote servers."),process.exit(1);if(!await M("git",["reset","--hard",`${i}/dev`]))console.warn("Could not reset branch to dev"),process.exit(1);console.warn("Checked out release branch and updated to dev")}async function o3($){const Y=await U();if(!await M("git",["add","-A"]))console.warn("Could not ensure all fragments are added for the next commit."),process.exit(1);await k1({file:"RELEASE_NOTES.md",updatePackage:!0});const K=await U();if(Y===K)console.warn(`
      The release script did not detect any changes for a release. If you find
      this to be in error or you want to force a new release. Make some commits
      with proper release note formatted messages to trigger a release.
    `),process.exit(1);if($){if(s3()!=="patch")console.error(`
        Cannot create a release for an alternate branch that is not a simple
        patch. Features and breaking changes can ONLY be made on the main branch of
        development.
      `),process.exit(1)}const Z=await A("git",["log","-1","--pretty=%B"]);if(Z===null)console.warn("Could not read the last commit version information"),process.exit(1);const G=(Z.trim().toLowerCase().split("release ")[1]||"").trim();if(!G)console.warn("Could not determine release version from the last commit:\n\n",Z.toString(),"\n\n"),process.exit(1);if(y1.existsSync(v1.resolve("ui/release.json"))){try{const J=y1.readJSONSync(v1.resolve("ui/release.json"));J.version=G,y1.writeJSONSync(v1.resolve("ui/release.json"),J)}catch(J){console.warn("Could not update the release.json file with current library version."),process.exit(1)}if(!await M("git",["add","-A"]))console.warn("Could not ensure the release json was updated for the new version."),process.exit(1);if(!await M("git",["commit","--amend","--no-edit"]))console.warn("Could not amend the release commit to include the release json file."),process.exit(1)}if(G.includes('"'))console.warn("The update version generated is invalid as it contains invalid characters",{version:G}),process.exit(1);return console.warn("Updating version to",{version:G}),G}async function a3($){if(!await M("git",["tag","-a",$,"-m",`Release ${$}`]))console.warn("Could not make tag for git commit"),process.exit(1)}async function t$($,Y,K,Z,G){if(!await M("git",["push",G?"-f":void 0,$,`${K}:${Z}`]))console.warn(`Could not push release commit to ${$}`),process.exit(1);if(!await M("git",["push",$,Y]))console.warn("Could not push tag to the remote repository"),process.exit(1)}async function t3($,Y){if($&&$.length>0){if(!await y(b`
        The build and release was successful, would you like to release to the
        specified additional remotes?

        ${z.cyanBrightBold($.join("\n"))}
      `))return}if(!await M("git",["fetch",i]))console.warn("Could not fetch from remote servers."),process.exit(1);for(let K of $){const[Z,G,J,Q]=K.split(":");await l$(Z),await n$(i,G||"master"),await t$(Z,Y,G||"master",J||"master",Q==="force")}}async function r3($){process.env.NODE_ENV="production",await i3(),await n3(),await E1();const Y=await o3();if(await a3(Y),await t$(i,Y,"release","release",!0),await y("Would you like to run pr release?"))await l("pr",["release"]);await t3($,Y),await V1(!0)}async function r$($){console.warn("Executing release script"),r3($)}var s3,i;var $9=L(()=>{L0();M0();O();n();N1();w();c();b0();c$();U1();z0();s$();J1();a$();v();s3=function(){try{const Y=y1.readFileSync(v1.resolve("RELEASE_NOTES.md"),"utf8").toLowerCase().split("\n").map((K)=>(K.match(/## (\w+)/)||[])[1]).filter(Boolean);if(Y.includes("breaking"))return"major";if(Y.includes("added"))return"minor";return"patch"}catch($){console.error("Could not determine release type after release was created"),process.exit(1)}};i="origin"});var K9={};C(K9,{default:()=>{{return Y9}}});async function Y9(){await C1()}var Z9=L(()=>{H0()});var _0={};C(_0,{default:()=>{{return J9}}});import f from"fs-extra";import e3 from"ignore";import T from"path";async function $4($){const Y=f.readJSONSync(T.resolve("tsconfig.json"));if(Y.exclude=Y.exclude||[],Y.include=(Y?.include||[]).filter((Z)=>!m1.ignores(T.relative("./",Z))),f.writeJSONSync(T.resolve("tsconfig.temp.json"),Y),await E(500),$==="watch"){const Z=async()=>{console.warn("Exit TS process");try{f.removeSync(T.resolve("tsconfig.temp.json"))}catch(G){}process.exit(0)};process.on("exit",Z),process.on("SIGINT",Z),process.on("SIGUSR1",Z),process.on("SIGUSR2",Z),process.on("SIGTERM",Z),process.on("uncaughtException",Z)}if(!M("tsc",["-d",$==="watch"?"--watch":"","--incremental","--noemit","--pretty","--tsBuildInfoFile",T.resolve("node_modules/.cache/tsc/tsc.tsbuildinfo"),"--outDir",T.resolve("dist"),"--project",T.resolve("tsconfig.temp.json")]))console.warn("Failed to compile type declarations"),f.removeSync(T.resolve("tsconfig.temp.json")),process.exit(1);const K=(Y?.include||[]).filter((Z)=>!m1.ignores(T.relative("./",Z))).map((Z)=>T.resolve(Z)).filter((Z)=>f.existsSync(Z)&&!Z.includes("node_modules"));if(K.length>0){if(!M("eslint",[...K,"-c",T.resolve(".eslintrc"),"--ext",".ts","--ext",".tsx"]))console.warn("Failed eslint checks."),f.removeSync(T.resolve("tsconfig.temp.json")),process.exit(1)}f.removeSync(T.resolve("tsconfig.temp.json"))}async function J9($){await $4($)}var G9,m1;var q0=L(()=>{w();t();G9=T.resolve(".gitignore"),m1=e3.default();if(f.existsSync(G9))m1=m1.add(f.readFileSync(G9).toString())});var z9={};C(z9,{default:()=>{{return Q9}}});async function Q9(){console.warn(z.yellowBrightBold("Starting server...")),await X1()}var X9=L(()=>{o1();O()});var L9={};C(L9,{default:()=>{{return F9}}});import Y4 from"fs-extra";import N0 from"path";async function H9($){if(!Y4.existsSync($))return console.warn("Attempted to start a server but no server distribution was found at",$),!1;return await M("bun",[`${$}`]),!0}async function W9(){const $=N0.resolve("docs/index.js");return await H9($)}async function B9(){process.env.RESOURCE_PATH=N0.resolve("dist/app/client");const $=N0.resolve("dist/app/server/index.js");return await H9($)}async function F9($,Y){const{PORT:K="80"}=process.env;process.env.PORT=K;let Z=!1;switch($){case"app":Z=await B9();break;case"devops":Z=await W9();break;default:if($)console.warn("Invalid target for start script specified",$);break}if(!Z){if(Z=await B9(),Z)return;if(Z=await W9(),Z)return}}var M9=L(()=>{w()});import K4 from"fs-extra";import D0 from"path";async function b9(){const $=D0.resolve("tsconfig.json");if(!K4.existsSync($))throw new Error("Target project does not have a TSConfig");const Y=Boolean(process.env.DEBUG),K=process.env.PATTERN,Z=process.env.WATCH,G=process.env.LESS,J=D0.resolve("jest.config.js");M.silent=!0;try{if(Y)M("node",["--inspect-brk",D0.resolve("node_modules/.bin/jest"),"--runInBand",Z?"--watchAll":"","--verbose",G==="true"?"false":void 0,"--colors","--config",J,K?`--testNamePattern ${K}`:""]);else K1(["jest",Z?"--watchAll":"","--verbose",G==="true"?"false":void 0,"--colors","--config",J,K?`--testNamePattern=${K}`:""],{excludeBunFlag:!0})}catch(Q){console.warn("Tests failed. Please look at logs to see the errors discovered")}console.warn(z.cyanBright("Tests complete"))}var _9=L(()=>{O();B0();w()});var N9={};C(N9,{default:()=>{{return q9}}});async function q9(){console.warn("Running unit tests..."),await b9()}var D9=L(()=>{_9()});var U9={};C(U9,{default:()=>{{return I9}}});import A9 from"fs";import O9 from"path";import x9 from"rimraf";async function I9(){const $=O9.resolve("./node_modules/.cache/"),Y=O9.resolve("./build");if(A9.existsSync($))x9.sync($),console.warn("Cache: Clean complete");else console.warn("Cache: Already clean");if(A9.existsSync(Y))x9.sync(Y),console.warn("Build: Clean complete");else console.warn("Build: Already clean");if(await M("bun",["pm","cache","rm"]))console.warn("Bun: Clean complete");else console.warn("Bun: Already clean")}var V9=L(()=>{w()});import w9 from"path";import{createRequire as Z4} from"module";async function f1($,Y){const G=Z4(import.meta.url).resolve($).split("node_modules"),J=G[0],Q=G[1].split(w9.sep)[1];return w9.join(J,"node_modules",Q,"node_modules",".cache",Y)}var T9=L(()=>{});var S9={};C(S9,{default:()=>{{return C9}}});import G4 from"fs-extra";import G1 from"path";import J4 from"url";async function Q4($,Y,K){const Z=await import("puppeteer"),G=await f1("puppeteer","pr-release"),J=await Z.launch({headless:!1,userDataDir:G1.resolve(B1,G),defaultViewport:null}),Q=await J.newPage();console.warn("Opening project url..."),await Q.goto($);const X=await Q.evaluate(()=>document.body.getAttribute("data-project-id"));if(!X){console.warn("No project id found, User login required...");let F=!0;J.on("disconnected",()=>{if(!F)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)}),await Q.goto($),await Q.waitForFunction(()=>{const B=document?.body?.getAttribute("data-project-id");return B!==null&&B!==void 0},{timeout:0}),await Q.close(),F=!1}else await Q.close();console.warn("Project ID found:",X,"\nOpening merge request...");const W=async(F,B,N)=>{const D=await J.newPage();await D.goto(`${$}/-/merge_requests/new?${N?"utf8=%E2%9C%93&":""}merge_request%5Bsource_project_id%5D=${X}&merge_request%5Bsource_branch%5D=${encodeURIComponent(F)}&merge_request%5Btarget_project_id%5D=${X}&merge_request%5Btarget_branch%5D=${B}`),await D.waitForFunction(()=>{const q=document.querySelector("#merge_request_title");return q!==null&&q!==void 0},{timeout:0}),await D.evaluate((q)=>{let H=document.querySelector("#merge_request_title");if(H)H.value=`Release ${q}`;if(H=document.querySelector("#merge_request_description"),H)H.value=`Release ${q}`;if(H=document.querySelector("#merge_request_force_remove_source_branch"),H)H.checked=!1,H.value="0"},Y),await new Promise((q)=>{D.on("close",()=>{q(void 0),console.warn("Gitlab ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([W("release","dev"),W("release",K)]),J.close()}async function A0($,Y,K,Z){const G=await import("puppeteer"),J=await f1("puppeteer","pr-release");let Q=await G.launch({headless:!Z,userDataDir:G1.resolve(B1,J),defaultViewport:null});const X=await Q.newPage();if(Z){console.warn("User login required...");let N=!0;Q.on("disconnected",()=>{if(!N)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)});const D="https://github.com/login";console.warn("Opening github login page: ",D),await X.goto(D),await X.waitForFunction(()=>{const q=document?.body?.getAttribute("class")?.split(" ").find((H)=>H.startsWith("logged-in"));return q!==null&&q!==void 0},{timeout:0}),N=!1}else console.warn("Opening project url: ",$),await X.goto($);console.warn("Checking for logged-in attribute on body...");const W=await X.evaluate(()=>{return console.warn("logged-in check:",document?.body?.getAttribute("class")?.split(" ").find((N)=>N.startsWith("logged-in"))),document?.body?.getAttribute("class")?.split(" ").find((N)=>N.startsWith("logged-in"))});if(console.warn("Loggin in check:",W),!W&&Z)await Q.close(),console.error("Failed to log in the user for github."),process.exit(1);else if(!W){console.warn("Logged-in not found on body, login might be needed..."),await Q.close(),A0($,Y,K,!0);return}else Q.close();const F={headless:!1,userDataDir:G1.resolve(B1,J),defaultViewport:null};Q=await G.launch(F);const B=async(N,D)=>{const q=await Q.newPage();await q.goto(`${$}/compare/${D}...${N}`),await q.waitForFunction(()=>{const H=document.querySelector("#repo-content-pjax-container > div > div.js-details-container.Details.js-compare-pr > div > button");return H?.click(),H!==null&&H!==void 0}),await q.evaluate(async(H)=>{let I=document.querySelector("#pull_request_title");if(I)I.value=`Release ${H}`;if(I=document.querySelector('[name="pull_request[body]"]'),I)I.value=`Release ${H}`},Y),await new Promise((H)=>{q.on("close",()=>{H(void 0),console.warn("Github ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([B("release","dev"),B("release",K)]),Q.close()}async function z4($,Y,K,Z){const G=await import("puppeteer"),J=await f1("puppeteer","pr-release");let Q=await G.launch({headless:!Z,userDataDir:G1.resolve(B1,J),defaultViewport:null});const X=await Q.newPage();if(Z){console.warn("User login required...");let N=!0;Q.on("disconnected",()=>{if(!N)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)});const D=$;console.warn("Opening azure repo login page: ",D),await X.goto(D),await X.waitForFunction(()=>{const q=window.sessionStorage.msameid;return q!==null&&q!==void 0},{timeout:0}),N=!1}else console.warn("Opening project url: ",$),await X.goto($);console.warn("Checking for logged-in attribute on body...");const W=await X.evaluate(()=>{return console.warn("logged-in check:",window.sessionStorage.msameid),window.sessionStorage.msameid});if(console.warn("Loggin in check:",W),!W&&Z)await Q.close(),console.error("Failed to log in the user for azure."),process.exit(1);else if(!W){console.warn("MS id not found, login might be needed..."),await Q.close(),A0($,Y,K,!0);return}else Q.close();const F={headless:!1,userDataDir:G1.resolve(B1,J),defaultViewport:null};Q=await G.launch(F);const B=async(N,D)=>{const q=await Q.newPage();await q.goto(`${$}&sourceRef=${N}&targetRef=${D}`),await q.waitForFunction(()=>{const H=document.querySelector("button.primary");return H!==null&&H!==void 0}),await q.evaluate(async(H)=>{let I=document.querySelector('[aria-label="Enter a title"]');if(I)I.value=`Release ${H}`;if(I=document.querySelector('[aria-label="Description"]'),I)I.value=`Release ${H}`},Y),await new Promise((H)=>{q.on("close",()=>{H(void 0),console.warn("Azure project ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([B("release","dev"),B("release",K)]),Q.close()}async function C9($,Y,K="master",...Z){if(!(new Set(["gitlab","git","github","azure"])).has(Y))console.error(`Unsupported repo type: ${Y}`),process.exit(1);if(await $1())console.error("You have uncommitted changes or the current state of the project can not be determined. Please commit or stash them before continuing."),process.exit(1);const Q=G4.readJsonSync(G1.resolve("package.json")).version;switch(Y){case"gitlab":await Q4($,Q,K);break;case"git":case"github":await A0($,Q,K);break;case"azure":await z4($,Q,K);break;default:console.warn("No supported repo type found")}}var B1;var j9=L(()=>{T9();U1();B1=J4.fileURLToPath(new URL(".",import.meta.url))});O();import*as X4 from"commander";import W4 from"inquirer-autocomplete-prompt";import B4 from"inquirer";import E9 from"path";import H4 from"yargs";O();n();import S0 from"fs-extra";import j0 from"path";O();import U0 from"fs";import V0 from"path";function I0($){const Y=$.split(/\r?\n/),K={};let Z=null,G=null;return Y.forEach((J)=>{if(J=J.trim(),J===""||J.startsWith("#"))return;if(J.endsWith("{")){Z=J.split(/\s+/)[0],K[Z]={};return}if(J==="}"){Z=null,G=null;return}const Q=J.match(/^([\w.]+)\s*=\s*(.*)$/);if(Q){const W=Q[1];let F=Q[2];if(!isNaN(parseFloat(F)))F=parseFloat(F);else if(F==="true")F=!0;else if(F==="false")F=!1;if(G)K[Z??"null"][G][W]=F;else if(Z)K[Z][W]=F;else K[W]=F;return}const X=J.match(/^([\w.]+)\.([\w.]+)\s*=\s*(.*)$/);if(X){const W=X[1],F=X[2],B=X[3];if(!K[W])K[W]={};if(!K[W][F])K[W][F]={};K[W][F][B]=null,Z=W,G=F;return}console.error(`Unrecognized line: ${J}`)}),K}function w0($){try{if(!U0.existsSync(V0.resolve(".env")))return;const Y=U0.readFileSync(V0.resolve($||".env"),"utf8"),K=I0(Y);Object.entries(K).forEach(([Z,G])=>{if(typeof G==="string")process.env[Z]=G;else if(typeof G==="number")process.env[Z]=G.toString();else if(typeof G==="boolean")process.env[Z]=G.toString()})}catch(Y){if(Y instanceof Error)console.error(z.red("Error reading .env file:\n",z.yellow(Y.stack||Y.message)))}}s();J1();import h9 from"fs-extra";import l9 from"inquirer";import{stripIndent as c9} from"common-tags";async function C0($,Y,K,Z,G,J){let Q=J||!1;if(h9.existsSync($)){const{result:X}=await l9.prompt([{type:"confirm",name:"result",message:c9`${Y}`,default:J}]);if(X)K($),G?.($);Q=X}else K($),Z?.($);return Q}async function p9(){const $=(await import(j0.resolve("env.config.ts"))).default;if(!$)throw new Error("No env.config.ts file found.");if(!Array.isArray($))console.error("env.config.ts is not formatted correctly. Please follow the correct type convention.");return $}async function d1($){w0();try{const Y=await p9(),K=[],Z=[];if(Y.forEach((G)=>{if(!G)return;if(G.required){if(!process.env[G.name])K.push(b`
              Missing: ${G.name}\nDesription: ${G.description}
            `)}else if(!process.env[G.name]&&G.warn!==!1)Z.push(b`
              Missing: ${G.name}\nDesription: ${G.description}
            `)}),Z.length>0)console.warn(z.yellowBrightBold("The following environment variables are recommended but missing from your environment:\n")),console.warn(z.yellowBright(b`
          ${Z.join("\n")}
        `));if(K.length>0)console.error(z.redBrightBold("The following environment variables are required but missing from your environment:\n")),console.error(z.redBright(b`
          ${K.join("\n")}
        `));if(K.length>0){if($){if(await y(b`
          There seems to be some missing environment variables. Would you like
          to generate a .env file with the default values specified in the
          env.config file?
        `)){const J=[];for(let F of Y)J.push([F.name,T0(F.default)?F.default:R(F.default)?await F.default():void 0]);const Q=J.filter((F)=>F[1]).map((F)=>`${F[0]}=${F[1]}`).join("\n");if(!Q)console.warn(b`
              There are no defaults available for this env.config. So we can not
              generate an env file you. Please review the env.config.ts file and
              properly set the default values for the required environment
              variables.
            `);const X=j0.resolve(".env");if(!await C0(X,b`
              There appears to already be a .env file.
              Would you like to add the missing defaults to it?
            `,()=>{},()=>S0.writeFile(X,Q),()=>{S0.appendFileSync(X,`\n${Q}`)},!1))console.error("Did not write the .env file. Please correct the env and try again."),process.exit(1);return console.warn("Attempting to build the env again and continue with the command..."),d1(!1)}}process.exit(1)}}catch(Y){console.warn(b`
      No ${z.cyanBrightBold("env.config.ts")} file found. Environment will not be validated.
    `)}}n();import n9 from"fs-extra";import s9 from"inquirer";import o9 from"path";w();o();s();async function a($,Y,K){const Z=await k(),G=$.filter(R);return await M(Z[0],["i",K?"--no-save":null,Y?`-${Y}`:null,...G])}w();import i9 from"fuzzy";var E0=($)=>async(Y,K)=>{let Z=[];if($ instanceof Set)Z=Array.from($);else Z=$;return i9.filter(K||"",Z).map((G)=>G.string)};o();async function R0($){try{return await import($),!0}catch(Y){return console.error("Requested package is not available in this current project:",$),!1}}t();async function k0($,Y){const K=$||["puppeteer"];for(let Z of K)if(console.warn("Checking on dependency availability:",Z),!await R0(Z)){let J=Y;if(!J)J=(await s9.prompt([{type:"autocomplete",name:"resolution",message:`How do you want to resolve the missing package "${Z}":`,source:E0([g.InstallOnce,g.InstallAbove,g.DoNothing])}])).resolution;switch(J){case g.Install:await a([Z],"E");break;case g.InstallOnce:a([Z],"E",!0);break;case g.InstallAbove:{const Q=process.cwd();process.chdir("..");const X=await k();if(!n9.existsSync(o9.resolve("package.json")))M(X[0],["init","-y"]);await a([Z],"E"),process.chdir(Q),await E(100);break}default:process.exit(1)}}}var g;(function(G){G["Install"]="Install to current project";G["InstallOnce"]="Install once to current project";G["InstallAbove"]="Install in parent directory (Makes package available to all peer projects)";G["DoNothing"]="Do Nothing (this will end this current process as the package is required)"})(g||(g={}));var O0=function(){return g1.debug=V.debug,g1.verbose=V.verbose,g1.pattern=V.pattern,g1};async function D4(){await d1(!0),V.parse(process.argv)}B4.registerPrompt("autocomplete",W4);var{Command:F4}=X4,V=new F4,g1={};V.version("0.0.1");V.option("-v, --verbose","Outputs more detailed information during crashes.");V.option("--debug [param]",b`
    Provides debugging contextual information various commands might use to
    aid in developing Devops.
  `);V.option("-p, --pattern [param]",b`
    Provides a pattern for certain operations to utilize. This is primarily
    used by unit tests to filter tests to specified tests.
  `);var R9=V.command("dev").description(b`
    These are the commands associated with starting up developer environments
    for various project types or portions of a project.
  `);R9.command("vite").description(b`
      Starts up a developer environment that performs incremental builds while
      developing within the lib and app folders. Uses vite and vite
      config.
    `).action(async()=>{(await Promise.resolve().then(() => (d0(),u0))).default().catch(($)=>{console.warn("dev-vite process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});R9.command("storybook").option("-i, --include <include...>","Additional storybook modules to load into storybook. These are the names of properly formatted dependencies installed into node_modules.").description(b`
      Starts a storybook instance for developing the UI components of the
      project. This makes the "ui/stories" folder in the project the expected
      development point.
    `).action(async({include:$})=>{(await Promise.resolve().then(() => (e1(),r1))).default("",$,E9.resolve(process.cwd()),O0()).catch((Y)=>{console.warn("storybook process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var L4=V.command("storybook");L4.command("run").option("-i, --include <include...>","Additional storybook modules to load into storybook. These are the names of properly formatted dependencies installed into node_modules.").description(b`
      Starts a storybook instance for developing the UI components of the
      project. This makes the "ui/stories" folder in the project the expected
      development point.
    `).action(async({include:$})=>{(await Promise.resolve().then(() => (e1(),r1))).default("",$,E9.resolve(process.cwd()),O0()).catch((Y)=>{console.warn("storybook process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});V.command("url [uri...]").description(b`
      Simple command to open a specified URL in the browser.
    `).action(async($)=>{(await Promise.resolve().then(() => (b$(),M$))).default($).catch((Y)=>{console.warn("url process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var H1=V.command("release").description(b`
    These commands are used for facilitating distribution releases of
    applications. This includes tools for building th dist folder fragments,
    viewing the expected release notes, and actually performing a complete
    release cycle.
  `);H1.command("deploy [add-remote...]").description(b`
      Performs actions necessary to update the distribution of the project.
      This will automatically update release notes, tag the release, and
      commit and push to a 'release' branch which will be ready for merging
      into master and dev.

      Specify additional remotes to deploy to via the add-remote option.
      This will deploy the release to additional remotes (AFTER all other normal
      deploy operations complete). This value is the NAME of the remote as it
      appears when you perform a "git remote -v" command.

      You can specify a specific target branch via a colon: remote:branch
      Otherwise, this will use the same main branch as configured for this
      project.
    `).action(async($)=>{a([]),(await Promise.resolve().then(() => ($9(),e$))).default($).catch((Y)=>{console.warn("release-deploy process exited unexpectedly\n",Y.stack||Y.message),process.exit(1)})});H1.command("types").description(b`
      Updates JUST the types in the dist folder. These are the same types
      generated when building a release.
    `).action(async()=>{(await Promise.resolve().then(() => (Z9(),K9))).default().catch(($)=>{console.warn("release-types process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});H1.command("view").description(b`
      This runs the release-view script. For this case, it will only display
      the release notes in the console. Actual generated release notes are a
      part of the release process.
    `).action(async()=>{(await Promise.resolve().then(() => (q0(),_0))).default("").then(async()=>{console.warn(z.cyanBrightBold("TS check passed, generating notes...")),(await Promise.resolve().then(() => (M0(),h$))).default().catch(($)=>{console.warn("release-notes process exited unexpectedly",$.stack||$.message),process.exit(1)})}).catch(($)=>{console.warn(z.redBrightBold(b`
              Failed TS check. Release notes will not be produced until all TS
              errors are resolved.
            `)),console.warn($.stack||$.message),process.exit(1)})});H1.command("build").description(b`
      This runs the release-build script. This generates all of the release
      fragments. This should ONLY be used for testing and experimenting. Actual
      release fragments should be properly created and deployed using the
      release deploy command.
    `).action(async()=>{(await Promise.resolve().then(() => (L0(),m$))).default().catch(($)=>{console.warn("release-deploy process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});var M4=H1.command("start").description(b`
      This starts up released related processes. This includes things like
      starting up the dev server without any additional builds or auto
      configuration for development.
    `);M4.command("server").description(b`
      Starts up the app server without any additional builds etc. Use the
      environments:

        BUILD_MODE: Targets an env to run the server for.
        RESOURCE_PATH: The path to the static files to serve.
    `).action(async()=>{(await Promise.resolve().then(() => (X9(),z9))).default().catch(($)=>{console.warn("release-start-server process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});V.command("start [target]").description(b`
      This fires up a server to make any static content available for being
      served.
      There are a few options for what content will be served by this script:

      - The web app
      - Devops API

      The start script will automatically pick the web app over the devops
      files, but you can specify a target if you have a devops API and a web
      app:

      - app
      - devops
    `).action(async($)=>{(await Promise.resolve().then(() => (M9(),L9))).default($,O0()).catch((Y)=>{console.warn("start process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var b4=V.command("test").description(b`
    These commands are used for running tests. This includes tools for
    running unit tests a single time or in a watch mode.

    Use the environment variables for modifying behavior:

    ${z.yellowBrightBold("PATTERN")} - This causes the tests to only run on
    files that match the pattern

    ${z.yellowBrightBold("LESS")} - This removes the verbose output list of
    all tests ran
  `);b4.command("run").description(b`
      Runs all unit tests in the unit-test folder once.
    `).action(async()=>{(await Promise.resolve().then(() => (D9(),N9))).default().catch(($)=>{console.warn("test-run process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var _4=V.command("clean").description(b`
    Common cleaning tools for various fragments within the project.
  `);_4.command("cache").description(b`
      Cleans out build and cache files to help ensure a complete rebuild takes
      place.
    `).action(async()=>{(await Promise.resolve().then(() => (V9(),U9))).default().catch(($)=>{console.warn("clean-cache process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var q4=V.command("ts").description(b`
    These commands are used for running typescript. This includes tools for
    running typescript compilation a single time or in a watch mode.
  `);q4.command("run").description(b`
      Runs typescript compilation to check for errors. Does NOT emit files, thus
      is a good mechanism for checking a build before running a release.
    `).action(async()=>{(await Promise.resolve().then(() => (q0(),_0))).default("").catch(($)=>{console.warn("ts process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var N4=V.command("pr").option("--repoUrl <value>",b`
      The https URL to the repo to make the PR into
    `).option("--repoType <value>",b`
    The repository type to make the PR into. Supported types are: git, gitlab
  `).option("--masterBranch <value>",b`
    This indicates which branch is the master/main of the repository.
  `);N4.command("release").description(b`
      This creates two PRs that merges the current remote release branch into
      the remote dev and master branches.
    `).action(async()=>{const{repoUrl:$,repoType:Y,masterBranch:K}=H4(process.argv).argv;if(!$||!Y||!K)console.warn("You must specify both --repoUrl and --repoType to use this command"),process.exit(1);await k0().catch(()=>process.exit(1)),console.warn("Dependency checks passed, continuing..."),(await Promise.resolve().then(() => (j9(),S9))).default($,Y,K).catch((Z)=>{console.warn("pr-release process exited unexpectedly"),console.warn(Z.stack||Z.message),process.exit(1)})});D4();

//# debugId=30999E8970C7FD2964756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiYmluL2xpYi91dGlsL2NoYWxrLnRzIiwgImJpbi9saWIvdXRpbC9kZXNjcmlwdGlvbi50cyIsICJiaW4vbGliL3V0aWwvdHlwZXMudHMiLCAiYmluL2xpYi9wcm9tcHQvcHJvbXB0LWNvbmZpcm0udHMiLCAiYmluL2xpYi91dGlsL2lzLWNoaWxkLXByb2Nlc3MtZXJyb3IudHMiLCAiYmluL2xpYi9leGVjL2V4ZWMtc3luYy50cyIsICJiaW4vbGliL2V4ZWMvZ2V0LXBhY2thZ2UtbWFuYWdlci50cyIsICJiaW4vbGliL3V0aWwvd2FpdC50cyIsICJiaW4vbGliL2J1aWxkL2J1aWxkLXZpdGUtY29uZmlnLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtZGVwZW5kZW5jaWVzLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi50cyIsICJiaW4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9idWlsZC1jbGllbnQudHMiLCAiYmluL2xpYi91dGlsL2hhbmRsZS1wcm9jZXNzLWV4aXQudHMiLCAiYmluL2xpYi91dGlsL2xvZy1xdWV1ZS50cyIsICJiaW4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9ydW4tYXBwLXNlcnZlci50cyIsICJiaW4vY29tbWFuZHMvZGV2L2Rldi12aXRlLnRzIiwgImJpbi9saWIvZGV2b3BzLXByb2plY3QvZGV2b3BzLXByb2plY3QtcGF0aC50cyIsICJiaW4vbGliL2V4ZWMvZXhlYy1zY3JpcHQudHMiLCAiYmluL2NvbW1hbmRzL3N0b3J5Ym9vay50cyIsICJub2RlX21vZHVsZXMvaXMtZG9ja2VyL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9pcy13c2wvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2RlZmluZS1sYXp5LXByb3AvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL29wZW4vaW5kZXguanMiLCAiYmluL2xpYi9leGVjL2V4ZWMtc3luYy1yZXN1bHQudHMiLCAiYmluL2xpYi91dGlsL3RlbXBsYXRlLnRzIiwgImJpbi9jb21tYW5kcy91cmwudHMiLCAiYmluL2xpYi9naXQvZ2l0LWhhcy1jaGFuZ2VzLnRzIiwgImJpbi9saWIvZ2l0L2dpdC1yZXR1cm4tdG8tZGV2LnRzIiwgImJpbi9saWIvYnVpbGQvYmluL3JlbGVhc2UtYmluLnRzIiwgImJpbi9zaGltL3ZpdGUtcGx1Z2lucy92aXRlLWRldm9wcy1zdHJpbmctcmVwbGFjZS1wbHVnaW4udHMiLCAiYmluL3NoaW0vdml0ZS1wbHVnaW5zL3ZpdGUtZGV2b3BzLWFwcC1jb25maWctcGx1Z2luLnRzIiwgImJpbi9saWIvYnVpbGQvd2ViLWFwcC92aXRlL3JlbGVhc2UtY2xpZW50LnRzIiwgImJpbi9saWIvZXhlYy9leGVjLXNjcmlwdHgudHMiLCAiYmluL2xpYi9idWlsZC9saWJyYXJ5L3ZpdGUvcmVsZWFzZS1saWJyYXJ5LXR5cGVzLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtbmFtZS50cyIsICJiaW4vbGliL2J1aWxkL2xpYnJhcnkvdml0ZS9yZWxlYXNlLWxpYnJhcnkudHMiLCAiYmluL2xpYi9idWlsZC9saWJyYXJ5L3JlbGVhc2Utc3Rvcmllcy50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLWJ1aWxkLnRzIiwgImJpbi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2Utdmlldy50cyIsICJiaW4vbGliL2dpdC9naXQtY2FuLWFjY2Vzcy1yZW1vdGUudHMiLCAiYmluL2xpYi9naXQvZ2l0LWVuc3VyZS1yZW1vdGUudHMiLCAiYmluL2xpYi9naXQvZ2l0LWN1cnJlbnQtYnJhbmNoLnRzIiwgImJpbi9saWIvZ2l0L2dpdC11cGRhdGUtYnJhbmNoLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtcmVwby50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLWRlcGxveS50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLXR5cGVzLnRzIiwgImJpbi9jb21tYW5kcy90cy50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLXN0YXJ0LXNlcnZlci50cyIsICJiaW4vY29tbWFuZHMvc3RhcnQudHMiLCAiYmluL2xpYi91bml0LXRlc3QvcnVuLXRlc3RzLnRzIiwgImJpbi9jb21tYW5kcy90ZXN0L3Rlc3QtcnVuLnRzIiwgImJpbi9jb21tYW5kcy9jbGVhbi9jbGVhbi1jYWNoZS50cyIsICJiaW4vbGliL3V0aWwvcGFja2FnZS1jYWNoZS1wYXRoLnRzIiwgImJpbi9jb21tYW5kcy9wci9wci1yZWxlYXNlLnRzIiwgImJpbi9tYWluLWdpbXAudHMiLCAiYmluL2xpYi91dGlsL2NvbmZpZy1lbnYudHMiLCAiYmluL2xpYi91dGlsL2RvdC1lbnYudHMiLCAiYmluL2xpYi91dGlsL3BhcnNlLXByb3BzLnRzIiwgImJpbi9saWIvcHJvbXB0L3Byb21wdC1vdmVycmlkZS1maWxlLnRzIiwgImJpbi9jb21tYW5kcy9lbnN1cmUtZGVwZW5kZW5jaWVzLnRzIiwgImJpbi9saWIvZXhlYy9leGVjLWluc3RhbGwudHMiLCAiYmluL2xpYi91dGlsL2Z1enp5LXNvdXJjZS50cyIsICJiaW4vbGliL3V0aWwvaXMtcGFja2FnZS1hdmFpbGFibGUudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbCiAgICAiZXhwb3J0IGNvbnN0IGNoYWxrID0ge1xuICBjeWFuOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlszNm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICByZWQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzMxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHllbGxvdzogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMzNtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JlZW46ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzMybSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJsdWU6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzM0bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIG1hZ2VudGE6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzM1bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGN5YW5CcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzk2bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHJlZEJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgeWVsbG93QnJpZ2h0OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls5M20ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBncmVlbkJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTJtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmx1ZUJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTRtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgbWFnZW50YUJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTVtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgd2hpdGVCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzk3bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGdyYXk6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzkwbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGdyZXk6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzkwbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHdoaXRlOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlszN20ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBibGFjazogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMzBtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmxhY2tCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzkwbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnQ3lhbjogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbNDZtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdSZWQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzQxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnWWVsbG93OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls0M20ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ0dyZWVuOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls0Mm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ0JsdWU6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzQ0bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnTWFnZW50YTogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbNDVtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdDeWFuQnJpZ2h0OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlsxMDZtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdSZWRCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ1llbGxvd0JyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMTAzbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnR3JlZW5CcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwMm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ0JsdWVCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwNG0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ01hZ2VudGFCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwNW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBjeWFuQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5Nm1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHJlZEJyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTFtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICB5ZWxsb3dCcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzkzbVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JlZW5CcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzkybVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmx1ZUJyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTRtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBtYWdlbnRhQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5NW1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHdoaXRlQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5N21cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGdyYXlCcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzkwbVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JleUJyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTBtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICB3aGl0ZUJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzM3bVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmxhY2tCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlszMG1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJsYWNrQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5MG1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG59O1xuIiwKICAgICJpbXBvcnQgeyBzdHJpcEluZGVudCB9IGZyb20gXCJjb21tb24tdGFnc1wiO1xuXG4vKipcbiAqIFRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFsIHRoYXQgZm9ybWF0cyBhIHN0cmluZyB0byBiZSBzdGFuZGFyZGl6ZWQgYW5kXG4gKiBhcHByb3ByaWF0ZSBmb3IgY29tbWFuZGVyIGRlc2NyaXB0aW9ucy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2NyaXB0aW9uKHN0cjogVGVtcGxhdGVTdHJpbmdzQXJyYXksIC4uLmFyZ3M6IGFueVtdKSB7XG4gIHJldHVybiBgJHtzdHJpcEluZGVudChzdHIsIC4uLmFyZ3MpfVxcblxcbmA7XG59XG4iLAogICAgIi8qKlxuICogSW50ZXJmYWNlIGZvciBkZWNsYXJpbmcgYSBnZW5lcmljIEpTT04gdmFsaWQgb2JqZWN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUpzb24ge1xuICBbeDogc3RyaW5nXTogc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IERhdGUgfCBJSnNvbiB8IElKc29uQXJyYXk7XG59XG5cbi8qKlxuICogSW50ZXJmYWNlIGZvciBkZWNsYXJpbmcgYSBnZW5lcmljIEpTT04gdmFsaWQgb2JqZWN0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSUpzb25UeXBlIHtcbiAgW3g6IHN0cmluZ106XG4gICAgfCBzdHJpbmdcbiAgICB8IG51bWJlclxuICAgIHwgYm9vbGVhblxuICAgIHwgRGF0ZVxuICAgIHwgSUpzb25UeXBlXG4gICAgfCBJSnNvbkFycmF5XG4gICAgfCB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogUGFydCBvZiB0aGUgSUpzb24gZGVjbGFyYXRpb24gdG8gbWFrZSBhIHZhbGlkIEpTT04gdHlwZS5cbiAqL1xuZXhwb3J0IHR5cGUgSUpzb25BcnJheSA9IChcbiAgfCBzdHJpbmdcbiAgfCBudW1iZXJcbiAgfCBib29sZWFuXG4gIHwgRGF0ZVxuICB8IElKc29uXG4gIHwgSUpzb25BcnJheVxuKVtdO1xuXG4vKipcbiAqIFRoaXMgaXMgdG8gaGVscCBlc3RhYmxpc2ggYSBjdXN0b20gY2hpbGQgcGF0dGVybiBmb3IgUmVhY3QuIFRoZSBwcm9wcyBmb3IgeW91ciByZWFjdCBjb21wb25lbnQgc2ltcGx5IG5lZWRzIHRvIGV4dGVuZFxuICogdGhpcyBpbnRlcmZhY2UuXG4gKi9cbmV4cG9ydCB0eXBlIElDaGlsZHJlbjxUIGV4dGVuZHMgb2JqZWN0PiA9IFQgJiB7XG4gIGNoaWxkcmVuPzogUGFydGlhbDxUPjtcbn07XG5cbi8qKlxuICogVGhpcyBsZXRzIHlvdSBkZWZpbmUgY2hpbGRyZW4gZm9yIGEgY29tcG9uZW50IGFuZCBmb3JjZXMgdGhlIGNoaWxkcmVuIHRvIGJlIGRlY2xhcmVkIGluIHRoZSBwcm9wcyBhcyBvcHBvc2VkIHRvXG4gKiBuZXN0aW5nIHRoZSBjaGlsZHJlbi5cbiAqL1xuZXhwb3J0IHR5cGUgSVByb3BzQ2hpbGRyZW48VCBleHRlbmRzIG9iamVjdD4gPSBUICYge1xuICBjaGlsZHJlbjogbmV2ZXI7XG59O1xuXG4vKipcbiAqIFRoaXMgbGV0cyB5b3UgZGVmaW5lIGNoaWxkcmVuIGZvciBhIGNvbXBvbmVudCBhbmQgZm9yY2VzIHRoZSBjaGlsZHJlbiB0byBiZSBuZXN0ZWQgYXMgb3Bwb3NlZCB0b1xuICogYmVpbmcgZGVjbGFyZWQgaW4gdGhlIHByb3BzLlxuICovXG5leHBvcnQgdHlwZSBJTmVzdGVkQ2hpbGRyZW48VD4gPSB7XG4gIGNoaWxkcmVuPzogVDtcbn07XG5cbi8qKlxuICogQSBzbGlnaHRseSBzdHJvbmdlciB0eXBlIGZvciBmb3IgaW5kaWNhdGluZyBcIkZ1bmN0aW9uXCIuIFRoaXMgaGFzIGdyZWF0ZXJcbiAqIGZsZXhpYmlsaXR5IHRvIGZpdCBpbnRvIGdlbmVyaWMgY2FsbGJhY2tzLlxuICovXG5leHBvcnQgdHlwZSBHZW5lcmljRnVuY3Rpb248VD4gPSAoLi4uYXJnczogYW55W10pID0+IFQ7XG5cbi8qKlxuICogVGhpcyB0eXBlIGlzIGludGVuZGVkIGZvciB0aGUgYXN5bmMgb3BlcmF0aW9uIG9mIGEgXCJmbG93XCIuIEEgZmxvdyBjYW4gaGF2ZVxuICogc2V2ZXJhbCB5aWVsZCBzdGF0ZW1lbnRzLCBidXQgYXJlIE5PVCBmb3IgdGhlIGludGVudGlvbiBvZiByZXR1cm5pbmcgdmFsdWVzXG4gKiB0byB0aGUgY2FsbGVyLCBidXQgcmF0aGVyIGZvciB0aGUgaW50ZW50IG9mIHBlcmZvcm1pbmcgYSBtb2J4IGFjdGlvbiB0aGF0IGhhc1xuICogYXN5bmNocm9ub3VzIHByb3BlcnRpZXMuXG4gKi9cbmV4cG9ydCB0eXBlIEZsb3dUeXBlID0gR2VuZXJhdG9yPHVua25vd24sIHVua25vd24sIHVua25vd24+IHwgdW5kZWZpbmVkO1xuXG4vKipcbiAqIFR5cGVndWFyZCBmb3Igc3RyaW5nc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFsOiBhbnkpOiB2YWwgaXMgc3RyaW5nIHtcbiAgcmV0dXJuIHZhbCAmJiB2YWwuY2hhckNvZGVBdCAhPT0gdm9pZCAwO1xufVxuXG4vKipcbiAqIFR5cGVndWFyZCBmb3IgbnVtYmVyc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1iZXIodmFsOiBhbnkpOiB2YWwgaXMgbnVtYmVyIHtcbiAgcmV0dXJuIHZhbCAhPT0gdm9pZCAwICYmIHZhbC50b0V4cG9uZW50aWFsO1xufVxuXG4vKipcbiAqIFR5cGVndWFyZCBmb3IgZnVuY3Rpb25zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbDogYW55KTogdmFsIGlzIEZ1bmN0aW9uIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLyoqXG4gKiBUeXBlZ2F1cmQgZm9yIGVuc3VyaW5nIGFuIGVsZW1lbnQgaXMgbm9uLW51bGwgYW5kIG5vdCB1bmRlZmluZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0RlZmluZWQ8VD4odmFsOiBUIHwgdW5kZWZpbmVkIHwgbnVsbCk6IHZhbCBpcyBUIHtcbiAgcmV0dXJuIHZhbCAhPT0gdm9pZCAwICYmIHZhbCAhPT0gbnVsbDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgaWYgaVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUcnV0aHk8VD4odmFsOiBUIHwgbnVsbCB8IHVuZGVmaW5lZCB8IGZhbHNlKTogdmFsIGlzIFQge1xuICByZXR1cm4gQm9vbGVhbih2YWwpO1xufVxuIiwKICAgICJpbXBvcnQgaW5xdWlyZXIgZnJvbSBcImlucXVpcmVyXCI7XG5pbXBvcnQgeyBzdHJpcEluZGVudCB9IGZyb20gXCJjb21tb24tdGFnc1wiO1xuXG4vKipcbiAqIENvbnZlbmllbmNlIHdyYXBwZXIgYXJvdW5kIGN1cnJlbnQgcHJvbXB0IGxpYnJhcnkgb2YgY2hvaWNlIHRvIHByZXNlbnQgYVxuICogY29uZmlybWF0aW9uIGRpYWxvZy5cbiAqXG4gKiBBcHBsaWVzIHN0cmlwSW5kZW50IHRvIHRoZSBpbnB1dCBtZXNzYWdlLlxuICpcbiAqIFJldHVybnMgdGhlIHRydWUgZmFsc2UgdmFsdWUgb2YgdGhlIHByb21wdC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb21wdENvbmZpcm0oXG4gIG1lc3NhZ2U6IHN0cmluZyxcbiAgZGVmYXVsdFZhbHVlPzogYm9vbGVhbixcbiAgb25Db25maXJtZWQ/OiAoKSA9PiB2b2lkXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgY29uc3QgeyByZXN1bHQgfSA9IGF3YWl0IGlucXVpcmVyLnByb21wdDx7XG4gICAgcmVzdWx0OiBib29sZWFuO1xuICB9PihbXG4gICAge1xuICAgICAgdHlwZTogXCJjb25maXJtXCIsXG4gICAgICBuYW1lOiBcInJlc3VsdFwiLFxuICAgICAgbWVzc2FnZTogc3RyaXBJbmRlbnRgJHttZXNzYWdlfWAsXG4gICAgICBkZWZhdWx0OiBkZWZhdWx0VmFsdWUsXG4gICAgfSxcbiAgXSk7XG5cbiAgLy8gV2hlbiB5ZXMvdHJ1ZSBpcyBzZWxlY3RlZCwgcnVuIHRoZSBvbkNvbmZpcm1lZCBjYWxsYmFja1xuICBpZiAocmVzdWx0KSBvbkNvbmZpcm1lZD8uKCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsCiAgICAiaW1wb3J0IGNoaWxkX3Byb2Nlc3MgZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcblxuZnVuY3Rpb24gaXNEZWZpbmVkPFQ+KHZhbDogYW55KTogdmFsIGlzIFQge1xuICByZXR1cm4gdmFsICE9PSB2b2lkIDAgJiYgdmFsICE9PSBudWxsO1xufVxuXG4vKipcbiAqIFR5cGUgZ3VhcmQgZm9yIGVycm9ycyB0aHJvd24gZnJvbSB0aGUgY2hpbGRfcHJvY2Vzcy5leGVjRmlsZVN5bmMgbWV0aG9kLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDaGlsZFByb2Nlc3NFcnJvcihcbiAgdmFsOiBhbnlcbik6IHZhbCBpcyBjaGlsZF9wcm9jZXNzLlNwYXduU3luY1JldHVybnM8QnVmZmVyPiB7XG4gIHJldHVybiAoXG4gICAgaXNEZWZpbmVkPGFueT4odmFsKSAmJlxuICAgIGlzRGVmaW5lZDxhbnk+KHZhbC5zdGF0dXMpICYmXG4gICAgaXNEZWZpbmVkPGFueT4odmFsLnN0ZGVycilcbiAgKTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgaXNDaGlsZFByb2Nlc3NFcnJvciB9IGZyb20gXCIuLi91dGlsL2lzLWNoaWxkLXByb2Nlc3MtZXJyb3IuanNcIjtcbmltcG9ydCB7IGlzRGVmaW5lZCB9IGZyb20gXCIuLi91dGlsL3R5cGVzLmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUV4ZWNTeW5jIHtcbiAgLyoqIFNldCB0byB0cnVlIHRvIHByZXZlbnQgZXJyb3IgbG9ncyAqL1xuICBzaWxlbnQ/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGEgY29tbWFuZCBvbiB0aGUgc2FtZSBzdGRpbyBhcyB0aGUgY3VycmVudCBwcm9jZXNzLiBUaGlzIGFic29yYnNcbiAqIGVycm9ycyBhbmQgYWxzbyBpZ25vcmVzIG51bGwvdW5kZWZpbmVkIGFyZ3VtZW50cy5cbiAqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGNvbW1hbmQgc3VjY2VlZGVkLlxuICovXG5hc3luYyBmdW5jdGlvbiBydW4oY29tbWFuZDogc3RyaW5nLCBhcmdzOiAoc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZClbXSA9IFtdKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gQnVuLnNwYXduU3luYyhbY29tbWFuZCwgLi4uYXJncy5maWx0ZXIoaXNEZWZpbmVkKV0sIHtcbiAgICAgIHN0ZGlvOiBbXCJpbmhlcml0XCIsIFwiaW5oZXJpdFwiLCBcImluaGVyaXRcIl0sXG4gICAgICBlbnY6IHByb2Nlc3MuZW52LFxuICAgIH0pO1xuXG4gICAgaWYgKHJlc3VsdC5leGl0Q29kZSAhPT0gMCkge1xuICAgICAgaWYgKCFydW4uc2lsZW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgYEVycm9yOiAke2NvbW1hbmR9ICR7YXJncy5qb2luKFwiIFwiKX0gZmFpbGVkIHdpdGggY29kZTogJHtcbiAgICAgICAgICAgIHJlc3VsdC5leGl0Q29kZVxuICAgICAgICAgIH1gXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKCkuc3RhY2spO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKCFydW4uc2lsZW50KSB7XG4gICAgICBpZiAoaXNDaGlsZFByb2Nlc3NFcnJvcihlcnIpKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgYEVycm9yOiAke2NvbW1hbmR9ICR7YXJncy5qb2luKFwiIFwiKX0gZmFpbGVkIHdpdGggY29kZTogJHtlcnIuc3RhdHVzfWBcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBEZWZhdWx0IHRoZSBleGVjdXRpb24gc3R5bGUuXG5ydW4uc2lsZW50ID0gZmFsc2U7XG5cbmV4cG9ydCBjb25zdCBleGVjU3luYzogdHlwZW9mIHJ1biAmIElFeGVjU3luYyA9IHJ1bjtcbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi9leGVjLXN5bmMuanNcIjtcblxubGV0IG1lbW9pemVkOiBbXCJidW5cIiwgXCJidW54XCJdIHwgW1wibnBtXCIsIFwibnB4XCJdIHwgbnVsbCA9IG51bGw7XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSBjb3JyZWN0IGFuZCBtb3N0IGlkZWFsIHBhY2thZ2UgbWFuYWdlciB0byB1c2UgZm9yIGEgY29tbWFuZC5cbiAqIEZpcnN0IHZhbHVlIHdpbGwgYmUgdGhlIHBhY2thZ2UgbWFuYWdlciBjb21tYW5kLCB0aGUgc2Vjb25kIHdpbGwgYmUgdGhlIGF1dG9cbiAqIGV4ZWN1dGlvbiBtYW5hZ2VyIG9mIHRoYXQgbWFuYWdlciBpZSAtIFtucG0sIG5weF1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhY2thZ2VNYW5hZ2VyKCkge1xuICBpZiAobWVtb2l6ZWQpIHJldHVybiBtZW1vaXplZDtcblxuICBpZiAoYXdhaXQgZXhlY1N5bmMoXCJidW5cIiwgW1wiLS12ZXJzaW9uXCJdKSkge1xuICAgIG1lbW9pemVkID0gW1wiYnVuXCIsIFwiYnVueFwiXTtcbiAgfSBlbHNlIHtcbiAgICBtZW1vaXplZCA9IFtcIm5wbVwiLCBcIm5weFwiXTtcbiAgfVxuXG4gIHJldHVybiBtZW1vaXplZDtcbn1cbiIsCiAgICAiLyoqXG4gKiBBIHNpbXBsZSB3YWl0IG1ldGhvZCBmb3IgYSBkdXJhdGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gd2FpdCh0OiBudW1iZXIpIHtcbiAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHNldFRpbWVvdXQociwgdCkpO1xufVxuIiwKICAgICJpbXBvcnQgKiBhcyBWaXRlIGZyb20gXCJ2aXRlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vdXRpbC9jaGFsay5qc1wiO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHZpdGUgY29uZmlnIHN1aXRhYmxlIGZvciBydW5uaW5nIGEgVml0ZS5idWlsZCBvcGVyYXRpb24uIFRoZVxuICogdmFyaW91cyBhdmFpbGFibGUgdGFyZ2V0cyBtb2RpZmllcyB0aGUgYmVoYXZpb3IgdG8gdGFyZ2V0IGRpZmZlcmVudCBmb2xkZXJzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYnVpbGRWaXRlQ29uZmlnKCkge1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJCdWlsZGluZyBWaXRlIGNvbmZpZyB1c2luZyBiYXNlOlwiLFxuICAgIGNoYWxrLnllbGxvd0JyaWdodEJvbGQocGF0aC5yZXNvbHZlKFwidml0ZS5jb25maWcudHNcIikpXG4gICk7XG4gIC8vIFN0YXJ0IHdpdGggdGhlIHRhcmdldCBwcm9qZWN0IGRlZmluZWQgY29uZmlndXJhdGlvblxuICBsZXQgY29uZmlnOiBWaXRlLlVzZXJDb25maWcgPSBhd2FpdCAoXG4gICAgYXdhaXQgaW1wb3J0KHBhdGgucmVzb2x2ZShcInZpdGUuY29uZmlnLnRzXCIpKVxuICApLmRlZmF1bHQoKTtcblxuICAvLyBJbXBvcnQgdGhlIHRhcmdldCBwcm9qZWN0J3MgdHNjb25maWcgc28gd2UgY2FuIGluY2x1ZGUgdGhlIHNhbWUgaW5jbHVzaW9uc1xuICAvLyB0aGUgVFMgY29tcGlsZXIgd291bGQgdXNlIGZvciB0aGUgd2F0Y2ggcHJvY2Vzcy5cbiAgY29uc3QgdHNjb25maWcgPSBhd2FpdCBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcuanNvblwiKSk7XG5cbiAgY29uZmlnID0ge1xuICAgIC4uLmNvbmZpZyxcbiAgICBsb2dMZXZlbDogXCJpbmZvXCIsXG4gICAgbW9kZTogXCJkZXZlbG9wbWVudFwiLFxuICAgIHJvb3Q6IHBhdGgucmVzb2x2ZShcImFwcC9jbGllbnRcIiksXG4gICAgY2xlYXJTY3JlZW46IHRydWUsXG4gICAgYnVpbGQ6IHtcbiAgICAgIC4uLmNvbmZpZy5idWlsZCxcbiAgICAgIGNzc0NvZGVTcGxpdDogdHJ1ZSxcbiAgICAgIG91dERpcjogcGF0aC5yZXNvbHZlKFwiYnVpbGQvY2xpZW50XCIpLFxuICAgICAgc291cmNlbWFwOiB0cnVlLFxuICAgICAgcm9sbHVwT3B0aW9uczoge1xuICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICBtYW51YWxDaHVua3M6IHVuZGVmaW5lZCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB3YXRjaDoge1xuICAgICAgICAuLi5jb25maWcuYnVpbGQ/LndhdGNoLFxuICAgICAgICBpbmNsdWRlOiBbXG4gICAgICAgICAgLi4uKChBcnJheS5pc0FycmF5KGNvbmZpZy5idWlsZD8ud2F0Y2g/LmluY2x1ZGUpXG4gICAgICAgICAgICA/IGNvbmZpZy5idWlsZD8ud2F0Y2g/LmluY2x1ZGVcbiAgICAgICAgICAgIDogW2NvbmZpZy5idWlsZD8ud2F0Y2g/LmluY2x1ZGVdKSB8fCBbXSksXG4gICAgICAgICAgLi4uKHRzY29uZmlnPy5pbmNsdWRlPy5tYXAoKGk6IHN0cmluZykgPT4gcGF0aC5yZXNvbHZlKGkpKSB8fCBbXSksXG4gICAgICAgICAgXCJ0c2NvbmZpZy5qc29uXCIsXG4gICAgICAgIF0uZmlsdGVyKEJvb2xlYW4pLFxuICAgICAgfSxcbiAgICAgIGVtcHR5T3V0RGlyOiB0cnVlLFxuICAgIH0sXG4gICAgcmVzb2x2ZToge1xuICAgICAgYWxpYXM6IHtcbiAgICAgICAgY29uZmlnOiBwYXRoLnJlc29sdmUoYGFwcC9jb25maWdgKSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfTtcblxuICByZXR1cm4gY29uZmlnO1xufVxuIiwKICAgICJpbXBvcnQgZGVlcG1lcmdlIGZyb20gXCJkZWVwbWVyZ2VcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzKCkge1xuICBjb25zdCBwYWNrYWdlSnNvbiA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuXG4gIHJldHVybiBkZWVwbWVyZ2U8UmVjb3JkPHN0cmluZywgc3RyaW5nPj4oXG4gICAgcGFja2FnZUpzb24uZGVwZW5kZW5jaWVzIHx8IHt9LFxuICAgIHBhY2thZ2VKc29uLnBlZXJEZXBlbmRlbmNpZXMgfHwge31cbiAgKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRhcmdldFByb2plY3RWZXJzaW9uKCkge1xuICBjb25zdCBwYWNrYWdlSnNvbiA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICByZXR1cm4gcGFja2FnZUpzb24udmVyc2lvbiB8fCBcIlwiO1xufVxuIiwKICAgICJpbXBvcnQgKiBhcyBWaXRlIGZyb20gXCJ2aXRlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgYnVpbGRWaXRlQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2J1aWxkLXZpdGUtY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzIH0gZnJvbSBcIi4uLy4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LWRlcGVuZGVuY2llcy5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgdGhlIGJ1bmRsaW5nIHByb2Nlc3MgZm9yIGRpc3RyaWJ1dGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKCkge1xuICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiA9XG4gICAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gfHwgKGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCkpO1xuXG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiU3RhcnRpbmcgVml0ZSBjbGllbnQgYnVpbGQuLi5cIikpO1xuICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiYXBwL2NsaWVudC9pbmRleC50c1wiKSkpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIlRyaWVkIHRvIHN0YXJ0IGRldmVsb3BtZW50IHByb2Nlc3MgZm9yIHRoZSBhcHAgY2xpZW50LCBidXQgbm8gZW50cnkgZmlsZSB3YXMgZm91bmQuXCJcbiAgICApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGJ1aWxkVml0ZUNvbmZpZygpO1xuXG4gIGNvbmZpZy5yb290ID0gcGF0aC5yZXNvbHZlKFwiYXBwL2NsaWVudFwiKTtcbiAgY29uZmlnLmJ1aWxkIS5vdXREaXIgPSBwYXRoLnJlc29sdmUoXCJidWlsZC9jbGllbnRcIik7XG5cbiAgY29uZmlnLmJ1aWxkIS5yb2xsdXBPcHRpb25zIS5leHRlcm5hbCA9IE9iamVjdC5rZXlzKFxuICAgIGF3YWl0IHRhcmdldFByb2plY3REZXBlbmRlbmNpZXMoKVxuICApO1xuXG4gIGF3YWl0IFZpdGUuYnVpbGQoY29uZmlnKTtcbiAgY29uc29sZS53YXJuKGNoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJWaXRlIGNsaWVudCBidWlsZCBwcm9jZXNzIHN0YXJ0ZWQuLi5cIikpO1xufVxuIiwKICAgICIvKipcbiAqIExpc3RlbnMgZm9yIHByb2Nlc3MgZXhpdCBzaWduYWxzIG9mIHZhcmlvdXMgdHlwZXMgYW5kIGZpcmVzIHRoZSBwcm92aWRlZFxuICogY2FsbGJhY2sgd2hlbiBpdCBoYXBwZW5zIHdpdGggc29tZSBlYXN5IHRvIGhhbmRsZSBkZXRhaWxzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlUHJvY2Vzc0V4aXQoXG4gIGNiOiAobWVzc2FnZTogc3RyaW5nLCBlcnI/OiBFcnJvciB8IHN0cmluZyB8IG51bWJlcikgPT4gUHJvbWlzZTx2b2lkPlxuKSB7XG4gIGNvbnN0IGhhbmRsZUV4aXQgPSAobWVzc2FnZTogc3RyaW5nKSA9PiAoZXJyPzogRXJyb3IgfCBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICBjYihtZXNzYWdlLCBlcnIpO1xuICAgIGlmIChlcnIpIHByb2Nlc3MuZXhpdCgxKTtcbiAgICBlbHNlIHByb2Nlc3MuZXhpdCgwKTtcbiAgfTtcblxuICAvLyBDYXRjaCB3aGVuIGFwcCBpcyBjbG9zaW5nXG4gIHByb2Nlc3Mub24oXCJleGl0XCIsIGhhbmRsZUV4aXQoXCJleGl0XCIpKTtcbiAgLy8gQ2F0Y2ggY3RybCtjIGV2ZW50XG4gIHByb2Nlc3Mub24oXCJTSUdJTlRcIiwgaGFuZGxlRXhpdChcIlNJR0lOVFwiKSk7XG4gIC8vIENhdGNoIFwia2lsbCBwaWRcIiAoZm9yIGV4YW1wbGU6IG5vZGVtb24gcmVzdGFydClcbiAgcHJvY2Vzcy5vbihcIlNJR1VTUjFcIiwgaGFuZGxlRXhpdChcIlNJR1VTUjFcIikpO1xuICBwcm9jZXNzLm9uKFwiU0lHVVNSMlwiLCBoYW5kbGVFeGl0KFwiU0lHVVNSMlwiKSk7XG4gIHByb2Nlc3Mub24oXCJTSUdURVJNXCIsIGhhbmRsZUV4aXQoXCJTSUdURVJNXCIpKTtcbiAgLy8gQ2F0Y2ggdW5jYXVnaHQgZXhjZXB0aW9uc1xuICBwcm9jZXNzLm9uKFwidW5jYXVnaHRFeGNlcHRpb25cIiwgaGFuZGxlRXhpdChcInVuY2F1Z2h0RXhjZXB0aW9uXCIpKTtcbn1cbiIsCiAgICAiY29uc3QgcXVldWU6IGFueVtdW10gPSBbXTtcbmxldCBxdWV1ZUlkOiBUaW1lciB8IG51bGwgPSBudWxsO1xuXG5mdW5jdGlvbiBzdGFydFF1ZXVlKCkge1xuICBpZiAocXVldWVJZCAhPT0gbnVsbCkgcmV0dXJuO1xuXG4gIHF1ZXVlSWQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSBxdWV1ZS5zaGlmdCgpO1xuICAgICAgaWYgKG1lc3NhZ2UpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5sb2coLi4ubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuICB9LCA0MDApO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSBzaW1wbGUgcXVldWUgZm9yIGxvZ2dpbmcgbWVzc2FnZXMgYXQgZ2l2ZW4gaW50ZXJ2YWxzIHdoaWNoIHByZXZlbnRzXG4gKiBzb21lIGxvZ2dpbmcgaW5maWdodGluZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gbG9nUXVldWUoLi4ubWVzc2FnZTogYW55W10pIHtcbiAgcXVldWUucHVzaChtZXNzYWdlKTtcbiAgc3RhcnRRdWV1ZSgpO1xufVxuIiwKICAgICJpbXBvcnQgYnVpbGRDbGllbnQgZnJvbSBcIi4vYnVpbGQtY2xpZW50LmpzXCI7XG5pbXBvcnQgY2hpbGRfcHJvY2VzcyBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCByZWFkbGluZSBmcm9tIFwicmVhZGxpbmVcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGdldFBhY2thZ2VNYW5hZ2VyIH0gZnJvbSBcIi4uLy4uLy4uL2V4ZWMvZ2V0LXBhY2thZ2UtbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgaGFuZGxlUHJvY2Vzc0V4aXQgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9oYW5kbGUtcHJvY2Vzcy1leGl0LmpzXCI7XG5pbXBvcnQgeyBsb2dRdWV1ZSB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2xvZy1xdWV1ZS5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG4vKipcbiAqIEVudHJ5IG1ldGhvZCBmb3IgdGhlIGFwcCBkZXYgc2VydmVyXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bihcbiAgbGlzdGVuZXI/OiAoY2hpbGQ6IGNoaWxkX3Byb2Nlc3MuQ2hpbGRQcm9jZXNzV2l0aG91dE51bGxTdHJlYW1zKSA9PiB2b2lkXG4pIHtcbiAgY29uc29sZS53YXJuKFxuICAgIFwiXFxuUnVubmluZyB0aGUgQXBwIHNlcnZlciBhdDogXCIsXG4gICAgY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChwYXRoLnJlc29sdmUoXCJhcHAvc2VydmVyXCIpKSxcbiAgICBcIlxcblwiXG4gICk7XG5cbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPVxuICAgIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OIHx8IChhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpKTtcbiAgcHJvY2Vzcy5lbnYuUkVTT1VSQ0VfUEFUSCA9XG4gICAgcHJvY2Vzcy5lbnYuUkVTT1VSQ0VfUEFUSCB8fCBwYXRoLnJlc29sdmUoXCJidWlsZC9jbGllbnRcIik7XG4gIGNvbnN0IHBhY2thZ2VNYW5hZ2VyID0gYXdhaXQgZ2V0UGFja2FnZU1hbmFnZXIoKTtcblxuICBpZiAocGFja2FnZU1hbmFnZXJbMF0gIT09IFwiYnVuXCIpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJDdXJyZW50bHkgb25seSBhbiBlbnZpcm9ubWVudCB3aXRoIGJ1biBpbnN0YWxsZWQgaXMgc3VwcG9ydGVkIGZvciB0aGlzIGNvbW1hbmQuXCJcbiAgICApO1xuICB9XG5cbiAgY29uc3QgY2hpbGRQcm9jZXNzID0gY2hpbGRfcHJvY2Vzcy5zcGF3bihwYWNrYWdlTWFuYWdlclswXSwgW1xuICAgIFwiLS13YXRjaFwiLFxuICAgIHBhdGgucmVzb2x2ZShcImFwcC9zZXJ2ZXIvaW5kZXgudHNcIiksXG4gIF0pO1xuXG4gIC8vIExpc3RlbiBmb3IgdGhlIGIga2V5IHRvIGJlIHByZXNzZWQuIFRoaXMgc2hvdWxkIHRyaWdnZXIgYSBkZW1vIGJ1aWxkIG9mIHRoZVxuICAvLyBhcHAgYW5kIG91dHB1dCB0byB0aGUgYnVpbGQgZm9sZGVyLiBUaGlzIGlzIG1lYW50IGZvciB0ZXN0aW5nIHRoZSBidWlsZCBhbmRcbiAgLy8gbm90aGluZyBlbHNlLlxuICBwcm9jZXNzLnN0ZGluLnNldFJhd01vZGU/Lih0cnVlKTtcbiAgcHJvY2Vzcy5zdGRpbi5yZXN1bWUoKTtcbiAgcHJvY2Vzcy5zdGRpbi5zZXRFbmNvZGluZyhcInV0ZjhcIik7XG4gIHJlYWRsaW5lLmVtaXRLZXlwcmVzc0V2ZW50cyhwcm9jZXNzLnN0ZGluKTtcbiAgbGV0IGJ1aWxkaW5nID0gZmFsc2U7XG5cbiAgcHJvY2Vzcy5zdGRpbi5vbihcImtleXByZXNzXCIsIGFzeW5jIChjaHVuaywga2V5KSA9PiB7XG4gICAgaWYgKGtleSAmJiBrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gXCJjXCIpIHtcbiAgICAgIGNoaWxkUHJvY2Vzcy5raWxsKCk7XG4gICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgfSBlbHNlIGlmIChrZXkgJiYga2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09IFwiZFwiKSB7XG4gICAgICBjaGlsZFByb2Nlc3Mua2lsbCgpO1xuICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgIH0gZWxzZSBpZiAoY2h1bmsudG9TdHJpbmcoKSA9PT0gXCJiXCIgfHwgY2h1bmsudG9TdHJpbmcoKSA9PT0gXCJCXCIpIHtcbiAgICAgIGlmIChidWlsZGluZykgcmV0dXJuO1xuICAgICAgYnVpbGRpbmcgPSB0cnVlO1xuICAgICAgYXdhaXQgYnVpbGRDbGllbnQoKTtcbiAgICAgIGJ1aWxkaW5nID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChjaHVuay50b1N0cmluZygpID09PSBcInFcIiB8fCBjaHVuay50b1N0cmluZygpID09PSBcIlFcIikge1xuICAgICAgY2hpbGRQcm9jZXNzLmtpbGwoKTtcblxuICAgICAgLy8gU3BlY2lhbCBxdWl0IGNvZGUgdG8gaW5kaWNhdGUgd2Ugd2FudCBhIHNwZWNpYWwgc2h1dGRvd24gcm91dGluZS5cbiAgICAgIGlmIChrZXkuc2hpZnQpIHtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEyMyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBNYWtlIHN1cmUgdGhlIHNlcnZlciBhcHBsaWNhdGlvbiByZWNlaXZlcyBpbnB1dCBmcm9tIHRoZSB0ZXJtaW5hbFxuICBwcm9jZXNzLnN0ZGluLnBpcGUoY2hpbGRQcm9jZXNzLnN0ZGluKTtcblxuICBpZiAobGlzdGVuZXIpIHtcbiAgICBsaXN0ZW5lcihjaGlsZFByb2Nlc3MpO1xuICB9IGVsc2Uge1xuICAgIGNoaWxkUHJvY2Vzcy5zdGRvdXQub24oXCJkYXRhXCIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBsb2dRdWV1ZShgJHtkYXRhLnRvU3RyaW5nKCkuc2xpY2UoMCwgLTEpfWApO1xuICAgIH0pO1xuXG4gICAgY2hpbGRQcm9jZXNzLnN0ZGVyci5vbihcImRhdGFcIiwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgIGxvZ1F1ZXVlKGAke2RhdGEudG9TdHJpbmcoKS5zbGljZSgwLCAtMSl9YCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBIYW5kbGUgd2hlbiB0aGUgcHJvY2VzcyBleGlzdHMgYnkgY2xlYW5pbmcgdXAgYW55IGNoaWxkIHByb2Nlc3NlcyBldGNcbiAgaGFuZGxlUHJvY2Vzc0V4aXQoYXN5bmMgKG1lc3NhZ2U6IHN0cmluZywgZXJyPzogRXJyb3IgfCBzdHJpbmcgfCBudW1iZXIpID0+IHtcbiAgICBjaGlsZFByb2Nlc3Mua2lsbCgpO1xuICAgIGNvbnNvbGUud2FybihcIkVYSVQgQlVJTEQgU0VSVkVSXCIpO1xuICAgIGNvbnNvbGUud2FybihjaGFsay5yZWRCcmlnaHRCb2xkKG1lc3NhZ2UpKTtcbiAgICBpZiAoZXJyICYmIGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oY2hhbGsucmVkQnJpZ2h0Qm9sZChlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpKTtcbiAgICB9XG4gICAgcHJvY2Vzcy5leGl0KDApO1xuICB9KTtcbn1cbiIsCiAgICAiaW1wb3J0IGJ1aWxkQ2xpZW50IGZyb20gXCIuLi8uLi9saWIvYnVpbGQvd2ViLWFwcC92aXRlL2J1aWxkLWNsaWVudC5qc1wiO1xuaW1wb3J0IHJ1bkFwcFNlcnZlciBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9ydW4tYXBwLXNlcnZlci5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3RWZXJzaW9uIH0gZnJvbSBcIi4uLy4uL2xpYi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC12ZXJzaW9uLmpzXCI7XG5cbi8qKlxuICogRW50cnkgcG9pbnQgZm9yIHRoaXMgc2NyaXB0XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBcImRldmVsb3BtZW50XCI7XG5cbiAgLy8gQnVpbGQgdGhlIGNsaWVudCBpbiB3YXRjaCBtb2RlLiBUaGUgQ2xpZW50IGJ1aWxkIElTIE9OTFkgbWFkZSBzbyB3ZSBjYW4gc2VlXG4gIC8vIHRoZSBnZW5lcmF0ZWQgZmlsZXMgdG8gYWlkIGluIGRlYnVnZ2luZy5cbiAgYnVpbGRDbGllbnQoKTtcblxuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIlN0YXJ0aW5nIGRldiBzZXJ2ZXIuLi5cIikpO1xuICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiA9IGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCk7XG4gIGF3YWl0IHJ1bkFwcFNlcnZlcigpO1xufVxuIiwKICAgICJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHVybCBmcm9tIFwidXJsXCI7XG5cbmNvbnN0IF9fZGlybmFtZSA9IHVybC5maWxlVVJMVG9QYXRoKG5ldyBVUkwoXCIuXCIsIGltcG9ydC5tZXRhLnVybCkpO1xuXG4vKipcbiAqIFRoaXMgcmV0dXJucyB0aGUgcGF0aCB0byB0aGUgcm9vdCBvZiB0aGUgZGV2b3BzIHByb2plY3QgKGluc3RhbGxhdGlvbiBvclxuICogZGV2ZWxvcG1lbnQgbG9jYXRpb24pXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZXZvcHNQcm9qZWN0UGF0aCgpIHtcbiAgY29uc3QgaXNEaXN0ID0gcGF0aC5iYXNlbmFtZShwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uXCIpKSA9PT0gXCJkaXN0XCI7XG4gIGlmIChpc0Rpc3QpIHJldHVybiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uLy4uL1wiKTtcbiAgcmV0dXJuIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi4vLi4vLi4vXCIpO1xufVxuIiwKICAgICJpbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgZ2V0UGFja2FnZU1hbmFnZXIgfSBmcm9tIFwiLi9nZXQtcGFja2FnZS1tYW5hZ2VyLmpzXCI7XG5cbi8qKlxuICogRXhlY3V0ZXMgYW4gYG5wbSBydW4gPGNvbW1hbmQ+YCBpbiB0aGUgY3VycmVudCBjb250ZXh0LlxuICpcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY29tbWFuZCBzdWNjZWVkZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjU2NyaXB0KFxuICBjb21tYW5kOiBzdHJpbmcsXG4gIGFyZ3M6IChzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsKVtdID0gW11cbikge1xuICBjb25zdCBtYW5hZ2VyID0gYXdhaXQgZ2V0UGFja2FnZU1hbmFnZXIoKTtcblxuICByZXR1cm4gZXhlY1N5bmMobWFuYWdlclswXSwgW1xuICAgIFwicnVuXCIsXG4gICAgY29tbWFuZCxcbiAgICBhcmdzLmxlbmd0aCA+IDAgJiYgYXJnc1swXSAhPT0gXCItLVwiID8gXCItLVwiIDogdm9pZCAwLFxuICAgIC4uLmFyZ3MsXG4gIF0pO1xufVxuIiwKICAgICJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGRldm9wc1Byb2plY3RQYXRoIH0gZnJvbSBcIi4uL2xpYi9kZXZvcHMtcHJvamVjdC9kZXZvcHMtcHJvamVjdC1wYXRoLmpzXCI7XG5pbXBvcnQgeyBleGVjU2NyaXB0IH0gZnJvbSBcIi4uL2xpYi9leGVjL2V4ZWMtc2NyaXB0LmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0VmVyc2lvbiB9IGZyb20gXCIuLi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG4vKipcbiAqIFRoaXMgcnVucyBzdG9yeWJvb2sgaW4gdGhpcyBjb250ZXh0IG9uIGJlaGFsZiBvZiB0aGUgcHJvamVjdCB0aGUgZGV2b3BzIGlzXG4gKiBpbnN0YWxsZWQgd2l0aGluLlxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oXG4gIGJ1aWxkOiBzdHJpbmcsXG4gIGluY2x1ZGU6IHN0cmluZ1tdLFxuICAuLi5fYXJnczogYW55W11cbikge1xuICBjb25zdCBQUk9KRUNUX1JPT1QgPSBwYXRoLnJlc29sdmUoXCIuXCIpO1xuICBwcm9jZXNzLmVudi5QUk9KRUNUX1JPT1QgPSBQUk9KRUNUX1JPT1Q7XG4gIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OID0gYXdhaXQgdGFyZ2V0UHJvamVjdFZlcnNpb24oKTtcbiAgY29uc3Qgc3Rvcnlib29rQ29uZmlnUGF0aCA9IHBhdGgucmVzb2x2ZShcIi5zdG9yeWJvb2tcIik7XG4gIC8vIFJ1biB0aGlzIHBhY2thZ2UncyBzdG9yeWJvb2sgc2NyaXB0IGNvbW1hbmQuXG4gIGNvbnN0IHJvb3RQYXRoID0gYXdhaXQgZGV2b3BzUHJvamVjdFBhdGgoKTtcbiAgcHJvY2Vzcy5jaGRpcihyb290UGF0aCk7XG5cbiAgLy8gU2V0IHVwIGFuIGVudmlyb25tZW50IHRoYXQgd2lsbCBiZSBwcm9jZXNzZWQgaW4gdGhlIG1haW4uanMgb2Ygc3Rvcnl5Ym9va1xuICAvLyBjb25maWcuIFRoaXMgd2lsbCBjYXVzZSBhbGwgc3BlY2lmaWVkIG1vZHVsZXMgdG8gYmUgbG9va2VkIGZvciB3aGVuXG4gIC8vIGdhdGhlcmluZyBzdG9yaWVzIHRvIGluY2x1ZGUgaW4gdGhlIGJ1aWxkLlxuICBpZiAoaW5jbHVkZSAmJiBpbmNsdWRlLmxlbmd0aCA+IDApIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX01PRFVMRVNfU1RPUklFUyA9IGluY2x1ZGUuam9pbihcIixcIik7XG4gIH1cblxuICBpZiAoYnVpbGQgPT09IFwiYnVpbGRcIikge1xuICAgIGlmIChcbiAgICAgICFleGVjU2NyaXB0KFwic3Rvcnlib29rXCIsIFtcbiAgICAgICAgXCJidWlsZFwiLFxuICAgICAgICBcIi1jXCIsXG4gICAgICAgIHN0b3J5Ym9va0NvbmZpZ1BhdGgsXG4gICAgICAgIFwiLW9cIixcbiAgICAgICAgYFwiJHtwYXRoLnJlc29sdmUoUFJPSkVDVF9ST09ULCBcInN0b3J5Ym9vay1zdGF0aWNcIil9XCJgLFxuICAgICAgXSlcbiAgICApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoY2hhbGsucmVkQnJpZ2h0Qm9sZChcIkZhaWxlZCB0byBidWlsZCBzdG9yeWJvb2tcIikpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoXG4gICAgICAhZXhlY1NjcmlwdChcInN0b3J5Ym9va1wiLCBbXG4gICAgICAgIFwiZGV2XCIsXG4gICAgICAgIFwiLS1uby12ZXJzaW9uLXVwZGF0ZXNcIixcbiAgICAgICAgXCItcFwiLFxuICAgICAgICBwcm9jZXNzLmVudi5QT1JUIHx8IFwiNjAwNlwiLFxuICAgICAgICBcIi1jXCIsXG4gICAgICAgIGBcIiR7c3Rvcnlib29rQ29uZmlnUGF0aH1cImAsXG4gICAgICBdKVxuICAgICkge1xuICAgICAgY29uc29sZS5lcnJvcihjaGFsay5yZWRCcmlnaHRCb2xkKFwiRmFpbGVkIHRvIHJ1biBzdG9yeWJvb2tcIikpO1xuICAgIH1cbiAgfVxufVxuIiwKICAgICIndXNlIHN0cmljdCc7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5cbmxldCBpc0RvY2tlcjtcblxuZnVuY3Rpb24gaGFzRG9ja2VyRW52KCkge1xuXHR0cnkge1xuXHRcdGZzLnN0YXRTeW5jKCcvLmRvY2tlcmVudicpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9IGNhdGNoIChfKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGhhc0RvY2tlckNHcm91cCgpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gZnMucmVhZEZpbGVTeW5jKCcvcHJvYy9zZWxmL2Nncm91cCcsICd1dGY4JykuaW5jbHVkZXMoJ2RvY2tlcicpO1xuXHR9IGNhdGNoIChfKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gKCkgPT4ge1xuXHRpZiAoaXNEb2NrZXIgPT09IHVuZGVmaW5lZCkge1xuXHRcdGlzRG9ja2VyID0gaGFzRG9ja2VyRW52KCkgfHwgaGFzRG9ja2VyQ0dyb3VwKCk7XG5cdH1cblxuXHRyZXR1cm4gaXNEb2NrZXI7XG59O1xuIiwKICAgICIndXNlIHN0cmljdCc7XG5jb25zdCBvcyA9IHJlcXVpcmUoJ29zJyk7XG5jb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCBpc0RvY2tlciA9IHJlcXVpcmUoJ2lzLWRvY2tlcicpO1xuXG5jb25zdCBpc1dzbCA9ICgpID0+IHtcblx0aWYgKHByb2Nlc3MucGxhdGZvcm0gIT09ICdsaW51eCcpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRpZiAob3MucmVsZWFzZSgpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21pY3Jvc29mdCcpKSB7XG5cdFx0aWYgKGlzRG9ja2VyKCkpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHRyeSB7XG5cdFx0cmV0dXJuIGZzLnJlYWRGaWxlU3luYygnL3Byb2MvdmVyc2lvbicsICd1dGY4JykudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbWljcm9zb2Z0JykgP1xuXHRcdFx0IWlzRG9ja2VyKCkgOiBmYWxzZTtcblx0fSBjYXRjaCAoXykge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcblxuaWYgKHByb2Nlc3MuZW52Ll9fSVNfV1NMX1RFU1RfXykge1xuXHRtb2R1bGUuZXhwb3J0cyA9IGlzV3NsO1xufSBlbHNlIHtcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1dzbCgpO1xufVxuIiwKICAgICIndXNlIHN0cmljdCc7XG5tb2R1bGUuZXhwb3J0cyA9IChvYmplY3QsIHByb3BlcnR5TmFtZSwgZm4pID0+IHtcblx0Y29uc3QgZGVmaW5lID0gdmFsdWUgPT4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwgcHJvcGVydHlOYW1lLCB7dmFsdWUsIGVudW1lcmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlfSk7XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iamVjdCwgcHJvcGVydHlOYW1lLCB7XG5cdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0Z2V0KCkge1xuXHRcdFx0Y29uc3QgcmVzdWx0ID0gZm4oKTtcblx0XHRcdGRlZmluZShyZXN1bHQpO1xuXHRcdFx0cmV0dXJuIHJlc3VsdDtcblx0XHR9LFxuXHRcdHNldCh2YWx1ZSkge1xuXHRcdFx0ZGVmaW5lKHZhbHVlKTtcblx0XHR9XG5cdH0pO1xuXG5cdHJldHVybiBvYmplY3Q7XG59O1xuIiwKICAgICJjb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgY2hpbGRQcm9jZXNzID0gcmVxdWlyZSgnY2hpbGRfcHJvY2VzcycpO1xuY29uc3Qge3Byb21pc2VzOiBmcywgY29uc3RhbnRzOiBmc0NvbnN0YW50c30gPSByZXF1aXJlKCdmcycpO1xuY29uc3QgaXNXc2wgPSByZXF1aXJlKCdpcy13c2wnKTtcbmNvbnN0IGlzRG9ja2VyID0gcmVxdWlyZSgnaXMtZG9ja2VyJyk7XG5jb25zdCBkZWZpbmVMYXp5UHJvcGVydHkgPSByZXF1aXJlKCdkZWZpbmUtbGF6eS1wcm9wJyk7XG5cbi8vIFBhdGggdG8gaW5jbHVkZWQgYHhkZy1vcGVuYC5cbmNvbnN0IGxvY2FsWGRnT3BlblBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAneGRnLW9wZW4nKTtcblxuY29uc3Qge3BsYXRmb3JtLCBhcmNofSA9IHByb2Nlc3M7XG5cbi8vIFBvZG1hbiBkZXRlY3Rpb25cbmNvbnN0IGhhc0NvbnRhaW5lckVudiA9ICgpID0+IHtcblx0dHJ5IHtcblx0XHRmcy5zdGF0U3luYygnL3J1bi8uY29udGFpbmVyZW52Jyk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gY2F0Y2gge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcblxubGV0IGNhY2hlZFJlc3VsdDtcbmZ1bmN0aW9uIGlzSW5zaWRlQ29udGFpbmVyKCkge1xuXHRpZiAoY2FjaGVkUmVzdWx0ID09PSB1bmRlZmluZWQpIHtcblx0XHRjYWNoZWRSZXN1bHQgPSBoYXNDb250YWluZXJFbnYoKSB8fCBpc0RvY2tlcigpO1xuXHR9XG5cblx0cmV0dXJuIGNhY2hlZFJlc3VsdDtcbn1cblxuLyoqXG5HZXQgdGhlIG1vdW50IHBvaW50IGZvciBmaXhlZCBkcml2ZXMgaW4gV1NMLlxuXG5AaW5uZXJcbkByZXR1cm5zIHtzdHJpbmd9IFRoZSBtb3VudCBwb2ludC5cbiovXG5jb25zdCBnZXRXc2xEcml2ZXNNb3VudFBvaW50ID0gKCgpID0+IHtcblx0Ly8gRGVmYXVsdCB2YWx1ZSBmb3IgXCJyb290XCIgcGFyYW1cblx0Ly8gYWNjb3JkaW5nIHRvIGh0dHBzOi8vZG9jcy5taWNyb3NvZnQuY29tL2VuLXVzL3dpbmRvd3Mvd3NsL3dzbC1jb25maWdcblx0Y29uc3QgZGVmYXVsdE1vdW50UG9pbnQgPSAnL21udC8nO1xuXG5cdGxldCBtb3VudFBvaW50O1xuXG5cdHJldHVybiBhc3luYyBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKG1vdW50UG9pbnQpIHtcblx0XHRcdC8vIFJldHVybiBtZW1vaXplZCBtb3VudCBwb2ludCB2YWx1ZVxuXHRcdFx0cmV0dXJuIG1vdW50UG9pbnQ7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29uZmlnRmlsZVBhdGggPSAnL2V0Yy93c2wuY29uZic7XG5cblx0XHRsZXQgaXNDb25maWdGaWxlRXhpc3RzID0gZmFsc2U7XG5cdFx0dHJ5IHtcblx0XHRcdGF3YWl0IGZzLmFjY2Vzcyhjb25maWdGaWxlUGF0aCwgZnNDb25zdGFudHMuRl9PSyk7XG5cdFx0XHRpc0NvbmZpZ0ZpbGVFeGlzdHMgPSB0cnVlO1xuXHRcdH0gY2F0Y2gge31cblxuXHRcdGlmICghaXNDb25maWdGaWxlRXhpc3RzKSB7XG5cdFx0XHRyZXR1cm4gZGVmYXVsdE1vdW50UG9pbnQ7XG5cdFx0fVxuXG5cdFx0Y29uc3QgY29uZmlnQ29udGVudCA9IGF3YWl0IGZzLnJlYWRGaWxlKGNvbmZpZ0ZpbGVQYXRoLCB7ZW5jb2Rpbmc6ICd1dGY4J30pO1xuXHRcdGNvbnN0IGNvbmZpZ01vdW50UG9pbnQgPSAvKD88ISMuKilyb290XFxzKj1cXHMqKD88bW91bnRQb2ludD4uKikvZy5leGVjKGNvbmZpZ0NvbnRlbnQpO1xuXG5cdFx0aWYgKCFjb25maWdNb3VudFBvaW50KSB7XG5cdFx0XHRyZXR1cm4gZGVmYXVsdE1vdW50UG9pbnQ7XG5cdFx0fVxuXG5cdFx0bW91bnRQb2ludCA9IGNvbmZpZ01vdW50UG9pbnQuZ3JvdXBzLm1vdW50UG9pbnQudHJpbSgpO1xuXHRcdG1vdW50UG9pbnQgPSBtb3VudFBvaW50LmVuZHNXaXRoKCcvJykgPyBtb3VudFBvaW50IDogYCR7bW91bnRQb2ludH0vYDtcblxuXHRcdHJldHVybiBtb3VudFBvaW50O1xuXHR9O1xufSkoKTtcblxuY29uc3QgcFRyeUVhY2ggPSBhc3luYyAoYXJyYXksIG1hcHBlcikgPT4ge1xuXHRsZXQgbGF0ZXN0RXJyb3I7XG5cblx0Zm9yIChjb25zdCBpdGVtIG9mIGFycmF5KSB7XG5cdFx0dHJ5IHtcblx0XHRcdHJldHVybiBhd2FpdCBtYXBwZXIoaXRlbSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tYXdhaXQtaW4tbG9vcFxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRsYXRlc3RFcnJvciA9IGVycm9yO1xuXHRcdH1cblx0fVxuXG5cdHRocm93IGxhdGVzdEVycm9yO1xufTtcblxuY29uc3QgYmFzZU9wZW4gPSBhc3luYyBvcHRpb25zID0+IHtcblx0b3B0aW9ucyA9IHtcblx0XHR3YWl0OiBmYWxzZSxcblx0XHRiYWNrZ3JvdW5kOiBmYWxzZSxcblx0XHRuZXdJbnN0YW5jZTogZmFsc2UsXG5cdFx0YWxsb3dOb256ZXJvRXhpdENvZGU6IGZhbHNlLFxuXHRcdC4uLm9wdGlvbnNcblx0fTtcblxuXHRpZiAoQXJyYXkuaXNBcnJheShvcHRpb25zLmFwcCkpIHtcblx0XHRyZXR1cm4gcFRyeUVhY2gob3B0aW9ucy5hcHAsIHNpbmdsZUFwcCA9PiBiYXNlT3Blbih7XG5cdFx0XHQuLi5vcHRpb25zLFxuXHRcdFx0YXBwOiBzaW5nbGVBcHBcblx0XHR9KSk7XG5cdH1cblxuXHRsZXQge25hbWU6IGFwcCwgYXJndW1lbnRzOiBhcHBBcmd1bWVudHMgPSBbXX0gPSBvcHRpb25zLmFwcCB8fCB7fTtcblx0YXBwQXJndW1lbnRzID0gWy4uLmFwcEFyZ3VtZW50c107XG5cblx0aWYgKEFycmF5LmlzQXJyYXkoYXBwKSkge1xuXHRcdHJldHVybiBwVHJ5RWFjaChhcHAsIGFwcE5hbWUgPT4gYmFzZU9wZW4oe1xuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdGFwcDoge1xuXHRcdFx0XHRuYW1lOiBhcHBOYW1lLFxuXHRcdFx0XHRhcmd1bWVudHM6IGFwcEFyZ3VtZW50c1xuXHRcdFx0fVxuXHRcdH0pKTtcblx0fVxuXG5cdGxldCBjb21tYW5kO1xuXHRjb25zdCBjbGlBcmd1bWVudHMgPSBbXTtcblx0Y29uc3QgY2hpbGRQcm9jZXNzT3B0aW9ucyA9IHt9O1xuXG5cdGlmIChwbGF0Zm9ybSA9PT0gJ2RhcndpbicpIHtcblx0XHRjb21tYW5kID0gJ29wZW4nO1xuXG5cdFx0aWYgKG9wdGlvbnMud2FpdCkge1xuXHRcdFx0Y2xpQXJndW1lbnRzLnB1c2goJy0td2FpdC1hcHBzJyk7XG5cdFx0fVxuXG5cdFx0aWYgKG9wdGlvbnMuYmFja2dyb3VuZCkge1xuXHRcdFx0Y2xpQXJndW1lbnRzLnB1c2goJy0tYmFja2dyb3VuZCcpO1xuXHRcdH1cblxuXHRcdGlmIChvcHRpb25zLm5ld0luc3RhbmNlKSB7XG5cdFx0XHRjbGlBcmd1bWVudHMucHVzaCgnLS1uZXcnKTtcblx0XHR9XG5cblx0XHRpZiAoYXBwKSB7XG5cdFx0XHRjbGlBcmd1bWVudHMucHVzaCgnLWEnLCBhcHApO1xuXHRcdH1cblx0fSBlbHNlIGlmIChwbGF0Zm9ybSA9PT0gJ3dpbjMyJyB8fCAoaXNXc2wgJiYgIWlzSW5zaWRlQ29udGFpbmVyKCkgJiYgIWFwcCkpIHtcblx0XHRjb25zdCBtb3VudFBvaW50ID0gYXdhaXQgZ2V0V3NsRHJpdmVzTW91bnRQb2ludCgpO1xuXG5cdFx0Y29tbWFuZCA9IGlzV3NsID9cblx0XHRcdGAke21vdW50UG9pbnR9Yy9XaW5kb3dzL1N5c3RlbTMyL1dpbmRvd3NQb3dlclNoZWxsL3YxLjAvcG93ZXJzaGVsbC5leGVgIDpcblx0XHRcdGAke3Byb2Nlc3MuZW52LlNZU1RFTVJPT1R9XFxcXFN5c3RlbTMyXFxcXFdpbmRvd3NQb3dlclNoZWxsXFxcXHYxLjBcXFxccG93ZXJzaGVsbGA7XG5cblx0XHRjbGlBcmd1bWVudHMucHVzaChcblx0XHRcdCctTm9Qcm9maWxlJyxcblx0XHRcdCctTm9uSW50ZXJhY3RpdmUnLFxuXHRcdFx0J+KAk0V4ZWN1dGlvblBvbGljeScsXG5cdFx0XHQnQnlwYXNzJyxcblx0XHRcdCctRW5jb2RlZENvbW1hbmQnXG5cdFx0KTtcblxuXHRcdGlmICghaXNXc2wpIHtcblx0XHRcdGNoaWxkUHJvY2Vzc09wdGlvbnMud2luZG93c1ZlcmJhdGltQXJndW1lbnRzID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRjb25zdCBlbmNvZGVkQXJndW1lbnRzID0gWydTdGFydCddO1xuXG5cdFx0aWYgKG9wdGlvbnMud2FpdCkge1xuXHRcdFx0ZW5jb2RlZEFyZ3VtZW50cy5wdXNoKCctV2FpdCcpO1xuXHRcdH1cblxuXHRcdGlmIChhcHApIHtcblx0XHRcdC8vIERvdWJsZSBxdW90ZSB3aXRoIGRvdWJsZSBxdW90ZXMgdG8gZW5zdXJlIHRoZSBpbm5lciBxdW90ZXMgYXJlIHBhc3NlZCB0aHJvdWdoLlxuXHRcdFx0Ly8gSW5uZXIgcXVvdGVzIGFyZSBkZWxpbWl0ZWQgZm9yIFBvd2VyU2hlbGwgaW50ZXJwcmV0YXRpb24gd2l0aCBiYWNrdGlja3MuXG5cdFx0XHRlbmNvZGVkQXJndW1lbnRzLnB1c2goYFwiXFxgXCIke2FwcH1cXGBcIlwiYCwgJy1Bcmd1bWVudExpc3QnKTtcblx0XHRcdGlmIChvcHRpb25zLnRhcmdldCkge1xuXHRcdFx0XHRhcHBBcmd1bWVudHMudW5zaGlmdChvcHRpb25zLnRhcmdldCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmIChvcHRpb25zLnRhcmdldCkge1xuXHRcdFx0ZW5jb2RlZEFyZ3VtZW50cy5wdXNoKGBcIiR7b3B0aW9ucy50YXJnZXR9XCJgKTtcblx0XHR9XG5cblx0XHRpZiAoYXBwQXJndW1lbnRzLmxlbmd0aCA+IDApIHtcblx0XHRcdGFwcEFyZ3VtZW50cyA9IGFwcEFyZ3VtZW50cy5tYXAoYXJnID0+IGBcIlxcYFwiJHthcmd9XFxgXCJcImApO1xuXHRcdFx0ZW5jb2RlZEFyZ3VtZW50cy5wdXNoKGFwcEFyZ3VtZW50cy5qb2luKCcsJykpO1xuXHRcdH1cblxuXHRcdC8vIFVzaW5nIEJhc2U2NC1lbmNvZGVkIGNvbW1hbmQsIGFjY2VwdGVkIGJ5IFBvd2VyU2hlbGwsIHRvIGFsbG93IHNwZWNpYWwgY2hhcmFjdGVycy5cblx0XHRvcHRpb25zLnRhcmdldCA9IEJ1ZmZlci5mcm9tKGVuY29kZWRBcmd1bWVudHMuam9pbignICcpLCAndXRmMTZsZScpLnRvU3RyaW5nKCdiYXNlNjQnKTtcblx0fSBlbHNlIHtcblx0XHRpZiAoYXBwKSB7XG5cdFx0XHRjb21tYW5kID0gYXBwO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBXaGVuIGJ1bmRsZWQgYnkgV2VicGFjaywgdGhlcmUncyBubyBhY3R1YWwgcGFja2FnZSBmaWxlIHBhdGggYW5kIG5vIGxvY2FsIGB4ZGctb3BlbmAuXG5cdFx0XHRjb25zdCBpc0J1bmRsZWQgPSAhX19kaXJuYW1lIHx8IF9fZGlybmFtZSA9PT0gJy8nO1xuXG5cdFx0XHQvLyBDaGVjayBpZiBsb2NhbCBgeGRnLW9wZW5gIGV4aXN0cyBhbmQgaXMgZXhlY3V0YWJsZS5cblx0XHRcdGxldCBleGVMb2NhbFhkZ09wZW4gPSBmYWxzZTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGF3YWl0IGZzLmFjY2Vzcyhsb2NhbFhkZ09wZW5QYXRoLCBmc0NvbnN0YW50cy5YX09LKTtcblx0XHRcdFx0ZXhlTG9jYWxYZGdPcGVuID0gdHJ1ZTtcblx0XHRcdH0gY2F0Y2gge31cblxuXHRcdFx0Y29uc3QgdXNlU3lzdGVtWGRnT3BlbiA9IHByb2Nlc3MudmVyc2lvbnMuZWxlY3Ryb24gfHxcblx0XHRcdFx0cGxhdGZvcm0gPT09ICdhbmRyb2lkJyB8fCBpc0J1bmRsZWQgfHwgIWV4ZUxvY2FsWGRnT3Blbjtcblx0XHRcdGNvbW1hbmQgPSB1c2VTeXN0ZW1YZGdPcGVuID8gJ3hkZy1vcGVuJyA6IGxvY2FsWGRnT3BlblBhdGg7XG5cdFx0fVxuXG5cdFx0aWYgKGFwcEFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRjbGlBcmd1bWVudHMucHVzaCguLi5hcHBBcmd1bWVudHMpO1xuXHRcdH1cblxuXHRcdGlmICghb3B0aW9ucy53YWl0KSB7XG5cdFx0XHQvLyBgeGRnLW9wZW5gIHdpbGwgYmxvY2sgdGhlIHByb2Nlc3MgdW5sZXNzIHN0ZGlvIGlzIGlnbm9yZWRcblx0XHRcdC8vIGFuZCBpdCdzIGRldGFjaGVkIGZyb20gdGhlIHBhcmVudCBldmVuIGlmIGl0J3MgdW5yZWYnZC5cblx0XHRcdGNoaWxkUHJvY2Vzc09wdGlvbnMuc3RkaW8gPSAnaWdub3JlJztcblx0XHRcdGNoaWxkUHJvY2Vzc09wdGlvbnMuZGV0YWNoZWQgPSB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdGlmIChvcHRpb25zLnRhcmdldCkge1xuXHRcdGNsaUFyZ3VtZW50cy5wdXNoKG9wdGlvbnMudGFyZ2V0KTtcblx0fVxuXG5cdGlmIChwbGF0Zm9ybSA9PT0gJ2RhcndpbicgJiYgYXBwQXJndW1lbnRzLmxlbmd0aCA+IDApIHtcblx0XHRjbGlBcmd1bWVudHMucHVzaCgnLS1hcmdzJywgLi4uYXBwQXJndW1lbnRzKTtcblx0fVxuXG5cdGNvbnN0IHN1YnByb2Nlc3MgPSBjaGlsZFByb2Nlc3Muc3Bhd24oY29tbWFuZCwgY2xpQXJndW1lbnRzLCBjaGlsZFByb2Nlc3NPcHRpb25zKTtcblxuXHRpZiAob3B0aW9ucy53YWl0KSB7XG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcblx0XHRcdHN1YnByb2Nlc3Mub25jZSgnZXJyb3InLCByZWplY3QpO1xuXG5cdFx0XHRzdWJwcm9jZXNzLm9uY2UoJ2Nsb3NlJywgZXhpdENvZGUgPT4ge1xuXHRcdFx0XHRpZiAoIW9wdGlvbnMuYWxsb3dOb256ZXJvRXhpdENvZGUgJiYgZXhpdENvZGUgPiAwKSB7XG5cdFx0XHRcdFx0cmVqZWN0KG5ldyBFcnJvcihgRXhpdGVkIHdpdGggY29kZSAke2V4aXRDb2RlfWApKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXNvbHZlKHN1YnByb2Nlc3MpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cblxuXHRzdWJwcm9jZXNzLnVucmVmKCk7XG5cblx0cmV0dXJuIHN1YnByb2Nlc3M7XG59O1xuXG5jb25zdCBvcGVuID0gKHRhcmdldCwgb3B0aW9ucykgPT4ge1xuXHRpZiAodHlwZW9mIHRhcmdldCAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIGB0YXJnZXRgJyk7XG5cdH1cblxuXHRyZXR1cm4gYmFzZU9wZW4oe1xuXHRcdC4uLm9wdGlvbnMsXG5cdFx0dGFyZ2V0XG5cdH0pO1xufTtcblxuY29uc3Qgb3BlbkFwcCA9IChuYW1lLCBvcHRpb25zKSA9PiB7XG5cdGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcblx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCdFeHBlY3RlZCBhIGBuYW1lYCcpO1xuXHR9XG5cblx0Y29uc3Qge2FyZ3VtZW50czogYXBwQXJndW1lbnRzID0gW119ID0gb3B0aW9ucyB8fCB7fTtcblx0aWYgKGFwcEFyZ3VtZW50cyAhPT0gdW5kZWZpbmVkICYmIGFwcEFyZ3VtZW50cyAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheShhcHBBcmd1bWVudHMpKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYGFwcEFyZ3VtZW50c2AgYXMgQXJyYXkgdHlwZScpO1xuXHR9XG5cblx0cmV0dXJuIGJhc2VPcGVuKHtcblx0XHQuLi5vcHRpb25zLFxuXHRcdGFwcDoge1xuXHRcdFx0bmFtZSxcblx0XHRcdGFyZ3VtZW50czogYXBwQXJndW1lbnRzXG5cdFx0fVxuXHR9KTtcbn07XG5cbmZ1bmN0aW9uIGRldGVjdEFyY2hCaW5hcnkoYmluYXJ5KSB7XG5cdGlmICh0eXBlb2YgYmluYXJ5ID09PSAnc3RyaW5nJyB8fCBBcnJheS5pc0FycmF5KGJpbmFyeSkpIHtcblx0XHRyZXR1cm4gYmluYXJ5O1xuXHR9XG5cblx0Y29uc3Qge1thcmNoXTogYXJjaEJpbmFyeX0gPSBiaW5hcnk7XG5cblx0aWYgKCFhcmNoQmluYXJ5KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGAke2FyY2h9IGlzIG5vdCBzdXBwb3J0ZWRgKTtcblx0fVxuXG5cdHJldHVybiBhcmNoQmluYXJ5O1xufVxuXG5mdW5jdGlvbiBkZXRlY3RQbGF0Zm9ybUJpbmFyeSh7W3BsYXRmb3JtXTogcGxhdGZvcm1CaW5hcnl9LCB7d3NsfSkge1xuXHRpZiAod3NsICYmIGlzV3NsKSB7XG5cdFx0cmV0dXJuIGRldGVjdEFyY2hCaW5hcnkod3NsKTtcblx0fVxuXG5cdGlmICghcGxhdGZvcm1CaW5hcnkpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoYCR7cGxhdGZvcm19IGlzIG5vdCBzdXBwb3J0ZWRgKTtcblx0fVxuXG5cdHJldHVybiBkZXRlY3RBcmNoQmluYXJ5KHBsYXRmb3JtQmluYXJ5KTtcbn1cblxuY29uc3QgYXBwcyA9IHt9O1xuXG5kZWZpbmVMYXp5UHJvcGVydHkoYXBwcywgJ2Nocm9tZScsICgpID0+IGRldGVjdFBsYXRmb3JtQmluYXJ5KHtcblx0ZGFyd2luOiAnZ29vZ2xlIGNocm9tZScsXG5cdHdpbjMyOiAnY2hyb21lJyxcblx0bGludXg6IFsnZ29vZ2xlLWNocm9tZScsICdnb29nbGUtY2hyb21lLXN0YWJsZScsICdjaHJvbWl1bSddXG59LCB7XG5cdHdzbDoge1xuXHRcdGlhMzI6ICcvbW50L2MvUHJvZ3JhbSBGaWxlcyAoeDg2KS9Hb29nbGUvQ2hyb21lL0FwcGxpY2F0aW9uL2Nocm9tZS5leGUnLFxuXHRcdHg2NDogWycvbW50L2MvUHJvZ3JhbSBGaWxlcy9Hb29nbGUvQ2hyb21lL0FwcGxpY2F0aW9uL2Nocm9tZS5leGUnLCAnL21udC9jL1Byb2dyYW0gRmlsZXMgKHg4NikvR29vZ2xlL0Nocm9tZS9BcHBsaWNhdGlvbi9jaHJvbWUuZXhlJ11cblx0fVxufSkpO1xuXG5kZWZpbmVMYXp5UHJvcGVydHkoYXBwcywgJ2ZpcmVmb3gnLCAoKSA9PiBkZXRlY3RQbGF0Zm9ybUJpbmFyeSh7XG5cdGRhcndpbjogJ2ZpcmVmb3gnLFxuXHR3aW4zMjogJ0M6XFxcXFByb2dyYW0gRmlsZXNcXFxcTW96aWxsYSBGaXJlZm94XFxcXGZpcmVmb3guZXhlJyxcblx0bGludXg6ICdmaXJlZm94J1xufSwge1xuXHR3c2w6ICcvbW50L2MvUHJvZ3JhbSBGaWxlcy9Nb3ppbGxhIEZpcmVmb3gvZmlyZWZveC5leGUnXG59KSk7XG5cbmRlZmluZUxhenlQcm9wZXJ0eShhcHBzLCAnZWRnZScsICgpID0+IGRldGVjdFBsYXRmb3JtQmluYXJ5KHtcblx0ZGFyd2luOiAnbWljcm9zb2Z0IGVkZ2UnLFxuXHR3aW4zMjogJ21zZWRnZScsXG5cdGxpbnV4OiBbJ21pY3Jvc29mdC1lZGdlJywgJ21pY3Jvc29mdC1lZGdlLWRldiddXG59LCB7XG5cdHdzbDogJy9tbnQvYy9Qcm9ncmFtIEZpbGVzICh4ODYpL01pY3Jvc29mdC9FZGdlL0FwcGxpY2F0aW9uL21zZWRnZS5leGUnXG59KSk7XG5cbm9wZW4uYXBwcyA9IGFwcHM7XG5vcGVuLm9wZW5BcHAgPSBvcGVuQXBwO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9wZW47XG4iLAogICAgImltcG9ydCB7IGlzQ2hpbGRQcm9jZXNzRXJyb3IgfSBmcm9tIFwiLi4vdXRpbC9pcy1jaGlsZC1wcm9jZXNzLWVycm9yLmpzXCI7XG5pbXBvcnQgeyBpc0RlZmluZWQgfSBmcm9tIFwiLi4vdXRpbC90eXBlcy5qc1wiO1xuXG4vKipcbiAqIEV4ZWN1dGVzIGEgY29tbWFuZCBvbiB0aGUgc2FtZSBzdGRpbyBhcyB0aGUgY3VycmVudCBwcm9jZXNzLiBUaGlzIGFic29yYnNcbiAqIGVycm9ycyBhbmQgYWxzbyBpZ25vcmVzIG51bGwvdW5kZWZpbmVkIGFyZ3VtZW50cy5cbiAqXG4gKiBSZXR1cm5zIHRoZSBzdGRvdXQgcmVzdWx0IG9mIHRoZSBjb21tYW5kIGlmIGl0IHN1Y2NlZWRzIGFuZCBudWxsIGlmIGl0IGZhaWxzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY1N5bmNSZXN1bHQoXG4gIGNvbW1hbmQ6IHN0cmluZyxcbiAgYXJnczogKHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpW10gPSBbXVxuKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzdWx0ID0gQnVuLnNwYXduU3luYyhbY29tbWFuZCwgLi4uYXJncy5maWx0ZXIoaXNEZWZpbmVkKV0sIHtcbiAgICAgIHN0ZGlvOiBbXCJpbmhlcml0XCIsIFwicGlwZVwiLCBcInBpcGVcIl0sXG4gICAgICBlbnY6IHByb2Nlc3MuZW52LFxuICAgIH0pO1xuXG4gICAgaWYgKHJlc3VsdC5leGl0Q29kZSAhPT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYEVycm9yOiAke2NvbW1hbmR9ICR7YXJncy5qb2luKFwiIFwiKX0gZmFpbGVkIHdpdGggY29kZTogJHtcbiAgICAgICAgICByZXN1bHQuZXhpdENvZGVcbiAgICAgICAgfWBcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmVycm9yKG5ldyBFcnJvcigpLnN0YWNrKTtcblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIChyZXN1bHQuc3Rkb3V0IHx8IFwiXCIpLnRvU3RyaW5nKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChpc0NoaWxkUHJvY2Vzc0Vycm9yKGVycikpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBFcnJvcjogJHtjb21tYW5kfSAke2FyZ3Muam9pbihcIiBcIil9IGZhaWxlZCB3aXRoIGNvZGU6ICR7ZXJyLnN0YXR1c31gXG4gICAgICApO1xuICAgIH0gZWxzZSBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgIH1cblxuICAgIGNvbnNvbGUuZXJyb3IobmV3IEVycm9yKCkuc3RhY2spO1xuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cbiIsCiAgICAiZXhwb3J0IGludGVyZmFjZSBJVGVtcGxhdGVSZXN1bHRzIHtcbiAgLyoqIFRoaXMgaXMgdGhlIHJlc3VsdGluZyB0ZW1wbGF0ZSBzdHJpbmcgZ2VuZXJhdGVkIGZyb20gdGhlIHRlbXBsYXRpbmcgKi9cbiAgdGVtcGxhdGU6IHN0cmluZztcbiAgLyoqIFRoaXMgaXMgdGhlIHRlbXBsYXRlIG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIHRlbXBsYXRlLiB7b3B0aW9uOiBudW0gb2NjdXJyZW5jZXN9ICovXG4gIHRlbXBsYXRlUHJvdmlkZWRPcHRpb25zOiBNYXA8c3RyaW5nLCBudW1iZXI+O1xuICAvKipcbiAgICogVGhpcyBpcyB0aGUgdGVtcGxhdGUgb3B0aW9ucyBwcm92aWRlZCBieSB0aGUgdGVtcGxhdGUgdGhhdCB3ZXJlIG5vdCByZXNvbHZlZCBieSB0aGUgb3B0aW9ucyBwYXJhbWV0ZXJcbiAgICoge29wdGlvbjogbnVtIG9jY3VycmVuY2VzfVxuICAgKi9cbiAgdW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9uczogTWFwPHN0cmluZywgbnVtYmVyPjtcbiAgLyoqIFRoaXMgaXMgdGhlIG9wdGlvbnMgcHJvdmlkZWQgdG8gdGhlIHRlbXBsYXRlIHRoYXQgZGlkIG5vdCBnZXQgcmVzb2x2ZWQgYnkgdGhlIHRlbXBsYXRlIHtvcHRpb246IDF9ICovXG4gIHVucmVzb2x2ZWRQcm92aWRlZE9wdGlvbnM6IE1hcDxzdHJpbmcsIG51bWJlcj47XG4gIC8qKiBUaGlzIGlzIHRoZSBsaXN0IG9mIG9wdGlvbnMgdGhhdCBESUQgZ2V0IHJlc29sdmVkIGJ5IHRoZSBvcHRpb25zIHByb3ZpZGVkIHtvcHRpb246IG51bSBvY2N1cnJlbmNlc30gKi9cbiAgcmVzb2x2ZWR0ZW1wbGF0ZU9wdGlvbnM6IE1hcDxzdHJpbmcsIG51bWJlcj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRlbXBsYXRlUmVxdWlyZW1lbnRzIHtcbiAgLyoqIEEgc3RyaW5nIGlkZW50aWZpZXIgdG8gbWFrZSBpdCBlYXNpZXIgdG8gaWRlbnRpZnkgd2hpY2ggdGVtcGxhdGUgdGVtcGxhdGUgZmFpbGVkIHJlcXVpcmVtZW50cyAqL1xuICBuYW1lOiBzdHJpbmc7XG4gIC8qKiBUaGUgb3B0aW9ucyB0aGF0IG11c3QgYmUgcHJlc2VudCB3aXRoaW4gYm90aCBwcm92aWRlZCBvcHRpb25zIEFORCB3aXRoaW4gdGhlIHRlbXBsYXRlICovXG4gIHZhbHVlczogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRlbXBsYXRlT3B0aW9ucyB7XG4gIC8qKiBEb3VibGUgY3VybHkgYnJhY2tldHMgZm9yIHRlbXBsYXRlIGl0ZW1zIGluc3RlYWQgb2Ygb25lICovXG4gIGRvdWJsZUN1cmx5QnJhY2tldHM/OiBib29sZWFuO1xuICAvKiogQ2FsbGJhY2sgZm9yICdyZXF1aXJlZCcgZXJyb3JzIGJlaW5nIGVtaXR0ZWQgKi9cbiAgb25FcnJvcj8obXNnOiBzdHJpbmcpOiB2b2lkO1xuICAvKipcbiAgICogQ2FsbGJhY2sgdGhhdCBhbGxvd3Mgb3ZlcnJpZGVzIGZvciB0b2tlbiByZXBsYWNlbWVudC4gUHJvdmlkZXMgdGhlIHRva2VuIGZvdW5kIGFuZCB0aGVcbiAgICogc3VnZ2VzdGVkIHJlcGxhY2VtZW50IGZvciBpdFxuICAgKi9cbiAgb25Ub2tlbj8odG9rZW46IHN0cmluZywgcmVwbGFjZTogc3RyaW5nKTogc3RyaW5nO1xuICAvKiogVGhpcyBpcyBhIGtleSB2YWx1ZSBwYWlyIHRoZSB0ZW1wbGF0ZSB1c2VzIHRvIG1hdGNoIHRva2VucyBmb3VuZCB0byByZXBsYWNlbWVudCB2YWx1ZXMgKi9cbiAgb3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPjtcbiAgLyoqIFRoaXMgaXMgdXNlZCB0byBpbmRpY2F0ZSB3aGljaCB0b2tlbnMgYXJlIHJlcXVpcmVkIGJvdGggd2l0aGluIHRoZSB0ZW1wbGF0ZSBBTkQgd2l0aGluIHRoZSAnb3B0aW9ucycgKi9cbiAgcmVxdWlyZWQ/OiBJVGVtcGxhdGVSZXF1aXJlbWVudHM7XG4gIC8qKiBUaGlzIGlzIHRoZSB0ZW1wbGF0ZSB3cml0dGVuIHdpdGggdGVtcGxhdGluZyBpbmZvcm1hdGlvbiAqL1xuICB0ZW1wbGF0ZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSBtZXRob2QgdGhhdCBhaWRzIGluIG1ha2luZyB0ZW1wbGF0ZXMgYSBiaXQgbW9yZSBkeW5hbWljIHdpdGggc2ltcGxlIHN0cmluZyByZXBsYWNlbWVudCBiYXNlZCBvblxuICogdG9rZW5zIHdyaXR0ZW4gaW50byB0aGUgdGVtcGxhdGUuIFRva2VucyBpbiB0aGUgdGVtcGxhdGUgd2lsbCBhcHBlYXIgYXMgJHt0b2tlbn0gYW5kIHdpbGwgZWl0aGVyIGJlIGlnbm9yZWQgYnkgdGhpc1xuICogbWV0aG9kIGFuZCB0aHVzIHJlbW92ZWQgb3Igd2lsbCBiZSByZXBsYWNlZCB3aXRoIGEgcHJvdmlkZWQgdmFsdWUuXG4gKlxuICogVGhpcyBtZXRob2Qgd2lsbCBnaXZlIGZlZWRiYWNrIG9uIHRoZSByZXBsYWNlbWVudHMgdGFraW5nIHBsYWNlIGFuZCBzaW1wbGlmeSB0aGUgcHJvY2VzcyBvZiBkZXRlY3RpbmcgZXJyb3JzXG4gKiB3aXRoaW4gdGhlIHByb2Nlc3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZSh7XG4gIHRlbXBsYXRlLFxuICBvcHRpb25zLFxuICByZXF1aXJlZCxcbiAgZG91YmxlQ3VybHlCcmFja2V0cyxcbiAgb25FcnJvcixcbiAgb25Ub2tlbixcbn06IElUZW1wbGF0ZU9wdGlvbnMpOiBJVGVtcGxhdGVSZXN1bHRzIHtcbiAgY29uc3QgbWF0Y2hlZCA9IG5ldyBNYXAoKTtcbiAgY29uc3Qgbm9WYWx1ZVByb3ZpZGVkID0gbmV3IE1hcCgpO1xuICBjb25zdCBub3RGb3VuZCA9IG5ldyBNYXAoKTtcbiAgY29uc3QgdGVtcGxhdGVQcm92aWRlZE9wdGlvbnMgPSBuZXcgTWFwKCk7XG5cbiAgbGV0IHBhdHRlcm4gPSAvXFwkXFx7KFteXFx9XSopXFx9L2c7XG5cbiAgaWYgKGRvdWJsZUN1cmx5QnJhY2tldHMpIHtcbiAgICBwYXR0ZXJuID0gL1xcJFxce1xceyhbXlxcfV0qKVxcfVxcfS9nO1xuICB9XG5cbiAgY29uc3QgdGVtcGxhdGVSZXN1bHRzID0gdGVtcGxhdGUucmVwbGFjZShwYXR0ZXJuLCAoX3gsIG1hdGNoKSA9PiB7XG4gICAgbGV0IHJlcGxhY2UgPSBcIlwiO1xuICAgIHRlbXBsYXRlUHJvdmlkZWRPcHRpb25zLnNldChcbiAgICAgIG1hdGNoLFxuICAgICAgKHRlbXBsYXRlUHJvdmlkZWRPcHRpb25zLmdldChtYXRjaCkgfHwgMCkgKyAxXG4gICAgKTtcblxuICAgIGlmIChtYXRjaCBpbiBvcHRpb25zKSB7XG4gICAgICBtYXRjaGVkLnNldChtYXRjaCwgKG1hdGNoZWQuZ2V0KG1hdGNoKSB8fCAwKSArIDEpO1xuICAgICAgY29uc3QgdmFsdWUgPSBvcHRpb25zW21hdGNoXTtcblxuICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgcmVwbGFjZSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBub1ZhbHVlUHJvdmlkZWQuc2V0KG1hdGNoLCAobm9WYWx1ZVByb3ZpZGVkLmdldChtYXRjaCkgfHwgMCkgKyAxKTtcbiAgICB9XG5cbiAgICBpZiAob25Ub2tlbikge1xuICAgICAgcmVwbGFjZSA9IG9uVG9rZW4obWF0Y2gsIHJlcGxhY2UpO1xuICAgICAgaWYgKHJlcGxhY2UgIT09IG1hdGNoKSB7XG4gICAgICAgIG1hdGNoZWQuc2V0KG1hdGNoLCAobWF0Y2hlZC5nZXQobWF0Y2gpIHx8IDApICsgMSk7XG4gICAgICAgIG5vVmFsdWVQcm92aWRlZC5kZWxldGUobWF0Y2gpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXBsYWNlO1xuICB9KTtcblxuICBPYmplY3Qua2V5cyhvcHRpb25zKS5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICBpZiAoIW1hdGNoZWQuZ2V0KG9wdGlvbikpIHtcbiAgICAgIG5vdEZvdW5kLnNldChvcHRpb24sIChub3RGb3VuZC5nZXQob3B0aW9uKSB8fCAwKSArIDEpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gUHJvdmlkZSBtZXRyaWNzXG4gIGNvbnN0IHJlc3VsdHM6IElUZW1wbGF0ZVJlc3VsdHMgPSB7XG4gICAgcmVzb2x2ZWR0ZW1wbGF0ZU9wdGlvbnM6IG1hdGNoZWQsXG4gICAgdGVtcGxhdGU6IHRlbXBsYXRlUmVzdWx0cyxcbiAgICB0ZW1wbGF0ZVByb3ZpZGVkT3B0aW9ucyxcbiAgICB1bnJlc29sdmVkUHJvdmlkZWRPcHRpb25zOiBub3RGb3VuZCxcbiAgICB1bnJlc29sdmVkVGVtcGxhdGVPcHRpb25zOiBub1ZhbHVlUHJvdmlkZWQsXG4gIH07XG5cbiAgaWYgKHJlcXVpcmVkKSB7XG4gICAgLy8gVGhpcyB3aWxsIGVuc3VyZSB0aGF0IEJPVEggdGhlIHBhcmFtZXRlciBpbnB1dCBBTkQgdGhlIHRlbXBsYXRlIHByb3ZpZGVkIHRoZSByZXF1aXJlZCBvcHRpb25zLlxuICAgIHJlcXVpcmVkLnZhbHVlcy5mb3JFYWNoKChyZXF1aXJlKSA9PiB7XG4gICAgICBpZiAocmVzdWx0cy51bnJlc29sdmVkUHJvdmlkZWRPcHRpb25zLmdldChyZXF1aXJlKSkge1xuICAgICAgICBjb25zdCBtc2cgPSBgJHtyZXF1aXJlZC5uYW1lfTogQ291bGQgbm90IHJlc29sdmUgYWxsIHRoZSByZXF1aXJlZCBpbnB1dHMuIElucHV0OiAke3JlcXVpcmV9YDtcbiAgICAgICAgaWYgKG9uRXJyb3IpIG9uRXJyb3IobXNnKTtcbiAgICAgICAgZWxzZSBjb25zb2xlLmVycm9yKG1zZyk7XG4gICAgICB9IGVsc2UgaWYgKHJlc3VsdHMudW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9ucy5nZXQocmVxdWlyZSkpIHtcbiAgICAgICAgY29uc3QgbXNnID0gYCR7cmVxdWlyZWQubmFtZX06IEEgcmVxdWlyZWQgb3B0aW9uIHdhcyBub3QgcHJvdmlkZWQgaW4gdGhlIG9wdGlvbnMgcGFyYW1ldGVyLiBPcHRpb246ICR7cmVxdWlyZX1gO1xuICAgICAgICBpZiAob25FcnJvcikgb25FcnJvcihtc2cpO1xuICAgICAgICBlbHNlIGNvbnNvbGUuZXJyb3IobXNnKTtcbiAgICAgIH0gZWxzZSBpZiAoIXJlc3VsdHMucmVzb2x2ZWR0ZW1wbGF0ZU9wdGlvbnMuZ2V0KHJlcXVpcmUpKSB7XG4gICAgICAgIGNvbnN0IG1zZyA9IGAke3JlcXVpcmVkLm5hbWV9OiBBIHJlcXVpcmVkIG9wdGlvbiB3YXMgbm90IHByb3ZpZGVkIGluIHRoZSBvcHRpb25zIHBhcmFtZXRlci4gT3B0aW9uOiAke3JlcXVpcmV9YDtcbiAgICAgICAgaWYgKG9uRXJyb3IpIG9uRXJyb3IobXNnKTtcbiAgICAgICAgZWxzZSBjb25zb2xlLmVycm9yKG1zZyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0cztcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IGhvc3RpbGUgZnJvbSBcImhvc3RpbGVcIjtcbmltcG9ydCBvcGVuIGZyb20gXCJvcGVuXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHZhbGlkVVJMIGZyb20gXCJ2YWxpZC11cmxcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbiB9IGZyb20gXCIuLi9saWIvdXRpbC9kZXNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vbGliL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5pbXBvcnQgeyBleGVjU3luY1Jlc3VsdCB9IGZyb20gXCIuLi9saWIvZXhlYy9leGVjLXN5bmMtcmVzdWx0LmpzXCI7XG5pbXBvcnQgeyB0ZW1wbGF0ZSB9IGZyb20gXCIuLi9saWIvdXRpbC90ZW1wbGF0ZS5qc1wiO1xuaW1wb3J0IHsgd2FpdCB9IGZyb20gXCIuLi9saWIvdXRpbC93YWl0LmpzXCI7XG5cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsOiBhbnkpOiB2YWwgaXMgRnVuY3Rpb24ge1xuICByZXR1cm4gdmFsICYmIHR5cGVvZiB2YWwgPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLyoqXG4gKiBXcmFwcyBhIG1ldGhvZCB0aGF0IG5vcm1hbGx5IGhhcyBhbiBhc3luYyBjYWxsYmFjayBwYXR0ZXJuIGludG8gYSBQcm9taXNlLFxuICogdGh1cyBtYWtpbmcgYXdhaXQgcGF0dGVybnMgcG9zc2libGUuXG4gKi9cbmZ1bmN0aW9uIHByb21pc2lmeTxUPihjb250ZXh0OiBULCBtZXRob2ROYW1lOiBrZXlvZiBULCAuLi5hcmdzOiBhbnlbXSkge1xuICByZXR1cm4gbmV3IFByb21pc2U8YW55PigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgbWV0aG9kID0gY29udGV4dFttZXRob2ROYW1lXTtcblxuICAgIGlmICghaXNGdW5jdGlvbihtZXRob2QpKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKGAke1N0cmluZyhtZXRob2ROYW1lKX0gaXMgbm90IGEgZnVuY3Rpb25gKSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbWV0aG9kKC4uLmFyZ3MsIChlcnJvcjogRXJyb3IsIHZhbHVlOiBhbnkpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IpO1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlKHZhbHVlIHx8IHZvaWQgMCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFRoaXMgbG9va3MgYXQgdGhlIHBhY2thZ2UuanNvbiBhbmQgbW9kaWZpZXMgdGhlIGhvc3QgZmlsZSB0byBpbmNsdWRlIHRoZVxuICogaG9zdHMgc3BlY2lmaWVkIGluIHRoZSBcImhvc3RzXCIgcHJvcGVydHkuIFRoaXMgd2lsbCBvbmx5IHdvcmsgaWYgdGhpcyBzY3JpcHRcbiAqIHdhcyByYW4gYXMgYW4gYWRtaW5pc3RyYXRvci5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29uZmlndXJlSG9zdHMoKSB7XG4gIC8vIEdldCB0aGUgcGFja2FnZSBmb3IgdGhlIHByb2plY3RcbiAgY29uc3QgcGtnID0gZnMucmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSk7XG4gIGNvbnN0IGhvc3RzID0gcGtnLmhvc3RzO1xuXG4gIC8vIE5vIGhvc3RzIHByZXNlbnQsIG1lYW5zIHdlIGRvIG5vdCBuZWVkIHRvIGRvIGFueXRoaW5nIGluIHRoaXMgcHJvY2Vzcy5cbiAgaWYgKCFob3N0cykgcmV0dXJuO1xuXG4gIC8vIFVwZGF0ZSB0aGUgaG9zdHMgZmlsZSB0byBtYXRjaCB0aGUgaG9zdHMgc3BlY2lmaWVkIGluIHBhY2thZ2UuanNvblxuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoaG9zdHMpO1xuICBsZXQgbGluZXMgPSBhd2FpdCBwcm9taXNpZnkoaG9zdGlsZSwgXCJnZXRcIiwgZmFsc2UpO1xuICBjb25zdCBuZWVkc0hvc3Q6IFtzdHJpbmcsIHN0cmluZ11bXSA9IFtdO1xuXG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3coXCJVcGRhdGluZyBob3N0cyBmaWxlLi4uXCIpKTtcbiAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgIHRyeSB7XG4gICAgICAvLyBJZiB0aGUgaG9zdCBpcyBub3QgcHJlc2VudCBpbiB0aGUgY29uZmlnIGFscmVhZHksIGFkZCBpdCBpblxuICAgICAgaWYgKFxuICAgICAgICAhbGluZXMuZmluZChcbiAgICAgICAgICAobDogW3N0cmluZywgc3RyaW5nXSkgPT4gbFswXSA9PT0ga2V5ICYmIGxbMV0gPT09IGhvc3RzW2tleV1cbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIG5lZWRzSG9zdC5wdXNoKFtrZXksIGhvc3RzW2tleV1dKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikgY29uc29sZS53YXJuKGNoYWxrLnJlZChlcnIubWVzc2FnZSkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEFwcGVuZCB0aGUgaG9zdHMgdG8gL2V0Yy9ob3N0c1xuICBpZiAobmVlZHNIb3N0Lmxlbmd0aCA+IDApIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBjaGFsay55ZWxsb3coXG4gICAgICAgIFwiQWRkaW5nIGhvc3RzIChZb3UgbWF5IGJlIHByb21wdGVkIGZvciBhZG1pbmlzdHJhdG9yIHBhc3N3b3JkKTpcXG5cXHRcIixcbiAgICAgICAgbmVlZHNIb3N0Lm1hcCgoaCkgPT4gYCR7aFswXX0gPT4gJHtoWzFdfWApLmpvaW4oXCJcXG5cXHRcIilcbiAgICAgIClcbiAgICApO1xuXG4gICAgYXdhaXQgZXhlY1N5bmMoXCJzdWRvXCIsIFtcbiAgICAgIFwiZWNob1wiLFxuICAgICAgXCJHcmFudGVkIHN1ZG8gYWNjZXNzIHRvIHVwZGF0ZSBob3N0cyBmaWxlLlwiLFxuICAgIF0pO1xuXG4gICAgLy8gTGFzdCB0aHJlZSBjaGFyYWN0ZXJzIGFyZSB0aGUgcGVybWlzc2lvbnNcbiAgICBjb25zdCBjaG1vZEJhayA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwic3RhdFwiLCBbXG4gICAgICBcIi1mXCIsXG4gICAgICBcIiVwXCIsXG4gICAgICBcIi9ldGMvaG9zdHNcIixcbiAgICBdKS50b1N0cmluZygpO1xuXG4gICAgLy8gTWFrZSB0aGUgZmlsZSB3cml0ZWFibGVcbiAgICBhd2FpdCBleGVjU3luYyhcInN1ZG9cIiwgW1wiY2htb2RcIiwgXCI2NjZcIiwgXCIvZXRjL2hvc3RzXCJdKTtcblxuICAgIGZvciAoY29uc3QgaG9zdCBvZiBuZWVkc0hvc3QpIHtcbiAgICAgIGZzLmFwcGVuZEZpbGVTeW5jKFwiL2V0Yy9ob3N0c1wiLCBgJHtob3N0WzBdfSAke2hvc3RbMV19YCk7XG4gICAgfVxuXG4gICAgZnMuYXBwZW5kRmlsZVN5bmMoXCIvZXRjL2hvc3RzXCIsIGBcXG5gKTtcblxuICAgIC8vIFJlc3RvcmUgdGhlIHBlcm1pc3Npb25zXG4gICAgYXdhaXQgZXhlY1N5bmMoXCJzdWRvXCIsIFtcbiAgICAgIFwiY2htb2RcIixcbiAgICAgIGNobW9kQmFrLnN1YnN0cmluZyhjaG1vZEJhay5sZW5ndGggLSA0KS50cmltKCksXG4gICAgICBcIi9ldGMvaG9zdHNcIixcbiAgICBdKTtcbiAgfVxuXG4gIGF3YWl0IHdhaXQoNTAwKTtcblxuICAvLyBBZnRlciB1cGRhdGluZyB0aGUgaG9zdCBmaWxlLCBsZXQncyBlbnN1cmUgYWxsIGhvc3RzIHdlcmUgYWRkZWQuXG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3coXCJWZXJpZnlpbmcgaG9zdHMgZmlsZS4uLlwiKSk7XG4gIGxpbmVzID0gYXdhaXQgcHJvbWlzaWZ5KGhvc3RpbGUsIFwiZ2V0XCIsIGZhbHNlKTtcbiAgbGV0IGRpZEZhaWwgPSBmYWxzZTtcblxuICBuZWVkc0hvc3QuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgaWYgKFxuICAgICAgIWxpbmVzLmZpbmQoKGw6IFtzdHJpbmcsIHN0cmluZ10pID0+IGxbMF0gPT09IGtleSAmJiBsWzFdID09PSBob3N0c1trZXldKVxuICAgICkge1xuICAgICAgZGlkRmFpbCA9IHRydWU7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGNoYWxrLnJlZEJyaWdodChcbiAgICAgICAgICBgRmFpbGVkIHRvIGFkZCBob3N0OiAke2NoYWxrLnllbGxvd0JyaWdodChcbiAgICAgICAgICAgIGtleVxuICAgICAgICAgICl9ID0+ICR7Y2hhbGsueWVsbG93QnJpZ2h0KHZhbHVlKX1gXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9KTtcblxuICBpZiAoZGlkRmFpbCkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGNoYWxrLnJlZChkZXNjcmlwdGlvbmBcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICAqIFNvbWUgaG9zdHMgc3BlY2lmaWVkIGluIHRoZSBwYWNrYWdlLmpzb24gd2VyZSBub3QgYWJsZSB0byBiZSB3cml0dGVuICAqXG4gICAgICAgICogdG8gdGhlIGhvc3RzIGZpbGUgZm9yIHRoZSBzeXN0ZW0uIFlvdSBjYW4gYW1lbmQgdGhpcyBieSBlZGl0aW5nIHRoZSAgICpcbiAgICAgICAgKiBmaWxlIHlvdXJzZWxmLCBvciBieSB0cnlpbmcgdG8gcnVuIHRoaXMgc2NyaXB0IGFnYWluIGFzIGFuIGFkbWluLiAgICAgKlxuICAgICAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICBgKVxuICAgICk7XG4gIH1cbn1cblxuZnVuY3Rpb24gb3BlblVSTChcbiAgdXJsQ29uZmlnOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxuICB1cmw6IHN0cmluZyxcbiAgb3B0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPlxuKSB7XG4gIGxldCB0YXJnZXRVcmwgPSB1cmw7XG5cbiAgaWYgKHZhbGlkVVJMLmlzV2ViVXJpKHVybCkpIHtcbiAgICB0YXJnZXRVcmwgPSB1cmw7XG4gIH0gZWxzZSBpZiAodXJsQ29uZmlnW3VybF0pIHtcbiAgICB0YXJnZXRVcmwgPSB1cmxDb25maWdbdXJsXTtcbiAgfVxuXG4gIC8vIFJlcGxhY2UgYW55XG4gIGNvbnN0IHJlc3VsdCA9IHRlbXBsYXRlKHtcbiAgICBvcHRpb25zLFxuICAgIHRlbXBsYXRlOiB0YXJnZXRVcmwsXG4gIH0pO1xuXG4gIGlmIChyZXN1bHQudW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9ucy5zaXplID4gMCkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGNoYWxrLnJlZChcbiAgICAgICAgZGVzY3JpcHRpb25gXG4gICAgICAgICAgWW91IG11c3Qgc3BlY2lmeSB0aGVzZSBlbnYgdmFyaWFibGVzIGZvciB0aGlzIFVSTCB0byB3b3JrOlxuICAgICAgICAgICR7QXJyYXkuZnJvbShyZXN1bHQudW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9ucy5rZXlzKCkpLmpvaW4oXCJcXG5cXHRcIil9XG4gICAgICAgIGBcbiAgICAgIClcbiAgICApO1xuICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgZW52IGNvbmZpZ3VyYXRpb24gZm9yIFVSTFwiKTtcbiAgfVxuXG4gIHRhcmdldFVybCA9IHJlc3VsdC50ZW1wbGF0ZTtcblxuICBpZiAodmFsaWRVUkwuaXNXZWJVcmkodGFyZ2V0VXJsKSkge1xuICAgIGNvbnNvbGUud2FybihcIk5hdmlnYXRpbmcgdG86XCIsIGNoYWxrLmN5YW5CcmlnaHRCb2xkKHRhcmdldFVybCkpO1xuICAgIG9wZW4odGFyZ2V0VXJsKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJDYW4gbm90IG9wZW4gaW52YWxpZCBVUkw6XCIsIGNoYWxrLnJlZEJyaWdodEJvbGQodGFyZ2V0VXJsKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNvbW1hbmQgc2ltcGx5IG9wZW5zIGEgVVJMIHZpYSBhbiBucG0gY29tbWFuZC4gVGhlIHZhbHVlIHByb3ZpZGVkIGNhbiBiZVxuICogYSB2YWxpZCBVUkkgT1IgaXQgY2FuIGJlIGEga2V5IGZvciB0aGUgdmFsdWUgZm91bmQgaW4gcGFja2FnZS5qc29uIFwidXJsXCIuXG4gKlxuICogZWcgLVxuICogdXJsOiBcIm5vZGUgYmluL21haW4gdXJsIFxcXCJodHRwczovL2ZpZ21hLmNvbVxcXCJcIlxuICpcbiAqIG9yIGlmIHRoZXJlIGlzIGEgXCJmaWdtYVwiIGVudHJ5IGluIHRoZSBcInVybFwiIHByb3BlcnR5IGluIHBhY2thZ2UuanNvbiAtXG4gKiB1cmw6IFwibm9kZSBiaW4vbWFpbiB1cmwgXFxcImZpZ21hXFxcIlwiXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bih1cmw/OiBzdHJpbmcgfCBzdHJpbmdbXSwgb3B0aW9ucz86IHN0cmluZ1tdKSB7XG4gIGNvbnN0IHBrZyA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICBjb25zdCB1cmxDb25maWc6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSBwa2c/LnVybCB8fCB7fTtcbiAgY29uc3Qgb3B0aW9uc0NvbmZpZzogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9XG4gICAgb3B0aW9ucz8ucmVkdWNlKFxuICAgICAgKHAsIG9wdCwgaSkgPT4ge1xuICAgICAgICBwW2Ake2kgKyAxfWBdID0gb3B0O1xuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH0sXG4gICAgICB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+XG4gICAgKSB8fCB7fTtcblxuICBpZiAoIXVybCB8fCB1cmwubGVuZ3RoIDw9IDApIHtcbiAgICBjb25zb2xlLndhcm4oZGVzY3JpcHRpb25gXG4gICAgICBBdmFpbGFibGUgVVJMczpcbiAgICAgICAgJHtjaGFsay5jeWFuQnJpZ2h0Qm9sZChPYmplY3Qua2V5cyh1cmxDb25maWcpLmpvaW4oXCJcXG4gICAgICAgIFwiKSl9XG4gICAgYCk7XG5cbiAgICByZXR1cm47XG4gIH1cblxuICBhd2FpdCBjb25maWd1cmVIb3N0cygpO1xuXG4gIGNvbnN0IGFsbE9wdGlvbnMgPSB7XG4gICAgLi4ucHJvY2Vzcy5lbnYsXG4gICAgLi4ub3B0aW9uc0NvbmZpZyxcbiAgfTtcblxuICBpZiAoQXJyYXkuaXNBcnJheSh1cmwpKSB7XG4gICAgdXJsLmZvckVhY2goKHVyaSkgPT4ge1xuICAgICAgb3BlblVSTCh1cmxDb25maWcsIHVyaSwgYWxsT3B0aW9ucyk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgb3BlblVSTCh1cmxDb25maWcsIHVybCwgYWxsT3B0aW9ucyk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IGNoaWxkX3Byb2Nlc3MgZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcblxuLyoqXG4gKiBUaGlzIGNoZWNrcyB0aGUgY3VycmVudCBnaXQgcmVwb3NpdG9yeSB0byBzZWUgaWYgaXQgaGFzIHVuY29taXR0ZWQgY2hhbmdlc1xuICogbGluZ2VyaW5nLiBUaGlzIGNoZWNrIGlzIG5lY2Vzc2FyeSBiZWZvcmUgc29tZSBwcm9jZXNzIGNhbiBiZSBleGVjdXRlZFxuICogc2FmZWx5LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2l0SGFzQ2hhbmdlcygpIHtcbiAgdHJ5IHtcbiAgICAvLyBUT0RPOiBmaW5kIGEgbmljZXIgd2F5IHRvIGhhbmRsZSBwaXBlZCBjb21tYW5kcyBzbyB3ZSBjYW4gYWJzdHJhY3QgdGhlXG4gICAgLy8gdXNlIG9mIGNoaWxkX3Byb2Nlc3MgaGVyZS5cbiAgICBjaGlsZF9wcm9jZXNzLmV4ZWNTeW5jKFxuICAgICAgXCJnaXQgc3RhdHVzIC0tcG9yY2VsYWluPXYxIDI+L2Rldi9udWxsIHwgd2MgLWwgfCBncmVwIDBcIixcbiAgICAgIHtcbiAgICAgICAgZW52OiBwcm9jZXNzLmVudixcbiAgICAgIH1cbiAgICApO1xuICB9IGNhdGNoIChfZSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwKICAgICJpbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuLi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgZ2l0SGFzQ2hhbmdlcyB9IGZyb20gXCIuL2dpdC1oYXMtY2hhbmdlcy5qc1wiO1xuaW1wb3J0IHsgcHJvbXB0Q29uZmlybSB9IGZyb20gXCIuLi9wcm9tcHQvcHJvbXB0LWNvbmZpcm0uanNcIjtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvbnRleHQgYmFjayB0byBkZXYgYW5kIHJlc2V0cyB0byB0aGUgbGF0ZXN0IGluIGRldi5cbiAqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIG9wZXJhdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LlxuICpcbiAqIElmIGZhbHNlIGlzIHJldHVybmVkLCB0aGUgZ2l0IHN0YXRlIHNob3VsZCBiZSBjb25zaWRlcmVkIHVuZGVmaW5lZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdpdFJldHVyblRvRGV2KHdpdGhQcm9tcHQ/OiBib29sZWFuKSB7XG4gIC8vIElmIGEgcHJvbXB0IHdhcyByZXF1ZXN0ZWQsIHdlIHdpbGwgYXNrIHRoZSB1c2VyIGlmIHRoZXkgd2lzaCB0byBsZXQgdGhpc1xuICAvLyBvcGVyYXRpb24gaGFwcGVuLlxuICBpZiAod2l0aFByb21wdCkge1xuICAgIGNvbnN0IHNob3VsZEdpdEJyYW5jaCA9IGF3YWl0IHByb21wdENvbmZpcm0oYFxuICAgICAgV291bGQgeW91IGxpa2UgdG8gcmV0dXJuIGJhY2sgdG8gZGV2ZWxvcG1lbnQ/XG4gICAgICBSdW5zIHRoZSBmb2xsb3dpbmc6XG4gICAgICAgIGdpdCBmZXRjaFxuICAgICAgICBnaXQgY2hlY2tvdXQgZGV2XG4gICAgICAgIGdpdCByZXNldCAtLWhhcmQgb3JpZ2luL2RldlxuICAgIGApO1xuXG4gICAgaWYgKCFzaG91bGRHaXRCcmFuY2gpIHJldHVybjtcbiAgfVxuXG4gIGlmIChhd2FpdCBnaXRIYXNDaGFuZ2VzKCkpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJDYW4gbm90IHJldHVybiB0byBkZXYgYnJhbmNoIGFzIGNoYW5nZXMgYXJlIHByZXNlbnQgb24gdGhlIGN1cnJlbnQgYnJhbmNoLlwiXG4gICAgKTtcblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGxldCBmYWlsID0gZmFsc2U7XG5cbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoXCJnaXRcIiwgW1wiZmV0Y2hcIl0pKSkgZmFpbCA9IHRydWU7XG4gIGlmICghKGF3YWl0IGV4ZWNTeW5jKFwiZ2l0XCIsIFtcImNoZWNrb3V0XCIsIFwiZGV2XCJdKSkpIGZhaWwgPSB0cnVlO1xuICBpZiAoIShhd2FpdCBleGVjU3luYyhcImdpdFwiLCBbXCJyZXNldFwiLCBcIi0taGFyZFwiLCBcIm9yaWdpbi9kZXZcIl0pKSkgZmFpbCA9IHRydWU7XG5cbiAgaWYgKGZhaWwpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IHJldHVybiB0byBkZXYgYnJhbmNoLlwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IElnbm9yZSBmcm9tIFwiaWdub3JlXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vLi4vZXhlYy9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3REZXBlbmRlbmNpZXMgfSBmcm9tIFwiLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtZGVwZW5kZW5jaWVzLmpzXCI7XG5pbXBvcnQgeyB3YWl0IH0gZnJvbSBcIi4uLy4uL3V0aWwvd2FpdC5qc1wiO1xuXG5jb25zdCBnaXRJZ25vcmVQYXRoID0gcGF0aC5yZXNvbHZlKFwiLmdpdGlnbm9yZVwiKTtcbmxldCBpZ25vcmUgPSBJZ25vcmUuZGVmYXVsdCgpO1xuXG5pZiAoZnMuZXhpc3RzU3luYyhnaXRJZ25vcmVQYXRoKSkge1xuICBpZ25vcmUgPSBpZ25vcmUuYWRkKGZzLnJlYWRGaWxlU3luYyhnaXRJZ25vcmVQYXRoKS50b1N0cmluZygpKTtcbn1cblxuLyoqXG4gKiBCdW5kbGUgdGhlIGNvbW1hbmRzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkQ29tbWFuZHMoKSB7XG4gIC8vIFdlIGdldCBhbGwgZGVwZW5kZW5jaWVzIG9mIHRoZSBwcm9qZWN0IGFuZCBjb25zaWRlciB0aGVtIGV4dGVybmFsLiBUaGlzXG4gIC8vIGltcHJvdmVzIHRoZSBhYmlsaXR5IGZvciB0aGUgY29kZSB0byBiZSBidW5kbGVkIHNpbmNlIGJpbiBjb21tYW5kcyBoaXQgYVxuICAvLyBMT1Qgb2Ygc25hZ3MgaW4gaG93IHRoZXkgYXJlIGltcGxlbWVudGVkLlxuICBjb25zdCBkZXBzID0gYXdhaXQgdGFyZ2V0UHJvamVjdERlcGVuZGVuY2llcygpO1xuXG4gIC8vIEJ1aWxkIHRoZSBzb3VyY2UgZGlyZWN0bHkgdG8gdGhlIGRpc3QgZm9sZGVyLiBUaGlzIGtlZXBzIHNhbWUgcmVsYXRpdmVcbiAgLy8gZGVwdGggZm9yIGFsbCBmaWxlcyBhcyB3aGVuIHRoZXkgYXJlIGluIHRoZSBiaW4gZm9sZGVyIHRoZW1zZWx2ZXMgYW5kXG4gIC8vIHJlZHVjZXMgcHJvamVjdCBjb21wbGV4aXR5LlxuICBjb25zb2xlLndhcm4oXCJCdWlsZGluZyBmdWxsIGRpc3RyaWJ1dGlvbi4uLlwiKTtcbiAgbGV0IHJlc3VsdHMgPSBhd2FpdCBCdW4uYnVpbGQoe1xuICAgIGVudHJ5cG9pbnRzOiBbcGF0aC5yZXNvbHZlKFwiLi9iaW4vbWFpbi50c1wiKV0sXG4gICAgdGFyZ2V0OiBcImJ1blwiLFxuICAgIGV4dGVybmFsOiBPYmplY3Qua2V5cyhkZXBzKSxcbiAgICBtaW5pZnk6IHRydWUsXG4gICAgc291cmNlbWFwOiBcImlubGluZVwiLFxuICB9KTtcblxuICBmb3IgKGNvbnN0IHJlc291cmNlIG9mIHJlc3VsdHMub3V0cHV0cykge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiV3JpdGluZyBiaW4gYnVuZGxlIHJlc291cmNlOlwiLFxuICAgICAgY2hhbGsuY3lhbkJyaWdodEJvbGQocmVzb3VyY2UucGF0aClcbiAgICApO1xuXG4gICAgYXdhaXQgQnVuLndyaXRlKHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW5cIiwgcmVzb3VyY2UucGF0aCksIHJlc291cmNlKTtcbiAgfVxuXG4gIGNvbnNvbGUud2FybihcIkJ1aWxkaW5nIGdpbXBlZCBkaXN0cmlidXRpb24uLi5cIik7XG4gIHJlc3VsdHMgPSBhd2FpdCBCdW4uYnVpbGQoe1xuICAgIGVudHJ5cG9pbnRzOiBbcGF0aC5yZXNvbHZlKFwiLi9iaW4vbWFpbi1naW1wLnRzXCIpXSxcbiAgICB0YXJnZXQ6IFwibm9kZVwiLFxuICAgIGV4dGVybmFsOiBPYmplY3Qua2V5cyhkZXBzKSxcbiAgICBtaW5pZnk6IHRydWUsXG4gICAgc291cmNlbWFwOiBcImlubGluZVwiLFxuICB9KTtcblxuICBmb3IgKGNvbnN0IHJlc291cmNlIG9mIHJlc3VsdHMub3V0cHV0cykge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiV3JpdGluZyBiaW4gYnVuZGxlIHJlc291cmNlOlwiLFxuICAgICAgY2hhbGsuY3lhbkJyaWdodEJvbGQocmVzb3VyY2UucGF0aClcbiAgICApO1xuXG4gICAgYXdhaXQgQnVuLndyaXRlKHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW5cIiwgcmVzb3VyY2UucGF0aCksIHJlc291cmNlKTtcbiAgfVxuXG4gIGNvbnNvbGUud2FybihcIkNvcHlpbmcgZW50cnkgY3Jvc3MtcGxhdGZvcm0gZGlzdHJpYnV0aW9uLi4uXCIpO1xuICBmcy5jb3B5RmlsZVN5bmMoXG4gICAgcGF0aC5yZXNvbHZlKFwiLi9iaW4vbWFpbi1lbnRyeS5janNcIiksXG4gICAgcGF0aC5yZXNvbHZlKFwiLi9kaXN0L2Jpbi9tYWluLWVudHJ5LmNqc1wiKVxuICApO1xufVxuXG4vKipcbiAqIEJ1aWxkcyB0aGUgZGlzdHJpYnV0aW9uIHZlcnNpb25zIG9mIHNoaW0gZmlsZXMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkU2hpbSgpIHtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcIi4vYmluL3NoaW1cIikpKSB7XG4gICAgY29uc29sZS5lcnJvcihcIk5vIHNoaW0gZGlzdHJpYnV0aW9uIGZpbGVzIGZvdW5kIHRvIGJlIGJ1aWx0XCIpO1xuICB9XG5cbiAgLy8gIERlbGV0ZSB0aGUgY3VycmVudCBzaGltIGRpc3RyaWJ1dGlvblxuICBpZiAoZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCIuL3NoaW1cIikpKSB7XG4gICAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCIuL3NoaW1cIikpO1xuICB9XG5cbiAgLy8gV2UgZ2V0IGFsbCBkZXBlbmRlbmNpZXMgb2YgdGhlIHByb2plY3QgYW5kIGNvbnNpZGVyIHRoZW0gZXh0ZXJuYWwuIFRoaXNcbiAgLy8gaW1wcm92ZXMgdGhlIGFiaWxpdHkgZm9yIHRoZSBjb2RlIHRvIGJlIGJ1bmRsZWQgc2luY2UgYmluIGNvbW1hbmRzIGhpdCBhXG4gIC8vIExPVCBvZiBzbmFncyBpbiBob3cgdGhleSBhcmUgaW1wbGVtZW50ZWQuXG4gIGNvbnN0IGRlcHMgPSBhd2FpdCB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzKCk7XG5cbiAgY29uc29sZS53YXJuKFwiQnVpbGRpbmcgc2hpbSBkaXN0cmlidXRpb24uLi5cIik7XG4gIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBCdW4uYnVpbGQoe1xuICAgIGVudHJ5cG9pbnRzOiBbcGF0aC5yZXNvbHZlKFwiLi9iaW4vc2hpbS9pbmRleC50c1wiKV0sXG4gICAgdGFyZ2V0OiBcIm5vZGVcIixcbiAgICBleHRlcm5hbDogT2JqZWN0LmtleXMoZGVwcyksXG4gICAgbWluaWZ5OiB0cnVlLFxuICB9KTtcblxuICAvLyBXcml0ZSBvdXIgZmlsZXMgdG8gYSBuYW1lc3BhY2UgZm9sZGVyIHRoYXQgY2FuIGNvbnRhaW4gYW55IHByb2plY3QgaW1wb3J0c1xuICAvLyB3aXRoaW4gdGhlIHNoaW0gcHJvamVjdCB3aXRob3V0IHBvbGx1dGluZyB0aGUgcHJvamVjdCB3aXRoIGRpc3RyaWJ1dGlvblxuICAvLyBmaWxlcy5cbiAgZm9yIChjb25zdCByZXNvdXJjZSBvZiByZXN1bHRzLm91dHB1dHMpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIldyaXRpbmcgc2hpbSBidW5kbGUgcmVzb3VyY2U6XCIsXG4gICAgICBjaGFsay5jeWFuQnJpZ2h0Qm9sZChyZXNvdXJjZS5wYXRoKVxuICAgICk7XG5cbiAgICBhd2FpdCBCdW4ud3JpdGUoXG4gICAgICBwYXRoLnJlc29sdmUoXCIuL3NoaW0vc3JjL2Jpbi9zaGltXCIsIHJlc291cmNlLnBhdGgpLFxuICAgICAgcmVzb3VyY2VcbiAgICApO1xuICB9XG5cbiAgLy8gV3JpdGUgYSBiYXJyZWwgZXhwb3J0IGluIHRoZSBzaGltIGZvbGRlciB0byBub3JtYWxpemUgdGhlIGltcG9ydCBwYXRoIGluIGFcbiAgLy8gd2F5IHRoYXQgaXMgY29udmVuaWVudCBmb3IgdGhlIGRldmVsb3BlcjpcbiAgLy8gaW1wb3J0IHsgLi4uIH0gZnJvbSBcImRldm9wcy9zaGltL2luZGV4LmpzXCI7XG4gIGZzLndyaXRlRmlsZVN5bmMoXG4gICAgcGF0aC5yZXNvbHZlKFwiLi9zaGltL2luZGV4LmpzXCIpLFxuICAgIGBleHBvcnQgKiBmcm9tIFwiLi9zcmMvYmluL3NoaW0vaW5kZXguanNcIjtcXG5gLFxuICAgIHsgZW5jb2Rpbmc6IFwidXRmLThcIiB9XG4gICk7XG4gIGZzLndyaXRlRmlsZVN5bmMoXG4gICAgcGF0aC5yZXNvbHZlKFwiLi9zaGltL2luZGV4LmQudHNcIiksXG4gICAgYGV4cG9ydCAqIGZyb20gXCIuL3NyYy9iaW4vc2hpbS9pbmRleC5kLnRzXCI7XFxuYCxcbiAgICB7IGVuY29kaW5nOiBcInV0Zi04XCIgfVxuICApO1xuXG4gIC8vIFdyaXRlIHRoZSB0eXBlIGRlY2FscmF0aW9ucyBmb3IgdGhlIGZpbGVzLiBNYWtlIGEgdGVtcCB0c2NvbmZpZyBwcm9qZWN0XG4gIC8vIGZpbGUgdG8gdGFyZ2V0IHRoZSBzaGltIHNvdXJjZSBmaWxlcyBvbmx5LlxuICBjb25zdCB0c0NvbmZpZyA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy5qc29uXCIpKTtcbiAgdHNDb25maWcuZXhjbHVkZSA9IHRzQ29uZmlnLmV4Y2x1ZGUgfHwgW107XG4gIHRzQ29uZmlnLmV4Y2x1ZGUucHVzaChcIi4vYmluL2xpYi8qKlwiKTtcbiAgdHNDb25maWcuaW5jbHVkZSA9IFtcIi4vYmluL3NoaW1cIl07XG4gIGZzLndyaXRlSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpLCB0c0NvbmZpZyk7XG4gIC8vIEVuc3VyZSB0aGUgZmlsZSBzeXN0ZW0gaGFzIGZsdXNoZWQgdGhlIHRlbXAgZmlsZSB0byBkaXNrXG4gIGF3YWl0IHdhaXQoNTAwKTtcblxuICAvLyBSdW4gdHNjIGFuZCBvdXRwdXQgdGhlXG4gIGlmIChcbiAgICAhZXhlY1N5bmMoXCJ0c2NcIiwgW1xuICAgICAgXCItZFwiLFxuICAgICAgXCItLWVtaXREZWNsYXJhdGlvbk9ubHlcIixcbiAgICAgIFwiLS1wcmV0dHlcIixcbiAgICAgIFwiLS1vdXREaXJcIixcbiAgICAgIHBhdGgucmVzb2x2ZShcIi4vc2hpbS9zcmMvYmluXCIpLFxuICAgICAgXCItLXByb2plY3RcIixcbiAgICAgIHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSxcbiAgICBdKVxuICApIHtcbiAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY29tcGlsZSB0eXBlIGRlY2xhcmF0aW9ucyBmb3IgdGhlIHNoaW0gZmlsZXMuXCIpO1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBSZW1vdmUgdGhlIHRlbXAgZmlsZVxuICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSk7XG59XG5cbi8qKlxuICogV2UgbXVzdCBjb3B5IGFsbCBvZiB0aGUgdGVtcGxhdGluZyBmaWxlcyBhbmQgc3RydWN0dXJlIHRvIHRoZSBkaXN0cmlidXRpb24gYXNcbiAqIHRob3NlIGZpbGVzIGFyZSB1dGlsaXplZCBpbiBtYW55IG9mIHRoZSBjb21tYW5kcyBhbmQgdGhlIHRlbXBsYXRpbmcgc3lzdGVtIGFzXG4gKiBhIHdob2xlIG11c3QgdXNlIHRoZW0gZm9yIHRoZSBzYWtlIG9mLi4uLnlvdSBrbm93Li4udGVtcGxhdGluZy4uLlxuICpcbiAqIFRoaXMgcHJlc2VudHMgc29tZSBjaGFsbGVuZ2VzIGFzIHRoZSB0ZW1wbGF0aW5nIHN5c3RlbSBoYXMgZ3Jvd24gdG8gYmUgYVxuICogcm9idXN0IHN5c3RlbSBmb3Igd2hpY2ggaXQgaGFzIHRoZSBjYXBhYmlsaXRpZXMgdG8gcmVwbGFjZSBtb3JlIGNvbXBsZXhcbiAqIGNvbW1hbmRzIHN1Y2ggYXMgYGNvbXBvbmVudCBuZXdgLiBCdXQgdGhpcyBjb21wbGV4aXR5IG1lYW5zIHRoZSB0ZW1wbGF0ZXNcbiAqIHRoZW1zZWx2ZXMgbm93IGhhdmUgYSBzdHJ1Y3R1cmUgdGhhdCByZXF1aXJlcyB0aGUgdGVtcGxhdGUgdG8gYmUgdHJhbnNwaWxlZFxuICogc28gdGhhdCBpdCBkb2VzIG5vdCBjYXJyeSBhIGJ1cmRlbiBvZiBjb21wbGV4aXR5IHdoZW4gdHJ5aW5nIHRvIHJ1biB0aGVcbiAqIGNvbW1hbmQuIGllIC0gaWYgYSB0ZW1wbGF0ZSBpbiB0aGUgZGV2b3BzIGRpcmVjdG9yeSB1dGlsaXplcyB0b29saW5nIGZyb20gdGhlXG4gKiBkZXZvcHMgcHJvamVjdCBzcGVjaWZpY2FsbHksIHdlIGRvbid0IHdhbnQgdG8gaGF2ZSB0byBjb3B5IGFsbCBvZiB0aGF0XG4gKiB0b29saW5nIG92ZXIgdG8gdGhlIGRpc3RyaWJ1dGlvbiBqdXN0IHRvIG1ha2UgdGhlIHRlbXBsYXRlIHdvcmsuXG4gKlxuICogVGhpcyB3b3VsZCBhbHNvIGNhdXNlIGh1Z2UgaXNzdWVzIGZvciBvdmVycmlkZXMgYW5kIHdoYXQgbm90LiBTbyB3ZSBidW5kbGVcbiAqIHRoZSB0ZW1wbGF0ZSB0byByZWR1Y2UgdGhpcyBjb21wbGV4aXR5IGFuZCBtYWtlIHRoZSB0ZW1wbGF0ZSBndWFyYW50ZWVkIHRvXG4gKiB3b3JrIGV2ZW4gaW4gdGhlIHRhcmdldCBwcm9qZWN0cyB3aXRoIG11Y2ggbGVzcyBmdXNzLlxuICovXG5hc3luYyBmdW5jdGlvbiBjb3B5VGVtcGxhdGVzKCkge1xuICAvLyBXZSBub3cgbmVlZCB0byBjb3B5IGFueSBmaWxlcyB0aGF0IGFyZSBcInJlYWRcIiBmcm9tIHRoZSBiaW4gZm9sZGVyIHN1Y2ggYXNcbiAgLy8gdGVtcGxhdGVzLlxuICBjb25zb2xlLndhcm4oXG4gICAgY2hhbGsueWVsbG93QnJpZ2h0KFwiQ29weWluZyB0ZW1wbGF0ZSBmaWxlcyBmb3IgYmluIGRpc3RyaWJ1dGlvblwiKVxuICApO1xuXG4gIGNvbnN0IHRlbXBsYXRlU3JjID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLi8uLi90ZW1wbGF0ZVwiKTtcbiAgY29uc3QgdGVtcGxhdGVEaXN0ID0gcGF0aC5yZXNvbHZlKFwiLi9kaXN0L2Jpbi90ZW1wbGF0ZVwiKTtcblxuICBmcy5jb3B5U3luYyh0ZW1wbGF0ZVNyYywgdGVtcGxhdGVEaXN0KTtcblxuICAvLyBGaW5kIGFsbCBvZiB0aGUgaW5kZXggZmlsZXMgdGhhdCB3aWxsIG5lZWQgdG8gYmUgY29tcGlsZWRcbiAgY29uc3QgdGVtcGxhdGVzID0gZnNcbiAgICAucmVhZGRpclN5bmModGVtcGxhdGVEaXN0KVxuICAgIC5tYXAoKGZpbGUpID0+IHBhdGgucmVzb2x2ZSh0ZW1wbGF0ZURpc3QsIGZpbGUsIFwiaW5kZXgudHNcIikpXG4gICAgLmZpbHRlcigoZmlsZSkgPT4ge1xuICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgLy8gV2UgZ2V0IGFsbCBkZXBlbmRlbmNpZXMgb2YgdGhlIHByb2plY3QgYW5kIGNvbnNpZGVyIHRoZW0gZXh0ZXJuYWwuIFRoaXNcbiAgLy8gaW1wcm92ZXMgdGhlIGFiaWxpdHkgZm9yIHRoZSBjb2RlIHRvIGJlIGJ1bmRsZWQgc2luY2UgYmluIGNvbW1hbmRzIGhpdCBhXG4gIC8vIExPVCBvZiBzbmFncyBpbiBob3cgdGhleSBhcmUgaW1wbGVtZW50ZWQuXG4gIGNvbnN0IGRlcHMgPSBhd2FpdCB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzKCk7XG4gIGxldCBkaWRFcnJvciA9IGZhbHNlO1xuXG4gIC8vIEJ1aWxkIHRoZSB0ZW1wbGF0ZXNcbiAgZm9yIChjb25zdCB0ZW1wbGF0ZSBvZiB0ZW1wbGF0ZXMpIHtcbiAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgQnVuLmJ1aWxkKHtcbiAgICAgIGVudHJ5cG9pbnRzOiBbdGVtcGxhdGVdLFxuICAgICAgdGFyZ2V0OiBcImJ1blwiLFxuICAgICAgZXh0ZXJuYWw6IE9iamVjdC5rZXlzKGRlcHMpLFxuICAgICAgbWluaWZ5OiB0cnVlLFxuICAgIH0pO1xuXG4gICAgLy8gRW5zdXJlIHRoZSBidW5kbGUgcHJvZHVjZWQgcmVzdWx0cyBvciB0aGlzIG1lYW5zIHRoZSBidWlsZCBmYWlsZWRcbiAgICBpZiAoIXJlc3VsdHMuc3VjY2Vzcykge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgY2hhbGsucmVkQnJpZ2h0Qm9sZChcIkJ1aWxkIGZhaWxlZCBmb3IgdGVtcGxhdGU6XCIpLFxuICAgICAgICBjaGFsay5jeWFuQnJpZ2h0Qm9sZChcbiAgICAgICAgICBwYXRoLnJlbGF0aXZlKHRlbXBsYXRlRGlzdCwgcGF0aC5kaXJuYW1lKHRlbXBsYXRlKSlcbiAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIHJlc3VsdHMubG9ncykge1xuICAgICAgICAvLyBCdW4gd2lsbCBwcmV0dHkgcHJpbnQgdGhlIG1lc3NhZ2Ugb2JqZWN0XG4gICAgICAgIGNvbnNvbGUuZXJyb3IobWVzc2FnZSk7XG4gICAgICB9XG5cbiAgICAgIGRpZEVycm9yID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHJlc291cmNlIG9mIHJlc3VsdHMub3V0cHV0cykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIldyaXRpbmcgdGVtcGxhdGUgZW50cnkgZmlsZTpcIixcbiAgICAgICAgY2hhbGsuY3lhbkJyaWdodEJvbGQoXG4gICAgICAgICAgcGF0aC5yZWxhdGl2ZShcbiAgICAgICAgICAgIHRlbXBsYXRlRGlzdCxcbiAgICAgICAgICAgIHBhdGgucmVzb2x2ZShwYXRoLmRpcm5hbWUodGVtcGxhdGUpLCByZXNvdXJjZS5wYXRoKVxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgKTtcblxuICAgICAgYXdhaXQgQnVuLndyaXRlKFxuICAgICAgICBwYXRoLnJlc29sdmUocGF0aC5kaXJuYW1lKHRlbXBsYXRlKSwgcmVzb3VyY2UucGF0aCksXG4gICAgICAgIHJlc291cmNlXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGlmIChkaWRFcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBjaGFsay5yZWRCcmlnaHRCb2xkKFxuICAgICAgICBcIlNvbWUgdGVtcGxhdGVzIGhhdmUgZXJyb3JzIChzZWUgYWJvdmUpLCBzdG9wcGluZyB0aGUgYnVpbGQgcHJvY2Vzcy5cIlxuICAgICAgKVxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59XG5cbi8qKlxuICogQ29weSBhbnkgc3VwcG9ydGluZyBmaWxlcyB0aGF0IGFyZSByZXF1aXJlZCBmb3IgdGhlIGNvbW1hbmRzIHRvIHdvcmtcbiAqIGNvcnJlY3RseS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29weUFydGlmYWN0cygpIHtcbiAgLy8gQ29weSB0aGUgc2ggc2NyaXB0IGZvciBzdGFydGluZyB1cCB0aGUgYmluIGNvbW1hbmRzXG4gIGNvbnNvbGUud2FybihcbiAgICBjaGFsay55ZWxsb3dCcmlnaHQoXCJDb3B5aW5nIGVudHJ5IHNoZWxsIHNjcmlwdCBmb3IgYmluIGRpc3RyaWJ1dGlvblwiKVxuICApO1xuXG4gIGZzLmNvcHlTeW5jKFxuICAgIHBhdGgucmVzb2x2ZShcIi4vYmluL21haW4tZW50cnkuc2hcIiksXG4gICAgcGF0aC5yZXNvbHZlKFwiLi9kaXN0L2Jpbi9tYWluLWVudHJ5LnNoXCIpXG4gICk7XG5cbiAgZnMuY29weVN5bmMoXG4gICAgcGF0aC5yZXNvbHZlKFwiLi9iaW4vbWFpbi1lbnRyeS5wczFcIiksXG4gICAgcGF0aC5yZXNvbHZlKFwiLi9kaXN0L2Jpbi9tYWluLWVudHJ5LnBzMVwiKVxuICApO1xufVxuXG4vKipcbiAqIFRoaXMgcnVucyB0aGUgYnVpbGQgc2NyaXB0IGZvciBidW5kbGluZyB0aGUgZGV2b3BzIGVudmlyb25tZW50XG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWxlYXNlQmluKCkge1xuICBjb25zb2xlLndhcm4oY2hhbGsuY3lhbkJyaWdodChcIkJ1aWxkaW5nIGJpbiBjb21tYW5kcyBmb3IgdGhlIGRpc3RyaWJ1dGlvbi5cIikpO1xuXG4gIGlmIChcbiAgICAhZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCIuL2Jpbi9tYWluLnRzXCIpKSB8fFxuICAgICFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcIi4vYmluL21haW4tZW50cnkuc2hcIikpIHx8XG4gICAgaWdub3JlLmlnbm9yZXMoXCJiaW5cIilcbiAgKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgYFRyaWVkIHRvIG1ha2UgYSByZWxlYXNlIGZvciB0aGUgYmluIGNvbW1hbmRzLCBidXQgbm8gYmluL21haW4udHMgb3IgYmluL21haW4uc2ggZW50cnkgZmlsZSB3YXMgZm91bmQuIChvciB3YXMgZ2l0aWdub3JlZCk6XFxuXFx0JHtwYXRoLnJlc29sdmUoXG4gICAgICAgIFwiLi9iaW4vbWFpbi50c1wiXG4gICAgICApfVxcblxcdCR7cGF0aC5yZXNvbHZlKFwiLi9iaW4vbWFpbi5zaFwiKX1gXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBmcy5lbnN1cmVEaXJTeW5jKHBhdGgucmVzb2x2ZShcIi4vZGlzdFwiKSk7XG4gIGZzLmVuc3VyZURpclN5bmMocGF0aC5yZXNvbHZlKFwiLi9kaXN0L2Jpbi90ZW1wbGF0ZVwiKSk7XG5cbiAgYXdhaXQgYnVpbGRDb21tYW5kcygpO1xuICBhd2FpdCBidWlsZFNoaW0oKTtcbiAgYXdhaXQgY29weVRlbXBsYXRlcygpO1xuICBhd2FpdCBjb3B5QXJ0aWZhY3RzKCk7XG59XG4iLAogICAgImltcG9ydCAqIGFzIFZpdGUgZnJvbSBcInZpdGVcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB2aXRlRGV2b3BzU3RyaW5nUmVwbGFjZVBsdWdpbihcbiAgcmVwbGFjZW1lbnRzOiB7IGZyb206IHN0cmluZzsgdG86IHN0cmluZyB9W11cbik6IFZpdGUuUGx1Z2luT3B0aW9uIHtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBcInZpdGUtZGV2b3BzLXN0cmluZy1yZXBsYWNlLXBsdWdpblwiLFxuICAgIGVuZm9yY2U6IFwicHJlXCIsXG5cbiAgICBsb2FkKGlkOiBzdHJpbmcpIHtcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5yZXNvbHZlKGlkKTtcbiAgICAgIC8vIERldGVybWluZSBhcHByb3ByaWF0ZSBNSU1FIHR5cGVcbiAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSBbXCIudHNcIiwgXCIuanNcIiwgXCIudHN4XCIsIFwiLmpzeFwiXTtcblxuICAgICAgLy8gSWYgdGhlIGV4dGVuc2lvbiB0eXBlIHdhcyBlc3RhYmxpc2hlZCwgdGhpcyByZXNvdXJjZSB3aWxsIGJlIGJhc2U2NCBpbmxpbmVkLlxuICAgICAgaWYgKFxuICAgICAgICBmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSAmJlxuICAgICAgICBleHRlbnNpb25zLmluY2x1ZGVzKHBhdGguZXh0bmFtZShmaWxlUGF0aCkpICYmXG4gICAgICAgICFmaWxlUGF0aC5pbmNsdWRlcyhcIm5vZGVfbW9kdWxlc1wiKSAmJlxuICAgICAgICAhZmlsZVBhdGguaW5jbHVkZXMoXCJcXHgwMFwiKVxuICAgICAgKSB7XG4gICAgICAgIGxldCBjb2RlID0gZnMucmVhZEZpbGVTeW5jKGZpbGVQYXRoLCB7IGVuY29kaW5nOiBcInV0Zi04XCIgfSk7XG4gICAgICAgIC8vIFJlcGxhY2UgdGhlIGRpc2NvdmVyZWQgc3RyaW5nIGluIHRoZSBjb2RlXG4gICAgICAgIHJlcGxhY2VtZW50cy5mb3JFYWNoKChyZXBsYWNlbWVudCkgPT4ge1xuICAgICAgICAgIGNvZGUgPSBjb2RlLnJlcGxhY2UocmVwbGFjZW1lbnQuZnJvbSwgcmVwbGFjZW1lbnQudG8pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gY29kZTtcbiAgICAgIH1cbiAgICB9LFxuICB9O1xufVxuIiwKICAgICIvKipcbiAqIFRoaXMgaXMgYSBzcGVjaWFsaXplZCBwbHVnaW4gZm9yIHN1cHBvcnRpbmcgdGhlIGBhcHAvY29uZmlnYCBmb2xkZXIgdG8gaGF2ZVxuICogdGFyZ2V0dGVkIGVudmlyb25tZW50IGZpbGVzIHRoYXQgYXV0b21hdGljYWxseSBzd2FwIGZvciB0aGUgY29ycmVjdFxuICogZW52aXJvbm1lbnQgYmVpbmcgYnVpbHQgZm9yLlxuICpcbiAqIFRoZSBkZWZhdWx0IGNvbmZpZ3VyYXRpb24gd291bGQgYmUgdG8gaGF2ZSBgZW52YCBmaWxlcyBhdCB0aGUgcm9vdCBvZiB0aGVcbiAqIGZvbGRlcjpcbiAqXG4gKiBgYGBcbiAqIGFwcC9jb25maWc6XG4gKiAgIGVudi50c1xuICogICBlbnYucHJvZC50c1xuICogICBlbnYuc3RhZ2UudHNcbiAqICAgZW52LmN1c3RvbS50c1xuICogYGBgXG4gKlxuICogWW91IGhhdmUgdHdvIHdheXMgdG8gdGFyZ2V0IHRoZSBjb25maWd1cmF0aW9uOlxuICpcbiAqIEZvciBkZXZlbG9wbWVudCB1c2UgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIGBFTlZfTU9ERWAgdG8gdGFyZ2V0IHRoZVxuICogZW52aXJvbm1lbnQgb2YgY2hvaWNlIHN1Y2ggYXNcbiAqXG4gKiBgYGBcbiAqIEVOVl9NT0RFPWN1c3RvbVxuICogYGBgXG4gKlxuICogRm9yIHJlbGVhc2VzIHlvdSBzcGVjaWZ5IGEgYGJ1aWxkLmNvbmYuanNgIGZpbGUgaW4gdGhlIHJvb3Qgb2YgdGhlIHByb2plY3RcbiAqIHdpdGggdGhlIGNvbnRlbnRzOlxuICpcbiAqIGBgYFxuICogZXhwb3J0IGNvbnN0IEJVSUxEX1RBUkdFVFMgPSBbXCJwcm9kXCIsIFwiY3VzdG9tXCJdO1xuICogYGBgXG4gKlxuICogV2hpY2ggd2lsbCBjYXVzZSB0aGUgcmVsZWFzZSBwcm9jZXNzIHRvIG1ha2UgYSBkaXN0cmlidXRpb24gcGVyIHJlbGVhc2VcbiAqIHRhcmdldCBzcGVjaWZpZWQuXG4gKlxuICogZW52IHdpdGhpbiB0aGlzIGRldm9wcyBzeXN0ZW0gaXMgaW50ZW5kZWQgdG8gaGVscCBzbW9vdGhlIG92ZXIgYSBkZXYgc2VydmVyXG4gKiB3aXRoIHRoZSBkZXZlbG9wbWVudCBlbnZpcm9ubWVudCB0byBtYWtlIGl0IGVhc2llciB0byBpbnRlcmZhY2Ugd2l0aCBhbnlcbiAqIHJlbW90ZSBzZXJ2ZXIgdW5kZXIgYW55IGRvbWFpbi5cbiAqXG4gKiBIb3dldmVyLCB0aGUgY29uY2VwdCBjYW4gYmUgZXhwYW5kZWQgZm9yIHRoZSBkZXZlbG9wZXIgYnkgYWRkaW5nIHN1YiBmb2xkZXJzXG4gKiB0byBjcmVhdGUgbW9yZSBzcGVjaWZpYyBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9ucyB0aGF0IG1heSBiZSBuZWVkZWQgZm9yIGFcbiAqIGZyb250IGVuZCBidXQgTk9UIGEgc2VydmVyLiBPciBtYXkgYmUgaXQncyBqdXN0IGZvciBlYXNpZXIgb3JnYW5pemF0aW9uIG9mXG4gKiBjb25maWd1cmF0aW9uLiBPbmUgY29tbW9uIHVzZSB3b3VsZCBiZSBhIHRoZW1lOlxuICpcbiAqIGBgYFxuICogYXBwL2NvbmZpZzpcbiAqICAgZW52OlxuICogICAgIGVudi50c1xuICogICAgIGVudi5wcm9kLnRzXG4gKiAgICAgZW52LnN0YWdlLnRzXG4gKiAgICAgZW52LmN1c3RvbS50c1xuICogIHRoZW1lOlxuICogICAgIHRoZW1lLnRzXG4gKiAgICAgdGhlbWUucHJvZC50c1xuICogICAgIHRoZW1lLnN0YWdlLnRzXG4gKiAgICAgdGhlbWUuY3VzdG9tLnRzXG4gKiBgYGBcbiAqXG4gKiBZb3VyIGNvZGUgaW1wb3J0cyB0aGVzZSBjb25maWd1cmF0aW9ucyB2aWE6XG4gKlxuICogYGBgXG4gKiBpbXBvcnQgeyBUaGluZyB9IGZyb20gXCJjb25maWcvdGhpbmdcIjtcbiAqIGBgYFxuICpcbiAqIFRoZSBpbXBvcnRhbnQgZm9ybWF0dGluZyBjb25jZXJucyBoZXJlIGlzIHRvIGVuc3VyZSB5b3UgbWFrZSBhIGNvbW1vbiBlbnRyeVxuICogZmlsZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgdGhlIHBhcmVudCBmb2xkZXI6XG4gKlxuICogYGBgXG4gKiBhcHAvY29uZmlnOlxuICogICBlbnY6XG4gKiAgICAgZW52LnRzXG4gKiAgIHRoZW1lOlxuICogICAgIHRoZW1lLnRzXG4gKiBgYGBcbiAqXG4gKiBUaGVuIHlvdSBhZGQgYW55IGFkZGl0aW9uYWwgZW52aXJvbm1lbnRzIG9mIHRoZSBzYW1lIGZpbGUgbmFtZS5cbiAqIGA8ZmlsZT4uPGVudmlyb25tZW50Pi50c2AuXG4gKlxuICogVGhlIGZpbGUgd2l0aCBubyBlbnZpcm9ubWVudCBpbiBpdCdzIGZpbGUgcGF0aCBpcyB0aGUgZmlsZSB1c2VkIGluXG4gKiBkZXZlbG9wbWVudCB3aGVuIG5vIGVudmlyb25tZW50IGlzIHNwZWNpZmllZC5cbiAqL1xuXG5pbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IHZpdGVEZXZvcHNTdHJpbmdSZXBsYWNlUGx1Z2luIH0gZnJvbSBcIi4vdml0ZS1kZXZvcHMtc3RyaW5nLXJlcGxhY2UtcGx1Z2luLmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiB2aXRlRGV2b3BzQXBwQ29uZmlnUGx1Z2luKGVudj86IHN0cmluZyB8IG51bGwpIHtcbiAgLy8gVGhpcyBpcyBhIGZpeCBmb3IgcnVubmluZyBzdG9yeWJvb2sgaG93IHdlIHJ1biBpdCB3aGljaCBhZGp1c3RzIHRoZSBjd2RcbiAgLy8gdG8gdGhlIGRldm9wcyBmb2xkZXJcbiAgY29uc3QgcHJvamVjdFJvb3QgPSBwcm9jZXNzLmVudi5QUk9KRUNUX1JPT1QgfHwgXCIuXCI7XG4gIC8vIExvb2sgaW4gdGhlIGFwcCBjb25maWcgZm9sZGVyIGZvciBhbnkgZm9sZGVyIGVudmlyb25tZW50c1xuICBjb25zdCBjb25maWdQYXRoID0gcGF0aC5yZXNvbHZlKHByb2plY3RSb290LCBcImFwcC9jb25maWdcIik7XG5cbiAgaWYgKCFmcy5leGlzdHNTeW5jKGNvbmZpZ1BhdGgpKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgYHZpdGVEZXZvcHNBcHBDb25maWdQbHVnaW46ICR7Y2hhbGsuY3lhbkJyaWdodEJvbGQoXG4gICAgICAgIFwiTm8gYXBwL2NvbmZpZyBmb2xkZXIgZm91bmQuXCJcbiAgICAgICl9YFxuICAgICk7XG5cbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGFsbEZvbGRlcnMgPSBmcy5yZWFkZGlyU3luYyhjb25maWdQYXRoKS5maWx0ZXIoKGYpID0+IHtcbiAgICAgIHJldHVybiBmcy5zdGF0U3luYyhwYXRoLmpvaW4oY29uZmlnUGF0aCwgZikpLmlzRGlyZWN0b3J5KCk7XG4gICAgfSk7XG4gICAgY29uc3QgZm9sZGVyUGF0aHMgPSBhbGxGb2xkZXJzLm1hcCgoZikgPT4gcGF0aC5qb2luKGNvbmZpZ1BhdGgsIGYpKTtcbiAgICBjb25zdCByZXBsYWNlbWVudHMgPSBhbGxGb2xkZXJzLm1hcCgoZm9sZGVyLCBpKSA9PiB7XG4gICAgICAvLyBXaXRoIG5vIGVudmlyb25tZW50LCB3ZSBjaGVjayBmb3IgdGhlIHNwZWNpYWwgY2FzZSBvZiBhIC5sb2NhbCBmaWxlIGJlaW5nXG4gICAgICAvLyBwcmVzZW50IGluIHRoZSBmb2xkZXIuIElmIGl0IGlzLCB3ZSB1c2UgdGhhdCBhcyB0aGUgZW52aXJvbm1lbnQuXG4gICAgICBpZiAoIWVudikge1xuICAgICAgICAvLyBJZiBsb2NhbCBleGlzdHMsIGNyZWF0ZSBzcGVjaWFsIHJlcGxhY2VtZW50IHRvIHRhcmdldCB0aGUgbG9jYWwgZmlsZVxuICAgICAgICBpZiAoXG4gICAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oZm9sZGVyUGF0aHNbaV0sIGAke2ZvbGRlcn0ubG9jYWxgKSkgfHxcbiAgICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihmb2xkZXJQYXRoc1tpXSwgYCR7Zm9sZGVyfS5sb2NhbC5qc2ApKSB8fFxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGZvbGRlclBhdGhzW2ldLCBgJHtmb2xkZXJ9LmxvY2FsLnRzYCkpIHx8XG4gICAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oZm9sZGVyUGF0aHNbaV0sIGAke2ZvbGRlcn0ubG9jYWwudHN4YCkpIHx8XG4gICAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oZm9sZGVyUGF0aHNbaV0sIGAke2ZvbGRlcn0ubG9jYWwuanN4YCkpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGZyb206IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9XCJgLFxuICAgICAgICAgICAgICB0bzogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0ubG9jYWxcImAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBmcm9tOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS5qc1wiYCxcbiAgICAgICAgICAgICAgdG86IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LmxvY2FsLmpzXCJgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZnJvbTogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0udHNcImAsXG4gICAgICAgICAgICAgIHRvOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS5sb2NhbC50c1wiYCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE90aGVyd2lzZSwgdGhlIGRlZmF1bHQgZW52IGZpbGUgd2lsbCBiZSB1c2VkXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBbiBlbnZpcm9tZW50IHdhcyBzcGVjaWZpZWQsIHNvIHdlIHdpbGwgdGFyZ2V0IHRoYXQgZW52aXJvbm1lbnRcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHtcbiAgICAgICAgICBmcm9tOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfVwiYCxcbiAgICAgICAgICB0bzogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0uJHtlbnZ9XCJgLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZnJvbTogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0uanNcImAsXG4gICAgICAgICAgdG86IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LiR7ZW52fS5qc1wiYCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZyb206IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LnRzXCJgLFxuICAgICAgICAgIHRvOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS4ke2Vudn0udHNcImAsXG4gICAgICAgIH0sXG4gICAgICBdO1xuICAgIH0pO1xuXG4gICAgLy8gRmxhdHRlbiBhbGwgb2Ygb3VyIG1hcHBpbmdzIGludG8gYSBzaW5nbGUgYXJyYXlcbiAgICBjb25zdCBmbGF0dGVuZWQgPSByZXBsYWNlbWVudHMucmVkdWNlKChhY2MsIHZhbCkgPT4gYWNjLmNvbmNhdCh2YWwpLCBbXSk7XG5cbiAgICAvLyBTZWUgaWYgdGhlcmUncyBhIGJhc2UgZW52IGxvY2FsIGZpbGUgdG8gdXNlXG4gICAgY29uc3Qgc2hvdWxkVXNlTG9jYWxUb3BFbnYgPVxuICAgICAgIWVudiAmJlxuICAgICAgKGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGNvbmZpZ1BhdGgsIGBlbnYubG9jYWxgKSkgfHxcbiAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oY29uZmlnUGF0aCwgYGVudi5sb2NhbC5qc2ApKSB8fFxuICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihjb25maWdQYXRoLCBgZW52LmxvY2FsLnRzYCkpIHx8XG4gICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGNvbmZpZ1BhdGgsIGBlbnYubG9jYWwudHN4YCkpIHx8XG4gICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGNvbmZpZ1BhdGgsIGBlbnYubG9jYWwuanN4YCkpKTtcblxuICAgIC8vIEdlbmVyYXRlIG1hcHBpbmdzIGZvciB0aGUgdG9wIGxldmVsIGVudiBmaWxlLiBUaGlzIGlzIGEgbGVnYWN5IHN1cHBvcnRcbiAgICAvLyBmZWF0dXJlLlxuICAgIGNvbnN0IG1hcFRvcEVudiA9IHNob3VsZFVzZUxvY2FsVG9wRW52XG4gICAgICA/IC8vIFVzZSB0aGUgbG9jYWwgZW52IGZpbGUgaWYgaXQgZXhpc3RzXG4gICAgICAgIFtcbiAgICAgICAgICB7IGZyb206ICdcImNvbmZpZy9lbnZcIicsIHRvOiBgXCJjb25maWcvZW52LmxvY2FsXCJgIH0sXG4gICAgICAgICAgeyBmcm9tOiAnXCJjb25maWcvZW52LmpzXCInLCB0bzogYFwiY29uZmlnL2Vudi5sb2NhbC5qc1wiYCB9LFxuICAgICAgICAgIHsgZnJvbTogJ1wiY29uZmlnL2Vudi50c1wiJywgdG86IGBcImNvbmZpZy9lbnYubG9jYWwudHNcImAgfSxcbiAgICAgICAgXVxuICAgICAgOiBlbnZcbiAgICAgID8gLy8gVXNlIHRoZSBjb3JyZWN0IGVudmlyb25tZW50IHdoZW4gc3BlY2lmaWVkXG4gICAgICAgIFtcbiAgICAgICAgICB7IGZyb206ICdcImNvbmZpZy9lbnZcIicsIHRvOiBgXCJjb25maWcvZW52LiR7ZW52fVwiYCB9LFxuICAgICAgICAgIHsgZnJvbTogJ1wiY29uZmlnL2Vudi5qc1wiJywgdG86IGBcImNvbmZpZy9lbnYuJHtlbnZ9LmpzXCJgIH0sXG4gICAgICAgICAgeyBmcm9tOiAnXCJjb25maWcvZW52LnRzXCInLCB0bzogYFwiY29uZmlnL2Vudi4ke2Vudn0udHNcImAgfSxcbiAgICAgICAgXVxuICAgICAgOiAvLyBJZiBubyBlbnZpcm9ubWVudCB3YXMgc3BlY2lmaWVkLCBubyBtYXBwaW5nIHNob3VsZCBoYXBwZW5cbiAgICAgICAgW107XG5cbiAgICBjb25zdCBhbGxNYXBwaW5ncyA9IFtcbiAgICAgIC8vIFN1cHBvcnQgZW52IGZyb20gdGhlIHJvb3Qgb2YgdGhlIGNvbmZpZyBmb2xkZXJcbiAgICAgIC4uLm1hcFRvcEVudixcbiAgICAgIC8vIFN1cHBvcnQgYW55IGZvbGRlciBlbnZpcm9ubWVudHNcbiAgICAgIC4uLmZsYXR0ZW5lZCxcbiAgICBdO1xuXG4gICAgLy8gTG9nIHRoZSBtYXBwaW5nIGNvbmZpZ3VyYXRpb24gaW4gdXNlXG4gICAgaWYgKGFsbE1hcHBpbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUud2FybihgXG5cbiAgJHtjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiVXNpbmcgdGhlIGZvbGxvd2luZyBtYXBwaW5ncyBmb3IgYXBwIGNvbmZpZzpcIil9XG5cbiAgXFx0JHtjaGFsay5jeWFuQnJpZ2h0Qm9sZChcbiAgICBhbGxNYXBwaW5ncy5tYXAoKG0pID0+IGBcXG4gICR7bS5mcm9tfSA9PiAke20udG99YCkuam9pbihcIlxcblxcdFwiKVxuICApfVxuXG4gICAgICBgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdml0ZURldm9wc1N0cmluZ1JlcGxhY2VQbHVnaW4oYWxsTWFwcGluZ3MpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlKTtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgY2hhbGsucmVkQnJpZ2h0Qm9sZChgXG4gICAgICBBcHAgY29uZmlnIHBsdWdpbiBmYWlsZWQgdG8gbG9hZC4gVGhlIGRlZmF1bHQgY29uZmlnIHBhdGhzIHdpbGwgYmUgdXNlZFxuICAgICAgYW5kIGFueSBzcGVjaWZpYyBlbnZpcm9ubWVudCByZXF1ZXN0ZWQgd2lsbCBiZSBpZ25vcmVkLlxuICAgIGApXG4gICAgKTtcbiAgfVxufVxuIiwKICAgICJpbXBvcnQgKiBhcyBWaXRlIGZyb20gXCJ2aXRlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgSWdub3JlIGZyb20gXCJpZ25vcmVcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBidWlsZFZpdGVDb25maWcgfSBmcm9tIFwiLi4vLi4vYnVpbGQtdml0ZS1jb25maWcuanNcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3RWZXJzaW9uIH0gZnJvbSBcIi4uLy4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LXZlcnNpb24uanNcIjtcbmltcG9ydCB7IHZpdGVEZXZvcHNBcHBDb25maWdQbHVnaW4gfSBmcm9tIFwiLi4vLi4vLi4vLi4vc2hpbS92aXRlLXBsdWdpbnMvdml0ZS1kZXZvcHMtYXBwLWNvbmZpZy1wbHVnaW4uanNcIjtcblxuY29uc3QgZ2l0SWdub3JlUGF0aCA9IHBhdGgucmVzb2x2ZShcIi5naXRpZ25vcmVcIik7XG5sZXQgaWdub3JlID0gSWdub3JlLmRlZmF1bHQoKTtcblxuaWYgKGZzLmV4aXN0c1N5bmMoZ2l0SWdub3JlUGF0aCkpIHtcbiAgaWdub3JlID0gaWdub3JlLmFkZChmcy5yZWFkRmlsZVN5bmMoZ2l0SWdub3JlUGF0aCkudG9TdHJpbmcoKSk7XG59XG5cbi8qKlxuICogVGhpcyBwZXJmb3JtcyB0aGUgYnVuZGxpbmcgcHJvY2VzcyBmb3IgZGlzdHJpYnV0aW9uLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVsZWFzZUNsaWVudChlbnY6IHN0cmluZykge1xuICBjb25zb2xlLndhcm4oY2hhbGsuY3lhbkJyaWdodChcIkJ1aWxkaW5nIGNsaWVudCBmaWxlcyBmb3IgdGhlIGRpc3RyaWJ1dGlvbi5cIikpO1xuXG4gIC8vIFByb3ZpZGUgdGhlIGJ1bmRsaW5nIHByb2Nlc3MgdGhlIGN1cnJlbnQgYnVpbGQgdmVyc2lvbi4gVGhpcyBhbGxvd3NcbiAgLy8gcHJpbnRpbmcgdGhlIHZlcnNpb24gaW4gYSBtZWFuaW5nZnVsIHdheSBmb3IgZGVidWdnaW5nLlxuICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiA9XG4gICAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gfHwgKGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCkpO1xuXG4gIGlmIChwcm9jZXNzLmVudi5GT1JDRV9CVUlMRCAhPT0gXCJ0cnVlXCIpIHtcbiAgICBpZiAoXG4gICAgICAhZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCJhcHAvY2xpZW50XCIpKSB8fFxuICAgICAgaWdub3JlLmlnbm9yZXMoXCJhcHAvY2xpZW50XCIpXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgVHJpZWQgdG8gbWFrZSBhIHJlbGVhc2UgZm9yIHRoZSB3ZWIgYXBwIGNsaWVudCwgYnV0IG5vIGFwcC9jbGllbnQgZW50cnkgZmlsZSB3YXMgZm91bmQuIChvciB3YXMgZ2l0aWdub3JlZCk6XFxuXFx0JHtwYXRoLnJlc29sdmUoXG4gICAgICAgICAgXCJhcHAvY2xpZW50XCJcbiAgICAgICAgKX1gXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IG5vZGVFbnZCYWsgPSBwcm9jZXNzLmVudi5OT0RFX0VOVjtcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBcInByb2R1Y3Rpb25cIjtcblxuICBjb25zb2xlLndhcm4oXG4gICAgYFJlbGVhc2luZyAke2NoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJhcHAvY2xpZW50XCIpfSBmb3IgRW52aXJvbm1lbnQ6YCxcbiAgICBjaGFsay5jeWFuQnJpZ2h0Qm9sZChlbnYpXG4gICk7XG4gIHByb2Nlc3MuZW52LkJVSUxEX0VOViA9IGVudjtcblxuICBjb25zdCBjb25maWcgPSBhd2FpdCBidWlsZFZpdGVDb25maWcoKTtcblxuICAvLyBNYWtlIHN1cmUgb3VyIGVudmlyb25tZW50IGlzIHJlcGxhY2VkIGZvciB0aGUgYnVpbGRcbiAgY29uZmlnLnBsdWdpbnMgPSBbdml0ZURldm9wc0FwcENvbmZpZ1BsdWdpbihlbnYpLCAuLi4oY29uZmlnLnBsdWdpbnMgfHwgW10pXTtcblxuICBjb25maWcubG9nTGV2ZWwgPSBcIndhcm5cIjtcbiAgY29uZmlnLm1vZGUgPSBcInByb2R1Y3Rpb25cIjtcbiAgY29uZmlnLnJvb3QgPSBwYXRoLnJlc29sdmUoXCJhcHAvY2xpZW50XCIpO1xuICBjb25maWcuYnVpbGQhLm91dERpciA9IHBhdGgucmVzb2x2ZShcImRpc3QvYXBwL2NsaWVudFwiLCBlbnYpO1xuICBjb25maWcuYnVpbGQhLndhdGNoID0gdm9pZCAwO1xuICBjb25maWcuYnVpbGQhLnJvbGx1cE9wdGlvbnMhLm91dHB1dCA9IHtcbiAgICBkaXI6IGNvbmZpZy5idWlsZCEub3V0RGlyLFxuICAgIGVudHJ5RmlsZU5hbWVzOiBcImluZGV4LmpzXCIsXG4gICAgY2h1bmtGaWxlTmFtZXM6IFwiaW5kZXguanNcIixcbiAgICBtYW51YWxDaHVua3M6IHVuZGVmaW5lZCxcbiAgfTtcblxuICBhd2FpdCBWaXRlLmJ1aWxkKGNvbmZpZyk7XG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gbm9kZUVudkJhaztcblxuICAvLyBSdW4gYSBxdWljayBjaGVjayB0byBtYWtlIHN1cmUgdGhlIGRpc3RyaWJ1dGlvbiBmaWxlIHdhcyBtYWRlXG4gIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoYGRpc3QvYXBwL2NsaWVudC8ke2Vudn0vaW5kZXguanNgKSkpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJcXG5cXG5GYWlsZWQgdG8gY3JlYXRlIENsaWVudCBvdXRwdXQgYnVuZGxlLiBFeGl0aW5nIHByb2Nlc3MuLi5cXG5cXG5cIlxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59XG4iLAogICAgImltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4vZXhlYy1zeW5jLmpzXCI7XG5pbXBvcnQgeyBnZXRQYWNrYWdlTWFuYWdlciB9IGZyb20gXCIuL2dldC1wYWNrYWdlLW1hbmFnZXIuanNcIjtcbmltcG9ydCB7IGlzRGVmaW5lZCB9IGZyb20gXCIuLi91dGlsL3R5cGVzLmpzXCI7XG5cbi8qKlxuICogRXhlY3V0ZXMgYW4gYG5weCA8Y29tbWFuZD5gIGluIHRoZSBjdXJyZW50IGNvbnRleHQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBleGVjU2NyaXB0WChcbiAgYXJnczogKHN0cmluZyB8IHVuZGVmaW5lZCB8IG51bGwpW10gPSBbXSxcbiAgb3B0aW9ucz86IHtcbiAgICBleGNsdWRlQnVuRmxhZz86IGJvb2xlYW47XG4gIH1cbikge1xuICBjb25zdCBtYW5hZ2VyID0gYXdhaXQgZ2V0UGFja2FnZU1hbmFnZXIoKTtcblxuICBpZiAoZXhlY1NjcmlwdFgub3B0aW1pemUpIHtcbiAgICBpZiAobWFuYWdlclsxXSA9PT0gXCJidW54XCIpIHtcbiAgICAgIHJldHVybiBleGVjU3luYyhcbiAgICAgICAgbWFuYWdlclsxXSxcbiAgICAgICAgW29wdGlvbnM/LmV4Y2x1ZGVCdW5GbGFnID8gbnVsbCA6IFwiLS1idW5cIiwgLi4uYXJnc10uZmlsdGVyKGlzRGVmaW5lZClcbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGV4ZWNTeW5jKG1hbmFnZXJbMV0sIFsuLi5hcmdzXSk7XG59XG5cbmV4ZWNTY3JpcHRYLm9wdGltaXplID0gdHJ1ZTtcbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGV4ZWNTY3JpcHRYIH0gZnJvbSBcIi4uLy4uLy4uL2V4ZWMvZXhlYy1zY3JpcHR4LmpzXCI7XG5cbi8qKlxuICogR2VuZXJhdGVzIHR5cGVzIGZvciB0aGUgYnVpbGQgZm9yIHRoZSB0YXJnZXQgcHJvamVjdCB1aSBmb2xkZXIuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWxlYXNlTGlicmFyeVR5cGVzKCkge1xuICAvLyBNdXN0IGhhdmUgYSBjb21wb25lbnQgbGliIGZvbGRlciB0byBjb25zaWRlclxuICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwidWlcIikpKSByZXR1cm47XG4gIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgZm9sZGVyIHRvIGluamVjdCB0aGUgdHlwZXMgaW50b1xuICBmcy5lbnN1cmVEaXIocGF0aC5yZXNvbHZlKFwiZGlzdC90eXBlc1wiKSk7XG4gIC8vIEdlbmVyYXRlIHRoZSAuZC50cyBmaWxlcyB1c2luZyB0c2MgY29tbWFuZCB2aWEgYnVueFxuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIkdlbmVyYXRpbmcgLmQudHMgZmlsZXMuLi5cIikpO1xuXG4gIC8vIFBlcmZvcm0gdGhlIGR0cyBnZW5lcmF0aW9uXG4gIGV4ZWNTY3JpcHRYKFtcbiAgICBcInRzY1wiLFxuICAgIFwiLS1lbWl0RGVjbGFyYXRpb25Pbmx5XCIsXG4gICAgXCItLWRlY2xhcmF0aW9uXCIsXG4gICAgXCItLW91dERpclwiLFxuICAgIFwiZGlzdC90eXBlc1wiLFxuICAgIFwiLS1wcm9qZWN0XCIsXG4gICAgcGF0aC5yZXNvbHZlKFwidHNjb25maWcuanNvblwiKSxcbiAgXSk7XG5cbiAgLy8gRGVsZXRlIHRoZSBnZW5lcmF0ZWQgdHlwZSBvZiBldmVyeSBmb2xkZXIgRVhDRVBUIHRoZSB1aSBhbmQgdXRpbCBmb2xkZXJcbiAgY29uc3QgZm9sZGVycyA9IGZzLnJlYWRkaXJTeW5jKHBhdGgucmVzb2x2ZShcImRpc3QvdHlwZXNcIikpO1xuICBmb3IgKGNvbnN0IGZvbGRlciBvZiBmb2xkZXJzKSB7XG4gICAgaWYgKGZvbGRlciA9PT0gXCJ1aVwiIHx8IGZvbGRlciA9PT0gXCJ1dGlsXCIpIGNvbnRpbnVlO1xuICAgIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3dCcmlnaHQoYFJlbW92aW5nIHR5cGVzIGZvciBmb2xkZXI6ICR7Zm9sZGVyfWApKTtcbiAgICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcImRpc3QvdHlwZXNcIiwgZm9sZGVyKSk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRhcmdldFByb2plY3ROYW1lKCkge1xuICBjb25zdCBwYWNrYWdlSnNvbiA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICByZXR1cm4gcGFja2FnZUpzb24ubmFtZSB8fCBcIlwiO1xufVxuIiwKICAgICJpbXBvcnQgKiBhcyBWaXRlIGZyb20gXCJ2aXRlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgSWdub3JlIGZyb20gXCJpZ25vcmVcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBidWlsZFZpdGVDb25maWcgfSBmcm9tIFwiLi4vLi4vYnVpbGQtdml0ZS1jb25maWcuanNcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IHJlbGVhc2VMaWJyYXJ5VHlwZXMgfSBmcm9tIFwiLi9yZWxlYXNlLWxpYnJhcnktdHlwZXMuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3REZXBlbmRlbmNpZXMgfSBmcm9tIFwiLi4vLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtZGVwZW5kZW5jaWVzLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0TmFtZSB9IGZyb20gXCIuLi8uLi8uLi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC1uYW1lLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0VmVyc2lvbiB9IGZyb20gXCIuLi8uLi8uLi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC12ZXJzaW9uLmpzXCI7XG5cbmNvbnN0IGdpdElnbm9yZVBhdGggPSBwYXRoLnJlc29sdmUoXCIuZ2l0aWdub3JlXCIpO1xubGV0IGlnbm9yZSA9IElnbm9yZS5kZWZhdWx0KCk7XG5cbmlmIChmcy5leGlzdHNTeW5jKGdpdElnbm9yZVBhdGgpKSB7XG4gIGlnbm9yZSA9IGlnbm9yZS5hZGQoZnMucmVhZEZpbGVTeW5jKGdpdElnbm9yZVBhdGgpLnRvU3RyaW5nKCkpO1xufVxuXG4vKipcbiAqIEJ1bmRsZXMgdGhlIGxpYnJhcnkgZm9yIGRpc3RyaWJ1dGlvblxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVsZWFzZUxpYnJhcnkoKSB7XG4gIGNvbnNvbGUud2FybihjaGFsay5jeWFuQnJpZ2h0KFwiQ29weWluZyB1aSBmaWxlcyBmb3IgdGhlIGRpc3RyaWJ1dGlvbi5cIikpO1xuXG4gIC8vIFByb3ZpZGUgdGhlIGJ1bmRsaW5nIHByb2Nlc3MgdGhlIGN1cnJlbnQgYnVpbGQgdmVyc2lvbi4gVGhpcyBhbGxvd3NcbiAgLy8gcHJpbnRpbmcgdGhlIHZlcnNpb24gaW4gYSBtZWFuaW5nZnVsIHdheSBmb3IgZGVidWdnaW5nLlxuICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiA9XG4gICAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gfHwgKGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCkpO1xuXG4gIGlmICghcHJvY2Vzcy5lbnYuRk9SQ0VfQlVJTEQpIHtcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwidWlcIikpIHx8IGlnbm9yZS5pZ25vcmVzKFwidWlcIikpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBcIk5vIGxpYnJhcnkgcHJvamVjdCBmb3VuZCAob3Igd2FzIGdpdGlnbm9yZWQpIGZvciBidW5kbGluZyByZWxlYXNlIGF0OlxcblxcdCR7cGF0aC5yZXNvbHZlKFxuICAgICAgICAgIFwidWlcIlxuICAgICAgICApfWBcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgY29uc29sZS53YXJuKGNoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJTdGFydGluZyBWaXRlIGNsaWVudCBidWlsZC4uLlwiKSk7XG4gIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCJ1aS9pbmRleC50c1wiKSkpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJUaGUgVUkgZm9sZGVyIHByb2plY3QgaGFzIG5vIGluZGV4LnRzIGVudHJ5IHBvaW50IHRvIGNyZWF0ZSB0aGUgbGlicmFyeS5cIlxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gVXBkYXRlIHRoZSAuZC50cyBmaWxlcyBmb3IgdGhlIGxpYnJhcnkgcHJvamVjdFxuICBhd2FpdCByZWxlYXNlTGlicmFyeVR5cGVzKCk7XG5cbiAgY29uc29sZS53YXJuKGNoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJCdWlsZGluZyBsaWJyYXJ5IGJ1bmRsZS4uLlwiKSk7XG4gIGNvbnN0IGNvbmZpZyA9IGF3YWl0IGJ1aWxkVml0ZUNvbmZpZygpO1xuXG4gIGNvbmZpZy5sb2dMZXZlbCA9IFwid2FyblwiO1xuICBjb25maWcucm9vdCA9IHBhdGgucmVzb2x2ZShcInVpXCIpO1xuICBjb25maWcuYnVpbGQhLmxpYiA9IHtcbiAgICAvLyBDb3VsZCBhbHNvIGJlIGEgZGljdGlvbmFyeSBvciBhcnJheSBvZiBtdWx0aXBsZSBlbnRyeSBwb2ludHNcbiAgICBlbnRyeTogcGF0aC5yZXNvbHZlKFwidWkvaW5kZXgudHNcIiksXG4gICAgbmFtZTogKGF3YWl0IHRhcmdldFByb2plY3ROYW1lKCkpLnNwbGl0KFwiQFwiKS5qb2luKFwiXCIpLnNwbGl0KFwiL1wiKS5qb2luKFwiX1wiKSxcbiAgICAvLyBUaGUgcHJvcGVyIGV4dGVuc2lvbnMgd2lsbCBiZSBhZGRlZFxuICAgIGZpbGVOYW1lOiBcImluZGV4XCIsXG4gIH07XG5cbiAgY29uZmlnLm1vZGUgPSBcInByb2R1Y3Rpb25cIjtcbiAgY29uZmlnLnJvb3QgPSBwYXRoLnJlc29sdmUoXCJhcHAvY2xpZW50XCIpO1xuICBjb25maWcuYnVpbGQhLm91dERpciA9IHBhdGgucmVzb2x2ZShcImRpc3QvdWlcIik7XG4gIGNvbmZpZy5idWlsZCEud2F0Y2ggPSB2b2lkIDA7XG4gIGNvbmZpZy5idWlsZCEucm9sbHVwT3B0aW9ucyEub3V0cHV0ID0ge1xuICAgIGRpcjogY29uZmlnLmJ1aWxkIS5vdXREaXIsXG4gICAgZW50cnlGaWxlTmFtZXM6IFwiaW5kZXguanNcIixcbiAgICBjaHVua0ZpbGVOYW1lczogXCJpbmRleC5qc1wiLFxuICAgIG1hbnVhbENodW5rczogdW5kZWZpbmVkLFxuICB9O1xuXG4gIGNvbnN0IGV4dGVybmFsID0gT2JqZWN0LmtleXMoYXdhaXQgdGFyZ2V0UHJvamVjdERlcGVuZGVuY2llcygpKTtcbiAgY29uc29sZS53YXJuKFxuICAgIFwiRXh0ZXJuYWxpemVkIExpYnJhcmllcyB0aGF0IHdpbGwgbm90IGJlIGluY2x1ZGVkIGluIHRoZSBidW5kbGU6XCIsXG4gICAgZXh0ZXJuYWxcbiAgKTtcblxuICBjb25maWcuYnVpbGQhLnJvbGx1cE9wdGlvbnMgPSB7XG4gICAgLi4uY29uZmlnLmJ1aWxkIS5yb2xsdXBPcHRpb25zLFxuICAgIGV4dGVybmFsLFxuICB9O1xuXG4gIGF3YWl0IFZpdGUuYnVpbGQoY29uZmlnKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3RWZXJzaW9uIH0gZnJvbSBcIi4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LXZlcnNpb24uanNcIjtcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi4vLi4vdXRpbC93YWl0LmpzXCI7XG5cbi8qKlxuICogVGhpcyBwZXJmb3JtcyB0aGUgYnVuZGxpbmcgcHJvY2VzcyBmb3IgZGlzdHJpYnV0aW9uLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVsZWFzZVN0b3JpZXMoKSB7XG4gIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OID1cbiAgICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiB8fCAoYXdhaXQgdGFyZ2V0UHJvamVjdFZlcnNpb24oKSk7XG5cbiAgY29uc29sZS53YXJuKGNoYWxrLmN5YW5CcmlnaHQoXCJDb3B5aW5nIHN0b3J5IGZpbGVzIGZvciB0aGUgZGlzdHJpYnV0aW9uLlwiKSk7XG4gIGNvbnN0IG91dHB1dFBhdGggPSBwYXRoLnJlc29sdmUoXCJkaXN0L3N0b3JpZXNcIik7XG4gIGNvbnN0IHN0b3JpZXNQYXRoID0gcGF0aC5yZXNvbHZlKFwidWkvc3Rvcmllc1wiKTtcbiAgY29uc3QgZGlzdFBhdGggPSBwYXRoLnJlc29sdmUoXCJkaXN0XCIpO1xuXG4gIGlmICghZnMuZXhpc3RzU3luYyhzdG9yaWVzUGF0aCkpIHtcbiAgICBjb25zb2xlLmVycm9yKGBDb3VsZCBub3QgZmluZCBzdG9yaWVzIGRpcmVjdG9yeTpcXG5cXHQke3N0b3JpZXNQYXRofWApO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIEVuc3VyZSB0aGUgZGlyZWN0b3J5IGZvciB0aGUgc3RvcmllcyBleGlzdHMgaW4gdGhlIHN5c3RlbVxuICBmcy5lbnN1cmVEaXJTeW5jKG91dHB1dFBhdGgpO1xuICAvLyBEZWVwIGNvcHkgdGhlIHN0b3JpZXMgZm9sZGVyIHRvIHRoZSBkaXN0cmlidXRpb25cbiAgZnMuY29weVN5bmMoc3Rvcmllc1BhdGgsIG91dHB1dFBhdGgpO1xuXG4gIC8vIEdldCB0aGUgbmFtZSBvZiB0aGlzIHByb2plY3QgZnJvbSBpdCdzIHBhY2thZ2UuanNvblxuICBjb25zdCBwYWNrYWdlSnNvblBhdGggPSBwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIik7XG4gIGNvbnN0IHByb2plY3RQYWNrYWdlID0gZnMucmVhZEpTT05TeW5jKHBhY2thZ2VKc29uUGF0aCk7XG5cbiAgLy8gV2Ugbm93IG5lZWQgdG8gd3JpdGUgYSBzaW1wbGUgcGFja2FnZS5qc29uIGZpbGUgdG8gdGhlIGRpc3QgZm9sZGVyIHRvXG4gIC8vIGVuc3VyZSB0aGUgc3RvcmllcyBpbXBvcnRzIHJlZmVyZW5jZSB0aGUgc2FtZSBsaWJyYXJ5IHZpYSByZWxhdGl2ZSBwYXRoXG4gIC8vIGltcG9ydHMuXG4gIC8vIFRoaXMgY29ycmVjdHMgaW1wb3J0cyB0aGF0IGRvOiBmcm9tIFwiLi4vLi4vLi5cIlxuICBjb25zdCBwYWNrYWdlSnNvbiA9IHtcbiAgICBuYW1lOiBwcm9qZWN0UGFja2FnZS5uYW1lIHx8IFwidW5rbm93blwiLFxuICAgIHByaXZhdGU6IHRydWUsXG4gICAgdHlwZTogXCJtb2R1bGVcIixcbiAgICBtYWluOiBcIi4vdWkvaW5kZXguanNcIixcbiAgICB0eXBlczogXCIuL3R5cGVzL3VpL2luZGV4LmQudHNcIixcbiAgICBkZXBlbmRlbmNpZXM6IHt9LFxuICAgIHJlcG9zaXRvcnk6IHt9LFxuICAgIHNjcmlwdHM6IHt9LFxuICAgIGRldkRlcGVuZGVuY2llczoge30sXG4gIH07XG5cbiAgY29uc29sZS53YXJuKFxuICAgIFwiV3JpdGluZyBkaXN0cmlidXRpb24gcGFja2FnZS5qc29uOlwiLFxuICAgIHBhdGgucmVzb2x2ZShkaXN0UGF0aCwgXCJwYWNrYWdlLmpzb25cIilcbiAgKTtcbiAgZnMud3JpdGVKU09OU3luYyhwYXRoLnJlc29sdmUoZGlzdFBhdGgsIFwicGFja2FnZS5qc29uXCIpLCBwYWNrYWdlSnNvbik7XG5cbiAgLy8gTGV0IHRoZSB3cml0ZSBjb21wbGV0ZVxuICBhd2FpdCB3YWl0KDUwMCk7XG5cbiAgLy8gV3JpdGUgYSBkaXN0cmlidXRpb24gZm9sZGVyIGNhbGxlZCBjb21wb25lbnRzIHdoaWNoIHdpbGwgc2ltcGx5IGJlIGFcbiAgLy8gcGFja2FnZSBqc29uIGNvbmZpZ3VyYXRpb24gdGhhdCByb3V0ZXMgdGhlIGltcG9ydCB0byB0aGUgdWkgcmVsZWFzZVxuICBmcy5lbnN1cmVEaXJTeW5jKHBhdGgucmVzb2x2ZShkaXN0UGF0aCwgXCJjb21wb25lbnRzXCIpKTtcblxuICAvLyBBbHNvIHdyaXRlIHRoZSBwYWNrYWdlLmpzb24gZmlsZSB0byB0aGUgY29tcG9uZW50cyBmb2xkZXIgdG8gcmVyb3V0ZVxuICAvLyBjb21wb25lbnQgaW1wb3J0cyB0byB0aGUgdWkgcmVsZWFzZSBkaXN0cmlidXRpb24gYXMgd2VsbC5cbiAgLy8gVGhpcyBjb3JyZWN0cyBpbXBvcnRzIHRoYXQgZG86IGZyb20gXCIuLi8uLi8uLi9jb21wb25lbnRzXCJcbiAgcGFja2FnZUpzb24ubWFpbiA9IFwiLi4vdWkvaW5kZXguanNcIjtcbiAgcGFja2FnZUpzb24udHlwZXMgPSBcIi4uL3R5cGVzL3VpL2luZGV4LmQudHNcIjtcblxuICBjb25zb2xlLndhcm4oXG4gICAgXCJXcml0aW5nIGRpc3RyaWJ1dGlvbiBwYWNrYWdlLmpzb246XCIsXG4gICAgcGF0aC5yZXNvbHZlKGRpc3RQYXRoLCBcImNvbXBvbmVudHMvcGFja2FnZS5qc29uXCIpXG4gICk7XG4gIGZzLndyaXRlSlNPTlN5bmMoXG4gICAgcGF0aC5yZXNvbHZlKGRpc3RQYXRoLCBcImNvbXBvbmVudHMvcGFja2FnZS5qc29uXCIpLFxuICAgIHBhY2thZ2VKc29uXG4gICk7XG5cbiAgLy8gTGV0IHRoZSB3cml0ZSBjb21wbGV0ZVxuICBhd2FpdCB3YWl0KDUwMCk7XG4gIGNvbnNvbGUud2FybihcIkZpbmlzaGVkIGNvcHlpbmcgc3Rvcmllcy5cIik7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi9saWIvdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgZXhlY1NjcmlwdCB9IGZyb20gXCIuLi8uLi9saWIvZXhlYy9leGVjLXNjcmlwdC5qc1wiO1xuaW1wb3J0IHsgZ2l0UmV0dXJuVG9EZXYgfSBmcm9tIFwiLi4vLi4vbGliL2dpdC9naXQtcmV0dXJuLXRvLWRldi5qc1wiO1xuaW1wb3J0IHsgcHJvbXB0Q29uZmlybSB9IGZyb20gXCIuLi8uLi9saWIvcHJvbXB0L3Byb21wdC1jb25maXJtLmpzXCI7XG5pbXBvcnQgeyByZWxlYXNlQmluIH0gZnJvbSBcIi4uLy4uL2xpYi9idWlsZC9iaW4vcmVsZWFzZS1iaW4uanNcIjtcbmltcG9ydCB7IHJlbGVhc2VDbGllbnQgfSBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9yZWxlYXNlLWNsaWVudC5qc1wiO1xuaW1wb3J0IHsgcmVsZWFzZUxpYnJhcnkgfSBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL2xpYnJhcnkvdml0ZS9yZWxlYXNlLWxpYnJhcnkuanNcIjtcbmltcG9ydCB7IHJlbGVhc2VTdG9yaWVzIH0gZnJvbSBcIi4uLy4uL2xpYi9idWlsZC9saWJyYXJ5L3JlbGVhc2Utc3Rvcmllcy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyBhbGwgb2YgdGhlIHBhY2thZ2UganNvbiBzZXR0aW5ncyBhbmQgZW5zdXJlcyB0aGVcbiAqIHJlcG9zaXRvcmllcyBsaXN0ZWQgYXJlIHZhbGlkIGZvciB1c2Ugd2l0aGluIHRoaXMgY29udGV4dC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVSZWxlYXNlKCkge1xuICBpZiAocHJvY2Vzcy5lbnYuUVVJQ0tfQlVJTEQgPT09IFwidHJ1ZVwiKSByZXR1cm47XG4gIC8vIFJ1biB0aGUgdmlldy1yZWxlYXNlIGNvbW1hbmQgdG8gc2VlIGlmIHRoZSByZWxlYXNlIHByb2Nlc3MgcHJvZHVjZXNcbiAgLy8gYSB2YWxpZCBvdXRwdXRcbiAgLy8gUnVuIHRoZSB2aWV3LXJlbGVhc2Ugc2NyaXB0XG4gIGF3YWl0IGV4ZWNTY3JpcHQoXCJyZWxlYXNlXCIsIFtcInZpZXdcIl0pO1xuXG4gIC8vIEFzayBpZiB0aGUgdmlldy1yZWxlYXNlIHNjcmlwdCBsb29rcyBnb29kIGFuZCBzaG91bGQgY29udGludWVcbiAgY29uc3Qgc2hvdWxkQ29udGludWUgPSBhd2FpdCBwcm9tcHRDb25maXJtKFxuICAgIFwiXFxuU2hvdWxkIHRoZSByZWxlYXNlIGNvbnRpbnVlIGJlaW5nIG1hZGU/XCJcbiAgKTtcblxuICAvLyBRdWl0IHRoZSBwcm9jZXNzIGlmIHRoZSB2aWV3IHJlbGVhc2UgZGlkIG5vdCB3b3JrXG4gIGlmICghc2hvdWxkQ29udGludWUpIHtcbiAgICBhd2FpdCBnaXRSZXR1cm5Ub0Rldih0cnVlKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHBlcmZvcm1zIGFsbCBidW5kbGluZyBwcm9jZWR1cmVzIGFuZCBzZXQgdXAgbmVlZGVkIHRvIGJ1bmRsZSB0aGVcbiAqIHByb2plY3QuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGJ1bmRsZVByb2plY3QoKSB7XG4gIGNvbnNvbGUud2FybihcbiAgICBcIkdhdGhlcmluZyBidWlsZCB0YXJnZXRzIGZyb206XCIsXG4gICAgY2hhbGsueWVsbG93QnJpZ2h0KHBhdGgucmVzb2x2ZShcImJ1aWxkLmNvbmYuanNcIikpXG4gICk7XG4gIGNvbnN0IGJ1aWxkRW52aXJvbm1lbnRzID0gKGF3YWl0IGltcG9ydChwYXRoLnJlc29sdmUoXCJidWlsZC5jb25mLmpzXCIpKSlcbiAgICAuQlVJTERfVEFSR0VUUztcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBcInByb2R1Y3Rpb25cIjtcblxuICBjb25zb2xlLndhcm4oXG4gICAgXCJCdWlsZGluZyBlbnZpcm9ubWVudHNcIixcbiAgICBjaGFsay5yZWRCcmlnaHRCb2xkKEpTT04uc3RyaW5naWZ5KGJ1aWxkRW52aXJvbm1lbnRzKSlcbiAgKTtcblxuICBpZiAoIUFycmF5LmlzQXJyYXkoYnVpbGRFbnZpcm9ubWVudHMpKSB7XG4gICAgY29uc29sZS5lcnJvcihcImJ1aWxkLmNvbmYuanMgbXVzdCBiZSBhbiBhcnJheSBvZiBzdHJpbmcgdmFsdWVzXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGZvciAoY29uc3QgZW52IG9mIGJ1aWxkRW52aXJvbm1lbnRzKSB7XG4gICAgYXdhaXQgcmVsZWFzZUNsaWVudChlbnYpO1xuICB9XG5cbiAgYXdhaXQgcmVsZWFzZUxpYnJhcnkoKTtcbiAgYXdhaXQgcmVsZWFzZVN0b3JpZXMoKTtcbiAgYXdhaXQgcmVsZWFzZUJpbigpO1xufVxuXG4vKipcbiAqIFRoaXMgY2xlYXJzIG91dCB0aGUgZGlzdHJpYnV0aW9uIGZvbGRlciBzbyBubyBsaW5nZXJpbmcgaXJyZWxldmFudCBmcmFnbWVudHNcbiAqIGV4aXN0cy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY2xlYXJQcmV2aW91c0Rpc3RyaWJ1dGlvbigpIHtcbiAgdHJ5IHtcbiAgICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcImRpc3RcIikpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyBkaXN0IGZvbGRlciB0byBjbGVhbiBvdXQuXCIpO1xuICB9XG5cbiAgZnMuZW5zdXJlRGlyU3luYyhwYXRoLnJlc29sdmUoXCJkaXN0XCIpKTtcbn1cblxuLyoqXG4gKiBUaGlzIGNvcGllcyBhbGwgbmVjZXNzYXJ5IGVsZW1lbnRzIGZyb20gdGhlIHByb2plY3QgaW50byB0aGUgZGlzdHJpYnV0aW9uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvcHlBbmRDbGVhbkZyYWdtZW50cygpIHtcbiAgLy8gQ2xlYW4gb3V0IHRoZSBjb21waWxlZCB0ZXN0IGZpbGUgdHlwaW5nc1xuICB0cnkge1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwiZGlzdC90ZXN0XCIpKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS53YXJuKFwiTm8gdGVzdCBmb2xkZXIgdG8gY2xlYW4gb3V0XCIpO1xuICB9XG5cbiAgLy8gQ2xlYW4gb3V0IHVuaXQtdGVzdHNcbiAgdHJ5IHtcbiAgICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcImRpc3QvdW5pdC10ZXN0XCIpKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS53YXJuKFwiTm8gdW5pdC10ZXN0IGZvbGRlciB0byBjbGVhbiBvdXRcIik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKCkge1xuICAvLyBQZXJmb3JtIGFueSB0eXBlc2NyaXB0IHNwZWNpZmljIGFjdGlvbnNcbiAgY29uc29sZS53YXJuKFwiVmFsaWRhdGluZyB0aGUgcmVsZWFzZS4uLlwiKTtcbiAgYXdhaXQgdmFsaWRhdGVSZWxlYXNlKCk7XG4gIC8vIERlbGV0ZSBhbnkgZmlsZXMgaW4gdGhlIGRpc3QgZm9sZGVyIHNvIHdlIGhhdmUgYSBjbGVhbiBidWlsZCB3aXRoIG5vXG4gIC8vIGNoYW5jZXMgb2YgY2FjaGluZyBvciBrZWVwaW5nIG5vIGxvbmdlciByZWxldmFudCBmaWxlcy5cbiAgY29uc29sZS53YXJuKFwiQ2xlYXIgcHJldmlvdXMgYnVpbGQuLi5cIik7XG4gIGF3YWl0IGNsZWFyUHJldmlvdXNEaXN0cmlidXRpb24oKTtcbiAgLy8gQnVpbGQgdGhlIG1vbm9saXRoaWMgZGlzdHJpYnV0aW9uXG4gIGNvbnNvbGUud2FybihcIkJ1bmRsaW5nIHByb2plY3QuLi5cIik7XG4gIGF3YWl0IGJ1bmRsZVByb2plY3QoKTtcbiAgLy8gQ29weSBhbmQgZGVsZXRlIGFueSBmcmFnbWVudHMgaW4gdGhlIGRpc3QgZm9sZGVyIHRoYXQgaXMgbmVjZXNzYXJ5XG4gIGNvbnNvbGUud2FybihcIkZpbmFsIGNsZWFudXAuLi5cIik7XG4gIGF3YWl0IGNvcHlBbmRDbGVhbkZyYWdtZW50cygpO1xuICBjb25zb2xlLndhcm4oXCJSZWxlYXNlIEJ1aWxkIGNvbXBsZXRlIVwiKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IGdyb3VwQnkgZnJvbSBcImxvZGFzaC9ncm91cEJ5LmpzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHVuaXEgZnJvbSBcImxvZGFzaC91bmlxLmpzXCI7XG5pbXBvcnQgdXBwZXJGaXJzdCBmcm9tIFwibG9kYXNoL3VwcGVyRmlyc3QuanNcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBjb21wYXJlLCBpbmMgfSBmcm9tIFwic2VtdmVyXCI7XG5pbXBvcnQgeyBleGVjU3luY1Jlc3VsdCB9IGZyb20gXCIuLi8uLi9saWIvZXhlYy9leGVjLXN5bmMtcmVzdWx0LmpzXCI7XG5cbmNvbnN0IHsgZXhpc3RzU3luYywgcmVhZEZpbGVTeW5jLCByZWFkSlNPTlN5bmMsIHdyaXRlRmlsZVN5bmMgfSA9IGZzO1xuXG4vKiogQHR5cGUge3tba2V5OiBzdHJpbmddOiAnYnJlYWtpbmcnIHwgJ2FkZGVkJyB8ICdmaXhlZCcgfCAndGFzayd9fSAqL1xuY29uc3QgcmVsZWFzZVRhZ3M6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gIGJyZWFraW5nOiBcImJyZWFraW5nXCIsXG5cbiAgZmVhdDogXCJhZGRlZFwiLFxuICBmZWF0dXJlOiBcImFkZGVkXCIsXG4gIGFkZGVkOiBcImFkZGVkXCIsXG5cbiAgZml4OiBcImZpeGVkXCIsXG4gIGZpeGVkOiBcImZpeGVkXCIsXG4gIGhvdGZpeDogXCJmaXhlZFwiLFxuXG4gIHRhc2s6IFwidGFza1wiLFxufTtcblxuY29uc3QgdGFnT3JkZXIgPSB1bmlxKE9iamVjdC52YWx1ZXMocmVsZWFzZVRhZ3MpKTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gbm90ZXNcbiAqL1xuZnVuY3Rpb24gZ2V0UmVsZWFzZVR5cGUobm90ZXM6IHN0cmluZykge1xuICBjb25zdCBncm91cHMgPSBub3Rlc1xuICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgLnNwbGl0KFwiXFxuXCIpXG4gICAgLm1hcCgobGluZSkgPT4gKGxpbmUubWF0Y2goLyMjIChcXHcrKS8pIHx8IFtdKVsxXSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pO1xuICBpZiAoZ3JvdXBzLmluY2x1ZGVzKFwiYnJlYWtpbmdcIikpIHJldHVybiBcIm1ham9yXCI7XG4gIGlmIChncm91cHMuaW5jbHVkZXMoXCJhZGRlZFwiKSkgcmV0dXJuIFwibWlub3JcIjtcbiAgcmV0dXJuIFwicGF0Y2hcIjtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9yVmVyc2lvbiBUaGUgdmVyc2lvbiB0byBidWlsZCB0aGUgcmVsZWFzZSBub3RlcyBmb3JcbiAqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGJ1aWxkUmVsZWFzZU5vdGVzKGZvclZlcnNpb246IHN0cmluZykge1xuICBjb25zb2xlLndhcm4oXCJCdWlsZGluZyByZWxlYXNlIG5vdGVzLi4uXCIpO1xuXG4gIGNvbnNvbGUud2FybihcImZldGNoaW5nIHRhZ3MuLi5cIik7XG4gIGNvbnN0IGdldFRhZ3MgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChcImdpdFwiLCBbXCJ0YWdcIiwgXCItLWxpc3RcIl0pO1xuXG4gIGlmIChnZXRUYWdzID09PSBudWxsKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCBnZXQgZ2l0IHRhZ3NcIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc3QgdGFncyA9IGdldFRhZ3MudHJpbSgpLnNwbGl0KFwiXFxuXCIpLnNvcnQoY29tcGFyZSk7XG5cbiAgY29uc3QgcHJldmlvdXNWZXJzaW9uID1cbiAgICB0YWdzW1xuICAgICAgKHRhZ3MuaW5jbHVkZXMoZm9yVmVyc2lvbikgPyB0YWdzLmluZGV4T2YoZm9yVmVyc2lvbikgOiB0YWdzLmxlbmd0aCkgLSAxXG4gICAgXTtcblxuICBjb25zb2xlLndhcm4oXCJmZXRjaGluZyB2ZXJzaW9uIGhhc2guLi5cIik7XG4gIGNvbnN0IGN1cnJlbnRWZXJzaW9uSGFzaEV4ZWMgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChgZ2l0YCwgW1xuICAgIFwicmV2LWxpc3RcIixcbiAgICBcIi0xXCIsXG4gICAgYCR7Zm9yVmVyc2lvbn1gLFxuICBdKTtcblxuICBpZiAoY3VycmVudFZlcnNpb25IYXNoRXhlYyA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZG4ndCBnZXQgY3VycmVudCB2ZXJzaW9uIGhhc2hcIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc3QgY3VycmVudFZlcnNpb25IYXNoID0gY3VycmVudFZlcnNpb25IYXNoRXhlYy50cmltKCk7XG5cbiAgY29uc29sZS53YXJuKFwiZmV0Y2hpbmcgcHJldmlvdXMgdmVyc2lvbiBoYXNoLi4uXCIpO1xuICBsZXQgcHJldmlvdXNWZXJzaW9uSGFzaEV4ZWMgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChgZ2l0YCwgW1xuICAgIGByZXYtbGlzdGAsXG4gICAgYC0xYCxcbiAgICBgJHtwcmV2aW91c1ZlcnNpb259YCxcbiAgXSk7XG5cbiAgaWYgKHByZXZpb3VzVmVyc2lvbkhhc2hFeGVjID09PSBudWxsKSB7XG4gICAgcHJldmlvdXNWZXJzaW9uSGFzaEV4ZWMgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChgZ2l0YCwgW1xuICAgICAgYHJldi1saXN0YCxcbiAgICAgIFwiLS1tYXgtcGFyZW50cz0wXCIsXG4gICAgICBcIkhFQURcIixcbiAgICBdKTtcblxuICAgIGlmIChwcmV2aW91c1ZlcnNpb25IYXNoRXhlYyA9PT0gbnVsbCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkbid0IGdldCBwcmV2aW91cyB2ZXJzaW9uIGhhc2hcIik7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgcHJldmlvdXNWZXJzaW9uSGFzaCA9IHByZXZpb3VzVmVyc2lvbkhhc2hFeGVjLnRyaW0oKTtcblxuICBjb25zb2xlLndhcm4oXCJmZXRjaGluZyBsb2dzLi4uXCIpO1xuICBjb25zdCBsb2dzRXhlYyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KGBnaXRgLCBbXG4gICAgXCJsb2dcIixcbiAgICBcIi0tcHJldHR5PSVCXCIsXG4gICAgYCR7cHJldmlvdXNWZXJzaW9uSGFzaH0uLi4ke2N1cnJlbnRWZXJzaW9uSGFzaH1gLFxuICBdKTtcblxuICBpZiAobG9nc0V4ZWMgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQ291bGRuJ3QgZ2V0IGxvZ3NcIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc3QgbG9ncyA9IGxvZ3NFeGVjXG4gICAgLnNwbGl0KFwiXFxuXCIpXG4gICAgLy8gQ29udmVydCB0aGUgbGluZXMgaW50byBhbiBhcnJheSBvZiB0YWcgYW5kIG1lc3NhZ2Ugb2JqZWN0c1xuICAgIC5tYXAoKGxpbmUpID0+IHtcbiAgICAgIGNvbnN0IFssIHRhZyA9IFwiXCIsIG1lc3NhZ2UgPSBcIlwiXSA9XG4gICAgICAgIGxpbmUubWF0Y2goL15cXHMqKFxcdys/KVxccyo6XFxzKiguKilcXHMqJC8pIHx8IFtdO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGFnOiByZWxlYXNlVGFnc1t0YWcudG9Mb3dlckNhc2UoKV0sXG4gICAgICAgIG1lc3NhZ2U6IHVwcGVyRmlyc3QobWVzc2FnZSksXG4gICAgICB9O1xuICAgIH0pXG4gICAgLy8gUmVtb3ZlIGxpbmVzIHRoYXQgZG8gbm90IGNvbnRhaW4gYSBrbm93biB0YWdcbiAgICAuZmlsdGVyKChub3RlKSA9PiBub3RlLnRhZyk7XG5cbiAgY29uc3QgZ3JvdXBzID0gZ3JvdXBCeShsb2dzLCBcInRhZ1wiKTtcbiAgLy8gQnVpbGQgdGhlIHJlbGVhc2Ugbm90ZXNcbiAgY29uc3QgdGV4dCA9IHRhZ09yZGVyXG4gICAgLy8gUmVtb3ZlIHRhZ3MgdGhhdCBkb24ndCBleGlzdCBpbiB0aGUgY3VycmVudCBvdXRwdXRcbiAgICAuZmlsdGVyKChncm91cE5hbWUpID0+IGdyb3Vwc1tncm91cE5hbWVdKVxuICAgIC5tYXAoKGdyb3VwTmFtZSkgPT4ge1xuICAgICAgY29uc3QgZ3JvdXAgPSBncm91cHNbZ3JvdXBOYW1lXTtcbiAgICAgIHJldHVybiBgIyMgJHtncm91cE5hbWUucmVwbGFjZSgvKFxcdykvLCAoYykgPT4gYy50b1VwcGVyQ2FzZSgpKX1cXG5cXG4ke2dyb3VwXG4gICAgICAgIC5tYXAoKHsgdGFnLCBtZXNzYWdlIH0pID0+IGAtIFtcXGAke3RhZy50b1VwcGVyQ2FzZSgpfVxcYF06ICR7bWVzc2FnZX1gKVxuICAgICAgICAuam9pbihcIlxcblwiKX1gO1xuICAgIH0pXG4gICAgLmpvaW4oXCJcXG5cXG5cIik7XG5cbiAgY29uc29sZS53YXJuKFwiTmV3IHJlbGVhc2Ugbm90ZXMgY29tcGxldGVkXCIpO1xuICByZXR1cm4gdGV4dDtcbn1cblxuLyoqXG4gKiBQcmludCByZWxlYXNlIG5vdGVzIHNpbmNlIHRoZSBsYXN0IHJlbGVhc2VcbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyBTZWUgYmVsb3dcbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLmZpbGUgVGhlIGZpbGUgdG8gcHJpbnQgcmVsZWFzZSBub3RlcyB0by4gSWYgdGhpcyBpc1xuICogbGVmdCBibGFuaywgdGhlbiB0aGUgcmVsZWFzZSBub3RlcyB3aWxsIGJlIHByaW50ZWQgdG8gU1RET1VULlxuICogQHBhcmFtIHtib29sZWFufSBvcHRpb25zLnVwZGF0ZVBhY2thZ2UgVXBkYXRlIHRoZSBwYWNrYWdlLmpzb25cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy50YWcgVHJ1ZSBpZiBhIGdpdCB0YWcgc2hvdWxkIGJlIGNyZWF0ZWRcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gb3B0aW9ucy5lcnJvck9uRW1wdHkgVHJ1ZSBpZiBubyByZWxlYXNlIG5vdGVzIHdpbGwgYmUgY3JlYXRlZFxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oXG4gIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IGJvb2xlYW4gfCBudW1iZXI+ID0ge31cbikge1xuICBjb25zb2xlLndhcm4oXCJHZW5lcmF0aW5nIFJlbGVhc2UgTm90ZXMuLi5cIik7XG4gIC8vIFB1bGwgaW4gYW55IHRhZ3NcbiAgY29uc3QgZmV0Y2hFeGVjID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoXCJnaXRcIiwgW1wiZmV0Y2hcIiwgXCItLXRhZ3NcIl0pO1xuXG4gIGlmIChmZXRjaEV4ZWMgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQ291bGRuJ3QgZmV0Y2ggdGFnc1wiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBHZXQgdGhlIGN1cnJlbnQgdmVyc2lvblxuICBjb25zdCBwa2cgPSByZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpKTtcbiAgY29uc3QgeyB2ZXJzaW9uOiBjdXJyZW50VmVyc2lvbiA9IFwiMC4wLjFcIiB9ID0gcGtnO1xuICBjb25zb2xlLndhcm4oXCJDdXJyZW50IFByb2plY3QgdmVyc2lvbjpcIiwgeyBjdXJyZW50VmVyc2lvbiB9KTtcblxuICBjb25zdCBub3RlcyA9IGF3YWl0IGJ1aWxkUmVsZWFzZU5vdGVzKFwiSEVBRFwiKTtcbiAgY29uc3QgcmVsZWFzZVR5cGUgPSBnZXRSZWxlYXNlVHlwZShub3Rlcyk7XG4gIGNvbnN0IG5ld1ZlcnNpb24gPSByZWxlYXNlVHlwZSAmJiBpbmMoY3VycmVudFZlcnNpb24sIHJlbGVhc2VUeXBlKTtcblxuICBpZiAoIW5ld1ZlcnNpb24pIHtcbiAgICBjb25zb2xlLmVycm9yKFwiVW5hYmxlIHRvIGRldGVybWluZSBuZXh0IHZlcnNpb25cIiwgeyBjdXJyZW50VmVyc2lvbiB9KTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBDcmVhdGUgdGhlIHRhZyBpZiB3ZSB3ZXJlIHRvbGQgdG8gZG8gc29cbiAgaWYgKG9wdGlvbnMudGFnKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ3JlYXRpbmcgdGhlIG5ldyB0YWcuLi5cIik7XG4gICAgY29uc3QgdGFnRXhlYyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KGBnaXRgLCBbXG4gICAgICBcInRhZ1wiLFxuICAgICAgXCItYVwiLFxuICAgICAgbmV3VmVyc2lvbixcbiAgICAgIFwiLW1cIixcbiAgICAgIGBSZWxlYXNlICR7bmV3VmVyc2lvbn1gLFxuICAgIF0pO1xuXG4gICAgaWYgKHRhZ0V4ZWMgPT09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZG4ndCBjcmVhdGUgdGFnXCIpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSBwYWNrYWdlLmpzb24gaWYgd2Ugd2VyZSB0b2xkIHRvIGRvIHNvXG4gIGlmIChvcHRpb25zLnVwZGF0ZVBhY2thZ2UpIHtcbiAgICBjb25zb2xlLndhcm4oXCJVcGRhdGluZyB0aGUgcGFja2FnZS5qc29uLi4uXCIpO1xuICAgIGNvbnN0IHBrZyA9IHJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICAgIHBrZy52ZXJzaW9uID0gbmV3VmVyc2lvbjtcblxuICAgIHdyaXRlRmlsZVN5bmMoXG4gICAgICBwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIiksXG4gICAgICBgJHtKU09OLnN0cmluZ2lmeShwa2csIG51bGwsIFwiICBcIil9XFxuYFxuICAgICk7XG4gIH1cblxuICBjb25zdCB0ZXh0ID0gYCMjICR7bmV3VmVyc2lvbn1cXG5cXG4ke25vdGVzfWA7XG5cbiAgLy8gSWYgdGhlIG5vdGVzIGFyZSBlbXB0eSwgdGhyb3cgYW4gZXJyb3IgaWYgcmVxdWVzdGVkIHRvIGRvIHNvXG4gIGlmICghbm90ZXMudHJpbSgpICYmIG9wdGlvbnMuZXJyb3JPbkVtcHR5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgXCJObyBub3RlcyB3ZXJlIGdlbmVyYXRlZCBhcyBubyBzZW12ZXIgc3R5bGUgbWVzc2FnZXMgd2VyZSBmb3VuZFwiXG4gICAgKTtcbiAgfVxuXG4gIC8vIE91dHB1dCB0aGUgbm90ZXMgdG8gdGhlIGNvbnNvbGUgb3IgYSBmaWxlXG4gIGlmIChvcHRpb25zLmZpbGUpIHtcbiAgICBjb25zb2xlLndhcm4oXCJXcml0aW5nIHRoZSByZWxlYXNlIG5vdGVzIHRvIGZpbGU6XCIsIG9wdGlvbnMuZmlsZSk7XG4gICAgY29uc3QgZmlsZSA9IHBhdGgucmVzb2x2ZShvcHRpb25zLmZpbGUgYXMgc3RyaW5nKTtcbiAgICBjb25zdCBwcmV2aW91c1RleHQgPSBleGlzdHNTeW5jKGZpbGUpID8gcmVhZEZpbGVTeW5jKGZpbGUpIDogXCJcIjtcbiAgICB3cml0ZUZpbGVTeW5jKGZpbGUsIGAke2Ake3RleHR9XFxuXFxuJHtwcmV2aW91c1RleHR9YC50cmltKCl9XFxuYCk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8PSAxMDA7ICsraSkge1xuICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoZmlsZSkpIGJyZWFrO1xuICAgICAgaWYgKGkgPT09IDEwMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJSZWxlYXNlIG5vdGVzIGZpbGUgd2FzIG5vdCBjcmVhdGVkIGluIHRpbWUgZm9yIHRoZSBmaW5hbCByZWxlYXNlIGNvbW1pdDpcIixcbiAgICAgICAgICBjaGFsay5yZWRCcmlnaHRCb2xkKGZpbGUpXG4gICAgICAgICk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgYWxsIGZyYWdtZW50cyBhcmUgZ29pbmcgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGNvbW1pdFxuICAgIGNvbnNvbGUud2FybihcIkFkZGluZyBmcmFnbWVudHMgdG8gZ2l0Li4uXCIpO1xuICAgIGlmICgoYXdhaXQgZXhlY1N5bmNSZXN1bHQoXCJnaXRcIiwgW1wiYWRkXCIsIFwiLUFcIl0pKSA9PT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIkNvdWxkIG5vdCBlbnN1cmUgYWxsIGZyYWdtZW50cyBhcmUgYWRkZWQgZm9yIHRoZSBuZXh0IGNvbW1pdC5cIlxuICAgICAgKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG5cbiAgICAvLyBDb21taXQgdGhlIGNoYW5nZXNcbiAgICBjb25zb2xlLndhcm4oXCJDb21taXR0aW5nIHRvIGdpdC4uLlwiKTtcbiAgICBjb25zdCBjb21taXRFeGVjID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoXCJnaXRcIiwgW1xuICAgICAgXCJjb21taXRcIixcbiAgICAgIFwiLWFtXCIsXG4gICAgICBgUmVsZWFzZSAke25ld1ZlcnNpb259YCxcbiAgICBdKTtcblxuICAgIGlmIChjb21taXRFeGVjID09PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQ291bGRuJ3QgY29tbWl0IGNoYW5nZXNcIik7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuXG4gICAgY29uc29sZS53YXJuKGBcXG5cXG4ke2NoYWxrLmN5YW4odGV4dCl9XFxuXFxuYCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKGBcXG5cXG4ke2NoYWxrLmN5YW4odGV4dCl9XFxuXFxuYCk7XG4gIH1cblxuICAvLyBXaGVuZXZlciB0aGlzIGlzIHJhbiBpdCBtYWtlcyBzZW5zZSB0byB1cGRhdGUgb3VyIHJlbGVhc2UgdmVyc2lvbiBoZXJlIHNvXG4gIC8vIGl0IGlzIGF2YWlhbGJsZSB0byB0aGUgcmVzdCBvZiBhbnkgcHJvY2VzcyBydW5uaW5nIHVuZGVyIGl0J3MgYXNzdW1wdGlvbnMuXG4gIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OID0gbmV3VmVyc2lvbjtcbn1cbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vZXhlYy9leGVjLXN5bmMuanNcIjtcblxuLyoqXG4gKiBUaGlzIGNoZWNrcyBpZiB0aGUgY3VycmVudCBnaXQgY29udGV4dCBoYXMgYWNjZXNzIHRvIHRoZSBzcGVjaWZpZWQgcmVtb3RlXG4gKiByZXBvc2l0b3J5LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2l0Q2FuQWNjZXNzUmVtb3RlKHJlbW90ZTogc3RyaW5nKSB7XG4gIHJldHVybiBleGVjU3luYyhgZ2l0YCwgW2Bscy1yZW1vdGVgLCByZW1vdGVdKTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgZGVzY3JpcHRpb24gfSBmcm9tIFwiLi4vdXRpbC9kZXNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmNSZXN1bHQgfSBmcm9tIFwiLi4vZXhlYy9leGVjLXN5bmMtcmVzdWx0LmpzXCI7XG5pbXBvcnQgeyBnaXRDYW5BY2Nlc3NSZW1vdGUgfSBmcm9tIFwiLi9naXQtY2FuLWFjY2Vzcy1yZW1vdGUuanNcIjtcblxuLyoqXG4gKiBFbnN1cmVzIHRoZSBkZXZlbG9wZXIgaGFzIGVzdGFibGlzaGVkIHRoZSBwcm92aWRlZCByZW1vdGUgbmFtZSBBTkQgaGFzIGFjY2Vzc1xuICogdG8gdGhlIHJlbW90ZSBVUkwgYXNzb2NpYXRlZCB3aXRoIHRoZSByZW1vdGUgbmFtZS4gVGhpcyBpcyBhbiBhc3NlcnRpb24gc29cbiAqIHdpbGwgY2F1c2UgdGhlIHByb2dyYW0gdG8gZXhpdCBvbiBmYWlsdXJlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2l0RW5zdXJlUmVtb3RlKHJlbW90ZTogc3RyaW5nKSB7XG4gIC8vIFdlIGNoZWNrIG91ciByZW1vdGUgdG8gZW5zdXJlIHdlIGhhdmUgYSBwcm9qZWN0IHdpdGggZXhwZWN0ZWQgdmFsdWVzXG4gIGNvbnN0IHJlbW90ZUxpc3RQcm9jZXNzID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoXCJnaXRcIiwgW1wicmVtb3RlXCIsIFwiLXZcIl0pO1xuXG4gIGlmIChyZW1vdGVMaXN0UHJvY2VzcyA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBsaXN0IHJlbW90ZXMgZm9yIHRoZSBnaXQgcHJvamVjdC5cIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc3QgcmVtb3RlcyA9IHJlbW90ZUxpc3RQcm9jZXNzLnNwbGl0KC9cXHI/XFxuL2cpO1xuXG4gIGNvbnN0IGZvdW5kUmVtb3RlID0gcmVtb3Rlcy5maW5kKChyb3cpID0+IHJvdy5pbmRleE9mKHJlbW90ZSkgPj0gMCk7XG5cbiAgaWYgKCFmb3VuZFJlbW90ZSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGRlc2NyaXB0aW9uYFxuICAgICAgWW91IE1VU1QgaGF2ZSBhIHJlbW90ZSBuYW1lZCAke3JlbW90ZX0gd2hpY2ggcG9pbnRzIHRvIHRoZSByZXBvc2l0b3J5IHlvdVxuICAgICAgd2lzaCB0byBkZXBsb3kgdG8uXG5cbiAgICAgICR7cmVtb3Rlcy5qb2luKFwiXFxuXCIpfVxuICAgIGBcbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IHJlbW90ZVVybCA9IGZvdW5kUmVtb3RlLnNwbGl0KC9cXHMrL2cpWzFdO1xuXG4gIC8vIE5vdyBjaGVjayB0byBtYWtlIHN1cmUgdGhlIHJlcG8gc3BlY2lmaWVkIGV4aXN0cyBpbiBnaXQgYW5kIGlzIGF2YWlsYWJsZSB0b1xuICAvLyB0aGUgdXNlclxuICBpZiAoIWdpdENhbkFjY2Vzc1JlbW90ZShyZW1vdGVVcmwpKSB7XG4gICAgY29uc29sZS53YXJuKGBcbiAgICAgIFlvdSBkbyBub3Qgc2VlbSB0byBoYXZlIGFjY2VzcyB0byB0aGUgcmVwbyBsaXN0ZWQgaW4gdGhlIHBhY2thZ2UganNvbiBvZlxuICAgICAgdGhpcyBwcm9qZWN0LiBQbGVhc2UgZW5zdXJlIHlvdSBoYXZlIHdyaXRlIGFjY2VzcyB0byB0aGUgcmVwbzpcbiAgICAgICR7cmVtb3RlVXJsfVxuICAgICAgYW5kIHRoZW4gdHJ5IHRvIHJ1biB0aGUgcmVsZWFzZSBhZ2Fpbi5cbiAgICBgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmNSZXN1bHQgfSBmcm9tIFwiLi4vZXhlYy9leGVjLXN5bmMtcmVzdWx0LmpzXCI7XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSBjdXJyZW50IGJyYW5jaCBpbiB0aGUgY3VycmVudCBnaXQgY29udGV4dC4gUmV0dXJucyB2b2lkIGlmIGFcbiAqIGJyYW5jaCBjYW4gbm90IGJlIGRldGVybWluZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnaXRDdXJyZW50QnJhbmNoKCkge1xuICAvLyBHZXQgdGhlIGN1cnJlbnQgYnJhbmNoIG5hbWUgc28gd2UgY2FuIG9idGFpbiB0aGUgaGFzaCBvZiB0aGUgdGlja2V0XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwiZ2l0XCIsIFtcbiAgICBcInJldi1wYXJzZVwiLFxuICAgIFwiLS1hYmJyZXYtcmVmXCIsXG4gICAgXCJIRUFEXCIsXG4gIF0pO1xuXG4gIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGRldGVybWluZSBjdXJyZW50IGJyYW5jaC5cIik7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuXG4gIGNvbnN0IGJyYW5jaCA9IHJlc3VsdC50cmltKCk7XG4gIHJldHVybiBicmFuY2ggfHwgdm9pZCAwO1xufVxuIiwKICAgICJpbXBvcnQgeyBleGVjU3luY1Jlc3VsdCB9IGZyb20gXCIuLi9leGVjL2V4ZWMtc3luYy1yZXN1bHQuanNcIjtcbmltcG9ydCB7IGdpdEN1cnJlbnRCcmFuY2ggfSBmcm9tIFwiLi9naXQtY3VycmVudC1icmFuY2guanNcIjtcblxuLyoqXG4gKiBUaGlzIHN3aXRjaGVzIHRvIHRoZSBicmFuY2ggc3BlY2lmaWVkLCB0aGVuIHJlc2V0IC0taGFyZCBvcmlnaW4vYnJhbmNoIHRvXG4gKiBtYWtlIHN1cmUgaXQgcmVmbGVjdHMgdGhlIHJlcG8sIHRoZW4gcmV0dXJucyB0byB0aGUgY3VycmVudCBicmFuY2guXG4gKi9cbmV4cG9ydCBjb25zdCBnaXRVcGRhdGVCcmFuY2ggPSBhc3luYyAocmVtb3RlOiBzdHJpbmcsIGJyYW5jaDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGJyYW5jaEJhayA9IGF3YWl0IGdpdEN1cnJlbnRCcmFuY2goKTtcblxuICBpZiAoIWJyYW5jaEJhaykge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBkZXRlcm1pbmUgY3VycmVudCBicmFuY2guXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIENoZWNrb3V0IHRoZSBzcGVjaWZpZWQgYnJhbmNoXG4gIGlmICgoYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcImNoZWNrb3V0XCIsIGAke2JyYW5jaH1gXSkpID09PSBudWxsKSB7XG4gICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgY2hlY2tvdXQgYnJhbmNoICR7YnJhbmNofWApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFBlcmZvcm0gdGhlIHJlc2V0XG4gIGlmIChcbiAgICAoYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcbiAgICAgIFwicmVzZXRcIixcbiAgICAgIFwiLS1oYXJkXCIsXG4gICAgICBgJHtyZW1vdGV9LyR7YnJhbmNofWAsXG4gICAgXSkpID09PSBudWxsXG4gICkge1xuICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IHJlc2V0IGJyYW5jaCAke2JyYW5jaH1gKTtcblxuICAgIC8vIFJldHVybiB0byB0aGUgb3JpZ2luYWwgYnJhbmNoXG4gICAgaWYgKGF3YWl0IGV4ZWNTeW5jUmVzdWx0KGBnaXRgLCBbXCJjaGVja291dFwiLCBgJHticmFuY2hCYWt9YF0pKSB7XG4gICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCByZXR1cm4gdG8gb3JpZ2luYWwgYnJhbmNoICR7YnJhbmNoQmFrfWApO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFJldHVybiB0byB0aGUgb3JpZ2luYWwgYnJhbmNoXG4gIGlmICgoYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcImNoZWNrb3V0XCIsIGAke2JyYW5jaEJha31gXSkpID09PSBudWxsKSB7XG4gICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgcmV0dXJuIHRvIG9yaWdpbmFsIGJyYW5jaCAke2JyYW5jaEJha31gKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0YXJnZXRQcm9qZWN0UmVwbygpIHtcbiAgY29uc3QgcGFja2FnZUpzb24gPSBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpKTtcbiAgcmV0dXJuIHBhY2thZ2VKc29uLnJlcG9zaXRvcnkgfHwge307XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgcmVsZWFzZUJ1aWxkIGZyb20gXCIuL3JlbGVhc2UtYnVpbGQuanNcIjtcbmltcG9ydCByZWxlYXNlTm90ZXMgZnJvbSBcIi4vcmVsZWFzZS12aWV3LmpzXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi9saWIvdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb24gfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvZGVzY3JpcHRpb24uanNcIjtcbmltcG9ydCB7IGV4ZWNTY3JpcHQgfSBmcm9tIFwiLi4vLi4vbGliL2V4ZWMvZXhlYy1zY3JpcHQuanNcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uLy4uL2xpYi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmNSZXN1bHQgfSBmcm9tIFwiLi4vLi4vbGliL2V4ZWMvZXhlYy1zeW5jLXJlc3VsdC5qc1wiO1xuaW1wb3J0IHsgZ2l0Q2FuQWNjZXNzUmVtb3RlIH0gZnJvbSBcIi4uLy4uL2xpYi9naXQvZ2l0LWNhbi1hY2Nlc3MtcmVtb3RlLmpzXCI7XG5pbXBvcnQgeyBnaXRFbnN1cmVSZW1vdGUgfSBmcm9tIFwiLi4vLi4vbGliL2dpdC9naXQtZW5zdXJlLXJlbW90ZS5qc1wiO1xuaW1wb3J0IHsgZ2l0SGFzQ2hhbmdlcyB9IGZyb20gXCIuLi8uLi9saWIvZ2l0L2dpdC1oYXMtY2hhbmdlcy5qc1wiO1xuaW1wb3J0IHsgZ2l0UmV0dXJuVG9EZXYgfSBmcm9tIFwiLi4vLi4vbGliL2dpdC9naXQtcmV0dXJuLXRvLWRldi5qc1wiO1xuaW1wb3J0IHsgZ2l0VXBkYXRlQnJhbmNoIH0gZnJvbSBcIi4uLy4uL2xpYi9naXQvZ2l0LXVwZGF0ZS1icmFuY2guanNcIjtcbmltcG9ydCB7IHByb21wdENvbmZpcm0gfSBmcm9tIFwiLi4vLi4vbGliL3Byb21wdC9wcm9tcHQtY29uZmlybS5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFJlcG8gfSBmcm9tIFwiLi4vLi4vbGliL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LXJlcG8uanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3RWZXJzaW9uIH0gZnJvbSBcIi4uLy4uL2xpYi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC12ZXJzaW9uLmpzXCI7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgcmVxdWlyZWQgcmVtb3RlIG5hbWUgdGhhdCBtdXN0IGJlIHByZXNlbnQgZm9yIHRoZSByZWxlYXNlIHNjcmlwdFxuICogdG8gd29ya1xuICovXG5jb25zdCBFTlNVUkVfUkVNT1RFID0gXCJvcmlnaW5cIjtcblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgYWxsIG9mIHRoZSBwYWNrYWdlIGpzb24gc2V0dGluZ3MgYW5kIGVuc3VyZXMgdGhlXG4gKiByZXBvc2l0b3JpZXMgbGlzdGVkIGFyZSB2YWxpZCBmb3IgdXNlIHdpdGhpbiB0aGlzIGNvbnRleHQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlUmVwb3NpdG9yeSgpIHtcbiAgY29uc3QgcHJvamVjdFJlcG8gPSBhd2FpdCB0YXJnZXRQcm9qZWN0UmVwbygpO1xuICBjb25zdCBFTlNVUkVfUkVNT1RFX1BST0pFQ1QgPSBwcm9qZWN0UmVwby51cmw7XG5cbiAgaWYgKFxuICAgICFwcm9qZWN0UmVwbyB8fFxuICAgICEoXG4gICAgICBwcm9qZWN0UmVwby50eXBlICE9PSBcImdpdGxhYlwiIHx8XG4gICAgICBwcm9qZWN0UmVwby50eXBlICE9PSBcImdpdFwiIHx8XG4gICAgICBwcm9qZWN0UmVwby50eXBlICE9PSBcImJpdGJ1Y2tldFwiIHx8XG4gICAgICBwcm9qZWN0UmVwby50eXBlICE9PSBcInN0YXNoXCJcbiAgICApXG4gICkge1xuICAgIGNvbnNvbGUud2FybihgXG4gICAgICBZb3UgTVVTVCBoYXZlIGEgcmVwb3NpdG9yeSBzcGVjaWZpZWQgaW4geW91ciBwYWNrYWdlIGpzb24gdG8gdXNlIHRoZVxuICAgICAgcmVsZWFzZSBzY3JpcHQuIEl0IG11c3QgYmUgb2YgJ3R5cGU6IGdpdCcgYW5kIGhhdmUgYSB2YWxpZCBzc2ggdXJsIHRvXG4gICAgICB5b3VyIGdpdCByZXBvLlxuXG4gICAgICBBZGRpdGlvbmFsbHksIHlvdSBNVVNUIGhhdmUgYSByZW1vdGUgY29uZmlndXJlZCBmb3IgeW91ciBwcm9qZWN0IG9mXG4gICAgICAnb3JpZ2luJyB0aGF0IG1hdGNoZXMgdGhlIHJlcG8gdXJsIGxpc3RlZCBpbiB5b3VyIHBhY2thZ2UuanNvbi5cblxuICAgICAgVGh1czogXCJnaXQgcmVtb3RlIC12XCIgU0hPVUxEIG91dHB1dCBhIGxpbmUgd2l0aFxuICAgICAgb3JpZ2luIDx1cmwgaW4geW91ciBwYWNrYWdlIGpzb24gcmVwb3NpdG9yeSBmaWVsZD4gKHB1c2gpXG4gICAgYCk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gV2UgY2hlY2sgb3VyIHJlbW90ZSB0byBlbnN1cmUgd2UgaGF2ZSBhIHByb2plY3Qgd2l0aCBleHBlY3RlZCB2YWx1ZXNcbiAgY29uc3QgcmVtb3RlTGlzdFByb2Nlc3MgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChcImdpdFwiLCBbXCJyZW1vdGVcIiwgXCItdlwiXSk7XG5cbiAgaWYgKHJlbW90ZUxpc3RQcm9jZXNzID09PSBudWxsKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IGxpc3QgcmVtb3RlcyBmb3IgdGhlIGdpdCBwcm9qZWN0LlwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zdCByZW1vdGVzID0gcmVtb3RlTGlzdFByb2Nlc3Muc3BsaXQoL1xccj9cXG4vZyk7XG5cbiAgY29uc3QgZm91bmRSZW1vdGUgPSByZW1vdGVzLmZpbmQoXG4gICAgKHJvdykgPT5cbiAgICAgIHJvdy5pbmRleE9mKEVOU1VSRV9SRU1PVEUpID49IDAgJiYgcm93LmluZGV4T2YoRU5TVVJFX1JFTU9URV9QUk9KRUNUKSA+PSAwXG4gICk7XG5cbiAgaWYgKCFmb3VuZFJlbW90ZSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiQ291bGQgbm90IG1hdGNoIHBhY2thZ2UganNvbiByZXBvc2l0b3J5IHRvIGFuIG9yaWdpbiByZW1vdGUgaW4gZ2l0IENMSVwiLFxuICAgICAgeyByZW1vdGVMaXN0UHJvY2VzcywgcmVtb3RlcywgRU5TVVJFX1JFTU9URSwgRU5TVVJFX1JFTU9URV9QUk9KRUNUIH1cbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIE5vdyBjaGVjayB0byBtYWtlIHN1cmUgdGhlIHJlcG8gc3BlY2lmaWVkIGV4aXN0cyBpbiBnaXQgYW5kIGlzIGF2YWlsYWJsZSB0b1xuICAvLyB0aGUgdXNlclxuICBpZiAoIWdpdENhbkFjY2Vzc1JlbW90ZShFTlNVUkVfUkVNT1RFX1BST0pFQ1QpKSB7XG4gICAgY29uc29sZS53YXJuKGBcbiAgICAgIFlvdSBkbyBub3Qgc2VlbSB0byBoYXZlIGFjY2VzcyB0byB0aGUgcmVwbyBsaXN0ZWQgaW4gdGhlIHBhY2thZ2UganNvbiBvZlxuICAgICAgdGhpcyBwcm9qZWN0LiBQbGVhc2UgZW5zdXJlIHlvdSBoYXZlIHdyaXRlIGFjY2VzcyB0byB0aGUgcmVwbzpcbiAgICAgICR7RU5TVVJFX1JFTU9URV9QUk9KRUNUfVxuICAgICAgYW5kIHRoZW4gdHJ5IHRvIHJ1biB0aGUgcmVsZWFzZSBhZ2Fpbi5cbiAgICBgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBXZSBjYW4gb25seSBkbyB0aGlzIG9wZXJhdGlvbiBpZiB0aGVyZSBpcyBub3RoaW5nIHRvIGNvbW1pdCBvciBwdXNoXG4gIC8vIFRoaXMgb25seSB3b3JrcyBpZiBubyBjaGFuZ2VzIGFyZSBwcmVzZW50XG4gIGlmIChhd2FpdCBnaXRIYXNDaGFuZ2VzKCkpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJZb3UgaGF2ZSB1bmNvbW1pdHRlZCBjaGFuZ2VzIG9yIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBwcm9qZWN0IGNhbiBub3QgYmUgZGV0ZXJtaW5lZC4gUGxlYXNlIGNvbW1pdCBvciBzdGFzaCB0aGVtIGJlZm9yZSBjb250aW51aW5nLlwiXG4gICAgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zb2xlLndhcm4oXCJSZXBvc2l0b3J5IHZhbGlkYXRpb24gY29tcGxldGVcIik7XG59XG5cbi8qKlxuICogTWFrZXMgc3VyZSB3ZSBhcmUgb24gdGhlIHJlbGVhc2UgYnJhbmNoIGFuZCBjb21wbGV0ZWx5IHVwZGF0ZWQgd2l0aCB0aGVcbiAqIGNvbnRlbnRzIG9mIGRldi5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY2hlY2tvdXRSZWxlYXNlKCkge1xuICAvLyBNYWtlIHN1cmUgd2UncmUgb24gYSByZWxlYXNlIGJyYW5jaCB0aGF0IG1hdGNoZXMgZGV2XG4gIGlmICghKGF3YWl0IGF3YWl0IGV4ZWNTeW5jKFwiZ2l0XCIsIFtcImNoZWNrb3V0XCIsIFwicmVsZWFzZVwiXSkpKSB7XG4gICAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoXCJnaXRcIiwgW1wiY2hlY2tvdXRcIiwgXCItYlwiLCBcInJlbGVhc2VcIl0pKSkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIkNvdWxkIG5vdCBzd2l0Y2ggdG8gdGhlIHJlbGVhc2UgYnJhbmNoLiBNYWtlIHN1cmUgdGhlIGJyYW5jaCBleGlzdHMgbG9jYWxseS5cIlxuICAgICAgKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSB0aGUgbGF0ZXN0IGZyb20gdGhlIHJlbW90ZVxuICBpZiAoIShhd2FpdCBleGVjU3luYyhgZ2l0YCwgW1wiZmV0Y2hcIiwgYCR7RU5TVVJFX1JFTU9URX1gXSkpKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IGZldGNoIGZyb20gcmVtb3RlIHNlcnZlcnMuXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIE1ha2Ugc3VyZSB3ZSBhcmUgZXhhY3RseSB3aGF0IGlzIGluIGRldlxuICBpZiAoIShhd2FpdCBleGVjU3luYyhgZ2l0YCwgW1wicmVzZXRcIiwgXCItLWhhcmRcIiwgYCR7RU5TVVJFX1JFTU9URX0vZGV2YF0pKSkge1xuICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IHJlc2V0IGJyYW5jaCB0byBkZXZgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zb2xlLndhcm4oXCJDaGVja2VkIG91dCByZWxlYXNlIGJyYW5jaCBhbmQgdXBkYXRlZCB0byBkZXZcIik7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB0aGUgbGFzdCByZWxlYXNlIHR5cGUgYmFzZWQgb24gdGhlIGNvbnRlbnRzIHBsYWNlZCB3aXRoaW4gdGhlXG4gKiByZWxlYXNlIG5vdGVzIGZpbGUuXG4gKi9cbmZ1bmN0aW9uIGdldFJlbGVhc2VUeXBlKCkge1xuICB0cnkge1xuICAgIGNvbnN0IG5vdGVzOiBzdHJpbmcgPSBmcy5yZWFkRmlsZVN5bmMoXG4gICAgICBwYXRoLnJlc29sdmUoXCJSRUxFQVNFX05PVEVTLm1kXCIpLFxuICAgICAgXCJ1dGY4XCJcbiAgICApO1xuICAgIGNvbnN0IGdyb3VwcyA9IG5vdGVzXG4gICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgLnNwbGl0KFwiXFxuXCIpXG4gICAgICAubWFwKChsaW5lKSA9PiAobGluZS5tYXRjaCgvIyMgKFxcdyspLykgfHwgW10pWzFdKVxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcbiAgICBpZiAoZ3JvdXBzLmluY2x1ZGVzKFwiYnJlYWtpbmdcIikpIHJldHVybiBcIm1ham9yXCI7XG4gICAgaWYgKGdyb3Vwcy5pbmNsdWRlcyhcImFkZGVkXCIpKSByZXR1cm4gXCJtaW5vclwiO1xuICAgIHJldHVybiBcInBhdGNoXCI7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3QgZGV0ZXJtaW5lIHJlbGVhc2UgdHlwZSBhZnRlciByZWxlYXNlIHdhcyBjcmVhdGVkXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuXG4vKipcbiAqIFVwZGF0ZSBvdXIgcmVsZWFzZSBub3RlcyBhbmQgZGV0ZXJtaW5lIHdoYXQgb3VyIG5leHQgdmVyc2lvbiBpcyBnb2luZyB0byBiZVxuICogYmFzZWQgb24gY29tbWl0IG1lc3NhZ2VzLlxuICovXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVWZXJzaW9uKGFsdGVybmF0ZT86IHN0cmluZykge1xuICAvLyBHZXQgb3VyIGN1cnJlbnQgdmVyc2lvbiBzbyB3ZSBjYW4gZW5zdXJlIG91ciB2ZXJzaW9uIGNoYW5nZWQuXG4gIGNvbnN0IGN1cnJlbnRWZXJzaW9uID0gYXdhaXQgdGFyZ2V0UHJvamVjdFZlcnNpb24oKTtcblxuICAvLyBFbnN1cmUgYWxsIGZyYWdtZW50cyBhcmUgZ29pbmcgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGNvbW1pdFxuICBpZiAoIShhd2FpdCBleGVjU3luYyhcImdpdFwiLCBbXCJhZGRcIiwgXCItQVwiXSkpKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJDb3VsZCBub3QgZW5zdXJlIGFsbCBmcmFnbWVudHMgYXJlIGFkZGVkIGZvciB0aGUgbmV4dCBjb21taXQuXCJcbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIEhhdmUgdGhpcyBleGVjdXRlIHRoZSByZWxlYXNlLW5vdGVzIHNjcmlwdFxuICBhd2FpdCByZWxlYXNlTm90ZXMoe1xuICAgIGZpbGU6IFwiUkVMRUFTRV9OT1RFUy5tZFwiLFxuICAgIHVwZGF0ZVBhY2thZ2U6IHRydWUsXG4gIH0pO1xuXG4gIC8vIEdldCB0aGUgdmVyc2lvbiBydW5uZXIgc2hvdWxkIGhhdmUgdXBkYXRlZCB0b1xuICBjb25zdCBuZXdWZXJzaW9uID0gYXdhaXQgdGFyZ2V0UHJvamVjdFZlcnNpb24oKTtcblxuICAvLyBJZiBvdXIgdmVyc2lvbiBoYXMgbm90IGNoYW5nZWQsIHRoZW4gdGhlcmUgd2VyZSBubyBjb21taXRzIHdpdGggcmVsZWFzZVxuICAvLyBub3Rlc1xuICBpZiAoY3VycmVudFZlcnNpb24gPT09IG5ld1ZlcnNpb24pIHtcbiAgICBjb25zb2xlLndhcm4oYFxuICAgICAgVGhlIHJlbGVhc2Ugc2NyaXB0IGRpZCBub3QgZGV0ZWN0IGFueSBjaGFuZ2VzIGZvciBhIHJlbGVhc2UuIElmIHlvdSBmaW5kXG4gICAgICB0aGlzIHRvIGJlIGluIGVycm9yIG9yIHlvdSB3YW50IHRvIGZvcmNlIGEgbmV3IHJlbGVhc2UuIE1ha2Ugc29tZSBjb21taXRzXG4gICAgICB3aXRoIHByb3BlciByZWxlYXNlIG5vdGUgZm9ybWF0dGVkIG1lc3NhZ2VzIHRvIHRyaWdnZXIgYSByZWxlYXNlLlxuICAgIGApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGlmIChhbHRlcm5hdGUpIHtcbiAgICBpZiAoZ2V0UmVsZWFzZVR5cGUoKSAhPT0gXCJwYXRjaFwiKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBcbiAgICAgICAgQ2Fubm90IGNyZWF0ZSBhIHJlbGVhc2UgZm9yIGFuIGFsdGVybmF0ZSBicmFuY2ggdGhhdCBpcyBub3QgYSBzaW1wbGVcbiAgICAgICAgcGF0Y2guIEZlYXR1cmVzIGFuZCBicmVha2luZyBjaGFuZ2VzIGNhbiBPTkxZIGJlIG1hZGUgb24gdGhlIG1haW4gYnJhbmNoIG9mXG4gICAgICAgIGRldmVsb3BtZW50LlxuICAgICAgYCk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IHRoZSB2ZXJzaW9uIGdlbmVyYXRlZCBieSB0aGUgcnVubmVyIHJlbGVhc2Ugbm90ZXMgY29tbWl0XG4gIGNvbnN0IGxhc3RDb21taXRQcm9jZXNzID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoXCJnaXRcIiwgW1xuICAgIFwibG9nXCIsXG4gICAgXCItMVwiLFxuICAgIFwiLS1wcmV0dHk9JUJcIixcbiAgXSk7XG5cbiAgaWYgKGxhc3RDb21taXRQcm9jZXNzID09PSBudWxsKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IHJlYWQgdGhlIGxhc3QgY29tbWl0IHZlcnNpb24gaW5mb3JtYXRpb25cIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc3QgdmVyc2lvbiA9IChcbiAgICBsYXN0Q29tbWl0UHJvY2Vzcy50cmltKCkudG9Mb3dlckNhc2UoKS5zcGxpdChcInJlbGVhc2UgXCIpWzFdIHx8IFwiXCJcbiAgKS50cmltKCk7XG5cbiAgaWYgKCF2ZXJzaW9uKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJDb3VsZCBub3QgZGV0ZXJtaW5lIHJlbGVhc2UgdmVyc2lvbiBmcm9tIHRoZSBsYXN0IGNvbW1pdDpcXG5cXG5cIixcbiAgICAgIGxhc3RDb21taXRQcm9jZXNzLnRvU3RyaW5nKCksXG4gICAgICBcIlxcblxcblwiXG4gICAgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBVcGRhdGUgdGhlIHJlbGVhc2UgdmVyc2lvbiBqc29uIGluIHRoZSBzb3VyY2VcbiAgaWYgKGZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwidWkvcmVsZWFzZS5qc29uXCIpKSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50cyA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJ1aS9yZWxlYXNlLmpzb25cIikpO1xuICAgICAgY29udGVudHMudmVyc2lvbiA9IHZlcnNpb247XG4gICAgICBmcy53cml0ZUpTT05TeW5jKHBhdGgucmVzb2x2ZShcInVpL3JlbGVhc2UuanNvblwiKSwgY29udGVudHMpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIkNvdWxkIG5vdCB1cGRhdGUgdGhlIHJlbGVhc2UuanNvbiBmaWxlIHdpdGggY3VycmVudCBsaWJyYXJ5IHZlcnNpb24uXCJcbiAgICAgICk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRoZSBjaGFuZ2VzIHRvIHRoZSByZWxlYXNlIGpzb24gZmlsZVxuICAgIGlmICghKGF3YWl0IGV4ZWNTeW5jKFwiZ2l0XCIsIFtcImFkZFwiLCBcIi1BXCJdKSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJDb3VsZCBub3QgZW5zdXJlIHRoZSByZWxlYXNlIGpzb24gd2FzIHVwZGF0ZWQgZm9yIHRoZSBuZXcgdmVyc2lvbi5cIlxuICAgICAgKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG5cbiAgICAvLyBBbWVuZCB0aGUgcmVsZWFzZSBjb21taXRcbiAgICBpZiAoIShhd2FpdCBleGVjU3luYyhcImdpdFwiLCBbXCJjb21taXRcIiwgXCItLWFtZW5kXCIsIFwiLS1uby1lZGl0XCJdKSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJDb3VsZCBub3QgYW1lbmQgdGhlIHJlbGVhc2UgY29tbWl0IHRvIGluY2x1ZGUgdGhlIHJlbGVhc2UganNvbiBmaWxlLlwiXG4gICAgICApO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh2ZXJzaW9uLmluY2x1ZGVzKCdcIicpKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJUaGUgdXBkYXRlIHZlcnNpb24gZ2VuZXJhdGVkIGlzIGludmFsaWQgYXMgaXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzXCIsXG4gICAgICB7IHZlcnNpb24gfVxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc29sZS53YXJuKFwiVXBkYXRpbmcgdmVyc2lvbiB0b1wiLCB7IHZlcnNpb24gfSk7XG4gIHJldHVybiB2ZXJzaW9uO1xufVxuXG4vKipcbiAqIFRoaXMgZ2VuZXJhdGVzIGEgdGFnIGZvciB0aGUgZ2l2ZW4gcmVsZWFzZVxuICovXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVUYWcodmVyc2lvbjogc3RyaW5nKSB7XG4gIC8vIFRhZyB0aGUgY29tbWl0IHdpdGggdGhlIHZlcnNpb24gbnVtYmVyXG4gIGlmIChcbiAgICAhKGF3YWl0IGV4ZWNTeW5jKGBnaXRgLCBbYHRhZ2AsIFwiLWFcIiwgdmVyc2lvbiwgXCItbVwiLCBgUmVsZWFzZSAke3ZlcnNpb259YF0pKVxuICApIHtcbiAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgbWFrZSB0YWcgZm9yIGdpdCBjb21taXRcIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBwZXJmb3JtcyBhbGwgYWN0aW9ucyB0byBwdXNoaW5nIHRoZSBnZW5lcmF0ZWQgcmVzdWx0cyB0byB0aGUgcmVtb3RlXG4gKiByZXBvc2l0b3J5XG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHB1c2hUb1JlbW90ZShcbiAgcmVtb3RlOiBzdHJpbmcsXG4gIHZlcnNpb246IHN0cmluZyxcbiAgZnJvbUJyYW5jaDogc3RyaW5nLFxuICB0b0JyYW5jaDogc3RyaW5nLFxuICBmb3JjZTogYm9vbGVhblxuKSB7XG4gIC8vIFB1c2ggdGhlIGNvbW1pdCB0byByZW1vdGUgcmVsZWFzZSBicmFuY2hcbiAgaWYgKFxuICAgICEoYXdhaXQgZXhlY1N5bmMoYGdpdGAsIFtcbiAgICAgIFwicHVzaFwiLFxuICAgICAgZm9yY2UgPyBcIi1mXCIgOiB2b2lkIDAsXG4gICAgICByZW1vdGUsXG4gICAgICBgJHtmcm9tQnJhbmNofToke3RvQnJhbmNofWAsXG4gICAgXSkpXG4gICkge1xuICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IHB1c2ggcmVsZWFzZSBjb21taXQgdG8gJHtyZW1vdGV9YCk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gUHVzaCB0aGUgdGFnIHRvIHJlbW90ZVxuICBpZiAoIShhd2FpdCBleGVjU3luYyhgZ2l0YCwgW1wicHVzaFwiLCByZW1vdGUsIHZlcnNpb25dKSkpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgcHVzaCB0YWcgdG8gdGhlIHJlbW90ZSByZXBvc2l0b3J5XCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgd2lsbCBlbnN1cmUgZWFjaCByZW1vdGUgaXMgYWNjZXNzaWJsZSBieSB0aGUgdXNlciBhbmQgd2lsbCBwdXNoIHRoZVxuICogcmVsZWFzZSBicmFuY2ggdG8gZWFjaCBvZiB0aGUgc3BlY2lmaWVkIHJlbW90ZXMgYXQgdGhlIHBvdGVudGlhbCB0YXJnZXRcbiAqIGJyYW5jaDpcbiAqXG4gKiByZW1vdGU6ZnJvbUJyYW5jaDp0b0JyYW5jaDpmb3JjZVxuICpcbiAqIElmIHRoZSBicmFuY2ggaXMgbm90IHNwZWNpZmllZCwgdGhlIGJyYW5jaCBzcGVjaWZpZWQgZm9yIHRoaXMgcHJvamVjdCB3aWxsXG4gKiBiZSB1c2VkLlxuICpcbiAqIFRoZSBcImZvcmNlXCIgb3B0aW9uIGlzIGxpdGVyYWwuIFVzZSB0aGUgd29yZCBcImZvcmNlXCIgdG8gdHJpZ2dlciBhIGZvcmNlIHB1c2guXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJlbGVhc2VBZGRpdGlvbmFsUmVtb3RlcyhhZGRSZW1vdGVzOiBzdHJpbmdbXSwgdmVyc2lvbjogc3RyaW5nKSB7XG4gIGlmIChhZGRSZW1vdGVzICYmIGFkZFJlbW90ZXMubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IHNob3VsZFJlbGVhc2VSZW1vdGVzID0gYXdhaXQgcHJvbXB0Q29uZmlybShcbiAgICAgIGRlc2NyaXB0aW9uYFxuICAgICAgICBUaGUgYnVpbGQgYW5kIHJlbGVhc2Ugd2FzIHN1Y2Nlc3NmdWwsIHdvdWxkIHlvdSBsaWtlIHRvIHJlbGVhc2UgdG8gdGhlXG4gICAgICAgIHNwZWNpZmllZCBhZGRpdGlvbmFsIHJlbW90ZXM/XG5cbiAgICAgICAgJHtjaGFsay5jeWFuQnJpZ2h0Qm9sZChhZGRSZW1vdGVzLmpvaW4oXCJcXG5cIikpfVxuICAgICAgYFxuICAgICk7XG5cbiAgICBpZiAoIXNob3VsZFJlbGVhc2VSZW1vdGVzKSByZXR1cm47XG4gIH1cblxuICAvLyBEbyBhIGZldGNoIGFnYWluIHRvIGVuc3VyZSB3ZSBoYXZlIHRoZSBsYXRlc3QgZnJvbSB0aGUgcmVtb3RlXG4gIGlmICghKGF3YWl0IGV4ZWNTeW5jKGBnaXRgLCBbXCJmZXRjaFwiLCBFTlNVUkVfUkVNT1RFXSkpKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IGZldGNoIGZyb20gcmVtb3RlIHNlcnZlcnMuXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGZvciAoY29uc3QgcmVtb3RlSW5mbyBvZiBhZGRSZW1vdGVzKSB7XG4gICAgLy8gUHVzaCB0aGUgcmVsZWFzZSB0byB0aGUgc3BlY2lmaWVkIHJlbW90ZXNcbiAgICBjb25zdCBbcmVtb3RlLCBmcm9tQnJhbmNoLCB0b0JyYW5jaCwgZm9yY2VdID0gcmVtb3RlSW5mby5zcGxpdChcIjpcIik7XG4gICAgLy8gTWFrZSBzdXJlIHRoZSBkZXYgaGFzIGFjY2VzcyB0byB0aGUgc3BlY2lmaWVkIHJlbW90ZVxuICAgIGF3YWl0IGdpdEVuc3VyZVJlbW90ZShyZW1vdGUpO1xuICAgIC8vIFJlc2V0IHRoZSBmcm9tQnJhbmNoIHRvIGl0J3MgbGF0ZXN0IGZyb20gb3JpZ2luXG4gICAgYXdhaXQgZ2l0VXBkYXRlQnJhbmNoKEVOU1VSRV9SRU1PVEUsIGZyb21CcmFuY2ggfHwgXCJtYXN0ZXJcIik7XG4gICAgLy8gRGVwbG95IHRvIHRoZSBjb25maWd1cmVkIGJyYW5jaCBvciB0byBtYXN0ZXJcbiAgICBhd2FpdCBwdXNoVG9SZW1vdGUoXG4gICAgICByZW1vdGUsXG4gICAgICB2ZXJzaW9uLFxuICAgICAgZnJvbUJyYW5jaCB8fCBcIm1hc3RlclwiLFxuICAgICAgdG9CcmFuY2ggfHwgXCJtYXN0ZXJcIixcbiAgICAgIGZvcmNlID09PSBcImZvcmNlXCJcbiAgICApO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBwZXJmb3JtcyBhbGwgb2YgdGhlIGJ1aWxkIGFjdGlvbnMgdG8gZ2VuZXJhdGUgYWxsIGZyYWdtZW50cyB0aGUgcHJvamVjdFxuICogd2lsbCBnZW5lcmF0ZSBmb3IgZGlzdHJpYnV0aW9ucyBhbmQgdGhlbiB3aWxsIHB1c2ggdGhvc2UgZnJhZ21lbnRzIGludG8gdGhlXG4gKiByZXBvLlxuICovXG5hc3luYyBmdW5jdGlvbiBidWlsZEFuZFB1c2goYWRkUmVtb3Rlczogc3RyaW5nW10pIHtcbiAgLy8gUHJvY2VzcyBhbmQgc2V0IGVudmlyb25tZW50IHZhcmlhYmxlc1xuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IFwicHJvZHVjdGlvblwiO1xuXG4gIC8vIE1ha2Ugc3VyZSB3ZSBjYW4gbWFrZSBjYWxscyB0byB0aGUgcmVwb1xuICBhd2FpdCB2YWxpZGF0ZVJlcG9zaXRvcnkoKTtcbiAgLy8gTW92ZSBvdXIgZ2l0IGNvbnRleHQgdG8gdGhlIHJlbGVhc2UgYnJhbmNoXG4gIGF3YWl0IGNoZWNrb3V0UmVsZWFzZSgpO1xuICAvLyBCdWlsZCB0aGUgcHJvamVjdCBmcmFnbWVudHNcbiAgYXdhaXQgcmVsZWFzZUJ1aWxkKCk7XG4gIC8vIEdldCB0aGUgbmV3IHZlcnNpb24gdGhpcyByZWxlYXNlIGlzIGdvaW5nIHRvIGJlY29tZS5cbiAgY29uc3QgdmVyc2lvbiA9IGF3YWl0IHVwZGF0ZVZlcnNpb24oKTtcbiAgLy8gVGFnIHRoZSByZWxlYXNlIGNvbW1pdCB3aXRoIHRoZSBsYXRlc3QgdmVyc2lvblxuICBhd2FpdCB1cGRhdGVUYWcodmVyc2lvbik7XG4gIC8vIFB1c2ggZXZlcnl0aGluZyB3ZSBoYXZlIHVwZGF0ZWQgd2l0aCBnaXQgdG8gdGhlIHJlbW90ZSByZXBvXG4gIGF3YWl0IHB1c2hUb1JlbW90ZShFTlNVUkVfUkVNT1RFLCB2ZXJzaW9uLCBcInJlbGVhc2VcIiwgXCJyZWxlYXNlXCIsIHRydWUpO1xuXG4gIC8vIEFzayB0byBydW4gdGhlIHByIHJlbGVhc2Ugc2NyaXB0XG4gIGNvbnN0IHNob3VsZFByID0gYXdhaXQgcHJvbXB0Q29uZmlybShcIldvdWxkIHlvdSBsaWtlIHRvIHJ1biBwciByZWxlYXNlP1wiKTtcblxuICBpZiAoc2hvdWxkUHIpIHtcbiAgICAvLyBBdHRlbXB0IHRvIHJ1biBwciByZWxlYXNlLiBXZSBkb24ndCBjYXJlIGlmIGl0IHdvcmtzIG9yIG5vdCBhcyB0aGlzIGlzIGFuXG4gICAgLy8gb3B0aW9uYWwgYnJhbmNoIHRha2VuIGJ5IHRoZSB1c2VyIGFueXdoby5cbiAgICBhd2FpdCBleGVjU2NyaXB0KFwicHJcIiwgW1wicmVsZWFzZVwiXSk7XG4gIH1cblxuICAvLyBBc2sgdG8gZGVwbG95IGFkZGl0aW9uYWwgc3BlY2lmaWVkIHJlbW90ZXNcbiAgYXdhaXQgcmVsZWFzZUFkZGl0aW9uYWxSZW1vdGVzKGFkZFJlbW90ZXMsIHZlcnNpb24pO1xuICAvLyBOb3cgd2UgYXNrIHRvIHJldHVybiB0byBvcmlnaW5hbCBicmFuY2hcbiAgYXdhaXQgZ2l0UmV0dXJuVG9EZXYodHJ1ZSk7XG59XG5cbi8qKlxuICogRW50cnkgbWV0aG9kIGZvciB0aGUgcmVsZWFzZSBwcm9jZXNzXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bihhZGRSZW1vdGVzOiBzdHJpbmdbXSkge1xuICBjb25zb2xlLndhcm4oXCJFeGVjdXRpbmcgcmVsZWFzZSBzY3JpcHRcIik7XG4gIGJ1aWxkQW5kUHVzaChhZGRSZW1vdGVzKTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgcmVsZWFzZUxpYnJhcnlUeXBlcyB9IGZyb20gXCIuLi8uLi9saWIvYnVpbGQvbGlicmFyeS92aXRlL3JlbGVhc2UtbGlicmFyeS10eXBlcy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oKSB7XG4gIGF3YWl0IHJlbGVhc2VMaWJyYXJ5VHlwZXMoKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IElnbm9yZSBmcm9tIFwiaWdub3JlXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vbGliL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5pbXBvcnQgeyB3YWl0IH0gZnJvbSBcIi4uL2xpYi91dGlsL3dhaXQuanNcIjtcblxuY29uc3QgZ2l0SWdub3JlUGF0aCA9IHBhdGgucmVzb2x2ZShcIi5naXRpZ25vcmVcIik7XG5sZXQgaWdub3JlID0gSWdub3JlLmRlZmF1bHQoKTtcblxuaWYgKGZzLmV4aXN0c1N5bmMoZ2l0SWdub3JlUGF0aCkpIHtcbiAgaWdub3JlID0gaWdub3JlLmFkZChmcy5yZWFkRmlsZVN5bmMoZ2l0SWdub3JlUGF0aCkudG9TdHJpbmcoKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdHlwZXNjcmlwdCB0eXBlIGNvbXBpbGF0aW9uIHdpdGhvdXQgZW1pdHRpbmcgYW55dGhpbmcuIFRoaXMgY2FuIGJlXG4gKiB1c2VkIHRvIGZpbmQgZXJyb3JzIGluIHRoZSBwcm9qZWN0IGJlZm9yZSBhIHJlbGVhc2UgaXMgYXR0ZW1wdGVkLiBPciB5b3UgY2FuXG4gKiBydW4gdGhpcyBhcyBub2RlbW9uIHByb2Nlc3MgdG8gZmluZCBlcnJvcnMgYXMgZGV2ZWxvcG1lbnQgaGFwcGVucy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gcnVuVHlwZXNjcmlwdChtb2RlOiBzdHJpbmcpIHtcbiAgLy8gQnVpbGQgZGVjbGFyYXRpb24gZmlsZXMgZm9yIHRoZSBsaWJyYXJ5IG9ubHlcbiAgY29uc3QgdHNDb25maWcgPSBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcuanNvblwiKSk7XG4gIHRzQ29uZmlnLmV4Y2x1ZGUgPSB0c0NvbmZpZy5leGNsdWRlIHx8IFtdO1xuICB0c0NvbmZpZy5pbmNsdWRlID0gKHRzQ29uZmlnPy5pbmNsdWRlIHx8IFtdKS5maWx0ZXIoXG4gICAgKHA6IHN0cmluZykgPT4gIWlnbm9yZS5pZ25vcmVzKHBhdGgucmVsYXRpdmUoXCIuL1wiLCBwKSlcbiAgKTtcbiAgLy8gdHNDb25maWcuZXhjbHVkZS5wdXNoKFwibGliL3NlcnZlclwiKTtcbiAgZnMud3JpdGVKU09OU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIiksIHRzQ29uZmlnKTtcbiAgLy8gRW5zdXJlIHRoZSBmaWxlIHN5c3RlbSBoYXMgZmx1c2hlZCB0aGUgdGVtcCBmaWxlIHRvIGRpc2tcbiAgYXdhaXQgd2FpdCg1MDApO1xuXG4gIC8vIE1ha2UgYSBjbGVhbiB1cCByb3V0aW5lIGZvciB3YXRjaCBtb2RlXG4gIGlmIChtb2RlID09PSBcIndhdGNoXCIpIHtcbiAgICBjb25zdCBoYW5kbGVFeGl0ID0gYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc29sZS53YXJuKFwiRXhpdCBUUyBwcm9jZXNzXCIpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gTk9PUFxuICAgICAgfVxuXG4gICAgICBwcm9jZXNzLmV4aXQoMCk7XG4gICAgfTtcblxuICAgIC8vIENhdGNoIHdoZW4gYXBwIGlzIGNsb3NpbmdcbiAgICBwcm9jZXNzLm9uKFwiZXhpdFwiLCBoYW5kbGVFeGl0KTtcbiAgICAvLyBDYXRjaCBjdHJsK2MgZXZlbnRcbiAgICBwcm9jZXNzLm9uKFwiU0lHSU5UXCIsIGhhbmRsZUV4aXQpO1xuICAgIC8vIENhdGNoIFwia2lsbCBwaWRcIiAoZm9yIGV4YW1wbGU6IG5vZGVtb24gcmVzdGFydClcbiAgICBwcm9jZXNzLm9uKFwiU0lHVVNSMVwiLCBoYW5kbGVFeGl0KTtcbiAgICBwcm9jZXNzLm9uKFwiU0lHVVNSMlwiLCBoYW5kbGVFeGl0KTtcbiAgICBwcm9jZXNzLm9uKFwiU0lHVEVSTVwiLCBoYW5kbGVFeGl0KTtcbiAgICAvLyBDYXRjaCB1bmNhdWdodCBleGNlcHRpb25zXG4gICAgcHJvY2Vzcy5vbihcInVuY2F1Z2h0RXhjZXB0aW9uXCIsIGhhbmRsZUV4aXQpO1xuICB9XG4gIGlmIChcbiAgICAhZXhlY1N5bmMoXCJ0c2NcIiwgW1xuICAgICAgXCItZFwiLFxuICAgICAgbW9kZSA9PT0gXCJ3YXRjaFwiID8gXCItLXdhdGNoXCIgOiBcIlwiLFxuICAgICAgXCItLWluY3JlbWVudGFsXCIsXG4gICAgICBcIi0tbm9lbWl0XCIsXG4gICAgICBcIi0tcHJldHR5XCIsXG4gICAgICBcIi0tdHNCdWlsZEluZm9GaWxlXCIsXG4gICAgICBwYXRoLnJlc29sdmUoXCJub2RlX21vZHVsZXMvLmNhY2hlL3RzYy90c2MudHNidWlsZGluZm9cIiksXG4gICAgICBcIi0tb3V0RGlyXCIsXG4gICAgICBwYXRoLnJlc29sdmUoXCJkaXN0XCIpLFxuICAgICAgXCItLXByb2plY3RcIixcbiAgICAgIHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSxcbiAgICBdKVxuICApIHtcbiAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY29tcGlsZSB0eXBlIGRlY2xhcmF0aW9uc1wiKTtcbiAgICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc3QgZXNsaW50VGFyZ2V0cyA9ICh0c0NvbmZpZz8uaW5jbHVkZSB8fCBbXSlcbiAgICAuZmlsdGVyKChwOiBzdHJpbmcpID0+ICFpZ25vcmUuaWdub3JlcyhwYXRoLnJlbGF0aXZlKFwiLi9cIiwgcCkpKVxuICAgIC5tYXAoKHA6IHN0cmluZykgPT4gcGF0aC5yZXNvbHZlKHApKVxuICAgIC5maWx0ZXIoKHA6IHN0cmluZykgPT4gZnMuZXhpc3RzU3luYyhwKSAmJiAhcC5pbmNsdWRlcyhcIm5vZGVfbW9kdWxlc1wiKSk7XG5cbiAgaWYgKGVzbGludFRhcmdldHMubGVuZ3RoID4gMCkge1xuICAgIGlmIChcbiAgICAgICFleGVjU3luYyhcbiAgICAgICAgLy8gYGVzbGludCAke2VzbGludFRhcmdldHMuam9pbihcIiBcIil9IC1jICR7cGF0aC5yZXNvbHZlKFxuICAgICAgICAvLyAgIFwiLmVzbGludHJjXCJcbiAgICAgICAgLy8gKX0gLS1leHQgLnRzIC0tZXh0IC50c3hgXG4gICAgICAgIFwiZXNsaW50XCIsXG4gICAgICAgIFtcbiAgICAgICAgICAuLi5lc2xpbnRUYXJnZXRzLFxuICAgICAgICAgIFwiLWNcIixcbiAgICAgICAgICBwYXRoLnJlc29sdmUoXCIuZXNsaW50cmNcIiksXG4gICAgICAgICAgXCItLWV4dFwiLFxuICAgICAgICAgIFwiLnRzXCIsXG4gICAgICAgICAgXCItLWV4dFwiLFxuICAgICAgICAgIFwiLnRzeFwiLFxuICAgICAgICBdXG4gICAgICApXG4gICAgKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgZXNsaW50IGNoZWNrcy5cIik7XG4gICAgICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICB9XG5cbiAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIikpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4obW9kZTogc3RyaW5nKSB7XG4gIGF3YWl0IHJ1blR5cGVzY3JpcHQobW9kZSk7XG59XG4iLAogICAgImltcG9ydCBydW5BcHBTZXJ2ZXIgZnJvbSBcIi4uLy4uL2xpYi9idWlsZC93ZWItYXBwL3ZpdGUvcnVuLWFwcC1zZXJ2ZXIuanNcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5cbi8qKlxuICogVGhpcyBzaW1wbHkgZmlyZXMgdXAgdGhlIGFwcCBzZXJ2ZXIgdG8gcnVuLlxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oKSB7XG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiU3RhcnRpbmcgc2VydmVyLi4uXCIpKTtcbiAgYXdhaXQgcnVuQXBwU2VydmVyKCk7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuLi9saWIvZXhlYy9leGVjLXN5bmMuanNcIjtcblxuLyoqXG4gKiBTdGFydHMgYSBzZXJ2ZXIgd2l0aCBhIGdpdmVuIGVudHJ5IHBvaW50LlxuICovXG5hc3luYyBmdW5jdGlvbiBzdGFydFNlcnZlcihwYXRoVG9TZXJ2ZXI6IHN0cmluZykge1xuICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aFRvU2VydmVyKSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiQXR0ZW1wdGVkIHRvIHN0YXJ0IGEgc2VydmVyIGJ1dCBubyBzZXJ2ZXIgZGlzdHJpYnV0aW9uIHdhcyBmb3VuZCBhdFwiLFxuICAgICAgcGF0aFRvU2VydmVyXG4gICAgKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhd2FpdCBleGVjU3luYyhgYnVuYCwgW2Ake3BhdGhUb1NlcnZlcn1gXSk7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIFN0YXJ0cyB0aGUgRGV2b3BzIEFQSSBob3N0aW5nIGlmIGEgRGV2b3BzIGFwcCBkaXN0cmlidXRpb24gaXMgYXZhaWxhYmxlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0RGV2b3BzQVBJKCkge1xuICBjb25zdCBwYXRoVG9TZXJ2ZXIgPSBwYXRoLnJlc29sdmUoXCJkb2NzL2luZGV4LmpzXCIpO1xuICByZXR1cm4gYXdhaXQgc3RhcnRTZXJ2ZXIocGF0aFRvU2VydmVyKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgdGhlIHdlYiBhcHAgaWYgYSB3ZWIgYXBwIHNlcnZlciBpcyBhdmFpbGFibGVcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc3RhcnRXZWJBcHAoKSB7XG4gIC8vIFRlbGwgdGhlIHByb2Nlc3Mgd2hlcmUgdG8gZmluZCBpdCdzIHJlc291cmNlcyB0aGF0IHdlcmUgc3BlY2lmaWVkIGluIGNsaWVudFxuICBwcm9jZXNzLmVudi5SRVNPVVJDRV9QQVRIID0gcGF0aC5yZXNvbHZlKFwiZGlzdC9hcHAvY2xpZW50XCIpO1xuICAvLyBHZXQgdGhlIHBhdGggdG8gb3VyIHNlcnZlciBidW5kbGVcbiAgY29uc3QgcGF0aFRvU2VydmVyID0gcGF0aC5yZXNvbHZlKFwiZGlzdC9hcHAvc2VydmVyL2luZGV4LmpzXCIpO1xuICAvLyBTdGFydCB0aGUgc2VydmVyIGRpc3RyaWJ1dGlvblxuICByZXR1cm4gYXdhaXQgc3RhcnRTZXJ2ZXIocGF0aFRvU2VydmVyKTtcbn1cblxuLyoqXG4gKiBFbnRyeSBtZXRob2QgZm9yIHRoZSBzdGFydCBjb21tYW5kXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bih0YXJnZXQ6IHN0cmluZywgX29wdGlvbnM6IGFueSkge1xuICAvLyBEZWZhdWx0IG91ciBwb3J0IHRvIGEgcHJvcGVyIEhUVFAgcG9ydCBwcm90b2NvbFxuICBjb25zdCB7IFBPUlQgPSBcIjgwXCIgfSA9IHByb2Nlc3MuZW52O1xuICBwcm9jZXNzLmVudi5QT1JUID0gUE9SVDtcblxuICBsZXQgc2VydmVyUnVubmluZyA9IGZhbHNlO1xuXG4gIHN3aXRjaCAodGFyZ2V0KSB7XG4gICAgY2FzZSBcImFwcFwiOlxuICAgICAgc2VydmVyUnVubmluZyA9IGF3YWl0IHN0YXJ0V2ViQXBwKCk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJkZXZvcHNcIjpcbiAgICAgIHNlcnZlclJ1bm5pbmcgPSBhd2FpdCBzdGFydERldm9wc0FQSSgpO1xuICAgICAgYnJlYWs7XG5cbiAgICAvLyBEbyBub3RoaW5nIGlmIGEgcHJvcGVyIHRhcmdldCB3YXMgbm90IHBpY2tlZFxuICAgIGRlZmF1bHQ6XG4gICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkludmFsaWQgdGFyZ2V0IGZvciBzdGFydCBzY3JpcHQgc3BlY2lmaWVkXCIsIHRhcmdldCk7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgfVxuXG4gIC8vIElmIHdlIGhhdm4ndCBiZWVuIGFibGUgdG8gcGljayBhIHNlcnZlciBiYXNlZCBvbiB0YXJnZXQsIHRoZW4gd2UgYXR0ZW1wdCB0byBzdGFydCB0aGUgc2VydmVyIHZpYSBkZWZhdWx0IGJlaGF2aW9yXG4gIGlmICghc2VydmVyUnVubmluZykge1xuICAgIHNlcnZlclJ1bm5pbmcgPSBhd2FpdCBzdGFydFdlYkFwcCgpO1xuICAgIGlmIChzZXJ2ZXJSdW5uaW5nKSByZXR1cm47XG4gICAgc2VydmVyUnVubmluZyA9IGF3YWl0IHN0YXJ0RGV2b3BzQVBJKCk7XG4gICAgaWYgKHNlcnZlclJ1bm5pbmcpIHJldHVybjtcbiAgfVxufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgZXhlY1NjcmlwdFggfSBmcm9tIFwiLi4vZXhlYy9leGVjLXNjcmlwdHguanNcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5UZXN0cygpIHtcbiAgY29uc3QgdHNjb25maWdQYXRoID0gcGF0aC5yZXNvbHZlKFwidHNjb25maWcuanNvblwiKTtcblxuICBpZiAoIWZzLmV4aXN0c1N5bmModHNjb25maWdQYXRoKSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlRhcmdldCBwcm9qZWN0IGRvZXMgbm90IGhhdmUgYSBUU0NvbmZpZ1wiKTtcbiAgfVxuXG4gIC8vIFNlZSBpZiB3ZSBhcmUgcnVubmluZyB0aGUgdW5pdCB0ZXN0cyB3aXRoIHRoZSBuZWVkIHRvIGF0dGFjaCBhIGRlYnVnIGNvbnNvbGVcbiAgY29uc3QgZGVidWcgPSBCb29sZWFuKHByb2Nlc3MuZW52LkRFQlVHKTtcbiAgY29uc3QgcGF0dGVybiA9IHByb2Nlc3MuZW52LlBBVFRFUk47XG4gIGNvbnN0IHdhdGNoID0gcHJvY2Vzcy5lbnYuV0FUQ0g7XG4gIGNvbnN0IGxlc3MgPSBwcm9jZXNzLmVudi5MRVNTO1xuICAvLyBSdW4gcHJldHRpZXIgb25jZVxuICBjb25zdCBqZXN0Q29uZmlnID0gcGF0aC5yZXNvbHZlKFwiamVzdC5jb25maWcuanNcIik7XG4gIC8vIFN0b3AgZXhlY1N5bmMgY2F1Z2h0IGVycm9ycy4gV2Ugd2FudCBqZXN0IHRvIGhhbmRsZSB0aG9zZSBsb2dzIGZvciB1c1xuICBleGVjU3luYy5zaWxlbnQgPSB0cnVlO1xuXG4gIHRyeSB7XG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICBleGVjU3luYyhcIm5vZGVcIiwgW1xuICAgICAgICBcIi0taW5zcGVjdC1icmtcIixcbiAgICAgICAgcGF0aC5yZXNvbHZlKFwibm9kZV9tb2R1bGVzLy5iaW4vamVzdFwiKSxcbiAgICAgICAgXCItLXJ1bkluQmFuZFwiLFxuICAgICAgICB3YXRjaCA/IFwiLS13YXRjaEFsbFwiIDogXCJcIixcbiAgICAgICAgXCItLXZlcmJvc2VcIixcbiAgICAgICAgbGVzcyA9PT0gXCJ0cnVlXCIgPyBcImZhbHNlXCIgOiB2b2lkIDAsXG4gICAgICAgIFwiLS1jb2xvcnNcIixcbiAgICAgICAgXCItLWNvbmZpZ1wiLFxuICAgICAgICBqZXN0Q29uZmlnLFxuICAgICAgICBwYXR0ZXJuID8gYC0tdGVzdE5hbWVQYXR0ZXJuICR7cGF0dGVybn1gIDogXCJcIixcbiAgICAgIF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBleGVjU2NyaXB0WChcbiAgICAgICAgW1xuICAgICAgICAgIFwiamVzdFwiLFxuICAgICAgICAgIHdhdGNoID8gXCItLXdhdGNoQWxsXCIgOiBcIlwiLFxuICAgICAgICAgIFwiLS12ZXJib3NlXCIsXG4gICAgICAgICAgbGVzcyA9PT0gXCJ0cnVlXCIgPyBcImZhbHNlXCIgOiB2b2lkIDAsXG4gICAgICAgICAgXCItLWNvbG9yc1wiLFxuICAgICAgICAgIFwiLS1jb25maWdcIixcbiAgICAgICAgICBqZXN0Q29uZmlnLFxuICAgICAgICAgIHBhdHRlcm4gPyBgLS10ZXN0TmFtZVBhdHRlcm49JHtwYXR0ZXJufWAgOiBcIlwiLFxuICAgICAgICBdLFxuICAgICAgICAvLyBUaGUgYnVuIGZsYWcgY3VycmVudGx5IGNhdXNlcyBqZXN0IHRvIGJyZWFrIHRoZSB0cy1qZXN0IHR5cGUgY2hlY2tzXG4gICAgICAgIHtcbiAgICAgICAgICBleGNsdWRlQnVuRmxhZzogdHJ1ZSxcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiVGVzdHMgZmFpbGVkLiBQbGVhc2UgbG9vayBhdCBsb2dzIHRvIHNlZSB0aGUgZXJyb3JzIGRpc2NvdmVyZWRcIlxuICAgICk7XG4gIH1cblxuICBjb25zb2xlLndhcm4oY2hhbGsuY3lhbkJyaWdodChcIlRlc3RzIGNvbXBsZXRlXCIpKTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgcnVuVGVzdHMgfSBmcm9tIFwiLi4vLi4vbGliL3VuaXQtdGVzdC9ydW4tdGVzdHMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKCkge1xuICBjb25zb2xlLndhcm4oXCJSdW5uaW5nIHVuaXQgdGVzdHMuLi5cIik7XG4gIC8vIEV4ZWN1dGUgdGhlIHRlc3RzXG4gIGF3YWl0IHJ1blRlc3RzKCk7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgcm1yZiBmcm9tIFwicmltcmFmXCI7XG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuLi8uLi9saWIvZXhlYy9leGVjLXN5bmMuanNcIjtcblxuLyoqXG4gKiBUaGlzIHNjcmlwdCBjbGVhbnMgb3V0IHN0b3J5Ym9vayBjYWNoaW5nIHRoYXQgY2F1c2VzIHVwZGF0ZXMgdG8gYmUgaGlkZGVuXG4gKiB3aGVuIGVkaXRpbmcgc3Rvcnlib29rIGNvbmZpZ3VyYXRpb24uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgY29uc3QgY2FjaGUgPSBwYXRoLnJlc29sdmUoXCIuL25vZGVfbW9kdWxlcy8uY2FjaGUvXCIpO1xuICBjb25zdCBidWlsZCA9IHBhdGgucmVzb2x2ZShcIi4vYnVpbGRcIik7XG5cbiAgaWYgKGZzLmV4aXN0c1N5bmMoY2FjaGUpKSB7XG4gICAgcm1yZi5zeW5jKGNhY2hlKTtcbiAgICBjb25zb2xlLndhcm4oXCJDYWNoZTogQ2xlYW4gY29tcGxldGVcIik7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKFwiQ2FjaGU6IEFscmVhZHkgY2xlYW5cIik7XG4gIH1cblxuICBpZiAoZnMuZXhpc3RzU3luYyhidWlsZCkpIHtcbiAgICBybXJmLnN5bmMoYnVpbGQpO1xuICAgIGNvbnNvbGUud2FybihcIkJ1aWxkOiBDbGVhbiBjb21wbGV0ZVwiKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJCdWlsZDogQWxyZWFkeSBjbGVhblwiKTtcbiAgfVxuXG4gIGlmIChhd2FpdCBleGVjU3luYyhcImJ1blwiLCBbXCJwbVwiLCBcImNhY2hlXCIsIFwicm1cIl0pKSB7XG4gICAgY29uc29sZS53YXJuKFwiQnVuOiBDbGVhbiBjb21wbGV0ZVwiKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJCdW46IEFscmVhZHkgY2xlYW5cIik7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNyZWF0ZVJlcXVpcmUgfSBmcm9tIFwibW9kdWxlXCI7XG5cbi8qKlxuICogR2V0IHRoZSBwYXRoIHRvIHRoZSBub2RlX21vZHVsZXMvLmNhY2hlIGZvbGRlciBmb3IgYSBnaXZlbiBwYWNrYWdlLlxuICpcbiAqIEBwYXJhbSBwYWNrYWdlTmFtZSBSZXF1aXJlZCBuYW1lIG9mIHRoZSBucG0gcGFja2FnZSB0byBpZGVudGlmeVxuICogQHBhcmFtIGZvbGRlciBSZXF1aXJlZCBuYW1lIG9mIHRoZSBmb2xkZXIgdG8gcGxhY2UgaW5zaWRlIHRoZSBub2RlX21vZHVsZXMvLmNhY2hlIGZvbGRlclxuICogQHJldHVybnMgRnVsbCBwYXRoIHRvIHRoZSBjYWNoZSBmb2xkZXJcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhY2thZ2VDYWNoZVBhdGgoXG4gIHBhY2thZ2VOYW1lOiBzdHJpbmcsXG4gIGZvbGRlcjogc3RyaW5nXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCByZXF1aXJlID0gY3JlYXRlUmVxdWlyZShpbXBvcnQubWV0YS51cmwpO1xuICBjb25zdCBtb2R1bGVQYXRoID0gcmVxdWlyZS5yZXNvbHZlKHBhY2thZ2VOYW1lKTtcblxuICAvLyBHZXQgcHVwcGV0ZWVyJ3Mgbm9kZV9tb2R1bGUgcGF0aFxuICBjb25zdCBwYXJ0cyA9IG1vZHVsZVBhdGguc3BsaXQoXCJub2RlX21vZHVsZXNcIik7XG4gIGNvbnN0IG1vZHVsZVJvb3QgPSBwYXJ0c1swXTtcbiAgY29uc3QgbW9kdWxlRGlyID0gcGFydHNbMV0uc3BsaXQocGF0aC5zZXApWzFdO1xuXG4gIC8vIENyZWF0ZSBhIHBhdGggdG8gdGhlIGRlc2lyZWQgY2FjaGUgbG9jYXRpb25cbiAgY29uc3QgbW9kdWxlQ2FjaGVQYXRoID0gcGF0aC5qb2luKFxuICAgIG1vZHVsZVJvb3QsXG4gICAgXCJub2RlX21vZHVsZXNcIixcbiAgICBtb2R1bGVEaXIsXG4gICAgXCJub2RlX21vZHVsZXNcIixcbiAgICBcIi5jYWNoZVwiLFxuICAgIGZvbGRlclxuICApO1xuXG4gIHJldHVybiBtb2R1bGVDYWNoZVBhdGg7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgdXJsIGZyb20gXCJ1cmxcIjtcbmltcG9ydCB7IGdldFBhY2thZ2VDYWNoZVBhdGggfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvcGFja2FnZS1jYWNoZS1wYXRoLmpzXCI7XG5pbXBvcnQgeyBnaXRIYXNDaGFuZ2VzIH0gZnJvbSBcIi4uLy4uL2xpYi9naXQvZ2l0LWhhcy1jaGFuZ2VzLmpzXCI7XG5cbmNvbnN0IF9fZGlybmFtZSA9IHVybC5maWxlVVJMVG9QYXRoKG5ldyBVUkwoXCIuXCIsIGltcG9ydC5tZXRhLnVybCkpO1xuXG4vKipcbiAqIFRvIG9wZW4gdXAgZ2l0bGFiIG1lcmdlIHJlcXVlc3QsIHdlIG5lZWQgdG8gZmV0Y2ggdGhlIHByb2plY3QgSUQuIFRoZSBwcm9qZWN0XG4gKiBJRCBpcyBhdmFpbGFibGUgb24gdGhlIGJvZHkgb2YgdGhlIHBhZ2UgbG9hZGVkIGZvciB0aGUgcmVwby5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gb3BlbkdpdGxhYlBSKFxuICByZXBvVXJsOiBzdHJpbmcsXG4gIHJlbGVhc2VWZXJzaW9uOiBzdHJpbmcsXG4gIG1hc3RlckJyYW5jaDogc3RyaW5nXG4pIHtcbiAgY29uc3QgcHVwcGV0ZWVyID0gYXdhaXQgaW1wb3J0KFwicHVwcGV0ZWVyXCIpO1xuICBjb25zdCBjYWNoZVBhdGggPSBhd2FpdCBnZXRQYWNrYWdlQ2FjaGVQYXRoKFwicHVwcGV0ZWVyXCIsIFwicHItcmVsZWFzZVwiKTtcbiAgY29uc3QgYnJvd3NlciA9IGF3YWl0IHB1cHBldGVlci5sYXVuY2goe1xuICAgIC8vIElmIHNob3dMb2dJbiwgdGhlbiB3ZSBtdXN0IHByZXNlbnQgdGhlIGJyb3dzZXIgc28gdGhlIHVzZXIgY2FuIGVudGVyXG4gICAgLy8gdGhlaXIgY3JlZGVudGlhbHMuXG4gICAgaGVhZGxlc3M6IGZhbHNlLFxuICAgIHVzZXJEYXRhRGlyOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBjYWNoZVBhdGgpLFxuICAgIGRlZmF1bHRWaWV3cG9ydDogbnVsbCxcbiAgfSk7XG5cbiAgY29uc3QgcGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFnZSgpO1xuICBjb25zb2xlLndhcm4oXCJPcGVuaW5nIHByb2plY3QgdXJsLi4uXCIpO1xuICBhd2FpdCBwYWdlLmdvdG8ocmVwb1VybCk7XG5cbiAgLy8gVGhlIHByb2plY3QgSUQgaXMgbG9jYXRlZCBvbiB0aGUgYm9keSB3aXRoaW4gYXR0cmlidXRlXG4gIC8vIGRhdGEtcHJvamVjdC1pZD1cIjcyMlwiXG4gIGNvbnN0IHByb2plY3RJZCA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT5cbiAgICBkb2N1bWVudC5ib2R5LmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdC1pZFwiKVxuICApO1xuXG4gIGlmICghcHJvamVjdElkKSB7XG4gICAgY29uc29sZS53YXJuKFwiTm8gcHJvamVjdCBpZCBmb3VuZCwgVXNlciBsb2dpbiByZXF1aXJlZC4uLlwiKTtcbiAgICBsZXQgc2hvdWxkRXhpdCA9IHRydWU7XG5cbiAgICBicm93c2VyLm9uKFwiZGlzY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICAgIGlmICghc2hvdWxkRXhpdCkgcmV0dXJuO1xuICAgICAgY29uc29sZS53YXJuKFwiQnJvd3NlciB3YXMgY2xvc2VkIG9yIGNyYXNoZWQuIFRyeSB0aGUgY29tbWFuZCBhZ2Fpbi5cIik7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG5cbiAgICBhd2FpdCBwYWdlLmdvdG8ocmVwb1VybCk7XG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yRnVuY3Rpb24oXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RJZCA9IGRvY3VtZW50Py5ib2R5Py5nZXRBdHRyaWJ1dGUoXCJkYXRhLXByb2plY3QtaWRcIik7XG4gICAgICAgIHJldHVybiBwcm9qZWN0SWQgIT09IG51bGwgJiYgcHJvamVjdElkICE9PSB2b2lkIDA7XG4gICAgICB9LFxuICAgICAgeyB0aW1lb3V0OiAwIH1cbiAgICApO1xuXG4gICAgYXdhaXQgcGFnZS5jbG9zZSgpO1xuICAgIHNob3VsZEV4aXQgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBhd2FpdCBwYWdlLmNsb3NlKCk7XG4gIH1cblxuICBjb25zb2xlLndhcm4oXCJQcm9qZWN0IElEIGZvdW5kOlwiLCBwcm9qZWN0SWQsIFwiXFxuT3BlbmluZyBtZXJnZSByZXF1ZXN0Li4uXCIpO1xuXG4gIGNvbnN0IG1ha2VQUiA9IGFzeW5jIChcbiAgICBzb3VyY2U6IHN0cmluZyxcbiAgICB0YXJnZXQ6IHN0cmluZyxcbiAgICBpbmNsdWRlVXRmPzogYm9vbGVhblxuICApID0+IHtcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG5cbiAgICAvLyBVc2UgdGhlIHByb3BlciBVUkwgc3RydWN0dXJlIHRvIGdlbmVyYXRlIHRoZSBwYWdlIHdpdGggdGhlIGNvcnJlY3QgbWVyZ2UgcmVxdWVzdFxuICAgIGF3YWl0IHBhZ2UuZ290byhcbiAgICAgIGAke3JlcG9Vcmx9Ly0vbWVyZ2VfcmVxdWVzdHMvbmV3PyR7XG4gICAgICAgIGluY2x1ZGVVdGYgPyBcInV0Zjg9JUUyJTlDJTkzJlwiIDogXCJcIlxuICAgICAgfW1lcmdlX3JlcXVlc3QlNUJzb3VyY2VfcHJvamVjdF9pZCU1RD0ke3Byb2plY3RJZH0mbWVyZ2VfcmVxdWVzdCU1QnNvdXJjZV9icmFuY2glNUQ9JHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgIHNvdXJjZVxuICAgICAgKX0mbWVyZ2VfcmVxdWVzdCU1QnRhcmdldF9wcm9qZWN0X2lkJTVEPSR7cHJvamVjdElkfSZtZXJnZV9yZXF1ZXN0JTVCdGFyZ2V0X2JyYW5jaCU1RD0ke3RhcmdldH1gXG4gICAgKTtcblxuICAgIC8vIFdhaXQgZm9yIHRoZSBlbGVtZW50cyB0byBiZSBhdmFpbGFibGUgdG8gbWFuaXB1bGF0ZVxuICAgIGF3YWl0IHBhZ2Uud2FpdEZvckZ1bmN0aW9uKFxuICAgICAgKCkgPT4ge1xuICAgICAgICBjb25zdCBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtZXJnZV9yZXF1ZXN0X3RpdGxlXCIpO1xuICAgICAgICByZXR1cm4gbm9kZSAhPT0gbnVsbCAmJiBub2RlICE9PSB2b2lkIDA7XG4gICAgICB9LFxuICAgICAgeyB0aW1lb3V0OiAwIH1cbiAgICApO1xuXG4gICAgLy8gUG9wdWxhdGUgdGhlIGVsZW1lbnRzIHdpdGggZXhwZWN0ZWQgY29uZmlndXJhdGlvblxuICAgIGF3YWl0IHBhZ2UuZXZhbHVhdGUoKHJlbGVhc2VWZXJzaW9uKSA9PiB7XG4gICAgICAvLyBQb3B1bGF0ZSB0aGUgdGl0bGVcbiAgICAgIGxldCBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAgICAgXCIjbWVyZ2VfcmVxdWVzdF90aXRsZVwiXG4gICAgICApO1xuICAgICAgaWYgKG5vZGUpIG5vZGUudmFsdWUgPSBgUmVsZWFzZSAke3JlbGVhc2VWZXJzaW9ufWA7XG5cbiAgICAgIC8vIFBvcHVsYXRlIGRlc2NyaXB0aW9uXG4gICAgICBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAgICAgXCIjbWVyZ2VfcmVxdWVzdF9kZXNjcmlwdGlvblwiXG4gICAgICApO1xuICAgICAgaWYgKG5vZGUpIG5vZGUudmFsdWUgPSBgUmVsZWFzZSAke3JlbGVhc2VWZXJzaW9ufWA7XG5cbiAgICAgIC8vIFVuY2hlY2sgZGVsZXRlIGJyYW5jaFxuICAgICAgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXG4gICAgICAgIFwiI21lcmdlX3JlcXVlc3RfZm9yY2VfcmVtb3ZlX3NvdXJjZV9icmFuY2hcIlxuICAgICAgKTtcbiAgICAgIGlmIChub2RlKSB7XG4gICAgICAgIG5vZGUuY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICBub2RlLnZhbHVlID0gXCIwXCI7XG4gICAgICB9XG4gICAgfSwgcmVsZWFzZVZlcnNpb24pO1xuXG4gICAgLy8gV2FpdCBmb3IgdGhlIHBhZ2UgdG8gY2xvc2VcbiAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4ge1xuICAgICAgcGFnZS5vbihcImNsb3NlXCIsICgpID0+IHtcbiAgICAgICAgcih2b2lkIDApO1xuICAgICAgICBjb25zb2xlLndhcm4oXCJHaXRsYWIgdGlja2V0IHByb2Nlc3MgZmluaXNoZWRcXG5cXG5cIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBXYWl0IGZvciBib3RoIFBScyB0byBjb21lIHRvIGNvbXBsZXRpb25cbiAgY29uc29sZS53YXJuKFwiXFxuXFxuV2FpdGluZyBmb3IgYnJvd3NlciB3aW5kb3dzIHRvIGJlIGNsb3NlZC4uLlxcblxcblwiKTtcbiAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIG1ha2VQUihcInJlbGVhc2VcIiwgXCJkZXZcIiksXG4gICAgbWFrZVBSKFwicmVsZWFzZVwiLCBtYXN0ZXJCcmFuY2gpLFxuICBdKTtcblxuICAvLyBDbG9zZSBhZnRlciBhbGwgcGFnZXMgY2xvc2VkXG4gIGJyb3dzZXIuY2xvc2UoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gb3BlbkdpdFBSKFxuICByZXBvVXJsOiBzdHJpbmcsXG4gIHJlbGVhc2VWZXJzaW9uOiBzdHJpbmcsXG4gIG1hc3RlckJyYW5jaDogc3RyaW5nLFxuICBzaG93TG9nSW4/OiBib29sZWFuXG4pIHtcbiAgY29uc3QgcHVwcGV0ZWVyID0gYXdhaXQgaW1wb3J0KFwicHVwcGV0ZWVyXCIpO1xuICBjb25zdCBjYWNoZVBhdGggPSBhd2FpdCBnZXRQYWNrYWdlQ2FjaGVQYXRoKFwicHVwcGV0ZWVyXCIsIFwicHItcmVsZWFzZVwiKTtcbiAgbGV0IGJyb3dzZXIgPSBhd2FpdCBwdXBwZXRlZXIubGF1bmNoKHtcbiAgICAvLyBJZiBzaG93TG9nSW4sIHRoZW4gd2UgbXVzdCBwcmVzZW50IHRoZSBicm93c2VyIHNvIHRoZSB1c2VyIGNhbiBlbnRlclxuICAgIC8vIHRoZWlyIGNyZWRlbnRpYWxzLlxuICAgIGhlYWRsZXNzOiAhc2hvd0xvZ0luLFxuICAgIHVzZXJEYXRhRGlyOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBjYWNoZVBhdGgpLFxuICAgIGRlZmF1bHRWaWV3cG9ydDogbnVsbCxcbiAgfSk7XG5cbiAgY29uc3QgcGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFnZSgpO1xuXG4gIGlmIChzaG93TG9nSW4pIHtcbiAgICBjb25zb2xlLndhcm4oXCJVc2VyIGxvZ2luIHJlcXVpcmVkLi4uXCIpO1xuICAgIGxldCBzaG91bGRFeGl0ID0gdHJ1ZTtcblxuICAgIGJyb3dzZXIub24oXCJkaXNjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgICAgaWYgKCFzaG91bGRFeGl0KSByZXR1cm47XG4gICAgICBjb25zb2xlLndhcm4oXCJCcm93c2VyIHdhcyBjbG9zZWQgb3IgY3Jhc2hlZC4gVHJ5IHRoZSBjb21tYW5kIGFnYWluLlwiKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGxvZ2luVXJsID0gXCJodHRwczovL2dpdGh1Yi5jb20vbG9naW5cIjtcbiAgICBjb25zb2xlLndhcm4oXCJPcGVuaW5nIGdpdGh1YiBsb2dpbiBwYWdlOiBcIiwgbG9naW5VcmwpO1xuICAgIGF3YWl0IHBhZ2UuZ290byhsb2dpblVybCk7XG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yRnVuY3Rpb24oXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RJZCA9IGRvY3VtZW50Py5ib2R5XG4gICAgICAgICAgPy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKVxuICAgICAgICAgID8uc3BsaXQoXCIgXCIpXG4gICAgICAgICAgLmZpbmQoKGMpID0+IGMuc3RhcnRzV2l0aChcImxvZ2dlZC1pblwiKSk7XG4gICAgICAgIHJldHVybiBwcm9qZWN0SWQgIT09IG51bGwgJiYgcHJvamVjdElkICE9PSB2b2lkIDA7XG4gICAgICB9LFxuICAgICAgeyB0aW1lb3V0OiAwIH1cbiAgICApO1xuXG4gICAgc2hvdWxkRXhpdCA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybihcIk9wZW5pbmcgcHJvamVjdCB1cmw6IFwiLCByZXBvVXJsKTtcbiAgICBhd2FpdCBwYWdlLmdvdG8ocmVwb1VybCk7XG4gIH1cblxuICAvLyBUaGUgcHJvamVjdCBJRCBpcyBsb2NhdGVkIG9uIHRoZSBib2R5IHdpdGhpbiBhdHRyaWJ1dGVcbiAgLy8gZGF0YS1wcm9qZWN0LWlkPVwiNzIyXCJcbiAgY29uc29sZS53YXJuKFwiQ2hlY2tpbmcgZm9yIGxvZ2dlZC1pbiBhdHRyaWJ1dGUgb24gYm9keS4uLlwiKTtcbiAgY29uc3QgbG9nZ2VkSW4gPSBhd2FpdCBwYWdlLmV2YWx1YXRlKCgpID0+IHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcImxvZ2dlZC1pbiBjaGVjazpcIixcbiAgICAgIGRvY3VtZW50Py5ib2R5XG4gICAgICAgID8uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIilcbiAgICAgICAgPy5zcGxpdChcIiBcIilcbiAgICAgICAgLmZpbmQoKGMpID0+IGMuc3RhcnRzV2l0aChcImxvZ2dlZC1pblwiKSlcbiAgICApO1xuICAgIHJldHVybiBkb2N1bWVudD8uYm9keVxuICAgICAgPy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKVxuICAgICAgPy5zcGxpdChcIiBcIilcbiAgICAgIC5maW5kKChjKSA9PiBjLnN0YXJ0c1dpdGgoXCJsb2dnZWQtaW5cIikpO1xuICB9KTtcblxuICBjb25zb2xlLndhcm4oXCJMb2dnaW4gaW4gY2hlY2s6XCIsIGxvZ2dlZEluKTtcblxuICAvLyBJRiB3ZSBhdHRlbXB0ZWQgYSBsb2dpbiBBTkQgdGhlcmUgaXMgbm8gcHJvamVjdCBJRCBhdmFpbGFibGUsIHRoZW4gd2UgYXJlXG4gIC8vIHVuYWJsZSB0byBkZXRlcm1pbmUgdGhlIHByb2plY3QgSUQuXG4gIGlmICghbG9nZ2VkSW4gJiYgc2hvd0xvZ0luKSB7XG4gICAgYXdhaXQgYnJvd3Nlci5jbG9zZSgpO1xuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9nIGluIHRoZSB1c2VyIGZvciBnaXRodWIuXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIElmIHdlIGNvdWxkIG5vdCBnZXQgYSBwcm9qZWN0IElELCBwcmVzZW50IGEgbm9uLWhlYWRsZXNzIGJyb3dzZXIgdG8gYWxsb3dcbiAgLy8gdGhlIHVzZXIgdG8gbG9naW4uXG4gIGVsc2UgaWYgKCFsb2dnZWRJbikge1xuICAgIGNvbnNvbGUud2FybihcIkxvZ2dlZC1pbiBub3QgZm91bmQgb24gYm9keSwgbG9naW4gbWlnaHQgYmUgbmVlZGVkLi4uXCIpO1xuICAgIGF3YWl0IGJyb3dzZXIuY2xvc2UoKTtcbiAgICBvcGVuR2l0UFIocmVwb1VybCwgcmVsZWFzZVZlcnNpb24sIG1hc3RlckJyYW5jaCwgdHJ1ZSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gTG9nIGluIHZhbGlkYXRlZCwgY2xvc2UgdGhlIGxvZyBpbiBicm93c2VyIGFzIGl0IG1heSBiZSBpbiBoZWFkbGVzcyBtb2RlXG4gIGVsc2Uge1xuICAgIGJyb3dzZXIuY2xvc2UoKTtcbiAgfVxuXG4gIGNvbnN0IHB1cHBldGVlckRhdGEgPSB7XG4gICAgaGVhZGxlc3M6IGZhbHNlLFxuICAgIHVzZXJEYXRhRGlyOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBjYWNoZVBhdGgpLFxuICAgIGRlZmF1bHRWaWV3cG9ydDogbnVsbCxcbiAgfTtcblxuICAvLyBSZW9wZW4gdGhlIGJyb3dzZXIgYnV0IGVuc3VyZSB3ZSdyZSBub3QgaGVhZGxlc3MgYW55bW9yZVxuICBicm93c2VyID0gYXdhaXQgcHVwcGV0ZWVyLmxhdW5jaChwdXBwZXRlZXJEYXRhKTtcblxuICBjb25zdCBtYWtlUFIgPSBhc3luYyAoc291cmNlOiBzdHJpbmcsIHRhcmdldDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFnZSgpO1xuXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0RpbmlkZW4vc2ltcGxlLWRhdGEtcHJvdmlkZXIvY29tcGFyZS9tYXN0ZXIuLi5yZWxlYXNlXG4gICAgLy8gVXNlIHRoZSBwcm9wZXIgVVJMIHN0cnVjdHVyZSB0byBnZW5lcmF0ZSB0aGUgcGFnZSB3aXRoIHRoZSBjb3JyZWN0IG1lcmdlIHJlcXVlc3RcbiAgICBhd2FpdCBwYWdlLmdvdG8oYCR7cmVwb1VybH0vY29tcGFyZS8ke3RhcmdldH0uLi4ke3NvdXJjZX1gKTtcblxuICAgIC8vIFdhaXQgZm9yIHRoZSBlbGVtZW50cyB0byBiZSBhdmFpbGFibGUgdG8gbWFuaXB1bGF0ZVxuICAgIGF3YWl0IHBhZ2Uud2FpdEZvckZ1bmN0aW9uKCgpID0+IHtcbiAgICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxCdXR0b25FbGVtZW50PihcbiAgICAgICAgXCIjcmVwby1jb250ZW50LXBqYXgtY29udGFpbmVyID4gZGl2ID4gZGl2LmpzLWRldGFpbHMtY29udGFpbmVyLkRldGFpbHMuanMtY29tcGFyZS1wciA+IGRpdiA+IGJ1dHRvblwiXG4gICAgICApO1xuICAgICAgbm9kZT8uY2xpY2soKTtcbiAgICAgIHJldHVybiBub2RlICE9PSBudWxsICYmIG5vZGUgIT09IHZvaWQgMDtcbiAgICB9KTtcblxuICAgIC8vIENsaWNrIHRoZSBjcmVhdGUgUFIgYnV0dG9uIHRvIG9wZW4gbmV4dCBkaWFsb2dcbiAgICAvLyBhd2FpdCBwYWdlLmV2YWx1YXRlKGFzeW5jICgpID0+IHtcbiAgICAvLyAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZXBvLWNvbnRlbnQtcGpheC1jb250YWluZXIgPiBkaXYgPiBkaXYuanMtZGV0YWlscy1jb250YWluZXIuRGV0YWlscy5qcy1jb21wYXJlLXByID4gZGl2ID4gYnV0dG9uJykuY2xpY2soKTtcbiAgICAvLyB9KTtcblxuICAgIC8vIFBvcHVsYXRlIHRoZSBlbGVtZW50cyB3aXRoIGV4cGVjdGVkIGNvbmZpZ3VyYXRpb25cbiAgICBhd2FpdCBwYWdlLmV2YWx1YXRlKGFzeW5jIChyZWxlYXNlVmVyc2lvbikgPT4ge1xuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICAgICBcIiNwdWxsX3JlcXVlc3RfdGl0bGVcIlxuICAgICAgKTtcbiAgICAgIGlmIChub2RlKSBub2RlLnZhbHVlID0gYFJlbGVhc2UgJHtyZWxlYXNlVmVyc2lvbn1gO1xuICAgICAgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXG4gICAgICAgICdbbmFtZT1cInB1bGxfcmVxdWVzdFtib2R5XVwiXSdcbiAgICAgICk7XG4gICAgICBpZiAobm9kZSkgbm9kZS52YWx1ZSA9IGBSZWxlYXNlICR7cmVsZWFzZVZlcnNpb259YDtcbiAgICB9LCByZWxlYXNlVmVyc2lvbik7XG5cbiAgICAvLyBXYWl0IGZvciB0aGUgcGFnZSB0byBjbG9zZVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiB7XG4gICAgICBwYWdlLm9uKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICByKHZvaWQgMCk7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkdpdGh1YiB0aWNrZXQgcHJvY2VzcyBmaW5pc2hlZFxcblxcblwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFdhaXQgZm9yIGJvdGggUFJzIHRvIGNvbWUgdG8gY29tcGxldGlvblxuICBjb25zb2xlLndhcm4oXCJcXG5cXG5XYWl0aW5nIGZvciBicm93c2VyIHdpbmRvd3MgdG8gYmUgY2xvc2VkLi4uXFxuXFxuXCIpO1xuICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgbWFrZVBSKFwicmVsZWFzZVwiLCBcImRldlwiKSxcbiAgICBtYWtlUFIoXCJyZWxlYXNlXCIsIG1hc3RlckJyYW5jaCksXG4gIF0pO1xuXG4gIC8vIENsb3NlIGFmdGVyIGFsbCBwYWdlcyBjbG9zZWRcbiAgYnJvd3Nlci5jbG9zZSgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBvcGVuQXp1cmVQUihcbiAgcmVwb1VybDogc3RyaW5nLFxuICByZWxlYXNlVmVyc2lvbjogc3RyaW5nLFxuICBtYXN0ZXJCcmFuY2g6IHN0cmluZyxcbiAgc2hvd0xvZ0luPzogYm9vbGVhblxuKSB7XG4gIGNvbnN0IHB1cHBldGVlciA9IGF3YWl0IGltcG9ydChcInB1cHBldGVlclwiKTtcbiAgLy8gRXhhbXBsZSBVUkxcbiAgLy8gaHR0cHM6Ly9kZXYuYXp1cmUuY29tL3JldGlyZW9uZS9fZ2l0L1JldGlyZU9uZSUyMFJJUFAvcHVsbHJlcXVlc3RjcmVhdGU/c291cmNlUmVwb3NpdG9yeUlkPTQwNTA3NGJiLWIxYjEtNGZlYS04MzUyLWJkNGQ3ODg4YjFhZCZ0YXJnZXRSZXBvc2l0b3J5SWQ9NDA1MDc0YmItYjFiMS00ZmVhLTgzNTItYmQ0ZDc4ODhiMWFkJnNvdXJjZVJlZj1yZWxlYXNlJnRhcmdldFJlZj1tYWluXG4gIGNvbnN0IGNhY2hlUGF0aCA9IGF3YWl0IGdldFBhY2thZ2VDYWNoZVBhdGgoXCJwdXBwZXRlZXJcIiwgXCJwci1yZWxlYXNlXCIpO1xuICBsZXQgYnJvd3NlciA9IGF3YWl0IHB1cHBldGVlci5sYXVuY2goe1xuICAgIC8vIElmIHNob3dMb2dJbiwgdGhlbiB3ZSBtdXN0IHByZXNlbnQgdGhlIGJyb3dzZXIgc28gdGhlIHVzZXIgY2FuIGVudGVyXG4gICAgLy8gdGhlaXIgY3JlZGVudGlhbHMuXG4gICAgaGVhZGxlc3M6ICFzaG93TG9nSW4sXG4gICAgdXNlckRhdGFEaXI6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIGNhY2hlUGF0aCksXG4gICAgZGVmYXVsdFZpZXdwb3J0OiBudWxsLFxuICB9KTtcblxuICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG5cbiAgaWYgKHNob3dMb2dJbikge1xuICAgIGNvbnNvbGUud2FybihcIlVzZXIgbG9naW4gcmVxdWlyZWQuLi5cIik7XG4gICAgbGV0IHNob3VsZEV4aXQgPSB0cnVlO1xuXG4gICAgYnJvd3Nlci5vbihcImRpc2Nvbm5lY3RlZFwiLCAoKSA9PiB7XG4gICAgICBpZiAoIXNob3VsZEV4aXQpIHJldHVybjtcbiAgICAgIGNvbnNvbGUud2FybihcIkJyb3dzZXIgd2FzIGNsb3NlZCBvciBjcmFzaGVkLiBUcnkgdGhlIGNvbW1hbmQgYWdhaW4uXCIpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbG9naW5VcmwgPSByZXBvVXJsO1xuICAgIGNvbnNvbGUud2FybihcIk9wZW5pbmcgYXp1cmUgcmVwbyBsb2dpbiBwYWdlOiBcIiwgbG9naW5VcmwpO1xuICAgIGF3YWl0IHBhZ2UuZ290byhsb2dpblVybCk7XG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yRnVuY3Rpb24oXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1zSWQgPSB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UubXNhbWVpZDtcbiAgICAgICAgcmV0dXJuIG1zSWQgIT09IG51bGwgJiYgbXNJZCAhPT0gdm9pZCAwO1xuICAgICAgfSxcbiAgICAgIHsgdGltZW91dDogMCB9XG4gICAgKTtcblxuICAgIHNob3VsZEV4aXQgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJPcGVuaW5nIHByb2plY3QgdXJsOiBcIiwgcmVwb1VybCk7XG4gICAgYXdhaXQgcGFnZS5nb3RvKHJlcG9VcmwpO1xuICB9XG5cbiAgLy8gVGhlIG1zaWQgaXMgbG9jYXRlZCBpbiBzZXNzaW9uU3RvcmFnZSBhdCB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UubXNhbWVpZFxuICBjb25zb2xlLndhcm4oXCJDaGVja2luZyBmb3IgbG9nZ2VkLWluIGF0dHJpYnV0ZSBvbiBib2R5Li4uXCIpO1xuICBjb25zdCBsb2dnZWRJbiA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xuICAgIGNvbnNvbGUud2FybihcImxvZ2dlZC1pbiBjaGVjazpcIiwgd2luZG93LnNlc3Npb25TdG9yYWdlLm1zYW1laWQpO1xuICAgIHJldHVybiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UubXNhbWVpZDtcbiAgfSk7XG5cbiAgY29uc29sZS53YXJuKFwiTG9nZ2luIGluIGNoZWNrOlwiLCBsb2dnZWRJbik7XG5cbiAgLy8gSUYgd2UgYXR0ZW1wdGVkIGEgbG9naW4gQU5EIHRoZXJlIGlzIG5vIG1zIGlkIGF2YWlsYWJsZSwgdGhlbiB3ZSBhcmVcbiAgLy8gdW5hYmxlIHRvIGRldGVybWluZSB0aGUgbXMgaWQuXG4gIGlmICghbG9nZ2VkSW4gJiYgc2hvd0xvZ0luKSB7XG4gICAgYXdhaXQgYnJvd3Nlci5jbG9zZSgpO1xuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gbG9nIGluIHRoZSB1c2VyIGZvciBhenVyZS5cIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gSWYgd2UgY291bGQgbm90IGdldCBhIG1zaWQsIHByZXNlbnQgYSBub24taGVhZGxlc3MgYnJvd3NlciB0byBhbGxvd1xuICAvLyB0aGUgdXNlciB0byBsb2dpbi5cbiAgZWxzZSBpZiAoIWxvZ2dlZEluKSB7XG4gICAgY29uc29sZS53YXJuKFwiTVMgaWQgbm90IGZvdW5kLCBsb2dpbiBtaWdodCBiZSBuZWVkZWQuLi5cIik7XG4gICAgYXdhaXQgYnJvd3Nlci5jbG9zZSgpO1xuICAgIG9wZW5HaXRQUihyZXBvVXJsLCByZWxlYXNlVmVyc2lvbiwgbWFzdGVyQnJhbmNoLCB0cnVlKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBMb2cgaW4gdmFsaWRhdGVkLCBjbG9zZSB0aGUgbG9nIGluIGJyb3dzZXIgYXMgaXQgbWF5IGJlIGluIGhlYWRsZXNzIG1vZGVcbiAgZWxzZSB7XG4gICAgYnJvd3Nlci5jbG9zZSgpO1xuICB9XG5cbiAgLy8gUmVvcGVuIHRoZSBicm93c2VyIGJ1dCBlbnN1cmUgd2UncmUgbm90IGhlYWRsZXNzIGFueW1vcmVcbiAgY29uc3QgcHVwcGV0ZWVyRGF0YSA9IHtcbiAgICBoZWFkbGVzczogZmFsc2UsXG4gICAgdXNlckRhdGFEaXI6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIGNhY2hlUGF0aCksXG4gICAgZGVmYXVsdFZpZXdwb3J0OiBudWxsLFxuICB9O1xuXG4gIGJyb3dzZXIgPSBhd2FpdCBwdXBwZXRlZXIubGF1bmNoKHB1cHBldGVlckRhdGEpO1xuXG4gIC8vIE1ha2UgYSBjb21tb24gbWV0aG9kIGZvciBsYXVuY2hpbmcgYSBQUlxuICBjb25zdCBtYWtlUFIgPSBhc3luYyAoc291cmNlOiBzdHJpbmcsIHRhcmdldDogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IGJyb3dzZXIubmV3UGFnZSgpO1xuXG4gICAgLy8gVXNlIHRoZSBwcm9wZXIgVVJMIHN0cnVjdHVyZSB0byBnZW5lcmF0ZSB0aGUgcGFnZSB3aXRoIHRoZSBjb3JyZWN0IG1lcmdlIHJlcXVlc3RcbiAgICBhd2FpdCBwYWdlLmdvdG8oYCR7cmVwb1VybH0mc291cmNlUmVmPSR7c291cmNlfSZ0YXJnZXRSZWY9JHt0YXJnZXR9YCk7XG5cbiAgICAvLyBXYWl0IGZvciB0aGUgZWxlbWVudHMgdG8gYmUgYXZhaWxhYmxlIHRvIG1hbmlwdWxhdGVcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JGdW5jdGlvbigoKSA9PiB7XG4gICAgICBjb25zdCBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oXCJidXR0b24ucHJpbWFyeVwiKTtcbiAgICAgIHJldHVybiBub2RlICE9PSBudWxsICYmIG5vZGUgIT09IHZvaWQgMDtcbiAgICB9KTtcblxuICAgIC8vIFBvcHVsYXRlIHRoZSBlbGVtZW50cyB3aXRoIGV4cGVjdGVkIGNvbmZpZ3VyYXRpb25cbiAgICBhd2FpdCBwYWdlLmV2YWx1YXRlKGFzeW5jIChyZWxlYXNlVmVyc2lvbikgPT4ge1xuICAgICAgLy8gR2V0IHRoZSBub2RlIHdpdGggdGFiIGluZGV4IDAgKHRoZSBpZCBvbiB0aGUgcGFnZSBjaGFuZ2VzIGVhY2ggdGltZSlcbiAgICAgIGxldCBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAgICAgJ1thcmlhLWxhYmVsPVwiRW50ZXIgYSB0aXRsZVwiXSdcbiAgICAgICk7XG4gICAgICBpZiAobm9kZSkgbm9kZS52YWx1ZSA9IGBSZWxlYXNlICR7cmVsZWFzZVZlcnNpb259YDtcblxuICAgICAgLy9cbiAgICAgIG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICAgICAnW2FyaWEtbGFiZWw9XCJEZXNjcmlwdGlvblwiXSdcbiAgICAgICk7XG4gICAgICBpZiAobm9kZSkgbm9kZS52YWx1ZSA9IGBSZWxlYXNlICR7cmVsZWFzZVZlcnNpb259YDtcbiAgICB9LCByZWxlYXNlVmVyc2lvbik7XG5cbiAgICAvLyBXYWl0IGZvciB0aGUgcGFnZSB0byBjbG9zZVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiB7XG4gICAgICBwYWdlLm9uKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICByKHZvaWQgMCk7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkF6dXJlIHByb2plY3QgdGlja2V0IHByb2Nlc3MgZmluaXNoZWRcXG5cXG5cIik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBXYWl0IGZvciBib3RoIFBScyB0byBjb21lIHRvIGNvbXBsZXRpb25cbiAgY29uc29sZS53YXJuKFwiXFxuXFxuV2FpdGluZyBmb3IgYnJvd3NlciB3aW5kb3dzIHRvIGJlIGNsb3NlZC4uLlxcblxcblwiKTtcbiAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgIG1ha2VQUihcInJlbGVhc2VcIiwgXCJkZXZcIiksXG4gICAgbWFrZVBSKFwicmVsZWFzZVwiLCBtYXN0ZXJCcmFuY2gpLFxuICBdKTtcblxuICAvLyBDbG9zZSBhZnRlciBhbGwgcGFnZXMgY2xvc2VkXG4gIGJyb3dzZXIuY2xvc2UoKTtcbn1cblxuLyoqXG4gKiBUaGlzIGNvbW1hbmQgaXMgaW50ZW5kZWQgdG8gd29yayB3aXRoIHRoZSBjdXJyZW50IGJyYW5jaCBJRiB0aGUgYnJhbmNoIGhhc1xuICogYmVlbiBjcmVhdGVkIHVzaW5nIHRoZSBcIm5wbSBydW4gdGlja2V0XCIgY29tbWFuZC5cbiAqXG4gKiBUaGlzIHdpbGwgbG9vayBpbnRvIHRoZSBjdXJyZW50IGJyYW5jaCBhbmQgZmluZCB0aGUgY29tbWl0IHRoYXQgY29udGFpbnMgdGhlXG4gKiB0aWNrZXQgYnJhbmNoIG5hbWUgYW5kIHRpY2tldCBVUkwuIFRoaXMgd2lsbCBnZW5lcmF0ZSBhIGNvbW1pdCBhbmQgbWVyZ2VcbiAqIHJlcXVlc3QgdGhhdCBjb250YWlucyB0aGUgdGlja2V0IHRoYXQgaXMgbGlua2VkLlxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oXG4gIHJlcG9Vcmw6IHN0cmluZyxcbiAgcmVwb1R5cGU6IHN0cmluZyxcbiAgbWFzdGVyQnJhbmNoID0gXCJtYXN0ZXJcIixcbiAgLi4uX2FyZ3M6IGFueVtdXG4pIHtcbiAgLy8gVmFsaWRhdGUgd2UgaGF2ZSBpbXBsZW1lbnRlZCBhIHN0cmF0ZWd5IGZvciBhIGdpdmVuIHJlcG8gdHlwZS5cbiAgY29uc3QgdmFsaWRSZXBvcyA9IG5ldyBTZXQoW1wiZ2l0bGFiXCIsIFwiZ2l0XCIsIFwiZ2l0aHViXCIsIFwiYXp1cmVcIl0pO1xuXG4gIGlmICghdmFsaWRSZXBvcy5oYXMocmVwb1R5cGUpKSB7XG4gICAgY29uc29sZS5lcnJvcihgVW5zdXBwb3J0ZWQgcmVwbyB0eXBlOiAke3JlcG9UeXBlfWApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIFdlIGNhbiBvbmx5IGRvIHRoaXMgb3BlcmF0aW9uIGlmIHRoZXJlIGlzIG5vdGhpbmcgdG8gY29tbWl0IG9yIHB1c2hcbiAgLy8gVGhpcyBvbmx5IHdvcmtzIGlmIG5vIGNoYW5nZXMgYXJlIHByZXNlbnRcbiAgaWYgKGF3YWl0IGdpdEhhc0NoYW5nZXMoKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcIllvdSBoYXZlIHVuY29tbWl0dGVkIGNoYW5nZXMgb3IgdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHByb2plY3QgY2FuIG5vdCBiZSBkZXRlcm1pbmVkLiBQbGVhc2UgY29tbWl0IG9yIHN0YXNoIHRoZW0gYmVmb3JlIGNvbnRpbnVpbmcuXCJcbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIGNvbnN0IGNoZWNrQnJhbmNoID0gc2hlbGwuZXhlYyhcImdpdCBzeW1ib2xpYy1yZWYgLS1zaG9ydCBIRUFEXCIsIHsgc2lsZW50OiB0cnVlIH0pO1xuICAvLyBpZiAoY2hlY2tCcmFuY2ggIT09IFwicmVsZWFzZVwiKSB7XG4gIC8vICAgY29uc29sZS5lcnJvcihcIllvdSBtdXN0IGJlIG9uIHRoZSByZWxlYXNlIGJyYW5jaCB0byBjcmVhdGUgYSByZWxlYXNlIFBSXCIpO1xuICAvLyAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgLy8gfVxuXG4gIC8vIEdldCB0aGUgY3VycmVudCBwcm9qZWN0IHZlcnNpb24gZnJvbSB0aGUgcGFja2FnZS5qc29uIGZpbGVcbiAgY29uc3QgcGFja2FnZUpzb24gPSBmcy5yZWFkSnNvblN5bmMocGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpKTtcbiAgY29uc3QgdmVyc2lvbiA9IHBhY2thZ2VKc29uLnZlcnNpb247XG5cbiAgLy8gTm93IHdlIG9wZW4gdGhlIHVybCB0byB0aGUgbmV3IG1lcmdlIHJlcXVlc3RcbiAgc3dpdGNoIChyZXBvVHlwZSkge1xuICAgIGNhc2UgXCJnaXRsYWJcIjpcbiAgICAgIGF3YWl0IG9wZW5HaXRsYWJQUihyZXBvVXJsLCB2ZXJzaW9uLCBtYXN0ZXJCcmFuY2gpO1xuICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwiZ2l0XCI6XG4gICAgY2FzZSBcImdpdGh1YlwiOlxuICAgICAgYXdhaXQgb3BlbkdpdFBSKHJlcG9VcmwsIHZlcnNpb24sIG1hc3RlckJyYW5jaCk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJhenVyZVwiOlxuICAgICAgYXdhaXQgb3BlbkF6dXJlUFIocmVwb1VybCwgdmVyc2lvbiwgbWFzdGVyQnJhbmNoKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIGNvbnNvbGUud2FybihcIk5vIHN1cHBvcnRlZCByZXBvIHR5cGUgZm91bmRcIik7XG4gIH1cbn1cbiIsCiAgICAiIyEvdXNyL2Jpbi9lbnYgYnVuXG5pbXBvcnQgKiBhcyBjb21tYW5kZXIgZnJvbSBcImNvbW1hbmRlclwiO1xuaW1wb3J0IEF1dG9Db21wbGV0ZVByb21wdCBmcm9tIFwiaW5xdWlyZXItYXV0b2NvbXBsZXRlLXByb21wdFwiO1xuaW1wb3J0IGlucXVpcmVyIGZyb20gXCJpbnF1aXJlclwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB5YXJncyBmcm9tIFwieWFyZ3NcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGNvbmZpZ0VudiB9IGZyb20gXCIuL2xpYi91dGlsL2NvbmZpZy1lbnYuanNcIjtcbmltcG9ydCB7IGRlc2NyaXB0aW9uIH0gZnJvbSBcIi4vbGliL3V0aWwvZGVzY3JpcHRpb24uanNcIjtcbmltcG9ydCB7IGVuc3VyZURlcGVuZGVuY2llcyB9IGZyb20gXCIuL2NvbW1hbmRzL2Vuc3VyZS1kZXBlbmRlbmNpZXMuanNcIjtcbmltcG9ydCB7IGV4ZWNJbnN0YWxsIH0gZnJvbSBcIi4vbGliL2V4ZWMvZXhlYy1pbnN0YWxsLmpzXCI7XG5cbmlucXVpcmVyLnJlZ2lzdGVyUHJvbXB0KFwiYXV0b2NvbXBsZXRlXCIsIEF1dG9Db21wbGV0ZVByb21wdCk7XG5cbmNvbnN0IHsgQ29tbWFuZCB9ID0gY29tbWFuZGVyO1xuY29uc3QgcHJvZ3JhbTogYW55ID0gbmV3IENvbW1hbmQoKTtcbmNvbnN0IG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7fTtcblxuZnVuY3Rpb24gZ2V0T3B0aW9ucygpIHtcbiAgb3B0aW9ucy5kZWJ1ZyA9IHByb2dyYW0uZGVidWc7XG4gIG9wdGlvbnMudmVyYm9zZSA9IHByb2dyYW0udmVyYm9zZTtcbiAgb3B0aW9ucy5wYXR0ZXJuID0gcHJvZ3JhbS5wYXR0ZXJuO1xuXG4gIHJldHVybiBvcHRpb25zO1xufVxuXG5wcm9ncmFtLnZlcnNpb24oXCIwLjAuMVwiKTtcbnByb2dyYW0ub3B0aW9uKFxuICBcIi12LCAtLXZlcmJvc2VcIixcbiAgXCJPdXRwdXRzIG1vcmUgZGV0YWlsZWQgaW5mb3JtYXRpb24gZHVyaW5nIGNyYXNoZXMuXCJcbik7XG5wcm9ncmFtLm9wdGlvbihcbiAgXCItLWRlYnVnIFtwYXJhbV1cIixcbiAgZGVzY3JpcHRpb25gXG4gICAgUHJvdmlkZXMgZGVidWdnaW5nIGNvbnRleHR1YWwgaW5mb3JtYXRpb24gdmFyaW91cyBjb21tYW5kcyBtaWdodCB1c2UgdG9cbiAgICBhaWQgaW4gZGV2ZWxvcGluZyBEZXZvcHMuXG4gIGBcbik7XG5cbnByb2dyYW0ub3B0aW9uKFxuICBcIi1wLCAtLXBhdHRlcm4gW3BhcmFtXVwiLFxuICBkZXNjcmlwdGlvbmBcbiAgICBQcm92aWRlcyBhIHBhdHRlcm4gZm9yIGNlcnRhaW4gb3BlcmF0aW9ucyB0byB1dGlsaXplLiBUaGlzIGlzIHByaW1hcmlseVxuICAgIHVzZWQgYnkgdW5pdCB0ZXN0cyB0byBmaWx0ZXIgdGVzdHMgdG8gc3BlY2lmaWVkIHRlc3RzLlxuICBgXG4pO1xuXG5jb25zdCBkZXYgPSBwcm9ncmFtLmNvbW1hbmQoXCJkZXZcIikuZGVzY3JpcHRpb24oXG4gIGRlc2NyaXB0aW9uYFxuICAgIFRoZXNlIGFyZSB0aGUgY29tbWFuZHMgYXNzb2NpYXRlZCB3aXRoIHN0YXJ0aW5nIHVwIGRldmVsb3BlciBlbnZpcm9ubWVudHNcbiAgICBmb3IgdmFyaW91cyBwcm9qZWN0IHR5cGVzIG9yIHBvcnRpb25zIG9mIGEgcHJvamVjdC5cbiAgYFxuKTtcblxuZGV2XG4gIC5jb21tYW5kKFwidml0ZVwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBTdGFydHMgdXAgYSBkZXZlbG9wZXIgZW52aXJvbm1lbnQgdGhhdCBwZXJmb3JtcyBpbmNyZW1lbnRhbCBidWlsZHMgd2hpbGVcbiAgICAgIGRldmVsb3Bpbmcgd2l0aGluIHRoZSBsaWIgYW5kIGFwcCBmb2xkZXJzLiBVc2VzIHZpdGUgYW5kIHZpdGVcbiAgICAgIGNvbmZpZy5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvZGV2L2Rldi12aXRlLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcImRldi12aXRlIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiKTtcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxuZGV2XG4gIC5jb21tYW5kKFwic3Rvcnlib29rXCIpXG4gIC5vcHRpb24oXG4gICAgXCItaSwgLS1pbmNsdWRlIDxpbmNsdWRlLi4uPlwiLFxuICAgIFwiQWRkaXRpb25hbCBzdG9yeWJvb2sgbW9kdWxlcyB0byBsb2FkIGludG8gc3Rvcnlib29rLiBUaGVzZSBhcmUgdGhlIG5hbWVzIG9mIHByb3Blcmx5IGZvcm1hdHRlZCBkZXBlbmRlbmNpZXMgaW5zdGFsbGVkIGludG8gbm9kZV9tb2R1bGVzLlwiXG4gIClcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgU3RhcnRzIGEgc3Rvcnlib29rIGluc3RhbmNlIGZvciBkZXZlbG9waW5nIHRoZSBVSSBjb21wb25lbnRzIG9mIHRoZVxuICAgICAgcHJvamVjdC4gVGhpcyBtYWtlcyB0aGUgXCJ1aS9zdG9yaWVzXCIgZm9sZGVyIGluIHRoZSBwcm9qZWN0IHRoZSBleHBlY3RlZFxuICAgICAgZGV2ZWxvcG1lbnQgcG9pbnQuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKHsgaW5jbHVkZSB9OiB7IGluY2x1ZGU6IHN0cmluZ1tdIH0pID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9zdG9yeWJvb2suanNcIikpXG4gICAgICAuZGVmYXVsdChcIlwiLCBpbmNsdWRlLCBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSksIGdldE9wdGlvbnMoKSlcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJzdG9yeWJvb2sgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5jb25zdCBzdG9yeWJvb2sgPSBwcm9ncmFtLmNvbW1hbmQoXCJzdG9yeWJvb2tcIik7XG5cbnN0b3J5Ym9va1xuICAuY29tbWFuZChcInJ1blwiKVxuICAub3B0aW9uKFxuICAgIFwiLWksIC0taW5jbHVkZSA8aW5jbHVkZS4uLj5cIixcbiAgICBcIkFkZGl0aW9uYWwgc3Rvcnlib29rIG1vZHVsZXMgdG8gbG9hZCBpbnRvIHN0b3J5Ym9vay4gVGhlc2UgYXJlIHRoZSBuYW1lcyBvZiBwcm9wZXJseSBmb3JtYXR0ZWQgZGVwZW5kZW5jaWVzIGluc3RhbGxlZCBpbnRvIG5vZGVfbW9kdWxlcy5cIlxuICApXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFN0YXJ0cyBhIHN0b3J5Ym9vayBpbnN0YW5jZSBmb3IgZGV2ZWxvcGluZyB0aGUgVUkgY29tcG9uZW50cyBvZiB0aGVcbiAgICAgIHByb2plY3QuIFRoaXMgbWFrZXMgdGhlIFwidWkvc3Rvcmllc1wiIGZvbGRlciBpbiB0aGUgcHJvamVjdCB0aGUgZXhwZWN0ZWRcbiAgICAgIGRldmVsb3BtZW50IHBvaW50LlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICh7IGluY2x1ZGUgfTogeyBpbmNsdWRlOiBzdHJpbmdbXSB9KSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvc3Rvcnlib29rLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoXCJcIiwgaW5jbHVkZSwgcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCkpLCBnZXRPcHRpb25zKCkpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFwic3Rvcnlib29rIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiKTtcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxucHJvZ3JhbVxuICAuY29tbWFuZChcInVybCBbdXJpLi4uXVwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBTaW1wbGUgY29tbWFuZCB0byBvcGVuIGEgc3BlY2lmaWVkIFVSTCBpbiB0aGUgYnJvd3Nlci5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAodXJpOiBzdHJpbmcpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy91cmwuanNcIikpLmRlZmF1bHQodXJpKS5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgY29uc29sZS53YXJuKFwidXJsIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiKTtcbiAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH0pO1xuICB9KTtcblxuY29uc3QgcmVsZWFzZSA9IHByb2dyYW0uY29tbWFuZChcInJlbGVhc2VcIikuZGVzY3JpcHRpb24oXG4gIGRlc2NyaXB0aW9uYFxuICAgIFRoZXNlIGNvbW1hbmRzIGFyZSB1c2VkIGZvciBmYWNpbGl0YXRpbmcgZGlzdHJpYnV0aW9uIHJlbGVhc2VzIG9mXG4gICAgYXBwbGljYXRpb25zLiBUaGlzIGluY2x1ZGVzIHRvb2xzIGZvciBidWlsZGluZyB0aCBkaXN0IGZvbGRlciBmcmFnbWVudHMsXG4gICAgdmlld2luZyB0aGUgZXhwZWN0ZWQgcmVsZWFzZSBub3RlcywgYW5kIGFjdHVhbGx5IHBlcmZvcm1pbmcgYSBjb21wbGV0ZVxuICAgIHJlbGVhc2UgY3ljbGUuXG4gIGBcbik7XG5cbnJlbGVhc2VcbiAgLmNvbW1hbmQoXCJkZXBsb3kgW2FkZC1yZW1vdGUuLi5dXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFBlcmZvcm1zIGFjdGlvbnMgbmVjZXNzYXJ5IHRvIHVwZGF0ZSB0aGUgZGlzdHJpYnV0aW9uIG9mIHRoZSBwcm9qZWN0LlxuICAgICAgVGhpcyB3aWxsIGF1dG9tYXRpY2FsbHkgdXBkYXRlIHJlbGVhc2Ugbm90ZXMsIHRhZyB0aGUgcmVsZWFzZSwgYW5kXG4gICAgICBjb21taXQgYW5kIHB1c2ggdG8gYSAncmVsZWFzZScgYnJhbmNoIHdoaWNoIHdpbGwgYmUgcmVhZHkgZm9yIG1lcmdpbmdcbiAgICAgIGludG8gbWFzdGVyIGFuZCBkZXYuXG5cbiAgICAgIFNwZWNpZnkgYWRkaXRpb25hbCByZW1vdGVzIHRvIGRlcGxveSB0byB2aWEgdGhlIGFkZC1yZW1vdGUgb3B0aW9uLlxuICAgICAgVGhpcyB3aWxsIGRlcGxveSB0aGUgcmVsZWFzZSB0byBhZGRpdGlvbmFsIHJlbW90ZXMgKEFGVEVSIGFsbCBvdGhlciBub3JtYWxcbiAgICAgIGRlcGxveSBvcGVyYXRpb25zIGNvbXBsZXRlKS4gVGhpcyB2YWx1ZSBpcyB0aGUgTkFNRSBvZiB0aGUgcmVtb3RlIGFzIGl0XG4gICAgICBhcHBlYXJzIHdoZW4geW91IHBlcmZvcm0gYSBcImdpdCByZW1vdGUgLXZcIiBjb21tYW5kLlxuXG4gICAgICBZb3UgY2FuIHNwZWNpZnkgYSBzcGVjaWZpYyB0YXJnZXQgYnJhbmNoIHZpYSBhIGNvbG9uOiByZW1vdGU6YnJhbmNoXG4gICAgICBPdGhlcndpc2UsIHRoaXMgd2lsbCB1c2UgdGhlIHNhbWUgbWFpbiBicmFuY2ggYXMgY29uZmlndXJlZCBmb3IgdGhpc1xuICAgICAgcHJvamVjdC5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAocmVtb3Rlczogc3RyaW5nW10pID0+IHtcbiAgICAvLyBCZWZvcmUgc3RhcnRpbmcgdGhlIHJlbGVhc2Ugc2NyaXB0IG1ha2Ugc3VyZSBvdXIgcGFja2FnZXMgYXJlIHVwIHRvIGRhdGUgdG8gdGhlIGxhdGVzdFxuICAgIGV4ZWNJbnN0YWxsKFtdKTtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2UtZGVwbG95LmpzXCIpKVxuICAgICAgLmRlZmF1bHQocmVtb3RlcylcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJyZWxlYXNlLWRlcGxveSBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcXG5cIixcbiAgICAgICAgICBlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2VcbiAgICAgICAgKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5yZWxlYXNlXG4gIC5jb21tYW5kKFwidHlwZXNcIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgVXBkYXRlcyBKVVNUIHRoZSB0eXBlcyBpbiB0aGUgZGlzdCBmb2xkZXIuIFRoZXNlIGFyZSB0aGUgc2FtZSB0eXBlc1xuICAgICAgZ2VuZXJhdGVkIHdoZW4gYnVpbGRpbmcgYSByZWxlYXNlLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAvLyBCZWZvcmUgc3RhcnRpbmcgdGhlIHJlbGVhc2Ugc2NyaXB0IG1ha2Ugc3VyZSBvdXIgcGFja2FnZXMgYXJlIHVwIHRvIGRhdGUgdG8gdGhlIGxhdGVzdFxuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3JlbGVhc2UvcmVsZWFzZS10eXBlcy5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KClcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJyZWxlYXNlLXR5cGVzIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVxcblwiLFxuICAgICAgICAgIGVyci5zdGFjayB8fCBlcnIubWVzc2FnZVxuICAgICAgICApO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbnJlbGVhc2VcbiAgLmNvbW1hbmQoXCJ2aWV3XCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFRoaXMgcnVucyB0aGUgcmVsZWFzZS12aWV3IHNjcmlwdC4gRm9yIHRoaXMgY2FzZSwgaXQgd2lsbCBvbmx5IGRpc3BsYXlcbiAgICAgIHRoZSByZWxlYXNlIG5vdGVzIGluIHRoZSBjb25zb2xlLiBBY3R1YWwgZ2VuZXJhdGVkIHJlbGVhc2Ugbm90ZXMgYXJlIGFcbiAgICAgIHBhcnQgb2YgdGhlIHJlbGVhc2UgcHJvY2Vzcy5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvdHMuanNcIikpXG4gICAgICAuZGVmYXVsdChcIlwiKVxuICAgICAgLnRoZW4oYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgY2hhbGsuY3lhbkJyaWdodEJvbGQoXCJUUyBjaGVjayBwYXNzZWQsIGdlbmVyYXRpbmcgbm90ZXMuLi5cIilcbiAgICAgICAgKTtcbiAgICAgICAgLy8gQmVmb3JlIHN0YXJ0aW5nIHRoZSByZWxlYXNlIHNjcmlwdCBtYWtlIHN1cmUgb3VyIHBhY2thZ2VzIGFyZSB1cCB0byBkYXRlIHRvIHRoZSBsYXRlc3RcbiAgICAgICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLXZpZXcuanNcIikpXG4gICAgICAgICAgLmRlZmF1bHQoKVxuICAgICAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICBcInJlbGVhc2Utbm90ZXMgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIsXG4gICAgICAgICAgICAgIGVyci5zdGFjayB8fCBlcnIubWVzc2FnZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGNoYWxrLnJlZEJyaWdodEJvbGQoXG4gICAgICAgICAgICBkZXNjcmlwdGlvbmBcbiAgICAgICAgICAgICAgRmFpbGVkIFRTIGNoZWNrLiBSZWxlYXNlIG5vdGVzIHdpbGwgbm90IGJlIHByb2R1Y2VkIHVudGlsIGFsbCBUU1xuICAgICAgICAgICAgICBlcnJvcnMgYXJlIHJlc29sdmVkLlxuICAgICAgICAgICAgYFxuICAgICAgICAgIClcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxucmVsZWFzZVxuICAuY29tbWFuZChcImJ1aWxkXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFRoaXMgcnVucyB0aGUgcmVsZWFzZS1idWlsZCBzY3JpcHQuIFRoaXMgZ2VuZXJhdGVzIGFsbCBvZiB0aGUgcmVsZWFzZVxuICAgICAgZnJhZ21lbnRzLiBUaGlzIHNob3VsZCBPTkxZIGJlIHVzZWQgZm9yIHRlc3RpbmcgYW5kIGV4cGVyaW1lbnRpbmcuIEFjdHVhbFxuICAgICAgcmVsZWFzZSBmcmFnbWVudHMgc2hvdWxkIGJlIHByb3Blcmx5IGNyZWF0ZWQgYW5kIGRlcGxveWVkIHVzaW5nIHRoZVxuICAgICAgcmVsZWFzZSBkZXBsb3kgY29tbWFuZC5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLWJ1aWxkLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcInJlbGVhc2UtZGVwbG95IHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVxcblwiLFxuICAgICAgICAgIGVyci5zdGFjayB8fCBlcnIubWVzc2FnZVxuICAgICAgICApO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbmNvbnN0IHJlbGVhc2VTdGFydCA9IHJlbGVhc2UuY29tbWFuZChcInN0YXJ0XCIpLmRlc2NyaXB0aW9uKFxuICBkZXNjcmlwdGlvbmBcbiAgICAgIFRoaXMgc3RhcnRzIHVwIHJlbGVhc2VkIHJlbGF0ZWQgcHJvY2Vzc2VzLiBUaGlzIGluY2x1ZGVzIHRoaW5ncyBsaWtlXG4gICAgICBzdGFydGluZyB1cCB0aGUgZGV2IHNlcnZlciB3aXRob3V0IGFueSBhZGRpdGlvbmFsIGJ1aWxkcyBvciBhdXRvXG4gICAgICBjb25maWd1cmF0aW9uIGZvciBkZXZlbG9wbWVudC5cbiAgICBgXG4pO1xuXG5yZWxlYXNlU3RhcnRcbiAgLmNvbW1hbmQoXCJzZXJ2ZXJcIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgU3RhcnRzIHVwIHRoZSBhcHAgc2VydmVyIHdpdGhvdXQgYW55IGFkZGl0aW9uYWwgYnVpbGRzIGV0Yy4gVXNlIHRoZVxuICAgICAgZW52aXJvbm1lbnRzOlxuXG4gICAgICAgIEJVSUxEX01PREU6IFRhcmdldHMgYW4gZW52IHRvIHJ1biB0aGUgc2VydmVyIGZvci5cbiAgICAgICAgUkVTT1VSQ0VfUEFUSDogVGhlIHBhdGggdG8gdGhlIHN0YXRpYyBmaWxlcyB0byBzZXJ2ZS5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLXN0YXJ0LXNlcnZlci5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KClcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJyZWxlYXNlLXN0YXJ0LXNlcnZlciBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcXG5cIixcbiAgICAgICAgICBlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2VcbiAgICAgICAgKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5wcm9ncmFtXG4gIC5jb21tYW5kKFwic3RhcnQgW3RhcmdldF1cIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgVGhpcyBmaXJlcyB1cCBhIHNlcnZlciB0byBtYWtlIGFueSBzdGF0aWMgY29udGVudCBhdmFpbGFibGUgZm9yIGJlaW5nXG4gICAgICBzZXJ2ZWQuXG4gICAgICBUaGVyZSBhcmUgYSBmZXcgb3B0aW9ucyBmb3Igd2hhdCBjb250ZW50IHdpbGwgYmUgc2VydmVkIGJ5IHRoaXMgc2NyaXB0OlxuXG4gICAgICAtIFRoZSB3ZWIgYXBwXG4gICAgICAtIERldm9wcyBBUElcblxuICAgICAgVGhlIHN0YXJ0IHNjcmlwdCB3aWxsIGF1dG9tYXRpY2FsbHkgcGljayB0aGUgd2ViIGFwcCBvdmVyIHRoZSBkZXZvcHNcbiAgICAgIGZpbGVzLCBidXQgeW91IGNhbiBzcGVjaWZ5IGEgdGFyZ2V0IGlmIHlvdSBoYXZlIGEgZGV2b3BzIEFQSSBhbmQgYSB3ZWJcbiAgICAgIGFwcDpcblxuICAgICAgLSBhcHBcbiAgICAgIC0gZGV2b3BzXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKHRhcmdldDogc3RyaW5nKSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvc3RhcnQuanNcIikpXG4gICAgICAuZGVmYXVsdCh0YXJnZXQsIGdldE9wdGlvbnMoKSlcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJzdGFydCBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbmNvbnN0IHRlc3QgPSBwcm9ncmFtLmNvbW1hbmQoXCJ0ZXN0XCIpLmRlc2NyaXB0aW9uKFxuICBkZXNjcmlwdGlvbmBcbiAgICBUaGVzZSBjb21tYW5kcyBhcmUgdXNlZCBmb3IgcnVubmluZyB0ZXN0cy4gVGhpcyBpbmNsdWRlcyB0b29scyBmb3JcbiAgICBydW5uaW5nIHVuaXQgdGVzdHMgYSBzaW5nbGUgdGltZSBvciBpbiBhIHdhdGNoIG1vZGUuXG5cbiAgICBVc2UgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcyBmb3IgbW9kaWZ5aW5nIGJlaGF2aW9yOlxuXG4gICAgJHtjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiUEFUVEVSTlwiKX0gLSBUaGlzIGNhdXNlcyB0aGUgdGVzdHMgdG8gb25seSBydW4gb25cbiAgICBmaWxlcyB0aGF0IG1hdGNoIHRoZSBwYXR0ZXJuXG5cbiAgICAke2NoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJMRVNTXCIpfSAtIFRoaXMgcmVtb3ZlcyB0aGUgdmVyYm9zZSBvdXRwdXQgbGlzdCBvZlxuICAgIGFsbCB0ZXN0cyByYW5cbiAgYFxuKTtcblxudGVzdFxuICAuY29tbWFuZChcInJ1blwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBSdW5zIGFsbCB1bml0IHRlc3RzIGluIHRoZSB1bml0LXRlc3QgZm9sZGVyIG9uY2UuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3Rlc3QvdGVzdC1ydW4uanNcIikpXG4gICAgICAuZGVmYXVsdCgpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFwidGVzdC1ydW4gcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5jb25zdCBjbGVhbiA9IHByb2dyYW0uY29tbWFuZChcImNsZWFuXCIpLmRlc2NyaXB0aW9uKFxuICBkZXNjcmlwdGlvbmBcbiAgICBDb21tb24gY2xlYW5pbmcgdG9vbHMgZm9yIHZhcmlvdXMgZnJhZ21lbnRzIHdpdGhpbiB0aGUgcHJvamVjdC5cbiAgYFxuKTtcblxuY2xlYW5cbiAgLmNvbW1hbmQoXCJjYWNoZVwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBDbGVhbnMgb3V0IGJ1aWxkIGFuZCBjYWNoZSBmaWxlcyB0byBoZWxwIGVuc3VyZSBhIGNvbXBsZXRlIHJlYnVpbGQgdGFrZXNcbiAgICAgIHBsYWNlLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9jbGVhbi9jbGVhbi1jYWNoZS5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KClcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJjbGVhbi1jYWNoZSBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbmNvbnN0IHRzID0gcHJvZ3JhbS5jb21tYW5kKFwidHNcIikuZGVzY3JpcHRpb24oXG4gIGRlc2NyaXB0aW9uYFxuICAgIFRoZXNlIGNvbW1hbmRzIGFyZSB1c2VkIGZvciBydW5uaW5nIHR5cGVzY3JpcHQuIFRoaXMgaW5jbHVkZXMgdG9vbHMgZm9yXG4gICAgcnVubmluZyB0eXBlc2NyaXB0IGNvbXBpbGF0aW9uIGEgc2luZ2xlIHRpbWUgb3IgaW4gYSB3YXRjaCBtb2RlLlxuICBgXG4pO1xuXG50cy5jb21tYW5kKFwicnVuXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFJ1bnMgdHlwZXNjcmlwdCBjb21waWxhdGlvbiB0byBjaGVjayBmb3IgZXJyb3JzLiBEb2VzIE5PVCBlbWl0IGZpbGVzLCB0aHVzXG4gICAgICBpcyBhIGdvb2QgbWVjaGFuaXNtIGZvciBjaGVja2luZyBhIGJ1aWxkIGJlZm9yZSBydW5uaW5nIGEgcmVsZWFzZS5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvdHMuanNcIikpLmRlZmF1bHQoXCJcIikuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUud2FybihcInRzIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiKTtcbiAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH0pO1xuICB9KTtcblxuY29uc3QgcHIgPSBwcm9ncmFtXG4gIC5jb21tYW5kKFwicHJcIilcbiAgLm9wdGlvbihcbiAgICBcIi0tcmVwb1VybCA8dmFsdWU+XCIsXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBUaGUgaHR0cHMgVVJMIHRvIHRoZSByZXBvIHRvIG1ha2UgdGhlIFBSIGludG9cbiAgICBgXG4gIClcbiAgLm9wdGlvbihcbiAgICBcIi0tcmVwb1R5cGUgPHZhbHVlPlwiLFxuICAgIGRlc2NyaXB0aW9uYFxuICAgIFRoZSByZXBvc2l0b3J5IHR5cGUgdG8gbWFrZSB0aGUgUFIgaW50by4gU3VwcG9ydGVkIHR5cGVzIGFyZTogZ2l0LCBnaXRsYWJcbiAgYFxuICApXG4gIC5vcHRpb24oXG4gICAgXCItLW1hc3RlckJyYW5jaCA8dmFsdWU+XCIsXG4gICAgZGVzY3JpcHRpb25gXG4gICAgVGhpcyBpbmRpY2F0ZXMgd2hpY2ggYnJhbmNoIGlzIHRoZSBtYXN0ZXIvbWFpbiBvZiB0aGUgcmVwb3NpdG9yeS5cbiAgYFxuICApO1xuXG5wci5jb21tYW5kKFwicmVsZWFzZVwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBUaGlzIGNyZWF0ZXMgdHdvIFBScyB0aGF0IG1lcmdlcyB0aGUgY3VycmVudCByZW1vdGUgcmVsZWFzZSBicmFuY2ggaW50b1xuICAgICAgdGhlIHJlbW90ZSBkZXYgYW5kIG1hc3RlciBicmFuY2hlcy5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgeyByZXBvVXJsLCByZXBvVHlwZSwgbWFzdGVyQnJhbmNoIH0gPSB5YXJncyhwcm9jZXNzLmFyZ3YpLmFyZ3YgYXMge1xuICAgICAgcmVwb1R5cGU/OiBzdHJpbmc7XG4gICAgICByZXBvVXJsPzogc3RyaW5nO1xuICAgICAgbWFzdGVyQnJhbmNoPzogc3RyaW5nO1xuICAgIH07XG5cbiAgICBpZiAoIXJlcG9VcmwgfHwgIXJlcG9UeXBlIHx8ICFtYXN0ZXJCcmFuY2gpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJZb3UgbXVzdCBzcGVjaWZ5IGJvdGggLS1yZXBvVXJsIGFuZCAtLXJlcG9UeXBlIHRvIHVzZSB0aGlzIGNvbW1hbmRcIlxuICAgICAgKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG5cbiAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhbnkgcmVxdWlyZWQgcGVlciBkZXBlbmRlbmNpZXMgZm9yIHRoaXNcbiAgICBhd2FpdCBlbnN1cmVEZXBlbmRlbmNpZXMoKS5jYXRjaCgoKSA9PiBwcm9jZXNzLmV4aXQoMSkpO1xuICAgIGNvbnNvbGUud2FybihcIkRlcGVuZGVuY3kgY2hlY2tzIHBhc3NlZCwgY29udGludWluZy4uLlwiKTtcblxuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3ByL3ByLXJlbGVhc2UuanNcIikpXG4gICAgICAuZGVmYXVsdChyZXBvVXJsLCByZXBvVHlwZSwgbWFzdGVyQnJhbmNoKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcInByLXJlbGVhc2UgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5hc3luYyBmdW5jdGlvbiBydW4oKSB7XG4gIC8vIExvYWQgaW4gZW52aXJvbm1lbnQgZnJvbSBlbnYgZmlsZSBhbmQgYWxzbyBlbnN1cmUgY29uZmlndXJhdGlvbiBtYXRjaGVzIHRoZVxuICAvLyBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9uIHNwZWNpZmllZCBpbiBlbnYuY29uZmlnLnRzXG4gIGF3YWl0IGNvbmZpZ0Vudihwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpO1xuICBwcm9ncmFtLnBhcnNlKHByb2Nlc3MuYXJndik7XG59XG5cbnJ1bigpO1xuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi9jaGFsay5qc1wiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb24gfSBmcm9tIFwiLi9kZXNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgZG90ZW52IH0gZnJvbSBcIi4vZG90LWVudi5qc1wiO1xuaW1wb3J0IHsgaXNEZWZpbmVkLCBpc1N0cmluZyB9IGZyb20gXCIuL3R5cGVzLmpzXCI7XG5pbXBvcnQgeyBwcm9tcHRDb25maXJtIH0gZnJvbSBcIi4uL3Byb21wdC9wcm9tcHQtY29uZmlybS5qc1wiO1xuaW1wb3J0IHsgcHJvbXB0T3ZlcnJpZGVGaWxlIH0gZnJvbSBcIi4uL3Byb21wdC9wcm9tcHQtb3ZlcnJpZGUtZmlsZS5qc1wiO1xuXG50eXBlIEVudkNvbmZpZ09wdGlvbiA9IHtcbiAgcmVxdWlyZWQ6IGJvb2xlYW47XG4gIHdhcm4/OiBib29sZWFuO1xuICBuYW1lOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGRlZmF1bHQ/OiBzdHJpbmcgfCAoKCkgPT4gUHJvbWlzZTxzdHJpbmc+KTtcbn07XG5cbi8qKlxuICogTWV0aG9kIHVzZWQgdG8gcmV0cmlldmUgdGhlIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb24gZmlsZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbmZpZ0VudigpIHtcbiAgY29uc3QgZW52Q29uZmlnOiBFbnZDb25maWdPcHRpb25bXSA9IChcbiAgICBhd2FpdCBpbXBvcnQocGF0aC5yZXNvbHZlKFwiZW52LmNvbmZpZy50c1wiKSlcbiAgKS5kZWZhdWx0O1xuICBpZiAoIWVudkNvbmZpZykgdGhyb3cgbmV3IEVycm9yKFwiTm8gZW52LmNvbmZpZy50cyBmaWxlIGZvdW5kLlwiKTtcblxuICBpZiAoIUFycmF5LmlzQXJyYXkoZW52Q29uZmlnKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcImVudi5jb25maWcudHMgaXMgbm90IGZvcm1hdHRlZCBjb3JyZWN0bHkuIFBsZWFzZSBmb2xsb3cgdGhlIGNvcnJlY3QgdHlwZSBjb252ZW50aW9uLlwiXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBlbnZDb25maWc7XG59XG5cbi8qKlxuICogVGhpcyBlbnN1cmVzIHRoZSBlbnZpcm9ubWVudCBoYXMgYWxsIG9mIHRoZSBuZWNlc3NhcnkgY29uZmlndXJhdGlvbiB2YXJpYWJsZXNcbiAqIHRvIG1ha2UgdGhlIHN5c3RlbSB3b3JrLiBUaGlzIGFsc28gZXhlY3V0ZXMgdGhlIGRvdGVudiBsaWJyYXJ5IHRvIGVuYWJsZSBlbnZcbiAqIGNvbmZpZ3VyYXRpb24gdmlhIGVudiBmaWxlLlxuICpcbiAqIElmIHRoZSBlbnZpcm9ubWVudCBkb2VzIG5vdCBtZWV0IHRoZSBwcm9jb25maWd1cmVkIGVudmlyb25tZW50IG5lZWRzLCB0aGVuXG4gKiB0aGlzIHNjcmlwdCB3aWxsIGVycm9yIGFuZCBsb2cgd2hhdCBpcyBtaXNzaW5nIGFuZCBkZXRhaWxzIGFib3V0IHRoZVxuICogZW52aXJvbm1lbnQgdmFyaWFibGVzIHRoYXQgYXJlIG1pc3NpbmcuXG4gKlxuICogSWYgcmVxdWVzdERlZmF1bHQgaXMgdHJ1ZSwgdGhpcyB3aWxsIHByb21wdCB0aGUgdXNlciBpZiB0aGV5IHdvdWxkIGxpa2UgdG9cbiAqIGdlbmVyYXRlIGEgLmVudiBmaWxlIHdpdGggYWxsIG9mIHRoZSBlbnZpcm9ubWVudCdzIHNldCB0aGF0IGhhdmUgYSBkZWZhdWx0XG4gKiB2YWx1ZS4gSWYgdGhlIHVzZXIgY2hvb3NlcyB0byBjcmVhdGUgdGhlIGVudiBmaWxlLCB0aGUgZGVmYXVsdHMgd2lsbCBnZXRcbiAqIGFwcGxpZWQgdG8gdGhlIGVudiBhcyB3ZWxsIGFuZCBub3QgZXJyb3IuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25maWdFbnYocmVxdWVzdERlZmF1bHQ/OiBib29sZWFuKSB7XG4gIC8vIFRlbGwgZG90ZW52IHRvIGxvYWQgdGhlIC5lbnYgZmlsZVxuICBkb3RlbnYoKTtcblxuICAvLyBXZSBsb2FkIGluIHRoZSBlbnYuY29uZmlnLnRzIGZpbGUgZnJvbSB0aGUgcHJvamVjdCByb290IHRvIGFuYWx5emUgaXQgZm9yXG4gIC8vIGNvbXBsaWFuY2Ugd2l0aCB0aGUgZW52aXJvbm1lbnQuXG4gIHRyeSB7XG4gICAgY29uc3QgZW52Q29uZmlnOiBFbnZDb25maWdPcHRpb25bXSA9IGF3YWl0IGdldENvbmZpZ0VudigpO1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB3YXJuaW5nczogc3RyaW5nW10gPSBbXTtcblxuICAgIGVudkNvbmZpZy5mb3JFYWNoKChlbnY6IEVudkNvbmZpZ09wdGlvbikgPT4ge1xuICAgICAgLy8gU2tpcCBmYWxzZXkgdmFsdWVzXG4gICAgICBpZiAoIWVudikgcmV0dXJuO1xuXG4gICAgICBpZiAoZW52LnJlcXVpcmVkKSB7XG4gICAgICAgIGlmICghcHJvY2Vzcy5lbnZbZW52Lm5hbWVdKSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goZGVzY3JpcHRpb25gXG4gICAgICAgICAgICAgIE1pc3Npbmc6ICR7ZW52Lm5hbWV9XFxuRGVzcmlwdGlvbjogJHtlbnYuZGVzY3JpcHRpb259XG4gICAgICAgICAgICBgKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFwcm9jZXNzLmVudltlbnYubmFtZV0gJiYgZW52Lndhcm4gIT09IGZhbHNlKSB7XG4gICAgICAgICAgd2FybmluZ3MucHVzaChkZXNjcmlwdGlvbmBcbiAgICAgICAgICAgICAgTWlzc2luZzogJHtlbnYubmFtZX1cXG5EZXNyaXB0aW9uOiAke2Vudi5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgIGApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAod2FybmluZ3MubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFxuICAgICAgICAgIFwiVGhlIGZvbGxvd2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZXMgYXJlIHJlY29tbWVuZGVkIGJ1dCBtaXNzaW5nIGZyb20geW91ciBlbnZpcm9ubWVudDpcXG5cIlxuICAgICAgICApXG4gICAgICApO1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBjaGFsay55ZWxsb3dCcmlnaHQoZGVzY3JpcHRpb25gXG4gICAgICAgICAgJHt3YXJuaW5ncy5qb2luKFwiXFxuXCIpfVxuICAgICAgICBgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGNoYWxrLnJlZEJyaWdodEJvbGQoXG4gICAgICAgICAgXCJUaGUgZm9sbG93aW5nIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgcmVxdWlyZWQgYnV0IG1pc3NpbmcgZnJvbSB5b3VyIGVudmlyb25tZW50OlxcblwiXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBjaGFsay5yZWRCcmlnaHQoZGVzY3JpcHRpb25gXG4gICAgICAgICAgJHtlcnJvcnMuam9pbihcIlxcblwiKX1cbiAgICAgICAgYClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gUXVpdCB0aGUgcHJvY2VzcyBpZiByZXF1aXJlbWVudHMgYXJlIG5vdCBtZXRcbiAgICBpZiAoZXJyb3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChyZXF1ZXN0RGVmYXVsdCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm9tcHRDb25maXJtKGRlc2NyaXB0aW9uYFxuICAgICAgICAgIFRoZXJlIHNlZW1zIHRvIGJlIHNvbWUgbWlzc2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZXMuIFdvdWxkIHlvdSBsaWtlXG4gICAgICAgICAgdG8gZ2VuZXJhdGUgYSAuZW52IGZpbGUgd2l0aCB0aGUgZGVmYXVsdCB2YWx1ZXMgc3BlY2lmaWVkIGluIHRoZVxuICAgICAgICAgIGVudi5jb25maWcgZmlsZT9cbiAgICAgICAgYCk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgIGNvbnN0IGRlZmF1bHRzOiBbc3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWRdW10gPSBbXTtcblxuICAgICAgICAgIGZvciAoY29uc3QgZW52IG9mIGVudkNvbmZpZykge1xuICAgICAgICAgICAgZGVmYXVsdHMucHVzaChbXG4gICAgICAgICAgICAgIGVudi5uYW1lLFxuICAgICAgICAgICAgICBpc1N0cmluZyhlbnYuZGVmYXVsdClcbiAgICAgICAgICAgICAgICA/IGVudi5kZWZhdWx0XG4gICAgICAgICAgICAgICAgOiBpc0RlZmluZWQoZW52LmRlZmF1bHQpXG4gICAgICAgICAgICAgICAgPyBhd2FpdCBlbnYuZGVmYXVsdCgpXG4gICAgICAgICAgICAgICAgOiB2b2lkIDAsXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBkZWZhdWx0RW52ID0gZGVmYXVsdHNcbiAgICAgICAgICAgIC5maWx0ZXIoKGQpID0+IGRbMV0pXG4gICAgICAgICAgICAubWFwKChkKSA9PiBgJHtkWzBdfT0ke2RbMV19YClcbiAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpO1xuXG4gICAgICAgICAgaWYgKCFkZWZhdWx0RW52KSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oZGVzY3JpcHRpb25gXG4gICAgICAgICAgICAgIFRoZXJlIGFyZSBubyBkZWZhdWx0cyBhdmFpbGFibGUgZm9yIHRoaXMgZW52LmNvbmZpZy4gU28gd2UgY2FuIG5vdFxuICAgICAgICAgICAgICBnZW5lcmF0ZSBhbiBlbnYgZmlsZSB5b3UuIFBsZWFzZSByZXZpZXcgdGhlIGVudi5jb25maWcudHMgZmlsZSBhbmRcbiAgICAgICAgICAgICAgcHJvcGVybHkgc2V0IHRoZSBkZWZhdWx0IHZhbHVlcyBmb3IgdGhlIHJlcXVpcmVkIGVudmlyb25tZW50XG4gICAgICAgICAgICAgIHZhcmlhYmxlcy5cbiAgICAgICAgICAgIGApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGVudkZpbGVQYXRoID0gcGF0aC5yZXNvbHZlKFwiLmVudlwiKTtcblxuICAgICAgICAgIGNvbnN0IGRpZFdyaXRlID0gYXdhaXQgcHJvbXB0T3ZlcnJpZGVGaWxlKFxuICAgICAgICAgICAgZW52RmlsZVBhdGgsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbmBcbiAgICAgICAgICAgICAgVGhlcmUgYXBwZWFycyB0byBhbHJlYWR5IGJlIGEgLmVudiBmaWxlLlxuICAgICAgICAgICAgICBXb3VsZCB5b3UgbGlrZSB0byBhZGQgdGhlIG1pc3NpbmcgZGVmYXVsdHMgdG8gaXQ/XG4gICAgICAgICAgICBgLFxuICAgICAgICAgICAgKCkgPT4ge30sXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgbmV3IGVudiBmaWxlXG4gICAgICAgICAgICAoKSA9PiBmcy53cml0ZUZpbGUoZW52RmlsZVBhdGgsIGRlZmF1bHRFbnYpLFxuXG4gICAgICAgICAgICAvLyBXZSB3aWxsIGFkZCB0aGUgZW52IHBhcmFtcyB0byB0aGUgZXhpc3RpbmcgZW52IGZpbGUgaW5zdGVhZCBvZlxuICAgICAgICAgICAgLy8gb3ZlcnJpZGUgaXRcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgZnMuYXBwZW5kRmlsZVN5bmMoZW52RmlsZVBhdGgsIGBcXG4ke2RlZmF1bHRFbnZ9YCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZmFsc2VcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgaWYgKCFkaWRXcml0ZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICAgICAgXCJEaWQgbm90IHdyaXRlIHRoZSAuZW52IGZpbGUuIFBsZWFzZSBjb3JyZWN0IHRoZSBlbnYgYW5kIHRyeSBhZ2Fpbi5cIlxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDb25zdW1lIHRoZSAuZW52IGZpbGUgYWdhaW4gYW5kIHNlZSB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGVcbiAgICAgICAgICAvLyBlbnZpcm9ubWVudFxuICAgICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAgIFwiQXR0ZW1wdGluZyB0byBidWlsZCB0aGUgZW52IGFnYWluIGFuZCBjb250aW51ZSB3aXRoIHRoZSBjb21tYW5kLi4uXCJcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgcmV0dXJuIGNvbmZpZ0VudihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihkZXNjcmlwdGlvbmBcbiAgICAgIE5vICR7Y2hhbGsuY3lhbkJyaWdodEJvbGQoXG4gICAgICAgIFwiZW52LmNvbmZpZy50c1wiXG4gICAgICApfSBmaWxlIGZvdW5kLiBFbnZpcm9ubWVudCB3aWxsIG5vdCBiZSB2YWxpZGF0ZWQuXG4gICAgYCk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4vY2hhbGsuanNcIjtcbmltcG9ydCB7IHBhcnNlUHJvcHMgfSBmcm9tIFwiLi9wYXJzZS1wcm9wcy5qc1wiO1xuXG4vKipcbiAqIEN1c3RvbSBkb3RlbnYgcm91dGluZSB0byByZWR1Y2UgZGVwZW5kZW5jaWVzLlxuICpcbiAqIFRoaXMgdGFrZXMgaW4gdGhlIHByb2plY3QncyAuZW52IGZpbGUgYW5kIGFwcGxpZXMgdGhlIHZhbHVlcyB0aGVyZWluIHRvIHRoZVxuICogcHJvY2Vzcy5lbnYgb2JqZWN0LlxuICpcbiAqIFRoaXMgT05MWSBzdXBwb3J0cyBzaW1wbGUga2V5L3ZhbHVlIHBhaXJzIGFuZCBkb2VzIE5PVCBzdXBwb3J0IGFueSBjb21wbGV4XG4gKiBwcm9wcyBmaWxlIHN0cnVjdHVyZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3RlbnYodGFyZ2V0RmlsZT86IHN0cmluZykge1xuICB0cnkge1xuICAgIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCIuZW52XCIpKSkgcmV0dXJuO1xuICAgIC8vIFJlYWQgdGhlIC5lbnYgZmlsZVxuICAgIGNvbnN0IGNvbnRlbnRzID0gZnMucmVhZEZpbGVTeW5jKFxuICAgICAgcGF0aC5yZXNvbHZlKHRhcmdldEZpbGUgfHwgXCIuZW52XCIpLFxuICAgICAgXCJ1dGY4XCJcbiAgICApO1xuICAgIC8vIFBhcnNlIHRoZSBmaWxlXG4gICAgY29uc3QgcHJvcHMgPSBwYXJzZVByb3BzKGNvbnRlbnRzKTtcblxuICAgIC8vIEFwcGx5IG9ubHkgc2ltcGxlIGtleSB2YWx1ZSBwYWlycyB0byBwcm9jZXNzLmVudlxuICAgIE9iamVjdC5lbnRyaWVzKHByb3BzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnZba2V5XSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnZba2V5XSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnZba2V5XSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgY2hhbGsucmVkKFxuICAgICAgICAgIGBFcnJvciByZWFkaW5nIC5lbnYgZmlsZTpcXG5gLFxuICAgICAgICAgIGNoYWxrLnllbGxvdyhlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG4iLAogICAgInR5cGUgVmFsdWUgPSBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuO1xudHlwZSBQYXJzZVJlc3VsdCA9IFJlY29yZDxzdHJpbmcsIFZhbHVlIHwgUmVjb3JkPHN0cmluZywgVmFsdWU+PjtcblxuLyoqXG4gKiBUaGlzIHBhcnNlcyBhIHByb3BzIGZpbGUgaW50byBhIG1hcCBvZiBrZXkvdmFsdWUgcGFpcnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVByb3BzKGNvbnRlbnRzOiBzdHJpbmcpOiBQYXJzZVJlc3VsdCB7XG4gIGNvbnN0IGxpbmVzID0gY29udGVudHMuc3BsaXQoL1xccj9cXG4vKTtcblxuICBjb25zdCByZXN1bHQ6IFBhcnNlUmVzdWx0ID0ge307XG4gIGxldCBjdXJyZW50U2VjdGlvbjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIGxldCBjdXJyZW50T2JqZWN0OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICBsaW5lcy5mb3JFYWNoKChsaW5lKSA9PiB7XG4gICAgbGluZSA9IGxpbmUudHJpbSgpO1xuXG4gICAgLy8gSWdub3JlIGVtcHR5IGxpbmVzIGFuZCBjb21tZW50c1xuICAgIGlmIChsaW5lID09PSBcIlwiIHx8IGxpbmUuc3RhcnRzV2l0aChcIiNcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgYSBuZXcgc2VjdGlvblxuICAgIGlmIChsaW5lLmVuZHNXaXRoKFwie1wiKSkge1xuICAgICAgY29uc3Qgc2VjdGlvbk5hbWUgPSBsaW5lLnNwbGl0KC9cXHMrLylbMF07XG4gICAgICBjdXJyZW50U2VjdGlvbiA9IHNlY3Rpb25OYW1lO1xuICAgICAgcmVzdWx0W2N1cnJlbnRTZWN0aW9uXSA9IHt9O1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciB0aGUgZW5kIG9mIGEgc2VjdGlvblxuICAgIGlmIChsaW5lID09PSBcIn1cIikge1xuICAgICAgY3VycmVudFNlY3Rpb24gPSBudWxsO1xuICAgICAgY3VycmVudE9iamVjdCA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUGFyc2Uga2V5LXZhbHVlIHBhaXJzXG4gICAgY29uc3QgbWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFtcXHcuXSspXFxzKj1cXHMqKC4qKSQvKTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIGNvbnN0IGtleSA9IG1hdGNoWzFdO1xuICAgICAgbGV0IHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuID0gbWF0Y2hbMl07XG5cbiAgICAgIC8vIENvbnZlcnQgdmFsdWVzIHRvIHRoZSBhcHByb3ByaWF0ZSB0eXBlXG4gICAgICBpZiAoIWlzTmFOKHBhcnNlRmxvYXQodmFsdWUpKSkge1xuICAgICAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgdmFsdWUgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gXCJmYWxzZVwiKSB7XG4gICAgICAgIHZhbHVlID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCB0aGUga2V5LXZhbHVlIHBhaXIgdG8gdGhlIHJlc3VsdFxuICAgICAgaWYgKGN1cnJlbnRPYmplY3QpIHtcbiAgICAgICAgKFxuICAgICAgICAgIHJlc3VsdFtjdXJyZW50U2VjdGlvbiA/PyBcIm51bGxcIl0gYXMgdW5rbm93biBhcyBSZWNvcmQ8XG4gICAgICAgICAgICBzdHJpbmcsXG4gICAgICAgICAgICBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT5cbiAgICAgICAgICA+XG4gICAgICAgIClbY3VycmVudE9iamVjdF1ba2V5XSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIGlmIChjdXJyZW50U2VjdGlvbikge1xuICAgICAgICAocmVzdWx0W2N1cnJlbnRTZWN0aW9uXSBhcyBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4pW2tleV0gPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBmb3IgYSBuZXcgb2JqZWN0IGluIGEgc2VjdGlvblxuICAgIGNvbnN0IG9iamVjdE1hdGNoID0gbGluZS5tYXRjaCgvXihbXFx3Ll0rKVxcLihbXFx3Ll0rKVxccyo9XFxzKiguKikkLyk7XG4gICAgaWYgKG9iamVjdE1hdGNoKSB7XG4gICAgICBjb25zdCBzZWN0aW9uTmFtZSA9IG9iamVjdE1hdGNoWzFdO1xuICAgICAgY29uc3Qgb2JqZWN0TmFtZSA9IG9iamVjdE1hdGNoWzJdO1xuICAgICAgY29uc3Qga2V5ID0gb2JqZWN0TWF0Y2hbM107XG5cbiAgICAgIGlmICghcmVzdWx0W3NlY3Rpb25OYW1lXSkge1xuICAgICAgICByZXN1bHRbc2VjdGlvbk5hbWVdID0ge307XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgIShcbiAgICAgICAgICByZXN1bHRbc2VjdGlvbk5hbWVdIGFzIHVua25vd24gYXMgUmVjb3JkPFxuICAgICAgICAgICAgc3RyaW5nLFxuICAgICAgICAgICAgUmVjb3JkPHN0cmluZywgVmFsdWU+XG4gICAgICAgICAgPlxuICAgICAgICApW29iamVjdE5hbWVdXG4gICAgICApIHtcbiAgICAgICAgKFxuICAgICAgICAgIHJlc3VsdFtzZWN0aW9uTmFtZV0gYXMgdW5rbm93biBhcyBSZWNvcmQ8XG4gICAgICAgICAgICBzdHJpbmcsXG4gICAgICAgICAgICBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT5cbiAgICAgICAgICA+XG4gICAgICAgIClbb2JqZWN0TmFtZV0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgKChyZXN1bHRbc2VjdGlvbk5hbWVdIGFzIGFueSlbb2JqZWN0TmFtZV0gYXMgYW55KVtrZXldID0gbnVsbDtcbiAgICAgIGN1cnJlbnRTZWN0aW9uID0gc2VjdGlvbk5hbWU7XG4gICAgICBjdXJyZW50T2JqZWN0ID0gb2JqZWN0TmFtZTtcblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnNvbGUuZXJyb3IoYFVucmVjb2duaXplZCBsaW5lOiAke2xpbmV9YCk7XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBpbnF1aXJlciBmcm9tIFwiaW5xdWlyZXJcIjtcbmltcG9ydCB7IHN0cmlwSW5kZW50IH0gZnJvbSBcImNvbW1vbi10YWdzXCI7XG5cbi8qKlxuICogQ29udmVuaWVuY2Ugd3JhcHBlciBhcm91bmQgY3VycmVudCBwcm9tcHQgbGlicmFyeSBvZiBjaG9pY2UgdG8gcHJlc2VudCBhXG4gKiBjb25maXJtYXRpb24gZGlhbG9nIGZvciB3aGVuIGEgZmlsZSBwYXRoIGV4aXN0cy4gSWYgdGhlIGZpbGUgZG9lcyBub3QgZXhpc3QsXG4gKiB0aGVyZSB3aWxsIGJlIG5vIHByb21wdC5cbiAqXG4gKiBBcHBsaWVzIHN0cmlwSW5kZW50IHRvIHRoZSBpbnB1dCBtZXNzYWdlLlxuICpcbiAqIFJldHVybnMgdGhlIHRydWUgZmFsc2UgdmFsdWUgb2YgdGhlIHByb21wdC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb21wdE92ZXJyaWRlRmlsZShcbiAgZmlsZVBhdGg6IHN0cmluZyxcbiAgbWVzc2FnZTogc3RyaW5nLFxuICBvbldyaXRlOiAocGF0aDogc3RyaW5nKSA9PiB2b2lkLFxuICBvbk5ldz86IChwYXRoOiBzdHJpbmcpID0+IHZvaWQsXG4gIG9uT3ZlcnJpZGU/OiAocGF0aDogc3RyaW5nKSA9PiB2b2lkLFxuICBkZWZhdWx0VmFsdWU/OiBib29sZWFuXG4pOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgbGV0IG91dCA9IGRlZmF1bHRWYWx1ZSB8fCBmYWxzZTtcblxuICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gYXdhaXQgaW5xdWlyZXIucHJvbXB0PHtcbiAgICAgIHJlc3VsdDogYm9vbGVhbjtcbiAgICB9PihbXG4gICAgICB7XG4gICAgICAgIHR5cGU6IFwiY29uZmlybVwiLFxuICAgICAgICBuYW1lOiBcInJlc3VsdFwiLFxuICAgICAgICBtZXNzYWdlOiBzdHJpcEluZGVudGAke21lc3NhZ2V9YCxcbiAgICAgICAgZGVmYXVsdDogZGVmYXVsdFZhbHVlLFxuICAgICAgfSxcbiAgICBdKTtcblxuICAgIC8vIFdoZW4geWVzL3RydWUgaXMgc2VsZWN0ZWQsIHJ1biB0aGUgb25Db25maXJtZWQgY2FsbGJhY2tcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBvbldyaXRlKGZpbGVQYXRoKTtcbiAgICAgIG9uT3ZlcnJpZGU/LihmaWxlUGF0aCk7XG4gICAgfVxuXG4gICAgb3V0ID0gcmVzdWx0O1xuICB9IGVsc2Uge1xuICAgIG9uV3JpdGUoZmlsZVBhdGgpO1xuICAgIG9uTmV3Py4oZmlsZVBhdGgpO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IGlucXVpcmVyIGZyb20gXCJpbnF1aXJlclwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGV4ZWNJbnN0YWxsIH0gZnJvbSBcIi4uL2xpYi9leGVjL2V4ZWMtaW5zdGFsbC5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vbGliL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5pbXBvcnQgeyBmdXp6eVNvdXJjZSB9IGZyb20gXCIuLi9saWIvdXRpbC9mdXp6eS1zb3VyY2UuanNcIjtcbmltcG9ydCB7IGdldFBhY2thZ2VNYW5hZ2VyIH0gZnJvbSBcIi4uL2xpYi9leGVjL2dldC1wYWNrYWdlLW1hbmFnZXIuanNcIjtcbmltcG9ydCB7IGlzUGFja2FnZUF2YWlsYWJsZSB9IGZyb20gXCIuLi9saWIvdXRpbC9pcy1wYWNrYWdlLWF2YWlsYWJsZS5qc1wiO1xuaW1wb3J0IHsgd2FpdCB9IGZyb20gXCIuLi9saWIvdXRpbC93YWl0LmpzXCI7XG5cbmV4cG9ydCBlbnVtIERlcGVuZGVuY3lSZXNvbHV0aW9uIHtcbiAgSW5zdGFsbCA9IFwiSW5zdGFsbCB0byBjdXJyZW50IHByb2plY3RcIixcbiAgSW5zdGFsbE9uY2UgPSBcIkluc3RhbGwgb25jZSB0byBjdXJyZW50IHByb2plY3RcIixcbiAgSW5zdGFsbEFib3ZlID0gXCJJbnN0YWxsIGluIHBhcmVudCBkaXJlY3RvcnkgKE1ha2VzIHBhY2thZ2UgYXZhaWxhYmxlIHRvIGFsbCBwZWVyIHByb2plY3RzKVwiLFxuICBEb05vdGhpbmcgPSBcIkRvIE5vdGhpbmcgKHRoaXMgd2lsbCBlbmQgdGhpcyBjdXJyZW50IHByb2Nlc3MgYXMgdGhlIHBhY2thZ2UgaXMgcmVxdWlyZWQpXCIsXG59XG5cbi8qKlxuICogVGhpcyBjaGVja3MgdGhlIHRhcmdldCBwcm9qZWN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgZGVwZW5kZW5jaWVzIHRoYXQgYXJlXG4gKiByZXF1aXJlZCBidXQgYXJlIGRldHJpbWVudGFsIHRvIGV4cGVyaWVuY2UgYW5kIHBlcmZvcm1hbmNlIHRvIGluY2x1ZGUgYXMgYVxuICogZGVwZW5kZW5jeSBvZiB0aGUgcGFja2FnZSBkaXJlY3RseS5cbiAqXG4gKiBBbiBleGFtcGxlIG9mIHN1Y2ggZGVwZW5kZW5jeSB3b3VsZCBiZSBwdXBwZXRlZXIgYXMgaGF2aW5nIGl0IGNhbiB0cmlnZ2VyXG4gKiBmdWxsIGluc3RhbGxzIGFuZCBjb21waWxhdGlvbiBvZiB0aGUgZGVwZW5kZW5jeSBwZXIgcHJvamVjdCB0aGF0IG5lZWRzIGl0LlxuICpcbiAqIFNvLCB0aGlzIHdpbGwgcmVxdWVzdCB0aGUgZGVwZW5kZW5jeSB0byBiZSBpbnN0YWxsZWQgYXMgYSBvbmUgdGltZSB0byB0aGVcbiAqIGN1cnJlbnQgcHJvamVjdCBvciByZXF1ZXN0IHRvIGJlIGluc3RhbGxlZCBhYm92ZSB0aGUgdGFyZ2V0IHByb2plY3QgdG8gY2F1c2VcbiAqIGl0IHRvIGJlIGF2YWlsYWJsZSB0byBwZWVyIHByb2plY3RzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5zdXJlRGVwZW5kZW5jaWVzKFxuICBkZXBlbmRlbmNpZXM/OiBzdHJpbmdbXSxcbiAgZm9yY2VSZXNvbHV0aW9uPzogRGVwZW5kZW5jeVJlc29sdXRpb25cbikge1xuICBjb25zdCByZXF1aXJlZERlcGVuZGVuY2llcyA9IGRlcGVuZGVuY2llcyB8fCBbXCJwdXBwZXRlZXJcIl07XG5cbiAgZm9yIChjb25zdCBkZXBlbmRlbmN5IG9mIHJlcXVpcmVkRGVwZW5kZW5jaWVzKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ2hlY2tpbmcgb24gZGVwZW5kZW5jeSBhdmFpbGFiaWxpdHk6XCIsIGRlcGVuZGVuY3kpO1xuICAgIGNvbnN0IGlzQXZhaWxhYmxlID0gYXdhaXQgaXNQYWNrYWdlQXZhaWxhYmxlKGRlcGVuZGVuY3kpO1xuXG4gICAgaWYgKCFpc0F2YWlsYWJsZSkge1xuICAgICAgbGV0IHJlc29sdXRpb24gPSBmb3JjZVJlc29sdXRpb247XG5cbiAgICAgIGlmICghcmVzb2x1dGlvbikge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpbnF1aXJlci5wcm9tcHQ8e1xuICAgICAgICAgIHJlc29sdXRpb246IERlcGVuZGVuY3lSZXNvbHV0aW9uO1xuICAgICAgICB9PihbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdHlwZTogXCJhdXRvY29tcGxldGVcIixcbiAgICAgICAgICAgIG5hbWU6IFwicmVzb2x1dGlvblwiLFxuICAgICAgICAgICAgbWVzc2FnZTogYEhvdyBkbyB5b3Ugd2FudCB0byByZXNvbHZlIHRoZSBtaXNzaW5nIHBhY2thZ2UgXCIke2RlcGVuZGVuY3l9XCI6YCxcbiAgICAgICAgICAgIHNvdXJjZTogZnV6enlTb3VyY2UoW1xuICAgICAgICAgICAgICBEZXBlbmRlbmN5UmVzb2x1dGlvbi5JbnN0YWxsT25jZSxcbiAgICAgICAgICAgICAgRGVwZW5kZW5jeVJlc29sdXRpb24uSW5zdGFsbEFib3ZlLFxuICAgICAgICAgICAgICBEZXBlbmRlbmN5UmVzb2x1dGlvbi5Eb05vdGhpbmcsXG4gICAgICAgICAgICBdKSxcbiAgICAgICAgICB9LFxuICAgICAgICBdKTtcblxuICAgICAgICByZXNvbHV0aW9uID0gcmVzdWx0LnJlc29sdXRpb247XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAocmVzb2x1dGlvbikge1xuICAgICAgICBjYXNlIERlcGVuZGVuY3lSZXNvbHV0aW9uLkluc3RhbGw6XG4gICAgICAgICAgYXdhaXQgZXhlY0luc3RhbGwoW2RlcGVuZGVuY3ldLCBcIkVcIik7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBEZXBlbmRlbmN5UmVzb2x1dGlvbi5JbnN0YWxsT25jZTpcbiAgICAgICAgICBleGVjSW5zdGFsbChbZGVwZW5kZW5jeV0sIFwiRVwiLCB0cnVlKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIERlcGVuZGVuY3lSZXNvbHV0aW9uLkluc3RhbGxBYm92ZToge1xuICAgICAgICAgIC8vIFNhdmUgdGhlIGN1cnJlbnQgY3dkXG4gICAgICAgICAgY29uc3QgY3dkID0gcHJvY2Vzcy5jd2QoKTtcbiAgICAgICAgICAvLyBDaGFuZ2UgZGlyZWN0b3J5IHRvIHRoZSBwYXJlbnQgZGlyZWN0b3J5LlxuICAgICAgICAgIHByb2Nlc3MuY2hkaXIoXCIuLlwiKTtcbiAgICAgICAgICBjb25zdCBwYWNrYWdlTWFuYWdlciA9IGF3YWl0IGdldFBhY2thZ2VNYW5hZ2VyKCk7XG5cbiAgICAgICAgICAvLyBDaGVjayBmb3IgYSBwYWNrYWdlLmpzb25cbiAgICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpKSkge1xuICAgICAgICAgICAgLy8gUGVyZm9ybSBhbiBpbml0IHRvIG1ha2UgdGhlIHBhY2thZ2VcbiAgICAgICAgICAgIGV4ZWNTeW5jKHBhY2thZ2VNYW5hZ2VyWzBdLCBbXCJpbml0XCIsIFwiLXlcIl0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEluc3RhbGwgdGhlIGRlcGVuZGVuY3lcbiAgICAgICAgICBhd2FpdCBleGVjSW5zdGFsbChbZGVwZW5kZW5jeV0sIFwiRVwiKTtcbiAgICAgICAgICAvLyBSZXR1cm4gdG8gb3JpZ2luYWwgY3dkXG4gICAgICAgICAgcHJvY2Vzcy5jaGRpcihjd2QpO1xuICAgICAgICAgIC8vIFBlcmZvcm0gYW4gYXdhaXQgdG8gbGV0IGZpbGUgc3lzdGVtIGZsdXNoXG4gICAgICAgICAgYXdhaXQgd2FpdCgxMDApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLAogICAgImltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4vZXhlYy1zeW5jLmpzXCI7XG5pbXBvcnQgeyBnZXRQYWNrYWdlTWFuYWdlciB9IGZyb20gXCIuL2dldC1wYWNrYWdlLW1hbmFnZXIuanNcIjtcbmltcG9ydCB7IGlzRGVmaW5lZCB9IGZyb20gXCIuLi91dGlsL3R5cGVzLmpzXCI7XG5cbi8qKlxuICogRXhlY3V0ZXMgYW4gYG5wbSBpbnN0YWxsIFtwYWNrYWdlcy4uLl1gIGluIHRoZSBjdXJyZW50IGNvbnRleHQuXG4gKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBjb21tYW5kIHN1Y2NlZWRlZC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWNJbnN0YWxsKFxuICBwYWNrYWdlczogc3RyaW5nW10sXG4gIG1vZGU/OiBcIkRcIiB8IFwiREVcIiB8IFwiRVwiLFxuICBub1NhdmU/OiBib29sZWFuXG4pIHtcbiAgY29uc3QgbWFuYWdlciA9IGF3YWl0IGdldFBhY2thZ2VNYW5hZ2VyKCk7XG4gIGNvbnN0IHRvSW5zdGFsbCA9IHBhY2thZ2VzLmZpbHRlcihpc0RlZmluZWQpO1xuXG4gIHJldHVybiBhd2FpdCBleGVjU3luYyhtYW5hZ2VyWzBdLCBbXG4gICAgXCJpXCIsXG4gICAgbm9TYXZlID8gXCItLW5vLXNhdmVcIiA6IG51bGwsXG4gICAgbW9kZSA/IGAtJHttb2RlfWAgOiBudWxsLFxuICAgIC4uLnRvSW5zdGFsbCxcbiAgXSk7XG59XG4iLAogICAgImltcG9ydCBmdXp6eSBmcm9tIFwiZnV6enlcIjtcblxuZXhwb3J0IGNvbnN0IGZ1enp5U291cmNlID1cbiAgKG9wdGlvbnM6IFNldDxzdHJpbmc+IHwgc3RyaW5nW10pID0+IGFzeW5jIChfOiB1bmtub3duLCBpbnB1dDogc3RyaW5nKSA9PiB7XG4gICAgbGV0IG9wdHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgb3B0cyA9IEFycmF5LmZyb20ob3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9wdHMgPSBvcHRpb25zO1xuICAgIH1cblxuICAgIHJldHVybiBmdXp6eS5maWx0ZXIoaW5wdXQgfHwgXCJcIiwgb3B0cykubWFwKChlKSA9PiBlLnN0cmluZyk7XG4gIH07XG4iLAogICAgIi8qKlxuICogQ2hlY2tzIGlmIHRoZSByZXF1ZXN0ZWQgcGFja2FnZSBpcyBhdmFpbGFibGUgdG8gdGhlIHRhcmdldCBwcm9qZWN0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaXNQYWNrYWdlQXZhaWxhYmxlKHBhY2thZ2VOYW1lOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBpbXBvcnQocGFja2FnZU5hbWUpO1xuICAgIHJldHVybiB0cnVlO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgXCJSZXF1ZXN0ZWQgcGFja2FnZSBpcyBub3QgYXZhaWxhYmxlIGluIHRoaXMgY3VycmVudCBwcm9qZWN0OlwiLFxuICAgICAgcGFja2FnZU5hbWVcbiAgICApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuIgogIF0sCiAgIm1hcHBpbmdzIjogIjs7c2xCQUFhLGVBQU4sQUFBTSxFQUFRLENBQ25CLEtBQU0sSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3JELElBQUssSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3BELE9BQVEsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3ZELE1BQU8sSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3RELEtBQU0sSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3JELFFBQVMsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3hELFdBQVksSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQzNELFVBQVcsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQzFELGFBQWMsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQzdELFlBQWEsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQzVELFdBQVksSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQzNELGNBQWUsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQzlELFlBQWEsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQzVELEtBQU0sSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3JELEtBQU0sSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3JELE1BQU8sSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3RELE1BQU8sSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3RELFlBQWEsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQzVELE9BQVEsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3ZELE1BQU8sSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3RELFNBQVUsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3pELFFBQVMsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3hELE9BQVEsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQ3ZELFVBQVcsSUFBSSxJQUFtQixXQUFXLEVBQUssS0FBSyxHQUFHLFdBQzFELGFBQWMsSUFBSSxJQUFtQixZQUFZLEVBQUssS0FBSyxH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Q0osRUFFSCxJQUFNLEdBQUssRUFBUSxRQUFRLElBQUksRUFBRSxZQUMvQjtBQUFBO0FBQUE7QUFBQSxHQUlGLEVBRUEsR0FBRyxRQUFRLEtBQUssRUFDYixZQUNDO0FBQUE7QUFBQTtBQUFBLEtBSUYsRUFDQyxPQUFPLFNBQVksQ0FDbEIsQ0FBQywrQ0FBa0MsUUFBUSxFQUFFLEVBQUUsTUFBTSxDQUFDLElBQWUsQ0FDbkUsUUFBUSxLQUFLLGdDQUFnQyxFQUM3QyxRQUFRLEtBQUssRUFBSSxPQUFTLEVBQUksT0FBTyxFQUNyQyxRQUFRLEtBQUssQ0FBQyxFQUNmLEVBQ0YsRUFFSCxJQUFNLEdBQUssRUFDUixRQUFRLElBQUksRUFDWixPQUNDLG9CQUNBO0FBQUE7QUFBQSxLQUdGLEVBQ0MsT0FDQyxxQkFDQTtBQUFBO0FBQUEsR0FHRixFQUNDLE9BQ0MseUJBQ0E7QUFBQTtBQUFBLEdBR0YsRUFFRixHQUFHLFFBQVEsU0FBUyxFQUNqQixZQUNDO0FBQUE7QUFBQTtBQUFBLEtBSUYsRUFDQyxPQUFPLFNBQVksQ0FDbEIsTUFBUSxVQUFTLFdBQVUsZ0JBQWlCLEdBQU0sUUFBUSxJQUFJLEVBQUUsS0FNaEUsSUFBSyxJQUFZLElBQWEsRUFDNUIsUUFBUSxLQUNOLG9FQUNGLEVBQ0EsUUFBUSxLQUFLLENBQUMsRUFJaEIsTUFBTSxHQUFtQixFQUFFLE1BQU0sSUFBTSxRQUFRLEtBQUssQ0FBQyxDQUFDLEVBQ3RELFFBQVEsS0FBSyx5Q0FBeUMsR0FFckQsK0NBQ0UsUUFBUSxFQUFTLEVBQVUsQ0FBWSxFQUN2QyxNQUFNLENBQUMsSUFBZSxDQUNyQixRQUFRLEtBQUssd0NBQXdDLEVBQ3JELFFBQVEsS0FBSyxFQUFJLE9BQVMsRUFBSSxPQUFPLEVBQ3JDLFFBQVEsS0FBSyxDQUFDLEVBQ2YsRUFDSixFQVNILEdBQUkiLAogICJkZWJ1Z0lkIjogIjMwOTk5RTg5NzBDN0ZEMjk2NDc1NkUyMTY0NzU2RTIxIiwKICAibmFtZXMiOiBbXQp9
