#!/usr/bin/env bun
// @bun
import{createRequire as c9}from"node:module";var g9=Object.create;var{getPrototypeOf:u9,defineProperty:f1,getOwnPropertyNames:d9}=Object;var h9=Object.prototype.hasOwnProperty;var l9=($,Y,K)=>{K=$!=null?g9(u9($)):{};const Z=Y||!$||!$.__esModule?f1(K,"default",{value:$,enumerable:!0}):K;for(let G of d9($))if(!h9.call(Z,G))f1(Z,G,{get:()=>$[G],enumerable:!0});return Z};var M1=($,Y)=>()=>(Y||$((Y={exports:{}}).exports,Y),Y.exports);var E=($,Y)=>{for(var K in Y)f1($,K,{get:Y[K],enumerable:!0,configurable:!0,set:(Z)=>Y[K]=()=>Z})};var M=($,Y)=>()=>($&&(Y=$($=0)),Y);var y=c9(import.meta.url);var X;var O=M(()=>{X={cyan:(...$)=>`\x1B[36m${$.join(" ")}\x1B[0m`,red:(...$)=>`\x1B[31m${$.join(" ")}\x1B[0m`,yellow:(...$)=>`\x1B[33m${$.join(" ")}\x1B[0m`,green:(...$)=>`\x1B[32m${$.join(" ")}\x1B[0m`,blue:(...$)=>`\x1B[34m${$.join(" ")}\x1B[0m`,magenta:(...$)=>`\x1B[35m${$.join(" ")}\x1B[0m`,cyanBright:(...$)=>`\x1B[96m${$.join(" ")}\x1B[0m`,redBright:(...$)=>`\x1B[91m${$.join(" ")}\x1B[0m`,yellowBright:(...$)=>`\x1B[93m${$.join(" ")}\x1B[0m`,greenBright:(...$)=>`\x1B[92m${$.join(" ")}\x1B[0m`,blueBright:(...$)=>`\x1B[94m${$.join(" ")}\x1B[0m`,magentaBright:(...$)=>`\x1B[95m${$.join(" ")}\x1B[0m`,whiteBright:(...$)=>`\x1B[97m${$.join(" ")}\x1B[0m`,gray:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,grey:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,white:(...$)=>`\x1B[37m${$.join(" ")}\x1B[0m`,black:(...$)=>`\x1B[30m${$.join(" ")}\x1B[0m`,blackBright:(...$)=>`\x1B[90m${$.join(" ")}\x1B[0m`,bgCyan:(...$)=>`\x1B[46m${$.join(" ")}\x1B[0m`,bgRed:(...$)=>`\x1B[41m${$.join(" ")}\x1B[0m`,bgYellow:(...$)=>`\x1B[43m${$.join(" ")}\x1B[0m`,bgGreen:(...$)=>`\x1B[42m${$.join(" ")}\x1B[0m`,bgBlue:(...$)=>`\x1B[44m${$.join(" ")}\x1B[0m`,bgMagenta:(...$)=>`\x1B[45m${$.join(" ")}\x1B[0m`,bgCyanBright:(...$)=>`\x1B[106m${$.join(" ")}\x1B[0m`,bgRedBright:(...$)=>`\x1B[101m${$.join(" ")}\x1B[0m`,bgYellowBright:(...$)=>`\x1B[103m${$.join(" ")}\x1B[0m`,bgGreenBright:(...$)=>`\x1B[102m${$.join(" ")}\x1B[0m`,bgBlueBright:(...$)=>`\x1B[104m${$.join(" ")}\x1B[0m`,bgMagentaBright:(...$)=>`\x1B[105m${$.join(" ")}\x1B[0m`,cyanBrightBold:(...$)=>`\x1B[96m\x1B[1m${$.join(" ")}\x1B[0m`,redBrightBold:(...$)=>`\x1B[91m\x1B[1m${$.join(" ")}\x1B[0m`,yellowBrightBold:(...$)=>`\x1B[93m\x1B[1m${$.join(" ")}\x1B[0m`,greenBrightBold:(...$)=>`\x1B[92m\x1B[1m${$.join(" ")}\x1B[0m`,blueBrightBold:(...$)=>`\x1B[94m\x1B[1m${$.join(" ")}\x1B[0m`,magentaBrightBold:(...$)=>`\x1B[95m\x1B[1m${$.join(" ")}\x1B[0m`,whiteBrightBold:(...$)=>`\x1B[97m\x1B[1m${$.join(" ")}\x1B[0m`,grayBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`,greyBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`,whiteBold:(...$)=>`\x1B[37m\x1B[1m${$.join(" ")}\x1B[0m`,blackBold:(...$)=>`\x1B[30m\x1B[1m${$.join(" ")}\x1B[0m`,blackBrightBold:(...$)=>`\x1B[90m\x1B[1m${$.join(" ")}\x1B[0m`}});import{stripIndent as p9}from"common-tags";function _($,...Y){return`${p9($,...Y)}\n\n`}var s=()=>{};function C0($){return $&&$.charCodeAt!==void 0}function R($){return $!==void 0&&$!==null}import i9 from"inquirer";import{stripIndent as n9}from"common-tags";async function v($,Y,K){const{result:Z}=await i9.prompt([{type:"confirm",name:"result",message:n9`${$}`,default:Y}]);if(Z)K?.();return Z}var J1=()=>{};function u1($){return $!==void 0&&$!==null}function F1($){return u1($)&&u1($.status)&&u1($.stderr)}async function _1($,Y=[]){try{const K=Bun.spawnSync([$,...Y.filter(R)],{stdio:["inherit","inherit","inherit"],env:process.env});if(K.exitCode!==0){if(!_1.silent)console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.exitCode}`),console.error(new Error().stack);return!1}}catch(K){if(!_1.silent){if(F1(K))console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.status}`);else if(K instanceof Error)console.error(K.message);console.error(new Error().stack)}return!1}return!0}var F;var C=M(()=>{_1.silent=!1;F=_1});async function k(){if(h)return h;if(process.env.USE_NPM==="true")h=["npm","npx"];else if(process.env.USE_BUN==="true")h=["bun","bunx"];else if(await F("bun",["--version"]))h=["bun","bunx"];else h=["npm","npx"];return h}var h=null;var o=M(()=>{C()});async function S($){await new Promise((Y)=>setTimeout(Y,$))}import Y3 from"fs-extra";import l from"path";async function t(){console.warn("Building Vite config using base:",X.yellowBrightBold(l.resolve("vite.config.ts")));let $=await(await import(l.resolve("vite.config.ts"))).default();const Y=await Y3.readJSONSync(l.resolve("tsconfig.json"));return $={...$,logLevel:"info",mode:"development",root:l.resolve("app/client"),clearScreen:!0,build:{...$.build,cssCodeSplit:!0,outDir:l.resolve("build/client"),sourcemap:!0,rollupOptions:{output:{manualChunks:void 0}},watch:{...$.build?.watch,include:[...(Array.isArray($.build?.watch?.include)?$.build?.watch?.include:[$.build?.watch?.include])||[],...Y?.include?.map((K)=>l.resolve(K))||[],"tsconfig.json"].filter(Boolean)},emptyOutDir:!0},resolve:{alias:{config:l.resolve("app/config")}}},$}var b1=M(()=>{O()});import K3 from"deepmerge";import Z3 from"fs-extra";import G3 from"path";async function u(){const $=Z3.readJSONSync(G3.resolve("package.json"));return K3($.dependencies||{},$.peerDependencies||{})}var q1=()=>{};import v0 from"fs-extra";import m0 from"path";async function T(){return v0.readJSONSync(m0.resolve("package.json")).version||""}var m=()=>{};import*as f0 from"vite";import J3 from"fs-extra";import d1 from"path";async function Q1(){if(process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await T(),console.warn(X.yellowBrightBold("Starting Vite client build...")),!J3.existsSync(d1.resolve("app/client/index.ts"))){console.warn("Tried to start development process for the app client, but no entry file was found.");return}const $=await t();$.root=d1.resolve("app/client"),$.build.outDir=d1.resolve("build/client"),$.build.rollupOptions.external=Object.keys(await u()),await f0.build($),console.warn(X.yellowBrightBold("Vite client build process started..."))}var h1=M(()=>{b1();O();q1();m()});function g0($){const Y=(K)=>(Z)=>{if($(K,Z),Z)process.exit(1);else process.exit(0)};process.on("exit",Y("exit")),process.on("SIGINT",Y("SIGINT")),process.on("SIGUSR1",Y("SIGUSR1")),process.on("SIGUSR2",Y("SIGUSR2")),process.on("SIGTERM",Y("SIGTERM")),process.on("uncaughtException",Y("uncaughtException"))}function Q3(){if(u0!==null)return;u0=setInterval(()=>{while(l1.length>0){const $=l1.shift();if($)console.log(...$)}},400)}function c1(...$){l1.push($),Q3()}var l1,u0=null;var d0=M(()=>{l1=[]});import X3 from"child_process";import p1 from"path";import z3 from"readline";async function X1($){console.warn("\nRunning the App server at: ",X.yellowBrightBold(p1.resolve("app/server")),"\n"),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await T(),process.env.RESOURCE_PATH=process.env.RESOURCE_PATH||p1.resolve("build/client");const Y=await k();if(Y[0]!=="bun")console.error("Currently only an environment with bun installed is supported for this command.");const K=X3.spawn(Y[0],["--watch",p1.resolve("app/server/index.ts")]);process.stdin.setRawMode?.(!0),process.stdin.resume(),process.stdin.setEncoding("utf8"),z3.emitKeypressEvents(process.stdin);let Z=!1;if(process.stdin.on("keypress",async(G,J)=>{if(J&&J.ctrl&&J.name==="c")K.kill(),process.exit(0);else if(J&&J.ctrl&&J.name==="d")K.kill(),process.exit(0);else if(G.toString()==="b"||G.toString()==="B"){if(Z)return;Z=!0,await Q1(),Z=!1}else if(G.toString()==="q"||G.toString()==="Q")if(K.kill(),J.shift)process.exit(123);else process.exit(0)}),process.stdin.pipe(K.stdin),$)$(K);else K.stdout.on("data",function(G){c1(`${G.toString().slice(0,-1)}`)}),K.stderr.on("data",function(G){c1(`${G.toString().slice(0,-1)}`)});g0(async(G,J)=>{if(K.kill(),console.warn("EXIT BUILD SERVER"),console.warn(X.redBrightBold(G)),J&&J instanceof Error)console.warn(X.redBrightBold(J.stack||J.message));process.exit(0)})}var i1=M(()=>{h1();O();o();d0();m()});var l0={};E(l0,{default:()=>h0});async function h0(){process.env.NODE_ENV="development",Q1(),console.warn(X.yellowBrightBold("Starting dev server...")),process.env.VITE_RELEASE_VERSION=await T(),await X1()}var c0=M(()=>{h1();i1();O();m()});import r from"path";import W3 from"url";async function p0(){if(r.basename(r.resolve(n1,".."))==="dist")return r.resolve(n1,"../../");return r.resolve(n1,"../../../")}var n1;var i0=M(()=>{n1=W3.fileURLToPath(new URL(".",import.meta.url))});async function c($,Y=[]){const K=await k();return F(K[0],["run",$,Y.length>0&&Y[0]!=="--"?"--":void 0,...Y])}var D1=M(()=>{C();o()});var o1={};E(o1,{default:()=>n0});import s1 from"path";async function n0($,Y,...K){const Z=s1.resolve(".");process.env.PROJECT_ROOT=Z,process.env.VITE_RELEASE_VERSION=await T();const G=s1.resolve(".storybook"),J=await p0();if(process.chdir(J),Y&&Y.length>0)process.env.NODE_MODULES_STORIES=Y.join(",");if($==="build"){if(!c("storybook",["build","-c",G,"-o",`"${s1.resolve(Z,"storybook-static")}"`]))console.error(X.redBrightBold("Failed to build storybook"))}else if(!c("storybook",["dev","--no-version-updates","-p",process.env.PORT||"6006","-c",`"${G}"`]))console.error(X.redBrightBold("Failed to run storybook"))}var a1=M(()=>{O();i0();D1();m()});var r1=M1((z5,o0)=>{function B3(){try{return s0.statSync("/.dockerenv"),!0}catch($){return!1}}function H3(){try{return s0.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch($){return!1}}var s0=import.meta.require("fs"),t1;o0.exports=()=>{if(t1===void 0)t1=B3()||H3();return t1}});var r0=M1((W5,e1)=>{var L3=import.meta.require("os"),M3=import.meta.require("fs"),a0=r1(),t0=()=>{if(process.platform!=="linux")return!1;if(L3.release().toLowerCase().includes("microsoft")){if(a0())return!1;return!0}try{return M3.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!a0():!1}catch($){return!1}};if(process.env.__IS_WSL_TEST__)e1.exports=t0;else e1.exports=t0()});var $$=M1((B5,e0)=>{e0.exports=($,Y,K)=>{const Z=(G)=>Object.defineProperty($,Y,{value:G,enumerable:!0,writable:!0});return Object.defineProperty($,Y,{configurable:!0,enumerable:!0,get(){const G=K();return Z(G),G},set(G){Z(G)}}),$}});var X$=M1((H5,Q$)=>{function D3(){if($0===void 0)$0=q3()||b3();return $0}function G$($){if(typeof $==="string"||Array.isArray($))return $;const{[K$]:Y}=$;if(!Y)throw new Error(`${K$} is not supported`);return Y}function Z0({[e]:$},{wsl:Y}){if(Y&&N1)return G$(Y);if(!$)throw new Error(`${e} is not supported`);return G$($)}var __dirname="/Users/diniden/Desktop/VoidRay/dev-ops/node-devops/node_modules/open",F3=import.meta.require("path"),_3=import.meta.require("child_process"),{promises:A1,constants:J$}=import.meta.require("fs"),N1=r0(),b3=r1(),Y0=$$(),Y$=F3.join(__dirname,"xdg-open"),{platform:e,arch:K$}=process,q3=()=>{try{return A1.statSync("/run/.containerenv"),!0}catch{return!1}},$0,N3=(()=>{let Y;return async function(){if(Y)return Y;const K="/etc/wsl.conf";let Z=!1;try{await A1.access(K,J$.F_OK),Z=!0}catch{}if(!Z)return"/mnt/";const G=await A1.readFile(K,{encoding:"utf8"}),J=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(G);if(!J)return"/mnt/";return Y=J.groups.mountPoint.trim(),Y=Y.endsWith("/")?Y:`${Y}/`,Y}})(),Z$=async($,Y)=>{let K;for(let Z of $)try{return await Y(Z)}catch(G){K=G}throw K},O1=async($)=>{if($={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...$},Array.isArray($.app))return Z$($.app,(z)=>O1({...$,app:z}));let{name:Y,arguments:K=[]}=$.app||{};if(K=[...K],Array.isArray(Y))return Z$(Y,(z)=>O1({...$,app:{name:z,arguments:K}}));let Z;const G=[],J={};if(e==="darwin"){if(Z="open",$.wait)G.push("--wait-apps");if($.background)G.push("--background");if($.newInstance)G.push("--new");if(Y)G.push("-a",Y)}else if(e==="win32"||N1&&!D3()&&!Y){const z=await N3();if(Z=N1?`${z}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,G.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),!N1)J.windowsVerbatimArguments=!0;const W=["Start"];if($.wait)W.push("-Wait");if(Y){if(W.push(`"\`"${Y}\`""`,"-ArgumentList"),$.target)K.unshift($.target)}else if($.target)W.push(`"${$.target}"`);if(K.length>0)K=K.map((L)=>`"\`"${L}\`""`),W.push(K.join(","));$.target=Buffer.from(W.join(" "),"utf16le").toString("base64")}else{if(Y)Z=Y;else{const z=!__dirname||__dirname==="/";let W=!1;try{await A1.access(Y$,J$.X_OK),W=!0}catch{}Z=process.versions.electron||e==="android"||z||!W?"xdg-open":Y$}if(K.length>0)G.push(...K);if(!$.wait)J.stdio="ignore",J.detached=!0}if($.target)G.push($.target);if(e==="darwin"&&K.length>0)G.push("--args",...K);const Q=_3.spawn(Z,G,J);if($.wait)return new Promise((z,W)=>{Q.once("error",W),Q.once("close",(L)=>{if(!$.allowNonzeroExitCode&&L>0){W(new Error(`Exited with code ${L}`));return}z(Q)})});return Q.unref(),Q},K0=($,Y)=>{if(typeof $!=="string")throw new TypeError("Expected a `target`");return O1({...Y,target:$})},A3=($,Y)=>{if(typeof $!=="string")throw new TypeError("Expected a `name`");const{arguments:K=[]}=Y||{};if(K!==void 0&&K!==null&&!Array.isArray(K))throw new TypeError("Expected `appArguments` as Array type");return O1({...Y,app:{name:$,arguments:K}})},x1={};Y0(x1,"chrome",()=>Z0({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));Y0(x1,"firefox",()=>Z0({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));Y0(x1,"edge",()=>Z0({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));K0.apps=x1;K0.openApp=A3;Q$.exports=K0});async function A($,Y=[]){try{const K=Bun.spawnSync([$,...Y.filter(R)],{stdio:["inherit","pipe","pipe"],env:process.env});if(K.exitCode!==0)return console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.exitCode}`),console.error(new Error().stack),null;return(K.stdout||"").toString()}catch(K){if(F1(K))console.error(`Error: ${$} ${Y.join(" ")} failed with code: ${K.status}`);else if(K instanceof Error)console.error(K.message);return console.error(new Error().stack),null}}var p=()=>{};function z$({template:$,options:Y,required:K,doubleCurlyBrackets:Z,onError:G,onToken:J}){const Q=new Map,z=new Map,W=new Map,L=new Map;let B=/\$\{([^\}]*)\}/g;if(Z)B=/\$\{\{([^\}]*)\}\}/g;const D=$.replace(B,(q,H)=>{let I="";if(L.set(H,(L.get(H)||0)+1),H in Y){Q.set(H,(Q.get(H)||0)+1);const I0=Y[H];if(I0!==void 0)I=I0}else z.set(H,(z.get(H)||0)+1);if(J){if(I=J(H,I),I!==H)Q.set(H,(Q.get(H)||0)+1),z.delete(H)}return I});Object.keys(Y).forEach((q)=>{if(!Q.get(q))W.set(q,(W.get(q)||0)+1)});const N={resolvedtemplateOptions:Q,template:D,templateProvidedOptions:L,unresolvedProvidedOptions:W,unresolvedTemplateOptions:z};if(K)K.values.forEach((q)=>{if(N.unresolvedProvidedOptions.get(q)){const H=`${K.name}: Could not resolve all the required inputs. Input: ${q}`;if(G)G(H);else console.error(H)}else if(N.unresolvedTemplateOptions.get(q)){const H=`${K.name}: A required option was not provided in the options parameter. Option: ${q}`;if(G)G(H);else console.error(H)}else if(!N.resolvedtemplateOptions.get(q)){const H=`${K.name}: A required option was not provided in the options parameter. Option: ${q}`;if(G)G(H);else console.error(H)}});return N}var _$={};E(_$,{default:()=>F$});import z1 from"fs-extra";import W$ from"hostile";import G0 from"path";import B$ from"valid-url";function O3($){return $&&typeof $==="function"}function H$($,Y,...K){return new Promise((Z,G)=>{const J=$[Y];if(!O3(J)){G(new Error(`${String(Y)} is not a function`));return}J(...K,(Q,z)=>{if(Q)console.warn(Q),G(Q),process.exit(1);else Z(z||void 0)})})}async function x3(){const Y=z1.readJSONSync(G0.resolve("package.json")).hosts;if(!Y)return;const K=Object.keys(Y);let Z=await H$(W$,"get",!1);const G=[];console.warn(X.yellow("Updating hosts file..."));for(let Q of K)try{if(!Z.find((z)=>z[0]===Q&&z[1]===Y[Q]))G.push([Q,Y[Q]])}catch(z){if(z instanceof Error)console.warn(X.red(z.message))}if(G.length>0){console.warn(X.yellow("Adding hosts (You may be prompted for administrator password):\n\t",G.map((z)=>`${z[0]} => ${z[1]}`).join("\n\t"))),await F("sudo",["echo","Granted sudo access to update hosts file."]);const Q=await A("stat",["-f","%p","/etc/hosts"]).toString();await F("sudo",["chmod","666","/etc/hosts"]);for(let z of G)z1.appendFileSync("/etc/hosts",`${z[0]} ${z[1]}`);z1.appendFileSync("/etc/hosts","\n"),await F("sudo",["chmod",Q.substring(Q.length-4).trim(),"/etc/hosts"])}await S(500),console.warn(X.yellow("Verifying hosts file...")),Z=await H$(W$,"get",!1);let J=!1;if(G.forEach(([Q,z])=>{if(!Z.find((W)=>W[0]===Q&&W[1]===Y[Q]))J=!0,console.warn(X.redBright(`Failed to add host: ${X.yellowBright(Q)} => ${X.yellowBright(z)}`))}),J)console.warn(X.red(_`
        *************************************************************************
        * Some hosts specified in the package.json were not able to be written  *
        * to the hosts file for the system. You can amend this by editing the   *
        * file yourself, or by trying to run this script again as an admin.     *
        *************************************************************************
      `))}function L$($,Y,K){let Z=Y;if(B$.isWebUri(Y))Z=Y;else if($[Y])Z=$[Y];const G=z$({options:K,template:Z});if(G.unresolvedTemplateOptions.size>0)throw console.warn(X.red(_`
          You must specify these env variables for this URL to work:
          ${Array.from(G.unresolvedTemplateOptions.keys()).join("\n\t")}
        `)),new Error("Missing env configuration for URL");if(Z=G.template,B$.isWebUri(Z))console.warn("Navigating to:",X.cyanBrightBold(Z)),M$.default(Z);else console.warn("Can not open invalid URL:",X.redBrightBold(Z))}async function F$($,Y){const Z=z1.readJSONSync(G0.resolve("package.json"))?.url||{},G=Y?.reduce((Q,z,W)=>{return Q[`${W+1}`]=z,Q},{})||{};if(!$||$.length<=0){console.warn(_`
      Available URLs:
        ${X.cyanBrightBold(Object.keys(Z).join("\n        "))}
    `);return}await x3();const J={...process.env,...G};if(Array.isArray($))$.forEach((Q)=>{L$(Z,Q,J)});else L$(Z,$,J)}var M$;var b$=M(()=>{M$=l9(X$(),1);O();s();C();p()});import I3 from"child_process";async function $1(){let $="";try{$=I3.execSync("git status --porcelain=v1",{encoding:"utf-8"})}catch(K){return!0}if($.trim().split("\n").filter(Boolean).length===0)return!1;return!0}var I1=()=>{};async function U1($){if($){if(!await v(`
      Would you like to return back to development?
      Runs the following:
        git fetch
        git checkout dev
        git reset --hard origin/dev
    `))return}if(await $1())return console.error("Can not return to dev branch as changes are present on the current branch."),!1;let Y=!1;if(!await F("git",["fetch"]))Y=!0;if(!await F("git",["checkout","dev"]))Y=!0;if(!await F("git",["reset","--hard","origin/dev"]))Y=!0;if(Y)return console.error("Could not return to dev branch."),!1;return!0}var J0=M(()=>{C();I1();J1()});import x from"fs-extra";import U3 from"ignore";import b from"path";async function V3(){const $=await u();console.warn("Building full distribution...");let Y=await Bun.build({entrypoints:[b.resolve("./bin/main.ts")],target:"bun",external:Object.keys($),minify:!0,sourcemap:"inline"});for(let K of Y.outputs)console.warn("Writing bin bundle resource:",X.cyanBrightBold(K.path)),await Bun.write(b.resolve("./dist/bin",K.path),K);console.warn("Building gimped distribution..."),Y=await Bun.build({entrypoints:[b.resolve("./bin/main-gimp.ts")],target:"node",external:Object.keys($),minify:!0,sourcemap:"inline"});for(let K of Y.outputs)console.warn("Writing bin bundle resource:",X.cyanBrightBold(K.path)),await Bun.write(b.resolve("./dist/bin",K.path),K);console.warn("Copying entry cross-platform distribution..."),x.copyFileSync(b.resolve("./bin/main-entry.cjs"),b.resolve("./dist/bin/main-entry.cjs"))}async function T3(){if(!x.existsSync(b.resolve("./bin/shim")))console.error("No shim distribution files found to be built");if(x.existsSync(b.resolve("./shim")))x.removeSync(b.resolve("./shim"));const $=await u();console.warn("Building shim distribution...");const Y=await Bun.build({entrypoints:[b.resolve("./bin/shim/index.ts")],target:"node",external:Object.keys($),minify:!0});for(let Z of Y.outputs)console.warn("Writing shim bundle resource:",X.cyanBrightBold(Z.path)),await Bun.write(b.resolve("./shim/src/bin/shim",Z.path),Z);x.writeFileSync(b.resolve("./shim/index.js"),'export * from "./src/bin/shim/index.js";\n',{encoding:"utf-8"}),x.writeFileSync(b.resolve("./shim/index.d.ts"),'export * from "./src/bin/shim/index.d.ts";\n',{encoding:"utf-8"});const K=x.readJSONSync(b.resolve("tsconfig.json"));if(K.exclude=K.exclude||[],K.exclude.push("./bin/lib/**"),K.include=["./bin/shim"],x.writeJSONSync(b.resolve("tsconfig.temp.json"),K),await S(500),!F("tsc",["-d","--emitDeclarationOnly","--pretty","--outDir",b.resolve("./shim/src/bin"),"--project",b.resolve("tsconfig.temp.json")]))console.warn("Failed to compile type declarations for the shim files."),x.removeSync(b.resolve("tsconfig.temp.json")),process.exit(1);x.removeSync(b.resolve("tsconfig.temp.json"))}async function w3(){console.warn(X.yellowBright("Copying template files for bin distribution"));const $=b.resolve(__dirname,"../../template"),Y=b.resolve("./dist/bin/template");x.copySync($,Y);const K=x.readdirSync(Y).map((J)=>b.resolve(Y,J,"index.ts")).filter((J)=>{if(x.existsSync(J))return!0}),Z=await u();let G=!1;for(let J of K){const Q=await Bun.build({entrypoints:[J],target:"bun",external:Object.keys(Z),minify:!0});if(!Q.success){console.error(X.redBrightBold("Build failed for template:"),X.cyanBrightBold(b.relative(Y,b.dirname(J))));for(let z of Q.logs)console.error(z);G=!0}for(let z of Q.outputs)console.warn("Writing template entry file:",X.cyanBrightBold(b.relative(Y,b.resolve(b.dirname(J),z.path)))),await Bun.write(b.resolve(b.dirname(J),z.path),z)}if(G)console.error(X.redBrightBold("Some templates have errors (see above), stopping the build process.")),process.exit(1)}async function C3(){console.warn(X.yellowBright("Copying entry shell script for bin distribution")),x.copySync(b.resolve("./bin/main-entry.sh"),b.resolve("./dist/bin/main-entry.sh")),x.copySync(b.resolve("./bin/main-entry.ps1"),b.resolve("./dist/bin/main-entry.ps1"))}async function D$(){if(console.warn(X.cyanBright("Building bin commands for the distribution.")),!x.existsSync(b.resolve("./bin/main.ts"))||!x.existsSync(b.resolve("./bin/main-entry.sh"))||Q0.ignores("bin")){console.warn(`Tried to make a release for the bin commands, but no bin/main.ts or bin/main.sh entry file was found. (or was gitignored):\n\t${b.resolve("./bin/main.ts")}\n\t${b.resolve("./bin/main.sh")}`);return}x.ensureDirSync(b.resolve("./dist")),x.ensureDirSync(b.resolve("./dist/bin/template")),await V3(),await T3(),await w3(),await C3()}var __dirname="/Users/diniden/Desktop/VoidRay/dev-ops/node-devops/bin/lib/build/bin",q$,Q0;var N$=M(()=>{O();C();q1();q$=b.resolve(".gitignore"),Q0=U3.default();if(x.existsSync(q$))Q0=Q0.add(x.readFileSync(q$).toString())});import A$ from"fs";import O$ from"path";function x$($){return{name:"vite-devops-string-replace-plugin",enforce:"pre",load(Y){const K=O$.resolve(Y),Z=[".ts",".js",".tsx",".jsx"];if(A$.existsSync(K)&&Z.includes(O$.extname(K))&&!K.includes("node_modules")&&!K.includes("\0")){let G=A$.readFileSync(K,{encoding:"utf-8"});return $.forEach((J)=>{G=G.replace(J.from,J.to)}),G}}}}var I$=()=>{};import U from"fs-extra";import V from"path";function U$($){const Y=process.env.PROJECT_ROOT||".",K=V.resolve(Y,"app/config");if(!U.existsSync(K)){console.warn(`viteDevopsAppConfigPlugin: ${X.cyanBrightBold("No app/config folder found.")}`);return}try{const Z=U.readdirSync(K).filter((B)=>{return U.statSync(V.join(K,B)).isDirectory()}),G=Z.map((B)=>V.join(K,B)),Q=Z.map((B,D)=>{if(!$)if(U.existsSync(V.join(G[D],`${B}.local`))||U.existsSync(V.join(G[D],`${B}.local.js`))||U.existsSync(V.join(G[D],`${B}.local.ts`))||U.existsSync(V.join(G[D],`${B}.local.tsx`))||U.existsSync(V.join(G[D],`${B}.local.jsx`)))return[{from:`"config/${B}/${B}"`,to:`"config/${B}/${B}.local"`},{from:`"config/${B}/${B}.js"`,to:`"config/${B}/${B}.local.js"`},{from:`"config/${B}/${B}.ts"`,to:`"config/${B}/${B}.local.ts"`}];else return[];return[{from:`"config/${B}/${B}"`,to:`"config/${B}/${B}.${$}"`},{from:`"config/${B}/${B}.js"`,to:`"config/${B}/${B}.${$}.js"`},{from:`"config/${B}/${B}.ts"`,to:`"config/${B}/${B}.${$}.ts"`}]}).reduce((B,D)=>B.concat(D),[]),L=[...!$&&(U.existsSync(V.join(K,"env.local"))||U.existsSync(V.join(K,"env.local.js"))||U.existsSync(V.join(K,"env.local.ts"))||U.existsSync(V.join(K,"env.local.tsx"))||U.existsSync(V.join(K,"env.local.jsx")))?[{from:'"config/env"',to:'"config/env.local"'},{from:'"config/env.js"',to:'"config/env.local.js"'},{from:'"config/env.ts"',to:'"config/env.local.ts"'}]:$?[{from:'"config/env"',to:`"config/env.${$}"`},{from:'"config/env.js"',to:`"config/env.${$}.js"`},{from:'"config/env.ts"',to:`"config/env.${$}.ts"`}]:[],...Q];if(L.length>0)console.warn(`

  ${X.yellowBrightBold("Using the following mappings for app config:")}

  \t${X.cyanBrightBold(L.map((B)=>`\n  ${B.from} => ${B.to}`).join("\n\t"))}

      `);return x$(L)}catch(Z){console.error(Z),console.error(X.redBrightBold(`
      App config plugin failed to load. The default config paths will be used
      and any specific environment requested will be ignored.
    `))}}var V$=M(()=>{O();I$()});import*as w$ from"vite";import V1 from"fs-extra";import S3 from"ignore";import Y1 from"path";async function C$($){if(console.warn(X.cyanBright("Building client files for the distribution.")),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await T(),process.env.FORCE_BUILD!=="true"){if(!V1.existsSync(Y1.resolve("app/client"))||X0.ignores("app/client")){console.error(`Tried to make a release for the web app client, but no app/client entry file was found. (or was gitignored):\n\t${Y1.resolve("app/client")}`);return}}const Y="development";process.env.NODE_ENV="production",console.warn(`Releasing ${X.yellowBrightBold("app/client")} for Environment:`,X.cyanBrightBold($)),process.env.BUILD_ENV=$;const K=await t();if(K.plugins=[U$($),...K.plugins||[]],K.logLevel="warn",K.mode="production",K.root=Y1.resolve("app/client"),K.build.outDir=Y1.resolve("dist/app/client",$),K.build.watch=void 0,K.build.rollupOptions.output={dir:K.build.outDir,entryFileNames:"index.js",chunkFileNames:"index.js",manualChunks:void 0},await w$.build(K),process.env.NODE_ENV=Y,!V1.existsSync(Y1.resolve(`dist/app/client/${$}/index.js`)))console.error("\n\nFailed to create Client output bundle. Exiting process...\n\n"),process.exit(1)}var T$,X0;var S$=M(()=>{b1();O();m();V$();T$=Y1.resolve(".gitignore"),X0=S3.default();if(V1.existsSync(T$))X0=X0.add(V1.readFileSync(T$).toString())});async function K1($=[],Y){const K=await k();if(K1.optimize){if(K[1]==="bunx")return F(K[1],[Y?.excludeBunFlag?null:"--bun",...$].filter(R))}return F(K[1],[...$])}var z0=M(()=>{C();o();K1.optimize=!0});import T1 from"fs-extra";import W1 from"path";async function w1(){if(!T1.existsSync(W1.resolve("ui")))return;T1.ensureDirSync(W1.resolve("dist/types")),console.warn(X.yellowBrightBold("Generating .d.ts files...")),K1(["tsc","--emitDeclarationOnly","--declaration","--outDir","dist/types","--project",W1.resolve("tsconfig.json")]);const $=T1.readdirSync(W1.resolve("dist/types"));for(let Y of $){if(Y==="ui"||Y==="util")continue;console.warn(X.yellowBright(`Removing types for folder: ${Y}`)),T1.removeSync(W1.resolve("dist/types",Y))}}var W0=M(()=>{O();z0()});import j$ from"fs-extra";import E$ from"path";async function R$(){return j$.readJSONSync(E$.resolve("package.json")).name||""}var k$=()=>{};import*as P$ from"vite";import C1 from"fs";import j3 from"ignore";import d from"path";async function v$(){if(console.warn(X.cyanBright("Copying ui files for the distribution.")),process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await T(),!process.env.FORCE_BUILD){if(!C1.existsSync(d.resolve("ui"))||B0.ignores("ui")){console.error(`"No library project found (or was gitignored) for bundling release at:\n\t${d.resolve("ui")}`);return}}if(console.warn(X.yellowBrightBold("Starting Vite client build...")),!C1.existsSync(d.resolve("ui/index.ts"))){console.error("The UI folder project has no index.ts entry point to create the library.");return}await w1(),console.warn(X.yellowBrightBold("Building library bundle..."));const $=await t();$.logLevel="warn",$.root=d.resolve("ui"),$.build.lib={entry:d.resolve("ui/index.ts"),name:(await R$()).split("@").join("").split("/").join("_"),fileName:"index"},$.mode="production",$.root=d.resolve("app/client"),$.build.outDir=d.resolve("dist/ui"),$.build.watch=void 0,$.build.rollupOptions.output={dir:$.build.outDir,entryFileNames:"index.js",chunkFileNames:"index.js",manualChunks:void 0};const Y=Object.keys(await u());console.warn("Externalized Libraries that will not be included in the bundle:",Y),$.build.rollupOptions={...$.build.rollupOptions,external:Y},await P$.build($)}var y$,B0;var m$=M(()=>{b1();O();W0();q1();k$();m();y$=d.resolve(".gitignore"),B0=j3.default();if(C1.existsSync(y$))B0=B0.add(C1.readFileSync(y$).toString())});import i from"fs-extra";import f from"path";async function f$(){process.env.VITE_RELEASE_VERSION=process.env.VITE_RELEASE_VERSION||await T(),console.warn(X.cyanBright("Copying story files for the distribution."));const $=f.resolve("dist/stories"),Y=f.resolve("ui/stories"),K=f.resolve("dist");if(!i.existsSync(Y)){console.error(`Could not find stories directory:\n\t${Y}`);return}i.ensureDirSync($),i.copySync(Y,$);const Z=f.resolve("package.json"),J={name:i.readJSONSync(Z).name||"unknown",private:!0,type:"module",main:"./ui/index.js",types:"./types/ui/index.d.ts",dependencies:{},repository:{},scripts:{},devDependencies:{}};console.warn("Writing distribution package.json:",f.resolve(K,"package.json")),i.writeJSONSync(f.resolve(K,"package.json"),J),await S(500),i.ensureDirSync(f.resolve(K,"components")),J.main="../ui/index.js",J.types="../types/ui/index.d.ts",console.warn("Writing distribution package.json:",f.resolve(K,"components/package.json")),i.writeJSONSync(f.resolve(K,"components/package.json"),J),await S(500),console.warn("Finished copying stories.")}var g$=M(()=>{O();m()});var u$={};E(u$,{default:()=>j1});import S1 from"fs-extra";import Z1 from"path";async function E3(){if(process.env.QUICK_BUILD==="true")return;if(await c("release",["view"]),!await v("\nShould the release continue being made?"))await U1(!0),process.exit(1)}async function R3(){console.warn("Gathering build targets from:",X.yellowBright(Z1.resolve("build.conf.js")));const $=(await import(Z1.resolve("build.conf.js"))).BUILD_TARGETS;if(process.env.NODE_ENV="production",console.warn("Building environments",X.redBrightBold(JSON.stringify($))),!Array.isArray($))console.error("build.conf.js must be an array of string values"),process.exit(1);for(let Y of $)await C$(Y);await v$(),await f$(),await D$()}async function k3(){try{S1.removeSync(Z1.resolve("dist"))}catch($){console.warn("No dist folder to clean out.")}S1.ensureDirSync(Z1.resolve("dist"))}async function y3(){try{S1.removeSync(Z1.resolve("dist/test"))}catch($){console.warn("No test folder to clean out")}try{S1.removeSync(Z1.resolve("dist/unit-test"))}catch($){console.warn("No unit-test folder to clean out")}}async function j1(){console.warn("Validating the release..."),await E3(),console.warn("Clear previous build..."),await k3(),console.warn("Bundling project..."),await R3(),console.warn("Final cleanup..."),await y3(),console.warn("Release Build complete!")}var H0=M(()=>{O();D1();J0();J1();N$();S$();m$();g$()});var p$={};E(p$,{default:()=>R1});import l$ from"fs-extra";import P3 from"lodash/groupBy.js";import E1 from"path";import v3 from"lodash/uniq.js";import m3 from"lodash/upperFirst.js";import{compare as f3,inc as g3}from"semver";function l3($){const Y=$.toLowerCase().split("\n").map((K)=>(K.match(/## (\w+)/)||[])[1]).filter(Boolean);if(Y.includes("breaking"))return"major";if(Y.includes("added"))return"minor";return"patch"}async function c3($){console.warn("Building release notes..."),console.warn("fetching tags...");const Y=await A("git",["tag","--list"]);if(Y===null)console.error("Could not get git tags"),process.exit(1);const K=Y.trim().split("\n").sort(f3),Z=K[(K.includes($)?K.indexOf($):K.length)-1];console.warn("fetching version hash...");const G=await A("git",["rev-list","-1",`${$}`]);if(G===null)console.error("Couldn't get current version hash"),process.exit(1);const J=G.trim();console.warn("fetching previous version hash...");let Q=await A("git",["rev-list","-1",`${Z}`]);if(Q===null){if(Q=await A("git",["rev-list","--max-parents=0","HEAD"]),Q===null)console.error("Couldn't get previous version hash"),process.exit(1)}const z=Q.trim();console.warn("fetching logs...");const W=await A("git",["log","--pretty=%B",`${z}...${J}`]);if(W===null)console.error("Couldn't get logs"),process.exit(1);const L=W.split("\n").map((N)=>{const[,q="",H=""]=N.match(/^\s*(\w+?)\s*:\s*(.*)\s*$/)||[];return{tag:c$[q.toLowerCase()],message:m3(H)}}).filter((N)=>N.tag),B=P3(L,"tag"),D=h3.filter((N)=>B[N]).map((N)=>{const q=B[N];return`## ${N.replace(/(\w)/,(H)=>H.toUpperCase())}\n\n${q.map(({tag:H,message:I})=>`- [\`${H.toUpperCase()}\`]: ${I}`).join("\n")}`}).join("\n\n");return console.warn("New release notes completed"),D}async function R1($={}){if(console.warn("Generating Release Notes..."),await A("git",["fetch","--tags"])===null)console.error("Couldn't fetch tags"),process.exit(1);const K=d$(E1.resolve("package.json")),{version:Z="0.0.1"}=K;console.warn("Current Project version:",{currentVersion:Z});const G=await c3("HEAD"),J=l3(G),Q=J&&g3(Z,J);if(!Q)console.error("Unable to determine next version",{currentVersion:Z}),process.exit(1);if($.tag){if(console.warn("Creating the new tag..."),await A("git",["tag","-a",Q,"-m",`Release ${Q}`])===null)console.error("Couldn't create tag"),process.exit(1)}if($.updatePackage){console.warn("Updating the package.json...");const W=d$(E1.resolve("package.json"));W.version=Q,h$(E1.resolve("package.json"),`${JSON.stringify(W,null,"  ")}\n`)}const z=`## ${Q}\n\n${G}`;if(!G.trim()&&$.errorOnEmpty)throw new Error("No notes were generated as no semver style messages were found");if($.file){console.warn("Writing the release notes to file:",$.file);const W=E1.resolve($.file),L=u3(W)?d3(W):"";h$(W,`${`${z}\n\n${L}`.trim()}\n`);for(let D=0;D<=100;++D){if(l$.existsSync(W))break;if(D===100)console.warn("Release notes file was not created in time for the final release commit:",X.redBrightBold(W)),process.exit(1)}if(await S(1000),console.warn("Adding fragments to git..."),await A("git",["add","-A"])===null)console.warn("Could not ensure all fragments are added for the next commit."),process.exit(1);if(console.warn("Committing to git..."),await A("git",["commit","-am",`Release ${Q}`])===null)console.error("Couldn't commit changes"),process.exit(1);console.warn(`\n\n${X.cyan(z)}\n\n`)}else console.warn(`\n\n${X.cyan(z)}\n\n`);process.env.VITE_RELEASE_VERSION=Q}var u3,d3,d$,h$,c$,h3;var L0=M(()=>{O();p();({existsSync:u3,readFileSync:d3,readJSONSync:d$,writeFileSync:h$}=l$),c$={breaking:"breaking",feat:"added",feature:"added",added:"added",fix:"fixed",fixed:"fixed",hotfix:"fixed",task:"task"},h3=v3(Object.values(c$))});import M0 from"fs";import F0 from"path";async function _0($,Y){try{if(M0.statSync($).isFile()){if(Y)return Y.push($),Y;return[$]}const K=M0.readdirSync($);let Z=Y||[];for(let G of K)if(M0.statSync(F0.resolve($,G)).isDirectory())Z=await _0(F0.resolve($,G),Z);else Z.push(F0.resolve($,G));return Z}catch(K){if(K instanceof Error)console.error("getAllFiles Path:",$),console.error("getAllFiles Error:",K.message);throw K}}var i$=()=>{};async function k1($){return F("git",["ls-remote",$])}var b0=M(()=>{C()});async function n$($){const Y=await A("git",["remote","-v"]);if(Y===null)console.warn("Could not list remotes for the git project."),process.exit(1);const K=Y.split(/\r?\n/g),Z=K.find((J)=>J.indexOf($)>=0);if(!Z)console.warn(_`
      You MUST have a remote named ${$} which points to the repository you
      wish to deploy to.

      ${K.join("\n")}
    `),process.exit(1);const G=Z.split(/\s+/g)[1];if(!k1(G))console.warn(`
      You do not seem to have access to the repo listed in the package json of
      this project. Please ensure you have write access to the repo:
      ${G}
      and then try to run the release again.
    `),process.exit(1)}var s$=M(()=>{s();p();b0()});async function o$(){const $=await A("git",["rev-parse","--abbrev-ref","HEAD"]);if($===null){console.error("Failed to determine current branch.");return}return $.trim()||void 0}var a$=M(()=>{p()});var t$=async($,Y)=>{const K=await o$();if(!K)return console.warn("Could not determine current branch."),!1;if(await A("git",["checkout",`${Y}`])===null)return console.warn(`Could not checkout branch ${Y}`),!1;if(await A("git",["reset","--hard",`${$}/${Y}`])===null){if(console.warn(`Could not reset branch ${Y}`),await A("git",["checkout",`${K}`]))console.warn(`Could not return to original branch ${K}`);return!1}if(await A("git",["checkout",`${K}`])===null)return console.warn(`Could not return to original branch ${K}`),!1;return!0};var r$=M(()=>{p();a$()});import e$ from"fs-extra";import $9 from"path";async function Y9(){return e$.readJSONSync($9.resolve("package.json")).repository||{}}var K9=()=>{};var J9={};E(J9,{default:()=>G9});import y1 from"fs-extra";import B1 from"path";async function p3(){const $=await Y9(),Y=$.url;if(!$||!($.type!=="gitlab"||$.type!=="git"||$.type!=="bitbucket"||$.type!=="stash"))console.warn(`
      You MUST have a repository specified in your package json to use the
      release script. It must be of 'type: git' and have a valid ssh url to
      your git repo.

      Additionally, you MUST have a remote configured for your project of
      'origin' that matches the repo url listed in your package.json.

      Thus: "git remote -v" SHOULD output a line with
      origin <url in your package json repository field> (push)
    `),process.exit(1);const K=await A("git",["remote","-v"]);if(K===null)console.warn("Could not list remotes for the git project."),process.exit(1);const Z=K.split(/\r?\n/g);if(!Z.find((J)=>J.indexOf(n)>=0&&J.indexOf(Y)>=0))console.warn("Could not match package json repository to an origin remote in git CLI",{remoteListProcess:K,remotes:Z,ENSURE_REMOTE:n,ENSURE_REMOTE_PROJECT:Y}),process.exit(1);if(!k1(Y))console.warn(`
      You do not seem to have access to the repo listed in the package json of
      this project. Please ensure you have write access to the repo:
      ${Y}
      and then try to run the release again.
    `),process.exit(1);if(await $1())console.error("You have uncommitted changes or the current state of the project can not be determined. Please commit or stash them before continuing."),process.exit(1);console.warn("Repository validation complete")}async function i3(){if(!await await F("git",["checkout","release"])){if(!await F("git",["checkout","-b","release"]))console.warn("Could not switch to the release branch. Make sure the branch exists locally."),process.exit(1)}if(!await F("git",["fetch",`${n}`]))console.warn("Could not fetch from remote servers."),process.exit(1);if(!await F("git",["reset","--hard",`${n}/dev`]))console.warn("Could not reset branch to dev"),process.exit(1);console.warn("Checked out release branch and updated to dev")}function n3(){try{const Y=y1.readFileSync(B1.resolve("RELEASE_NOTES.md"),"utf8").toLowerCase().split("\n").map((K)=>(K.match(/## (\w+)/)||[])[1]).filter(Boolean);if(Y.includes("breaking"))return"major";if(Y.includes("added"))return"minor";return"patch"}catch($){console.error("Could not determine release type after release was created"),process.exit(1)}}async function s3($){const Y=await T();if(!await F("git",["add","-A"]))console.warn("Could not ensure all fragments are added for the next commit."),process.exit(1);const K=B1.resolve("dist/stories");_0(K),await S(500),await R1({file:"RELEASE_NOTES.md",updatePackage:!0});const Z=await T();if(Y===Z)console.warn(`
      The release script did not detect any changes for a release. If you find
      this to be in error or you want to force a new release. Make some commits
      with proper release note formatted messages to trigger a release.
    `),process.exit(1);if($){if(n3()!=="patch")console.error(`
        Cannot create a release for an alternate branch that is not a simple
        patch. Features and breaking changes can ONLY be made on the main branch of
        development.
      `),process.exit(1)}const G=await A("git",["log","-1","--pretty=%B"]);if(G===null)console.warn("Could not read the last commit version information"),process.exit(1);const J=(G.trim().toLowerCase().split("release ")[1]||"").trim();if(!J)console.warn("Could not determine release version from the last commit:\n\n",G.toString(),"\n\n"),process.exit(1);if(y1.existsSync(B1.resolve("ui/release.json"))){try{const Q=y1.readJSONSync(B1.resolve("ui/release.json"));Q.version=J,y1.writeJSONSync(B1.resolve("ui/release.json"),Q)}catch(Q){console.warn("Could not update the release.json file with current library version."),process.exit(1)}if(!await F("git",["add","-A"]))console.warn("Could not ensure the release json was updated for the new version."),process.exit(1);if(!await F("git",["commit","--amend","--no-edit"]))console.warn("Could not amend the release commit to include the release json file."),process.exit(1)}if(J.includes('"'))console.warn("The update version generated is invalid as it contains invalid characters",{version:J}),process.exit(1);return console.warn("Updating version to",{version:J}),J}async function o3($){if(!await F("git",["tag","-a",$,"-m",`Release ${$}`]))console.warn("Could not make tag for git commit"),process.exit(1)}async function Z9($,Y,K,Z,G){if(!await F("git",["push",G?"-f":void 0,$,`${K}:${Z}`]))console.warn(`Could not push release commit to ${$}`),process.exit(1);if(!await F("git",["push",$,Y]))console.warn("Could not push tag to the remote repository"),process.exit(1)}async function a3($,Y){if($&&$.length>0){if(!await v(_`
        The build and release was successful, would you like to release to the
        specified additional remotes?

        ${X.cyanBrightBold($.join("\n"))}
      `))return}if(!await F("git",["fetch",n]))console.warn("Could not fetch from remote servers."),process.exit(1);for(let K of $){const[Z,G,J,Q]=K.split(":");await n$(Z),await t$(n,G||"master"),await Z9(Z,Y,G||"master",J||"master",Q==="force")}}async function t3($){process.env.NODE_ENV="production",await p3(),await i3(),await j1();const Y=await s3();if(await o3(Y),await Z9(n,Y,"release","release",!0),await v("Would you like to run pr release?"))await c("pr",["release"]);await a3($,Y),await U1(!0),process.exit(0)}async function G9($){console.warn("Executing release script"),t3($)}var n="origin";var Q9=M(()=>{H0();L0();O();s();D1();C();p();i$();b0();s$();I1();J0();r$();J1();K9();m()});var z9={};E(z9,{default:()=>X9});async function X9(){await w1()}var W9=M(()=>{W0()});var q0={};E(q0,{default:()=>H9});import g from"fs-extra";import r3 from"ignore";import j from"path";async function e3($){const Y=g.readJSONSync(j.resolve("tsconfig.json"));if(Y.exclude=Y.exclude||[],Y.include=(Y?.include||[]).filter((Z)=>!P1.ignores(j.relative("./",Z))),g.writeJSONSync(j.resolve("tsconfig.temp.json"),Y),await S(500),$==="watch"){const Z=async()=>{console.warn("Exit TS process");try{g.removeSync(j.resolve("tsconfig.temp.json"))}catch(G){}process.exit(0)};process.on("exit",Z),process.on("SIGINT",Z),process.on("SIGUSR1",Z),process.on("SIGUSR2",Z),process.on("SIGTERM",Z),process.on("uncaughtException",Z)}if(!F("tsc",["-d",$==="watch"?"--watch":"","--incremental","--noemit","--pretty","--tsBuildInfoFile",j.resolve("node_modules/.cache/tsc/tsc.tsbuildinfo"),"--outDir",j.resolve("dist"),"--project",j.resolve("tsconfig.temp.json")]))console.warn("Failed to compile type declarations"),g.removeSync(j.resolve("tsconfig.temp.json")),process.exit(1);const K=(Y?.include||[]).filter((Z)=>!P1.ignores(j.relative("./",Z))).map((Z)=>j.resolve(Z)).filter((Z)=>g.existsSync(Z)&&!Z.includes("node_modules"));if(K.length>0){if(!F("eslint",[...K,"-c",j.resolve(".eslintrc"),"--ext",".ts","--ext",".tsx"]))console.warn("Failed eslint checks."),g.removeSync(j.resolve("tsconfig.temp.json")),process.exit(1)}g.removeSync(j.resolve("tsconfig.temp.json"))}async function H9($){await e3($)}var B9,P1;var D0=M(()=>{C();B9=j.resolve(".gitignore"),P1=r3.default();if(g.existsSync(B9))P1=P1.add(g.readFileSync(B9).toString())});var M9={};E(M9,{default:()=>L9});async function L9(){console.warn(X.yellowBrightBold("Starting server...")),await X1()}var F9=M(()=>{i1();O()});var N9={};E(N9,{default:()=>D9});import $4 from"fs-extra";import N0 from"path";async function q9($){if(!$4.existsSync($))return console.warn("Attempted to start a server but no server distribution was found at",$),!1;return await F("bun",[`${$}`]),!0}async function _9(){const $=N0.resolve("docs/index.js");return await q9($)}async function b9(){process.env.RESOURCE_PATH=N0.resolve("dist/app/client");const $=N0.resolve("dist/app/server/index.js");return await q9($)}async function D9($,Y){const{PORT:K="80"}=process.env;process.env.PORT=K;let Z=!1;switch($){case"app":Z=await b9();break;case"devops":Z=await _9();break;default:if($)console.warn("Invalid target for start script specified",$);break}if(!Z){if(Z=await b9(),Z)return;if(Z=await _9(),Z)return}}var A9=M(()=>{C()});import Y4 from"fs-extra";import A0 from"path";async function O9(){const $=A0.resolve("tsconfig.json");if(!Y4.existsSync($))throw new Error("Target project does not have a TSConfig");const Y=Boolean(process.env.DEBUG),K=process.env.PATTERN,Z=process.env.WATCH,G=process.env.LESS,J=A0.resolve("jest.config.js");F.silent=!0;try{if(Y)F("node",["--inspect-brk",A0.resolve("node_modules/.bin/jest"),"--runInBand",Z?"--watchAll":"","--verbose",G==="true"?"false":void 0,"--colors","--config",J,K?`--testNamePattern ${K}`:""]);else K1(["jest",Z?"--watchAll":"","--verbose",G==="true"?"false":void 0,"--colors","--config",J,K?`--testNamePattern=${K}`:""],{excludeBunFlag:!0})}catch(Q){console.warn("Tests failed. Please look at logs to see the errors discovered")}console.warn(X.cyanBright("Tests complete"))}var x9=M(()=>{O();z0();C()});var U9={};E(U9,{default:()=>I9});async function I9(){console.warn("Running unit tests..."),await O9()}var V9=M(()=>{x9()});var j9={};E(j9,{default:()=>S9});import T9 from"fs";import w9 from"path";import C9 from"rimraf";async function S9(){const $=w9.resolve("./node_modules/.cache/"),Y=w9.resolve("./build");if(T9.existsSync($))C9.sync($),console.warn("Cache: Clean complete");else console.warn("Cache: Already clean");if(T9.existsSync(Y))C9.sync(Y),console.warn("Build: Clean complete");else console.warn("Build: Already clean");if(await F("bun",["pm","cache","rm"]))console.warn("Bun: Clean complete");else console.warn("Bun: Already clean")}var E9=M(()=>{C()});import R9 from"path";import{createRequire as K4}from"module";async function v1($,Y){const G=K4(import.meta.url).resolve($).split("node_modules"),J=G[0],Q=G[1].split(R9.sep)[1];return R9.join(J,"node_modules",Q,"node_modules",".cache",Y)}var k9=()=>{};var P9={};E(P9,{default:()=>y9});import Z4 from"fs-extra";import G1 from"path";import G4 from"url";async function J4($,Y,K){const Z=await import("puppeteer"),G=await v1("puppeteer","pr-release"),J=await Z.launch({headless:!1,userDataDir:G1.resolve(H1,G),defaultViewport:null}),Q=await J.newPage();console.warn("Opening project url..."),await Q.goto($);const z=await Q.evaluate(()=>document.body.getAttribute("data-project-id"));if(!z){console.warn("No project id found, User login required...");let L=!0;J.on("disconnected",()=>{if(!L)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)}),await Q.goto($),await Q.waitForFunction(()=>{const B=document?.body?.getAttribute("data-project-id");return B!==null&&B!==void 0},{timeout:0}),await Q.close(),L=!1}else await Q.close();console.warn("Project ID found:",z,"\nOpening merge request...");const W=async(L,B,D)=>{const N=await J.newPage();await N.goto(`${$}/-/merge_requests/new?${D?"utf8=%E2%9C%93&":""}merge_request%5Bsource_project_id%5D=${z}&merge_request%5Bsource_branch%5D=${encodeURIComponent(L)}&merge_request%5Btarget_project_id%5D=${z}&merge_request%5Btarget_branch%5D=${B}`),await N.waitForFunction(()=>{const q=document.querySelector("#merge_request_title");return q!==null&&q!==void 0},{timeout:0}),await N.evaluate((q)=>{let H=document.querySelector("#merge_request_title");if(H)H.value=`Release ${q}`;if(H=document.querySelector("#merge_request_description"),H)H.value=`Release ${q}`;if(H=document.querySelector("#merge_request_force_remove_source_branch"),H)H.checked=!1,H.value="0"},Y),await new Promise((q)=>{N.on("close",()=>{q(void 0),console.warn("Gitlab ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([W("release","dev"),W("release",K)]),J.close()}async function O0($,Y,K,Z){const G=await import("puppeteer"),J=await v1("puppeteer","pr-release");let Q=await G.launch({headless:!Z,userDataDir:G1.resolve(H1,J),defaultViewport:null});const z=await Q.newPage();if(Z){console.warn("User login required...");let D=!0;Q.on("disconnected",()=>{if(!D)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)});const N="https://github.com/login";console.warn("Opening github login page: ",N),await z.goto(N),await z.waitForFunction(()=>{const q=document?.body?.getAttribute("class")?.split(" ").find((H)=>H.startsWith("logged-in"));return q!==null&&q!==void 0},{timeout:0}),D=!1}else console.warn("Opening project url: ",$),await z.goto($);console.warn("Checking for logged-in attribute on body...");const W=await z.evaluate(()=>{return console.warn("logged-in check:",document?.body?.getAttribute("class")?.split(" ").find((D)=>D.startsWith("logged-in"))),document?.body?.getAttribute("class")?.split(" ").find((D)=>D.startsWith("logged-in"))});if(console.warn("Loggin in check:",W),!W&&Z)await Q.close(),console.error("Failed to log in the user for github."),process.exit(1);else if(!W){console.warn("Logged-in not found on body, login might be needed..."),await Q.close(),O0($,Y,K,!0);return}else Q.close();const L={headless:!1,userDataDir:G1.resolve(H1,J),defaultViewport:null};Q=await G.launch(L);const B=async(D,N)=>{const q=await Q.newPage();await q.goto(`${$}/compare/${N}...${D}`),await q.waitForFunction(()=>{const H=document.querySelector("#repo-content-pjax-container > div > div.js-details-container.Details.js-compare-pr > div > button");return H?.click(),H!==null&&H!==void 0}),await q.evaluate(async(H)=>{let I=document.querySelector("#pull_request_title");if(I)I.value=`Release ${H}`;if(I=document.querySelector('[name="pull_request[body]"]'),I)I.value=`Release ${H}`},Y),await new Promise((H)=>{q.on("close",()=>{H(void 0),console.warn("Github ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([B("release","dev"),B("release",K)]),Q.close()}async function Q4($,Y,K,Z){const G=await import("puppeteer"),J=await v1("puppeteer","pr-release");let Q=await G.launch({headless:!Z,userDataDir:G1.resolve(H1,J),defaultViewport:null});const z=await Q.newPage();if(Z){console.warn("User login required...");let D=!0;Q.on("disconnected",()=>{if(!D)return;console.warn("Browser was closed or crashed. Try the command again."),process.exit(1)});const N=$;console.warn("Opening azure repo login page: ",N),await z.goto(N),await z.waitForFunction(()=>{const q=window.sessionStorage.msameid;return q!==null&&q!==void 0},{timeout:0}),D=!1}else console.warn("Opening project url: ",$),await z.goto($);console.warn("Checking for logged-in attribute on body...");const W=await z.evaluate(()=>{return console.warn("logged-in check:",window.sessionStorage.msameid),window.sessionStorage.msameid});if(console.warn("Loggin in check:",W),!W&&Z)await Q.close(),console.error("Failed to log in the user for azure."),process.exit(1);else if(!W){console.warn("MS id not found, login might be needed..."),await Q.close(),O0($,Y,K,!0);return}else Q.close();const L={headless:!1,userDataDir:G1.resolve(H1,J),defaultViewport:null};Q=await G.launch(L);const B=async(D,N)=>{const q=await Q.newPage();await q.goto(`${$}&sourceRef=${D}&targetRef=${N}`),await q.waitForFunction(()=>{const H=document.querySelector("button.primary");return H!==null&&H!==void 0}),await q.evaluate(async(H)=>{let I=document.querySelector('[aria-label="Enter a title"]');if(I)I.value=`Release ${H}`;if(I=document.querySelector('[aria-label="Description"]'),I)I.value=`Release ${H}`},Y),await new Promise((H)=>{q.on("close",()=>{H(void 0),console.warn("Azure project ticket process finished\n\n")})})};console.warn("\n\nWaiting for browser windows to be closed...\n\n"),await Promise.all([B("release","dev"),B("release",K)]),Q.close()}async function y9($,Y,K="master",...Z){if(!(new Set(["gitlab","git","github","azure"])).has(Y))console.error(`Unsupported repo type: ${Y}`),process.exit(1);if(await $1())console.error("You have uncommitted changes or the current state of the project can not be determined. Please commit or stash them before continuing."),process.exit(1);const Q=Z4.readJsonSync(G1.resolve("package.json")).version;switch(Y){case"gitlab":await J4($,Q,K);break;case"git":case"github":await O0($,Q,K);break;case"azure":await Q4($,Q,K);break;default:console.warn("No supported repo type found")}}var H1;var v9=M(()=>{k9();I1();H1=G4.fileURLToPath(new URL(".",import.meta.url))});O();import*as X4 from"commander";import z4 from"inquirer-autocomplete-prompt";import W4 from"inquirer";import m9 from"path";import B4 from"yargs";O();s();import j0 from"fs-extra";import E0 from"path";O();import V0 from"fs";import T0 from"path";function U0($){const Y=$.split(/\r?\n/),K={};let Z=null,G=null;return Y.forEach((J)=>{if(J=J.trim(),J===""||J.startsWith("#"))return;if(J.endsWith("{")){Z=J.split(/\s+/)[0],K[Z]={};return}if(J==="}"){Z=null,G=null;return}const Q=J.match(/^([\w.]+)\s*=\s*(.*)$/);if(Q){const W=Q[1];let L=Q[2];if(!isNaN(parseFloat(L)))L=parseFloat(L);else if(L==="true")L=!0;else if(L==="false")L=!1;if(G)K[Z??"null"][G][W]=L;else if(Z)K[Z][W]=L;else K[W]=L;return}const z=J.match(/^([\w.]+)\.([\w.]+)\s*=\s*(.*)$/);if(z){const W=z[1],L=z[2],B=z[3];if(!K[W])K[W]={};if(!K[W][L])K[W][L]={};K[W][L][B]=null,Z=W,G=L;return}console.error(`Unrecognized line: ${J}`)}),K}function w0($){try{if(!V0.existsSync(T0.resolve(".env")))return;const Y=V0.readFileSync(T0.resolve($||".env"),"utf8"),K=U0(Y);Object.entries(K).forEach(([Z,G])=>{if(typeof G==="string")process.env[Z]=G;else if(typeof G==="number")process.env[Z]=G.toString();else if(typeof G==="boolean")process.env[Z]=G.toString()})}catch(Y){if(Y instanceof Error)console.error(X.red("Error reading .env file:\n",X.yellow(Y.stack||Y.message)))}}J1();import s9 from"fs-extra";import o9 from"inquirer";import{stripIndent as a9}from"common-tags";async function S0($,Y,K,Z,G,J){let Q=J||!1;if(s9.existsSync($)){const{result:z}=await o9.prompt([{type:"confirm",name:"result",message:a9`${Y}`,default:J}]);if(z)K($),G?.($);Q=z}else K($),Z?.($);return Q}async function t9(){const $=(await import(E0.resolve("env.config.ts"))).default;if(!$)throw new Error("No env.config.ts file found.");if(!Array.isArray($))console.error("env.config.ts is not formatted correctly. Please follow the correct type convention.");return $}async function g1($){w0();try{const Y=await t9(),K=[],Z=[];if(Y.forEach((G)=>{if(!G)return;if(G.required){if(!process.env[G.name])K.push(_`
              Missing: ${G.name}\nDesription: ${G.description}
            `)}else if(!process.env[G.name]&&G.warn!==!1)Z.push(_`
              Missing: ${G.name}\nDesription: ${G.description}
            `)}),Z.length>0)console.warn(X.yellowBrightBold("The following environment variables are recommended but missing from your environment:\n")),console.warn(X.yellowBright(_`
          ${Z.join("\n")}
        `));if(K.length>0)console.error(X.redBrightBold("The following environment variables are required but missing from your environment:\n")),console.error(X.redBright(_`
          ${K.join("\n")}
        `));if(K.length>0){if($){if(await v(_`
          There seems to be some missing environment variables. Would you like
          to generate a .env file with the default values specified in the
          env.config file?
        `)){const J=[];for(let L of Y)J.push([L.name,C0(L.default)?L.default:R(L.default)?await L.default():void 0]);const Q=J.filter((L)=>L[1]).map((L)=>`${L[0]}=${L[1]}`).join("\n");if(!Q)console.warn(_`
              There are no defaults available for this env.config. So we can not
              generate an env file you. Please review the env.config.ts file and
              properly set the default values for the required environment
              variables.
            `);const z=E0.resolve(".env");if(!await S0(z,_`
              There appears to already be a .env file.
              Would you like to add the missing defaults to it?
            `,()=>{},()=>j0.writeFile(z,Q),()=>{j0.appendFileSync(z,`\n${Q}`)},!1))console.error("Did not write the .env file. Please correct the env and try again."),process.exit(1);return console.warn("Attempting to build the env again and continue with the command..."),g1(!1)}}process.exit(1)}}catch(Y){console.warn(_`
      No ${X.cyanBrightBold("env.config.ts")} file found. Environment will not be validated.
    `)}}s();import e9 from"fs-extra";import y0 from"inquirer";import $3 from"path";C();o();async function a($,Y,K){const Z=await k(),G=$.filter(R);return console.warn("WILL FORCE INSTALL:",Z[0]==="bun"?"--force":null),await F(Z[0],["i",Z[0]==="bun"?"--force":null,K?"--no-save":null,Y?`-${Y}`:null,...G].filter(R))}C();import r9 from"fuzzy";var R0=($)=>async(Y,K)=>{let Z=[];if($ instanceof Set)Z=Array.from($);else Z=$;return r9.filter(K||"",Z).map((G)=>G.string)};o();async function k0($){try{return await import($),!0}catch(Y){return console.error("Requested package is not available in this current project:",$),!1}}async function P0($,Y){const K=$||["puppeteer"];for(let Z of K)if(console.warn("Checking on dependency availability:",Z),!await k0(Z)){let J=Y;if(!J)J=(await y0.prompt([{type:"autocomplete",name:"resolution",message:`How do you want to resolve the missing package "${Z}":`,source:R0(["Install once to current project","Install in parent directory (Makes package available to all peer projects)","Do Nothing (this will end this current process as the package is required)"])}])).resolution;switch(J){case"Install to current project":await a([Z],"E");break;case"Install once to current project":a([Z],"E",!0);break;case"Install in parent directory (Makes package available to all peer projects)":{const Q=process.cwd();process.chdir("..");const z=await k();if(!e9.existsSync($3.resolve("package.json")))F(z[0],["init","-y"]);await a([Z],"E"),process.chdir(Q),await S(100);break}default:process.exit(1)}}}function x0(){return m1.debug=w.debug,m1.verbose=w.verbose,m1.pattern=w.pattern,m1}async function D4(){await g1(!0),w.parse(process.argv)}W4.registerPrompt("autocomplete",z4);var{Command:H4}=X4,w=new H4,m1={};w.version("0.0.1");w.option("-v, --verbose","Outputs more detailed information during crashes.");w.option("--debug [param]",_`
    Provides debugging contextual information various commands might use to
    aid in developing Devops.
  `);w.option("-p, --pattern [param]",_`
    Provides a pattern for certain operations to utilize. This is primarily
    used by unit tests to filter tests to specified tests.
  `);var f9=w.command("dev").description(_`
    These are the commands associated with starting up developer environments
    for various project types or portions of a project.
  `);f9.command("vite").description(_`
      Starts up a developer environment that performs incremental builds while
      developing within the lib and app folders. Uses vite and vite
      config.
    `).action(async()=>{(await Promise.resolve().then(() => (c0(),l0))).default().catch(($)=>{console.warn("dev-vite process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});f9.command("storybook").option("-i, --include <include...>","Additional storybook modules to load into storybook. These are the names of properly formatted dependencies installed into node_modules.").description(_`
      Starts a storybook instance for developing the UI components of the
      project. This makes the "ui/stories" folder in the project the expected
      development point.
    `).action(async({include:$})=>{(await Promise.resolve().then(() => (a1(),o1))).default("",$,m9.resolve(process.cwd()),x0()).catch((Y)=>{console.warn("storybook process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var L4=w.command("storybook");L4.command("run").option("-i, --include <include...>","Additional storybook modules to load into storybook. These are the names of properly formatted dependencies installed into node_modules.").description(_`
      Starts a storybook instance for developing the UI components of the
      project. This makes the "ui/stories" folder in the project the expected
      development point.
    `).action(async({include:$})=>{(await Promise.resolve().then(() => (a1(),o1))).default("",$,m9.resolve(process.cwd()),x0()).catch((Y)=>{console.warn("storybook process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});w.command("url [uri...]").description(_`
      Simple command to open a specified URL in the browser.
    `).action(async($)=>{(await Promise.resolve().then(() => (b$(),_$))).default($).catch((Y)=>{console.warn("url process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var L1=w.command("release").description(_`
    These commands are used for facilitating distribution releases of
    applications. This includes tools for building th dist folder fragments,
    viewing the expected release notes, and actually performing a complete
    release cycle.
  `);L1.command("deploy [add-remote...]").description(_`
      Performs actions necessary to update the distribution of the project.
      This will automatically update release notes, tag the release, and
      commit and push to a 'release' branch which will be ready for merging
      into master and dev.

      Specify additional remotes to deploy to via the add-remote option.
      This will deploy the release to additional remotes (AFTER all other normal
      deploy operations complete). This value is the NAME of the remote as it
      appears when you perform a "git remote -v" command.

      You can specify a specific target branch via a colon: remote:branch
      Otherwise, this will use the same main branch as configured for this
      project.
    `).action(async($)=>{a([]),(await Promise.resolve().then(() => (Q9(),J9))).default($).catch((Y)=>{console.warn("release-deploy process exited unexpectedly\n",Y.stack||Y.message),process.exit(1)})});L1.command("types").description(_`
      Updates JUST the types in the dist folder. These are the same types
      generated when building a release.
    `).action(async()=>{(await Promise.resolve().then(() => (W9(),z9))).default().catch(($)=>{console.warn("release-types process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});L1.command("view").description(_`
      This runs the release-view script. For this case, it will only display
      the release notes in the console. Actual generated release notes are a
      part of the release process.
    `).action(async()=>{(await Promise.resolve().then(() => (D0(),q0))).default("").then(async()=>{console.warn(X.cyanBrightBold("TS check passed, generating notes...")),(await Promise.resolve().then(() => (L0(),p$))).default().catch(($)=>{console.warn("release-notes process exited unexpectedly",$.stack||$.message),process.exit(1)})}).catch(($)=>{console.warn(X.redBrightBold(_`
              Failed TS check. Release notes will not be produced until all TS
              errors are resolved.
            `)),console.warn($.stack||$.message),process.exit(1)})});L1.command("build").description(_`
      This runs the release-build script. This generates all of the release
      fragments. This should ONLY be used for testing and experimenting. Actual
      release fragments should be properly created and deployed using the
      release deploy command.
    `).action(async()=>{(await Promise.resolve().then(() => (H0(),u$))).default().catch(($)=>{console.warn("release-deploy process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});var M4=L1.command("start").description(_`
      This starts up released related processes. This includes things like
      starting up the dev server without any additional builds or auto
      configuration for development.
    `);M4.command("server").description(_`
      Starts up the app server without any additional builds etc. Use the
      environments:

        BUILD_MODE: Targets an env to run the server for.
        RESOURCE_PATH: The path to the static files to serve.
    `).action(async()=>{(await Promise.resolve().then(() => (F9(),M9))).default().catch(($)=>{console.warn("release-start-server process exited unexpectedly\n",$.stack||$.message),process.exit(1)})});w.command("start [target]").description(_`
      This fires up a server to make any static content available for being
      served.
      There are a few options for what content will be served by this script:

      - The web app
      - Devops API

      The start script will automatically pick the web app over the devops
      files, but you can specify a target if you have a devops API and a web
      app:

      - app
      - devops
    `).action(async($)=>{(await Promise.resolve().then(() => (A9(),N9))).default($,x0()).catch((Y)=>{console.warn("start process exited unexpectedly"),console.warn(Y.stack||Y.message),process.exit(1)})});var F4=w.command("test").description(_`
    These commands are used for running tests. This includes tools for
    running unit tests a single time or in a watch mode.

    Use the environment variables for modifying behavior:

    ${X.yellowBrightBold("PATTERN")} - This causes the tests to only run on
    files that match the pattern

    ${X.yellowBrightBold("LESS")} - This removes the verbose output list of
    all tests ran
  `);F4.command("run").description(_`
      Runs all unit tests in the unit-test folder once.
    `).action(async()=>{(await Promise.resolve().then(() => (V9(),U9))).default().catch(($)=>{console.warn("test-run process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var _4=w.command("clean").description(_`
    Common cleaning tools for various fragments within the project.
  `);_4.command("cache").description(_`
      Cleans out build and cache files to help ensure a complete rebuild takes
      place.
    `).action(async()=>{(await Promise.resolve().then(() => (E9(),j9))).default().catch(($)=>{console.warn("clean-cache process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var b4=w.command("ts").description(_`
    These commands are used for running typescript. This includes tools for
    running typescript compilation a single time or in a watch mode.
  `);b4.command("run").description(_`
      Runs typescript compilation to check for errors. Does NOT emit files, thus
      is a good mechanism for checking a build before running a release.
    `).action(async()=>{(await Promise.resolve().then(() => (D0(),q0))).default("").catch(($)=>{console.warn("ts process exited unexpectedly"),console.warn($.stack||$.message),process.exit(1)})});var q4=w.command("pr").option("--repoUrl <value>",_`
      The https URL to the repo to make the PR into
    `).option("--repoType <value>",_`
    The repository type to make the PR into. Supported types are: git, gitlab
  `).option("--masterBranch <value>",_`
    This indicates which branch is the master/main of the repository.
  `);q4.command("release").description(_`
      This creates two PRs that merges the current remote release branch into
      the remote dev and master branches.
    `).action(async()=>{const{repoUrl:$,repoType:Y,masterBranch:K}=B4(process.argv).argv;if(!$||!Y||!K)console.warn("You must specify both --repoUrl and --repoType to use this command"),process.exit(1);await P0().catch(()=>process.exit(1)),console.warn("Dependency checks passed, continuing..."),(await Promise.resolve().then(() => (v9(),P9))).default($,Y,K).catch((Z)=>{console.warn("pr-release process exited unexpectedly"),console.warn(Z.stack||Z.message),process.exit(1)})});D4();

//# debugId=5F90DDCCC55BCBAD64756E2164756E21
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiYmluL2xpYi91dGlsL2NoYWxrLnRzIiwgImJpbi9saWIvdXRpbC9kZXNjcmlwdGlvbi50cyIsICJiaW4vbGliL3V0aWwvdHlwZXMudHMiLCAiYmluL2xpYi9wcm9tcHQvcHJvbXB0LWNvbmZpcm0udHMiLCAiYmluL2xpYi91dGlsL2lzLWNoaWxkLXByb2Nlc3MtZXJyb3IudHMiLCAiYmluL2xpYi9leGVjL2V4ZWMtc3luYy50cyIsICJiaW4vbGliL2V4ZWMvZ2V0LXBhY2thZ2UtbWFuYWdlci50cyIsICJiaW4vbGliL3V0aWwvd2FpdC50cyIsICJiaW4vbGliL2J1aWxkL2J1aWxkLXZpdGUtY29uZmlnLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtZGVwZW5kZW5jaWVzLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi50cyIsICJiaW4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9idWlsZC1jbGllbnQudHMiLCAiYmluL2xpYi91dGlsL2hhbmRsZS1wcm9jZXNzLWV4aXQudHMiLCAiYmluL2xpYi91dGlsL2xvZy1xdWV1ZS50cyIsICJiaW4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9ydW4tYXBwLXNlcnZlci50cyIsICJiaW4vY29tbWFuZHMvZGV2L2Rldi12aXRlLnRzIiwgImJpbi9saWIvZGV2b3BzLXByb2plY3QvZGV2b3BzLXByb2plY3QtcGF0aC50cyIsICJiaW4vbGliL2V4ZWMvZXhlYy1zY3JpcHQudHMiLCAiYmluL2NvbW1hbmRzL3N0b3J5Ym9vay50cyIsICJub2RlX21vZHVsZXMvaXMtZG9ja2VyL2luZGV4LmpzIiwgIm5vZGVfbW9kdWxlcy9pcy13c2wvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL2RlZmluZS1sYXp5LXByb3AvaW5kZXguanMiLCAibm9kZV9tb2R1bGVzL29wZW4vaW5kZXguanMiLCAiYmluL2xpYi9leGVjL2V4ZWMtc3luYy1yZXN1bHQudHMiLCAiYmluL2xpYi91dGlsL3RlbXBsYXRlLnRzIiwgImJpbi9jb21tYW5kcy91cmwudHMiLCAiYmluL2xpYi9naXQvZ2l0LWhhcy1jaGFuZ2VzLnRzIiwgImJpbi9saWIvZ2l0L2dpdC1yZXR1cm4tdG8tZGV2LnRzIiwgImJpbi9saWIvYnVpbGQvYmluL3JlbGVhc2UtYmluLnRzIiwgImJpbi9zaGltL3ZpdGUtcGx1Z2lucy92aXRlLWRldm9wcy1zdHJpbmctcmVwbGFjZS1wbHVnaW4udHMiLCAiYmluL3NoaW0vdml0ZS1wbHVnaW5zL3ZpdGUtZGV2b3BzLWFwcC1jb25maWctcGx1Z2luLnRzIiwgImJpbi9saWIvYnVpbGQvd2ViLWFwcC92aXRlL3JlbGVhc2UtY2xpZW50LnRzIiwgImJpbi9saWIvZXhlYy9leGVjLXNjcmlwdHgudHMiLCAiYmluL2xpYi9idWlsZC9saWJyYXJ5L3ZpdGUvcmVsZWFzZS1saWJyYXJ5LXR5cGVzLnRzIiwgImJpbi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtbmFtZS50cyIsICJiaW4vbGliL2J1aWxkL2xpYnJhcnkvdml0ZS9yZWxlYXNlLWxpYnJhcnkudHMiLCAiYmluL2xpYi9idWlsZC9saWJyYXJ5L3JlbGVhc2Utc3Rvcmllcy50cyIsICJiaW4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLWJ1aWxkLnRzIiwgImJpbi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2Utdmlldy50cyIsICJiaW4vbGliL2ZpbGUtbWFuYWdlbWVudC9nZXQtYWxsLWZpbGVzLnRzIiwgImJpbi9saWIvZ2l0L2dpdC1jYW4tYWNjZXNzLXJlbW90ZS50cyIsICJiaW4vbGliL2dpdC9naXQtZW5zdXJlLXJlbW90ZS50cyIsICJiaW4vbGliL2dpdC9naXQtY3VycmVudC1icmFuY2gudHMiLCAiYmluL2xpYi9naXQvZ2l0LXVwZGF0ZS1icmFuY2gudHMiLCAiYmluL2xpYi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC1yZXBvLnRzIiwgImJpbi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2UtZGVwbG95LnRzIiwgImJpbi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2UtdHlwZXMudHMiLCAiYmluL2NvbW1hbmRzL3RzLnRzIiwgImJpbi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2Utc3RhcnQtc2VydmVyLnRzIiwgImJpbi9jb21tYW5kcy9zdGFydC50cyIsICJiaW4vbGliL3VuaXQtdGVzdC9ydW4tdGVzdHMudHMiLCAiYmluL2NvbW1hbmRzL3Rlc3QvdGVzdC1ydW4udHMiLCAiYmluL2NvbW1hbmRzL2NsZWFuL2NsZWFuLWNhY2hlLnRzIiwgImJpbi9saWIvdXRpbC9wYWNrYWdlLWNhY2hlLXBhdGgudHMiLCAiYmluL2NvbW1hbmRzL3ByL3ByLXJlbGVhc2UudHMiLCAiYmluL21haW4tZ2ltcC50cyIsICJiaW4vbGliL3V0aWwvY29uZmlnLWVudi50cyIsICJiaW4vbGliL3V0aWwvZG90LWVudi50cyIsICJiaW4vbGliL3V0aWwvcGFyc2UtcHJvcHMudHMiLCAiYmluL2xpYi9wcm9tcHQvcHJvbXB0LW92ZXJyaWRlLWZpbGUudHMiLCAiYmluL2NvbW1hbmRzL2Vuc3VyZS1kZXBlbmRlbmNpZXMudHMiLCAiYmluL2xpYi9leGVjL2V4ZWMtaW5zdGFsbC50cyIsICJiaW4vbGliL3V0aWwvZnV6enktc291cmNlLnRzIiwgImJpbi9saWIvdXRpbC9pcy1wYWNrYWdlLWF2YWlsYWJsZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsKICAgICJleHBvcnQgY29uc3QgY2hhbGsgPSB7XG4gIGN5YW46ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzM2bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHJlZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgeWVsbG93OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlszM20ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBncmVlbjogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMzJtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmx1ZTogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMzRtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgbWFnZW50YTogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMzVtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgY3lhbkJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTZtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgcmVkQnJpZ2h0OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls5MW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICB5ZWxsb3dCcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzkzbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGdyZWVuQnJpZ2h0OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls5Mm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBibHVlQnJpZ2h0OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls5NG0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBtYWdlbnRhQnJpZ2h0OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls5NW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICB3aGl0ZUJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTdtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JheTogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTBtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JleTogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTBtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgd2hpdGU6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzM3bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJsYWNrOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlszMG0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBibGFja0JyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbOTBtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdDeWFuOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls0Nm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ1JlZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbNDFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdZZWxsb3c6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzQzbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnR3JlZW46ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzQybSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnQmx1ZTogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbNDRtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdNYWdlbnRhOiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYls0NW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ0N5YW5CcmlnaHQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzEwNm0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBiZ1JlZEJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMTAxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnWWVsbG93QnJpZ2h0OiAoLi4udGV4dDogc3RyaW5nW10pID0+IGBcXHgxYlsxMDNtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmdHcmVlbkJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMTAybSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnQmx1ZUJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMTA0bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGJnTWFnZW50YUJyaWdodDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMTA1bSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIGN5YW5CcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzk2bVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgcmVkQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5MW1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHllbGxvd0JyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTNtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBncmVlbkJyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTJtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBibHVlQnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5NG1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIG1hZ2VudGFCcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzk1bVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgd2hpdGVCcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzk3bVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgZ3JheUJyaWdodEJvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT5cbiAgICBgXFx4MWJbOTBtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBncmV5QnJpZ2h0Qm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PlxuICAgIGBcXHgxYls5MG1cXHgxYlsxbSR7dGV4dC5qb2luKFwiIFwiKX1cXHgxYlswbWAsXG4gIHdoaXRlQm9sZDogKC4uLnRleHQ6IHN0cmluZ1tdKSA9PiBgXFx4MWJbMzdtXFx4MWJbMW0ke3RleHQuam9pbihcIiBcIil9XFx4MWJbMG1gLFxuICBibGFja0JvbGQ6ICguLi50ZXh0OiBzdHJpbmdbXSkgPT4gYFxceDFiWzMwbVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbiAgYmxhY2tCcmlnaHRCb2xkOiAoLi4udGV4dDogc3RyaW5nW10pID0+XG4gICAgYFxceDFiWzkwbVxceDFiWzFtJHt0ZXh0LmpvaW4oXCIgXCIpfVxceDFiWzBtYCxcbn07XG4iLAogICAgImltcG9ydCB7IHN0cmlwSW5kZW50IH0gZnJvbSBcImNvbW1vbi10YWdzXCI7XG5cbi8qKlxuICogVGFnZ2VkIHRlbXBsYXRlIGxpdGVyYWwgdGhhdCBmb3JtYXRzIGEgc3RyaW5nIHRvIGJlIHN0YW5kYXJkaXplZCBhbmRcbiAqIGFwcHJvcHJpYXRlIGZvciBjb21tYW5kZXIgZGVzY3JpcHRpb25zLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVzY3JpcHRpb24oc3RyOiBUZW1wbGF0ZVN0cmluZ3NBcnJheSwgLi4uYXJnczogYW55W10pIHtcbiAgcmV0dXJuIGAke3N0cmlwSW5kZW50KHN0ciwgLi4uYXJncyl9XFxuXFxuYDtcbn1cbiIsCiAgICAiLyoqXG4gKiBJbnRlcmZhY2UgZm9yIGRlY2xhcmluZyBhIGdlbmVyaWMgSlNPTiB2YWxpZCBvYmplY3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJSnNvbiB7XG4gIFt4OiBzdHJpbmddOiBzdHJpbmcgfCBudW1iZXIgfCBib29sZWFuIHwgRGF0ZSB8IElKc29uIHwgSUpzb25BcnJheTtcbn1cblxuLyoqXG4gKiBJbnRlcmZhY2UgZm9yIGRlY2xhcmluZyBhIGdlbmVyaWMgSlNPTiB2YWxpZCBvYmplY3RcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJSnNvblR5cGUge1xuICBbeDogc3RyaW5nXTpcbiAgICB8IHN0cmluZ1xuICAgIHwgbnVtYmVyXG4gICAgfCBib29sZWFuXG4gICAgfCBEYXRlXG4gICAgfCBJSnNvblR5cGVcbiAgICB8IElKc29uQXJyYXlcbiAgICB8IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBQYXJ0IG9mIHRoZSBJSnNvbiBkZWNsYXJhdGlvbiB0byBtYWtlIGEgdmFsaWQgSlNPTiB0eXBlLlxuICovXG5leHBvcnQgdHlwZSBJSnNvbkFycmF5ID0gKFxuICB8IHN0cmluZ1xuICB8IG51bWJlclxuICB8IGJvb2xlYW5cbiAgfCBEYXRlXG4gIHwgSUpzb25cbiAgfCBJSnNvbkFycmF5XG4pW107XG5cbi8qKlxuICogVGhpcyBpcyB0byBoZWxwIGVzdGFibGlzaCBhIGN1c3RvbSBjaGlsZCBwYXR0ZXJuIGZvciBSZWFjdC4gVGhlIHByb3BzIGZvciB5b3VyIHJlYWN0IGNvbXBvbmVudCBzaW1wbHkgbmVlZHMgdG8gZXh0ZW5kXG4gKiB0aGlzIGludGVyZmFjZS5cbiAqL1xuZXhwb3J0IHR5cGUgSUNoaWxkcmVuPFQgZXh0ZW5kcyBvYmplY3Q+ID0gVCAmIHtcbiAgY2hpbGRyZW4/OiBQYXJ0aWFsPFQ+O1xufTtcblxuLyoqXG4gKiBUaGlzIGxldHMgeW91IGRlZmluZSBjaGlsZHJlbiBmb3IgYSBjb21wb25lbnQgYW5kIGZvcmNlcyB0aGUgY2hpbGRyZW4gdG8gYmUgZGVjbGFyZWQgaW4gdGhlIHByb3BzIGFzIG9wcG9zZWQgdG9cbiAqIG5lc3RpbmcgdGhlIGNoaWxkcmVuLlxuICovXG5leHBvcnQgdHlwZSBJUHJvcHNDaGlsZHJlbjxUIGV4dGVuZHMgb2JqZWN0PiA9IFQgJiB7XG4gIGNoaWxkcmVuOiBuZXZlcjtcbn07XG5cbi8qKlxuICogVGhpcyBsZXRzIHlvdSBkZWZpbmUgY2hpbGRyZW4gZm9yIGEgY29tcG9uZW50IGFuZCBmb3JjZXMgdGhlIGNoaWxkcmVuIHRvIGJlIG5lc3RlZCBhcyBvcHBvc2VkIHRvXG4gKiBiZWluZyBkZWNsYXJlZCBpbiB0aGUgcHJvcHMuXG4gKi9cbmV4cG9ydCB0eXBlIElOZXN0ZWRDaGlsZHJlbjxUPiA9IHtcbiAgY2hpbGRyZW4/OiBUO1xufTtcblxuLyoqXG4gKiBBIHNsaWdodGx5IHN0cm9uZ2VyIHR5cGUgZm9yIGZvciBpbmRpY2F0aW5nIFwiRnVuY3Rpb25cIi4gVGhpcyBoYXMgZ3JlYXRlclxuICogZmxleGliaWxpdHkgdG8gZml0IGludG8gZ2VuZXJpYyBjYWxsYmFja3MuXG4gKi9cbmV4cG9ydCB0eXBlIEdlbmVyaWNGdW5jdGlvbjxUPiA9ICguLi5hcmdzOiBhbnlbXSkgPT4gVDtcblxuLyoqXG4gKiBUaGlzIHR5cGUgaXMgaW50ZW5kZWQgZm9yIHRoZSBhc3luYyBvcGVyYXRpb24gb2YgYSBcImZsb3dcIi4gQSBmbG93IGNhbiBoYXZlXG4gKiBzZXZlcmFsIHlpZWxkIHN0YXRlbWVudHMsIGJ1dCBhcmUgTk9UIGZvciB0aGUgaW50ZW50aW9uIG9mIHJldHVybmluZyB2YWx1ZXNcbiAqIHRvIHRoZSBjYWxsZXIsIGJ1dCByYXRoZXIgZm9yIHRoZSBpbnRlbnQgb2YgcGVyZm9ybWluZyBhIG1vYnggYWN0aW9uIHRoYXQgaGFzXG4gKiBhc3luY2hyb25vdXMgcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IHR5cGUgRmxvd1R5cGUgPSBHZW5lcmF0b3I8dW5rbm93biwgdW5rbm93biwgdW5rbm93bj4gfCB1bmRlZmluZWQ7XG5cbi8qKlxuICogVHlwZWd1YXJkIGZvciBzdHJpbmdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyh2YWw6IGFueSk6IHZhbCBpcyBzdHJpbmcge1xuICByZXR1cm4gdmFsICYmIHZhbC5jaGFyQ29kZUF0ICE9PSB2b2lkIDA7XG59XG5cbi8qKlxuICogVHlwZWd1YXJkIGZvciBudW1iZXJzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc051bWJlcih2YWw6IGFueSk6IHZhbCBpcyBudW1iZXIge1xuICByZXR1cm4gdmFsICE9PSB2b2lkIDAgJiYgdmFsLnRvRXhwb25lbnRpYWw7XG59XG5cbi8qKlxuICogVHlwZWd1YXJkIGZvciBmdW5jdGlvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsOiBhbnkpOiB2YWwgaXMgRnVuY3Rpb24ge1xuICByZXR1cm4gdHlwZW9mIHZhbCA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG4vKipcbiAqIFR5cGVnYXVyZCBmb3IgZW5zdXJpbmcgYW4gZWxlbWVudCBpcyBub24tbnVsbCBhbmQgbm90IHVuZGVmaW5lZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRGVmaW5lZDxUPih2YWw6IFQgfCB1bmRlZmluZWQgfCBudWxsKTogdmFsIGlzIFQge1xuICByZXR1cm4gdmFsICE9PSB2b2lkIDAgJiYgdmFsICE9PSBudWxsO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBpZiBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1RydXRoeTxUPih2YWw6IFQgfCBudWxsIHwgdW5kZWZpbmVkIHwgZmFsc2UpOiB2YWwgaXMgVCB7XG4gIHJldHVybiBCb29sZWFuKHZhbCk7XG59XG4iLAogICAgImltcG9ydCBpbnF1aXJlciBmcm9tIFwiaW5xdWlyZXJcIjtcbmltcG9ydCB7IHN0cmlwSW5kZW50IH0gZnJvbSBcImNvbW1vbi10YWdzXCI7XG5cbi8qKlxuICogQ29udmVuaWVuY2Ugd3JhcHBlciBhcm91bmQgY3VycmVudCBwcm9tcHQgbGlicmFyeSBvZiBjaG9pY2UgdG8gcHJlc2VudCBhXG4gKiBjb25maXJtYXRpb24gZGlhbG9nLlxuICpcbiAqIEFwcGxpZXMgc3RyaXBJbmRlbnQgdG8gdGhlIGlucHV0IG1lc3NhZ2UuXG4gKlxuICogUmV0dXJucyB0aGUgdHJ1ZSBmYWxzZSB2YWx1ZSBvZiB0aGUgcHJvbXB0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvbXB0Q29uZmlybShcbiAgbWVzc2FnZTogc3RyaW5nLFxuICBkZWZhdWx0VmFsdWU/OiBib29sZWFuLFxuICBvbkNvbmZpcm1lZD86ICgpID0+IHZvaWRcbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCB7IHJlc3VsdCB9ID0gYXdhaXQgaW5xdWlyZXIucHJvbXB0PHtcbiAgICByZXN1bHQ6IGJvb2xlYW47XG4gIH0+KFtcbiAgICB7XG4gICAgICB0eXBlOiBcImNvbmZpcm1cIixcbiAgICAgIG5hbWU6IFwicmVzdWx0XCIsXG4gICAgICBtZXNzYWdlOiBzdHJpcEluZGVudGAke21lc3NhZ2V9YCxcbiAgICAgIGRlZmF1bHQ6IGRlZmF1bHRWYWx1ZSxcbiAgICB9LFxuICBdKTtcblxuICAvLyBXaGVuIHllcy90cnVlIGlzIHNlbGVjdGVkLCBydW4gdGhlIG9uQ29uZmlybWVkIGNhbGxiYWNrXG4gIGlmIChyZXN1bHQpIG9uQ29uZmlybWVkPy4oKTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuIiwKICAgICJpbXBvcnQgY2hpbGRfcHJvY2VzcyBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiO1xuXG5mdW5jdGlvbiBpc0RlZmluZWQ8VD4odmFsOiBhbnkpOiB2YWwgaXMgVCB7XG4gIHJldHVybiB2YWwgIT09IHZvaWQgMCAmJiB2YWwgIT09IG51bGw7XG59XG5cbi8qKlxuICogVHlwZSBndWFyZCBmb3IgZXJyb3JzIHRocm93biBmcm9tIHRoZSBjaGlsZF9wcm9jZXNzLmV4ZWNGaWxlU3luYyBtZXRob2QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0NoaWxkUHJvY2Vzc0Vycm9yKFxuICB2YWw6IGFueVxuKTogdmFsIGlzIGNoaWxkX3Byb2Nlc3MuU3Bhd25TeW5jUmV0dXJuczxCdWZmZXI+IHtcbiAgcmV0dXJuIChcbiAgICBpc0RlZmluZWQ8YW55Pih2YWwpICYmXG4gICAgaXNEZWZpbmVkPGFueT4odmFsLnN0YXR1cykgJiZcbiAgICBpc0RlZmluZWQ8YW55Pih2YWwuc3RkZXJyKVxuICApO1xufVxuIiwKICAgICJpbXBvcnQgeyBpc0NoaWxkUHJvY2Vzc0Vycm9yIH0gZnJvbSBcIi4uL3V0aWwvaXMtY2hpbGQtcHJvY2Vzcy1lcnJvci5qc1wiO1xuaW1wb3J0IHsgaXNEZWZpbmVkIH0gZnJvbSBcIi4uL3V0aWwvdHlwZXMuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJRXhlY1N5bmMge1xuICAvKiogU2V0IHRvIHRydWUgdG8gcHJldmVudCBlcnJvciBsb2dzICovXG4gIHNpbGVudD86IGJvb2xlYW47XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgYSBjb21tYW5kIG9uIHRoZSBzYW1lIHN0ZGlvIGFzIHRoZSBjdXJyZW50IHByb2Nlc3MuIFRoaXMgYWJzb3Jic1xuICogZXJyb3JzIGFuZCBhbHNvIGlnbm9yZXMgbnVsbC91bmRlZmluZWQgYXJndW1lbnRzLlxuICpcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgY29tbWFuZCBzdWNjZWVkZWQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJ1bihjb21tYW5kOiBzdHJpbmcsIGFyZ3M6IChzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKVtdID0gW10pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXN1bHQgPSBCdW4uc3Bhd25TeW5jKFtjb21tYW5kLCAuLi5hcmdzLmZpbHRlcihpc0RlZmluZWQpXSwge1xuICAgICAgc3RkaW86IFtcImluaGVyaXRcIiwgXCJpbmhlcml0XCIsIFwiaW5oZXJpdFwiXSxcbiAgICAgIGVudjogcHJvY2Vzcy5lbnYsXG4gICAgfSk7XG5cbiAgICBpZiAocmVzdWx0LmV4aXRDb2RlICE9PSAwKSB7XG4gICAgICBpZiAoIXJ1bi5zaWxlbnQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBgRXJyb3I6ICR7Y29tbWFuZH0gJHthcmdzLmpvaW4oXCIgXCIpfSBmYWlsZWQgd2l0aCBjb2RlOiAke1xuICAgICAgICAgICAgcmVzdWx0LmV4aXRDb2RlXG4gICAgICAgICAgfWBcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoIXJ1bi5zaWxlbnQpIHtcbiAgICAgIGlmIChpc0NoaWxkUHJvY2Vzc0Vycm9yKGVycikpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgICBgRXJyb3I6ICR7Y29tbWFuZH0gJHthcmdzLmpvaW4oXCIgXCIpfSBmYWlsZWQgd2l0aCBjb2RlOiAke2Vyci5zdGF0dXN9YFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICAgIH1cblxuICAgICAgY29uc29sZS5lcnJvcihuZXcgRXJyb3IoKS5zdGFjayk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8vIERlZmF1bHQgdGhlIGV4ZWN1dGlvbiBzdHlsZS5cbnJ1bi5zaWxlbnQgPSBmYWxzZTtcblxuZXhwb3J0IGNvbnN0IGV4ZWNTeW5jOiB0eXBlb2YgcnVuICYgSUV4ZWNTeW5jID0gcnVuO1xuIiwKICAgICJpbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuL2V4ZWMtc3luYy5qc1wiO1xuXG5sZXQgbWVtb2l6ZWQ6IFtcImJ1blwiLCBcImJ1bnhcIl0gfCBbXCJucG1cIiwgXCJucHhcIl0gfCBudWxsID0gbnVsbDtcblxuLyoqXG4gKiBSZXRyaWV2ZXMgdGhlIGNvcnJlY3QgYW5kIG1vc3QgaWRlYWwgcGFja2FnZSBtYW5hZ2VyIHRvIHVzZSBmb3IgYSBjb21tYW5kLlxuICogRmlyc3QgdmFsdWUgd2lsbCBiZSB0aGUgcGFja2FnZSBtYW5hZ2VyIGNvbW1hbmQsIHRoZSBzZWNvbmQgd2lsbCBiZSB0aGUgYXV0b1xuICogZXhlY3V0aW9uIG1hbmFnZXIgb2YgdGhhdCBtYW5hZ2VyIGllIC0gW25wbSwgbnB4XVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFja2FnZU1hbmFnZXIoKSB7XG4gIGlmIChtZW1vaXplZCkgcmV0dXJuIG1lbW9pemVkO1xuXG4gIGlmIChwcm9jZXNzLmVudi5VU0VfTlBNID09PSBcInRydWVcIikge1xuICAgIG1lbW9pemVkID0gW1wibnBtXCIsIFwibnB4XCJdO1xuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52LlVTRV9CVU4gPT09IFwidHJ1ZVwiKSB7XG4gICAgbWVtb2l6ZWQgPSBbXCJidW5cIiwgXCJidW54XCJdO1xuICB9IGVsc2UgaWYgKGF3YWl0IGV4ZWNTeW5jKFwiYnVuXCIsIFtcIi0tdmVyc2lvblwiXSkpIHtcbiAgICBtZW1vaXplZCA9IFtcImJ1blwiLCBcImJ1bnhcIl07XG4gIH0gZWxzZSB7XG4gICAgbWVtb2l6ZWQgPSBbXCJucG1cIiwgXCJucHhcIl07XG4gIH1cblxuICByZXR1cm4gbWVtb2l6ZWQ7XG59XG4iLAogICAgIi8qKlxuICogQSBzaW1wbGUgd2FpdCBtZXRob2QgZm9yIGEgZHVyYXRpb25cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhaXQodDogbnVtYmVyKSB7XG4gIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiBzZXRUaW1lb3V0KHIsIHQpKTtcbn1cbiIsCiAgICAiaW1wb3J0ICogYXMgVml0ZSBmcm9tIFwidml0ZVwiO1xuaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uL3V0aWwvY2hhbGsuanNcIjtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSB2aXRlIGNvbmZpZyBzdWl0YWJsZSBmb3IgcnVubmluZyBhIFZpdGUuYnVpbGQgb3BlcmF0aW9uLiBUaGVcbiAqIHZhcmlvdXMgYXZhaWxhYmxlIHRhcmdldHMgbW9kaWZpZXMgdGhlIGJlaGF2aW9yIHRvIHRhcmdldCBkaWZmZXJlbnQgZm9sZGVycy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1aWxkVml0ZUNvbmZpZygpIHtcbiAgY29uc29sZS53YXJuKFxuICAgIFwiQnVpbGRpbmcgVml0ZSBjb25maWcgdXNpbmcgYmFzZTpcIixcbiAgICBjaGFsay55ZWxsb3dCcmlnaHRCb2xkKHBhdGgucmVzb2x2ZShcInZpdGUuY29uZmlnLnRzXCIpKVxuICApO1xuICAvLyBTdGFydCB3aXRoIHRoZSB0YXJnZXQgcHJvamVjdCBkZWZpbmVkIGNvbmZpZ3VyYXRpb25cbiAgbGV0IGNvbmZpZzogVml0ZS5Vc2VyQ29uZmlnID0gYXdhaXQgKFxuICAgIGF3YWl0IGltcG9ydChwYXRoLnJlc29sdmUoXCJ2aXRlLmNvbmZpZy50c1wiKSlcbiAgKS5kZWZhdWx0KCk7XG5cbiAgLy8gSW1wb3J0IHRoZSB0YXJnZXQgcHJvamVjdCdzIHRzY29uZmlnIHNvIHdlIGNhbiBpbmNsdWRlIHRoZSBzYW1lIGluY2x1c2lvbnNcbiAgLy8gdGhlIFRTIGNvbXBpbGVyIHdvdWxkIHVzZSBmb3IgdGhlIHdhdGNoIHByb2Nlc3MuXG4gIGNvbnN0IHRzY29uZmlnID0gYXdhaXQgZnMucmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLmpzb25cIikpO1xuXG4gIGNvbmZpZyA9IHtcbiAgICAuLi5jb25maWcsXG4gICAgbG9nTGV2ZWw6IFwiaW5mb1wiLFxuICAgIG1vZGU6IFwiZGV2ZWxvcG1lbnRcIixcbiAgICByb290OiBwYXRoLnJlc29sdmUoXCJhcHAvY2xpZW50XCIpLFxuICAgIGNsZWFyU2NyZWVuOiB0cnVlLFxuICAgIGJ1aWxkOiB7XG4gICAgICAuLi5jb25maWcuYnVpbGQsXG4gICAgICBjc3NDb2RlU3BsaXQ6IHRydWUsXG4gICAgICBvdXREaXI6IHBhdGgucmVzb2x2ZShcImJ1aWxkL2NsaWVudFwiKSxcbiAgICAgIHNvdXJjZW1hcDogdHJ1ZSxcbiAgICAgIHJvbGx1cE9wdGlvbnM6IHtcbiAgICAgICAgb3V0cHV0OiB7XG4gICAgICAgICAgbWFudWFsQ2h1bmtzOiB1bmRlZmluZWQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgd2F0Y2g6IHtcbiAgICAgICAgLi4uY29uZmlnLmJ1aWxkPy53YXRjaCxcbiAgICAgICAgaW5jbHVkZTogW1xuICAgICAgICAgIC4uLigoQXJyYXkuaXNBcnJheShjb25maWcuYnVpbGQ/LndhdGNoPy5pbmNsdWRlKVxuICAgICAgICAgICAgPyBjb25maWcuYnVpbGQ/LndhdGNoPy5pbmNsdWRlXG4gICAgICAgICAgICA6IFtjb25maWcuYnVpbGQ/LndhdGNoPy5pbmNsdWRlXSkgfHwgW10pLFxuICAgICAgICAgIC4uLih0c2NvbmZpZz8uaW5jbHVkZT8ubWFwKChpOiBzdHJpbmcpID0+IHBhdGgucmVzb2x2ZShpKSkgfHwgW10pLFxuICAgICAgICAgIFwidHNjb25maWcuanNvblwiLFxuICAgICAgICBdLmZpbHRlcihCb29sZWFuKSxcbiAgICAgIH0sXG4gICAgICBlbXB0eU91dERpcjogdHJ1ZSxcbiAgICB9LFxuICAgIHJlc29sdmU6IHtcbiAgICAgIGFsaWFzOiB7XG4gICAgICAgIGNvbmZpZzogcGF0aC5yZXNvbHZlKGBhcHAvY29uZmlnYCksXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgcmV0dXJuIGNvbmZpZztcbn1cbiIsCiAgICAiaW1wb3J0IGRlZXBtZXJnZSBmcm9tIFwiZGVlcG1lcmdlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGFyZ2V0UHJvamVjdERlcGVuZGVuY2llcygpIHtcbiAgY29uc3QgcGFja2FnZUpzb24gPSBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpKTtcblxuICByZXR1cm4gZGVlcG1lcmdlPFJlY29yZDxzdHJpbmcsIHN0cmluZz4+KFxuICAgIHBhY2thZ2VKc29uLmRlcGVuZGVuY2llcyB8fCB7fSxcbiAgICBwYWNrYWdlSnNvbi5wZWVyRGVwZW5kZW5jaWVzIHx8IHt9XG4gICk7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0YXJnZXRQcm9qZWN0VmVyc2lvbigpIHtcbiAgY29uc3QgcGFja2FnZUpzb24gPSBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpKTtcbiAgcmV0dXJuIHBhY2thZ2VKc29uLnZlcnNpb24gfHwgXCJcIjtcbn1cbiIsCiAgICAiaW1wb3J0ICogYXMgVml0ZSBmcm9tIFwidml0ZVwiO1xuaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGJ1aWxkVml0ZUNvbmZpZyB9IGZyb20gXCIuLi8uLi9idWlsZC12aXRlLWNvbmZpZy5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdERlcGVuZGVuY2llcyB9IGZyb20gXCIuLi8uLi8uLi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC1kZXBlbmRlbmNpZXMuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3RWZXJzaW9uIH0gZnJvbSBcIi4uLy4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LXZlcnNpb24uanNcIjtcblxuLyoqXG4gKiBUaGlzIHBlcmZvcm1zIHRoZSBidW5kbGluZyBwcm9jZXNzIGZvciBkaXN0cmlidXRpb24uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPVxuICAgIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OIHx8IChhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpKTtcblxuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIlN0YXJ0aW5nIFZpdGUgY2xpZW50IGJ1aWxkLi4uXCIpKTtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcImFwcC9jbGllbnQvaW5kZXgudHNcIikpKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJUcmllZCB0byBzdGFydCBkZXZlbG9wbWVudCBwcm9jZXNzIGZvciB0aGUgYXBwIGNsaWVudCwgYnV0IG5vIGVudHJ5IGZpbGUgd2FzIGZvdW5kLlwiXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBjb25maWcgPSBhd2FpdCBidWlsZFZpdGVDb25maWcoKTtcblxuICBjb25maWcucm9vdCA9IHBhdGgucmVzb2x2ZShcImFwcC9jbGllbnRcIik7XG4gIGNvbmZpZy5idWlsZCEub3V0RGlyID0gcGF0aC5yZXNvbHZlKFwiYnVpbGQvY2xpZW50XCIpO1xuXG4gIGNvbmZpZy5idWlsZCEucm9sbHVwT3B0aW9ucyEuZXh0ZXJuYWwgPSBPYmplY3Qua2V5cyhcbiAgICBhd2FpdCB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzKClcbiAgKTtcblxuICBhd2FpdCBWaXRlLmJ1aWxkKGNvbmZpZyk7XG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiVml0ZSBjbGllbnQgYnVpbGQgcHJvY2VzcyBzdGFydGVkLi4uXCIpKTtcbn1cbiIsCiAgICAiLyoqXG4gKiBMaXN0ZW5zIGZvciBwcm9jZXNzIGV4aXQgc2lnbmFscyBvZiB2YXJpb3VzIHR5cGVzIGFuZCBmaXJlcyB0aGUgcHJvdmlkZWRcbiAqIGNhbGxiYWNrIHdoZW4gaXQgaGFwcGVucyB3aXRoIHNvbWUgZWFzeSB0byBoYW5kbGUgZGV0YWlscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVByb2Nlc3NFeGl0KFxuICBjYjogKG1lc3NhZ2U6IHN0cmluZywgZXJyPzogRXJyb3IgfCBzdHJpbmcgfCBudW1iZXIpID0+IFByb21pc2U8dm9pZD5cbikge1xuICBjb25zdCBoYW5kbGVFeGl0ID0gKG1lc3NhZ2U6IHN0cmluZykgPT4gKGVycj86IEVycm9yIHwgc3RyaW5nIHwgbnVtYmVyKSA9PiB7XG4gICAgY2IobWVzc2FnZSwgZXJyKTtcbiAgICBpZiAoZXJyKSBwcm9jZXNzLmV4aXQoMSk7XG4gICAgZWxzZSBwcm9jZXNzLmV4aXQoMCk7XG4gIH07XG5cbiAgLy8gQ2F0Y2ggd2hlbiBhcHAgaXMgY2xvc2luZ1xuICBwcm9jZXNzLm9uKFwiZXhpdFwiLCBoYW5kbGVFeGl0KFwiZXhpdFwiKSk7XG4gIC8vIENhdGNoIGN0cmwrYyBldmVudFxuICBwcm9jZXNzLm9uKFwiU0lHSU5UXCIsIGhhbmRsZUV4aXQoXCJTSUdJTlRcIikpO1xuICAvLyBDYXRjaCBcImtpbGwgcGlkXCIgKGZvciBleGFtcGxlOiBub2RlbW9uIHJlc3RhcnQpXG4gIHByb2Nlc3Mub24oXCJTSUdVU1IxXCIsIGhhbmRsZUV4aXQoXCJTSUdVU1IxXCIpKTtcbiAgcHJvY2Vzcy5vbihcIlNJR1VTUjJcIiwgaGFuZGxlRXhpdChcIlNJR1VTUjJcIikpO1xuICBwcm9jZXNzLm9uKFwiU0lHVEVSTVwiLCBoYW5kbGVFeGl0KFwiU0lHVEVSTVwiKSk7XG4gIC8vIENhdGNoIHVuY2F1Z2h0IGV4Y2VwdGlvbnNcbiAgcHJvY2Vzcy5vbihcInVuY2F1Z2h0RXhjZXB0aW9uXCIsIGhhbmRsZUV4aXQoXCJ1bmNhdWdodEV4Y2VwdGlvblwiKSk7XG59XG4iLAogICAgImNvbnN0IHF1ZXVlOiBhbnlbXVtdID0gW107XG5sZXQgcXVldWVJZDogVGltZXIgfCBudWxsID0gbnVsbDtcblxuZnVuY3Rpb24gc3RhcnRRdWV1ZSgpIHtcbiAgaWYgKHF1ZXVlSWQgIT09IG51bGwpIHJldHVybjtcblxuICBxdWV1ZUlkID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gcXVldWUuc2hpZnQoKTtcbiAgICAgIGlmIChtZXNzYWdlKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUubG9nKC4uLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgNDAwKTtcbn1cblxuLyoqXG4gKiBUaGlzIGlzIGEgc2ltcGxlIHF1ZXVlIGZvciBsb2dnaW5nIG1lc3NhZ2VzIGF0IGdpdmVuIGludGVydmFscyB3aGljaCBwcmV2ZW50c1xuICogc29tZSBsb2dnaW5nIGluZmlnaHRpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvZ1F1ZXVlKC4uLm1lc3NhZ2U6IGFueVtdKSB7XG4gIHF1ZXVlLnB1c2gobWVzc2FnZSk7XG4gIHN0YXJ0UXVldWUoKTtcbn1cbiIsCiAgICAiaW1wb3J0IGJ1aWxkQ2xpZW50IGZyb20gXCIuL2J1aWxkLWNsaWVudC5qc1wiO1xuaW1wb3J0IGNoaWxkX3Byb2Nlc3MgZnJvbSBcImNoaWxkX3Byb2Nlc3NcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgcmVhZGxpbmUgZnJvbSBcInJlYWRsaW5lXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBnZXRQYWNrYWdlTWFuYWdlciB9IGZyb20gXCIuLi8uLi8uLi9leGVjL2dldC1wYWNrYWdlLW1hbmFnZXIuanNcIjtcbmltcG9ydCB7IGhhbmRsZVByb2Nlc3NFeGl0IH0gZnJvbSBcIi4uLy4uLy4uL3V0aWwvaGFuZGxlLXByb2Nlc3MtZXhpdC5qc1wiO1xuaW1wb3J0IHsgbG9nUXVldWUgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9sb2ctcXVldWUuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3RWZXJzaW9uIH0gZnJvbSBcIi4uLy4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LXZlcnNpb24uanNcIjtcblxuLyoqXG4gKiBFbnRyeSBtZXRob2QgZm9yIHRoZSBhcHAgZGV2IHNlcnZlclxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oXG4gIGxpc3RlbmVyPzogKGNoaWxkOiBjaGlsZF9wcm9jZXNzLkNoaWxkUHJvY2Vzc1dpdGhvdXROdWxsU3RyZWFtcykgPT4gdm9pZFxuKSB7XG4gIGNvbnNvbGUud2FybihcbiAgICBcIlxcblJ1bm5pbmcgdGhlIEFwcCBzZXJ2ZXIgYXQ6IFwiLFxuICAgIGNoYWxrLnllbGxvd0JyaWdodEJvbGQocGF0aC5yZXNvbHZlKFwiYXBwL3NlcnZlclwiKSksXG4gICAgXCJcXG5cIlxuICApO1xuXG4gIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OID1cbiAgICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiB8fCAoYXdhaXQgdGFyZ2V0UHJvamVjdFZlcnNpb24oKSk7XG4gIHByb2Nlc3MuZW52LlJFU09VUkNFX1BBVEggPVxuICAgIHByb2Nlc3MuZW52LlJFU09VUkNFX1BBVEggfHwgcGF0aC5yZXNvbHZlKFwiYnVpbGQvY2xpZW50XCIpO1xuICBjb25zdCBwYWNrYWdlTWFuYWdlciA9IGF3YWl0IGdldFBhY2thZ2VNYW5hZ2VyKCk7XG5cbiAgaWYgKHBhY2thZ2VNYW5hZ2VyWzBdICE9PSBcImJ1blwiKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiQ3VycmVudGx5IG9ubHkgYW4gZW52aXJvbm1lbnQgd2l0aCBidW4gaW5zdGFsbGVkIGlzIHN1cHBvcnRlZCBmb3IgdGhpcyBjb21tYW5kLlwiXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IGNoaWxkUHJvY2VzcyA9IGNoaWxkX3Byb2Nlc3Muc3Bhd24ocGFja2FnZU1hbmFnZXJbMF0sIFtcbiAgICBcIi0td2F0Y2hcIixcbiAgICBwYXRoLnJlc29sdmUoXCJhcHAvc2VydmVyL2luZGV4LnRzXCIpLFxuICBdKTtcblxuICAvLyBMaXN0ZW4gZm9yIHRoZSBiIGtleSB0byBiZSBwcmVzc2VkLiBUaGlzIHNob3VsZCB0cmlnZ2VyIGEgZGVtbyBidWlsZCBvZiB0aGVcbiAgLy8gYXBwIGFuZCBvdXRwdXQgdG8gdGhlIGJ1aWxkIGZvbGRlci4gVGhpcyBpcyBtZWFudCBmb3IgdGVzdGluZyB0aGUgYnVpbGQgYW5kXG4gIC8vIG5vdGhpbmcgZWxzZS5cbiAgcHJvY2Vzcy5zdGRpbi5zZXRSYXdNb2RlPy4odHJ1ZSk7XG4gIHByb2Nlc3Muc3RkaW4ucmVzdW1lKCk7XG4gIHByb2Nlc3Muc3RkaW4uc2V0RW5jb2RpbmcoXCJ1dGY4XCIpO1xuICByZWFkbGluZS5lbWl0S2V5cHJlc3NFdmVudHMocHJvY2Vzcy5zdGRpbik7XG4gIGxldCBidWlsZGluZyA9IGZhbHNlO1xuXG4gIHByb2Nlc3Muc3RkaW4ub24oXCJrZXlwcmVzc1wiLCBhc3luYyAoY2h1bmssIGtleSkgPT4ge1xuICAgIGlmIChrZXkgJiYga2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09IFwiY1wiKSB7XG4gICAgICBjaGlsZFByb2Nlc3Mua2lsbCgpO1xuICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgIH0gZWxzZSBpZiAoa2V5ICYmIGtleS5jdHJsICYmIGtleS5uYW1lID09PSBcImRcIikge1xuICAgICAgY2hpbGRQcm9jZXNzLmtpbGwoKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICB9IGVsc2UgaWYgKGNodW5rLnRvU3RyaW5nKCkgPT09IFwiYlwiIHx8IGNodW5rLnRvU3RyaW5nKCkgPT09IFwiQlwiKSB7XG4gICAgICBpZiAoYnVpbGRpbmcpIHJldHVybjtcbiAgICAgIGJ1aWxkaW5nID0gdHJ1ZTtcbiAgICAgIGF3YWl0IGJ1aWxkQ2xpZW50KCk7XG4gICAgICBidWlsZGluZyA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoY2h1bmsudG9TdHJpbmcoKSA9PT0gXCJxXCIgfHwgY2h1bmsudG9TdHJpbmcoKSA9PT0gXCJRXCIpIHtcbiAgICAgIGNoaWxkUHJvY2Vzcy5raWxsKCk7XG5cbiAgICAgIC8vIFNwZWNpYWwgcXVpdCBjb2RlIHRvIGluZGljYXRlIHdlIHdhbnQgYSBzcGVjaWFsIHNodXRkb3duIHJvdXRpbmUuXG4gICAgICBpZiAoa2V5LnNoaWZ0KSB7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxMjMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDApO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgLy8gTWFrZSBzdXJlIHRoZSBzZXJ2ZXIgYXBwbGljYXRpb24gcmVjZWl2ZXMgaW5wdXQgZnJvbSB0aGUgdGVybWluYWxcbiAgcHJvY2Vzcy5zdGRpbi5waXBlKGNoaWxkUHJvY2Vzcy5zdGRpbik7XG5cbiAgaWYgKGxpc3RlbmVyKSB7XG4gICAgbGlzdGVuZXIoY2hpbGRQcm9jZXNzKTtcbiAgfSBlbHNlIHtcbiAgICBjaGlsZFByb2Nlc3Muc3Rkb3V0Lm9uKFwiZGF0YVwiLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgbG9nUXVldWUoYCR7ZGF0YS50b1N0cmluZygpLnNsaWNlKDAsIC0xKX1gKTtcbiAgICB9KTtcblxuICAgIGNoaWxkUHJvY2Vzcy5zdGRlcnIub24oXCJkYXRhXCIsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICBsb2dRdWV1ZShgJHtkYXRhLnRvU3RyaW5nKCkuc2xpY2UoMCwgLTEpfWApO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gSGFuZGxlIHdoZW4gdGhlIHByb2Nlc3MgZXhpc3RzIGJ5IGNsZWFuaW5nIHVwIGFueSBjaGlsZCBwcm9jZXNzZXMgZXRjXG4gIGhhbmRsZVByb2Nlc3NFeGl0KGFzeW5jIChtZXNzYWdlOiBzdHJpbmcsIGVycj86IEVycm9yIHwgc3RyaW5nIHwgbnVtYmVyKSA9PiB7XG4gICAgY2hpbGRQcm9jZXNzLmtpbGwoKTtcbiAgICBjb25zb2xlLndhcm4oXCJFWElUIEJVSUxEIFNFUlZFUlwiKTtcbiAgICBjb25zb2xlLndhcm4oY2hhbGsucmVkQnJpZ2h0Qm9sZChtZXNzYWdlKSk7XG4gICAgaWYgKGVyciAmJiBlcnIgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKGNoYWxrLnJlZEJyaWdodEJvbGQoZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKSk7XG4gICAgfVxuICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgfSk7XG59XG4iLAogICAgImltcG9ydCBidWlsZENsaWVudCBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9idWlsZC1jbGllbnQuanNcIjtcbmltcG9ydCBydW5BcHBTZXJ2ZXIgZnJvbSBcIi4uLy4uL2xpYi9idWlsZC93ZWItYXBwL3ZpdGUvcnVuLWFwcC1zZXJ2ZXIuanNcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0VmVyc2lvbiB9IGZyb20gXCIuLi8uLi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuXG4vKipcbiAqIEVudHJ5IHBvaW50IGZvciB0aGlzIHNjcmlwdFxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oKSB7XG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gXCJkZXZlbG9wbWVudFwiO1xuXG4gIC8vIEJ1aWxkIHRoZSBjbGllbnQgaW4gd2F0Y2ggbW9kZS4gVGhlIENsaWVudCBidWlsZCBJUyBPTkxZIG1hZGUgc28gd2UgY2FuIHNlZVxuICAvLyB0aGUgZ2VuZXJhdGVkIGZpbGVzIHRvIGFpZCBpbiBkZWJ1Z2dpbmcuXG4gIGJ1aWxkQ2xpZW50KCk7XG5cbiAgY29uc29sZS53YXJuKGNoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJTdGFydGluZyBkZXYgc2VydmVyLi4uXCIpKTtcbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPSBhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpO1xuICBhd2FpdCBydW5BcHBTZXJ2ZXIoKTtcbn1cbiIsCiAgICAiaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB1cmwgZnJvbSBcInVybFwiO1xuXG5jb25zdCBfX2Rpcm5hbWUgPSB1cmwuZmlsZVVSTFRvUGF0aChuZXcgVVJMKFwiLlwiLCBpbXBvcnQubWV0YS51cmwpKTtcblxuLyoqXG4gKiBUaGlzIHJldHVybnMgdGhlIHBhdGggdG8gdGhlIHJvb3Qgb2YgdGhlIGRldm9wcyBwcm9qZWN0IChpbnN0YWxsYXRpb24gb3JcbiAqIGRldmVsb3BtZW50IGxvY2F0aW9uKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGV2b3BzUHJvamVjdFBhdGgoKSB7XG4gIGNvbnN0IGlzRGlzdCA9IHBhdGguYmFzZW5hbWUocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLlwiKSkgPT09IFwiZGlzdFwiO1xuICBpZiAoaXNEaXN0KSByZXR1cm4gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuLi8uLi9cIik7XG4gIHJldHVybiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBcIi4uLy4uLy4uL1wiKTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IGdldFBhY2thZ2VNYW5hZ2VyIH0gZnJvbSBcIi4vZ2V0LXBhY2thZ2UtbWFuYWdlci5qc1wiO1xuXG4vKipcbiAqIEV4ZWN1dGVzIGFuIGBucG0gcnVuIDxjb21tYW5kPmAgaW4gdGhlIGN1cnJlbnQgY29udGV4dC5cbiAqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGNvbW1hbmQgc3VjY2VlZGVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY1NjcmlwdChcbiAgY29tbWFuZDogc3RyaW5nLFxuICBhcmdzOiAoc3RyaW5nIHwgdW5kZWZpbmVkIHwgbnVsbClbXSA9IFtdXG4pIHtcbiAgY29uc3QgbWFuYWdlciA9IGF3YWl0IGdldFBhY2thZ2VNYW5hZ2VyKCk7XG5cbiAgcmV0dXJuIGV4ZWNTeW5jKG1hbmFnZXJbMF0sIFtcbiAgICBcInJ1blwiLFxuICAgIGNvbW1hbmQsXG4gICAgYXJncy5sZW5ndGggPiAwICYmIGFyZ3NbMF0gIT09IFwiLS1cIiA/IFwiLS1cIiA6IHZvaWQgMCxcbiAgICAuLi5hcmdzLFxuICBdKTtcbn1cbiIsCiAgICAiaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBkZXZvcHNQcm9qZWN0UGF0aCB9IGZyb20gXCIuLi9saWIvZGV2b3BzLXByb2plY3QvZGV2b3BzLXByb2plY3QtcGF0aC5qc1wiO1xuaW1wb3J0IHsgZXhlY1NjcmlwdCB9IGZyb20gXCIuLi9saWIvZXhlYy9leGVjLXNjcmlwdC5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vbGliL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LXZlcnNpb24uanNcIjtcblxuLyoqXG4gKiBUaGlzIHJ1bnMgc3Rvcnlib29rIGluIHRoaXMgY29udGV4dCBvbiBiZWhhbGYgb2YgdGhlIHByb2plY3QgdGhlIGRldm9wcyBpc1xuICogaW5zdGFsbGVkIHdpdGhpbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKFxuICBidWlsZDogc3RyaW5nLFxuICBpbmNsdWRlOiBzdHJpbmdbXSxcbiAgLi4uX2FyZ3M6IGFueVtdXG4pIHtcbiAgY29uc3QgUFJPSkVDVF9ST09UID0gcGF0aC5yZXNvbHZlKFwiLlwiKTtcbiAgcHJvY2Vzcy5lbnYuUFJPSkVDVF9ST09UID0gUFJPSkVDVF9ST09UO1xuICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiA9IGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCk7XG4gIGNvbnN0IHN0b3J5Ym9va0NvbmZpZ1BhdGggPSBwYXRoLnJlc29sdmUoXCIuc3Rvcnlib29rXCIpO1xuICAvLyBSdW4gdGhpcyBwYWNrYWdlJ3Mgc3Rvcnlib29rIHNjcmlwdCBjb21tYW5kLlxuICBjb25zdCByb290UGF0aCA9IGF3YWl0IGRldm9wc1Byb2plY3RQYXRoKCk7XG4gIHByb2Nlc3MuY2hkaXIocm9vdFBhdGgpO1xuXG4gIC8vIFNldCB1cCBhbiBlbnZpcm9ubWVudCB0aGF0IHdpbGwgYmUgcHJvY2Vzc2VkIGluIHRoZSBtYWluLmpzIG9mIHN0b3J5eWJvb2tcbiAgLy8gY29uZmlnLiBUaGlzIHdpbGwgY2F1c2UgYWxsIHNwZWNpZmllZCBtb2R1bGVzIHRvIGJlIGxvb2tlZCBmb3Igd2hlblxuICAvLyBnYXRoZXJpbmcgc3RvcmllcyB0byBpbmNsdWRlIGluIHRoZSBidWlsZC5cbiAgaWYgKGluY2x1ZGUgJiYgaW5jbHVkZS5sZW5ndGggPiAwKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9NT0RVTEVTX1NUT1JJRVMgPSBpbmNsdWRlLmpvaW4oXCIsXCIpO1xuICB9XG5cbiAgaWYgKGJ1aWxkID09PSBcImJ1aWxkXCIpIHtcbiAgICBpZiAoXG4gICAgICAhZXhlY1NjcmlwdChcInN0b3J5Ym9va1wiLCBbXG4gICAgICAgIFwiYnVpbGRcIixcbiAgICAgICAgXCItY1wiLFxuICAgICAgICBzdG9yeWJvb2tDb25maWdQYXRoLFxuICAgICAgICBcIi1vXCIsXG4gICAgICAgIGBcIiR7cGF0aC5yZXNvbHZlKFBST0pFQ1RfUk9PVCwgXCJzdG9yeWJvb2stc3RhdGljXCIpfVwiYCxcbiAgICAgIF0pXG4gICAgKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGNoYWxrLnJlZEJyaWdodEJvbGQoXCJGYWlsZWQgdG8gYnVpbGQgc3Rvcnlib29rXCIpKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKFxuICAgICAgIWV4ZWNTY3JpcHQoXCJzdG9yeWJvb2tcIiwgW1xuICAgICAgICBcImRldlwiLFxuICAgICAgICBcIi0tbm8tdmVyc2lvbi11cGRhdGVzXCIsXG4gICAgICAgIFwiLXBcIixcbiAgICAgICAgcHJvY2Vzcy5lbnYuUE9SVCB8fCBcIjYwMDZcIixcbiAgICAgICAgXCItY1wiLFxuICAgICAgICBgXCIke3N0b3J5Ym9va0NvbmZpZ1BhdGh9XCJgLFxuICAgICAgXSlcbiAgICApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoY2hhbGsucmVkQnJpZ2h0Qm9sZChcIkZhaWxlZCB0byBydW4gc3Rvcnlib29rXCIpKTtcbiAgICB9XG4gIH1cbn1cbiIsCiAgICAiJ3VzZSBzdHJpY3QnO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5sZXQgaXNEb2NrZXI7XG5cbmZ1bmN0aW9uIGhhc0RvY2tlckVudigpIHtcblx0dHJ5IHtcblx0XHRmcy5zdGF0U3luYygnLy5kb2NrZXJlbnYnKTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSBjYXRjaCAoXykge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufVxuXG5mdW5jdGlvbiBoYXNEb2NrZXJDR3JvdXAoKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIGZzLnJlYWRGaWxlU3luYygnL3Byb2Mvc2VsZi9jZ3JvdXAnLCAndXRmOCcpLmluY2x1ZGVzKCdkb2NrZXInKTtcblx0fSBjYXRjaCAoXykge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9ICgpID0+IHtcblx0aWYgKGlzRG9ja2VyID09PSB1bmRlZmluZWQpIHtcblx0XHRpc0RvY2tlciA9IGhhc0RvY2tlckVudigpIHx8IGhhc0RvY2tlckNHcm91cCgpO1xuXHR9XG5cblx0cmV0dXJuIGlzRG9ja2VyO1xufTtcbiIsCiAgICAiJ3VzZSBzdHJpY3QnO1xuY29uc3Qgb3MgPSByZXF1aXJlKCdvcycpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuY29uc3QgaXNEb2NrZXIgPSByZXF1aXJlKCdpcy1kb2NrZXInKTtcblxuY29uc3QgaXNXc2wgPSAoKSA9PiB7XG5cdGlmIChwcm9jZXNzLnBsYXRmb3JtICE9PSAnbGludXgnKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0aWYgKG9zLnJlbGVhc2UoKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdtaWNyb3NvZnQnKSkge1xuXHRcdGlmIChpc0RvY2tlcigpKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHR0cnkge1xuXHRcdHJldHVybiBmcy5yZWFkRmlsZVN5bmMoJy9wcm9jL3ZlcnNpb24nLCAndXRmOCcpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21pY3Jvc29mdCcpID9cblx0XHRcdCFpc0RvY2tlcigpIDogZmFsc2U7XG5cdH0gY2F0Y2ggKF8pIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn07XG5cbmlmIChwcm9jZXNzLmVudi5fX0lTX1dTTF9URVNUX18pIHtcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1dzbDtcbn0gZWxzZSB7XG5cdG1vZHVsZS5leHBvcnRzID0gaXNXc2woKTtcbn1cbiIsCiAgICAiJ3VzZSBzdHJpY3QnO1xubW9kdWxlLmV4cG9ydHMgPSAob2JqZWN0LCBwcm9wZXJ0eU5hbWUsIGZuKSA9PiB7XG5cdGNvbnN0IGRlZmluZSA9IHZhbHVlID0+IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5TmFtZSwge3ZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZX0pO1xuXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5TmFtZSwge1xuXHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdGdldCgpIHtcblx0XHRcdGNvbnN0IHJlc3VsdCA9IGZuKCk7XG5cdFx0XHRkZWZpbmUocmVzdWx0KTtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fSxcblx0XHRzZXQodmFsdWUpIHtcblx0XHRcdGRlZmluZSh2YWx1ZSk7XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gb2JqZWN0O1xufTtcbiIsCiAgICAiY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IGNoaWxkUHJvY2VzcyA9IHJlcXVpcmUoJ2NoaWxkX3Byb2Nlc3MnKTtcbmNvbnN0IHtwcm9taXNlczogZnMsIGNvbnN0YW50czogZnNDb25zdGFudHN9ID0gcmVxdWlyZSgnZnMnKTtcbmNvbnN0IGlzV3NsID0gcmVxdWlyZSgnaXMtd3NsJyk7XG5jb25zdCBpc0RvY2tlciA9IHJlcXVpcmUoJ2lzLWRvY2tlcicpO1xuY29uc3QgZGVmaW5lTGF6eVByb3BlcnR5ID0gcmVxdWlyZSgnZGVmaW5lLWxhenktcHJvcCcpO1xuXG4vLyBQYXRoIHRvIGluY2x1ZGVkIGB4ZGctb3BlbmAuXG5jb25zdCBsb2NhbFhkZ09wZW5QYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJ3hkZy1vcGVuJyk7XG5cbmNvbnN0IHtwbGF0Zm9ybSwgYXJjaH0gPSBwcm9jZXNzO1xuXG4vLyBQb2RtYW4gZGV0ZWN0aW9uXG5jb25zdCBoYXNDb250YWluZXJFbnYgPSAoKSA9PiB7XG5cdHRyeSB7XG5cdFx0ZnMuc3RhdFN5bmMoJy9ydW4vLmNvbnRhaW5lcmVudicpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9IGNhdGNoIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn07XG5cbmxldCBjYWNoZWRSZXN1bHQ7XG5mdW5jdGlvbiBpc0luc2lkZUNvbnRhaW5lcigpIHtcblx0aWYgKGNhY2hlZFJlc3VsdCA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0Y2FjaGVkUmVzdWx0ID0gaGFzQ29udGFpbmVyRW52KCkgfHwgaXNEb2NrZXIoKTtcblx0fVxuXG5cdHJldHVybiBjYWNoZWRSZXN1bHQ7XG59XG5cbi8qKlxuR2V0IHRoZSBtb3VudCBwb2ludCBmb3IgZml4ZWQgZHJpdmVzIGluIFdTTC5cblxuQGlubmVyXG5AcmV0dXJucyB7c3RyaW5nfSBUaGUgbW91bnQgcG9pbnQuXG4qL1xuY29uc3QgZ2V0V3NsRHJpdmVzTW91bnRQb2ludCA9ICgoKSA9PiB7XG5cdC8vIERlZmF1bHQgdmFsdWUgZm9yIFwicm9vdFwiIHBhcmFtXG5cdC8vIGFjY29yZGluZyB0byBodHRwczovL2RvY3MubWljcm9zb2Z0LmNvbS9lbi11cy93aW5kb3dzL3dzbC93c2wtY29uZmlnXG5cdGNvbnN0IGRlZmF1bHRNb3VudFBvaW50ID0gJy9tbnQvJztcblxuXHRsZXQgbW91bnRQb2ludDtcblxuXHRyZXR1cm4gYXN5bmMgZnVuY3Rpb24gKCkge1xuXHRcdGlmIChtb3VudFBvaW50KSB7XG5cdFx0XHQvLyBSZXR1cm4gbWVtb2l6ZWQgbW91bnQgcG9pbnQgdmFsdWVcblx0XHRcdHJldHVybiBtb3VudFBvaW50O1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvbmZpZ0ZpbGVQYXRoID0gJy9ldGMvd3NsLmNvbmYnO1xuXG5cdFx0bGV0IGlzQ29uZmlnRmlsZUV4aXN0cyA9IGZhbHNlO1xuXHRcdHRyeSB7XG5cdFx0XHRhd2FpdCBmcy5hY2Nlc3MoY29uZmlnRmlsZVBhdGgsIGZzQ29uc3RhbnRzLkZfT0spO1xuXHRcdFx0aXNDb25maWdGaWxlRXhpc3RzID0gdHJ1ZTtcblx0XHR9IGNhdGNoIHt9XG5cblx0XHRpZiAoIWlzQ29uZmlnRmlsZUV4aXN0cykge1xuXHRcdFx0cmV0dXJuIGRlZmF1bHRNb3VudFBvaW50O1xuXHRcdH1cblxuXHRcdGNvbnN0IGNvbmZpZ0NvbnRlbnQgPSBhd2FpdCBmcy5yZWFkRmlsZShjb25maWdGaWxlUGF0aCwge2VuY29kaW5nOiAndXRmOCd9KTtcblx0XHRjb25zdCBjb25maWdNb3VudFBvaW50ID0gLyg/PCEjLiopcm9vdFxccyo9XFxzKig/PG1vdW50UG9pbnQ+LiopL2cuZXhlYyhjb25maWdDb250ZW50KTtcblxuXHRcdGlmICghY29uZmlnTW91bnRQb2ludCkge1xuXHRcdFx0cmV0dXJuIGRlZmF1bHRNb3VudFBvaW50O1xuXHRcdH1cblxuXHRcdG1vdW50UG9pbnQgPSBjb25maWdNb3VudFBvaW50Lmdyb3Vwcy5tb3VudFBvaW50LnRyaW0oKTtcblx0XHRtb3VudFBvaW50ID0gbW91bnRQb2ludC5lbmRzV2l0aCgnLycpID8gbW91bnRQb2ludCA6IGAke21vdW50UG9pbnR9L2A7XG5cblx0XHRyZXR1cm4gbW91bnRQb2ludDtcblx0fTtcbn0pKCk7XG5cbmNvbnN0IHBUcnlFYWNoID0gYXN5bmMgKGFycmF5LCBtYXBwZXIpID0+IHtcblx0bGV0IGxhdGVzdEVycm9yO1xuXG5cdGZvciAoY29uc3QgaXRlbSBvZiBhcnJheSkge1xuXHRcdHRyeSB7XG5cdFx0XHRyZXR1cm4gYXdhaXQgbWFwcGVyKGl0ZW0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWF3YWl0LWluLWxvb3Bcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0bGF0ZXN0RXJyb3IgPSBlcnJvcjtcblx0XHR9XG5cdH1cblxuXHR0aHJvdyBsYXRlc3RFcnJvcjtcbn07XG5cbmNvbnN0IGJhc2VPcGVuID0gYXN5bmMgb3B0aW9ucyA9PiB7XG5cdG9wdGlvbnMgPSB7XG5cdFx0d2FpdDogZmFsc2UsXG5cdFx0YmFja2dyb3VuZDogZmFsc2UsXG5cdFx0bmV3SW5zdGFuY2U6IGZhbHNlLFxuXHRcdGFsbG93Tm9uemVyb0V4aXRDb2RlOiBmYWxzZSxcblx0XHQuLi5vcHRpb25zXG5cdH07XG5cblx0aWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucy5hcHApKSB7XG5cdFx0cmV0dXJuIHBUcnlFYWNoKG9wdGlvbnMuYXBwLCBzaW5nbGVBcHAgPT4gYmFzZU9wZW4oe1xuXHRcdFx0Li4ub3B0aW9ucyxcblx0XHRcdGFwcDogc2luZ2xlQXBwXG5cdFx0fSkpO1xuXHR9XG5cblx0bGV0IHtuYW1lOiBhcHAsIGFyZ3VtZW50czogYXBwQXJndW1lbnRzID0gW119ID0gb3B0aW9ucy5hcHAgfHwge307XG5cdGFwcEFyZ3VtZW50cyA9IFsuLi5hcHBBcmd1bWVudHNdO1xuXG5cdGlmIChBcnJheS5pc0FycmF5KGFwcCkpIHtcblx0XHRyZXR1cm4gcFRyeUVhY2goYXBwLCBhcHBOYW1lID0+IGJhc2VPcGVuKHtcblx0XHRcdC4uLm9wdGlvbnMsXG5cdFx0XHRhcHA6IHtcblx0XHRcdFx0bmFtZTogYXBwTmFtZSxcblx0XHRcdFx0YXJndW1lbnRzOiBhcHBBcmd1bWVudHNcblx0XHRcdH1cblx0XHR9KSk7XG5cdH1cblxuXHRsZXQgY29tbWFuZDtcblx0Y29uc3QgY2xpQXJndW1lbnRzID0gW107XG5cdGNvbnN0IGNoaWxkUHJvY2Vzc09wdGlvbnMgPSB7fTtcblxuXHRpZiAocGxhdGZvcm0gPT09ICdkYXJ3aW4nKSB7XG5cdFx0Y29tbWFuZCA9ICdvcGVuJztcblxuXHRcdGlmIChvcHRpb25zLndhaXQpIHtcblx0XHRcdGNsaUFyZ3VtZW50cy5wdXNoKCctLXdhaXQtYXBwcycpO1xuXHRcdH1cblxuXHRcdGlmIChvcHRpb25zLmJhY2tncm91bmQpIHtcblx0XHRcdGNsaUFyZ3VtZW50cy5wdXNoKCctLWJhY2tncm91bmQnKTtcblx0XHR9XG5cblx0XHRpZiAob3B0aW9ucy5uZXdJbnN0YW5jZSkge1xuXHRcdFx0Y2xpQXJndW1lbnRzLnB1c2goJy0tbmV3Jyk7XG5cdFx0fVxuXG5cdFx0aWYgKGFwcCkge1xuXHRcdFx0Y2xpQXJndW1lbnRzLnB1c2goJy1hJywgYXBwKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAocGxhdGZvcm0gPT09ICd3aW4zMicgfHwgKGlzV3NsICYmICFpc0luc2lkZUNvbnRhaW5lcigpICYmICFhcHApKSB7XG5cdFx0Y29uc3QgbW91bnRQb2ludCA9IGF3YWl0IGdldFdzbERyaXZlc01vdW50UG9pbnQoKTtcblxuXHRcdGNvbW1hbmQgPSBpc1dzbCA/XG5cdFx0XHRgJHttb3VudFBvaW50fWMvV2luZG93cy9TeXN0ZW0zMi9XaW5kb3dzUG93ZXJTaGVsbC92MS4wL3Bvd2Vyc2hlbGwuZXhlYCA6XG5cdFx0XHRgJHtwcm9jZXNzLmVudi5TWVNURU1ST09UfVxcXFxTeXN0ZW0zMlxcXFxXaW5kb3dzUG93ZXJTaGVsbFxcXFx2MS4wXFxcXHBvd2Vyc2hlbGxgO1xuXG5cdFx0Y2xpQXJndW1lbnRzLnB1c2goXG5cdFx0XHQnLU5vUHJvZmlsZScsXG5cdFx0XHQnLU5vbkludGVyYWN0aXZlJyxcblx0XHRcdCfigJNFeGVjdXRpb25Qb2xpY3knLFxuXHRcdFx0J0J5cGFzcycsXG5cdFx0XHQnLUVuY29kZWRDb21tYW5kJ1xuXHRcdCk7XG5cblx0XHRpZiAoIWlzV3NsKSB7XG5cdFx0XHRjaGlsZFByb2Nlc3NPcHRpb25zLndpbmRvd3NWZXJiYXRpbUFyZ3VtZW50cyA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Y29uc3QgZW5jb2RlZEFyZ3VtZW50cyA9IFsnU3RhcnQnXTtcblxuXHRcdGlmIChvcHRpb25zLndhaXQpIHtcblx0XHRcdGVuY29kZWRBcmd1bWVudHMucHVzaCgnLVdhaXQnKTtcblx0XHR9XG5cblx0XHRpZiAoYXBwKSB7XG5cdFx0XHQvLyBEb3VibGUgcXVvdGUgd2l0aCBkb3VibGUgcXVvdGVzIHRvIGVuc3VyZSB0aGUgaW5uZXIgcXVvdGVzIGFyZSBwYXNzZWQgdGhyb3VnaC5cblx0XHRcdC8vIElubmVyIHF1b3RlcyBhcmUgZGVsaW1pdGVkIGZvciBQb3dlclNoZWxsIGludGVycHJldGF0aW9uIHdpdGggYmFja3RpY2tzLlxuXHRcdFx0ZW5jb2RlZEFyZ3VtZW50cy5wdXNoKGBcIlxcYFwiJHthcHB9XFxgXCJcImAsICctQXJndW1lbnRMaXN0Jyk7XG5cdFx0XHRpZiAob3B0aW9ucy50YXJnZXQpIHtcblx0XHRcdFx0YXBwQXJndW1lbnRzLnVuc2hpZnQob3B0aW9ucy50YXJnZXQpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAob3B0aW9ucy50YXJnZXQpIHtcblx0XHRcdGVuY29kZWRBcmd1bWVudHMucHVzaChgXCIke29wdGlvbnMudGFyZ2V0fVwiYCk7XG5cdFx0fVxuXG5cdFx0aWYgKGFwcEFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRhcHBBcmd1bWVudHMgPSBhcHBBcmd1bWVudHMubWFwKGFyZyA9PiBgXCJcXGBcIiR7YXJnfVxcYFwiXCJgKTtcblx0XHRcdGVuY29kZWRBcmd1bWVudHMucHVzaChhcHBBcmd1bWVudHMuam9pbignLCcpKTtcblx0XHR9XG5cblx0XHQvLyBVc2luZyBCYXNlNjQtZW5jb2RlZCBjb21tYW5kLCBhY2NlcHRlZCBieSBQb3dlclNoZWxsLCB0byBhbGxvdyBzcGVjaWFsIGNoYXJhY3RlcnMuXG5cdFx0b3B0aW9ucy50YXJnZXQgPSBCdWZmZXIuZnJvbShlbmNvZGVkQXJndW1lbnRzLmpvaW4oJyAnKSwgJ3V0ZjE2bGUnKS50b1N0cmluZygnYmFzZTY0Jyk7XG5cdH0gZWxzZSB7XG5cdFx0aWYgKGFwcCkge1xuXHRcdFx0Y29tbWFuZCA9IGFwcDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gV2hlbiBidW5kbGVkIGJ5IFdlYnBhY2ssIHRoZXJlJ3Mgbm8gYWN0dWFsIHBhY2thZ2UgZmlsZSBwYXRoIGFuZCBubyBsb2NhbCBgeGRnLW9wZW5gLlxuXHRcdFx0Y29uc3QgaXNCdW5kbGVkID0gIV9fZGlybmFtZSB8fCBfX2Rpcm5hbWUgPT09ICcvJztcblxuXHRcdFx0Ly8gQ2hlY2sgaWYgbG9jYWwgYHhkZy1vcGVuYCBleGlzdHMgYW5kIGlzIGV4ZWN1dGFibGUuXG5cdFx0XHRsZXQgZXhlTG9jYWxYZGdPcGVuID0gZmFsc2U7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRhd2FpdCBmcy5hY2Nlc3MobG9jYWxYZGdPcGVuUGF0aCwgZnNDb25zdGFudHMuWF9PSyk7XG5cdFx0XHRcdGV4ZUxvY2FsWGRnT3BlbiA9IHRydWU7XG5cdFx0XHR9IGNhdGNoIHt9XG5cblx0XHRcdGNvbnN0IHVzZVN5c3RlbVhkZ09wZW4gPSBwcm9jZXNzLnZlcnNpb25zLmVsZWN0cm9uIHx8XG5cdFx0XHRcdHBsYXRmb3JtID09PSAnYW5kcm9pZCcgfHwgaXNCdW5kbGVkIHx8ICFleGVMb2NhbFhkZ09wZW47XG5cdFx0XHRjb21tYW5kID0gdXNlU3lzdGVtWGRnT3BlbiA/ICd4ZGctb3BlbicgOiBsb2NhbFhkZ09wZW5QYXRoO1xuXHRcdH1cblxuXHRcdGlmIChhcHBBcmd1bWVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0Y2xpQXJndW1lbnRzLnB1c2goLi4uYXBwQXJndW1lbnRzKTtcblx0XHR9XG5cblx0XHRpZiAoIW9wdGlvbnMud2FpdCkge1xuXHRcdFx0Ly8gYHhkZy1vcGVuYCB3aWxsIGJsb2NrIHRoZSBwcm9jZXNzIHVubGVzcyBzdGRpbyBpcyBpZ25vcmVkXG5cdFx0XHQvLyBhbmQgaXQncyBkZXRhY2hlZCBmcm9tIHRoZSBwYXJlbnQgZXZlbiBpZiBpdCdzIHVucmVmJ2QuXG5cdFx0XHRjaGlsZFByb2Nlc3NPcHRpb25zLnN0ZGlvID0gJ2lnbm9yZSc7XG5cdFx0XHRjaGlsZFByb2Nlc3NPcHRpb25zLmRldGFjaGVkID0gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHRpZiAob3B0aW9ucy50YXJnZXQpIHtcblx0XHRjbGlBcmd1bWVudHMucHVzaChvcHRpb25zLnRhcmdldCk7XG5cdH1cblxuXHRpZiAocGxhdGZvcm0gPT09ICdkYXJ3aW4nICYmIGFwcEFyZ3VtZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0Y2xpQXJndW1lbnRzLnB1c2goJy0tYXJncycsIC4uLmFwcEFyZ3VtZW50cyk7XG5cdH1cblxuXHRjb25zdCBzdWJwcm9jZXNzID0gY2hpbGRQcm9jZXNzLnNwYXduKGNvbW1hbmQsIGNsaUFyZ3VtZW50cywgY2hpbGRQcm9jZXNzT3B0aW9ucyk7XG5cblx0aWYgKG9wdGlvbnMud2FpdCkge1xuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG5cdFx0XHRzdWJwcm9jZXNzLm9uY2UoJ2Vycm9yJywgcmVqZWN0KTtcblxuXHRcdFx0c3VicHJvY2Vzcy5vbmNlKCdjbG9zZScsIGV4aXRDb2RlID0+IHtcblx0XHRcdFx0aWYgKCFvcHRpb25zLmFsbG93Tm9uemVyb0V4aXRDb2RlICYmIGV4aXRDb2RlID4gMCkge1xuXHRcdFx0XHRcdHJlamVjdChuZXcgRXJyb3IoYEV4aXRlZCB3aXRoIGNvZGUgJHtleGl0Q29kZX1gKSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVzb2x2ZShzdWJwcm9jZXNzKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0c3VicHJvY2Vzcy51bnJlZigpO1xuXG5cdHJldHVybiBzdWJwcm9jZXNzO1xufTtcblxuY29uc3Qgb3BlbiA9ICh0YXJnZXQsIG9wdGlvbnMpID0+IHtcblx0aWYgKHR5cGVvZiB0YXJnZXQgIT09ICdzdHJpbmcnKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYSBgdGFyZ2V0YCcpO1xuXHR9XG5cblx0cmV0dXJuIGJhc2VPcGVuKHtcblx0XHQuLi5vcHRpb25zLFxuXHRcdHRhcmdldFxuXHR9KTtcbn07XG5cbmNvbnN0IG9wZW5BcHAgPSAobmFtZSwgb3B0aW9ucykgPT4ge1xuXHRpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG5cdFx0dGhyb3cgbmV3IFR5cGVFcnJvcignRXhwZWN0ZWQgYSBgbmFtZWAnKTtcblx0fVxuXG5cdGNvbnN0IHthcmd1bWVudHM6IGFwcEFyZ3VtZW50cyA9IFtdfSA9IG9wdGlvbnMgfHwge307XG5cdGlmIChhcHBBcmd1bWVudHMgIT09IHVuZGVmaW5lZCAmJiBhcHBBcmd1bWVudHMgIT09IG51bGwgJiYgIUFycmF5LmlzQXJyYXkoYXBwQXJndW1lbnRzKSkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGBhcHBBcmd1bWVudHNgIGFzIEFycmF5IHR5cGUnKTtcblx0fVxuXG5cdHJldHVybiBiYXNlT3Blbih7XG5cdFx0Li4ub3B0aW9ucyxcblx0XHRhcHA6IHtcblx0XHRcdG5hbWUsXG5cdFx0XHRhcmd1bWVudHM6IGFwcEFyZ3VtZW50c1xuXHRcdH1cblx0fSk7XG59O1xuXG5mdW5jdGlvbiBkZXRlY3RBcmNoQmluYXJ5KGJpbmFyeSkge1xuXHRpZiAodHlwZW9mIGJpbmFyeSA9PT0gJ3N0cmluZycgfHwgQXJyYXkuaXNBcnJheShiaW5hcnkpKSB7XG5cdFx0cmV0dXJuIGJpbmFyeTtcblx0fVxuXG5cdGNvbnN0IHtbYXJjaF06IGFyY2hCaW5hcnl9ID0gYmluYXJ5O1xuXG5cdGlmICghYXJjaEJpbmFyeSkge1xuXHRcdHRocm93IG5ldyBFcnJvcihgJHthcmNofSBpcyBub3Qgc3VwcG9ydGVkYCk7XG5cdH1cblxuXHRyZXR1cm4gYXJjaEJpbmFyeTtcbn1cblxuZnVuY3Rpb24gZGV0ZWN0UGxhdGZvcm1CaW5hcnkoe1twbGF0Zm9ybV06IHBsYXRmb3JtQmluYXJ5fSwge3dzbH0pIHtcblx0aWYgKHdzbCAmJiBpc1dzbCkge1xuXHRcdHJldHVybiBkZXRlY3RBcmNoQmluYXJ5KHdzbCk7XG5cdH1cblxuXHRpZiAoIXBsYXRmb3JtQmluYXJ5KSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKGAke3BsYXRmb3JtfSBpcyBub3Qgc3VwcG9ydGVkYCk7XG5cdH1cblxuXHRyZXR1cm4gZGV0ZWN0QXJjaEJpbmFyeShwbGF0Zm9ybUJpbmFyeSk7XG59XG5cbmNvbnN0IGFwcHMgPSB7fTtcblxuZGVmaW5lTGF6eVByb3BlcnR5KGFwcHMsICdjaHJvbWUnLCAoKSA9PiBkZXRlY3RQbGF0Zm9ybUJpbmFyeSh7XG5cdGRhcndpbjogJ2dvb2dsZSBjaHJvbWUnLFxuXHR3aW4zMjogJ2Nocm9tZScsXG5cdGxpbnV4OiBbJ2dvb2dsZS1jaHJvbWUnLCAnZ29vZ2xlLWNocm9tZS1zdGFibGUnLCAnY2hyb21pdW0nXVxufSwge1xuXHR3c2w6IHtcblx0XHRpYTMyOiAnL21udC9jL1Byb2dyYW0gRmlsZXMgKHg4NikvR29vZ2xlL0Nocm9tZS9BcHBsaWNhdGlvbi9jaHJvbWUuZXhlJyxcblx0XHR4NjQ6IFsnL21udC9jL1Byb2dyYW0gRmlsZXMvR29vZ2xlL0Nocm9tZS9BcHBsaWNhdGlvbi9jaHJvbWUuZXhlJywgJy9tbnQvYy9Qcm9ncmFtIEZpbGVzICh4ODYpL0dvb2dsZS9DaHJvbWUvQXBwbGljYXRpb24vY2hyb21lLmV4ZSddXG5cdH1cbn0pKTtcblxuZGVmaW5lTGF6eVByb3BlcnR5KGFwcHMsICdmaXJlZm94JywgKCkgPT4gZGV0ZWN0UGxhdGZvcm1CaW5hcnkoe1xuXHRkYXJ3aW46ICdmaXJlZm94Jyxcblx0d2luMzI6ICdDOlxcXFxQcm9ncmFtIEZpbGVzXFxcXE1vemlsbGEgRmlyZWZveFxcXFxmaXJlZm94LmV4ZScsXG5cdGxpbnV4OiAnZmlyZWZveCdcbn0sIHtcblx0d3NsOiAnL21udC9jL1Byb2dyYW0gRmlsZXMvTW96aWxsYSBGaXJlZm94L2ZpcmVmb3guZXhlJ1xufSkpO1xuXG5kZWZpbmVMYXp5UHJvcGVydHkoYXBwcywgJ2VkZ2UnLCAoKSA9PiBkZXRlY3RQbGF0Zm9ybUJpbmFyeSh7XG5cdGRhcndpbjogJ21pY3Jvc29mdCBlZGdlJyxcblx0d2luMzI6ICdtc2VkZ2UnLFxuXHRsaW51eDogWydtaWNyb3NvZnQtZWRnZScsICdtaWNyb3NvZnQtZWRnZS1kZXYnXVxufSwge1xuXHR3c2w6ICcvbW50L2MvUHJvZ3JhbSBGaWxlcyAoeDg2KS9NaWNyb3NvZnQvRWRnZS9BcHBsaWNhdGlvbi9tc2VkZ2UuZXhlJ1xufSkpO1xuXG5vcGVuLmFwcHMgPSBhcHBzO1xub3Blbi5vcGVuQXBwID0gb3BlbkFwcDtcblxubW9kdWxlLmV4cG9ydHMgPSBvcGVuO1xuIiwKICAgICJpbXBvcnQgeyBpc0NoaWxkUHJvY2Vzc0Vycm9yIH0gZnJvbSBcIi4uL3V0aWwvaXMtY2hpbGQtcHJvY2Vzcy1lcnJvci5qc1wiO1xuaW1wb3J0IHsgaXNEZWZpbmVkIH0gZnJvbSBcIi4uL3V0aWwvdHlwZXMuanNcIjtcblxuLyoqXG4gKiBFeGVjdXRlcyBhIGNvbW1hbmQgb24gdGhlIHNhbWUgc3RkaW8gYXMgdGhlIGN1cnJlbnQgcHJvY2Vzcy4gVGhpcyBhYnNvcmJzXG4gKiBlcnJvcnMgYW5kIGFsc28gaWdub3JlcyBudWxsL3VuZGVmaW5lZCBhcmd1bWVudHMuXG4gKlxuICogUmV0dXJucyB0aGUgc3Rkb3V0IHJlc3VsdCBvZiB0aGUgY29tbWFuZCBpZiBpdCBzdWNjZWVkcyBhbmQgbnVsbCBpZiBpdCBmYWlscy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4ZWNTeW5jUmVzdWx0KFxuICBjb21tYW5kOiBzdHJpbmcsXG4gIGFyZ3M6IChzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKVtdID0gW11cbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IEJ1bi5zcGF3blN5bmMoW2NvbW1hbmQsIC4uLmFyZ3MuZmlsdGVyKGlzRGVmaW5lZCldLCB7XG4gICAgICBzdGRpbzogW1wiaW5oZXJpdFwiLCBcInBpcGVcIiwgXCJwaXBlXCJdLFxuICAgICAgZW52OiBwcm9jZXNzLmVudixcbiAgICB9KTtcblxuICAgIGlmIChyZXN1bHQuZXhpdENvZGUgIT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGBFcnJvcjogJHtjb21tYW5kfSAke2FyZ3Muam9pbihcIiBcIil9IGZhaWxlZCB3aXRoIGNvZGU6ICR7XG4gICAgICAgICAgcmVzdWx0LmV4aXRDb2RlXG4gICAgICAgIH1gXG4gICAgICApO1xuICAgICAgY29uc29sZS5lcnJvcihuZXcgRXJyb3IoKS5zdGFjayk7XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiAocmVzdWx0LnN0ZG91dCB8fCBcIlwiKS50b1N0cmluZygpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoaXNDaGlsZFByb2Nlc3NFcnJvcihlcnIpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgRXJyb3I6ICR7Y29tbWFuZH0gJHthcmdzLmpvaW4oXCIgXCIpfSBmYWlsZWQgd2l0aCBjb2RlOiAke2Vyci5zdGF0dXN9YFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVyci5tZXNzYWdlKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmVycm9yKG5ldyBFcnJvcigpLnN0YWNrKTtcblxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG4iLAogICAgImV4cG9ydCBpbnRlcmZhY2UgSVRlbXBsYXRlUmVzdWx0cyB7XG4gIC8qKiBUaGlzIGlzIHRoZSByZXN1bHRpbmcgdGVtcGxhdGUgc3RyaW5nIGdlbmVyYXRlZCBmcm9tIHRoZSB0ZW1wbGF0aW5nICovXG4gIHRlbXBsYXRlOiBzdHJpbmc7XG4gIC8qKiBUaGlzIGlzIHRoZSB0ZW1wbGF0ZSBvcHRpb25zIHByb3ZpZGVkIGJ5IHRoZSB0ZW1wbGF0ZS4ge29wdGlvbjogbnVtIG9jY3VycmVuY2VzfSAqL1xuICB0ZW1wbGF0ZVByb3ZpZGVkT3B0aW9uczogTWFwPHN0cmluZywgbnVtYmVyPjtcbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHRlbXBsYXRlIG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIHRlbXBsYXRlIHRoYXQgd2VyZSBub3QgcmVzb2x2ZWQgYnkgdGhlIG9wdGlvbnMgcGFyYW1ldGVyXG4gICAqIHtvcHRpb246IG51bSBvY2N1cnJlbmNlc31cbiAgICovXG4gIHVucmVzb2x2ZWRUZW1wbGF0ZU9wdGlvbnM6IE1hcDxzdHJpbmcsIG51bWJlcj47XG4gIC8qKiBUaGlzIGlzIHRoZSBvcHRpb25zIHByb3ZpZGVkIHRvIHRoZSB0ZW1wbGF0ZSB0aGF0IGRpZCBub3QgZ2V0IHJlc29sdmVkIGJ5IHRoZSB0ZW1wbGF0ZSB7b3B0aW9uOiAxfSAqL1xuICB1bnJlc29sdmVkUHJvdmlkZWRPcHRpb25zOiBNYXA8c3RyaW5nLCBudW1iZXI+O1xuICAvKiogVGhpcyBpcyB0aGUgbGlzdCBvZiBvcHRpb25zIHRoYXQgRElEIGdldCByZXNvbHZlZCBieSB0aGUgb3B0aW9ucyBwcm92aWRlZCB7b3B0aW9uOiBudW0gb2NjdXJyZW5jZXN9ICovXG4gIHJlc29sdmVkdGVtcGxhdGVPcHRpb25zOiBNYXA8c3RyaW5nLCBudW1iZXI+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElUZW1wbGF0ZVJlcXVpcmVtZW50cyB7XG4gIC8qKiBBIHN0cmluZyBpZGVudGlmaWVyIHRvIG1ha2UgaXQgZWFzaWVyIHRvIGlkZW50aWZ5IHdoaWNoIHRlbXBsYXRlIHRlbXBsYXRlIGZhaWxlZCByZXF1aXJlbWVudHMgKi9cbiAgbmFtZTogc3RyaW5nO1xuICAvKiogVGhlIG9wdGlvbnMgdGhhdCBtdXN0IGJlIHByZXNlbnQgd2l0aGluIGJvdGggcHJvdmlkZWQgb3B0aW9ucyBBTkQgd2l0aGluIHRoZSB0ZW1wbGF0ZSAqL1xuICB2YWx1ZXM6IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElUZW1wbGF0ZU9wdGlvbnMge1xuICAvKiogRG91YmxlIGN1cmx5IGJyYWNrZXRzIGZvciB0ZW1wbGF0ZSBpdGVtcyBpbnN0ZWFkIG9mIG9uZSAqL1xuICBkb3VibGVDdXJseUJyYWNrZXRzPzogYm9vbGVhbjtcbiAgLyoqIENhbGxiYWNrIGZvciAncmVxdWlyZWQnIGVycm9ycyBiZWluZyBlbWl0dGVkICovXG4gIG9uRXJyb3I/KG1zZzogc3RyaW5nKTogdm9pZDtcbiAgLyoqXG4gICAqIENhbGxiYWNrIHRoYXQgYWxsb3dzIG92ZXJyaWRlcyBmb3IgdG9rZW4gcmVwbGFjZW1lbnQuIFByb3ZpZGVzIHRoZSB0b2tlbiBmb3VuZCBhbmQgdGhlXG4gICAqIHN1Z2dlc3RlZCByZXBsYWNlbWVudCBmb3IgaXRcbiAgICovXG4gIG9uVG9rZW4/KHRva2VuOiBzdHJpbmcsIHJlcGxhY2U6IHN0cmluZyk6IHN0cmluZztcbiAgLyoqIFRoaXMgaXMgYSBrZXkgdmFsdWUgcGFpciB0aGUgdGVtcGxhdGUgdXNlcyB0byBtYXRjaCB0b2tlbnMgZm91bmQgdG8gcmVwbGFjZW1lbnQgdmFsdWVzICovXG4gIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZD47XG4gIC8qKiBUaGlzIGlzIHVzZWQgdG8gaW5kaWNhdGUgd2hpY2ggdG9rZW5zIGFyZSByZXF1aXJlZCBib3RoIHdpdGhpbiB0aGUgdGVtcGxhdGUgQU5EIHdpdGhpbiB0aGUgJ29wdGlvbnMnICovXG4gIHJlcXVpcmVkPzogSVRlbXBsYXRlUmVxdWlyZW1lbnRzO1xuICAvKiogVGhpcyBpcyB0aGUgdGVtcGxhdGUgd3JpdHRlbiB3aXRoIHRlbXBsYXRpbmcgaW5mb3JtYXRpb24gKi9cbiAgdGVtcGxhdGU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBUaGlzIGlzIGEgbWV0aG9kIHRoYXQgYWlkcyBpbiBtYWtpbmcgdGVtcGxhdGVzIGEgYml0IG1vcmUgZHluYW1pYyB3aXRoIHNpbXBsZSBzdHJpbmcgcmVwbGFjZW1lbnQgYmFzZWQgb25cbiAqIHRva2VucyB3cml0dGVuIGludG8gdGhlIHRlbXBsYXRlLiBUb2tlbnMgaW4gdGhlIHRlbXBsYXRlIHdpbGwgYXBwZWFyIGFzICR7dG9rZW59IGFuZCB3aWxsIGVpdGhlciBiZSBpZ25vcmVkIGJ5IHRoaXNcbiAqIG1ldGhvZCBhbmQgdGh1cyByZW1vdmVkIG9yIHdpbGwgYmUgcmVwbGFjZWQgd2l0aCBhIHByb3ZpZGVkIHZhbHVlLlxuICpcbiAqIFRoaXMgbWV0aG9kIHdpbGwgZ2l2ZSBmZWVkYmFjayBvbiB0aGUgcmVwbGFjZW1lbnRzIHRha2luZyBwbGFjZSBhbmQgc2ltcGxpZnkgdGhlIHByb2Nlc3Mgb2YgZGV0ZWN0aW5nIGVycm9yc1xuICogd2l0aGluIHRoZSBwcm9jZXNzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGUoe1xuICB0ZW1wbGF0ZSxcbiAgb3B0aW9ucyxcbiAgcmVxdWlyZWQsXG4gIGRvdWJsZUN1cmx5QnJhY2tldHMsXG4gIG9uRXJyb3IsXG4gIG9uVG9rZW4sXG59OiBJVGVtcGxhdGVPcHRpb25zKTogSVRlbXBsYXRlUmVzdWx0cyB7XG4gIGNvbnN0IG1hdGNoZWQgPSBuZXcgTWFwKCk7XG4gIGNvbnN0IG5vVmFsdWVQcm92aWRlZCA9IG5ldyBNYXAoKTtcbiAgY29uc3Qgbm90Rm91bmQgPSBuZXcgTWFwKCk7XG4gIGNvbnN0IHRlbXBsYXRlUHJvdmlkZWRPcHRpb25zID0gbmV3IE1hcCgpO1xuXG4gIGxldCBwYXR0ZXJuID0gL1xcJFxceyhbXlxcfV0qKVxcfS9nO1xuXG4gIGlmIChkb3VibGVDdXJseUJyYWNrZXRzKSB7XG4gICAgcGF0dGVybiA9IC9cXCRcXHtcXHsoW15cXH1dKilcXH1cXH0vZztcbiAgfVxuXG4gIGNvbnN0IHRlbXBsYXRlUmVzdWx0cyA9IHRlbXBsYXRlLnJlcGxhY2UocGF0dGVybiwgKF94LCBtYXRjaCkgPT4ge1xuICAgIGxldCByZXBsYWNlID0gXCJcIjtcbiAgICB0ZW1wbGF0ZVByb3ZpZGVkT3B0aW9ucy5zZXQoXG4gICAgICBtYXRjaCxcbiAgICAgICh0ZW1wbGF0ZVByb3ZpZGVkT3B0aW9ucy5nZXQobWF0Y2gpIHx8IDApICsgMVxuICAgICk7XG5cbiAgICBpZiAobWF0Y2ggaW4gb3B0aW9ucykge1xuICAgICAgbWF0Y2hlZC5zZXQobWF0Y2gsIChtYXRjaGVkLmdldChtYXRjaCkgfHwgMCkgKyAxKTtcbiAgICAgIGNvbnN0IHZhbHVlID0gb3B0aW9uc1ttYXRjaF07XG5cbiAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJlcGxhY2UgPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbm9WYWx1ZVByb3ZpZGVkLnNldChtYXRjaCwgKG5vVmFsdWVQcm92aWRlZC5nZXQobWF0Y2gpIHx8IDApICsgMSk7XG4gICAgfVxuXG4gICAgaWYgKG9uVG9rZW4pIHtcbiAgICAgIHJlcGxhY2UgPSBvblRva2VuKG1hdGNoLCByZXBsYWNlKTtcbiAgICAgIGlmIChyZXBsYWNlICE9PSBtYXRjaCkge1xuICAgICAgICBtYXRjaGVkLnNldChtYXRjaCwgKG1hdGNoZWQuZ2V0KG1hdGNoKSB8fCAwKSArIDEpO1xuICAgICAgICBub1ZhbHVlUHJvdmlkZWQuZGVsZXRlKG1hdGNoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVwbGFjZTtcbiAgfSk7XG5cbiAgT2JqZWN0LmtleXMob3B0aW9ucykuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgaWYgKCFtYXRjaGVkLmdldChvcHRpb24pKSB7XG4gICAgICBub3RGb3VuZC5zZXQob3B0aW9uLCAobm90Rm91bmQuZ2V0KG9wdGlvbikgfHwgMCkgKyAxKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIFByb3ZpZGUgbWV0cmljc1xuICBjb25zdCByZXN1bHRzOiBJVGVtcGxhdGVSZXN1bHRzID0ge1xuICAgIHJlc29sdmVkdGVtcGxhdGVPcHRpb25zOiBtYXRjaGVkLFxuICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZVJlc3VsdHMsXG4gICAgdGVtcGxhdGVQcm92aWRlZE9wdGlvbnMsXG4gICAgdW5yZXNvbHZlZFByb3ZpZGVkT3B0aW9uczogbm90Rm91bmQsXG4gICAgdW5yZXNvbHZlZFRlbXBsYXRlT3B0aW9uczogbm9WYWx1ZVByb3ZpZGVkLFxuICB9O1xuXG4gIGlmIChyZXF1aXJlZCkge1xuICAgIC8vIFRoaXMgd2lsbCBlbnN1cmUgdGhhdCBCT1RIIHRoZSBwYXJhbWV0ZXIgaW5wdXQgQU5EIHRoZSB0ZW1wbGF0ZSBwcm92aWRlZCB0aGUgcmVxdWlyZWQgb3B0aW9ucy5cbiAgICByZXF1aXJlZC52YWx1ZXMuZm9yRWFjaCgocmVxdWlyZSkgPT4ge1xuICAgICAgaWYgKHJlc3VsdHMudW5yZXNvbHZlZFByb3ZpZGVkT3B0aW9ucy5nZXQocmVxdWlyZSkpIHtcbiAgICAgICAgY29uc3QgbXNnID0gYCR7cmVxdWlyZWQubmFtZX06IENvdWxkIG5vdCByZXNvbHZlIGFsbCB0aGUgcmVxdWlyZWQgaW5wdXRzLiBJbnB1dDogJHtyZXF1aXJlfWA7XG4gICAgICAgIGlmIChvbkVycm9yKSBvbkVycm9yKG1zZyk7XG4gICAgICAgIGVsc2UgY29uc29sZS5lcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmIChyZXN1bHRzLnVucmVzb2x2ZWRUZW1wbGF0ZU9wdGlvbnMuZ2V0KHJlcXVpcmUpKSB7XG4gICAgICAgIGNvbnN0IG1zZyA9IGAke3JlcXVpcmVkLm5hbWV9OiBBIHJlcXVpcmVkIG9wdGlvbiB3YXMgbm90IHByb3ZpZGVkIGluIHRoZSBvcHRpb25zIHBhcmFtZXRlci4gT3B0aW9uOiAke3JlcXVpcmV9YDtcbiAgICAgICAgaWYgKG9uRXJyb3IpIG9uRXJyb3IobXNnKTtcbiAgICAgICAgZWxzZSBjb25zb2xlLmVycm9yKG1zZyk7XG4gICAgICB9IGVsc2UgaWYgKCFyZXN1bHRzLnJlc29sdmVkdGVtcGxhdGVPcHRpb25zLmdldChyZXF1aXJlKSkge1xuICAgICAgICBjb25zdCBtc2cgPSBgJHtyZXF1aXJlZC5uYW1lfTogQSByZXF1aXJlZCBvcHRpb24gd2FzIG5vdCBwcm92aWRlZCBpbiB0aGUgb3B0aW9ucyBwYXJhbWV0ZXIuIE9wdGlvbjogJHtyZXF1aXJlfWA7XG4gICAgICAgIGlmIChvbkVycm9yKSBvbkVycm9yKG1zZyk7XG4gICAgICAgIGVsc2UgY29uc29sZS5lcnJvcihtc2cpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdHM7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBob3N0aWxlIGZyb20gXCJob3N0aWxlXCI7XG5pbXBvcnQgb3BlbiBmcm9tIFwib3BlblwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB2YWxpZFVSTCBmcm9tIFwidmFsaWQtdXJsXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi9saWIvdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb24gfSBmcm9tIFwiLi4vbGliL3V0aWwvZGVzY3JpcHRpb24uanNcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uL2xpYi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmNSZXN1bHQgfSBmcm9tIFwiLi4vbGliL2V4ZWMvZXhlYy1zeW5jLXJlc3VsdC5qc1wiO1xuaW1wb3J0IHsgdGVtcGxhdGUgfSBmcm9tIFwiLi4vbGliL3V0aWwvdGVtcGxhdGUuanNcIjtcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi4vbGliL3V0aWwvd2FpdC5qc1wiO1xuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbDogYW55KTogdmFsIGlzIEZ1bmN0aW9uIHtcbiAgcmV0dXJuIHZhbCAmJiB0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCI7XG59XG5cbi8qKlxuICogV3JhcHMgYSBtZXRob2QgdGhhdCBub3JtYWxseSBoYXMgYW4gYXN5bmMgY2FsbGJhY2sgcGF0dGVybiBpbnRvIGEgUHJvbWlzZSxcbiAqIHRodXMgbWFraW5nIGF3YWl0IHBhdHRlcm5zIHBvc3NpYmxlLlxuICovXG5mdW5jdGlvbiBwcm9taXNpZnk8VD4oY29udGV4dDogVCwgbWV0aG9kTmFtZToga2V5b2YgVCwgLi4uYXJnczogYW55W10pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlPGFueT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IG1ldGhvZCA9IGNvbnRleHRbbWV0aG9kTmFtZV07XG5cbiAgICBpZiAoIWlzRnVuY3Rpb24obWV0aG9kKSkge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcihgJHtTdHJpbmcobWV0aG9kTmFtZSl9IGlzIG5vdCBhIGZ1bmN0aW9uYCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG1ldGhvZCguLi5hcmdzLCAoZXJyb3I6IEVycm9yLCB2YWx1ZTogYW55KSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGVycm9yKTtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSB8fCB2b2lkIDApO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cblxuLyoqXG4gKiBUaGlzIGxvb2tzIGF0IHRoZSBwYWNrYWdlLmpzb24gYW5kIG1vZGlmaWVzIHRoZSBob3N0IGZpbGUgdG8gaW5jbHVkZSB0aGVcbiAqIGhvc3RzIHNwZWNpZmllZCBpbiB0aGUgXCJob3N0c1wiIHByb3BlcnR5LiBUaGlzIHdpbGwgb25seSB3b3JrIGlmIHRoaXMgc2NyaXB0XG4gKiB3YXMgcmFuIGFzIGFuIGFkbWluaXN0cmF0b3IuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvbmZpZ3VyZUhvc3RzKCkge1xuICAvLyBHZXQgdGhlIHBhY2thZ2UgZm9yIHRoZSBwcm9qZWN0XG4gIGNvbnN0IHBrZyA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICBjb25zdCBob3N0cyA9IHBrZy5ob3N0cztcblxuICAvLyBObyBob3N0cyBwcmVzZW50LCBtZWFucyB3ZSBkbyBub3QgbmVlZCB0byBkbyBhbnl0aGluZyBpbiB0aGlzIHByb2Nlc3MuXG4gIGlmICghaG9zdHMpIHJldHVybjtcblxuICAvLyBVcGRhdGUgdGhlIGhvc3RzIGZpbGUgdG8gbWF0Y2ggdGhlIGhvc3RzIHNwZWNpZmllZCBpbiBwYWNrYWdlLmpzb25cbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGhvc3RzKTtcbiAgbGV0IGxpbmVzID0gYXdhaXQgcHJvbWlzaWZ5KGhvc3RpbGUsIFwiZ2V0XCIsIGZhbHNlKTtcbiAgY29uc3QgbmVlZHNIb3N0OiBbc3RyaW5nLCBzdHJpbmddW10gPSBbXTtcblxuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93KFwiVXBkYXRpbmcgaG9zdHMgZmlsZS4uLlwiKSk7XG4gIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICB0cnkge1xuICAgICAgLy8gSWYgdGhlIGhvc3QgaXMgbm90IHByZXNlbnQgaW4gdGhlIGNvbmZpZyBhbHJlYWR5LCBhZGQgaXQgaW5cbiAgICAgIGlmIChcbiAgICAgICAgIWxpbmVzLmZpbmQoXG4gICAgICAgICAgKGw6IFtzdHJpbmcsIHN0cmluZ10pID0+IGxbMF0gPT09IGtleSAmJiBsWzFdID09PSBob3N0c1trZXldXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBuZWVkc0hvc3QucHVzaChba2V5LCBob3N0c1trZXldXSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIGNvbnNvbGUud2FybihjaGFsay5yZWQoZXJyLm1lc3NhZ2UpKTtcbiAgICB9XG4gIH1cblxuICAvLyBBcHBlbmQgdGhlIGhvc3RzIHRvIC9ldGMvaG9zdHNcbiAgaWYgKG5lZWRzSG9zdC5sZW5ndGggPiAwKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgY2hhbGsueWVsbG93KFxuICAgICAgICBcIkFkZGluZyBob3N0cyAoWW91IG1heSBiZSBwcm9tcHRlZCBmb3IgYWRtaW5pc3RyYXRvciBwYXNzd29yZCk6XFxuXFx0XCIsXG4gICAgICAgIG5lZWRzSG9zdC5tYXAoKGgpID0+IGAke2hbMF19ID0+ICR7aFsxXX1gKS5qb2luKFwiXFxuXFx0XCIpXG4gICAgICApXG4gICAgKTtcblxuICAgIGF3YWl0IGV4ZWNTeW5jKFwic3Vkb1wiLCBbXG4gICAgICBcImVjaG9cIixcbiAgICAgIFwiR3JhbnRlZCBzdWRvIGFjY2VzcyB0byB1cGRhdGUgaG9zdHMgZmlsZS5cIixcbiAgICBdKTtcblxuICAgIC8vIExhc3QgdGhyZWUgY2hhcmFjdGVycyBhcmUgdGhlIHBlcm1pc3Npb25zXG4gICAgY29uc3QgY2htb2RCYWsgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChcInN0YXRcIiwgW1xuICAgICAgXCItZlwiLFxuICAgICAgXCIlcFwiLFxuICAgICAgXCIvZXRjL2hvc3RzXCIsXG4gICAgXSkudG9TdHJpbmcoKTtcblxuICAgIC8vIE1ha2UgdGhlIGZpbGUgd3JpdGVhYmxlXG4gICAgYXdhaXQgZXhlY1N5bmMoXCJzdWRvXCIsIFtcImNobW9kXCIsIFwiNjY2XCIsIFwiL2V0Yy9ob3N0c1wiXSk7XG5cbiAgICBmb3IgKGNvbnN0IGhvc3Qgb2YgbmVlZHNIb3N0KSB7XG4gICAgICBmcy5hcHBlbmRGaWxlU3luYyhcIi9ldGMvaG9zdHNcIiwgYCR7aG9zdFswXX0gJHtob3N0WzFdfWApO1xuICAgIH1cblxuICAgIGZzLmFwcGVuZEZpbGVTeW5jKFwiL2V0Yy9ob3N0c1wiLCBgXFxuYCk7XG5cbiAgICAvLyBSZXN0b3JlIHRoZSBwZXJtaXNzaW9uc1xuICAgIGF3YWl0IGV4ZWNTeW5jKFwic3Vkb1wiLCBbXG4gICAgICBcImNobW9kXCIsXG4gICAgICBjaG1vZEJhay5zdWJzdHJpbmcoY2htb2RCYWsubGVuZ3RoIC0gNCkudHJpbSgpLFxuICAgICAgXCIvZXRjL2hvc3RzXCIsXG4gICAgXSk7XG4gIH1cblxuICBhd2FpdCB3YWl0KDUwMCk7XG5cbiAgLy8gQWZ0ZXIgdXBkYXRpbmcgdGhlIGhvc3QgZmlsZSwgbGV0J3MgZW5zdXJlIGFsbCBob3N0cyB3ZXJlIGFkZGVkLlxuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93KFwiVmVyaWZ5aW5nIGhvc3RzIGZpbGUuLi5cIikpO1xuICBsaW5lcyA9IGF3YWl0IHByb21pc2lmeShob3N0aWxlLCBcImdldFwiLCBmYWxzZSk7XG4gIGxldCBkaWRGYWlsID0gZmFsc2U7XG5cbiAgbmVlZHNIb3N0LmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgIGlmIChcbiAgICAgICFsaW5lcy5maW5kKChsOiBbc3RyaW5nLCBzdHJpbmddKSA9PiBsWzBdID09PSBrZXkgJiYgbFsxXSA9PT0gaG9zdHNba2V5XSlcbiAgICApIHtcbiAgICAgIGRpZEZhaWwgPSB0cnVlO1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBjaGFsay5yZWRCcmlnaHQoXG4gICAgICAgICAgYEZhaWxlZCB0byBhZGQgaG9zdDogJHtjaGFsay55ZWxsb3dCcmlnaHQoXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgICApfSA9PiAke2NoYWxrLnllbGxvd0JyaWdodCh2YWx1ZSl9YFxuICAgICAgICApXG4gICAgICApO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKGRpZEZhaWwpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBjaGFsay5yZWQoZGVzY3JpcHRpb25gXG4gICAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgICAgKiBTb21lIGhvc3RzIHNwZWNpZmllZCBpbiB0aGUgcGFja2FnZS5qc29uIHdlcmUgbm90IGFibGUgdG8gYmUgd3JpdHRlbiAgKlxuICAgICAgICAqIHRvIHRoZSBob3N0cyBmaWxlIGZvciB0aGUgc3lzdGVtLiBZb3UgY2FuIGFtZW5kIHRoaXMgYnkgZWRpdGluZyB0aGUgICAqXG4gICAgICAgICogZmlsZSB5b3Vyc2VsZiwgb3IgYnkgdHJ5aW5nIHRvIHJ1biB0aGlzIHNjcmlwdCBhZ2FpbiBhcyBhbiBhZG1pbi4gICAgICpcbiAgICAgICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgYClcbiAgICApO1xuICB9XG59XG5cbmZ1bmN0aW9uIG9wZW5VUkwoXG4gIHVybENvbmZpZzogUmVjb3JkPHN0cmluZywgc3RyaW5nPixcbiAgdXJsOiBzdHJpbmcsXG4gIG9wdGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZD5cbikge1xuICBsZXQgdGFyZ2V0VXJsID0gdXJsO1xuXG4gIGlmICh2YWxpZFVSTC5pc1dlYlVyaSh1cmwpKSB7XG4gICAgdGFyZ2V0VXJsID0gdXJsO1xuICB9IGVsc2UgaWYgKHVybENvbmZpZ1t1cmxdKSB7XG4gICAgdGFyZ2V0VXJsID0gdXJsQ29uZmlnW3VybF07XG4gIH1cblxuICAvLyBSZXBsYWNlIGFueVxuICBjb25zdCByZXN1bHQgPSB0ZW1wbGF0ZSh7XG4gICAgb3B0aW9ucyxcbiAgICB0ZW1wbGF0ZTogdGFyZ2V0VXJsLFxuICB9KTtcblxuICBpZiAocmVzdWx0LnVucmVzb2x2ZWRUZW1wbGF0ZU9wdGlvbnMuc2l6ZSA+IDApIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBjaGFsay5yZWQoXG4gICAgICAgIGRlc2NyaXB0aW9uYFxuICAgICAgICAgIFlvdSBtdXN0IHNwZWNpZnkgdGhlc2UgZW52IHZhcmlhYmxlcyBmb3IgdGhpcyBVUkwgdG8gd29yazpcbiAgICAgICAgICAke0FycmF5LmZyb20ocmVzdWx0LnVucmVzb2x2ZWRUZW1wbGF0ZU9wdGlvbnMua2V5cygpKS5qb2luKFwiXFxuXFx0XCIpfVxuICAgICAgICBgXG4gICAgICApXG4gICAgKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGVudiBjb25maWd1cmF0aW9uIGZvciBVUkxcIik7XG4gIH1cblxuICB0YXJnZXRVcmwgPSByZXN1bHQudGVtcGxhdGU7XG5cbiAgaWYgKHZhbGlkVVJMLmlzV2ViVXJpKHRhcmdldFVybCkpIHtcbiAgICBjb25zb2xlLndhcm4oXCJOYXZpZ2F0aW5nIHRvOlwiLCBjaGFsay5jeWFuQnJpZ2h0Qm9sZCh0YXJnZXRVcmwpKTtcbiAgICBvcGVuKHRhcmdldFVybCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKFwiQ2FuIG5vdCBvcGVuIGludmFsaWQgVVJMOlwiLCBjaGFsay5yZWRCcmlnaHRCb2xkKHRhcmdldFVybCkpO1xuICB9XG59XG5cbi8qKlxuICogVGhpcyBjb21tYW5kIHNpbXBseSBvcGVucyBhIFVSTCB2aWEgYW4gbnBtIGNvbW1hbmQuIFRoZSB2YWx1ZSBwcm92aWRlZCBjYW4gYmVcbiAqIGEgdmFsaWQgVVJJIE9SIGl0IGNhbiBiZSBhIGtleSBmb3IgdGhlIHZhbHVlIGZvdW5kIGluIHBhY2thZ2UuanNvbiBcInVybFwiLlxuICpcbiAqIGVnIC1cbiAqIHVybDogXCJub2RlIGJpbi9tYWluIHVybCBcXFwiaHR0cHM6Ly9maWdtYS5jb21cXFwiXCJcbiAqXG4gKiBvciBpZiB0aGVyZSBpcyBhIFwiZmlnbWFcIiBlbnRyeSBpbiB0aGUgXCJ1cmxcIiBwcm9wZXJ0eSBpbiBwYWNrYWdlLmpzb24gLVxuICogdXJsOiBcIm5vZGUgYmluL21haW4gdXJsIFxcXCJmaWdtYVxcXCJcIlxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4odXJsPzogc3RyaW5nIHwgc3RyaW5nW10sIG9wdGlvbnM/OiBzdHJpbmdbXSkge1xuICBjb25zdCBwa2cgPSBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpKTtcbiAgY29uc3QgdXJsQ29uZmlnOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0gcGtnPy51cmwgfHwge307XG4gIGNvbnN0IG9wdGlvbnNDb25maWc6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPVxuICAgIG9wdGlvbnM/LnJlZHVjZShcbiAgICAgIChwLCBvcHQsIGkpID0+IHtcbiAgICAgICAgcFtgJHtpICsgMX1gXSA9IG9wdDtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9LFxuICAgICAge30gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPlxuICAgICkgfHwge307XG5cbiAgaWYgKCF1cmwgfHwgdXJsLmxlbmd0aCA8PSAwKSB7XG4gICAgY29uc29sZS53YXJuKGRlc2NyaXB0aW9uYFxuICAgICAgQXZhaWxhYmxlIFVSTHM6XG4gICAgICAgICR7Y2hhbGsuY3lhbkJyaWdodEJvbGQoT2JqZWN0LmtleXModXJsQ29uZmlnKS5qb2luKFwiXFxuICAgICAgICBcIikpfVxuICAgIGApO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgYXdhaXQgY29uZmlndXJlSG9zdHMoKTtcblxuICBjb25zdCBhbGxPcHRpb25zID0ge1xuICAgIC4uLnByb2Nlc3MuZW52LFxuICAgIC4uLm9wdGlvbnNDb25maWcsXG4gIH07XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkodXJsKSkge1xuICAgIHVybC5mb3JFYWNoKCh1cmkpID0+IHtcbiAgICAgIG9wZW5VUkwodXJsQ29uZmlnLCB1cmksIGFsbE9wdGlvbnMpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG9wZW5VUkwodXJsQ29uZmlnLCB1cmwsIGFsbE9wdGlvbnMpO1xuICB9XG59XG4iLAogICAgImltcG9ydCBjaGlsZF9wcm9jZXNzIGZyb20gXCJjaGlsZF9wcm9jZXNzXCI7XG5cbi8qKlxuICogVGhpcyBjaGVja3MgdGhlIGN1cnJlbnQgZ2l0IHJlcG9zaXRvcnkgdG8gc2VlIGlmIGl0IGhhcyB1bmNvbWl0dGVkIGNoYW5nZXNcbiAqIGxpbmdlcmluZy4gVGhpcyBjaGVjayBpcyBuZWNlc3NhcnkgYmVmb3JlIHNvbWUgcHJvY2VzcyBjYW4gYmUgZXhlY3V0ZWRcbiAqIHNhZmVseS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdpdEhhc0NoYW5nZXMoKSB7XG4gIGxldCBvdXRwdXQgPSBcIlwiO1xuXG4gIC8vIFRyeSBVbml4IGNvbXBhdGlibGUgbWV0aG9kXG4gIHRyeSB7XG4gICAgLy8gRXhlY3V0ZSB0aGUgR2l0IGNvbW1hbmQgYW5kIGNhcHR1cmUgdGhlIG91dHB1dFxuICAgIG91dHB1dCA9IGNoaWxkX3Byb2Nlc3MuZXhlY1N5bmMoXCJnaXQgc3RhdHVzIC0tcG9yY2VsYWluPXYxXCIsIHtcbiAgICAgIGVuY29kaW5nOiBcInV0Zi04XCIsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKF9lKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBDb3VudCB0aGUgbnVtYmVyIG9mIGxpbmVzIGluIHRoZSBvdXRwdXRcbiAgLy8gQSBjb3VudCBvZiAwIG1lYW5zIHRoZXJlIGFyZSBubyBjaGFuZ2VzXG4gIGNvbnN0IGxpbmVDb3VudCA9IG91dHB1dC50cmltKCkuc3BsaXQoXCJcXG5cIikuZmlsdGVyKEJvb2xlYW4pLmxlbmd0aDtcbiAgLy8gTm8gb3V0cHV0IG1lYW5zIHRoZXJlIGFyZSBubyBjaGFuZ2VzXG4gIGlmIChsaW5lQ291bnQgPT09IDApIHJldHVybiBmYWxzZTtcblxuICByZXR1cm4gdHJ1ZTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vZXhlYy9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IGdpdEhhc0NoYW5nZXMgfSBmcm9tIFwiLi9naXQtaGFzLWNoYW5nZXMuanNcIjtcbmltcG9ydCB7IHByb21wdENvbmZpcm0gfSBmcm9tIFwiLi4vcHJvbXB0L3Byb21wdC1jb25maXJtLmpzXCI7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudCBjb250ZXh0IGJhY2sgdG8gZGV2IGFuZCByZXNldHMgdG8gdGhlIGxhdGVzdCBpbiBkZXYuXG4gKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBvcGVyYXRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cbiAqXG4gKiBJZiBmYWxzZSBpcyByZXR1cm5lZCwgdGhlIGdpdCBzdGF0ZSBzaG91bGQgYmUgY29uc2lkZXJlZCB1bmRlZmluZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnaXRSZXR1cm5Ub0Rldih3aXRoUHJvbXB0PzogYm9vbGVhbikge1xuICAvLyBJZiBhIHByb21wdCB3YXMgcmVxdWVzdGVkLCB3ZSB3aWxsIGFzayB0aGUgdXNlciBpZiB0aGV5IHdpc2ggdG8gbGV0IHRoaXNcbiAgLy8gb3BlcmF0aW9uIGhhcHBlbi5cbiAgaWYgKHdpdGhQcm9tcHQpIHtcbiAgICBjb25zdCBzaG91bGRHaXRCcmFuY2ggPSBhd2FpdCBwcm9tcHRDb25maXJtKGBcbiAgICAgIFdvdWxkIHlvdSBsaWtlIHRvIHJldHVybiBiYWNrIHRvIGRldmVsb3BtZW50P1xuICAgICAgUnVucyB0aGUgZm9sbG93aW5nOlxuICAgICAgICBnaXQgZmV0Y2hcbiAgICAgICAgZ2l0IGNoZWNrb3V0IGRldlxuICAgICAgICBnaXQgcmVzZXQgLS1oYXJkIG9yaWdpbi9kZXZcbiAgICBgKTtcblxuICAgIGlmICghc2hvdWxkR2l0QnJhbmNoKSByZXR1cm47XG4gIH1cblxuICBpZiAoYXdhaXQgZ2l0SGFzQ2hhbmdlcygpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiQ2FuIG5vdCByZXR1cm4gdG8gZGV2IGJyYW5jaCBhcyBjaGFuZ2VzIGFyZSBwcmVzZW50IG9uIHRoZSBjdXJyZW50IGJyYW5jaC5cIlxuICAgICk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBsZXQgZmFpbCA9IGZhbHNlO1xuXG4gIGlmICghKGF3YWl0IGV4ZWNTeW5jKFwiZ2l0XCIsIFtcImZldGNoXCJdKSkpIGZhaWwgPSB0cnVlO1xuICBpZiAoIShhd2FpdCBleGVjU3luYyhcImdpdFwiLCBbXCJjaGVja291dFwiLCBcImRldlwiXSkpKSBmYWlsID0gdHJ1ZTtcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoXCJnaXRcIiwgW1wicmVzZXRcIiwgXCItLWhhcmRcIiwgXCJvcmlnaW4vZGV2XCJdKSkpIGZhaWwgPSB0cnVlO1xuXG4gIGlmIChmYWlsKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkNvdWxkIG5vdCByZXR1cm4gdG8gZGV2IGJyYW5jaC5cIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBJZ25vcmUgZnJvbSBcImlnbm9yZVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uLy4uL2V4ZWMvZXhlYy1zeW5jLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzIH0gZnJvbSBcIi4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LWRlcGVuZGVuY2llcy5qc1wiO1xuaW1wb3J0IHsgd2FpdCB9IGZyb20gXCIuLi8uLi91dGlsL3dhaXQuanNcIjtcblxuY29uc3QgZ2l0SWdub3JlUGF0aCA9IHBhdGgucmVzb2x2ZShcIi5naXRpZ25vcmVcIik7XG5sZXQgaWdub3JlID0gSWdub3JlLmRlZmF1bHQoKTtcblxuaWYgKGZzLmV4aXN0c1N5bmMoZ2l0SWdub3JlUGF0aCkpIHtcbiAgaWdub3JlID0gaWdub3JlLmFkZChmcy5yZWFkRmlsZVN5bmMoZ2l0SWdub3JlUGF0aCkudG9TdHJpbmcoKSk7XG59XG5cbi8qKlxuICogQnVuZGxlIHRoZSBjb21tYW5kc1xuICovXG5hc3luYyBmdW5jdGlvbiBidWlsZENvbW1hbmRzKCkge1xuICAvLyBXZSBnZXQgYWxsIGRlcGVuZGVuY2llcyBvZiB0aGUgcHJvamVjdCBhbmQgY29uc2lkZXIgdGhlbSBleHRlcm5hbC4gVGhpc1xuICAvLyBpbXByb3ZlcyB0aGUgYWJpbGl0eSBmb3IgdGhlIGNvZGUgdG8gYmUgYnVuZGxlZCBzaW5jZSBiaW4gY29tbWFuZHMgaGl0IGFcbiAgLy8gTE9UIG9mIHNuYWdzIGluIGhvdyB0aGV5IGFyZSBpbXBsZW1lbnRlZC5cbiAgY29uc3QgZGVwcyA9IGF3YWl0IHRhcmdldFByb2plY3REZXBlbmRlbmNpZXMoKTtcblxuICAvLyBCdWlsZCB0aGUgc291cmNlIGRpcmVjdGx5IHRvIHRoZSBkaXN0IGZvbGRlci4gVGhpcyBrZWVwcyBzYW1lIHJlbGF0aXZlXG4gIC8vIGRlcHRoIGZvciBhbGwgZmlsZXMgYXMgd2hlbiB0aGV5IGFyZSBpbiB0aGUgYmluIGZvbGRlciB0aGVtc2VsdmVzIGFuZFxuICAvLyByZWR1Y2VzIHByb2plY3QgY29tcGxleGl0eS5cbiAgY29uc29sZS53YXJuKFwiQnVpbGRpbmcgZnVsbCBkaXN0cmlidXRpb24uLi5cIik7XG4gIGxldCByZXN1bHRzID0gYXdhaXQgQnVuLmJ1aWxkKHtcbiAgICBlbnRyeXBvaW50czogW3BhdGgucmVzb2x2ZShcIi4vYmluL21haW4udHNcIildLFxuICAgIHRhcmdldDogXCJidW5cIixcbiAgICBleHRlcm5hbDogT2JqZWN0LmtleXMoZGVwcyksXG4gICAgbWluaWZ5OiB0cnVlLFxuICAgIHNvdXJjZW1hcDogXCJpbmxpbmVcIixcbiAgfSk7XG5cbiAgZm9yIChjb25zdCByZXNvdXJjZSBvZiByZXN1bHRzLm91dHB1dHMpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIldyaXRpbmcgYmluIGJ1bmRsZSByZXNvdXJjZTpcIixcbiAgICAgIGNoYWxrLmN5YW5CcmlnaHRCb2xkKHJlc291cmNlLnBhdGgpXG4gICAgKTtcblxuICAgIGF3YWl0IEJ1bi53cml0ZShwYXRoLnJlc29sdmUoXCIuL2Rpc3QvYmluXCIsIHJlc291cmNlLnBhdGgpLCByZXNvdXJjZSk7XG4gIH1cblxuICBjb25zb2xlLndhcm4oXCJCdWlsZGluZyBnaW1wZWQgZGlzdHJpYnV0aW9uLi4uXCIpO1xuICByZXN1bHRzID0gYXdhaXQgQnVuLmJ1aWxkKHtcbiAgICBlbnRyeXBvaW50czogW3BhdGgucmVzb2x2ZShcIi4vYmluL21haW4tZ2ltcC50c1wiKV0sXG4gICAgdGFyZ2V0OiBcIm5vZGVcIixcbiAgICBleHRlcm5hbDogT2JqZWN0LmtleXMoZGVwcyksXG4gICAgbWluaWZ5OiB0cnVlLFxuICAgIHNvdXJjZW1hcDogXCJpbmxpbmVcIixcbiAgfSk7XG5cbiAgZm9yIChjb25zdCByZXNvdXJjZSBvZiByZXN1bHRzLm91dHB1dHMpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIldyaXRpbmcgYmluIGJ1bmRsZSByZXNvdXJjZTpcIixcbiAgICAgIGNoYWxrLmN5YW5CcmlnaHRCb2xkKHJlc291cmNlLnBhdGgpXG4gICAgKTtcblxuICAgIGF3YWl0IEJ1bi53cml0ZShwYXRoLnJlc29sdmUoXCIuL2Rpc3QvYmluXCIsIHJlc291cmNlLnBhdGgpLCByZXNvdXJjZSk7XG4gIH1cblxuICBjb25zb2xlLndhcm4oXCJDb3B5aW5nIGVudHJ5IGNyb3NzLXBsYXRmb3JtIGRpc3RyaWJ1dGlvbi4uLlwiKTtcbiAgZnMuY29weUZpbGVTeW5jKFxuICAgIHBhdGgucmVzb2x2ZShcIi4vYmluL21haW4tZW50cnkuY2pzXCIpLFxuICAgIHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW4vbWFpbi1lbnRyeS5janNcIilcbiAgKTtcbn1cblxuLyoqXG4gKiBCdWlsZHMgdGhlIGRpc3RyaWJ1dGlvbiB2ZXJzaW9ucyBvZiBzaGltIGZpbGVzLlxuICovXG5hc3luYyBmdW5jdGlvbiBidWlsZFNoaW0oKSB7XG4gIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCIuL2Jpbi9zaGltXCIpKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJObyBzaGltIGRpc3RyaWJ1dGlvbiBmaWxlcyBmb3VuZCB0byBiZSBidWlsdFwiKTtcbiAgfVxuXG4gIC8vICBEZWxldGUgdGhlIGN1cnJlbnQgc2hpbSBkaXN0cmlidXRpb25cbiAgaWYgKGZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiLi9zaGltXCIpKSkge1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwiLi9zaGltXCIpKTtcbiAgfVxuXG4gIC8vIFdlIGdldCBhbGwgZGVwZW5kZW5jaWVzIG9mIHRoZSBwcm9qZWN0IGFuZCBjb25zaWRlciB0aGVtIGV4dGVybmFsLiBUaGlzXG4gIC8vIGltcHJvdmVzIHRoZSBhYmlsaXR5IGZvciB0aGUgY29kZSB0byBiZSBidW5kbGVkIHNpbmNlIGJpbiBjb21tYW5kcyBoaXQgYVxuICAvLyBMT1Qgb2Ygc25hZ3MgaW4gaG93IHRoZXkgYXJlIGltcGxlbWVudGVkLlxuICBjb25zdCBkZXBzID0gYXdhaXQgdGFyZ2V0UHJvamVjdERlcGVuZGVuY2llcygpO1xuXG4gIGNvbnNvbGUud2FybihcIkJ1aWxkaW5nIHNoaW0gZGlzdHJpYnV0aW9uLi4uXCIpO1xuICBjb25zdCByZXN1bHRzID0gYXdhaXQgQnVuLmJ1aWxkKHtcbiAgICBlbnRyeXBvaW50czogW3BhdGgucmVzb2x2ZShcIi4vYmluL3NoaW0vaW5kZXgudHNcIildLFxuICAgIHRhcmdldDogXCJub2RlXCIsXG4gICAgZXh0ZXJuYWw6IE9iamVjdC5rZXlzKGRlcHMpLFxuICAgIG1pbmlmeTogdHJ1ZSxcbiAgfSk7XG5cbiAgLy8gV3JpdGUgb3VyIGZpbGVzIHRvIGEgbmFtZXNwYWNlIGZvbGRlciB0aGF0IGNhbiBjb250YWluIGFueSBwcm9qZWN0IGltcG9ydHNcbiAgLy8gd2l0aGluIHRoZSBzaGltIHByb2plY3Qgd2l0aG91dCBwb2xsdXRpbmcgdGhlIHByb2plY3Qgd2l0aCBkaXN0cmlidXRpb25cbiAgLy8gZmlsZXMuXG4gIGZvciAoY29uc3QgcmVzb3VyY2Ugb2YgcmVzdWx0cy5vdXRwdXRzKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJXcml0aW5nIHNoaW0gYnVuZGxlIHJlc291cmNlOlwiLFxuICAgICAgY2hhbGsuY3lhbkJyaWdodEJvbGQocmVzb3VyY2UucGF0aClcbiAgICApO1xuXG4gICAgYXdhaXQgQnVuLndyaXRlKFxuICAgICAgcGF0aC5yZXNvbHZlKFwiLi9zaGltL3NyYy9iaW4vc2hpbVwiLCByZXNvdXJjZS5wYXRoKSxcbiAgICAgIHJlc291cmNlXG4gICAgKTtcbiAgfVxuXG4gIC8vIFdyaXRlIGEgYmFycmVsIGV4cG9ydCBpbiB0aGUgc2hpbSBmb2xkZXIgdG8gbm9ybWFsaXplIHRoZSBpbXBvcnQgcGF0aCBpbiBhXG4gIC8vIHdheSB0aGF0IGlzIGNvbnZlbmllbnQgZm9yIHRoZSBkZXZlbG9wZXI6XG4gIC8vIGltcG9ydCB7IC4uLiB9IGZyb20gXCJkZXZvcHMvc2hpbS9pbmRleC5qc1wiO1xuICBmcy53cml0ZUZpbGVTeW5jKFxuICAgIHBhdGgucmVzb2x2ZShcIi4vc2hpbS9pbmRleC5qc1wiKSxcbiAgICBgZXhwb3J0ICogZnJvbSBcIi4vc3JjL2Jpbi9zaGltL2luZGV4LmpzXCI7XFxuYCxcbiAgICB7IGVuY29kaW5nOiBcInV0Zi04XCIgfVxuICApO1xuICBmcy53cml0ZUZpbGVTeW5jKFxuICAgIHBhdGgucmVzb2x2ZShcIi4vc2hpbS9pbmRleC5kLnRzXCIpLFxuICAgIGBleHBvcnQgKiBmcm9tIFwiLi9zcmMvYmluL3NoaW0vaW5kZXguZC50c1wiO1xcbmAsXG4gICAgeyBlbmNvZGluZzogXCJ1dGYtOFwiIH1cbiAgKTtcblxuICAvLyBXcml0ZSB0aGUgdHlwZSBkZWNhbHJhdGlvbnMgZm9yIHRoZSBmaWxlcy4gTWFrZSBhIHRlbXAgdHNjb25maWcgcHJvamVjdFxuICAvLyBmaWxlIHRvIHRhcmdldCB0aGUgc2hpbSBzb3VyY2UgZmlsZXMgb25seS5cbiAgY29uc3QgdHNDb25maWcgPSBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcuanNvblwiKSk7XG4gIHRzQ29uZmlnLmV4Y2x1ZGUgPSB0c0NvbmZpZy5leGNsdWRlIHx8IFtdO1xuICB0c0NvbmZpZy5leGNsdWRlLnB1c2goXCIuL2Jpbi9saWIvKipcIik7XG4gIHRzQ29uZmlnLmluY2x1ZGUgPSBbXCIuL2Jpbi9zaGltXCJdO1xuICBmcy53cml0ZUpTT05TeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSwgdHNDb25maWcpO1xuICAvLyBFbnN1cmUgdGhlIGZpbGUgc3lzdGVtIGhhcyBmbHVzaGVkIHRoZSB0ZW1wIGZpbGUgdG8gZGlza1xuICBhd2FpdCB3YWl0KDUwMCk7XG5cbiAgLy8gUnVuIHRzYyBhbmQgb3V0cHV0IHRoZVxuICBpZiAoXG4gICAgIWV4ZWNTeW5jKFwidHNjXCIsIFtcbiAgICAgIFwiLWRcIixcbiAgICAgIFwiLS1lbWl0RGVjbGFyYXRpb25Pbmx5XCIsXG4gICAgICBcIi0tcHJldHR5XCIsXG4gICAgICBcIi0tb3V0RGlyXCIsXG4gICAgICBwYXRoLnJlc29sdmUoXCIuL3NoaW0vc3JjL2JpblwiKSxcbiAgICAgIFwiLS1wcm9qZWN0XCIsXG4gICAgICBwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIiksXG4gICAgXSlcbiAgKSB7XG4gICAgY29uc29sZS53YXJuKFwiRmFpbGVkIHRvIGNvbXBpbGUgdHlwZSBkZWNsYXJhdGlvbnMgZm9yIHRoZSBzaGltIGZpbGVzLlwiKTtcbiAgICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gUmVtb3ZlIHRoZSB0ZW1wIGZpbGVcbiAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy50ZW1wLmpzb25cIikpO1xufVxuXG4vKipcbiAqIFdlIG11c3QgY29weSBhbGwgb2YgdGhlIHRlbXBsYXRpbmcgZmlsZXMgYW5kIHN0cnVjdHVyZSB0byB0aGUgZGlzdHJpYnV0aW9uIGFzXG4gKiB0aG9zZSBmaWxlcyBhcmUgdXRpbGl6ZWQgaW4gbWFueSBvZiB0aGUgY29tbWFuZHMgYW5kIHRoZSB0ZW1wbGF0aW5nIHN5c3RlbSBhc1xuICogYSB3aG9sZSBtdXN0IHVzZSB0aGVtIGZvciB0aGUgc2FrZSBvZi4uLi55b3Uga25vdy4uLnRlbXBsYXRpbmcuLi5cbiAqXG4gKiBUaGlzIHByZXNlbnRzIHNvbWUgY2hhbGxlbmdlcyBhcyB0aGUgdGVtcGxhdGluZyBzeXN0ZW0gaGFzIGdyb3duIHRvIGJlIGFcbiAqIHJvYnVzdCBzeXN0ZW0gZm9yIHdoaWNoIGl0IGhhcyB0aGUgY2FwYWJpbGl0aWVzIHRvIHJlcGxhY2UgbW9yZSBjb21wbGV4XG4gKiBjb21tYW5kcyBzdWNoIGFzIGBjb21wb25lbnQgbmV3YC4gQnV0IHRoaXMgY29tcGxleGl0eSBtZWFucyB0aGUgdGVtcGxhdGVzXG4gKiB0aGVtc2VsdmVzIG5vdyBoYXZlIGEgc3RydWN0dXJlIHRoYXQgcmVxdWlyZXMgdGhlIHRlbXBsYXRlIHRvIGJlIHRyYW5zcGlsZWRcbiAqIHNvIHRoYXQgaXQgZG9lcyBub3QgY2FycnkgYSBidXJkZW4gb2YgY29tcGxleGl0eSB3aGVuIHRyeWluZyB0byBydW4gdGhlXG4gKiBjb21tYW5kLiBpZSAtIGlmIGEgdGVtcGxhdGUgaW4gdGhlIGRldm9wcyBkaXJlY3RvcnkgdXRpbGl6ZXMgdG9vbGluZyBmcm9tIHRoZVxuICogZGV2b3BzIHByb2plY3Qgc3BlY2lmaWNhbGx5LCB3ZSBkb24ndCB3YW50IHRvIGhhdmUgdG8gY29weSBhbGwgb2YgdGhhdFxuICogdG9vbGluZyBvdmVyIHRvIHRoZSBkaXN0cmlidXRpb24ganVzdCB0byBtYWtlIHRoZSB0ZW1wbGF0ZSB3b3JrLlxuICpcbiAqIFRoaXMgd291bGQgYWxzbyBjYXVzZSBodWdlIGlzc3VlcyBmb3Igb3ZlcnJpZGVzIGFuZCB3aGF0IG5vdC4gU28gd2UgYnVuZGxlXG4gKiB0aGUgdGVtcGxhdGUgdG8gcmVkdWNlIHRoaXMgY29tcGxleGl0eSBhbmQgbWFrZSB0aGUgdGVtcGxhdGUgZ3VhcmFudGVlZCB0b1xuICogd29yayBldmVuIGluIHRoZSB0YXJnZXQgcHJvamVjdHMgd2l0aCBtdWNoIGxlc3MgZnVzcy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29weVRlbXBsYXRlcygpIHtcbiAgLy8gV2Ugbm93IG5lZWQgdG8gY29weSBhbnkgZmlsZXMgdGhhdCBhcmUgXCJyZWFkXCIgZnJvbSB0aGUgYmluIGZvbGRlciBzdWNoIGFzXG4gIC8vIHRlbXBsYXRlcy5cbiAgY29uc29sZS53YXJuKFxuICAgIGNoYWxrLnllbGxvd0JyaWdodChcIkNvcHlpbmcgdGVtcGxhdGUgZmlsZXMgZm9yIGJpbiBkaXN0cmlidXRpb25cIilcbiAgKTtcblxuICBjb25zdCB0ZW1wbGF0ZVNyYyA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi4vLi4vdGVtcGxhdGVcIik7XG4gIGNvbnN0IHRlbXBsYXRlRGlzdCA9IHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW4vdGVtcGxhdGVcIik7XG5cbiAgZnMuY29weVN5bmModGVtcGxhdGVTcmMsIHRlbXBsYXRlRGlzdCk7XG5cbiAgLy8gRmluZCBhbGwgb2YgdGhlIGluZGV4IGZpbGVzIHRoYXQgd2lsbCBuZWVkIHRvIGJlIGNvbXBpbGVkXG4gIGNvbnN0IHRlbXBsYXRlcyA9IGZzXG4gICAgLnJlYWRkaXJTeW5jKHRlbXBsYXRlRGlzdClcbiAgICAubWFwKChmaWxlKSA9PiBwYXRoLnJlc29sdmUodGVtcGxhdGVEaXN0LCBmaWxlLCBcImluZGV4LnRzXCIpKVxuICAgIC5maWx0ZXIoKGZpbGUpID0+IHtcbiAgICAgIGlmIChmcy5leGlzdHNTeW5jKGZpbGUpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gIC8vIFdlIGdldCBhbGwgZGVwZW5kZW5jaWVzIG9mIHRoZSBwcm9qZWN0IGFuZCBjb25zaWRlciB0aGVtIGV4dGVybmFsLiBUaGlzXG4gIC8vIGltcHJvdmVzIHRoZSBhYmlsaXR5IGZvciB0aGUgY29kZSB0byBiZSBidW5kbGVkIHNpbmNlIGJpbiBjb21tYW5kcyBoaXQgYVxuICAvLyBMT1Qgb2Ygc25hZ3MgaW4gaG93IHRoZXkgYXJlIGltcGxlbWVudGVkLlxuICBjb25zdCBkZXBzID0gYXdhaXQgdGFyZ2V0UHJvamVjdERlcGVuZGVuY2llcygpO1xuICBsZXQgZGlkRXJyb3IgPSBmYWxzZTtcblxuICAvLyBCdWlsZCB0aGUgdGVtcGxhdGVzXG4gIGZvciAoY29uc3QgdGVtcGxhdGUgb2YgdGVtcGxhdGVzKSB7XG4gICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IEJ1bi5idWlsZCh7XG4gICAgICBlbnRyeXBvaW50czogW3RlbXBsYXRlXSxcbiAgICAgIHRhcmdldDogXCJidW5cIixcbiAgICAgIGV4dGVybmFsOiBPYmplY3Qua2V5cyhkZXBzKSxcbiAgICAgIG1pbmlmeTogdHJ1ZSxcbiAgICB9KTtcblxuICAgIC8vIEVuc3VyZSB0aGUgYnVuZGxlIHByb2R1Y2VkIHJlc3VsdHMgb3IgdGhpcyBtZWFucyB0aGUgYnVpbGQgZmFpbGVkXG4gICAgaWYgKCFyZXN1bHRzLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGNoYWxrLnJlZEJyaWdodEJvbGQoXCJCdWlsZCBmYWlsZWQgZm9yIHRlbXBsYXRlOlwiKSxcbiAgICAgICAgY2hhbGsuY3lhbkJyaWdodEJvbGQoXG4gICAgICAgICAgcGF0aC5yZWxhdGl2ZSh0ZW1wbGF0ZURpc3QsIHBhdGguZGlybmFtZSh0ZW1wbGF0ZSkpXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiByZXN1bHRzLmxvZ3MpIHtcbiAgICAgICAgLy8gQnVuIHdpbGwgcHJldHR5IHByaW50IHRoZSBtZXNzYWdlIG9iamVjdFxuICAgICAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuICAgICAgfVxuXG4gICAgICBkaWRFcnJvciA9IHRydWU7XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCByZXNvdXJjZSBvZiByZXN1bHRzLm91dHB1dHMpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJXcml0aW5nIHRlbXBsYXRlIGVudHJ5IGZpbGU6XCIsXG4gICAgICAgIGNoYWxrLmN5YW5CcmlnaHRCb2xkKFxuICAgICAgICAgIHBhdGgucmVsYXRpdmUoXG4gICAgICAgICAgICB0ZW1wbGF0ZURpc3QsXG4gICAgICAgICAgICBwYXRoLnJlc29sdmUocGF0aC5kaXJuYW1lKHRlbXBsYXRlKSwgcmVzb3VyY2UucGF0aClcbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICk7XG5cbiAgICAgIGF3YWl0IEJ1bi53cml0ZShcbiAgICAgICAgcGF0aC5yZXNvbHZlKHBhdGguZGlybmFtZSh0ZW1wbGF0ZSksIHJlc291cmNlLnBhdGgpLFxuICAgICAgICByZXNvdXJjZVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBpZiAoZGlkRXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFxuICAgICAgY2hhbGsucmVkQnJpZ2h0Qm9sZChcbiAgICAgICAgXCJTb21lIHRlbXBsYXRlcyBoYXZlIGVycm9ycyAoc2VlIGFib3ZlKSwgc3RvcHBpbmcgdGhlIGJ1aWxkIHByb2Nlc3MuXCJcbiAgICAgIClcbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuXG4vKipcbiAqIENvcHkgYW55IHN1cHBvcnRpbmcgZmlsZXMgdGhhdCBhcmUgcmVxdWlyZWQgZm9yIHRoZSBjb21tYW5kcyB0byB3b3JrXG4gKiBjb3JyZWN0bHkuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvcHlBcnRpZmFjdHMoKSB7XG4gIC8vIENvcHkgdGhlIHNoIHNjcmlwdCBmb3Igc3RhcnRpbmcgdXAgdGhlIGJpbiBjb21tYW5kc1xuICBjb25zb2xlLndhcm4oXG4gICAgY2hhbGsueWVsbG93QnJpZ2h0KFwiQ29weWluZyBlbnRyeSBzaGVsbCBzY3JpcHQgZm9yIGJpbiBkaXN0cmlidXRpb25cIilcbiAgKTtcblxuICBmcy5jb3B5U3luYyhcbiAgICBwYXRoLnJlc29sdmUoXCIuL2Jpbi9tYWluLWVudHJ5LnNoXCIpLFxuICAgIHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW4vbWFpbi1lbnRyeS5zaFwiKVxuICApO1xuXG4gIGZzLmNvcHlTeW5jKFxuICAgIHBhdGgucmVzb2x2ZShcIi4vYmluL21haW4tZW50cnkucHMxXCIpLFxuICAgIHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW4vbWFpbi1lbnRyeS5wczFcIilcbiAgKTtcbn1cblxuLyoqXG4gKiBUaGlzIHJ1bnMgdGhlIGJ1aWxkIHNjcmlwdCBmb3IgYnVuZGxpbmcgdGhlIGRldm9wcyBlbnZpcm9ubWVudFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVsZWFzZUJpbigpIHtcbiAgY29uc29sZS53YXJuKGNoYWxrLmN5YW5CcmlnaHQoXCJCdWlsZGluZyBiaW4gY29tbWFuZHMgZm9yIHRoZSBkaXN0cmlidXRpb24uXCIpKTtcblxuICBpZiAoXG4gICAgIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiLi9iaW4vbWFpbi50c1wiKSkgfHxcbiAgICAhZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCIuL2Jpbi9tYWluLWVudHJ5LnNoXCIpKSB8fFxuICAgIGlnbm9yZS5pZ25vcmVzKFwiYmluXCIpXG4gICkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGBUcmllZCB0byBtYWtlIGEgcmVsZWFzZSBmb3IgdGhlIGJpbiBjb21tYW5kcywgYnV0IG5vIGJpbi9tYWluLnRzIG9yIGJpbi9tYWluLnNoIGVudHJ5IGZpbGUgd2FzIGZvdW5kLiAob3Igd2FzIGdpdGlnbm9yZWQpOlxcblxcdCR7cGF0aC5yZXNvbHZlKFxuICAgICAgICBcIi4vYmluL21haW4udHNcIlxuICAgICAgKX1cXG5cXHQke3BhdGgucmVzb2x2ZShcIi4vYmluL21haW4uc2hcIil9YFxuICAgICk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgZnMuZW5zdXJlRGlyU3luYyhwYXRoLnJlc29sdmUoXCIuL2Rpc3RcIikpO1xuICBmcy5lbnN1cmVEaXJTeW5jKHBhdGgucmVzb2x2ZShcIi4vZGlzdC9iaW4vdGVtcGxhdGVcIikpO1xuXG4gIGF3YWl0IGJ1aWxkQ29tbWFuZHMoKTtcbiAgYXdhaXQgYnVpbGRTaGltKCk7XG4gIGF3YWl0IGNvcHlUZW1wbGF0ZXMoKTtcbiAgYXdhaXQgY29weUFydGlmYWN0cygpO1xufVxuIiwKICAgICJpbXBvcnQgKiBhcyBWaXRlIGZyb20gXCJ2aXRlXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG5leHBvcnQgZnVuY3Rpb24gdml0ZURldm9wc1N0cmluZ1JlcGxhY2VQbHVnaW4oXG4gIHJlcGxhY2VtZW50czogeyBmcm9tOiBzdHJpbmc7IHRvOiBzdHJpbmcgfVtdXG4pOiBWaXRlLlBsdWdpbk9wdGlvbiB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogXCJ2aXRlLWRldm9wcy1zdHJpbmctcmVwbGFjZS1wbHVnaW5cIixcbiAgICBlbmZvcmNlOiBcInByZVwiLFxuXG4gICAgbG9hZChpZDogc3RyaW5nKSB7XG4gICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGgucmVzb2x2ZShpZCk7XG4gICAgICAvLyBEZXRlcm1pbmUgYXBwcm9wcmlhdGUgTUlNRSB0eXBlXG4gICAgICBjb25zdCBleHRlbnNpb25zID0gW1wiLnRzXCIsIFwiLmpzXCIsIFwiLnRzeFwiLCBcIi5qc3hcIl07XG5cbiAgICAgIC8vIElmIHRoZSBleHRlbnNpb24gdHlwZSB3YXMgZXN0YWJsaXNoZWQsIHRoaXMgcmVzb3VyY2Ugd2lsbCBiZSBiYXNlNjQgaW5saW5lZC5cbiAgICAgIGlmIChcbiAgICAgICAgZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkgJiZcbiAgICAgICAgZXh0ZW5zaW9ucy5pbmNsdWRlcyhwYXRoLmV4dG5hbWUoZmlsZVBhdGgpKSAmJlxuICAgICAgICAhZmlsZVBhdGguaW5jbHVkZXMoXCJub2RlX21vZHVsZXNcIikgJiZcbiAgICAgICAgIWZpbGVQYXRoLmluY2x1ZGVzKFwiXFx4MDBcIilcbiAgICAgICkge1xuICAgICAgICBsZXQgY29kZSA9IGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCwgeyBlbmNvZGluZzogXCJ1dGYtOFwiIH0pO1xuICAgICAgICAvLyBSZXBsYWNlIHRoZSBkaXNjb3ZlcmVkIHN0cmluZyBpbiB0aGUgY29kZVxuICAgICAgICByZXBsYWNlbWVudHMuZm9yRWFjaCgocmVwbGFjZW1lbnQpID0+IHtcbiAgICAgICAgICBjb2RlID0gY29kZS5yZXBsYWNlKHJlcGxhY2VtZW50LmZyb20sIHJlcGxhY2VtZW50LnRvKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNvZGU7XG4gICAgICB9XG4gICAgfSxcbiAgfTtcbn1cbiIsCiAgICAiLyoqXG4gKiBUaGlzIGlzIGEgc3BlY2lhbGl6ZWQgcGx1Z2luIGZvciBzdXBwb3J0aW5nIHRoZSBgYXBwL2NvbmZpZ2AgZm9sZGVyIHRvIGhhdmVcbiAqIHRhcmdldHRlZCBlbnZpcm9ubWVudCBmaWxlcyB0aGF0IGF1dG9tYXRpY2FsbHkgc3dhcCBmb3IgdGhlIGNvcnJlY3RcbiAqIGVudmlyb25tZW50IGJlaW5nIGJ1aWx0IGZvci5cbiAqXG4gKiBUaGUgZGVmYXVsdCBjb25maWd1cmF0aW9uIHdvdWxkIGJlIHRvIGhhdmUgYGVudmAgZmlsZXMgYXQgdGhlIHJvb3Qgb2YgdGhlXG4gKiBmb2xkZXI6XG4gKlxuICogYGBgXG4gKiBhcHAvY29uZmlnOlxuICogICBlbnYudHNcbiAqICAgZW52LnByb2QudHNcbiAqICAgZW52LnN0YWdlLnRzXG4gKiAgIGVudi5jdXN0b20udHNcbiAqIGBgYFxuICpcbiAqIFlvdSBoYXZlIHR3byB3YXlzIHRvIHRhcmdldCB0aGUgY29uZmlndXJhdGlvbjpcbiAqXG4gKiBGb3IgZGV2ZWxvcG1lbnQgdXNlIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBgRU5WX01PREVgIHRvIHRhcmdldCB0aGVcbiAqIGVudmlyb25tZW50IG9mIGNob2ljZSBzdWNoIGFzXG4gKlxuICogYGBgXG4gKiBFTlZfTU9ERT1jdXN0b21cbiAqIGBgYFxuICpcbiAqIEZvciByZWxlYXNlcyB5b3Ugc3BlY2lmeSBhIGBidWlsZC5jb25mLmpzYCBmaWxlIGluIHRoZSByb290IG9mIHRoZSBwcm9qZWN0XG4gKiB3aXRoIHRoZSBjb250ZW50czpcbiAqXG4gKiBgYGBcbiAqIGV4cG9ydCBjb25zdCBCVUlMRF9UQVJHRVRTID0gW1wicHJvZFwiLCBcImN1c3RvbVwiXTtcbiAqIGBgYFxuICpcbiAqIFdoaWNoIHdpbGwgY2F1c2UgdGhlIHJlbGVhc2UgcHJvY2VzcyB0byBtYWtlIGEgZGlzdHJpYnV0aW9uIHBlciByZWxlYXNlXG4gKiB0YXJnZXQgc3BlY2lmaWVkLlxuICpcbiAqIGVudiB3aXRoaW4gdGhpcyBkZXZvcHMgc3lzdGVtIGlzIGludGVuZGVkIHRvIGhlbHAgc21vb3RoZSBvdmVyIGEgZGV2IHNlcnZlclxuICogd2l0aCB0aGUgZGV2ZWxvcG1lbnQgZW52aXJvbm1lbnQgdG8gbWFrZSBpdCBlYXNpZXIgdG8gaW50ZXJmYWNlIHdpdGggYW55XG4gKiByZW1vdGUgc2VydmVyIHVuZGVyIGFueSBkb21haW4uXG4gKlxuICogSG93ZXZlciwgdGhlIGNvbmNlcHQgY2FuIGJlIGV4cGFuZGVkIGZvciB0aGUgZGV2ZWxvcGVyIGJ5IGFkZGluZyBzdWIgZm9sZGVyc1xuICogdG8gY3JlYXRlIG1vcmUgc3BlY2lmaWMgZW52aXJvbm1lbnQgY29uZmlndXJhdGlvbnMgdGhhdCBtYXkgYmUgbmVlZGVkIGZvciBhXG4gKiBmcm9udCBlbmQgYnV0IE5PVCBhIHNlcnZlci4gT3IgbWF5IGJlIGl0J3MganVzdCBmb3IgZWFzaWVyIG9yZ2FuaXphdGlvbiBvZlxuICogY29uZmlndXJhdGlvbi4gT25lIGNvbW1vbiB1c2Ugd291bGQgYmUgYSB0aGVtZTpcbiAqXG4gKiBgYGBcbiAqIGFwcC9jb25maWc6XG4gKiAgIGVudjpcbiAqICAgICBlbnYudHNcbiAqICAgICBlbnYucHJvZC50c1xuICogICAgIGVudi5zdGFnZS50c1xuICogICAgIGVudi5jdXN0b20udHNcbiAqICB0aGVtZTpcbiAqICAgICB0aGVtZS50c1xuICogICAgIHRoZW1lLnByb2QudHNcbiAqICAgICB0aGVtZS5zdGFnZS50c1xuICogICAgIHRoZW1lLmN1c3RvbS50c1xuICogYGBgXG4gKlxuICogWW91ciBjb2RlIGltcG9ydHMgdGhlc2UgY29uZmlndXJhdGlvbnMgdmlhOlxuICpcbiAqIGBgYFxuICogaW1wb3J0IHsgVGhpbmcgfSBmcm9tIFwiY29uZmlnL3RoaW5nXCI7XG4gKiBgYGBcbiAqXG4gKiBUaGUgaW1wb3J0YW50IGZvcm1hdHRpbmcgY29uY2VybnMgaGVyZSBpcyB0byBlbnN1cmUgeW91IG1ha2UgYSBjb21tb24gZW50cnlcbiAqIGZpbGUgd2l0aCB0aGUgc2FtZSBuYW1lIGFzIHRoZSBwYXJlbnQgZm9sZGVyOlxuICpcbiAqIGBgYFxuICogYXBwL2NvbmZpZzpcbiAqICAgZW52OlxuICogICAgIGVudi50c1xuICogICB0aGVtZTpcbiAqICAgICB0aGVtZS50c1xuICogYGBgXG4gKlxuICogVGhlbiB5b3UgYWRkIGFueSBhZGRpdGlvbmFsIGVudmlyb25tZW50cyBvZiB0aGUgc2FtZSBmaWxlIG5hbWUuXG4gKiBgPGZpbGU+LjxlbnZpcm9ubWVudD4udHNgLlxuICpcbiAqIFRoZSBmaWxlIHdpdGggbm8gZW52aXJvbm1lbnQgaW4gaXQncyBmaWxlIHBhdGggaXMgdGhlIGZpbGUgdXNlZCBpblxuICogZGV2ZWxvcG1lbnQgd2hlbiBubyBlbnZpcm9ubWVudCBpcyBzcGVjaWZpZWQuXG4gKi9cblxuaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyB2aXRlRGV2b3BzU3RyaW5nUmVwbGFjZVBsdWdpbiB9IGZyb20gXCIuL3ZpdGUtZGV2b3BzLXN0cmluZy1yZXBsYWNlLXBsdWdpbi5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gdml0ZURldm9wc0FwcENvbmZpZ1BsdWdpbihlbnY/OiBzdHJpbmcgfCBudWxsKSB7XG4gIC8vIFRoaXMgaXMgYSBmaXggZm9yIHJ1bm5pbmcgc3Rvcnlib29rIGhvdyB3ZSBydW4gaXQgd2hpY2ggYWRqdXN0cyB0aGUgY3dkXG4gIC8vIHRvIHRoZSBkZXZvcHMgZm9sZGVyXG4gIGNvbnN0IHByb2plY3RSb290ID0gcHJvY2Vzcy5lbnYuUFJPSkVDVF9ST09UIHx8IFwiLlwiO1xuICAvLyBMb29rIGluIHRoZSBhcHAgY29uZmlnIGZvbGRlciBmb3IgYW55IGZvbGRlciBlbnZpcm9ubWVudHNcbiAgY29uc3QgY29uZmlnUGF0aCA9IHBhdGgucmVzb2x2ZShwcm9qZWN0Um9vdCwgXCJhcHAvY29uZmlnXCIpO1xuXG4gIGlmICghZnMuZXhpc3RzU3luYyhjb25maWdQYXRoKSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGB2aXRlRGV2b3BzQXBwQ29uZmlnUGx1Z2luOiAke2NoYWxrLmN5YW5CcmlnaHRCb2xkKFxuICAgICAgICBcIk5vIGFwcC9jb25maWcgZm9sZGVyIGZvdW5kLlwiXG4gICAgICApfWBcbiAgICApO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBhbGxGb2xkZXJzID0gZnMucmVhZGRpclN5bmMoY29uZmlnUGF0aCkuZmlsdGVyKChmKSA9PiB7XG4gICAgICByZXR1cm4gZnMuc3RhdFN5bmMocGF0aC5qb2luKGNvbmZpZ1BhdGgsIGYpKS5pc0RpcmVjdG9yeSgpO1xuICAgIH0pO1xuICAgIGNvbnN0IGZvbGRlclBhdGhzID0gYWxsRm9sZGVycy5tYXAoKGYpID0+IHBhdGguam9pbihjb25maWdQYXRoLCBmKSk7XG4gICAgY29uc3QgcmVwbGFjZW1lbnRzID0gYWxsRm9sZGVycy5tYXAoKGZvbGRlciwgaSkgPT4ge1xuICAgICAgLy8gV2l0aCBubyBlbnZpcm9ubWVudCwgd2UgY2hlY2sgZm9yIHRoZSBzcGVjaWFsIGNhc2Ugb2YgYSAubG9jYWwgZmlsZSBiZWluZ1xuICAgICAgLy8gcHJlc2VudCBpbiB0aGUgZm9sZGVyLiBJZiBpdCBpcywgd2UgdXNlIHRoYXQgYXMgdGhlIGVudmlyb25tZW50LlxuICAgICAgaWYgKCFlbnYpIHtcbiAgICAgICAgLy8gSWYgbG9jYWwgZXhpc3RzLCBjcmVhdGUgc3BlY2lhbCByZXBsYWNlbWVudCB0byB0YXJnZXQgdGhlIGxvY2FsIGZpbGVcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGZvbGRlclBhdGhzW2ldLCBgJHtmb2xkZXJ9LmxvY2FsYCkpIHx8XG4gICAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oZm9sZGVyUGF0aHNbaV0sIGAke2ZvbGRlcn0ubG9jYWwuanNgKSkgfHxcbiAgICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihmb2xkZXJQYXRoc1tpXSwgYCR7Zm9sZGVyfS5sb2NhbC50c2ApKSB8fFxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGZvbGRlclBhdGhzW2ldLCBgJHtmb2xkZXJ9LmxvY2FsLnRzeGApKSB8fFxuICAgICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGZvbGRlclBhdGhzW2ldLCBgJHtmb2xkZXJ9LmxvY2FsLmpzeGApKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBmcm9tOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfVwiYCxcbiAgICAgICAgICAgICAgdG86IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LmxvY2FsXCJgLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgZnJvbTogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0uanNcImAsXG4gICAgICAgICAgICAgIHRvOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS5sb2NhbC5qc1wiYCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIGZyb206IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LnRzXCJgLFxuICAgICAgICAgICAgICB0bzogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0ubG9jYWwudHNcImAsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPdGhlcndpc2UsIHRoZSBkZWZhdWx0IGVudiBmaWxlIHdpbGwgYmUgdXNlZFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQW4gZW52aXJvbWVudCB3YXMgc3BlY2lmaWVkLCBzbyB3ZSB3aWxsIHRhcmdldCB0aGF0IGVudmlyb25tZW50XG4gICAgICByZXR1cm4gW1xuICAgICAgICB7XG4gICAgICAgICAgZnJvbTogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn1cImAsXG4gICAgICAgICAgdG86IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LiR7ZW52fVwiYCxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZyb206IGBcImNvbmZpZy8ke2ZvbGRlcn0vJHtmb2xkZXJ9LmpzXCJgLFxuICAgICAgICAgIHRvOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS4ke2Vudn0uanNcImAsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBmcm9tOiBgXCJjb25maWcvJHtmb2xkZXJ9LyR7Zm9sZGVyfS50c1wiYCxcbiAgICAgICAgICB0bzogYFwiY29uZmlnLyR7Zm9sZGVyfS8ke2ZvbGRlcn0uJHtlbnZ9LnRzXCJgLFxuICAgICAgICB9LFxuICAgICAgXTtcbiAgICB9KTtcblxuICAgIC8vIEZsYXR0ZW4gYWxsIG9mIG91ciBtYXBwaW5ncyBpbnRvIGEgc2luZ2xlIGFycmF5XG4gICAgY29uc3QgZmxhdHRlbmVkID0gcmVwbGFjZW1lbnRzLnJlZHVjZSgoYWNjLCB2YWwpID0+IGFjYy5jb25jYXQodmFsKSwgW10pO1xuXG4gICAgLy8gU2VlIGlmIHRoZXJlJ3MgYSBiYXNlIGVudiBsb2NhbCBmaWxlIHRvIHVzZVxuICAgIGNvbnN0IHNob3VsZFVzZUxvY2FsVG9wRW52ID1cbiAgICAgICFlbnYgJiZcbiAgICAgIChmcy5leGlzdHNTeW5jKHBhdGguam9pbihjb25maWdQYXRoLCBgZW52LmxvY2FsYCkpIHx8XG4gICAgICAgIGZzLmV4aXN0c1N5bmMocGF0aC5qb2luKGNvbmZpZ1BhdGgsIGBlbnYubG9jYWwuanNgKSkgfHxcbiAgICAgICAgZnMuZXhpc3RzU3luYyhwYXRoLmpvaW4oY29uZmlnUGF0aCwgYGVudi5sb2NhbC50c2ApKSB8fFxuICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihjb25maWdQYXRoLCBgZW52LmxvY2FsLnRzeGApKSB8fFxuICAgICAgICBmcy5leGlzdHNTeW5jKHBhdGguam9pbihjb25maWdQYXRoLCBgZW52LmxvY2FsLmpzeGApKSk7XG5cbiAgICAvLyBHZW5lcmF0ZSBtYXBwaW5ncyBmb3IgdGhlIHRvcCBsZXZlbCBlbnYgZmlsZS4gVGhpcyBpcyBhIGxlZ2FjeSBzdXBwb3J0XG4gICAgLy8gZmVhdHVyZS5cbiAgICBjb25zdCBtYXBUb3BFbnYgPSBzaG91bGRVc2VMb2NhbFRvcEVudlxuICAgICAgPyAvLyBVc2UgdGhlIGxvY2FsIGVudiBmaWxlIGlmIGl0IGV4aXN0c1xuICAgICAgICBbXG4gICAgICAgICAgeyBmcm9tOiAnXCJjb25maWcvZW52XCInLCB0bzogYFwiY29uZmlnL2Vudi5sb2NhbFwiYCB9LFxuICAgICAgICAgIHsgZnJvbTogJ1wiY29uZmlnL2Vudi5qc1wiJywgdG86IGBcImNvbmZpZy9lbnYubG9jYWwuanNcImAgfSxcbiAgICAgICAgICB7IGZyb206ICdcImNvbmZpZy9lbnYudHNcIicsIHRvOiBgXCJjb25maWcvZW52LmxvY2FsLnRzXCJgIH0sXG4gICAgICAgIF1cbiAgICAgIDogZW52XG4gICAgICA/IC8vIFVzZSB0aGUgY29ycmVjdCBlbnZpcm9ubWVudCB3aGVuIHNwZWNpZmllZFxuICAgICAgICBbXG4gICAgICAgICAgeyBmcm9tOiAnXCJjb25maWcvZW52XCInLCB0bzogYFwiY29uZmlnL2Vudi4ke2Vudn1cImAgfSxcbiAgICAgICAgICB7IGZyb206ICdcImNvbmZpZy9lbnYuanNcIicsIHRvOiBgXCJjb25maWcvZW52LiR7ZW52fS5qc1wiYCB9LFxuICAgICAgICAgIHsgZnJvbTogJ1wiY29uZmlnL2Vudi50c1wiJywgdG86IGBcImNvbmZpZy9lbnYuJHtlbnZ9LnRzXCJgIH0sXG4gICAgICAgIF1cbiAgICAgIDogLy8gSWYgbm8gZW52aXJvbm1lbnQgd2FzIHNwZWNpZmllZCwgbm8gbWFwcGluZyBzaG91bGQgaGFwcGVuXG4gICAgICAgIFtdO1xuXG4gICAgY29uc3QgYWxsTWFwcGluZ3MgPSBbXG4gICAgICAvLyBTdXBwb3J0IGVudiBmcm9tIHRoZSByb290IG9mIHRoZSBjb25maWcgZm9sZGVyXG4gICAgICAuLi5tYXBUb3BFbnYsXG4gICAgICAvLyBTdXBwb3J0IGFueSBmb2xkZXIgZW52aXJvbm1lbnRzXG4gICAgICAuLi5mbGF0dGVuZWQsXG4gICAgXTtcblxuICAgIC8vIExvZyB0aGUgbWFwcGluZyBjb25maWd1cmF0aW9uIGluIHVzZVxuICAgIGlmIChhbGxNYXBwaW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oYFxuXG4gICR7Y2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIlVzaW5nIHRoZSBmb2xsb3dpbmcgbWFwcGluZ3MgZm9yIGFwcCBjb25maWc6XCIpfVxuXG4gIFxcdCR7Y2hhbGsuY3lhbkJyaWdodEJvbGQoXG4gICAgYWxsTWFwcGluZ3MubWFwKChtKSA9PiBgXFxuICAke20uZnJvbX0gPT4gJHttLnRvfWApLmpvaW4oXCJcXG5cXHRcIilcbiAgKX1cblxuICAgICAgYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZpdGVEZXZvcHNTdHJpbmdSZXBsYWNlUGx1Z2luKGFsbE1hcHBpbmdzKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIGNoYWxrLnJlZEJyaWdodEJvbGQoYFxuICAgICAgQXBwIGNvbmZpZyBwbHVnaW4gZmFpbGVkIHRvIGxvYWQuIFRoZSBkZWZhdWx0IGNvbmZpZyBwYXRocyB3aWxsIGJlIHVzZWRcbiAgICAgIGFuZCBhbnkgc3BlY2lmaWMgZW52aXJvbm1lbnQgcmVxdWVzdGVkIHdpbGwgYmUgaWdub3JlZC5cbiAgICBgKVxuICAgICk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0ICogYXMgVml0ZSBmcm9tIFwidml0ZVwiO1xuaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IElnbm9yZSBmcm9tIFwiaWdub3JlXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgYnVpbGRWaXRlQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2J1aWxkLXZpdGUtY29uZmlnLmpzXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0VmVyc2lvbiB9IGZyb20gXCIuLi8uLi8uLi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC12ZXJzaW9uLmpzXCI7XG5pbXBvcnQgeyB2aXRlRGV2b3BzQXBwQ29uZmlnUGx1Z2luIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NoaW0vdml0ZS1wbHVnaW5zL3ZpdGUtZGV2b3BzLWFwcC1jb25maWctcGx1Z2luLmpzXCI7XG5cbmNvbnN0IGdpdElnbm9yZVBhdGggPSBwYXRoLnJlc29sdmUoXCIuZ2l0aWdub3JlXCIpO1xubGV0IGlnbm9yZSA9IElnbm9yZS5kZWZhdWx0KCk7XG5cbmlmIChmcy5leGlzdHNTeW5jKGdpdElnbm9yZVBhdGgpKSB7XG4gIGlnbm9yZSA9IGlnbm9yZS5hZGQoZnMucmVhZEZpbGVTeW5jKGdpdElnbm9yZVBhdGgpLnRvU3RyaW5nKCkpO1xufVxuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgdGhlIGJ1bmRsaW5nIHByb2Nlc3MgZm9yIGRpc3RyaWJ1dGlvbi5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbGVhc2VDbGllbnQoZW52OiBzdHJpbmcpIHtcbiAgY29uc29sZS53YXJuKGNoYWxrLmN5YW5CcmlnaHQoXCJCdWlsZGluZyBjbGllbnQgZmlsZXMgZm9yIHRoZSBkaXN0cmlidXRpb24uXCIpKTtcblxuICAvLyBQcm92aWRlIHRoZSBidW5kbGluZyBwcm9jZXNzIHRoZSBjdXJyZW50IGJ1aWxkIHZlcnNpb24uIFRoaXMgYWxsb3dzXG4gIC8vIHByaW50aW5nIHRoZSB2ZXJzaW9uIGluIGEgbWVhbmluZ2Z1bCB3YXkgZm9yIGRlYnVnZ2luZy5cbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPVxuICAgIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OIHx8IChhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpKTtcblxuICBpZiAocHJvY2Vzcy5lbnYuRk9SQ0VfQlVJTEQgIT09IFwidHJ1ZVwiKSB7XG4gICAgaWYgKFxuICAgICAgIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKFwiYXBwL2NsaWVudFwiKSkgfHxcbiAgICAgIGlnbm9yZS5pZ25vcmVzKFwiYXBwL2NsaWVudFwiKVxuICAgICkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYFRyaWVkIHRvIG1ha2UgYSByZWxlYXNlIGZvciB0aGUgd2ViIGFwcCBjbGllbnQsIGJ1dCBubyBhcHAvY2xpZW50IGVudHJ5IGZpbGUgd2FzIGZvdW5kLiAob3Igd2FzIGdpdGlnbm9yZWQpOlxcblxcdCR7cGF0aC5yZXNvbHZlKFxuICAgICAgICAgIFwiYXBwL2NsaWVudFwiXG4gICAgICAgICl9YFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBjb25zdCBub2RlRW52QmFrID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlY7XG4gIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gXCJwcm9kdWN0aW9uXCI7XG5cbiAgY29uc29sZS53YXJuKFxuICAgIGBSZWxlYXNpbmcgJHtjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiYXBwL2NsaWVudFwiKX0gZm9yIEVudmlyb25tZW50OmAsXG4gICAgY2hhbGsuY3lhbkJyaWdodEJvbGQoZW52KVxuICApO1xuICBwcm9jZXNzLmVudi5CVUlMRF9FTlYgPSBlbnY7XG5cbiAgY29uc3QgY29uZmlnID0gYXdhaXQgYnVpbGRWaXRlQ29uZmlnKCk7XG5cbiAgLy8gTWFrZSBzdXJlIG91ciBlbnZpcm9ubWVudCBpcyByZXBsYWNlZCBmb3IgdGhlIGJ1aWxkXG4gIGNvbmZpZy5wbHVnaW5zID0gW3ZpdGVEZXZvcHNBcHBDb25maWdQbHVnaW4oZW52KSwgLi4uKGNvbmZpZy5wbHVnaW5zIHx8IFtdKV07XG5cbiAgY29uZmlnLmxvZ0xldmVsID0gXCJ3YXJuXCI7XG4gIGNvbmZpZy5tb2RlID0gXCJwcm9kdWN0aW9uXCI7XG4gIGNvbmZpZy5yb290ID0gcGF0aC5yZXNvbHZlKFwiYXBwL2NsaWVudFwiKTtcbiAgY29uZmlnLmJ1aWxkIS5vdXREaXIgPSBwYXRoLnJlc29sdmUoXCJkaXN0L2FwcC9jbGllbnRcIiwgZW52KTtcbiAgY29uZmlnLmJ1aWxkIS53YXRjaCA9IHZvaWQgMDtcbiAgY29uZmlnLmJ1aWxkIS5yb2xsdXBPcHRpb25zIS5vdXRwdXQgPSB7XG4gICAgZGlyOiBjb25maWcuYnVpbGQhLm91dERpcixcbiAgICBlbnRyeUZpbGVOYW1lczogXCJpbmRleC5qc1wiLFxuICAgIGNodW5rRmlsZU5hbWVzOiBcImluZGV4LmpzXCIsXG4gICAgbWFudWFsQ2h1bmtzOiB1bmRlZmluZWQsXG4gIH07XG5cbiAgYXdhaXQgVml0ZS5idWlsZChjb25maWcpO1xuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IG5vZGVFbnZCYWs7XG5cbiAgLy8gUnVuIGEgcXVpY2sgY2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBkaXN0cmlidXRpb24gZmlsZSB3YXMgbWFkZVxuICBpZiAoIWZzLmV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKGBkaXN0L2FwcC9jbGllbnQvJHtlbnZ9L2luZGV4LmpzYCkpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiXFxuXFxuRmFpbGVkIHRvIGNyZWF0ZSBDbGllbnQgb3V0cHV0IGJ1bmRsZS4gRXhpdGluZyBwcm9jZXNzLi4uXFxuXFxuXCJcbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuIiwKICAgICJpbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgZ2V0UGFja2FnZU1hbmFnZXIgfSBmcm9tIFwiLi9nZXQtcGFja2FnZS1tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBpc0RlZmluZWQgfSBmcm9tIFwiLi4vdXRpbC90eXBlcy5qc1wiO1xuXG4vKipcbiAqIEV4ZWN1dGVzIGFuIGBucHggPGNvbW1hbmQ+YCBpbiB0aGUgY3VycmVudCBjb250ZXh0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY1NjcmlwdFgoXG4gIGFyZ3M6IChzdHJpbmcgfCB1bmRlZmluZWQgfCBudWxsKVtdID0gW10sXG4gIG9wdGlvbnM/OiB7XG4gICAgZXhjbHVkZUJ1bkZsYWc/OiBib29sZWFuO1xuICB9XG4pIHtcbiAgY29uc3QgbWFuYWdlciA9IGF3YWl0IGdldFBhY2thZ2VNYW5hZ2VyKCk7XG5cbiAgaWYgKGV4ZWNTY3JpcHRYLm9wdGltaXplKSB7XG4gICAgaWYgKG1hbmFnZXJbMV0gPT09IFwiYnVueFwiKSB7XG4gICAgICByZXR1cm4gZXhlY1N5bmMoXG4gICAgICAgIG1hbmFnZXJbMV0sXG4gICAgICAgIFtvcHRpb25zPy5leGNsdWRlQnVuRmxhZyA/IG51bGwgOiBcIi0tYnVuXCIsIC4uLmFyZ3NdLmZpbHRlcihpc0RlZmluZWQpXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBleGVjU3luYyhtYW5hZ2VyWzFdLCBbLi4uYXJnc10pO1xufVxuXG5leGVjU2NyaXB0WC5vcHRpbWl6ZSA9IHRydWU7XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi8uLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBleGVjU2NyaXB0WCB9IGZyb20gXCIuLi8uLi8uLi9leGVjL2V4ZWMtc2NyaXB0eC5qc1wiO1xuXG4vKipcbiAqIEdlbmVyYXRlcyB0eXBlcyBmb3IgdGhlIGJ1aWxkIGZvciB0aGUgdGFyZ2V0IHByb2plY3QgdWkgZm9sZGVyLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVsZWFzZUxpYnJhcnlUeXBlcygpIHtcbiAgLy8gTXVzdCBoYXZlIGEgY29tcG9uZW50IGxpYiBmb2xkZXIgdG8gY29uc2lkZXJcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcInVpXCIpKSkgcmV0dXJuO1xuICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIGZvbGRlciB0byBpbmplY3QgdGhlIHR5cGVzIGludG9cbiAgZnMuZW5zdXJlRGlyU3luYyhwYXRoLnJlc29sdmUoXCJkaXN0L3R5cGVzXCIpKTtcbiAgLy8gR2VuZXJhdGUgdGhlIC5kLnRzIGZpbGVzIHVzaW5nIHRzYyBjb21tYW5kIHZpYSBidW54XG4gIGNvbnNvbGUud2FybihjaGFsay55ZWxsb3dCcmlnaHRCb2xkKFwiR2VuZXJhdGluZyAuZC50cyBmaWxlcy4uLlwiKSk7XG5cbiAgLy8gUGVyZm9ybSB0aGUgZHRzIGdlbmVyYXRpb25cbiAgZXhlY1NjcmlwdFgoW1xuICAgIFwidHNjXCIsXG4gICAgXCItLWVtaXREZWNsYXJhdGlvbk9ubHlcIixcbiAgICBcIi0tZGVjbGFyYXRpb25cIixcbiAgICBcIi0tb3V0RGlyXCIsXG4gICAgXCJkaXN0L3R5cGVzXCIsXG4gICAgXCItLXByb2plY3RcIixcbiAgICBwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy5qc29uXCIpLFxuICBdKTtcblxuICAvLyBEZWxldGUgdGhlIGdlbmVyYXRlZCB0eXBlIG9mIGV2ZXJ5IGZvbGRlciBFWENFUFQgdGhlIHVpIGFuZCB1dGlsIGZvbGRlclxuICBjb25zdCBmb2xkZXJzID0gZnMucmVhZGRpclN5bmMocGF0aC5yZXNvbHZlKFwiZGlzdC90eXBlc1wiKSk7XG4gIGZvciAoY29uc3QgZm9sZGVyIG9mIGZvbGRlcnMpIHtcbiAgICBpZiAoZm9sZGVyID09PSBcInVpXCIgfHwgZm9sZGVyID09PSBcInV0aWxcIikgY29udGludWU7XG4gICAgY29uc29sZS53YXJuKGNoYWxrLnllbGxvd0JyaWdodChgUmVtb3ZpbmcgdHlwZXMgZm9yIGZvbGRlcjogJHtmb2xkZXJ9YCkpO1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwiZGlzdC90eXBlc1wiLCBmb2xkZXIpKTtcbiAgfVxufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdGFyZ2V0UHJvamVjdE5hbWUoKSB7XG4gIGNvbnN0IHBhY2thZ2VKc29uID0gZnMucmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSk7XG4gIHJldHVybiBwYWNrYWdlSnNvbi5uYW1lIHx8IFwiXCI7XG59XG4iLAogICAgImltcG9ydCAqIGFzIFZpdGUgZnJvbSBcInZpdGVcIjtcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBJZ25vcmUgZnJvbSBcImlnbm9yZVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGJ1aWxkVml0ZUNvbmZpZyB9IGZyb20gXCIuLi8uLi9idWlsZC12aXRlLWNvbmZpZy5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vLi4vdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgcmVsZWFzZUxpYnJhcnlUeXBlcyB9IGZyb20gXCIuL3JlbGVhc2UtbGlicmFyeS10eXBlcy5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdERlcGVuZGVuY2llcyB9IGZyb20gXCIuLi8uLi8uLi90YXJnZXQtcHJvamVjdC90YXJnZXQtcHJvamVjdC1kZXBlbmRlbmNpZXMuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3ROYW1lIH0gZnJvbSBcIi4uLy4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LW5hbWUuanNcIjtcbmltcG9ydCB7IHRhcmdldFByb2plY3RWZXJzaW9uIH0gZnJvbSBcIi4uLy4uLy4uL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LXZlcnNpb24uanNcIjtcblxuY29uc3QgZ2l0SWdub3JlUGF0aCA9IHBhdGgucmVzb2x2ZShcIi5naXRpZ25vcmVcIik7XG5sZXQgaWdub3JlID0gSWdub3JlLmRlZmF1bHQoKTtcblxuaWYgKGZzLmV4aXN0c1N5bmMoZ2l0SWdub3JlUGF0aCkpIHtcbiAgaWdub3JlID0gaWdub3JlLmFkZChmcy5yZWFkRmlsZVN5bmMoZ2l0SWdub3JlUGF0aCkudG9TdHJpbmcoKSk7XG59XG5cbi8qKlxuICogQnVuZGxlcyB0aGUgbGlicmFyeSBmb3IgZGlzdHJpYnV0aW9uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWxlYXNlTGlicmFyeSgpIHtcbiAgY29uc29sZS53YXJuKGNoYWxrLmN5YW5CcmlnaHQoXCJDb3B5aW5nIHVpIGZpbGVzIGZvciB0aGUgZGlzdHJpYnV0aW9uLlwiKSk7XG5cbiAgLy8gUHJvdmlkZSB0aGUgYnVuZGxpbmcgcHJvY2VzcyB0aGUgY3VycmVudCBidWlsZCB2ZXJzaW9uLiBUaGlzIGFsbG93c1xuICAvLyBwcmludGluZyB0aGUgdmVyc2lvbiBpbiBhIG1lYW5pbmdmdWwgd2F5IGZvciBkZWJ1Z2dpbmcuXG4gIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OID1cbiAgICBwcm9jZXNzLmVudi5WSVRFX1JFTEVBU0VfVkVSU0lPTiB8fCAoYXdhaXQgdGFyZ2V0UHJvamVjdFZlcnNpb24oKSk7XG5cbiAgaWYgKCFwcm9jZXNzLmVudi5GT1JDRV9CVUlMRCkge1xuICAgIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCJ1aVwiKSkgfHwgaWdub3JlLmlnbm9yZXMoXCJ1aVwiKSkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgYFwiTm8gbGlicmFyeSBwcm9qZWN0IGZvdW5kIChvciB3YXMgZ2l0aWdub3JlZCkgZm9yIGJ1bmRsaW5nIHJlbGVhc2UgYXQ6XFxuXFx0JHtwYXRoLnJlc29sdmUoXG4gICAgICAgICAgXCJ1aVwiXG4gICAgICAgICl9YFxuICAgICAgKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH1cblxuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIlN0YXJ0aW5nIFZpdGUgY2xpZW50IGJ1aWxkLi4uXCIpKTtcbiAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcInVpL2luZGV4LnRzXCIpKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICBcIlRoZSBVSSBmb2xkZXIgcHJvamVjdCBoYXMgbm8gaW5kZXgudHMgZW50cnkgcG9pbnQgdG8gY3JlYXRlIHRoZSBsaWJyYXJ5LlwiXG4gICAgKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBVcGRhdGUgdGhlIC5kLnRzIGZpbGVzIGZvciB0aGUgbGlicmFyeSBwcm9qZWN0XG4gIGF3YWl0IHJlbGVhc2VMaWJyYXJ5VHlwZXMoKTtcblxuICBjb25zb2xlLndhcm4oY2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIkJ1aWxkaW5nIGxpYnJhcnkgYnVuZGxlLi4uXCIpKTtcbiAgY29uc3QgY29uZmlnID0gYXdhaXQgYnVpbGRWaXRlQ29uZmlnKCk7XG5cbiAgY29uZmlnLmxvZ0xldmVsID0gXCJ3YXJuXCI7XG4gIGNvbmZpZy5yb290ID0gcGF0aC5yZXNvbHZlKFwidWlcIik7XG4gIGNvbmZpZy5idWlsZCEubGliID0ge1xuICAgIC8vIENvdWxkIGFsc28gYmUgYSBkaWN0aW9uYXJ5IG9yIGFycmF5IG9mIG11bHRpcGxlIGVudHJ5IHBvaW50c1xuICAgIGVudHJ5OiBwYXRoLnJlc29sdmUoXCJ1aS9pbmRleC50c1wiKSxcbiAgICBuYW1lOiAoYXdhaXQgdGFyZ2V0UHJvamVjdE5hbWUoKSkuc3BsaXQoXCJAXCIpLmpvaW4oXCJcIikuc3BsaXQoXCIvXCIpLmpvaW4oXCJfXCIpLFxuICAgIC8vIFRoZSBwcm9wZXIgZXh0ZW5zaW9ucyB3aWxsIGJlIGFkZGVkXG4gICAgZmlsZU5hbWU6IFwiaW5kZXhcIixcbiAgfTtcblxuICBjb25maWcubW9kZSA9IFwicHJvZHVjdGlvblwiO1xuICBjb25maWcucm9vdCA9IHBhdGgucmVzb2x2ZShcImFwcC9jbGllbnRcIik7XG4gIGNvbmZpZy5idWlsZCEub3V0RGlyID0gcGF0aC5yZXNvbHZlKFwiZGlzdC91aVwiKTtcbiAgY29uZmlnLmJ1aWxkIS53YXRjaCA9IHZvaWQgMDtcbiAgY29uZmlnLmJ1aWxkIS5yb2xsdXBPcHRpb25zIS5vdXRwdXQgPSB7XG4gICAgZGlyOiBjb25maWcuYnVpbGQhLm91dERpcixcbiAgICBlbnRyeUZpbGVOYW1lczogXCJpbmRleC5qc1wiLFxuICAgIGNodW5rRmlsZU5hbWVzOiBcImluZGV4LmpzXCIsXG4gICAgbWFudWFsQ2h1bmtzOiB1bmRlZmluZWQsXG4gIH07XG5cbiAgY29uc3QgZXh0ZXJuYWwgPSBPYmplY3Qua2V5cyhhd2FpdCB0YXJnZXRQcm9qZWN0RGVwZW5kZW5jaWVzKCkpO1xuICBjb25zb2xlLndhcm4oXG4gICAgXCJFeHRlcm5hbGl6ZWQgTGlicmFyaWVzIHRoYXQgd2lsbCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIGJ1bmRsZTpcIixcbiAgICBleHRlcm5hbFxuICApO1xuXG4gIGNvbmZpZy5idWlsZCEucm9sbHVwT3B0aW9ucyA9IHtcbiAgICAuLi5jb25maWcuYnVpbGQhLnJvbGx1cE9wdGlvbnMsXG4gICAgZXh0ZXJuYWwsXG4gIH07XG5cbiAgYXdhaXQgVml0ZS5idWlsZChjb25maWcpO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtdmVyc2lvbi5qc1wiO1xuaW1wb3J0IHsgd2FpdCB9IGZyb20gXCIuLi8uLi91dGlsL3dhaXQuanNcIjtcblxuLyoqXG4gKiBUaGlzIHBlcmZvcm1zIHRoZSBidW5kbGluZyBwcm9jZXNzIGZvciBkaXN0cmlidXRpb24uXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWxlYXNlU3RvcmllcygpIHtcbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPVxuICAgIHByb2Nlc3MuZW52LlZJVEVfUkVMRUFTRV9WRVJTSU9OIHx8IChhd2FpdCB0YXJnZXRQcm9qZWN0VmVyc2lvbigpKTtcblxuICBjb25zb2xlLndhcm4oY2hhbGsuY3lhbkJyaWdodChcIkNvcHlpbmcgc3RvcnkgZmlsZXMgZm9yIHRoZSBkaXN0cmlidXRpb24uXCIpKTtcbiAgY29uc3Qgb3V0cHV0UGF0aCA9IHBhdGgucmVzb2x2ZShcImRpc3Qvc3Rvcmllc1wiKTtcbiAgY29uc3Qgc3Rvcmllc1BhdGggPSBwYXRoLnJlc29sdmUoXCJ1aS9zdG9yaWVzXCIpO1xuICBjb25zdCBkaXN0UGF0aCA9IHBhdGgucmVzb2x2ZShcImRpc3RcIik7XG5cbiAgaWYgKCFmcy5leGlzdHNTeW5jKHN0b3JpZXNQYXRoKSkge1xuICAgIGNvbnNvbGUuZXJyb3IoYENvdWxkIG5vdCBmaW5kIHN0b3JpZXMgZGlyZWN0b3J5OlxcblxcdCR7c3Rvcmllc1BhdGh9YCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gRW5zdXJlIHRoZSBkaXJlY3RvcnkgZm9yIHRoZSBzdG9yaWVzIGV4aXN0cyBpbiB0aGUgc3lzdGVtXG4gIGZzLmVuc3VyZURpclN5bmMob3V0cHV0UGF0aCk7XG4gIC8vIERlZXAgY29weSB0aGUgc3RvcmllcyBmb2xkZXIgdG8gdGhlIGRpc3RyaWJ1dGlvblxuICBmcy5jb3B5U3luYyhzdG9yaWVzUGF0aCwgb3V0cHV0UGF0aCk7XG5cbiAgLy8gR2V0IHRoZSBuYW1lIG9mIHRoaXMgcHJvamVjdCBmcm9tIGl0J3MgcGFja2FnZS5qc29uXG4gIGNvbnN0IHBhY2thZ2VKc29uUGF0aCA9IHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKTtcbiAgY29uc3QgcHJvamVjdFBhY2thZ2UgPSBmcy5yZWFkSlNPTlN5bmMocGFja2FnZUpzb25QYXRoKTtcblxuICAvLyBXZSBub3cgbmVlZCB0byB3cml0ZSBhIHNpbXBsZSBwYWNrYWdlLmpzb24gZmlsZSB0byB0aGUgZGlzdCBmb2xkZXIgdG9cbiAgLy8gZW5zdXJlIHRoZSBzdG9yaWVzIGltcG9ydHMgcmVmZXJlbmNlIHRoZSBzYW1lIGxpYnJhcnkgdmlhIHJlbGF0aXZlIHBhdGhcbiAgLy8gaW1wb3J0cy5cbiAgLy8gVGhpcyBjb3JyZWN0cyBpbXBvcnRzIHRoYXQgZG86IGZyb20gXCIuLi8uLi8uLlwiXG4gIGNvbnN0IHBhY2thZ2VKc29uID0ge1xuICAgIG5hbWU6IHByb2plY3RQYWNrYWdlLm5hbWUgfHwgXCJ1bmtub3duXCIsXG4gICAgcHJpdmF0ZTogdHJ1ZSxcbiAgICB0eXBlOiBcIm1vZHVsZVwiLFxuICAgIG1haW46IFwiLi91aS9pbmRleC5qc1wiLFxuICAgIHR5cGVzOiBcIi4vdHlwZXMvdWkvaW5kZXguZC50c1wiLFxuICAgIGRlcGVuZGVuY2llczoge30sXG4gICAgcmVwb3NpdG9yeToge30sXG4gICAgc2NyaXB0czoge30sXG4gICAgZGV2RGVwZW5kZW5jaWVzOiB7fSxcbiAgfTtcblxuICBjb25zb2xlLndhcm4oXG4gICAgXCJXcml0aW5nIGRpc3RyaWJ1dGlvbiBwYWNrYWdlLmpzb246XCIsXG4gICAgcGF0aC5yZXNvbHZlKGRpc3RQYXRoLCBcInBhY2thZ2UuanNvblwiKVxuICApO1xuICBmcy53cml0ZUpTT05TeW5jKHBhdGgucmVzb2x2ZShkaXN0UGF0aCwgXCJwYWNrYWdlLmpzb25cIiksIHBhY2thZ2VKc29uKTtcblxuICAvLyBMZXQgdGhlIHdyaXRlIGNvbXBsZXRlXG4gIGF3YWl0IHdhaXQoNTAwKTtcblxuICAvLyBXcml0ZSBhIGRpc3RyaWJ1dGlvbiBmb2xkZXIgY2FsbGVkIGNvbXBvbmVudHMgd2hpY2ggd2lsbCBzaW1wbHkgYmUgYVxuICAvLyBwYWNrYWdlIGpzb24gY29uZmlndXJhdGlvbiB0aGF0IHJvdXRlcyB0aGUgaW1wb3J0IHRvIHRoZSB1aSByZWxlYXNlXG4gIGZzLmVuc3VyZURpclN5bmMocGF0aC5yZXNvbHZlKGRpc3RQYXRoLCBcImNvbXBvbmVudHNcIikpO1xuXG4gIC8vIEFsc28gd3JpdGUgdGhlIHBhY2thZ2UuanNvbiBmaWxlIHRvIHRoZSBjb21wb25lbnRzIGZvbGRlciB0byByZXJvdXRlXG4gIC8vIGNvbXBvbmVudCBpbXBvcnRzIHRvIHRoZSB1aSByZWxlYXNlIGRpc3RyaWJ1dGlvbiBhcyB3ZWxsLlxuICAvLyBUaGlzIGNvcnJlY3RzIGltcG9ydHMgdGhhdCBkbzogZnJvbSBcIi4uLy4uLy4uL2NvbXBvbmVudHNcIlxuICBwYWNrYWdlSnNvbi5tYWluID0gXCIuLi91aS9pbmRleC5qc1wiO1xuICBwYWNrYWdlSnNvbi50eXBlcyA9IFwiLi4vdHlwZXMvdWkvaW5kZXguZC50c1wiO1xuXG4gIGNvbnNvbGUud2FybihcbiAgICBcIldyaXRpbmcgZGlzdHJpYnV0aW9uIHBhY2thZ2UuanNvbjpcIixcbiAgICBwYXRoLnJlc29sdmUoZGlzdFBhdGgsIFwiY29tcG9uZW50cy9wYWNrYWdlLmpzb25cIilcbiAgKTtcbiAgZnMud3JpdGVKU09OU3luYyhcbiAgICBwYXRoLnJlc29sdmUoZGlzdFBhdGgsIFwiY29tcG9uZW50cy9wYWNrYWdlLmpzb25cIiksXG4gICAgcGFja2FnZUpzb25cbiAgKTtcblxuICAvLyBMZXQgdGhlIHdyaXRlIGNvbXBsZXRlXG4gIGF3YWl0IHdhaXQoNTAwKTtcbiAgY29uc29sZS53YXJuKFwiRmluaXNoZWQgY29weWluZyBzdG9yaWVzLlwiKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGNoYWxrIH0gZnJvbSBcIi4uLy4uL2xpYi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBleGVjU2NyaXB0IH0gZnJvbSBcIi4uLy4uL2xpYi9leGVjL2V4ZWMtc2NyaXB0LmpzXCI7XG5pbXBvcnQgeyBnaXRSZXR1cm5Ub0RldiB9IGZyb20gXCIuLi8uLi9saWIvZ2l0L2dpdC1yZXR1cm4tdG8tZGV2LmpzXCI7XG5pbXBvcnQgeyBwcm9tcHRDb25maXJtIH0gZnJvbSBcIi4uLy4uL2xpYi9wcm9tcHQvcHJvbXB0LWNvbmZpcm0uanNcIjtcbmltcG9ydCB7IHJlbGVhc2VCaW4gfSBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL2Jpbi9yZWxlYXNlLWJpbi5qc1wiO1xuaW1wb3J0IHsgcmVsZWFzZUNsaWVudCB9IGZyb20gXCIuLi8uLi9saWIvYnVpbGQvd2ViLWFwcC92aXRlL3JlbGVhc2UtY2xpZW50LmpzXCI7XG5pbXBvcnQgeyByZWxlYXNlTGlicmFyeSB9IGZyb20gXCIuLi8uLi9saWIvYnVpbGQvbGlicmFyeS92aXRlL3JlbGVhc2UtbGlicmFyeS5qc1wiO1xuaW1wb3J0IHsgcmVsZWFzZVN0b3JpZXMgfSBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL2xpYnJhcnkvcmVsZWFzZS1zdG9yaWVzLmpzXCI7XG5cbi8qKlxuICogVGhpcyBtZXRob2QgY2hlY2tzIGFsbCBvZiB0aGUgcGFja2FnZSBqc29uIHNldHRpbmdzIGFuZCBlbnN1cmVzIHRoZVxuICogcmVwb3NpdG9yaWVzIGxpc3RlZCBhcmUgdmFsaWQgZm9yIHVzZSB3aXRoaW4gdGhpcyBjb250ZXh0LlxuICovXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVJlbGVhc2UoKSB7XG4gIGlmIChwcm9jZXNzLmVudi5RVUlDS19CVUlMRCA9PT0gXCJ0cnVlXCIpIHJldHVybjtcbiAgLy8gUnVuIHRoZSB2aWV3LXJlbGVhc2UgY29tbWFuZCB0byBzZWUgaWYgdGhlIHJlbGVhc2UgcHJvY2VzcyBwcm9kdWNlc1xuICAvLyBhIHZhbGlkIG91dHB1dFxuICAvLyBSdW4gdGhlIHZpZXctcmVsZWFzZSBzY3JpcHRcbiAgYXdhaXQgZXhlY1NjcmlwdChcInJlbGVhc2VcIiwgW1widmlld1wiXSk7XG5cbiAgLy8gQXNrIGlmIHRoZSB2aWV3LXJlbGVhc2Ugc2NyaXB0IGxvb2tzIGdvb2QgYW5kIHNob3VsZCBjb250aW51ZVxuICBjb25zdCBzaG91bGRDb250aW51ZSA9IGF3YWl0IHByb21wdENvbmZpcm0oXG4gICAgXCJcXG5TaG91bGQgdGhlIHJlbGVhc2UgY29udGludWUgYmVpbmcgbWFkZT9cIlxuICApO1xuXG4gIC8vIFF1aXQgdGhlIHByb2Nlc3MgaWYgdGhlIHZpZXcgcmVsZWFzZSBkaWQgbm90IHdvcmtcbiAgaWYgKCFzaG91bGRDb250aW51ZSkge1xuICAgIGF3YWl0IGdpdFJldHVyblRvRGV2KHRydWUpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgYWxsIGJ1bmRsaW5nIHByb2NlZHVyZXMgYW5kIHNldCB1cCBuZWVkZWQgdG8gYnVuZGxlIHRoZVxuICogcHJvamVjdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gYnVuZGxlUHJvamVjdCgpIHtcbiAgY29uc29sZS53YXJuKFxuICAgIFwiR2F0aGVyaW5nIGJ1aWxkIHRhcmdldHMgZnJvbTpcIixcbiAgICBjaGFsay55ZWxsb3dCcmlnaHQocGF0aC5yZXNvbHZlKFwiYnVpbGQuY29uZi5qc1wiKSlcbiAgKTtcbiAgY29uc3QgYnVpbGRFbnZpcm9ubWVudHMgPSAoYXdhaXQgaW1wb3J0KHBhdGgucmVzb2x2ZShcImJ1aWxkLmNvbmYuanNcIikpKVxuICAgIC5CVUlMRF9UQVJHRVRTO1xuICBwcm9jZXNzLmVudi5OT0RFX0VOViA9IFwicHJvZHVjdGlvblwiO1xuXG4gIGNvbnNvbGUud2FybihcbiAgICBcIkJ1aWxkaW5nIGVudmlyb25tZW50c1wiLFxuICAgIGNoYWxrLnJlZEJyaWdodEJvbGQoSlNPTi5zdHJpbmdpZnkoYnVpbGRFbnZpcm9ubWVudHMpKVxuICApO1xuXG4gIGlmICghQXJyYXkuaXNBcnJheShidWlsZEVudmlyb25tZW50cykpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiYnVpbGQuY29uZi5qcyBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZyB2YWx1ZXNcIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgZm9yIChjb25zdCBlbnYgb2YgYnVpbGRFbnZpcm9ubWVudHMpIHtcbiAgICBhd2FpdCByZWxlYXNlQ2xpZW50KGVudik7XG4gIH1cblxuICBhd2FpdCByZWxlYXNlTGlicmFyeSgpO1xuICBhd2FpdCByZWxlYXNlU3RvcmllcygpO1xuICBhd2FpdCByZWxlYXNlQmluKCk7XG59XG5cbi8qKlxuICogVGhpcyBjbGVhcnMgb3V0IHRoZSBkaXN0cmlidXRpb24gZm9sZGVyIHNvIG5vIGxpbmdlcmluZyBpcnJlbGV2YW50IGZyYWdtZW50c1xuICogZXhpc3RzLlxuICovXG5hc3luYyBmdW5jdGlvbiBjbGVhclByZXZpb3VzRGlzdHJpYnV0aW9uKCkge1xuICB0cnkge1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwiZGlzdFwiKSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUud2FybihcIk5vIGRpc3QgZm9sZGVyIHRvIGNsZWFuIG91dC5cIik7XG4gIH1cblxuICBmcy5lbnN1cmVEaXJTeW5jKHBhdGgucmVzb2x2ZShcImRpc3RcIikpO1xufVxuXG4vKipcbiAqIFRoaXMgY29waWVzIGFsbCBuZWNlc3NhcnkgZWxlbWVudHMgZnJvbSB0aGUgcHJvamVjdCBpbnRvIHRoZSBkaXN0cmlidXRpb25cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY29weUFuZENsZWFuRnJhZ21lbnRzKCkge1xuICAvLyBDbGVhbiBvdXQgdGhlIGNvbXBpbGVkIHRlc3QgZmlsZSB0eXBpbmdzXG4gIHRyeSB7XG4gICAgZnMucmVtb3ZlU3luYyhwYXRoLnJlc29sdmUoXCJkaXN0L3Rlc3RcIikpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyB0ZXN0IGZvbGRlciB0byBjbGVhbiBvdXRcIik7XG4gIH1cblxuICAvLyBDbGVhbiBvdXQgdW5pdC10ZXN0c1xuICB0cnkge1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwiZGlzdC91bml0LXRlc3RcIikpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyB1bml0LXRlc3QgZm9sZGVyIHRvIGNsZWFuIG91dFwiKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oKSB7XG4gIC8vIFBlcmZvcm0gYW55IHR5cGVzY3JpcHQgc3BlY2lmaWMgYWN0aW9uc1xuICBjb25zb2xlLndhcm4oXCJWYWxpZGF0aW5nIHRoZSByZWxlYXNlLi4uXCIpO1xuICBhd2FpdCB2YWxpZGF0ZVJlbGVhc2UoKTtcbiAgLy8gRGVsZXRlIGFueSBmaWxlcyBpbiB0aGUgZGlzdCBmb2xkZXIgc28gd2UgaGF2ZSBhIGNsZWFuIGJ1aWxkIHdpdGggbm9cbiAgLy8gY2hhbmNlcyBvZiBjYWNoaW5nIG9yIGtlZXBpbmcgbm8gbG9uZ2VyIHJlbGV2YW50IGZpbGVzLlxuICBjb25zb2xlLndhcm4oXCJDbGVhciBwcmV2aW91cyBidWlsZC4uLlwiKTtcbiAgYXdhaXQgY2xlYXJQcmV2aW91c0Rpc3RyaWJ1dGlvbigpO1xuICAvLyBCdWlsZCB0aGUgbW9ub2xpdGhpYyBkaXN0cmlidXRpb25cbiAgY29uc29sZS53YXJuKFwiQnVuZGxpbmcgcHJvamVjdC4uLlwiKTtcbiAgYXdhaXQgYnVuZGxlUHJvamVjdCgpO1xuICAvLyBDb3B5IGFuZCBkZWxldGUgYW55IGZyYWdtZW50cyBpbiB0aGUgZGlzdCBmb2xkZXIgdGhhdCBpcyBuZWNlc3NhcnlcbiAgY29uc29sZS53YXJuKFwiRmluYWwgY2xlYW51cC4uLlwiKTtcbiAgYXdhaXQgY29weUFuZENsZWFuRnJhZ21lbnRzKCk7XG4gIGNvbnNvbGUud2FybihcIlJlbGVhc2UgQnVpbGQgY29tcGxldGUhXCIpO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgZ3JvdXBCeSBmcm9tIFwibG9kYXNoL2dyb3VwQnkuanNcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgdW5pcSBmcm9tIFwibG9kYXNoL3VuaXEuanNcIjtcbmltcG9ydCB1cHBlckZpcnN0IGZyb20gXCJsb2Rhc2gvdXBwZXJGaXJzdC5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcbmltcG9ydCB7IGNvbXBhcmUsIGluYyB9IGZyb20gXCJzZW12ZXJcIjtcbmltcG9ydCB7IGV4ZWNTeW5jUmVzdWx0IH0gZnJvbSBcIi4uLy4uL2xpYi9leGVjL2V4ZWMtc3luYy1yZXN1bHQuanNcIjtcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvd2FpdC5qc1wiO1xuXG5jb25zdCB7IGV4aXN0c1N5bmMsIHJlYWRGaWxlU3luYywgcmVhZEpTT05TeW5jLCB3cml0ZUZpbGVTeW5jIH0gPSBmcztcblxuLyoqIEB0eXBlIHt7W2tleTogc3RyaW5nXTogJ2JyZWFraW5nJyB8ICdhZGRlZCcgfCAnZml4ZWQnIHwgJ3Rhc2snfX0gKi9cbmNvbnN0IHJlbGVhc2VUYWdzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICBicmVha2luZzogXCJicmVha2luZ1wiLFxuXG4gIGZlYXQ6IFwiYWRkZWRcIixcbiAgZmVhdHVyZTogXCJhZGRlZFwiLFxuICBhZGRlZDogXCJhZGRlZFwiLFxuXG4gIGZpeDogXCJmaXhlZFwiLFxuICBmaXhlZDogXCJmaXhlZFwiLFxuICBob3RmaXg6IFwiZml4ZWRcIixcblxuICB0YXNrOiBcInRhc2tcIixcbn07XG5cbmNvbnN0IHRhZ09yZGVyID0gdW5pcShPYmplY3QudmFsdWVzKHJlbGVhc2VUYWdzKSk7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG5vdGVzXG4gKi9cbmZ1bmN0aW9uIGdldFJlbGVhc2VUeXBlKG5vdGVzOiBzdHJpbmcpIHtcbiAgY29uc3QgZ3JvdXBzID0gbm90ZXNcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC5zcGxpdChcIlxcblwiKVxuICAgIC5tYXAoKGxpbmUpID0+IChsaW5lLm1hdGNoKC8jIyAoXFx3KykvKSB8fCBbXSlbMV0pXG4gICAgLmZpbHRlcihCb29sZWFuKTtcbiAgaWYgKGdyb3Vwcy5pbmNsdWRlcyhcImJyZWFraW5nXCIpKSByZXR1cm4gXCJtYWpvclwiO1xuICBpZiAoZ3JvdXBzLmluY2x1ZGVzKFwiYWRkZWRcIikpIHJldHVybiBcIm1pbm9yXCI7XG4gIHJldHVybiBcInBhdGNoXCI7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGZvclZlcnNpb24gVGhlIHZlcnNpb24gdG8gYnVpbGQgdGhlIHJlbGVhc2Ugbm90ZXMgZm9yXG4gKlxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5hc3luYyBmdW5jdGlvbiBidWlsZFJlbGVhc2VOb3Rlcyhmb3JWZXJzaW9uOiBzdHJpbmcpIHtcbiAgY29uc29sZS53YXJuKFwiQnVpbGRpbmcgcmVsZWFzZSBub3Rlcy4uLlwiKTtcblxuICBjb25zb2xlLndhcm4oXCJmZXRjaGluZyB0YWdzLi4uXCIpO1xuICBjb25zdCBnZXRUYWdzID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoXCJnaXRcIiwgW1widGFnXCIsIFwiLS1saXN0XCJdKTtcblxuICBpZiAoZ2V0VGFncyA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZCBub3QgZ2V0IGdpdCB0YWdzXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IHRhZ3MgPSBnZXRUYWdzLnRyaW0oKS5zcGxpdChcIlxcblwiKS5zb3J0KGNvbXBhcmUpO1xuXG4gIGNvbnN0IHByZXZpb3VzVmVyc2lvbiA9XG4gICAgdGFnc1tcbiAgICAgICh0YWdzLmluY2x1ZGVzKGZvclZlcnNpb24pID8gdGFncy5pbmRleE9mKGZvclZlcnNpb24pIDogdGFncy5sZW5ndGgpIC0gMVxuICAgIF07XG5cbiAgY29uc29sZS53YXJuKFwiZmV0Y2hpbmcgdmVyc2lvbiBoYXNoLi4uXCIpO1xuICBjb25zdCBjdXJyZW50VmVyc2lvbkhhc2hFeGVjID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcbiAgICBcInJldi1saXN0XCIsXG4gICAgXCItMVwiLFxuICAgIGAke2ZvclZlcnNpb259YCxcbiAgXSk7XG5cbiAgaWYgKGN1cnJlbnRWZXJzaW9uSGFzaEV4ZWMgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQ291bGRuJ3QgZ2V0IGN1cnJlbnQgdmVyc2lvbiBoYXNoXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IGN1cnJlbnRWZXJzaW9uSGFzaCA9IGN1cnJlbnRWZXJzaW9uSGFzaEV4ZWMudHJpbSgpO1xuXG4gIGNvbnNvbGUud2FybihcImZldGNoaW5nIHByZXZpb3VzIHZlcnNpb24gaGFzaC4uLlwiKTtcbiAgbGV0IHByZXZpb3VzVmVyc2lvbkhhc2hFeGVjID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcbiAgICBgcmV2LWxpc3RgLFxuICAgIGAtMWAsXG4gICAgYCR7cHJldmlvdXNWZXJzaW9ufWAsXG4gIF0pO1xuXG4gIGlmIChwcmV2aW91c1ZlcnNpb25IYXNoRXhlYyA9PT0gbnVsbCkge1xuICAgIHByZXZpb3VzVmVyc2lvbkhhc2hFeGVjID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcbiAgICAgIGByZXYtbGlzdGAsXG4gICAgICBcIi0tbWF4LXBhcmVudHM9MFwiLFxuICAgICAgXCJIRUFEXCIsXG4gICAgXSk7XG5cbiAgICBpZiAocHJldmlvdXNWZXJzaW9uSGFzaEV4ZWMgPT09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZG4ndCBnZXQgcHJldmlvdXMgdmVyc2lvbiBoYXNoXCIpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IHByZXZpb3VzVmVyc2lvbkhhc2ggPSBwcmV2aW91c1ZlcnNpb25IYXNoRXhlYy50cmltKCk7XG5cbiAgY29uc29sZS53YXJuKFwiZmV0Y2hpbmcgbG9ncy4uLlwiKTtcbiAgY29uc3QgbG9nc0V4ZWMgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChgZ2l0YCwgW1xuICAgIFwibG9nXCIsXG4gICAgXCItLXByZXR0eT0lQlwiLFxuICAgIGAke3ByZXZpb3VzVmVyc2lvbkhhc2h9Li4uJHtjdXJyZW50VmVyc2lvbkhhc2h9YCxcbiAgXSk7XG5cbiAgaWYgKGxvZ3NFeGVjID09PSBudWxsKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkNvdWxkbid0IGdldCBsb2dzXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IGxvZ3MgPSBsb2dzRXhlY1xuICAgIC5zcGxpdChcIlxcblwiKVxuICAgIC8vIENvbnZlcnQgdGhlIGxpbmVzIGludG8gYW4gYXJyYXkgb2YgdGFnIGFuZCBtZXNzYWdlIG9iamVjdHNcbiAgICAubWFwKChsaW5lKSA9PiB7XG4gICAgICBjb25zdCBbLCB0YWcgPSBcIlwiLCBtZXNzYWdlID0gXCJcIl0gPVxuICAgICAgICBsaW5lLm1hdGNoKC9eXFxzKihcXHcrPylcXHMqOlxccyooLiopXFxzKiQvKSB8fCBbXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRhZzogcmVsZWFzZVRhZ3NbdGFnLnRvTG93ZXJDYXNlKCldLFxuICAgICAgICBtZXNzYWdlOiB1cHBlckZpcnN0KG1lc3NhZ2UpLFxuICAgICAgfTtcbiAgICB9KVxuICAgIC8vIFJlbW92ZSBsaW5lcyB0aGF0IGRvIG5vdCBjb250YWluIGEga25vd24gdGFnXG4gICAgLmZpbHRlcigobm90ZSkgPT4gbm90ZS50YWcpO1xuXG4gIGNvbnN0IGdyb3VwcyA9IGdyb3VwQnkobG9ncywgXCJ0YWdcIik7XG4gIC8vIEJ1aWxkIHRoZSByZWxlYXNlIG5vdGVzXG4gIGNvbnN0IHRleHQgPSB0YWdPcmRlclxuICAgIC8vIFJlbW92ZSB0YWdzIHRoYXQgZG9uJ3QgZXhpc3QgaW4gdGhlIGN1cnJlbnQgb3V0cHV0XG4gICAgLmZpbHRlcigoZ3JvdXBOYW1lKSA9PiBncm91cHNbZ3JvdXBOYW1lXSlcbiAgICAubWFwKChncm91cE5hbWUpID0+IHtcbiAgICAgIGNvbnN0IGdyb3VwID0gZ3JvdXBzW2dyb3VwTmFtZV07XG4gICAgICByZXR1cm4gYCMjICR7Z3JvdXBOYW1lLnJlcGxhY2UoLyhcXHcpLywgKGMpID0+IGMudG9VcHBlckNhc2UoKSl9XFxuXFxuJHtncm91cFxuICAgICAgICAubWFwKCh7IHRhZywgbWVzc2FnZSB9KSA9PiBgLSBbXFxgJHt0YWcudG9VcHBlckNhc2UoKX1cXGBdOiAke21lc3NhZ2V9YClcbiAgICAgICAgLmpvaW4oXCJcXG5cIil9YDtcbiAgICB9KVxuICAgIC5qb2luKFwiXFxuXFxuXCIpO1xuXG4gIGNvbnNvbGUud2FybihcIk5ldyByZWxlYXNlIG5vdGVzIGNvbXBsZXRlZFwiKTtcbiAgcmV0dXJuIHRleHQ7XG59XG5cbi8qKlxuICogUHJpbnQgcmVsZWFzZSBub3RlcyBzaW5jZSB0aGUgbGFzdCByZWxlYXNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bihcbiAgb3B0aW9uczoge1xuICAgIC8qKlxuICAgICAqIFRoZSBmaWxlIHRvIHByaW50IHJlbGVhc2Ugbm90ZXMgdG8uIElmIHRoaXMgaXMgbGVmdCBibGFuaywgdGhlbiB0aGVcbiAgICAgKiByZWxlYXNlIG5vdGVzIHdpbGwgYmUgcHJpbnRlZCB0byBTVERPVVQuXG4gICAgICovXG4gICAgZmlsZT86IHN0cmluZztcbiAgICAvKiogVXBkYXRlIHRoZSBwYWNrYWdlLmpzb24gKi9cbiAgICB1cGRhdGVQYWNrYWdlPzogYm9vbGVhbjtcbiAgICAvKiogVHJ1ZSBpZiBhIGdpdCB0YWcgc2hvdWxkIGJlIGNyZWF0ZWQgKi9cbiAgICB0YWc/OiBib29sZWFuO1xuICAgIC8qKiBUcnVlIGlmIG5vIHJlbGVhc2Ugbm90ZXMgd2lsbCBiZSBjcmVhdGVkICovXG4gICAgZXJyb3JPbkVtcHR5PzogYm9vbGVhbjtcbiAgfSA9IHt9XG4pIHtcbiAgY29uc29sZS53YXJuKFwiR2VuZXJhdGluZyBSZWxlYXNlIE5vdGVzLi4uXCIpO1xuICAvLyBQdWxsIGluIGFueSB0YWdzXG4gIGNvbnN0IGZldGNoRXhlYyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwiZ2l0XCIsIFtcImZldGNoXCIsIFwiLS10YWdzXCJdKTtcblxuICBpZiAoZmV0Y2hFeGVjID09PSBudWxsKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkNvdWxkbid0IGZldGNoIHRhZ3NcIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBjdXJyZW50IHZlcnNpb25cbiAgY29uc3QgcGtnID0gcmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZShcInBhY2thZ2UuanNvblwiKSk7XG4gIGNvbnN0IHsgdmVyc2lvbjogY3VycmVudFZlcnNpb24gPSBcIjAuMC4xXCIgfSA9IHBrZztcbiAgY29uc29sZS53YXJuKFwiQ3VycmVudCBQcm9qZWN0IHZlcnNpb246XCIsIHsgY3VycmVudFZlcnNpb24gfSk7XG5cbiAgY29uc3Qgbm90ZXMgPSBhd2FpdCBidWlsZFJlbGVhc2VOb3RlcyhcIkhFQURcIik7XG4gIGNvbnN0IHJlbGVhc2VUeXBlID0gZ2V0UmVsZWFzZVR5cGUobm90ZXMpO1xuICBjb25zdCBuZXdWZXJzaW9uID0gcmVsZWFzZVR5cGUgJiYgaW5jKGN1cnJlbnRWZXJzaW9uLCByZWxlYXNlVHlwZSk7XG5cbiAgaWYgKCFuZXdWZXJzaW9uKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byBkZXRlcm1pbmUgbmV4dCB2ZXJzaW9uXCIsIHsgY3VycmVudFZlcnNpb24gfSk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gQ3JlYXRlIHRoZSB0YWcgaWYgd2Ugd2VyZSB0b2xkIHRvIGRvIHNvXG4gIGlmIChvcHRpb25zLnRhZykge1xuICAgIGNvbnNvbGUud2FybihcIkNyZWF0aW5nIHRoZSBuZXcgdGFnLi4uXCIpO1xuICAgIGNvbnN0IHRhZ0V4ZWMgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChgZ2l0YCwgW1xuICAgICAgXCJ0YWdcIixcbiAgICAgIFwiLWFcIixcbiAgICAgIG5ld1ZlcnNpb24sXG4gICAgICBcIi1tXCIsXG4gICAgICBgUmVsZWFzZSAke25ld1ZlcnNpb259YCxcbiAgICBdKTtcblxuICAgIGlmICh0YWdFeGVjID09PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQ291bGRuJ3QgY3JlYXRlIHRhZ1wiKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGUgcGFja2FnZS5qc29uIGlmIHdlIHdlcmUgdG9sZCB0byBkbyBzb1xuICBpZiAob3B0aW9ucy51cGRhdGVQYWNrYWdlKSB7XG4gICAgY29uc29sZS53YXJuKFwiVXBkYXRpbmcgdGhlIHBhY2thZ2UuanNvbi4uLlwiKTtcbiAgICBjb25zdCBwa2cgPSByZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpKTtcbiAgICBwa2cudmVyc2lvbiA9IG5ld1ZlcnNpb247XG5cbiAgICB3cml0ZUZpbGVTeW5jKFxuICAgICAgcGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpLFxuICAgICAgYCR7SlNPTi5zdHJpbmdpZnkocGtnLCBudWxsLCBcIiAgXCIpfVxcbmBcbiAgICApO1xuICB9XG5cbiAgY29uc3QgdGV4dCA9IGAjIyAke25ld1ZlcnNpb259XFxuXFxuJHtub3Rlc31gO1xuXG4gIC8vIElmIHRoZSBub3RlcyBhcmUgZW1wdHksIHRocm93IGFuIGVycm9yIGlmIHJlcXVlc3RlZCB0byBkbyBzb1xuICBpZiAoIW5vdGVzLnRyaW0oKSAmJiBvcHRpb25zLmVycm9yT25FbXB0eSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiTm8gbm90ZXMgd2VyZSBnZW5lcmF0ZWQgYXMgbm8gc2VtdmVyIHN0eWxlIG1lc3NhZ2VzIHdlcmUgZm91bmRcIlxuICAgICk7XG4gIH1cblxuICAvLyBPdXRwdXQgdGhlIG5vdGVzIHRvIHRoZSBjb25zb2xlIG9yIGEgZmlsZVxuICBpZiAob3B0aW9ucy5maWxlKSB7XG4gICAgY29uc29sZS53YXJuKFwiV3JpdGluZyB0aGUgcmVsZWFzZSBub3RlcyB0byBmaWxlOlwiLCBvcHRpb25zLmZpbGUpO1xuICAgIGNvbnN0IGZpbGUgPSBwYXRoLnJlc29sdmUob3B0aW9ucy5maWxlIGFzIHN0cmluZyk7XG4gICAgY29uc3QgcHJldmlvdXNUZXh0ID0gZXhpc3RzU3luYyhmaWxlKSA/IHJlYWRGaWxlU3luYyhmaWxlKSA6IFwiXCI7XG4gICAgd3JpdGVGaWxlU3luYyhmaWxlLCBgJHtgJHt0ZXh0fVxcblxcbiR7cHJldmlvdXNUZXh0fWAudHJpbSgpfVxcbmApO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gMTAwOyArK2kpIHtcbiAgICAgIGlmIChmcy5leGlzdHNTeW5jKGZpbGUpKSBicmVhaztcbiAgICAgIGlmIChpID09PSAxMDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiUmVsZWFzZSBub3RlcyBmaWxlIHdhcyBub3QgY3JlYXRlZCBpbiB0aW1lIGZvciB0aGUgZmluYWwgcmVsZWFzZSBjb21taXQ6XCIsXG4gICAgICAgICAgY2hhbGsucmVkQnJpZ2h0Qm9sZChmaWxlKVxuICAgICAgICApO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRG8gYSBydW4gdGhyb3VnaCBhbGwgb2YgdGhlIGZpbGVzIGluIHRoZSBkaXN0IGZvbGRlci4gVGhpcyBpcyBhIHNpbXBsZVxuICAgIC8vIGV4ZWN1dGlvbiB0aGF0IHdpbGwgaGVscCBlbnN1cmUgdGhlIGZpbGVzIGFyZSBhbGwgaW4gcGxhY2UsIGZsdXNoZWQgdG9cbiAgICAvLyB0aGUgSEQsIGFuZCBub3QgZmlsZSBsb2NrZWQuXG4gICAgYXdhaXQgd2FpdCgxMDAwKTtcblxuICAgIC8vIEVuc3VyZSBhbGwgZnJhZ21lbnRzIGFyZSBnb2luZyB0byBiZSBpbmNsdWRlZCBpbiB0aGUgY29tbWl0XG4gICAgY29uc29sZS53YXJuKFwiQWRkaW5nIGZyYWdtZW50cyB0byBnaXQuLi5cIik7XG4gICAgaWYgKChhd2FpdCBleGVjU3luY1Jlc3VsdChcImdpdFwiLCBbXCJhZGRcIiwgXCItQVwiXSkpID09PSBudWxsKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiQ291bGQgbm90IGVuc3VyZSBhbGwgZnJhZ21lbnRzIGFyZSBhZGRlZCBmb3IgdGhlIG5leHQgY29tbWl0LlwiXG4gICAgICApO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cblxuICAgIC8vIENvbW1pdCB0aGUgY2hhbmdlc1xuICAgIGNvbnNvbGUud2FybihcIkNvbW1pdHRpbmcgdG8gZ2l0Li4uXCIpO1xuICAgIGNvbnN0IGNvbW1pdEV4ZWMgPSBhd2FpdCBleGVjU3luY1Jlc3VsdChcImdpdFwiLCBbXG4gICAgICBcImNvbW1pdFwiLFxuICAgICAgXCItYW1cIixcbiAgICAgIGBSZWxlYXNlICR7bmV3VmVyc2lvbn1gLFxuICAgIF0pO1xuXG4gICAgaWYgKGNvbW1pdEV4ZWMgPT09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJDb3VsZG4ndCBjb21taXQgY2hhbmdlc1wiKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLndhcm4oYFxcblxcbiR7Y2hhbGsuY3lhbih0ZXh0KX1cXG5cXG5gKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oYFxcblxcbiR7Y2hhbGsuY3lhbih0ZXh0KX1cXG5cXG5gKTtcbiAgfVxuXG4gIC8vIFdoZW5ldmVyIHRoaXMgaXMgcmFuIGl0IG1ha2VzIHNlbnNlIHRvIHVwZGF0ZSBvdXIgcmVsZWFzZSB2ZXJzaW9uIGhlcmUgc29cbiAgLy8gaXQgaXMgYXZhaWFsYmxlIHRvIHRoZSByZXN0IG9mIGFueSBwcm9jZXNzIHJ1bm5pbmcgdW5kZXIgaXQncyBhc3N1bXB0aW9ucy5cbiAgcHJvY2Vzcy5lbnYuVklURV9SRUxFQVNFX1ZFUlNJT04gPSBuZXdWZXJzaW9uO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG4vKipcbiAqIFJlY3Vyc2l2ZWx5IGZpbmQgYWxsIGZpbGVzIGluIGEgZGlyZWN0b3J5LiBOb3RlOiB0aGUgcGF0aCBwYXNzZWQgaW4gd2lsbCBiZVxuICogYW5hbHl6ZWQgdmlhIHBhdGgucmVzb2x2ZS5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbEZpbGVzKGRpclBhdGg6IHN0cmluZywgb3V0Pzogc3RyaW5nW10pIHtcbiAgdHJ5IHtcbiAgICAvLyBJZiBhIGZpbGUgaXMgc3BlY2lmaWVkIHdlIGp1c3QgcmV0dXJuIHRoYXQgZmlsZSBhcyB0aGUgcmVzdWx0LlxuICAgIGlmIChmcy5zdGF0U3luYyhkaXJQYXRoKS5pc0ZpbGUoKSkge1xuICAgICAgaWYgKG91dCkge1xuICAgICAgICBvdXQucHVzaChkaXJQYXRoKTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBbZGlyUGF0aF07XG4gICAgfVxuXG4gICAgY29uc3QgZmlsZXMgPSBmcy5yZWFkZGlyU3luYyhkaXJQYXRoKTtcbiAgICBsZXQgYXJyYXlPZkZpbGVzID0gb3V0IHx8IFtdO1xuXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICBpZiAoZnMuc3RhdFN5bmMocGF0aC5yZXNvbHZlKGRpclBhdGgsIGZpbGUpKS5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgIGFycmF5T2ZGaWxlcyA9IGF3YWl0IGdldEFsbEZpbGVzKFxuICAgICAgICAgIHBhdGgucmVzb2x2ZShkaXJQYXRoLCBmaWxlKSxcbiAgICAgICAgICBhcnJheU9mRmlsZXNcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFycmF5T2ZGaWxlcy5wdXNoKHBhdGgucmVzb2x2ZShkaXJQYXRoLCBmaWxlKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFycmF5T2ZGaWxlcztcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiZ2V0QWxsRmlsZXMgUGF0aDpcIiwgZGlyUGF0aCk7XG4gICAgICBjb25zb2xlLmVycm9yKFwiZ2V0QWxsRmlsZXMgRXJyb3I6XCIsIGVyci5tZXNzYWdlKTtcbiAgICB9XG5cbiAgICB0aHJvdyBlcnI7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vZXhlYy9leGVjLXN5bmMuanNcIjtcblxuLyoqXG4gKiBUaGlzIGNoZWNrcyBpZiB0aGUgY3VycmVudCBnaXQgY29udGV4dCBoYXMgYWNjZXNzIHRvIHRoZSBzcGVjaWZpZWQgcmVtb3RlXG4gKiByZXBvc2l0b3J5LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2l0Q2FuQWNjZXNzUmVtb3RlKHJlbW90ZTogc3RyaW5nKSB7XG4gIHJldHVybiBleGVjU3luYyhgZ2l0YCwgW2Bscy1yZW1vdGVgLCByZW1vdGVdKTtcbn1cbiIsCiAgICAiaW1wb3J0IHsgZGVzY3JpcHRpb24gfSBmcm9tIFwiLi4vdXRpbC9kZXNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmNSZXN1bHQgfSBmcm9tIFwiLi4vZXhlYy9leGVjLXN5bmMtcmVzdWx0LmpzXCI7XG5pbXBvcnQgeyBnaXRDYW5BY2Nlc3NSZW1vdGUgfSBmcm9tIFwiLi9naXQtY2FuLWFjY2Vzcy1yZW1vdGUuanNcIjtcblxuLyoqXG4gKiBFbnN1cmVzIHRoZSBkZXZlbG9wZXIgaGFzIGVzdGFibGlzaGVkIHRoZSBwcm92aWRlZCByZW1vdGUgbmFtZSBBTkQgaGFzIGFjY2Vzc1xuICogdG8gdGhlIHJlbW90ZSBVUkwgYXNzb2NpYXRlZCB3aXRoIHRoZSByZW1vdGUgbmFtZS4gVGhpcyBpcyBhbiBhc3NlcnRpb24gc29cbiAqIHdpbGwgY2F1c2UgdGhlIHByb2dyYW0gdG8gZXhpdCBvbiBmYWlsdXJlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2l0RW5zdXJlUmVtb3RlKHJlbW90ZTogc3RyaW5nKSB7XG4gIC8vIFdlIGNoZWNrIG91ciByZW1vdGUgdG8gZW5zdXJlIHdlIGhhdmUgYSBwcm9qZWN0IHdpdGggZXhwZWN0ZWQgdmFsdWVzXG4gIGNvbnN0IHJlbW90ZUxpc3RQcm9jZXNzID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoXCJnaXRcIiwgW1wicmVtb3RlXCIsIFwiLXZcIl0pO1xuXG4gIGlmIChyZW1vdGVMaXN0UHJvY2VzcyA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBsaXN0IHJlbW90ZXMgZm9yIHRoZSBnaXQgcHJvamVjdC5cIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc3QgcmVtb3RlcyA9IHJlbW90ZUxpc3RQcm9jZXNzLnNwbGl0KC9cXHI/XFxuL2cpO1xuXG4gIGNvbnN0IGZvdW5kUmVtb3RlID0gcmVtb3Rlcy5maW5kKChyb3cpID0+IHJvdy5pbmRleE9mKHJlbW90ZSkgPj0gMCk7XG5cbiAgaWYgKCFmb3VuZFJlbW90ZSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIGRlc2NyaXB0aW9uYFxuICAgICAgWW91IE1VU1QgaGF2ZSBhIHJlbW90ZSBuYW1lZCAke3JlbW90ZX0gd2hpY2ggcG9pbnRzIHRvIHRoZSByZXBvc2l0b3J5IHlvdVxuICAgICAgd2lzaCB0byBkZXBsb3kgdG8uXG5cbiAgICAgICR7cmVtb3Rlcy5qb2luKFwiXFxuXCIpfVxuICAgIGBcbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IHJlbW90ZVVybCA9IGZvdW5kUmVtb3RlLnNwbGl0KC9cXHMrL2cpWzFdO1xuXG4gIC8vIE5vdyBjaGVjayB0byBtYWtlIHN1cmUgdGhlIHJlcG8gc3BlY2lmaWVkIGV4aXN0cyBpbiBnaXQgYW5kIGlzIGF2YWlsYWJsZSB0b1xuICAvLyB0aGUgdXNlclxuICBpZiAoIWdpdENhbkFjY2Vzc1JlbW90ZShyZW1vdGVVcmwpKSB7XG4gICAgY29uc29sZS53YXJuKGBcbiAgICAgIFlvdSBkbyBub3Qgc2VlbSB0byBoYXZlIGFjY2VzcyB0byB0aGUgcmVwbyBsaXN0ZWQgaW4gdGhlIHBhY2thZ2UganNvbiBvZlxuICAgICAgdGhpcyBwcm9qZWN0LiBQbGVhc2UgZW5zdXJlIHlvdSBoYXZlIHdyaXRlIGFjY2VzcyB0byB0aGUgcmVwbzpcbiAgICAgICR7cmVtb3RlVXJsfVxuICAgICAgYW5kIHRoZW4gdHJ5IHRvIHJ1biB0aGUgcmVsZWFzZSBhZ2Fpbi5cbiAgICBgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmNSZXN1bHQgfSBmcm9tIFwiLi4vZXhlYy9leGVjLXN5bmMtcmVzdWx0LmpzXCI7XG5cbi8qKlxuICogUmV0cmlldmVzIHRoZSBjdXJyZW50IGJyYW5jaCBpbiB0aGUgY3VycmVudCBnaXQgY29udGV4dC4gUmV0dXJucyB2b2lkIGlmIGFcbiAqIGJyYW5jaCBjYW4gbm90IGJlIGRldGVybWluZWQuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnaXRDdXJyZW50QnJhbmNoKCkge1xuICAvLyBHZXQgdGhlIGN1cnJlbnQgYnJhbmNoIG5hbWUgc28gd2UgY2FuIG9idGFpbiB0aGUgaGFzaCBvZiB0aGUgdGlja2V0XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwiZ2l0XCIsIFtcbiAgICBcInJldi1wYXJzZVwiLFxuICAgIFwiLS1hYmJyZXYtcmVmXCIsXG4gICAgXCJIRUFEXCIsXG4gIF0pO1xuXG4gIGlmIChyZXN1bHQgPT09IG51bGwpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGRldGVybWluZSBjdXJyZW50IGJyYW5jaC5cIik7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfVxuXG4gIGNvbnN0IGJyYW5jaCA9IHJlc3VsdC50cmltKCk7XG4gIHJldHVybiBicmFuY2ggfHwgdm9pZCAwO1xufVxuIiwKICAgICJpbXBvcnQgeyBleGVjU3luY1Jlc3VsdCB9IGZyb20gXCIuLi9leGVjL2V4ZWMtc3luYy1yZXN1bHQuanNcIjtcbmltcG9ydCB7IGdpdEN1cnJlbnRCcmFuY2ggfSBmcm9tIFwiLi9naXQtY3VycmVudC1icmFuY2guanNcIjtcblxuLyoqXG4gKiBUaGlzIHN3aXRjaGVzIHRvIHRoZSBicmFuY2ggc3BlY2lmaWVkLCB0aGVuIHJlc2V0IC0taGFyZCBvcmlnaW4vYnJhbmNoIHRvXG4gKiBtYWtlIHN1cmUgaXQgcmVmbGVjdHMgdGhlIHJlcG8sIHRoZW4gcmV0dXJucyB0byB0aGUgY3VycmVudCBicmFuY2guXG4gKi9cbmV4cG9ydCBjb25zdCBnaXRVcGRhdGVCcmFuY2ggPSBhc3luYyAocmVtb3RlOiBzdHJpbmcsIGJyYW5jaDogc3RyaW5nKSA9PiB7XG4gIGNvbnN0IGJyYW5jaEJhayA9IGF3YWl0IGdpdEN1cnJlbnRCcmFuY2goKTtcblxuICBpZiAoIWJyYW5jaEJhaykge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBkZXRlcm1pbmUgY3VycmVudCBicmFuY2guXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIENoZWNrb3V0IHRoZSBzcGVjaWZpZWQgYnJhbmNoXG4gIGlmICgoYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcImNoZWNrb3V0XCIsIGAke2JyYW5jaH1gXSkpID09PSBudWxsKSB7XG4gICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgY2hlY2tvdXQgYnJhbmNoICR7YnJhbmNofWApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFBlcmZvcm0gdGhlIHJlc2V0XG4gIGlmIChcbiAgICAoYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcbiAgICAgIFwicmVzZXRcIixcbiAgICAgIFwiLS1oYXJkXCIsXG4gICAgICBgJHtyZW1vdGV9LyR7YnJhbmNofWAsXG4gICAgXSkpID09PSBudWxsXG4gICkge1xuICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IHJlc2V0IGJyYW5jaCAke2JyYW5jaH1gKTtcblxuICAgIC8vIFJldHVybiB0byB0aGUgb3JpZ2luYWwgYnJhbmNoXG4gICAgaWYgKGF3YWl0IGV4ZWNTeW5jUmVzdWx0KGBnaXRgLCBbXCJjaGVja291dFwiLCBgJHticmFuY2hCYWt9YF0pKSB7XG4gICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCByZXR1cm4gdG8gb3JpZ2luYWwgYnJhbmNoICR7YnJhbmNoQmFrfWApO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFJldHVybiB0byB0aGUgb3JpZ2luYWwgYnJhbmNoXG4gIGlmICgoYXdhaXQgZXhlY1N5bmNSZXN1bHQoYGdpdGAsIFtcImNoZWNrb3V0XCIsIGAke2JyYW5jaEJha31gXSkpID09PSBudWxsKSB7XG4gICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgcmV0dXJuIHRvIG9yaWdpbmFsIGJyYW5jaCAke2JyYW5jaEJha31gKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0YXJnZXRQcm9qZWN0UmVwbygpIHtcbiAgY29uc3QgcGFja2FnZUpzb24gPSBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwicGFja2FnZS5qc29uXCIpKTtcbiAgcmV0dXJuIHBhY2thZ2VKc29uLnJlcG9zaXRvcnkgfHwge307XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgcmVsZWFzZUJ1aWxkIGZyb20gXCIuL3JlbGVhc2UtYnVpbGQuanNcIjtcbmltcG9ydCByZWxlYXNlTm90ZXMgZnJvbSBcIi4vcmVsZWFzZS12aWV3LmpzXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi8uLi9saWIvdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb24gfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvZGVzY3JpcHRpb24uanNcIjtcbmltcG9ydCB7IGV4ZWNTY3JpcHQgfSBmcm9tIFwiLi4vLi4vbGliL2V4ZWMvZXhlYy1zY3JpcHQuanNcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uLy4uL2xpYi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmNSZXN1bHQgfSBmcm9tIFwiLi4vLi4vbGliL2V4ZWMvZXhlYy1zeW5jLXJlc3VsdC5qc1wiO1xuaW1wb3J0IHsgZ2V0QWxsRmlsZXMgfSBmcm9tIFwiLi4vLi4vbGliL2ZpbGUtbWFuYWdlbWVudC9nZXQtYWxsLWZpbGVzLmpzXCI7XG5pbXBvcnQgeyBnaXRDYW5BY2Nlc3NSZW1vdGUgfSBmcm9tIFwiLi4vLi4vbGliL2dpdC9naXQtY2FuLWFjY2Vzcy1yZW1vdGUuanNcIjtcbmltcG9ydCB7IGdpdEVuc3VyZVJlbW90ZSB9IGZyb20gXCIuLi8uLi9saWIvZ2l0L2dpdC1lbnN1cmUtcmVtb3RlLmpzXCI7XG5pbXBvcnQgeyBnaXRIYXNDaGFuZ2VzIH0gZnJvbSBcIi4uLy4uL2xpYi9naXQvZ2l0LWhhcy1jaGFuZ2VzLmpzXCI7XG5pbXBvcnQgeyBnaXRSZXR1cm5Ub0RldiB9IGZyb20gXCIuLi8uLi9saWIvZ2l0L2dpdC1yZXR1cm4tdG8tZGV2LmpzXCI7XG5pbXBvcnQgeyBnaXRVcGRhdGVCcmFuY2ggfSBmcm9tIFwiLi4vLi4vbGliL2dpdC9naXQtdXBkYXRlLWJyYW5jaC5qc1wiO1xuaW1wb3J0IHsgcHJvbXB0Q29uZmlybSB9IGZyb20gXCIuLi8uLi9saWIvcHJvbXB0L3Byb21wdC1jb25maXJtLmpzXCI7XG5pbXBvcnQgeyB0YXJnZXRQcm9qZWN0UmVwbyB9IGZyb20gXCIuLi8uLi9saWIvdGFyZ2V0LXByb2plY3QvdGFyZ2V0LXByb2plY3QtcmVwby5qc1wiO1xuaW1wb3J0IHsgdGFyZ2V0UHJvamVjdFZlcnNpb24gfSBmcm9tIFwiLi4vLi4vbGliL3RhcmdldC1wcm9qZWN0L3RhcmdldC1wcm9qZWN0LXZlcnNpb24uanNcIjtcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvd2FpdC5qc1wiO1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHJlcXVpcmVkIHJlbW90ZSBuYW1lIHRoYXQgbXVzdCBiZSBwcmVzZW50IGZvciB0aGUgcmVsZWFzZSBzY3JpcHRcbiAqIHRvIHdvcmtcbiAqL1xuY29uc3QgRU5TVVJFX1JFTU9URSA9IFwib3JpZ2luXCI7XG5cbi8qKlxuICogVGhpcyBtZXRob2QgY2hlY2tzIGFsbCBvZiB0aGUgcGFja2FnZSBqc29uIHNldHRpbmdzIGFuZCBlbnN1cmVzIHRoZVxuICogcmVwb3NpdG9yaWVzIGxpc3RlZCBhcmUgdmFsaWQgZm9yIHVzZSB3aXRoaW4gdGhpcyBjb250ZXh0LlxuICovXG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZVJlcG9zaXRvcnkoKSB7XG4gIGNvbnN0IHByb2plY3RSZXBvID0gYXdhaXQgdGFyZ2V0UHJvamVjdFJlcG8oKTtcbiAgY29uc3QgRU5TVVJFX1JFTU9URV9QUk9KRUNUID0gcHJvamVjdFJlcG8udXJsO1xuXG4gIGlmIChcbiAgICAhcHJvamVjdFJlcG8gfHxcbiAgICAhKFxuICAgICAgcHJvamVjdFJlcG8udHlwZSAhPT0gXCJnaXRsYWJcIiB8fFxuICAgICAgcHJvamVjdFJlcG8udHlwZSAhPT0gXCJnaXRcIiB8fFxuICAgICAgcHJvamVjdFJlcG8udHlwZSAhPT0gXCJiaXRidWNrZXRcIiB8fFxuICAgICAgcHJvamVjdFJlcG8udHlwZSAhPT0gXCJzdGFzaFwiXG4gICAgKVxuICApIHtcbiAgICBjb25zb2xlLndhcm4oYFxuICAgICAgWW91IE1VU1QgaGF2ZSBhIHJlcG9zaXRvcnkgc3BlY2lmaWVkIGluIHlvdXIgcGFja2FnZSBqc29uIHRvIHVzZSB0aGVcbiAgICAgIHJlbGVhc2Ugc2NyaXB0LiBJdCBtdXN0IGJlIG9mICd0eXBlOiBnaXQnIGFuZCBoYXZlIGEgdmFsaWQgc3NoIHVybCB0b1xuICAgICAgeW91ciBnaXQgcmVwby5cblxuICAgICAgQWRkaXRpb25hbGx5LCB5b3UgTVVTVCBoYXZlIGEgcmVtb3RlIGNvbmZpZ3VyZWQgZm9yIHlvdXIgcHJvamVjdCBvZlxuICAgICAgJ29yaWdpbicgdGhhdCBtYXRjaGVzIHRoZSByZXBvIHVybCBsaXN0ZWQgaW4geW91ciBwYWNrYWdlLmpzb24uXG5cbiAgICAgIFRodXM6IFwiZ2l0IHJlbW90ZSAtdlwiIFNIT1VMRCBvdXRwdXQgYSBsaW5lIHdpdGhcbiAgICAgIG9yaWdpbiA8dXJsIGluIHlvdXIgcGFja2FnZSBqc29uIHJlcG9zaXRvcnkgZmllbGQ+IChwdXNoKVxuICAgIGApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIFdlIGNoZWNrIG91ciByZW1vdGUgdG8gZW5zdXJlIHdlIGhhdmUgYSBwcm9qZWN0IHdpdGggZXhwZWN0ZWQgdmFsdWVzXG4gIGNvbnN0IHJlbW90ZUxpc3RQcm9jZXNzID0gYXdhaXQgZXhlY1N5bmNSZXN1bHQoXCJnaXRcIiwgW1wicmVtb3RlXCIsIFwiLXZcIl0pO1xuXG4gIGlmIChyZW1vdGVMaXN0UHJvY2VzcyA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBsaXN0IHJlbW90ZXMgZm9yIHRoZSBnaXQgcHJvamVjdC5cIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc3QgcmVtb3RlcyA9IHJlbW90ZUxpc3RQcm9jZXNzLnNwbGl0KC9cXHI/XFxuL2cpO1xuXG4gIGNvbnN0IGZvdW5kUmVtb3RlID0gcmVtb3Rlcy5maW5kKFxuICAgIChyb3cpID0+XG4gICAgICByb3cuaW5kZXhPZihFTlNVUkVfUkVNT1RFKSA+PSAwICYmIHJvdy5pbmRleE9mKEVOU1VSRV9SRU1PVEVfUFJPSkVDVCkgPj0gMFxuICApO1xuXG4gIGlmICghZm91bmRSZW1vdGUpIHtcbiAgICBjb25zb2xlLndhcm4oXG4gICAgICBcIkNvdWxkIG5vdCBtYXRjaCBwYWNrYWdlIGpzb24gcmVwb3NpdG9yeSB0byBhbiBvcmlnaW4gcmVtb3RlIGluIGdpdCBDTElcIixcbiAgICAgIHsgcmVtb3RlTGlzdFByb2Nlc3MsIHJlbW90ZXMsIEVOU1VSRV9SRU1PVEUsIEVOU1VSRV9SRU1PVEVfUFJPSkVDVCB9XG4gICAgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBOb3cgY2hlY2sgdG8gbWFrZSBzdXJlIHRoZSByZXBvIHNwZWNpZmllZCBleGlzdHMgaW4gZ2l0IGFuZCBpcyBhdmFpbGFibGUgdG9cbiAgLy8gdGhlIHVzZXJcbiAgaWYgKCFnaXRDYW5BY2Nlc3NSZW1vdGUoRU5TVVJFX1JFTU9URV9QUk9KRUNUKSkge1xuICAgIGNvbnNvbGUud2FybihgXG4gICAgICBZb3UgZG8gbm90IHNlZW0gdG8gaGF2ZSBhY2Nlc3MgdG8gdGhlIHJlcG8gbGlzdGVkIGluIHRoZSBwYWNrYWdlIGpzb24gb2ZcbiAgICAgIHRoaXMgcHJvamVjdC4gUGxlYXNlIGVuc3VyZSB5b3UgaGF2ZSB3cml0ZSBhY2Nlc3MgdG8gdGhlIHJlcG86XG4gICAgICAke0VOU1VSRV9SRU1PVEVfUFJPSkVDVH1cbiAgICAgIGFuZCB0aGVuIHRyeSB0byBydW4gdGhlIHJlbGVhc2UgYWdhaW4uXG4gICAgYCk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gV2UgY2FuIG9ubHkgZG8gdGhpcyBvcGVyYXRpb24gaWYgdGhlcmUgaXMgbm90aGluZyB0byBjb21taXQgb3IgcHVzaFxuICAvLyBUaGlzIG9ubHkgd29ya3MgaWYgbm8gY2hhbmdlcyBhcmUgcHJlc2VudFxuICBpZiAoYXdhaXQgZ2l0SGFzQ2hhbmdlcygpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiWW91IGhhdmUgdW5jb21taXR0ZWQgY2hhbmdlcyBvciB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgcHJvamVjdCBjYW4gbm90IGJlIGRldGVybWluZWQuIFBsZWFzZSBjb21taXQgb3Igc3Rhc2ggdGhlbSBiZWZvcmUgY29udGludWluZy5cIlxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc29sZS53YXJuKFwiUmVwb3NpdG9yeSB2YWxpZGF0aW9uIGNvbXBsZXRlXCIpO1xufVxuXG4vKipcbiAqIE1ha2VzIHN1cmUgd2UgYXJlIG9uIHRoZSByZWxlYXNlIGJyYW5jaCBhbmQgY29tcGxldGVseSB1cGRhdGVkIHdpdGggdGhlXG4gKiBjb250ZW50cyBvZiBkZXYuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNoZWNrb3V0UmVsZWFzZSgpIHtcbiAgLy8gTWFrZSBzdXJlIHdlJ3JlIG9uIGEgcmVsZWFzZSBicmFuY2ggdGhhdCBtYXRjaGVzIGRldlxuICBpZiAoIShhd2FpdCBhd2FpdCBleGVjU3luYyhcImdpdFwiLCBbXCJjaGVja291dFwiLCBcInJlbGVhc2VcIl0pKSkge1xuICAgIGlmICghKGF3YWl0IGV4ZWNTeW5jKFwiZ2l0XCIsIFtcImNoZWNrb3V0XCIsIFwiLWJcIiwgXCJyZWxlYXNlXCJdKSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJDb3VsZCBub3Qgc3dpdGNoIHRvIHRoZSByZWxlYXNlIGJyYW5jaC4gTWFrZSBzdXJlIHRoZSBicmFuY2ggZXhpc3RzIGxvY2FsbHkuXCJcbiAgICAgICk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICB9XG5cbiAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgdGhlIGxhdGVzdCBmcm9tIHRoZSByZW1vdGVcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoYGdpdGAsIFtcImZldGNoXCIsIGAke0VOU1VSRV9SRU1PVEV9YF0pKSkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBmZXRjaCBmcm9tIHJlbW90ZSBzZXJ2ZXJzLlwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgd2UgYXJlIGV4YWN0bHkgd2hhdCBpcyBpbiBkZXZcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoYGdpdGAsIFtcInJlc2V0XCIsIFwiLS1oYXJkXCIsIGAke0VOU1VSRV9SRU1PVEV9L2RldmBdKSkpIHtcbiAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCByZXNldCBicmFuY2ggdG8gZGV2YCk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgY29uc29sZS53YXJuKFwiQ2hlY2tlZCBvdXQgcmVsZWFzZSBicmFuY2ggYW5kIHVwZGF0ZWQgdG8gZGV2XCIpO1xufVxuXG4vKipcbiAqIERldGVybWluZXMgdGhlIGxhc3QgcmVsZWFzZSB0eXBlIGJhc2VkIG9uIHRoZSBjb250ZW50cyBwbGFjZWQgd2l0aGluIHRoZVxuICogcmVsZWFzZSBub3RlcyBmaWxlLlxuICovXG5mdW5jdGlvbiBnZXRSZWxlYXNlVHlwZSgpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBub3Rlczogc3RyaW5nID0gZnMucmVhZEZpbGVTeW5jKFxuICAgICAgcGF0aC5yZXNvbHZlKFwiUkVMRUFTRV9OT1RFUy5tZFwiKSxcbiAgICAgIFwidXRmOFwiXG4gICAgKTtcbiAgICBjb25zdCBncm91cHMgPSBub3Rlc1xuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC5zcGxpdChcIlxcblwiKVxuICAgICAgLm1hcCgobGluZSkgPT4gKGxpbmUubWF0Y2goLyMjIChcXHcrKS8pIHx8IFtdKVsxXSlcbiAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG4gICAgaWYgKGdyb3Vwcy5pbmNsdWRlcyhcImJyZWFraW5nXCIpKSByZXR1cm4gXCJtYWpvclwiO1xuICAgIGlmIChncm91cHMuaW5jbHVkZXMoXCJhZGRlZFwiKSkgcmV0dXJuIFwibWlub3JcIjtcbiAgICByZXR1cm4gXCJwYXRjaFwiO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGRldGVybWluZSByZWxlYXNlIHR5cGUgYWZ0ZXIgcmVsZWFzZSB3YXMgY3JlYXRlZFwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cblxuLyoqXG4gKiBVcGRhdGUgb3VyIHJlbGVhc2Ugbm90ZXMgYW5kIGRldGVybWluZSB3aGF0IG91ciBuZXh0IHZlcnNpb24gaXMgZ29pbmcgdG8gYmVcbiAqIGJhc2VkIG9uIGNvbW1pdCBtZXNzYWdlcy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gdXBkYXRlVmVyc2lvbihhbHRlcm5hdGU/OiBzdHJpbmcpIHtcbiAgLy8gR2V0IG91ciBjdXJyZW50IHZlcnNpb24gc28gd2UgY2FuIGVuc3VyZSBvdXIgdmVyc2lvbiBjaGFuZ2VkLlxuICBjb25zdCBjdXJyZW50VmVyc2lvbiA9IGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCk7XG5cbiAgLy8gRW5zdXJlIGFsbCBmcmFnbWVudHMgYXJlIGdvaW5nIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBjb21taXRcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoXCJnaXRcIiwgW1wiYWRkXCIsIFwiLUFcIl0pKSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiQ291bGQgbm90IGVuc3VyZSBhbGwgZnJhZ21lbnRzIGFyZSBhZGRlZCBmb3IgdGhlIG5leHQgY29tbWl0LlwiXG4gICAgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBUaGlzIGhlbHBzIHRoZSBmaWxlIHN5c3RlbSBmbHVzaCBiZWZvcmUgd2UgZG8gYW55IGFydGlmYWN0IGdhdGhlciBhbmRcbiAgLy8gY29tbWl0cy5cbiAgY29uc3QgZGlzdFBhdGggPSBwYXRoLnJlc29sdmUoXCJkaXN0L3N0b3JpZXNcIik7XG4gIGdldEFsbEZpbGVzKGRpc3RQYXRoKTtcbiAgLy8gQWxzbyBwZXJmb3JtaW5nIGEgYnJlYWtpbmcgd2FpdCBoZWxwcyBzb21lIHByb2Nlc3NlcyByZWxlYXNlIHJlc291cmNlcyBhbmRcbiAgLy8gZmlsZSBob2xkcyBhcyB3ZWxsXG4gIGF3YWl0IHdhaXQoNTAwKTtcblxuICAvLyBIYXZlIHRoaXMgZXhlY3V0ZSB0aGUgcmVsZWFzZS1ub3RlcyBzY3JpcHRcbiAgYXdhaXQgcmVsZWFzZU5vdGVzKHtcbiAgICBmaWxlOiBcIlJFTEVBU0VfTk9URVMubWRcIixcbiAgICB1cGRhdGVQYWNrYWdlOiB0cnVlLFxuICB9KTtcblxuICAvLyBHZXQgdGhlIHZlcnNpb24gcnVubmVyIHNob3VsZCBoYXZlIHVwZGF0ZWQgdG9cbiAgY29uc3QgbmV3VmVyc2lvbiA9IGF3YWl0IHRhcmdldFByb2plY3RWZXJzaW9uKCk7XG5cbiAgLy8gSWYgb3VyIHZlcnNpb24gaGFzIG5vdCBjaGFuZ2VkLCB0aGVuIHRoZXJlIHdlcmUgbm8gY29tbWl0cyB3aXRoIHJlbGVhc2VcbiAgLy8gbm90ZXNcbiAgaWYgKGN1cnJlbnRWZXJzaW9uID09PSBuZXdWZXJzaW9uKSB7XG4gICAgY29uc29sZS53YXJuKGBcbiAgICAgIFRoZSByZWxlYXNlIHNjcmlwdCBkaWQgbm90IGRldGVjdCBhbnkgY2hhbmdlcyBmb3IgYSByZWxlYXNlLiBJZiB5b3UgZmluZFxuICAgICAgdGhpcyB0byBiZSBpbiBlcnJvciBvciB5b3Ugd2FudCB0byBmb3JjZSBhIG5ldyByZWxlYXNlLiBNYWtlIHNvbWUgY29tbWl0c1xuICAgICAgd2l0aCBwcm9wZXIgcmVsZWFzZSBub3RlIGZvcm1hdHRlZCBtZXNzYWdlcyB0byB0cmlnZ2VyIGEgcmVsZWFzZS5cbiAgICBgKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBpZiAoYWx0ZXJuYXRlKSB7XG4gICAgaWYgKGdldFJlbGVhc2VUeXBlKCkgIT09IFwicGF0Y2hcIikge1xuICAgICAgY29uc29sZS5lcnJvcihgXG4gICAgICAgIENhbm5vdCBjcmVhdGUgYSByZWxlYXNlIGZvciBhbiBhbHRlcm5hdGUgYnJhbmNoIHRoYXQgaXMgbm90IGEgc2ltcGxlXG4gICAgICAgIHBhdGNoLiBGZWF0dXJlcyBhbmQgYnJlYWtpbmcgY2hhbmdlcyBjYW4gT05MWSBiZSBtYWRlIG9uIHRoZSBtYWluIGJyYW5jaCBvZlxuICAgICAgICBkZXZlbG9wbWVudC5cbiAgICAgIGApO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdldCB0aGUgdmVyc2lvbiBnZW5lcmF0ZWQgYnkgdGhlIHJ1bm5lciByZWxlYXNlIG5vdGVzIGNvbW1pdFxuICBjb25zdCBsYXN0Q29tbWl0UHJvY2VzcyA9IGF3YWl0IGV4ZWNTeW5jUmVzdWx0KFwiZ2l0XCIsIFtcbiAgICBcImxvZ1wiLFxuICAgIFwiLTFcIixcbiAgICBcIi0tcHJldHR5PSVCXCIsXG4gIF0pO1xuXG4gIGlmIChsYXN0Q29tbWl0UHJvY2VzcyA9PT0gbnVsbCkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCByZWFkIHRoZSBsYXN0IGNvbW1pdCB2ZXJzaW9uIGluZm9ybWF0aW9uXCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnN0IHZlcnNpb24gPSAoXG4gICAgbGFzdENvbW1pdFByb2Nlc3MudHJpbSgpLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCJyZWxlYXNlIFwiKVsxXSB8fCBcIlwiXG4gICkudHJpbSgpO1xuXG4gIGlmICghdmVyc2lvbikge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiQ291bGQgbm90IGRldGVybWluZSByZWxlYXNlIHZlcnNpb24gZnJvbSB0aGUgbGFzdCBjb21taXQ6XFxuXFxuXCIsXG4gICAgICBsYXN0Q29tbWl0UHJvY2Vzcy50b1N0cmluZygpLFxuICAgICAgXCJcXG5cXG5cIlxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gVXBkYXRlIHRoZSByZWxlYXNlIHZlcnNpb24ganNvbiBpbiB0aGUgc291cmNlXG4gIGlmIChmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcInVpL3JlbGVhc2UuanNvblwiKSkpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgY29udGVudHMgPSBmcy5yZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKFwidWkvcmVsZWFzZS5qc29uXCIpKTtcbiAgICAgIGNvbnRlbnRzLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgZnMud3JpdGVKU09OU3luYyhwYXRoLnJlc29sdmUoXCJ1aS9yZWxlYXNlLmpzb25cIiksIGNvbnRlbnRzKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgXCJDb3VsZCBub3QgdXBkYXRlIHRoZSByZWxlYXNlLmpzb24gZmlsZSB3aXRoIGN1cnJlbnQgbGlicmFyeSB2ZXJzaW9uLlwiXG4gICAgICApO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgY2hhbmdlcyB0byB0aGUgcmVsZWFzZSBqc29uIGZpbGVcbiAgICBpZiAoIShhd2FpdCBleGVjU3luYyhcImdpdFwiLCBbXCJhZGRcIiwgXCItQVwiXSkpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiQ291bGQgbm90IGVuc3VyZSB0aGUgcmVsZWFzZSBqc29uIHdhcyB1cGRhdGVkIGZvciB0aGUgbmV3IHZlcnNpb24uXCJcbiAgICAgICk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuXG4gICAgLy8gQW1lbmQgdGhlIHJlbGVhc2UgY29tbWl0XG4gICAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoXCJnaXRcIiwgW1wiY29tbWl0XCIsIFwiLS1hbWVuZFwiLCBcIi0tbm8tZWRpdFwiXSkpKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiQ291bGQgbm90IGFtZW5kIHRoZSByZWxlYXNlIGNvbW1pdCB0byBpbmNsdWRlIHRoZSByZWxlYXNlIGpzb24gZmlsZS5cIlxuICAgICAgKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH1cblxuICBpZiAodmVyc2lvbi5pbmNsdWRlcygnXCInKSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiVGhlIHVwZGF0ZSB2ZXJzaW9uIGdlbmVyYXRlZCBpcyBpbnZhbGlkIGFzIGl0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVyc1wiLFxuICAgICAgeyB2ZXJzaW9uIH1cbiAgICApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIGNvbnNvbGUud2FybihcIlVwZGF0aW5nIHZlcnNpb24gdG9cIiwgeyB2ZXJzaW9uIH0pO1xuICByZXR1cm4gdmVyc2lvbjtcbn1cblxuLyoqXG4gKiBUaGlzIGdlbmVyYXRlcyBhIHRhZyBmb3IgdGhlIGdpdmVuIHJlbGVhc2VcbiAqL1xuYXN5bmMgZnVuY3Rpb24gdXBkYXRlVGFnKHZlcnNpb246IHN0cmluZykge1xuICAvLyBUYWcgdGhlIGNvbW1pdCB3aXRoIHRoZSB2ZXJzaW9uIG51bWJlclxuICBpZiAoXG4gICAgIShhd2FpdCBleGVjU3luYyhgZ2l0YCwgW2B0YWdgLCBcIi1hXCIsIHZlcnNpb24sIFwiLW1cIiwgYFJlbGVhc2UgJHt2ZXJzaW9ufWBdKSlcbiAgKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IG1ha2UgdGFnIGZvciBnaXQgY29tbWl0XCIpO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgYWxsIGFjdGlvbnMgdG8gcHVzaGluZyB0aGUgZ2VuZXJhdGVkIHJlc3VsdHMgdG8gdGhlIHJlbW90ZVxuICogcmVwb3NpdG9yeVxuICovXG5hc3luYyBmdW5jdGlvbiBwdXNoVG9SZW1vdGUoXG4gIHJlbW90ZTogc3RyaW5nLFxuICB2ZXJzaW9uOiBzdHJpbmcsXG4gIGZyb21CcmFuY2g6IHN0cmluZyxcbiAgdG9CcmFuY2g6IHN0cmluZyxcbiAgZm9yY2U6IGJvb2xlYW5cbikge1xuICAvLyBQdXNoIHRoZSBjb21taXQgdG8gcmVtb3RlIHJlbGVhc2UgYnJhbmNoXG4gIGlmIChcbiAgICAhKGF3YWl0IGV4ZWNTeW5jKGBnaXRgLCBbXG4gICAgICBcInB1c2hcIixcbiAgICAgIGZvcmNlID8gXCItZlwiIDogdm9pZCAwLFxuICAgICAgcmVtb3RlLFxuICAgICAgYCR7ZnJvbUJyYW5jaH06JHt0b0JyYW5jaH1gLFxuICAgIF0pKVxuICApIHtcbiAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBwdXNoIHJlbGVhc2UgY29tbWl0IHRvICR7cmVtb3RlfWApO1xuICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgfVxuXG4gIC8vIFB1c2ggdGhlIHRhZyB0byByZW1vdGVcbiAgaWYgKCEoYXdhaXQgZXhlY1N5bmMoYGdpdGAsIFtcInB1c2hcIiwgcmVtb3RlLCB2ZXJzaW9uXSkpKSB7XG4gICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IHB1c2ggdGFnIHRvIHRoZSByZW1vdGUgcmVwb3NpdG9yeVwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHdpbGwgZW5zdXJlIGVhY2ggcmVtb3RlIGlzIGFjY2Vzc2libGUgYnkgdGhlIHVzZXIgYW5kIHdpbGwgcHVzaCB0aGVcbiAqIHJlbGVhc2UgYnJhbmNoIHRvIGVhY2ggb2YgdGhlIHNwZWNpZmllZCByZW1vdGVzIGF0IHRoZSBwb3RlbnRpYWwgdGFyZ2V0XG4gKiBicmFuY2g6XG4gKlxuICogcmVtb3RlOmZyb21CcmFuY2g6dG9CcmFuY2g6Zm9yY2VcbiAqXG4gKiBJZiB0aGUgYnJhbmNoIGlzIG5vdCBzcGVjaWZpZWQsIHRoZSBicmFuY2ggc3BlY2lmaWVkIGZvciB0aGlzIHByb2plY3Qgd2lsbFxuICogYmUgdXNlZC5cbiAqXG4gKiBUaGUgXCJmb3JjZVwiIG9wdGlvbiBpcyBsaXRlcmFsLiBVc2UgdGhlIHdvcmQgXCJmb3JjZVwiIHRvIHRyaWdnZXIgYSBmb3JjZSBwdXNoLlxuICovXG5hc3luYyBmdW5jdGlvbiByZWxlYXNlQWRkaXRpb25hbFJlbW90ZXMoYWRkUmVtb3Rlczogc3RyaW5nW10sIHZlcnNpb246IHN0cmluZykge1xuICBpZiAoYWRkUmVtb3RlcyAmJiBhZGRSZW1vdGVzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBzaG91bGRSZWxlYXNlUmVtb3RlcyA9IGF3YWl0IHByb21wdENvbmZpcm0oXG4gICAgICBkZXNjcmlwdGlvbmBcbiAgICAgICAgVGhlIGJ1aWxkIGFuZCByZWxlYXNlIHdhcyBzdWNjZXNzZnVsLCB3b3VsZCB5b3UgbGlrZSB0byByZWxlYXNlIHRvIHRoZVxuICAgICAgICBzcGVjaWZpZWQgYWRkaXRpb25hbCByZW1vdGVzP1xuXG4gICAgICAgICR7Y2hhbGsuY3lhbkJyaWdodEJvbGQoYWRkUmVtb3Rlcy5qb2luKFwiXFxuXCIpKX1cbiAgICAgIGBcbiAgICApO1xuXG4gICAgaWYgKCFzaG91bGRSZWxlYXNlUmVtb3RlcykgcmV0dXJuO1xuICB9XG5cbiAgLy8gRG8gYSBmZXRjaCBhZ2FpbiB0byBlbnN1cmUgd2UgaGF2ZSB0aGUgbGF0ZXN0IGZyb20gdGhlIHJlbW90ZVxuICBpZiAoIShhd2FpdCBleGVjU3luYyhgZ2l0YCwgW1wiZmV0Y2hcIiwgRU5TVVJFX1JFTU9URV0pKSkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBmZXRjaCBmcm9tIHJlbW90ZSBzZXJ2ZXJzLlwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBmb3IgKGNvbnN0IHJlbW90ZUluZm8gb2YgYWRkUmVtb3Rlcykge1xuICAgIC8vIFB1c2ggdGhlIHJlbGVhc2UgdG8gdGhlIHNwZWNpZmllZCByZW1vdGVzXG4gICAgY29uc3QgW3JlbW90ZSwgZnJvbUJyYW5jaCwgdG9CcmFuY2gsIGZvcmNlXSA9IHJlbW90ZUluZm8uc3BsaXQoXCI6XCIpO1xuICAgIC8vIE1ha2Ugc3VyZSB0aGUgZGV2IGhhcyBhY2Nlc3MgdG8gdGhlIHNwZWNpZmllZCByZW1vdGVcbiAgICBhd2FpdCBnaXRFbnN1cmVSZW1vdGUocmVtb3RlKTtcbiAgICAvLyBSZXNldCB0aGUgZnJvbUJyYW5jaCB0byBpdCdzIGxhdGVzdCBmcm9tIG9yaWdpblxuICAgIGF3YWl0IGdpdFVwZGF0ZUJyYW5jaChFTlNVUkVfUkVNT1RFLCBmcm9tQnJhbmNoIHx8IFwibWFzdGVyXCIpO1xuICAgIC8vIERlcGxveSB0byB0aGUgY29uZmlndXJlZCBicmFuY2ggb3IgdG8gbWFzdGVyXG4gICAgYXdhaXQgcHVzaFRvUmVtb3RlKFxuICAgICAgcmVtb3RlLFxuICAgICAgdmVyc2lvbixcbiAgICAgIGZyb21CcmFuY2ggfHwgXCJtYXN0ZXJcIixcbiAgICAgIHRvQnJhbmNoIHx8IFwibWFzdGVyXCIsXG4gICAgICBmb3JjZSA9PT0gXCJmb3JjZVwiXG4gICAgKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgcGVyZm9ybXMgYWxsIG9mIHRoZSBidWlsZCBhY3Rpb25zIHRvIGdlbmVyYXRlIGFsbCBmcmFnbWVudHMgdGhlIHByb2plY3RcbiAqIHdpbGwgZ2VuZXJhdGUgZm9yIGRpc3RyaWJ1dGlvbnMgYW5kIHRoZW4gd2lsbCBwdXNoIHRob3NlIGZyYWdtZW50cyBpbnRvIHRoZVxuICogcmVwby5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gYnVpbGRBbmRQdXNoKGFkZFJlbW90ZXM6IHN0cmluZ1tdKSB7XG4gIC8vIFByb2Nlc3MgYW5kIHNldCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBcInByb2R1Y3Rpb25cIjtcblxuICAvLyBNYWtlIHN1cmUgd2UgY2FuIG1ha2UgY2FsbHMgdG8gdGhlIHJlcG9cbiAgYXdhaXQgdmFsaWRhdGVSZXBvc2l0b3J5KCk7XG4gIC8vIE1vdmUgb3VyIGdpdCBjb250ZXh0IHRvIHRoZSByZWxlYXNlIGJyYW5jaFxuICBhd2FpdCBjaGVja291dFJlbGVhc2UoKTtcbiAgLy8gQnVpbGQgdGhlIHByb2plY3QgZnJhZ21lbnRzXG4gIGF3YWl0IHJlbGVhc2VCdWlsZCgpO1xuICAvLyBHZXQgdGhlIG5ldyB2ZXJzaW9uIHRoaXMgcmVsZWFzZSBpcyBnb2luZyB0byBiZWNvbWUuXG4gIGNvbnN0IHZlcnNpb24gPSBhd2FpdCB1cGRhdGVWZXJzaW9uKCk7XG4gIC8vIFRhZyB0aGUgcmVsZWFzZSBjb21taXQgd2l0aCB0aGUgbGF0ZXN0IHZlcnNpb25cbiAgYXdhaXQgdXBkYXRlVGFnKHZlcnNpb24pO1xuICAvLyBQdXNoIGV2ZXJ5dGhpbmcgd2UgaGF2ZSB1cGRhdGVkIHdpdGggZ2l0IHRvIHRoZSByZW1vdGUgcmVwb1xuICBhd2FpdCBwdXNoVG9SZW1vdGUoRU5TVVJFX1JFTU9URSwgdmVyc2lvbiwgXCJyZWxlYXNlXCIsIFwicmVsZWFzZVwiLCB0cnVlKTtcblxuICAvLyBBc2sgdG8gcnVuIHRoZSBwciByZWxlYXNlIHNjcmlwdFxuICBjb25zdCBzaG91bGRQciA9IGF3YWl0IHByb21wdENvbmZpcm0oXCJXb3VsZCB5b3UgbGlrZSB0byBydW4gcHIgcmVsZWFzZT9cIik7XG5cbiAgaWYgKHNob3VsZFByKSB7XG4gICAgLy8gQXR0ZW1wdCB0byBydW4gcHIgcmVsZWFzZS4gV2UgZG9uJ3QgY2FyZSBpZiBpdCB3b3JrcyBvciBub3QgYXMgdGhpcyBpcyBhblxuICAgIC8vIG9wdGlvbmFsIGJyYW5jaCB0YWtlbiBieSB0aGUgdXNlciBhbnl3aG8uXG4gICAgYXdhaXQgZXhlY1NjcmlwdChcInByXCIsIFtcInJlbGVhc2VcIl0pO1xuICB9XG5cbiAgLy8gQXNrIHRvIGRlcGxveSBhZGRpdGlvbmFsIHNwZWNpZmllZCByZW1vdGVzXG4gIGF3YWl0IHJlbGVhc2VBZGRpdGlvbmFsUmVtb3RlcyhhZGRSZW1vdGVzLCB2ZXJzaW9uKTtcbiAgLy8gTm93IHdlIGFzayB0byByZXR1cm4gdG8gb3JpZ2luYWwgYnJhbmNoXG4gIGF3YWl0IGdpdFJldHVyblRvRGV2KHRydWUpO1xuXG4gIC8vIFBlcmZvcm0gYW4gZXhwbGljaXQgc2h1dGRvd24gdG8gZW5zdXJlIHRoZSBwcm9jZXNzIGV4aXRzIGNsZWFubHkgYW5kXG4gIC8vIHJlbGVhc2VzIGFueSByZW1haW5pbmcgcmVzb3VyY2UgaG9sZHMuXG4gIHByb2Nlc3MuZXhpdCgwKTtcbn1cblxuLyoqXG4gKiBFbnRyeSBtZXRob2QgZm9yIHRoZSByZWxlYXNlIHByb2Nlc3NcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKGFkZFJlbW90ZXM6IHN0cmluZ1tdKSB7XG4gIGNvbnNvbGUud2FybihcIkV4ZWN1dGluZyByZWxlYXNlIHNjcmlwdFwiKTtcbiAgYnVpbGRBbmRQdXNoKGFkZFJlbW90ZXMpO1xufVxuIiwKICAgICJpbXBvcnQgeyByZWxlYXNlTGlicmFyeVR5cGVzIH0gZnJvbSBcIi4uLy4uL2xpYi9idWlsZC9saWJyYXJ5L3ZpdGUvcmVsZWFzZS1saWJyYXJ5LXR5cGVzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgYXdhaXQgcmVsZWFzZUxpYnJhcnlUeXBlcygpO1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgSWdub3JlIGZyb20gXCJpZ25vcmVcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuLi9saWIvZXhlYy9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IHdhaXQgfSBmcm9tIFwiLi4vbGliL3V0aWwvd2FpdC5qc1wiO1xuXG5jb25zdCBnaXRJZ25vcmVQYXRoID0gcGF0aC5yZXNvbHZlKFwiLmdpdGlnbm9yZVwiKTtcbmxldCBpZ25vcmUgPSBJZ25vcmUuZGVmYXVsdCgpO1xuXG5pZiAoZnMuZXhpc3RzU3luYyhnaXRJZ25vcmVQYXRoKSkge1xuICBpZ25vcmUgPSBpZ25vcmUuYWRkKGZzLnJlYWRGaWxlU3luYyhnaXRJZ25vcmVQYXRoKS50b1N0cmluZygpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0eXBlc2NyaXB0IHR5cGUgY29tcGlsYXRpb24gd2l0aG91dCBlbWl0dGluZyBhbnl0aGluZy4gVGhpcyBjYW4gYmVcbiAqIHVzZWQgdG8gZmluZCBlcnJvcnMgaW4gdGhlIHByb2plY3QgYmVmb3JlIGEgcmVsZWFzZSBpcyBhdHRlbXB0ZWQuIE9yIHlvdSBjYW5cbiAqIHJ1biB0aGlzIGFzIG5vZGVtb24gcHJvY2VzcyB0byBmaW5kIGVycm9ycyBhcyBkZXZlbG9wbWVudCBoYXBwZW5zLlxuICovXG5hc3luYyBmdW5jdGlvbiBydW5UeXBlc2NyaXB0KG1vZGU6IHN0cmluZykge1xuICAvLyBCdWlsZCBkZWNsYXJhdGlvbiBmaWxlcyBmb3IgdGhlIGxpYnJhcnkgb25seVxuICBjb25zdCB0c0NvbmZpZyA9IGZzLnJlYWRKU09OU3luYyhwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy5qc29uXCIpKTtcbiAgdHNDb25maWcuZXhjbHVkZSA9IHRzQ29uZmlnLmV4Y2x1ZGUgfHwgW107XG4gIHRzQ29uZmlnLmluY2x1ZGUgPSAodHNDb25maWc/LmluY2x1ZGUgfHwgW10pLmZpbHRlcihcbiAgICAocDogc3RyaW5nKSA9PiAhaWdub3JlLmlnbm9yZXMocGF0aC5yZWxhdGl2ZShcIi4vXCIsIHApKVxuICApO1xuICAvLyB0c0NvbmZpZy5leGNsdWRlLnB1c2goXCJsaWIvc2VydmVyXCIpO1xuICBmcy53cml0ZUpTT05TeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSwgdHNDb25maWcpO1xuICAvLyBFbnN1cmUgdGhlIGZpbGUgc3lzdGVtIGhhcyBmbHVzaGVkIHRoZSB0ZW1wIGZpbGUgdG8gZGlza1xuICBhd2FpdCB3YWl0KDUwMCk7XG5cbiAgLy8gTWFrZSBhIGNsZWFuIHVwIHJvdXRpbmUgZm9yIHdhdGNoIG1vZGVcbiAgaWYgKG1vZGUgPT09IFwid2F0Y2hcIikge1xuICAgIGNvbnN0IGhhbmRsZUV4aXQgPSBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oXCJFeGl0IFRTIHByb2Nlc3NcIik7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAvLyBOT09QXG4gICAgICB9XG5cbiAgICAgIHByb2Nlc3MuZXhpdCgwKTtcbiAgICB9O1xuXG4gICAgLy8gQ2F0Y2ggd2hlbiBhcHAgaXMgY2xvc2luZ1xuICAgIHByb2Nlc3Mub24oXCJleGl0XCIsIGhhbmRsZUV4aXQpO1xuICAgIC8vIENhdGNoIGN0cmwrYyBldmVudFxuICAgIHByb2Nlc3Mub24oXCJTSUdJTlRcIiwgaGFuZGxlRXhpdCk7XG4gICAgLy8gQ2F0Y2ggXCJraWxsIHBpZFwiIChmb3IgZXhhbXBsZTogbm9kZW1vbiByZXN0YXJ0KVxuICAgIHByb2Nlc3Mub24oXCJTSUdVU1IxXCIsIGhhbmRsZUV4aXQpO1xuICAgIHByb2Nlc3Mub24oXCJTSUdVU1IyXCIsIGhhbmRsZUV4aXQpO1xuICAgIHByb2Nlc3Mub24oXCJTSUdURVJNXCIsIGhhbmRsZUV4aXQpO1xuICAgIC8vIENhdGNoIHVuY2F1Z2h0IGV4Y2VwdGlvbnNcbiAgICBwcm9jZXNzLm9uKFwidW5jYXVnaHRFeGNlcHRpb25cIiwgaGFuZGxlRXhpdCk7XG4gIH1cbiAgaWYgKFxuICAgICFleGVjU3luYyhcInRzY1wiLCBbXG4gICAgICBcIi1kXCIsXG4gICAgICBtb2RlID09PSBcIndhdGNoXCIgPyBcIi0td2F0Y2hcIiA6IFwiXCIsXG4gICAgICBcIi0taW5jcmVtZW50YWxcIixcbiAgICAgIFwiLS1ub2VtaXRcIixcbiAgICAgIFwiLS1wcmV0dHlcIixcbiAgICAgIFwiLS10c0J1aWxkSW5mb0ZpbGVcIixcbiAgICAgIHBhdGgucmVzb2x2ZShcIm5vZGVfbW9kdWxlcy8uY2FjaGUvdHNjL3RzYy50c2J1aWxkaW5mb1wiKSxcbiAgICAgIFwiLS1vdXREaXJcIixcbiAgICAgIHBhdGgucmVzb2x2ZShcImRpc3RcIiksXG4gICAgICBcIi0tcHJvamVjdFwiLFxuICAgICAgcGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpLFxuICAgIF0pXG4gICkge1xuICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjb21waWxlIHR5cGUgZGVjbGFyYXRpb25zXCIpO1xuICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICBjb25zdCBlc2xpbnRUYXJnZXRzID0gKHRzQ29uZmlnPy5pbmNsdWRlIHx8IFtdKVxuICAgIC5maWx0ZXIoKHA6IHN0cmluZykgPT4gIWlnbm9yZS5pZ25vcmVzKHBhdGgucmVsYXRpdmUoXCIuL1wiLCBwKSkpXG4gICAgLm1hcCgocDogc3RyaW5nKSA9PiBwYXRoLnJlc29sdmUocCkpXG4gICAgLmZpbHRlcigocDogc3RyaW5nKSA9PiBmcy5leGlzdHNTeW5jKHApICYmICFwLmluY2x1ZGVzKFwibm9kZV9tb2R1bGVzXCIpKTtcblxuICBpZiAoZXNsaW50VGFyZ2V0cy5sZW5ndGggPiAwKSB7XG4gICAgaWYgKFxuICAgICAgIWV4ZWNTeW5jKFxuICAgICAgICAvLyBgZXNsaW50ICR7ZXNsaW50VGFyZ2V0cy5qb2luKFwiIFwiKX0gLWMgJHtwYXRoLnJlc29sdmUoXG4gICAgICAgIC8vICAgXCIuZXNsaW50cmNcIlxuICAgICAgICAvLyApfSAtLWV4dCAudHMgLS1leHQgLnRzeGBcbiAgICAgICAgXCJlc2xpbnRcIixcbiAgICAgICAgW1xuICAgICAgICAgIC4uLmVzbGludFRhcmdldHMsXG4gICAgICAgICAgXCItY1wiLFxuICAgICAgICAgIHBhdGgucmVzb2x2ZShcIi5lc2xpbnRyY1wiKSxcbiAgICAgICAgICBcIi0tZXh0XCIsXG4gICAgICAgICAgXCIudHNcIixcbiAgICAgICAgICBcIi0tZXh0XCIsXG4gICAgICAgICAgXCIudHN4XCIsXG4gICAgICAgIF1cbiAgICAgIClcbiAgICApIHtcbiAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCBlc2xpbnQgY2hlY2tzLlwiKTtcbiAgICAgIGZzLnJlbW92ZVN5bmMocGF0aC5yZXNvbHZlKFwidHNjb25maWcudGVtcC5qc29uXCIpKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9XG4gIH1cblxuICBmcy5yZW1vdmVTeW5jKHBhdGgucmVzb2x2ZShcInRzY29uZmlnLnRlbXAuanNvblwiKSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bihtb2RlOiBzdHJpbmcpIHtcbiAgYXdhaXQgcnVuVHlwZXNjcmlwdChtb2RlKTtcbn1cbiIsCiAgICAiaW1wb3J0IHJ1bkFwcFNlcnZlciBmcm9tIFwiLi4vLi4vbGliL2J1aWxkL3dlYi1hcHAvdml0ZS9ydW4tYXBwLXNlcnZlci5qc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi4vLi4vbGliL3V0aWwvY2hhbGsuanNcIjtcblxuLyoqXG4gKiBUaGlzIHNpbXBseSBmaXJlcyB1cCB0aGUgYXBwIHNlcnZlciB0byBydW4uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgY29uc29sZS53YXJuKGNoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJTdGFydGluZyBzZXJ2ZXIuLi5cIikpO1xuICBhd2FpdCBydW5BcHBTZXJ2ZXIoKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uL2xpYi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuXG4vKipcbiAqIFN0YXJ0cyBhIHNlcnZlciB3aXRoIGEgZ2l2ZW4gZW50cnkgcG9pbnQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHN0YXJ0U2VydmVyKHBhdGhUb1NlcnZlcjogc3RyaW5nKSB7XG4gIGlmICghZnMuZXhpc3RzU3luYyhwYXRoVG9TZXJ2ZXIpKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJBdHRlbXB0ZWQgdG8gc3RhcnQgYSBzZXJ2ZXIgYnV0IG5vIHNlcnZlciBkaXN0cmlidXRpb24gd2FzIGZvdW5kIGF0XCIsXG4gICAgICBwYXRoVG9TZXJ2ZXJcbiAgICApO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGF3YWl0IGV4ZWNTeW5jKGBidW5gLCBbYCR7cGF0aFRvU2VydmVyfWBdKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogU3RhcnRzIHRoZSBEZXZvcHMgQVBJIGhvc3RpbmcgaWYgYSBEZXZvcHMgYXBwIGRpc3RyaWJ1dGlvbiBpcyBhdmFpbGFibGVcbiAqL1xuYXN5bmMgZnVuY3Rpb24gc3RhcnREZXZvcHNBUEkoKSB7XG4gIGNvbnN0IHBhdGhUb1NlcnZlciA9IHBhdGgucmVzb2x2ZShcImRvY3MvaW5kZXguanNcIik7XG4gIHJldHVybiBhd2FpdCBzdGFydFNlcnZlcihwYXRoVG9TZXJ2ZXIpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyB0aGUgd2ViIGFwcCBpZiBhIHdlYiBhcHAgc2VydmVyIGlzIGF2YWlsYWJsZVxuICovXG5hc3luYyBmdW5jdGlvbiBzdGFydFdlYkFwcCgpIHtcbiAgLy8gVGVsbCB0aGUgcHJvY2VzcyB3aGVyZSB0byBmaW5kIGl0J3MgcmVzb3VyY2VzIHRoYXQgd2VyZSBzcGVjaWZpZWQgaW4gY2xpZW50XG4gIHByb2Nlc3MuZW52LlJFU09VUkNFX1BBVEggPSBwYXRoLnJlc29sdmUoXCJkaXN0L2FwcC9jbGllbnRcIik7XG4gIC8vIEdldCB0aGUgcGF0aCB0byBvdXIgc2VydmVyIGJ1bmRsZVxuICBjb25zdCBwYXRoVG9TZXJ2ZXIgPSBwYXRoLnJlc29sdmUoXCJkaXN0L2FwcC9zZXJ2ZXIvaW5kZXguanNcIik7XG4gIC8vIFN0YXJ0IHRoZSBzZXJ2ZXIgZGlzdHJpYnV0aW9uXG4gIHJldHVybiBhd2FpdCBzdGFydFNlcnZlcihwYXRoVG9TZXJ2ZXIpO1xufVxuXG4vKipcbiAqIEVudHJ5IG1ldGhvZCBmb3IgdGhlIHN0YXJ0IGNvbW1hbmRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKHRhcmdldDogc3RyaW5nLCBfb3B0aW9uczogYW55KSB7XG4gIC8vIERlZmF1bHQgb3VyIHBvcnQgdG8gYSBwcm9wZXIgSFRUUCBwb3J0IHByb3RvY29sXG4gIGNvbnN0IHsgUE9SVCA9IFwiODBcIiB9ID0gcHJvY2Vzcy5lbnY7XG4gIHByb2Nlc3MuZW52LlBPUlQgPSBQT1JUO1xuXG4gIGxldCBzZXJ2ZXJSdW5uaW5nID0gZmFsc2U7XG5cbiAgc3dpdGNoICh0YXJnZXQpIHtcbiAgICBjYXNlIFwiYXBwXCI6XG4gICAgICBzZXJ2ZXJSdW5uaW5nID0gYXdhaXQgc3RhcnRXZWJBcHAoKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcImRldm9wc1wiOlxuICAgICAgc2VydmVyUnVubmluZyA9IGF3YWl0IHN0YXJ0RGV2b3BzQVBJKCk7XG4gICAgICBicmVhaztcblxuICAgIC8vIERvIG5vdGhpbmcgaWYgYSBwcm9wZXIgdGFyZ2V0IHdhcyBub3QgcGlja2VkXG4gICAgZGVmYXVsdDpcbiAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiSW52YWxpZCB0YXJnZXQgZm9yIHN0YXJ0IHNjcmlwdCBzcGVjaWZpZWRcIiwgdGFyZ2V0KTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICB9XG5cbiAgLy8gSWYgd2UgaGF2bid0IGJlZW4gYWJsZSB0byBwaWNrIGEgc2VydmVyIGJhc2VkIG9uIHRhcmdldCwgdGhlbiB3ZSBhdHRlbXB0IHRvIHN0YXJ0IHRoZSBzZXJ2ZXIgdmlhIGRlZmF1bHQgYmVoYXZpb3JcbiAgaWYgKCFzZXJ2ZXJSdW5uaW5nKSB7XG4gICAgc2VydmVyUnVubmluZyA9IGF3YWl0IHN0YXJ0V2ViQXBwKCk7XG4gICAgaWYgKHNlcnZlclJ1bm5pbmcpIHJldHVybjtcbiAgICBzZXJ2ZXJSdW5uaW5nID0gYXdhaXQgc3RhcnREZXZvcHNBUEkoKTtcbiAgICBpZiAoc2VydmVyUnVubmluZykgcmV0dXJuO1xuICB9XG59XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuLi91dGlsL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBleGVjU2NyaXB0WCB9IGZyb20gXCIuLi9leGVjL2V4ZWMtc2NyaXB0eC5qc1wiO1xuaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi4vZXhlYy9leGVjLXN5bmMuanNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJ1blRlc3RzKCkge1xuICBjb25zdCB0c2NvbmZpZ1BhdGggPSBwYXRoLnJlc29sdmUoXCJ0c2NvbmZpZy5qc29uXCIpO1xuXG4gIGlmICghZnMuZXhpc3RzU3luYyh0c2NvbmZpZ1BhdGgpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVGFyZ2V0IHByb2plY3QgZG9lcyBub3QgaGF2ZSBhIFRTQ29uZmlnXCIpO1xuICB9XG5cbiAgLy8gU2VlIGlmIHdlIGFyZSBydW5uaW5nIHRoZSB1bml0IHRlc3RzIHdpdGggdGhlIG5lZWQgdG8gYXR0YWNoIGEgZGVidWcgY29uc29sZVxuICBjb25zdCBkZWJ1ZyA9IEJvb2xlYW4ocHJvY2Vzcy5lbnYuREVCVUcpO1xuICBjb25zdCBwYXR0ZXJuID0gcHJvY2Vzcy5lbnYuUEFUVEVSTjtcbiAgY29uc3Qgd2F0Y2ggPSBwcm9jZXNzLmVudi5XQVRDSDtcbiAgY29uc3QgbGVzcyA9IHByb2Nlc3MuZW52LkxFU1M7XG4gIC8vIFJ1biBwcmV0dGllciBvbmNlXG4gIGNvbnN0IGplc3RDb25maWcgPSBwYXRoLnJlc29sdmUoXCJqZXN0LmNvbmZpZy5qc1wiKTtcbiAgLy8gU3RvcCBleGVjU3luYyBjYXVnaHQgZXJyb3JzLiBXZSB3YW50IGplc3QgdG8gaGFuZGxlIHRob3NlIGxvZ3MgZm9yIHVzXG4gIGV4ZWNTeW5jLnNpbGVudCA9IHRydWU7XG5cbiAgdHJ5IHtcbiAgICBpZiAoZGVidWcpIHtcbiAgICAgIGV4ZWNTeW5jKFwibm9kZVwiLCBbXG4gICAgICAgIFwiLS1pbnNwZWN0LWJya1wiLFxuICAgICAgICBwYXRoLnJlc29sdmUoXCJub2RlX21vZHVsZXMvLmJpbi9qZXN0XCIpLFxuICAgICAgICBcIi0tcnVuSW5CYW5kXCIsXG4gICAgICAgIHdhdGNoID8gXCItLXdhdGNoQWxsXCIgOiBcIlwiLFxuICAgICAgICBcIi0tdmVyYm9zZVwiLFxuICAgICAgICBsZXNzID09PSBcInRydWVcIiA/IFwiZmFsc2VcIiA6IHZvaWQgMCxcbiAgICAgICAgXCItLWNvbG9yc1wiLFxuICAgICAgICBcIi0tY29uZmlnXCIsXG4gICAgICAgIGplc3RDb25maWcsXG4gICAgICAgIHBhdHRlcm4gPyBgLS10ZXN0TmFtZVBhdHRlcm4gJHtwYXR0ZXJufWAgOiBcIlwiLFxuICAgICAgXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV4ZWNTY3JpcHRYKFxuICAgICAgICBbXG4gICAgICAgICAgXCJqZXN0XCIsXG4gICAgICAgICAgd2F0Y2ggPyBcIi0td2F0Y2hBbGxcIiA6IFwiXCIsXG4gICAgICAgICAgXCItLXZlcmJvc2VcIixcbiAgICAgICAgICBsZXNzID09PSBcInRydWVcIiA/IFwiZmFsc2VcIiA6IHZvaWQgMCxcbiAgICAgICAgICBcIi0tY29sb3JzXCIsXG4gICAgICAgICAgXCItLWNvbmZpZ1wiLFxuICAgICAgICAgIGplc3RDb25maWcsXG4gICAgICAgICAgcGF0dGVybiA/IGAtLXRlc3ROYW1lUGF0dGVybj0ke3BhdHRlcm59YCA6IFwiXCIsXG4gICAgICAgIF0sXG4gICAgICAgIC8vIFRoZSBidW4gZmxhZyBjdXJyZW50bHkgY2F1c2VzIGplc3QgdG8gYnJlYWsgdGhlIHRzLWplc3QgdHlwZSBjaGVja3NcbiAgICAgICAge1xuICAgICAgICAgIGV4Y2x1ZGVCdW5GbGFnOiB0cnVlLFxuICAgICAgICB9XG4gICAgICApO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS53YXJuKFxuICAgICAgXCJUZXN0cyBmYWlsZWQuIFBsZWFzZSBsb29rIGF0IGxvZ3MgdG8gc2VlIHRoZSBlcnJvcnMgZGlzY292ZXJlZFwiXG4gICAgKTtcbiAgfVxuXG4gIGNvbnNvbGUud2FybihjaGFsay5jeWFuQnJpZ2h0KFwiVGVzdHMgY29tcGxldGVcIikpO1xufVxuIiwKICAgICJpbXBvcnQgeyBydW5UZXN0cyB9IGZyb20gXCIuLi8uLi9saWIvdW5pdC10ZXN0L3J1bi10ZXN0cy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBydW4oKSB7XG4gIGNvbnNvbGUud2FybihcIlJ1bm5pbmcgdW5pdCB0ZXN0cy4uLlwiKTtcbiAgLy8gRXhlY3V0ZSB0aGUgdGVzdHNcbiAgYXdhaXQgcnVuVGVzdHMoKTtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBybXJmIGZyb20gXCJyaW1yYWZcIjtcbmltcG9ydCB7IGV4ZWNTeW5jIH0gZnJvbSBcIi4uLy4uL2xpYi9leGVjL2V4ZWMtc3luYy5qc1wiO1xuXG4vKipcbiAqIFRoaXMgc2NyaXB0IGNsZWFucyBvdXQgc3Rvcnlib29rIGNhY2hpbmcgdGhhdCBjYXVzZXMgdXBkYXRlcyB0byBiZSBoaWRkZW5cbiAqIHdoZW4gZWRpdGluZyBzdG9yeWJvb2sgY29uZmlndXJhdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gcnVuKCkge1xuICBjb25zdCBjYWNoZSA9IHBhdGgucmVzb2x2ZShcIi4vbm9kZV9tb2R1bGVzLy5jYWNoZS9cIik7XG4gIGNvbnN0IGJ1aWxkID0gcGF0aC5yZXNvbHZlKFwiLi9idWlsZFwiKTtcblxuICBpZiAoZnMuZXhpc3RzU3luYyhjYWNoZSkpIHtcbiAgICBybXJmLnN5bmMoY2FjaGUpO1xuICAgIGNvbnNvbGUud2FybihcIkNhY2hlOiBDbGVhbiBjb21wbGV0ZVwiKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zb2xlLndhcm4oXCJDYWNoZTogQWxyZWFkeSBjbGVhblwiKTtcbiAgfVxuXG4gIGlmIChmcy5leGlzdHNTeW5jKGJ1aWxkKSkge1xuICAgIHJtcmYuc3luYyhidWlsZCk7XG4gICAgY29uc29sZS53YXJuKFwiQnVpbGQ6IENsZWFuIGNvbXBsZXRlXCIpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybihcIkJ1aWxkOiBBbHJlYWR5IGNsZWFuXCIpO1xuICB9XG5cbiAgaWYgKGF3YWl0IGV4ZWNTeW5jKFwiYnVuXCIsIFtcInBtXCIsIFwiY2FjaGVcIiwgXCJybVwiXSkpIHtcbiAgICBjb25zb2xlLndhcm4oXCJCdW46IENsZWFuIGNvbXBsZXRlXCIpO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybihcIkJ1bjogQWxyZWFkeSBjbGVhblwiKTtcbiAgfVxufVxuIiwKICAgICJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY3JlYXRlUmVxdWlyZSB9IGZyb20gXCJtb2R1bGVcIjtcblxuLyoqXG4gKiBHZXQgdGhlIHBhdGggdG8gdGhlIG5vZGVfbW9kdWxlcy8uY2FjaGUgZm9sZGVyIGZvciBhIGdpdmVuIHBhY2thZ2UuXG4gKlxuICogQHBhcmFtIHBhY2thZ2VOYW1lIFJlcXVpcmVkIG5hbWUgb2YgdGhlIG5wbSBwYWNrYWdlIHRvIGlkZW50aWZ5XG4gKiBAcGFyYW0gZm9sZGVyIFJlcXVpcmVkIG5hbWUgb2YgdGhlIGZvbGRlciB0byBwbGFjZSBpbnNpZGUgdGhlIG5vZGVfbW9kdWxlcy8uY2FjaGUgZm9sZGVyXG4gKiBAcmV0dXJucyBGdWxsIHBhdGggdG8gdGhlIGNhY2hlIGZvbGRlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGFja2FnZUNhY2hlUGF0aChcbiAgcGFja2FnZU5hbWU6IHN0cmluZyxcbiAgZm9sZGVyOiBzdHJpbmdcbik6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHJlcXVpcmUgPSBjcmVhdGVSZXF1aXJlKGltcG9ydC5tZXRhLnVybCk7XG4gIGNvbnN0IG1vZHVsZVBhdGggPSByZXF1aXJlLnJlc29sdmUocGFja2FnZU5hbWUpO1xuXG4gIC8vIEdldCBwdXBwZXRlZXIncyBub2RlX21vZHVsZSBwYXRoXG4gIGNvbnN0IHBhcnRzID0gbW9kdWxlUGF0aC5zcGxpdChcIm5vZGVfbW9kdWxlc1wiKTtcbiAgY29uc3QgbW9kdWxlUm9vdCA9IHBhcnRzWzBdO1xuICBjb25zdCBtb2R1bGVEaXIgPSBwYXJ0c1sxXS5zcGxpdChwYXRoLnNlcClbMV07XG5cbiAgLy8gQ3JlYXRlIGEgcGF0aCB0byB0aGUgZGVzaXJlZCBjYWNoZSBsb2NhdGlvblxuICBjb25zdCBtb2R1bGVDYWNoZVBhdGggPSBwYXRoLmpvaW4oXG4gICAgbW9kdWxlUm9vdCxcbiAgICBcIm5vZGVfbW9kdWxlc1wiLFxuICAgIG1vZHVsZURpcixcbiAgICBcIm5vZGVfbW9kdWxlc1wiLFxuICAgIFwiLmNhY2hlXCIsXG4gICAgZm9sZGVyXG4gICk7XG5cbiAgcmV0dXJuIG1vZHVsZUNhY2hlUGF0aDtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCB1cmwgZnJvbSBcInVybFwiO1xuaW1wb3J0IHsgZ2V0UGFja2FnZUNhY2hlUGF0aCB9IGZyb20gXCIuLi8uLi9saWIvdXRpbC9wYWNrYWdlLWNhY2hlLXBhdGguanNcIjtcbmltcG9ydCB7IGdpdEhhc0NoYW5nZXMgfSBmcm9tIFwiLi4vLi4vbGliL2dpdC9naXQtaGFzLWNoYW5nZXMuanNcIjtcblxuY29uc3QgX19kaXJuYW1lID0gdXJsLmZpbGVVUkxUb1BhdGgobmV3IFVSTChcIi5cIiwgaW1wb3J0Lm1ldGEudXJsKSk7XG5cbi8qKlxuICogVG8gb3BlbiB1cCBnaXRsYWIgbWVyZ2UgcmVxdWVzdCwgd2UgbmVlZCB0byBmZXRjaCB0aGUgcHJvamVjdCBJRC4gVGhlIHByb2plY3RcbiAqIElEIGlzIGF2YWlsYWJsZSBvbiB0aGUgYm9keSBvZiB0aGUgcGFnZSBsb2FkZWQgZm9yIHRoZSByZXBvLlxuICovXG5hc3luYyBmdW5jdGlvbiBvcGVuR2l0bGFiUFIoXG4gIHJlcG9Vcmw6IHN0cmluZyxcbiAgcmVsZWFzZVZlcnNpb246IHN0cmluZyxcbiAgbWFzdGVyQnJhbmNoOiBzdHJpbmdcbikge1xuICBjb25zdCBwdXBwZXRlZXIgPSBhd2FpdCBpbXBvcnQoXCJwdXBwZXRlZXJcIik7XG4gIGNvbnN0IGNhY2hlUGF0aCA9IGF3YWl0IGdldFBhY2thZ2VDYWNoZVBhdGgoXCJwdXBwZXRlZXJcIiwgXCJwci1yZWxlYXNlXCIpO1xuICBjb25zdCBicm93c2VyID0gYXdhaXQgcHVwcGV0ZWVyLmxhdW5jaCh7XG4gICAgLy8gSWYgc2hvd0xvZ0luLCB0aGVuIHdlIG11c3QgcHJlc2VudCB0aGUgYnJvd3NlciBzbyB0aGUgdXNlciBjYW4gZW50ZXJcbiAgICAvLyB0aGVpciBjcmVkZW50aWFscy5cbiAgICBoZWFkbGVzczogZmFsc2UsXG4gICAgdXNlckRhdGFEaXI6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIGNhY2hlUGF0aCksXG4gICAgZGVmYXVsdFZpZXdwb3J0OiBudWxsLFxuICB9KTtcblxuICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG4gIGNvbnNvbGUud2FybihcIk9wZW5pbmcgcHJvamVjdCB1cmwuLi5cIik7XG4gIGF3YWl0IHBhZ2UuZ290byhyZXBvVXJsKTtcblxuICAvLyBUaGUgcHJvamVjdCBJRCBpcyBsb2NhdGVkIG9uIHRoZSBib2R5IHdpdGhpbiBhdHRyaWJ1dGVcbiAgLy8gZGF0YS1wcm9qZWN0LWlkPVwiNzIyXCJcbiAgY29uc3QgcHJvamVjdElkID0gYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PlxuICAgIGRvY3VtZW50LmJvZHkuZ2V0QXR0cmlidXRlKFwiZGF0YS1wcm9qZWN0LWlkXCIpXG4gICk7XG5cbiAgaWYgKCFwcm9qZWN0SWQpIHtcbiAgICBjb25zb2xlLndhcm4oXCJObyBwcm9qZWN0IGlkIGZvdW5kLCBVc2VyIGxvZ2luIHJlcXVpcmVkLi4uXCIpO1xuICAgIGxldCBzaG91bGRFeGl0ID0gdHJ1ZTtcblxuICAgIGJyb3dzZXIub24oXCJkaXNjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgICAgaWYgKCFzaG91bGRFeGl0KSByZXR1cm47XG4gICAgICBjb25zb2xlLndhcm4oXCJCcm93c2VyIHdhcyBjbG9zZWQgb3IgY3Jhc2hlZC4gVHJ5IHRoZSBjb21tYW5kIGFnYWluLlwiKTtcbiAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICB9KTtcblxuICAgIGF3YWl0IHBhZ2UuZ290byhyZXBvVXJsKTtcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JGdW5jdGlvbihcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdElkID0gZG9jdW1lbnQ/LmJvZHk/LmdldEF0dHJpYnV0ZShcImRhdGEtcHJvamVjdC1pZFwiKTtcbiAgICAgICAgcmV0dXJuIHByb2plY3RJZCAhPT0gbnVsbCAmJiBwcm9qZWN0SWQgIT09IHZvaWQgMDtcbiAgICAgIH0sXG4gICAgICB7IHRpbWVvdXQ6IDAgfVxuICAgICk7XG5cbiAgICBhd2FpdCBwYWdlLmNsb3NlKCk7XG4gICAgc2hvdWxkRXhpdCA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGF3YWl0IHBhZ2UuY2xvc2UoKTtcbiAgfVxuXG4gIGNvbnNvbGUud2FybihcIlByb2plY3QgSUQgZm91bmQ6XCIsIHByb2plY3RJZCwgXCJcXG5PcGVuaW5nIG1lcmdlIHJlcXVlc3QuLi5cIik7XG5cbiAgY29uc3QgbWFrZVBSID0gYXN5bmMgKFxuICAgIHNvdXJjZTogc3RyaW5nLFxuICAgIHRhcmdldDogc3RyaW5nLFxuICAgIGluY2x1ZGVVdGY/OiBib29sZWFuXG4gICkgPT4ge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCBicm93c2VyLm5ld1BhZ2UoKTtcblxuICAgIC8vIFVzZSB0aGUgcHJvcGVyIFVSTCBzdHJ1Y3R1cmUgdG8gZ2VuZXJhdGUgdGhlIHBhZ2Ugd2l0aCB0aGUgY29ycmVjdCBtZXJnZSByZXF1ZXN0XG4gICAgYXdhaXQgcGFnZS5nb3RvKFxuICAgICAgYCR7cmVwb1VybH0vLS9tZXJnZV9yZXF1ZXN0cy9uZXc/JHtcbiAgICAgICAgaW5jbHVkZVV0ZiA/IFwidXRmOD0lRTIlOUMlOTMmXCIgOiBcIlwiXG4gICAgICB9bWVyZ2VfcmVxdWVzdCU1QnNvdXJjZV9wcm9qZWN0X2lkJTVEPSR7cHJvamVjdElkfSZtZXJnZV9yZXF1ZXN0JTVCc291cmNlX2JyYW5jaCU1RD0ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgc291cmNlXG4gICAgICApfSZtZXJnZV9yZXF1ZXN0JTVCdGFyZ2V0X3Byb2plY3RfaWQlNUQ9JHtwcm9qZWN0SWR9Jm1lcmdlX3JlcXVlc3QlNUJ0YXJnZXRfYnJhbmNoJTVEPSR7dGFyZ2V0fWBcbiAgICApO1xuXG4gICAgLy8gV2FpdCBmb3IgdGhlIGVsZW1lbnRzIHRvIGJlIGF2YWlsYWJsZSB0byBtYW5pcHVsYXRlXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yRnVuY3Rpb24oXG4gICAgICAoKSA9PiB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21lcmdlX3JlcXVlc3RfdGl0bGVcIik7XG4gICAgICAgIHJldHVybiBub2RlICE9PSBudWxsICYmIG5vZGUgIT09IHZvaWQgMDtcbiAgICAgIH0sXG4gICAgICB7IHRpbWVvdXQ6IDAgfVxuICAgICk7XG5cbiAgICAvLyBQb3B1bGF0ZSB0aGUgZWxlbWVudHMgd2l0aCBleHBlY3RlZCBjb25maWd1cmF0aW9uXG4gICAgYXdhaXQgcGFnZS5ldmFsdWF0ZSgocmVsZWFzZVZlcnNpb24pID0+IHtcbiAgICAgIC8vIFBvcHVsYXRlIHRoZSB0aXRsZVxuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICAgICBcIiNtZXJnZV9yZXF1ZXN0X3RpdGxlXCJcbiAgICAgICk7XG4gICAgICBpZiAobm9kZSkgbm9kZS52YWx1ZSA9IGBSZWxlYXNlICR7cmVsZWFzZVZlcnNpb259YDtcblxuICAgICAgLy8gUG9wdWxhdGUgZGVzY3JpcHRpb25cbiAgICAgIG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICAgICBcIiNtZXJnZV9yZXF1ZXN0X2Rlc2NyaXB0aW9uXCJcbiAgICAgICk7XG4gICAgICBpZiAobm9kZSkgbm9kZS52YWx1ZSA9IGBSZWxlYXNlICR7cmVsZWFzZVZlcnNpb259YDtcblxuICAgICAgLy8gVW5jaGVjayBkZWxldGUgYnJhbmNoXG4gICAgICBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAgICAgXCIjbWVyZ2VfcmVxdWVzdF9mb3JjZV9yZW1vdmVfc291cmNlX2JyYW5jaFwiXG4gICAgICApO1xuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgbm9kZS5jaGVja2VkID0gZmFsc2U7XG4gICAgICAgIG5vZGUudmFsdWUgPSBcIjBcIjtcbiAgICAgIH1cbiAgICB9LCByZWxlYXNlVmVyc2lvbik7XG5cbiAgICAvLyBXYWl0IGZvciB0aGUgcGFnZSB0byBjbG9zZVxuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyKSA9PiB7XG4gICAgICBwYWdlLm9uKFwiY2xvc2VcIiwgKCkgPT4ge1xuICAgICAgICByKHZvaWQgMCk7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkdpdGxhYiB0aWNrZXQgcHJvY2VzcyBmaW5pc2hlZFxcblxcblwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFdhaXQgZm9yIGJvdGggUFJzIHRvIGNvbWUgdG8gY29tcGxldGlvblxuICBjb25zb2xlLndhcm4oXCJcXG5cXG5XYWl0aW5nIGZvciBicm93c2VyIHdpbmRvd3MgdG8gYmUgY2xvc2VkLi4uXFxuXFxuXCIpO1xuICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgbWFrZVBSKFwicmVsZWFzZVwiLCBcImRldlwiKSxcbiAgICBtYWtlUFIoXCJyZWxlYXNlXCIsIG1hc3RlckJyYW5jaCksXG4gIF0pO1xuXG4gIC8vIENsb3NlIGFmdGVyIGFsbCBwYWdlcyBjbG9zZWRcbiAgYnJvd3Nlci5jbG9zZSgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBvcGVuR2l0UFIoXG4gIHJlcG9Vcmw6IHN0cmluZyxcbiAgcmVsZWFzZVZlcnNpb246IHN0cmluZyxcbiAgbWFzdGVyQnJhbmNoOiBzdHJpbmcsXG4gIHNob3dMb2dJbj86IGJvb2xlYW5cbikge1xuICBjb25zdCBwdXBwZXRlZXIgPSBhd2FpdCBpbXBvcnQoXCJwdXBwZXRlZXJcIik7XG4gIGNvbnN0IGNhY2hlUGF0aCA9IGF3YWl0IGdldFBhY2thZ2VDYWNoZVBhdGgoXCJwdXBwZXRlZXJcIiwgXCJwci1yZWxlYXNlXCIpO1xuICBsZXQgYnJvd3NlciA9IGF3YWl0IHB1cHBldGVlci5sYXVuY2goe1xuICAgIC8vIElmIHNob3dMb2dJbiwgdGhlbiB3ZSBtdXN0IHByZXNlbnQgdGhlIGJyb3dzZXIgc28gdGhlIHVzZXIgY2FuIGVudGVyXG4gICAgLy8gdGhlaXIgY3JlZGVudGlhbHMuXG4gICAgaGVhZGxlc3M6ICFzaG93TG9nSW4sXG4gICAgdXNlckRhdGFEaXI6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIGNhY2hlUGF0aCksXG4gICAgZGVmYXVsdFZpZXdwb3J0OiBudWxsLFxuICB9KTtcblxuICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG5cbiAgaWYgKHNob3dMb2dJbikge1xuICAgIGNvbnNvbGUud2FybihcIlVzZXIgbG9naW4gcmVxdWlyZWQuLi5cIik7XG4gICAgbGV0IHNob3VsZEV4aXQgPSB0cnVlO1xuXG4gICAgYnJvd3Nlci5vbihcImRpc2Nvbm5lY3RlZFwiLCAoKSA9PiB7XG4gICAgICBpZiAoIXNob3VsZEV4aXQpIHJldHVybjtcbiAgICAgIGNvbnNvbGUud2FybihcIkJyb3dzZXIgd2FzIGNsb3NlZCBvciBjcmFzaGVkLiBUcnkgdGhlIGNvbW1hbmQgYWdhaW4uXCIpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgbG9naW5VcmwgPSBcImh0dHBzOi8vZ2l0aHViLmNvbS9sb2dpblwiO1xuICAgIGNvbnNvbGUud2FybihcIk9wZW5pbmcgZ2l0aHViIGxvZ2luIHBhZ2U6IFwiLCBsb2dpblVybCk7XG4gICAgYXdhaXQgcGFnZS5nb3RvKGxvZ2luVXJsKTtcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JGdW5jdGlvbihcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdElkID0gZG9jdW1lbnQ/LmJvZHlcbiAgICAgICAgICA/LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpXG4gICAgICAgICAgPy5zcGxpdChcIiBcIilcbiAgICAgICAgICAuZmluZCgoYykgPT4gYy5zdGFydHNXaXRoKFwibG9nZ2VkLWluXCIpKTtcbiAgICAgICAgcmV0dXJuIHByb2plY3RJZCAhPT0gbnVsbCAmJiBwcm9qZWN0SWQgIT09IHZvaWQgMDtcbiAgICAgIH0sXG4gICAgICB7IHRpbWVvdXQ6IDAgfVxuICAgICk7XG5cbiAgICBzaG91bGRFeGl0ID0gZmFsc2U7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKFwiT3BlbmluZyBwcm9qZWN0IHVybDogXCIsIHJlcG9VcmwpO1xuICAgIGF3YWl0IHBhZ2UuZ290byhyZXBvVXJsKTtcbiAgfVxuXG4gIC8vIFRoZSBwcm9qZWN0IElEIGlzIGxvY2F0ZWQgb24gdGhlIGJvZHkgd2l0aGluIGF0dHJpYnV0ZVxuICAvLyBkYXRhLXByb2plY3QtaWQ9XCI3MjJcIlxuICBjb25zb2xlLndhcm4oXCJDaGVja2luZyBmb3IgbG9nZ2VkLWluIGF0dHJpYnV0ZSBvbiBib2R5Li4uXCIpO1xuICBjb25zdCBsb2dnZWRJbiA9IGF3YWl0IHBhZ2UuZXZhbHVhdGUoKCkgPT4ge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwibG9nZ2VkLWluIGNoZWNrOlwiLFxuICAgICAgZG9jdW1lbnQ/LmJvZHlcbiAgICAgICAgPy5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKVxuICAgICAgICA/LnNwbGl0KFwiIFwiKVxuICAgICAgICAuZmluZCgoYykgPT4gYy5zdGFydHNXaXRoKFwibG9nZ2VkLWluXCIpKVxuICAgICk7XG4gICAgcmV0dXJuIGRvY3VtZW50Py5ib2R5XG4gICAgICA/LmdldEF0dHJpYnV0ZShcImNsYXNzXCIpXG4gICAgICA/LnNwbGl0KFwiIFwiKVxuICAgICAgLmZpbmQoKGMpID0+IGMuc3RhcnRzV2l0aChcImxvZ2dlZC1pblwiKSk7XG4gIH0pO1xuXG4gIGNvbnNvbGUud2FybihcIkxvZ2dpbiBpbiBjaGVjazpcIiwgbG9nZ2VkSW4pO1xuXG4gIC8vIElGIHdlIGF0dGVtcHRlZCBhIGxvZ2luIEFORCB0aGVyZSBpcyBubyBwcm9qZWN0IElEIGF2YWlsYWJsZSwgdGhlbiB3ZSBhcmVcbiAgLy8gdW5hYmxlIHRvIGRldGVybWluZSB0aGUgcHJvamVjdCBJRC5cbiAgaWYgKCFsb2dnZWRJbiAmJiBzaG93TG9nSW4pIHtcbiAgICBhd2FpdCBicm93c2VyLmNsb3NlKCk7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBsb2cgaW4gdGhlIHVzZXIgZm9yIGdpdGh1Yi5cIik7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gSWYgd2UgY291bGQgbm90IGdldCBhIHByb2plY3QgSUQsIHByZXNlbnQgYSBub24taGVhZGxlc3MgYnJvd3NlciB0byBhbGxvd1xuICAvLyB0aGUgdXNlciB0byBsb2dpbi5cbiAgZWxzZSBpZiAoIWxvZ2dlZEluKSB7XG4gICAgY29uc29sZS53YXJuKFwiTG9nZ2VkLWluIG5vdCBmb3VuZCBvbiBib2R5LCBsb2dpbiBtaWdodCBiZSBuZWVkZWQuLi5cIik7XG4gICAgYXdhaXQgYnJvd3Nlci5jbG9zZSgpO1xuICAgIG9wZW5HaXRQUihyZXBvVXJsLCByZWxlYXNlVmVyc2lvbiwgbWFzdGVyQnJhbmNoLCB0cnVlKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBMb2cgaW4gdmFsaWRhdGVkLCBjbG9zZSB0aGUgbG9nIGluIGJyb3dzZXIgYXMgaXQgbWF5IGJlIGluIGhlYWRsZXNzIG1vZGVcbiAgZWxzZSB7XG4gICAgYnJvd3Nlci5jbG9zZSgpO1xuICB9XG5cbiAgY29uc3QgcHVwcGV0ZWVyRGF0YSA9IHtcbiAgICBoZWFkbGVzczogZmFsc2UsXG4gICAgdXNlckRhdGFEaXI6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIGNhY2hlUGF0aCksXG4gICAgZGVmYXVsdFZpZXdwb3J0OiBudWxsLFxuICB9O1xuXG4gIC8vIFJlb3BlbiB0aGUgYnJvd3NlciBidXQgZW5zdXJlIHdlJ3JlIG5vdCBoZWFkbGVzcyBhbnltb3JlXG4gIGJyb3dzZXIgPSBhd2FpdCBwdXBwZXRlZXIubGF1bmNoKHB1cHBldGVlckRhdGEpO1xuXG4gIGNvbnN0IG1ha2VQUiA9IGFzeW5jIChzb3VyY2U6IHN0cmluZywgdGFyZ2V0OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vRGluaWRlbi9zaW1wbGUtZGF0YS1wcm92aWRlci9jb21wYXJlL21hc3Rlci4uLnJlbGVhc2VcbiAgICAvLyBVc2UgdGhlIHByb3BlciBVUkwgc3RydWN0dXJlIHRvIGdlbmVyYXRlIHRoZSBwYWdlIHdpdGggdGhlIGNvcnJlY3QgbWVyZ2UgcmVxdWVzdFxuICAgIGF3YWl0IHBhZ2UuZ290byhgJHtyZXBvVXJsfS9jb21wYXJlLyR7dGFyZ2V0fS4uLiR7c291cmNlfWApO1xuXG4gICAgLy8gV2FpdCBmb3IgdGhlIGVsZW1lbnRzIHRvIGJlIGF2YWlsYWJsZSB0byBtYW5pcHVsYXRlXG4gICAgYXdhaXQgcGFnZS53YWl0Rm9yRnVuY3Rpb24oKCkgPT4ge1xuICAgICAgY29uc3Qgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEJ1dHRvbkVsZW1lbnQ+KFxuICAgICAgICBcIiNyZXBvLWNvbnRlbnQtcGpheC1jb250YWluZXIgPiBkaXYgPiBkaXYuanMtZGV0YWlscy1jb250YWluZXIuRGV0YWlscy5qcy1jb21wYXJlLXByID4gZGl2ID4gYnV0dG9uXCJcbiAgICAgICk7XG4gICAgICBub2RlPy5jbGljaygpO1xuICAgICAgcmV0dXJuIG5vZGUgIT09IG51bGwgJiYgbm9kZSAhPT0gdm9pZCAwO1xuICAgIH0pO1xuXG4gICAgLy8gQ2xpY2sgdGhlIGNyZWF0ZSBQUiBidXR0b24gdG8gb3BlbiBuZXh0IGRpYWxvZ1xuICAgIC8vIGF3YWl0IHBhZ2UuZXZhbHVhdGUoYXN5bmMgKCkgPT4ge1xuICAgIC8vICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JlcG8tY29udGVudC1wamF4LWNvbnRhaW5lciA+IGRpdiA+IGRpdi5qcy1kZXRhaWxzLWNvbnRhaW5lci5EZXRhaWxzLmpzLWNvbXBhcmUtcHIgPiBkaXYgPiBidXR0b24nKS5jbGljaygpO1xuICAgIC8vIH0pO1xuXG4gICAgLy8gUG9wdWxhdGUgdGhlIGVsZW1lbnRzIHdpdGggZXhwZWN0ZWQgY29uZmlndXJhdGlvblxuICAgIGF3YWl0IHBhZ2UuZXZhbHVhdGUoYXN5bmMgKHJlbGVhc2VWZXJzaW9uKSA9PiB7XG4gICAgICBsZXQgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXG4gICAgICAgIFwiI3B1bGxfcmVxdWVzdF90aXRsZVwiXG4gICAgICApO1xuICAgICAgaWYgKG5vZGUpIG5vZGUudmFsdWUgPSBgUmVsZWFzZSAke3JlbGVhc2VWZXJzaW9ufWA7XG4gICAgICBub2RlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcbiAgICAgICAgJ1tuYW1lPVwicHVsbF9yZXF1ZXN0W2JvZHldXCJdJ1xuICAgICAgKTtcbiAgICAgIGlmIChub2RlKSBub2RlLnZhbHVlID0gYFJlbGVhc2UgJHtyZWxlYXNlVmVyc2lvbn1gO1xuICAgIH0sIHJlbGVhc2VWZXJzaW9uKTtcblxuICAgIC8vIFdhaXQgZm9yIHRoZSBwYWdlIHRvIGNsb3NlXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHtcbiAgICAgIHBhZ2Uub24oXCJjbG9zZVwiLCAoKSA9PiB7XG4gICAgICAgIHIodm9pZCAwKTtcbiAgICAgICAgY29uc29sZS53YXJuKFwiR2l0aHViIHRpY2tldCBwcm9jZXNzIGZpbmlzaGVkXFxuXFxuXCIpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gV2FpdCBmb3IgYm90aCBQUnMgdG8gY29tZSB0byBjb21wbGV0aW9uXG4gIGNvbnNvbGUud2FybihcIlxcblxcbldhaXRpbmcgZm9yIGJyb3dzZXIgd2luZG93cyB0byBiZSBjbG9zZWQuLi5cXG5cXG5cIik7XG4gIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICBtYWtlUFIoXCJyZWxlYXNlXCIsIFwiZGV2XCIpLFxuICAgIG1ha2VQUihcInJlbGVhc2VcIiwgbWFzdGVyQnJhbmNoKSxcbiAgXSk7XG5cbiAgLy8gQ2xvc2UgYWZ0ZXIgYWxsIHBhZ2VzIGNsb3NlZFxuICBicm93c2VyLmNsb3NlKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIG9wZW5BenVyZVBSKFxuICByZXBvVXJsOiBzdHJpbmcsXG4gIHJlbGVhc2VWZXJzaW9uOiBzdHJpbmcsXG4gIG1hc3RlckJyYW5jaDogc3RyaW5nLFxuICBzaG93TG9nSW4/OiBib29sZWFuXG4pIHtcbiAgY29uc3QgcHVwcGV0ZWVyID0gYXdhaXQgaW1wb3J0KFwicHVwcGV0ZWVyXCIpO1xuICAvLyBFeGFtcGxlIFVSTFxuICAvLyBodHRwczovL2Rldi5henVyZS5jb20vcmV0aXJlb25lL19naXQvUmV0aXJlT25lJTIwUklQUC9wdWxscmVxdWVzdGNyZWF0ZT9zb3VyY2VSZXBvc2l0b3J5SWQ9NDA1MDc0YmItYjFiMS00ZmVhLTgzNTItYmQ0ZDc4ODhiMWFkJnRhcmdldFJlcG9zaXRvcnlJZD00MDUwNzRiYi1iMWIxLTRmZWEtODM1Mi1iZDRkNzg4OGIxYWQmc291cmNlUmVmPXJlbGVhc2UmdGFyZ2V0UmVmPW1haW5cbiAgY29uc3QgY2FjaGVQYXRoID0gYXdhaXQgZ2V0UGFja2FnZUNhY2hlUGF0aChcInB1cHBldGVlclwiLCBcInByLXJlbGVhc2VcIik7XG4gIGxldCBicm93c2VyID0gYXdhaXQgcHVwcGV0ZWVyLmxhdW5jaCh7XG4gICAgLy8gSWYgc2hvd0xvZ0luLCB0aGVuIHdlIG11c3QgcHJlc2VudCB0aGUgYnJvd3NlciBzbyB0aGUgdXNlciBjYW4gZW50ZXJcbiAgICAvLyB0aGVpciBjcmVkZW50aWFscy5cbiAgICBoZWFkbGVzczogIXNob3dMb2dJbixcbiAgICB1c2VyRGF0YURpcjogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgY2FjaGVQYXRoKSxcbiAgICBkZWZhdWx0Vmlld3BvcnQ6IG51bGwsXG4gIH0pO1xuXG4gIGNvbnN0IHBhZ2UgPSBhd2FpdCBicm93c2VyLm5ld1BhZ2UoKTtcblxuICBpZiAoc2hvd0xvZ0luKSB7XG4gICAgY29uc29sZS53YXJuKFwiVXNlciBsb2dpbiByZXF1aXJlZC4uLlwiKTtcbiAgICBsZXQgc2hvdWxkRXhpdCA9IHRydWU7XG5cbiAgICBicm93c2VyLm9uKFwiZGlzY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICAgIGlmICghc2hvdWxkRXhpdCkgcmV0dXJuO1xuICAgICAgY29uc29sZS53YXJuKFwiQnJvd3NlciB3YXMgY2xvc2VkIG9yIGNyYXNoZWQuIFRyeSB0aGUgY29tbWFuZCBhZ2Fpbi5cIik7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBsb2dpblVybCA9IHJlcG9Vcmw7XG4gICAgY29uc29sZS53YXJuKFwiT3BlbmluZyBhenVyZSByZXBvIGxvZ2luIHBhZ2U6IFwiLCBsb2dpblVybCk7XG4gICAgYXdhaXQgcGFnZS5nb3RvKGxvZ2luVXJsKTtcbiAgICBhd2FpdCBwYWdlLndhaXRGb3JGdW5jdGlvbihcbiAgICAgICgpID0+IHtcbiAgICAgICAgY29uc3QgbXNJZCA9IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5tc2FtZWlkO1xuICAgICAgICByZXR1cm4gbXNJZCAhPT0gbnVsbCAmJiBtc0lkICE9PSB2b2lkIDA7XG4gICAgICB9LFxuICAgICAgeyB0aW1lb3V0OiAwIH1cbiAgICApO1xuXG4gICAgc2hvdWxkRXhpdCA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUud2FybihcIk9wZW5pbmcgcHJvamVjdCB1cmw6IFwiLCByZXBvVXJsKTtcbiAgICBhd2FpdCBwYWdlLmdvdG8ocmVwb1VybCk7XG4gIH1cblxuICAvLyBUaGUgbXNpZCBpcyBsb2NhdGVkIGluIHNlc3Npb25TdG9yYWdlIGF0IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5tc2FtZWlkXG4gIGNvbnNvbGUud2FybihcIkNoZWNraW5nIGZvciBsb2dnZWQtaW4gYXR0cmlidXRlIG9uIGJvZHkuLi5cIik7XG4gIGNvbnN0IGxvZ2dlZEluID0gYXdhaXQgcGFnZS5ldmFsdWF0ZSgoKSA9PiB7XG4gICAgY29uc29sZS53YXJuKFwibG9nZ2VkLWluIGNoZWNrOlwiLCB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UubXNhbWVpZCk7XG4gICAgcmV0dXJuIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5tc2FtZWlkO1xuICB9KTtcblxuICBjb25zb2xlLndhcm4oXCJMb2dnaW4gaW4gY2hlY2s6XCIsIGxvZ2dlZEluKTtcblxuICAvLyBJRiB3ZSBhdHRlbXB0ZWQgYSBsb2dpbiBBTkQgdGhlcmUgaXMgbm8gbXMgaWQgYXZhaWxhYmxlLCB0aGVuIHdlIGFyZVxuICAvLyB1bmFibGUgdG8gZGV0ZXJtaW5lIHRoZSBtcyBpZC5cbiAgaWYgKCFsb2dnZWRJbiAmJiBzaG93TG9nSW4pIHtcbiAgICBhd2FpdCBicm93c2VyLmNsb3NlKCk7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBsb2cgaW4gdGhlIHVzZXIgZm9yIGF6dXJlLlwiKTtcbiAgICBwcm9jZXNzLmV4aXQoMSk7XG4gIH1cblxuICAvLyBJZiB3ZSBjb3VsZCBub3QgZ2V0IGEgbXNpZCwgcHJlc2VudCBhIG5vbi1oZWFkbGVzcyBicm93c2VyIHRvIGFsbG93XG4gIC8vIHRoZSB1c2VyIHRvIGxvZ2luLlxuICBlbHNlIGlmICghbG9nZ2VkSW4pIHtcbiAgICBjb25zb2xlLndhcm4oXCJNUyBpZCBub3QgZm91bmQsIGxvZ2luIG1pZ2h0IGJlIG5lZWRlZC4uLlwiKTtcbiAgICBhd2FpdCBicm93c2VyLmNsb3NlKCk7XG4gICAgb3BlbkdpdFBSKHJlcG9VcmwsIHJlbGVhc2VWZXJzaW9uLCBtYXN0ZXJCcmFuY2gsIHRydWUpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIExvZyBpbiB2YWxpZGF0ZWQsIGNsb3NlIHRoZSBsb2cgaW4gYnJvd3NlciBhcyBpdCBtYXkgYmUgaW4gaGVhZGxlc3MgbW9kZVxuICBlbHNlIHtcbiAgICBicm93c2VyLmNsb3NlKCk7XG4gIH1cblxuICAvLyBSZW9wZW4gdGhlIGJyb3dzZXIgYnV0IGVuc3VyZSB3ZSdyZSBub3QgaGVhZGxlc3MgYW55bW9yZVxuICBjb25zdCBwdXBwZXRlZXJEYXRhID0ge1xuICAgIGhlYWRsZXNzOiBmYWxzZSxcbiAgICB1c2VyRGF0YURpcjogcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgY2FjaGVQYXRoKSxcbiAgICBkZWZhdWx0Vmlld3BvcnQ6IG51bGwsXG4gIH07XG5cbiAgYnJvd3NlciA9IGF3YWl0IHB1cHBldGVlci5sYXVuY2gocHVwcGV0ZWVyRGF0YSk7XG5cbiAgLy8gTWFrZSBhIGNvbW1vbiBtZXRob2QgZm9yIGxhdW5jaGluZyBhIFBSXG4gIGNvbnN0IG1ha2VQUiA9IGFzeW5jIChzb3VyY2U6IHN0cmluZywgdGFyZ2V0OiBzdHJpbmcpID0+IHtcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgYnJvd3Nlci5uZXdQYWdlKCk7XG5cbiAgICAvLyBVc2UgdGhlIHByb3BlciBVUkwgc3RydWN0dXJlIHRvIGdlbmVyYXRlIHRoZSBwYWdlIHdpdGggdGhlIGNvcnJlY3QgbWVyZ2UgcmVxdWVzdFxuICAgIGF3YWl0IHBhZ2UuZ290byhgJHtyZXBvVXJsfSZzb3VyY2VSZWY9JHtzb3VyY2V9JnRhcmdldFJlZj0ke3RhcmdldH1gKTtcblxuICAgIC8vIFdhaXQgZm9yIHRoZSBlbGVtZW50cyB0byBiZSBhdmFpbGFibGUgdG8gbWFuaXB1bGF0ZVxuICAgIGF3YWl0IHBhZ2Uud2FpdEZvckZ1bmN0aW9uKCgpID0+IHtcbiAgICAgIGNvbnN0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxCdXR0b25FbGVtZW50PihcImJ1dHRvbi5wcmltYXJ5XCIpO1xuICAgICAgcmV0dXJuIG5vZGUgIT09IG51bGwgJiYgbm9kZSAhPT0gdm9pZCAwO1xuICAgIH0pO1xuXG4gICAgLy8gUG9wdWxhdGUgdGhlIGVsZW1lbnRzIHdpdGggZXhwZWN0ZWQgY29uZmlndXJhdGlvblxuICAgIGF3YWl0IHBhZ2UuZXZhbHVhdGUoYXN5bmMgKHJlbGVhc2VWZXJzaW9uKSA9PiB7XG4gICAgICAvLyBHZXQgdGhlIG5vZGUgd2l0aCB0YWIgaW5kZXggMCAodGhlIGlkIG9uIHRoZSBwYWdlIGNoYW5nZXMgZWFjaCB0aW1lKVxuICAgICAgbGV0IG5vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxuICAgICAgICAnW2FyaWEtbGFiZWw9XCJFbnRlciBhIHRpdGxlXCJdJ1xuICAgICAgKTtcbiAgICAgIGlmIChub2RlKSBub2RlLnZhbHVlID0gYFJlbGVhc2UgJHtyZWxlYXNlVmVyc2lvbn1gO1xuXG4gICAgICAvL1xuICAgICAgbm9kZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXG4gICAgICAgICdbYXJpYS1sYWJlbD1cIkRlc2NyaXB0aW9uXCJdJ1xuICAgICAgKTtcbiAgICAgIGlmIChub2RlKSBub2RlLnZhbHVlID0gYFJlbGVhc2UgJHtyZWxlYXNlVmVyc2lvbn1gO1xuICAgIH0sIHJlbGVhc2VWZXJzaW9uKTtcblxuICAgIC8vIFdhaXQgZm9yIHRoZSBwYWdlIHRvIGNsb3NlXG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHIpID0+IHtcbiAgICAgIHBhZ2Uub24oXCJjbG9zZVwiLCAoKSA9PiB7XG4gICAgICAgIHIodm9pZCAwKTtcbiAgICAgICAgY29uc29sZS53YXJuKFwiQXp1cmUgcHJvamVjdCB0aWNrZXQgcHJvY2VzcyBmaW5pc2hlZFxcblxcblwiKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIFdhaXQgZm9yIGJvdGggUFJzIHRvIGNvbWUgdG8gY29tcGxldGlvblxuICBjb25zb2xlLndhcm4oXCJcXG5cXG5XYWl0aW5nIGZvciBicm93c2VyIHdpbmRvd3MgdG8gYmUgY2xvc2VkLi4uXFxuXFxuXCIpO1xuICBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgbWFrZVBSKFwicmVsZWFzZVwiLCBcImRldlwiKSxcbiAgICBtYWtlUFIoXCJyZWxlYXNlXCIsIG1hc3RlckJyYW5jaCksXG4gIF0pO1xuXG4gIC8vIENsb3NlIGFmdGVyIGFsbCBwYWdlcyBjbG9zZWRcbiAgYnJvd3Nlci5jbG9zZSgpO1xufVxuXG4vKipcbiAqIFRoaXMgY29tbWFuZCBpcyBpbnRlbmRlZCB0byB3b3JrIHdpdGggdGhlIGN1cnJlbnQgYnJhbmNoIElGIHRoZSBicmFuY2ggaGFzXG4gKiBiZWVuIGNyZWF0ZWQgdXNpbmcgdGhlIFwibnBtIHJ1biB0aWNrZXRcIiBjb21tYW5kLlxuICpcbiAqIFRoaXMgd2lsbCBsb29rIGludG8gdGhlIGN1cnJlbnQgYnJhbmNoIGFuZCBmaW5kIHRoZSBjb21taXQgdGhhdCBjb250YWlucyB0aGVcbiAqIHRpY2tldCBicmFuY2ggbmFtZSBhbmQgdGlja2V0IFVSTC4gVGhpcyB3aWxsIGdlbmVyYXRlIGEgY29tbWl0IGFuZCBtZXJnZVxuICogcmVxdWVzdCB0aGF0IGNvbnRhaW5zIHRoZSB0aWNrZXQgdGhhdCBpcyBsaW5rZWQuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHJ1bihcbiAgcmVwb1VybDogc3RyaW5nLFxuICByZXBvVHlwZTogc3RyaW5nLFxuICBtYXN0ZXJCcmFuY2ggPSBcIm1hc3RlclwiLFxuICAuLi5fYXJnczogYW55W11cbikge1xuICAvLyBWYWxpZGF0ZSB3ZSBoYXZlIGltcGxlbWVudGVkIGEgc3RyYXRlZ3kgZm9yIGEgZ2l2ZW4gcmVwbyB0eXBlLlxuICBjb25zdCB2YWxpZFJlcG9zID0gbmV3IFNldChbXCJnaXRsYWJcIiwgXCJnaXRcIiwgXCJnaXRodWJcIiwgXCJhenVyZVwiXSk7XG5cbiAgaWYgKCF2YWxpZFJlcG9zLmhhcyhyZXBvVHlwZSkpIHtcbiAgICBjb25zb2xlLmVycm9yKGBVbnN1cHBvcnRlZCByZXBvIHR5cGU6ICR7cmVwb1R5cGV9YCk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gV2UgY2FuIG9ubHkgZG8gdGhpcyBvcGVyYXRpb24gaWYgdGhlcmUgaXMgbm90aGluZyB0byBjb21taXQgb3IgcHVzaFxuICAvLyBUaGlzIG9ubHkgd29ya3MgaWYgbm8gY2hhbmdlcyBhcmUgcHJlc2VudFxuICBpZiAoYXdhaXQgZ2l0SGFzQ2hhbmdlcygpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiWW91IGhhdmUgdW5jb21taXR0ZWQgY2hhbmdlcyBvciB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgcHJvamVjdCBjYW4gbm90IGJlIGRldGVybWluZWQuIFBsZWFzZSBjb21taXQgb3Igc3Rhc2ggdGhlbSBiZWZvcmUgY29udGludWluZy5cIlxuICAgICk7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgLy8gY29uc3QgY2hlY2tCcmFuY2ggPSBzaGVsbC5leGVjKFwiZ2l0IHN5bWJvbGljLXJlZiAtLXNob3J0IEhFQURcIiwgeyBzaWxlbnQ6IHRydWUgfSk7XG4gIC8vIGlmIChjaGVja0JyYW5jaCAhPT0gXCJyZWxlYXNlXCIpIHtcbiAgLy8gICBjb25zb2xlLmVycm9yKFwiWW91IG11c3QgYmUgb24gdGhlIHJlbGVhc2UgYnJhbmNoIHRvIGNyZWF0ZSBhIHJlbGVhc2UgUFJcIik7XG4gIC8vICAgcHJvY2Vzcy5leGl0KDEpO1xuICAvLyB9XG5cbiAgLy8gR2V0IHRoZSBjdXJyZW50IHByb2plY3QgdmVyc2lvbiBmcm9tIHRoZSBwYWNrYWdlLmpzb24gZmlsZVxuICBjb25zdCBwYWNrYWdlSnNvbiA9IGZzLnJlYWRKc29uU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpO1xuICBjb25zdCB2ZXJzaW9uID0gcGFja2FnZUpzb24udmVyc2lvbjtcblxuICAvLyBOb3cgd2Ugb3BlbiB0aGUgdXJsIHRvIHRoZSBuZXcgbWVyZ2UgcmVxdWVzdFxuICBzd2l0Y2ggKHJlcG9UeXBlKSB7XG4gICAgY2FzZSBcImdpdGxhYlwiOlxuICAgICAgYXdhaXQgb3BlbkdpdGxhYlBSKHJlcG9VcmwsIHZlcnNpb24sIG1hc3RlckJyYW5jaCk7XG4gICAgICBicmVhaztcblxuICAgIGNhc2UgXCJnaXRcIjpcbiAgICBjYXNlIFwiZ2l0aHViXCI6XG4gICAgICBhd2FpdCBvcGVuR2l0UFIocmVwb1VybCwgdmVyc2lvbiwgbWFzdGVyQnJhbmNoKTtcbiAgICAgIGJyZWFrO1xuXG4gICAgY2FzZSBcImF6dXJlXCI6XG4gICAgICBhd2FpdCBvcGVuQXp1cmVQUihyZXBvVXJsLCB2ZXJzaW9uLCBtYXN0ZXJCcmFuY2gpO1xuICAgICAgYnJlYWs7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgY29uc29sZS53YXJuKFwiTm8gc3VwcG9ydGVkIHJlcG8gdHlwZSBmb3VuZFwiKTtcbiAgfVxufVxuIiwKICAgICIjIS91c3IvYmluL2VudiBidW5cbmltcG9ydCAqIGFzIGNvbW1hbmRlciBmcm9tIFwiY29tbWFuZGVyXCI7XG5pbXBvcnQgQXV0b0NvbXBsZXRlUHJvbXB0IGZyb20gXCJpbnF1aXJlci1hdXRvY29tcGxldGUtcHJvbXB0XCI7XG5pbXBvcnQgaW5xdWlyZXIgZnJvbSBcImlucXVpcmVyXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHlhcmdzIGZyb20gXCJ5YXJnc1wiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi9saWIvdXRpbC9jaGFsay5qc1wiO1xuaW1wb3J0IHsgY29uZmlnRW52IH0gZnJvbSBcIi4vbGliL3V0aWwvY29uZmlnLWVudi5qc1wiO1xuaW1wb3J0IHsgZGVzY3JpcHRpb24gfSBmcm9tIFwiLi9saWIvdXRpbC9kZXNjcmlwdGlvbi5qc1wiO1xuaW1wb3J0IHsgZW5zdXJlRGVwZW5kZW5jaWVzIH0gZnJvbSBcIi4vY29tbWFuZHMvZW5zdXJlLWRlcGVuZGVuY2llcy5qc1wiO1xuaW1wb3J0IHsgZXhlY0luc3RhbGwgfSBmcm9tIFwiLi9saWIvZXhlYy9leGVjLWluc3RhbGwuanNcIjtcblxuaW5xdWlyZXIucmVnaXN0ZXJQcm9tcHQoXCJhdXRvY29tcGxldGVcIiwgQXV0b0NvbXBsZXRlUHJvbXB0KTtcblxuY29uc3QgeyBDb21tYW5kIH0gPSBjb21tYW5kZXI7XG5jb25zdCBwcm9ncmFtOiBhbnkgPSBuZXcgQ29tbWFuZCgpO1xuY29uc3Qgb3B0aW9uczogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9O1xuXG5mdW5jdGlvbiBnZXRPcHRpb25zKCkge1xuICBvcHRpb25zLmRlYnVnID0gcHJvZ3JhbS5kZWJ1ZztcbiAgb3B0aW9ucy52ZXJib3NlID0gcHJvZ3JhbS52ZXJib3NlO1xuICBvcHRpb25zLnBhdHRlcm4gPSBwcm9ncmFtLnBhdHRlcm47XG5cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbnByb2dyYW0udmVyc2lvbihcIjAuMC4xXCIpO1xucHJvZ3JhbS5vcHRpb24oXG4gIFwiLXYsIC0tdmVyYm9zZVwiLFxuICBcIk91dHB1dHMgbW9yZSBkZXRhaWxlZCBpbmZvcm1hdGlvbiBkdXJpbmcgY3Jhc2hlcy5cIlxuKTtcbnByb2dyYW0ub3B0aW9uKFxuICBcIi0tZGVidWcgW3BhcmFtXVwiLFxuICBkZXNjcmlwdGlvbmBcbiAgICBQcm92aWRlcyBkZWJ1Z2dpbmcgY29udGV4dHVhbCBpbmZvcm1hdGlvbiB2YXJpb3VzIGNvbW1hbmRzIG1pZ2h0IHVzZSB0b1xuICAgIGFpZCBpbiBkZXZlbG9waW5nIERldm9wcy5cbiAgYFxuKTtcblxucHJvZ3JhbS5vcHRpb24oXG4gIFwiLXAsIC0tcGF0dGVybiBbcGFyYW1dXCIsXG4gIGRlc2NyaXB0aW9uYFxuICAgIFByb3ZpZGVzIGEgcGF0dGVybiBmb3IgY2VydGFpbiBvcGVyYXRpb25zIHRvIHV0aWxpemUuIFRoaXMgaXMgcHJpbWFyaWx5XG4gICAgdXNlZCBieSB1bml0IHRlc3RzIHRvIGZpbHRlciB0ZXN0cyB0byBzcGVjaWZpZWQgdGVzdHMuXG4gIGBcbik7XG5cbmNvbnN0IGRldiA9IHByb2dyYW0uY29tbWFuZChcImRldlwiKS5kZXNjcmlwdGlvbihcbiAgZGVzY3JpcHRpb25gXG4gICAgVGhlc2UgYXJlIHRoZSBjb21tYW5kcyBhc3NvY2lhdGVkIHdpdGggc3RhcnRpbmcgdXAgZGV2ZWxvcGVyIGVudmlyb25tZW50c1xuICAgIGZvciB2YXJpb3VzIHByb2plY3QgdHlwZXMgb3IgcG9ydGlvbnMgb2YgYSBwcm9qZWN0LlxuICBgXG4pO1xuXG5kZXZcbiAgLmNvbW1hbmQoXCJ2aXRlXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFN0YXJ0cyB1cCBhIGRldmVsb3BlciBlbnZpcm9ubWVudCB0aGF0IHBlcmZvcm1zIGluY3JlbWVudGFsIGJ1aWxkcyB3aGlsZVxuICAgICAgZGV2ZWxvcGluZyB3aXRoaW4gdGhlIGxpYiBhbmQgYXBwIGZvbGRlcnMuIFVzZXMgdml0ZSBhbmQgdml0ZVxuICAgICAgY29uZmlnLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9kZXYvZGV2LXZpdGUuanNcIikpXG4gICAgICAuZGVmYXVsdCgpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiZGV2LXZpdGUgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5kZXZcbiAgLmNvbW1hbmQoXCJzdG9yeWJvb2tcIilcbiAgLm9wdGlvbihcbiAgICBcIi1pLCAtLWluY2x1ZGUgPGluY2x1ZGUuLi4+XCIsXG4gICAgXCJBZGRpdGlvbmFsIHN0b3J5Ym9vayBtb2R1bGVzIHRvIGxvYWQgaW50byBzdG9yeWJvb2suIFRoZXNlIGFyZSB0aGUgbmFtZXMgb2YgcHJvcGVybHkgZm9ybWF0dGVkIGRlcGVuZGVuY2llcyBpbnN0YWxsZWQgaW50byBub2RlX21vZHVsZXMuXCJcbiAgKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBTdGFydHMgYSBzdG9yeWJvb2sgaW5zdGFuY2UgZm9yIGRldmVsb3BpbmcgdGhlIFVJIGNvbXBvbmVudHMgb2YgdGhlXG4gICAgICBwcm9qZWN0LiBUaGlzIG1ha2VzIHRoZSBcInVpL3N0b3JpZXNcIiBmb2xkZXIgaW4gdGhlIHByb2plY3QgdGhlIGV4cGVjdGVkXG4gICAgICBkZXZlbG9wbWVudCBwb2ludC5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoeyBpbmNsdWRlIH06IHsgaW5jbHVkZTogc3RyaW5nW10gfSkgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3N0b3J5Ym9vay5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KFwiXCIsIGluY2x1ZGUsIHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpKSwgZ2V0T3B0aW9ucygpKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcInN0b3J5Ym9vayBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbmNvbnN0IHN0b3J5Ym9vayA9IHByb2dyYW0uY29tbWFuZChcInN0b3J5Ym9va1wiKTtcblxuc3Rvcnlib29rXG4gIC5jb21tYW5kKFwicnVuXCIpXG4gIC5vcHRpb24oXG4gICAgXCItaSwgLS1pbmNsdWRlIDxpbmNsdWRlLi4uPlwiLFxuICAgIFwiQWRkaXRpb25hbCBzdG9yeWJvb2sgbW9kdWxlcyB0byBsb2FkIGludG8gc3Rvcnlib29rLiBUaGVzZSBhcmUgdGhlIG5hbWVzIG9mIHByb3Blcmx5IGZvcm1hdHRlZCBkZXBlbmRlbmNpZXMgaW5zdGFsbGVkIGludG8gbm9kZV9tb2R1bGVzLlwiXG4gIClcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgU3RhcnRzIGEgc3Rvcnlib29rIGluc3RhbmNlIGZvciBkZXZlbG9waW5nIHRoZSBVSSBjb21wb25lbnRzIG9mIHRoZVxuICAgICAgcHJvamVjdC4gVGhpcyBtYWtlcyB0aGUgXCJ1aS9zdG9yaWVzXCIgZm9sZGVyIGluIHRoZSBwcm9qZWN0IHRoZSBleHBlY3RlZFxuICAgICAgZGV2ZWxvcG1lbnQgcG9pbnQuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKHsgaW5jbHVkZSB9OiB7IGluY2x1ZGU6IHN0cmluZ1tdIH0pID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9zdG9yeWJvb2suanNcIikpXG4gICAgICAuZGVmYXVsdChcIlwiLCBpbmNsdWRlLCBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSksIGdldE9wdGlvbnMoKSlcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJzdG9yeWJvb2sgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5wcm9ncmFtXG4gIC5jb21tYW5kKFwidXJsIFt1cmkuLi5dXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFNpbXBsZSBjb21tYW5kIHRvIG9wZW4gYSBzcGVjaWZpZWQgVVJMIGluIHRoZSBicm93c2VyLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICh1cmk6IHN0cmluZykgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3VybC5qc1wiKSkuZGVmYXVsdCh1cmkpLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oXCJ1cmwgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG4gIH0pO1xuXG5jb25zdCByZWxlYXNlID0gcHJvZ3JhbS5jb21tYW5kKFwicmVsZWFzZVwiKS5kZXNjcmlwdGlvbihcbiAgZGVzY3JpcHRpb25gXG4gICAgVGhlc2UgY29tbWFuZHMgYXJlIHVzZWQgZm9yIGZhY2lsaXRhdGluZyBkaXN0cmlidXRpb24gcmVsZWFzZXMgb2ZcbiAgICBhcHBsaWNhdGlvbnMuIFRoaXMgaW5jbHVkZXMgdG9vbHMgZm9yIGJ1aWxkaW5nIHRoIGRpc3QgZm9sZGVyIGZyYWdtZW50cyxcbiAgICB2aWV3aW5nIHRoZSBleHBlY3RlZCByZWxlYXNlIG5vdGVzLCBhbmQgYWN0dWFsbHkgcGVyZm9ybWluZyBhIGNvbXBsZXRlXG4gICAgcmVsZWFzZSBjeWNsZS5cbiAgYFxuKTtcblxucmVsZWFzZVxuICAuY29tbWFuZChcImRlcGxveSBbYWRkLXJlbW90ZS4uLl1cIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgUGVyZm9ybXMgYWN0aW9ucyBuZWNlc3NhcnkgdG8gdXBkYXRlIHRoZSBkaXN0cmlidXRpb24gb2YgdGhlIHByb2plY3QuXG4gICAgICBUaGlzIHdpbGwgYXV0b21hdGljYWxseSB1cGRhdGUgcmVsZWFzZSBub3RlcywgdGFnIHRoZSByZWxlYXNlLCBhbmRcbiAgICAgIGNvbW1pdCBhbmQgcHVzaCB0byBhICdyZWxlYXNlJyBicmFuY2ggd2hpY2ggd2lsbCBiZSByZWFkeSBmb3IgbWVyZ2luZ1xuICAgICAgaW50byBtYXN0ZXIgYW5kIGRldi5cblxuICAgICAgU3BlY2lmeSBhZGRpdGlvbmFsIHJlbW90ZXMgdG8gZGVwbG95IHRvIHZpYSB0aGUgYWRkLXJlbW90ZSBvcHRpb24uXG4gICAgICBUaGlzIHdpbGwgZGVwbG95IHRoZSByZWxlYXNlIHRvIGFkZGl0aW9uYWwgcmVtb3RlcyAoQUZURVIgYWxsIG90aGVyIG5vcm1hbFxuICAgICAgZGVwbG95IG9wZXJhdGlvbnMgY29tcGxldGUpLiBUaGlzIHZhbHVlIGlzIHRoZSBOQU1FIG9mIHRoZSByZW1vdGUgYXMgaXRcbiAgICAgIGFwcGVhcnMgd2hlbiB5b3UgcGVyZm9ybSBhIFwiZ2l0IHJlbW90ZSAtdlwiIGNvbW1hbmQuXG5cbiAgICAgIFlvdSBjYW4gc3BlY2lmeSBhIHNwZWNpZmljIHRhcmdldCBicmFuY2ggdmlhIGEgY29sb246IHJlbW90ZTpicmFuY2hcbiAgICAgIE90aGVyd2lzZSwgdGhpcyB3aWxsIHVzZSB0aGUgc2FtZSBtYWluIGJyYW5jaCBhcyBjb25maWd1cmVkIGZvciB0aGlzXG4gICAgICBwcm9qZWN0LlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jIChyZW1vdGVzOiBzdHJpbmdbXSkgPT4ge1xuICAgIC8vIEJlZm9yZSBzdGFydGluZyB0aGUgcmVsZWFzZSBzY3JpcHQgbWFrZSBzdXJlIG91ciBwYWNrYWdlcyBhcmUgdXAgdG8gZGF0ZSB0byB0aGUgbGF0ZXN0XG4gICAgZXhlY0luc3RhbGwoW10pO1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL3JlbGVhc2UvcmVsZWFzZS1kZXBsb3kuanNcIikpXG4gICAgICAuZGVmYXVsdChyZW1vdGVzKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcInJlbGVhc2UtZGVwbG95IHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVxcblwiLFxuICAgICAgICAgIGVyci5zdGFjayB8fCBlcnIubWVzc2FnZVxuICAgICAgICApO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbnJlbGVhc2VcbiAgLmNvbW1hbmQoXCJ0eXBlc1wiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBVcGRhdGVzIEpVU1QgdGhlIHR5cGVzIGluIHRoZSBkaXN0IGZvbGRlci4gVGhlc2UgYXJlIHRoZSBzYW1lIHR5cGVzXG4gICAgICBnZW5lcmF0ZWQgd2hlbiBidWlsZGluZyBhIHJlbGVhc2UuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKCkgPT4ge1xuICAgIC8vIEJlZm9yZSBzdGFydGluZyB0aGUgcmVsZWFzZSBzY3JpcHQgbWFrZSBzdXJlIG91ciBwYWNrYWdlcyBhcmUgdXAgdG8gZGF0ZSB0byB0aGUgbGF0ZXN0XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvcmVsZWFzZS9yZWxlYXNlLXR5cGVzLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcInJlbGVhc2UtdHlwZXMgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XFxuXCIsXG4gICAgICAgICAgZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlXG4gICAgICAgICk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxucmVsZWFzZVxuICAuY29tbWFuZChcInZpZXdcIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgVGhpcyBydW5zIHRoZSByZWxlYXNlLXZpZXcgc2NyaXB0LiBGb3IgdGhpcyBjYXNlLCBpdCB3aWxsIG9ubHkgZGlzcGxheVxuICAgICAgdGhlIHJlbGVhc2Ugbm90ZXMgaW4gdGhlIGNvbnNvbGUuIEFjdHVhbCBnZW5lcmF0ZWQgcmVsZWFzZSBub3RlcyBhcmUgYVxuICAgICAgcGFydCBvZiB0aGUgcmVsZWFzZSBwcm9jZXNzLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy90cy5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KFwiXCIpXG4gICAgICAudGhlbihhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBjaGFsay5jeWFuQnJpZ2h0Qm9sZChcIlRTIGNoZWNrIHBhc3NlZCwgZ2VuZXJhdGluZyBub3Rlcy4uLlwiKVxuICAgICAgICApO1xuICAgICAgICAvLyBCZWZvcmUgc3RhcnRpbmcgdGhlIHJlbGVhc2Ugc2NyaXB0IG1ha2Ugc3VyZSBvdXIgcGFja2FnZXMgYXJlIHVwIHRvIGRhdGUgdG8gdGhlIGxhdGVzdFxuICAgICAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2Utdmlldy5qc1wiKSlcbiAgICAgICAgICAuZGVmYXVsdCgpXG4gICAgICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgICAgIFwicmVsZWFzZS1ub3RlcyBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIixcbiAgICAgICAgICAgICAgZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgY2hhbGsucmVkQnJpZ2h0Qm9sZChcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uYFxuICAgICAgICAgICAgICBGYWlsZWQgVFMgY2hlY2suIFJlbGVhc2Ugbm90ZXMgd2lsbCBub3QgYmUgcHJvZHVjZWQgdW50aWwgYWxsIFRTXG4gICAgICAgICAgICAgIGVycm9ycyBhcmUgcmVzb2x2ZWQuXG4gICAgICAgICAgICBgXG4gICAgICAgICAgKVxuICAgICAgICApO1xuICAgICAgICBjb25zb2xlLndhcm4oZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlKTtcbiAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgfSk7XG4gIH0pO1xuXG5yZWxlYXNlXG4gIC5jb21tYW5kKFwiYnVpbGRcIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgVGhpcyBydW5zIHRoZSByZWxlYXNlLWJ1aWxkIHNjcmlwdC4gVGhpcyBnZW5lcmF0ZXMgYWxsIG9mIHRoZSByZWxlYXNlXG4gICAgICBmcmFnbWVudHMuIFRoaXMgc2hvdWxkIE9OTFkgYmUgdXNlZCBmb3IgdGVzdGluZyBhbmQgZXhwZXJpbWVudGluZy4gQWN0dWFsXG4gICAgICByZWxlYXNlIGZyYWdtZW50cyBzaG91bGQgYmUgcHJvcGVybHkgY3JlYXRlZCBhbmQgZGVwbG95ZWQgdXNpbmcgdGhlXG4gICAgICByZWxlYXNlIGRlcGxveSBjb21tYW5kLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2UtYnVpbGQuanNcIikpXG4gICAgICAuZGVmYXVsdCgpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwicmVsZWFzZS1kZXBsb3kgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XFxuXCIsXG4gICAgICAgICAgZXJyLnN0YWNrIHx8IGVyci5tZXNzYWdlXG4gICAgICAgICk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxuY29uc3QgcmVsZWFzZVN0YXJ0ID0gcmVsZWFzZS5jb21tYW5kKFwic3RhcnRcIikuZGVzY3JpcHRpb24oXG4gIGRlc2NyaXB0aW9uYFxuICAgICAgVGhpcyBzdGFydHMgdXAgcmVsZWFzZWQgcmVsYXRlZCBwcm9jZXNzZXMuIFRoaXMgaW5jbHVkZXMgdGhpbmdzIGxpa2VcbiAgICAgIHN0YXJ0aW5nIHVwIHRoZSBkZXYgc2VydmVyIHdpdGhvdXQgYW55IGFkZGl0aW9uYWwgYnVpbGRzIG9yIGF1dG9cbiAgICAgIGNvbmZpZ3VyYXRpb24gZm9yIGRldmVsb3BtZW50LlxuICAgIGBcbik7XG5cbnJlbGVhc2VTdGFydFxuICAuY29tbWFuZChcInNlcnZlclwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBTdGFydHMgdXAgdGhlIGFwcCBzZXJ2ZXIgd2l0aG91dCBhbnkgYWRkaXRpb25hbCBidWlsZHMgZXRjLiBVc2UgdGhlXG4gICAgICBlbnZpcm9ubWVudHM6XG5cbiAgICAgICAgQlVJTERfTU9ERTogVGFyZ2V0cyBhbiBlbnYgdG8gcnVuIHRoZSBzZXJ2ZXIgZm9yLlxuICAgICAgICBSRVNPVVJDRV9QQVRIOiBUaGUgcGF0aCB0byB0aGUgc3RhdGljIGZpbGVzIHRvIHNlcnZlLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9yZWxlYXNlL3JlbGVhc2Utc3RhcnQtc2VydmVyLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICBcInJlbGVhc2Utc3RhcnQtc2VydmVyIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVxcblwiLFxuICAgICAgICAgIGVyci5zdGFjayB8fCBlcnIubWVzc2FnZVxuICAgICAgICApO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbnByb2dyYW1cbiAgLmNvbW1hbmQoXCJzdGFydCBbdGFyZ2V0XVwiKVxuICAuZGVzY3JpcHRpb24oXG4gICAgZGVzY3JpcHRpb25gXG4gICAgICBUaGlzIGZpcmVzIHVwIGEgc2VydmVyIHRvIG1ha2UgYW55IHN0YXRpYyBjb250ZW50IGF2YWlsYWJsZSBmb3IgYmVpbmdcbiAgICAgIHNlcnZlZC5cbiAgICAgIFRoZXJlIGFyZSBhIGZldyBvcHRpb25zIGZvciB3aGF0IGNvbnRlbnQgd2lsbCBiZSBzZXJ2ZWQgYnkgdGhpcyBzY3JpcHQ6XG5cbiAgICAgIC0gVGhlIHdlYiBhcHBcbiAgICAgIC0gRGV2b3BzIEFQSVxuXG4gICAgICBUaGUgc3RhcnQgc2NyaXB0IHdpbGwgYXV0b21hdGljYWxseSBwaWNrIHRoZSB3ZWIgYXBwIG92ZXIgdGhlIGRldm9wc1xuICAgICAgZmlsZXMsIGJ1dCB5b3UgY2FuIHNwZWNpZnkgYSB0YXJnZXQgaWYgeW91IGhhdmUgYSBkZXZvcHMgQVBJIGFuZCBhIHdlYlxuICAgICAgYXBwOlxuXG4gICAgICAtIGFwcFxuICAgICAgLSBkZXZvcHNcbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAodGFyZ2V0OiBzdHJpbmcpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy9zdGFydC5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KHRhcmdldCwgZ2V0T3B0aW9ucygpKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcInN0YXJ0IHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiKTtcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxuY29uc3QgdGVzdCA9IHByb2dyYW0uY29tbWFuZChcInRlc3RcIikuZGVzY3JpcHRpb24oXG4gIGRlc2NyaXB0aW9uYFxuICAgIFRoZXNlIGNvbW1hbmRzIGFyZSB1c2VkIGZvciBydW5uaW5nIHRlc3RzLiBUaGlzIGluY2x1ZGVzIHRvb2xzIGZvclxuICAgIHJ1bm5pbmcgdW5pdCB0ZXN0cyBhIHNpbmdsZSB0aW1lIG9yIGluIGEgd2F0Y2ggbW9kZS5cblxuICAgIFVzZSB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZvciBtb2RpZnlpbmcgYmVoYXZpb3I6XG5cbiAgICAke2NoYWxrLnllbGxvd0JyaWdodEJvbGQoXCJQQVRURVJOXCIpfSAtIFRoaXMgY2F1c2VzIHRoZSB0ZXN0cyB0byBvbmx5IHJ1biBvblxuICAgIGZpbGVzIHRoYXQgbWF0Y2ggdGhlIHBhdHRlcm5cblxuICAgICR7Y2hhbGsueWVsbG93QnJpZ2h0Qm9sZChcIkxFU1NcIil9IC0gVGhpcyByZW1vdmVzIHRoZSB2ZXJib3NlIG91dHB1dCBsaXN0IG9mXG4gICAgYWxsIHRlc3RzIHJhblxuICBgXG4pO1xuXG50ZXN0XG4gIC5jb21tYW5kKFwicnVuXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFJ1bnMgYWxsIHVuaXQgdGVzdHMgaW4gdGhlIHVuaXQtdGVzdCBmb2xkZXIgb25jZS5cbiAgICBgXG4gIClcbiAgLmFjdGlvbihhc3luYyAoKSA9PiB7XG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvdGVzdC90ZXN0LXJ1bi5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KClcbiAgICAgIC5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJ0ZXN0LXJ1biBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbmNvbnN0IGNsZWFuID0gcHJvZ3JhbS5jb21tYW5kKFwiY2xlYW5cIikuZGVzY3JpcHRpb24oXG4gIGRlc2NyaXB0aW9uYFxuICAgIENvbW1vbiBjbGVhbmluZyB0b29scyBmb3IgdmFyaW91cyBmcmFnbWVudHMgd2l0aGluIHRoZSBwcm9qZWN0LlxuICBgXG4pO1xuXG5jbGVhblxuICAuY29tbWFuZChcImNhY2hlXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIENsZWFucyBvdXQgYnVpbGQgYW5kIGNhY2hlIGZpbGVzIHRvIGhlbHAgZW5zdXJlIGEgY29tcGxldGUgcmVidWlsZCB0YWtlc1xuICAgICAgcGxhY2UuXG4gICAgYFxuICApXG4gIC5hY3Rpb24oYXN5bmMgKCkgPT4ge1xuICAgIChhd2FpdCBpbXBvcnQoXCIuL2NvbW1hbmRzL2NsZWFuL2NsZWFuLWNhY2hlLmpzXCIpKVxuICAgICAgLmRlZmF1bHQoKVxuICAgICAgLmNhdGNoKChlcnI6IEVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybihcImNsZWFuLWNhY2hlIHByb2Nlc3MgZXhpdGVkIHVuZXhwZWN0ZWRseVwiKTtcbiAgICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH0pO1xuICB9KTtcblxuY29uc3QgdHMgPSBwcm9ncmFtLmNvbW1hbmQoXCJ0c1wiKS5kZXNjcmlwdGlvbihcbiAgZGVzY3JpcHRpb25gXG4gICAgVGhlc2UgY29tbWFuZHMgYXJlIHVzZWQgZm9yIHJ1bm5pbmcgdHlwZXNjcmlwdC4gVGhpcyBpbmNsdWRlcyB0b29scyBmb3JcbiAgICBydW5uaW5nIHR5cGVzY3JpcHQgY29tcGlsYXRpb24gYSBzaW5nbGUgdGltZSBvciBpbiBhIHdhdGNoIG1vZGUuXG4gIGBcbik7XG5cbnRzLmNvbW1hbmQoXCJydW5cIilcbiAgLmRlc2NyaXB0aW9uKFxuICAgIGRlc2NyaXB0aW9uYFxuICAgICAgUnVucyB0eXBlc2NyaXB0IGNvbXBpbGF0aW9uIHRvIGNoZWNrIGZvciBlcnJvcnMuIERvZXMgTk9UIGVtaXQgZmlsZXMsIHRodXNcbiAgICAgIGlzIGEgZ29vZCBtZWNoYW5pc20gZm9yIGNoZWNraW5nIGEgYnVpbGQgYmVmb3JlIHJ1bm5pbmcgYSByZWxlYXNlLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICAoYXdhaXQgaW1wb3J0KFwiLi9jb21tYW5kcy90cy5qc1wiKSkuZGVmYXVsdChcIlwiKS5jYXRjaCgoZXJyOiBFcnJvcikgPT4ge1xuICAgICAgY29uc29sZS53YXJuKFwidHMgcHJvY2VzcyBleGl0ZWQgdW5leHBlY3RlZGx5XCIpO1xuICAgICAgY29uc29sZS53YXJuKGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSk7XG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfSk7XG4gIH0pO1xuXG5jb25zdCBwciA9IHByb2dyYW1cbiAgLmNvbW1hbmQoXCJwclwiKVxuICAub3B0aW9uKFxuICAgIFwiLS1yZXBvVXJsIDx2YWx1ZT5cIixcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFRoZSBodHRwcyBVUkwgdG8gdGhlIHJlcG8gdG8gbWFrZSB0aGUgUFIgaW50b1xuICAgIGBcbiAgKVxuICAub3B0aW9uKFxuICAgIFwiLS1yZXBvVHlwZSA8dmFsdWU+XCIsXG4gICAgZGVzY3JpcHRpb25gXG4gICAgVGhlIHJlcG9zaXRvcnkgdHlwZSB0byBtYWtlIHRoZSBQUiBpbnRvLiBTdXBwb3J0ZWQgdHlwZXMgYXJlOiBnaXQsIGdpdGxhYlxuICBgXG4gIClcbiAgLm9wdGlvbihcbiAgICBcIi0tbWFzdGVyQnJhbmNoIDx2YWx1ZT5cIixcbiAgICBkZXNjcmlwdGlvbmBcbiAgICBUaGlzIGluZGljYXRlcyB3aGljaCBicmFuY2ggaXMgdGhlIG1hc3Rlci9tYWluIG9mIHRoZSByZXBvc2l0b3J5LlxuICBgXG4gICk7XG5cbnByLmNvbW1hbmQoXCJyZWxlYXNlXCIpXG4gIC5kZXNjcmlwdGlvbihcbiAgICBkZXNjcmlwdGlvbmBcbiAgICAgIFRoaXMgY3JlYXRlcyB0d28gUFJzIHRoYXQgbWVyZ2VzIHRoZSBjdXJyZW50IHJlbW90ZSByZWxlYXNlIGJyYW5jaCBpbnRvXG4gICAgICB0aGUgcmVtb3RlIGRldiBhbmQgbWFzdGVyIGJyYW5jaGVzLlxuICAgIGBcbiAgKVxuICAuYWN0aW9uKGFzeW5jICgpID0+IHtcbiAgICBjb25zdCB7IHJlcG9VcmwsIHJlcG9UeXBlLCBtYXN0ZXJCcmFuY2ggfSA9IHlhcmdzKHByb2Nlc3MuYXJndikuYXJndiBhcyB7XG4gICAgICByZXBvVHlwZT86IHN0cmluZztcbiAgICAgIHJlcG9Vcmw/OiBzdHJpbmc7XG4gICAgICBtYXN0ZXJCcmFuY2g/OiBzdHJpbmc7XG4gICAgfTtcblxuICAgIGlmICghcmVwb1VybCB8fCAhcmVwb1R5cGUgfHwgIW1hc3RlckJyYW5jaCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIllvdSBtdXN0IHNwZWNpZnkgYm90aCAtLXJlcG9VcmwgYW5kIC0tcmVwb1R5cGUgdG8gdXNlIHRoaXMgY29tbWFuZFwiXG4gICAgICApO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH1cblxuICAgIC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGFueSByZXF1aXJlZCBwZWVyIGRlcGVuZGVuY2llcyBmb3IgdGhpc1xuICAgIGF3YWl0IGVuc3VyZURlcGVuZGVuY2llcygpLmNhdGNoKCgpID0+IHByb2Nlc3MuZXhpdCgxKSk7XG4gICAgY29uc29sZS53YXJuKFwiRGVwZW5kZW5jeSBjaGVja3MgcGFzc2VkLCBjb250aW51aW5nLi4uXCIpO1xuXG4gICAgKGF3YWl0IGltcG9ydChcIi4vY29tbWFuZHMvcHIvcHItcmVsZWFzZS5qc1wiKSlcbiAgICAgIC5kZWZhdWx0KHJlcG9VcmwsIHJlcG9UeXBlLCBtYXN0ZXJCcmFuY2gpXG4gICAgICAuY2F0Y2goKGVycjogRXJyb3IpID0+IHtcbiAgICAgICAgY29uc29sZS53YXJuKFwicHItcmVsZWFzZSBwcm9jZXNzIGV4aXRlZCB1bmV4cGVjdGVkbHlcIik7XG4gICAgICAgIGNvbnNvbGUud2FybihlcnIuc3RhY2sgfHwgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9KTtcbiAgfSk7XG5cbmFzeW5jIGZ1bmN0aW9uIHJ1bigpIHtcbiAgLy8gTG9hZCBpbiBlbnZpcm9ubWVudCBmcm9tIGVudiBmaWxlIGFuZCBhbHNvIGVuc3VyZSBjb25maWd1cmF0aW9uIG1hdGNoZXMgdGhlXG4gIC8vIGVudmlyb25tZW50IGNvbmZpZ3VyYXRpb24gc3BlY2lmaWVkIGluIGVudi5jb25maWcudHNcbiAgYXdhaXQgY29uZmlnRW52KHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIik7XG4gIHByb2dyYW0ucGFyc2UocHJvY2Vzcy5hcmd2KTtcbn1cblxucnVuKCk7XG4iLAogICAgImltcG9ydCBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgeyBjaGFsayB9IGZyb20gXCIuL2NoYWxrLmpzXCI7XG5pbXBvcnQgeyBkZXNjcmlwdGlvbiB9IGZyb20gXCIuL2Rlc2NyaXB0aW9uLmpzXCI7XG5pbXBvcnQgeyBkb3RlbnYgfSBmcm9tIFwiLi9kb3QtZW52LmpzXCI7XG5pbXBvcnQgeyBpc0RlZmluZWQsIGlzU3RyaW5nIH0gZnJvbSBcIi4vdHlwZXMuanNcIjtcbmltcG9ydCB7IHByb21wdENvbmZpcm0gfSBmcm9tIFwiLi4vcHJvbXB0L3Byb21wdC1jb25maXJtLmpzXCI7XG5pbXBvcnQgeyBwcm9tcHRPdmVycmlkZUZpbGUgfSBmcm9tIFwiLi4vcHJvbXB0L3Byb21wdC1vdmVycmlkZS1maWxlLmpzXCI7XG5cbnR5cGUgRW52Q29uZmlnT3B0aW9uID0ge1xuICByZXF1aXJlZDogYm9vbGVhbjtcbiAgd2Fybj86IGJvb2xlYW47XG4gIG5hbWU6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgZGVmYXVsdD86IHN0cmluZyB8ICgoKSA9PiBQcm9taXNlPHN0cmluZz4pO1xufTtcblxuLyoqXG4gKiBNZXRob2QgdXNlZCB0byByZXRyaWV2ZSB0aGUgZW52aXJvbm1lbnQgY29uZmlndXJhdGlvbiBmaWxlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29uZmlnRW52KCkge1xuICBjb25zdCBlbnZDb25maWc6IEVudkNvbmZpZ09wdGlvbltdID0gKFxuICAgIGF3YWl0IGltcG9ydChwYXRoLnJlc29sdmUoXCJlbnYuY29uZmlnLnRzXCIpKVxuICApLmRlZmF1bHQ7XG4gIGlmICghZW52Q29uZmlnKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBlbnYuY29uZmlnLnRzIGZpbGUgZm91bmQuXCIpO1xuXG4gIGlmICghQXJyYXkuaXNBcnJheShlbnZDb25maWcpKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiZW52LmNvbmZpZy50cyBpcyBub3QgZm9ybWF0dGVkIGNvcnJlY3RseS4gUGxlYXNlIGZvbGxvdyB0aGUgY29ycmVjdCB0eXBlIGNvbnZlbnRpb24uXCJcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIGVudkNvbmZpZztcbn1cblxuLyoqXG4gKiBUaGlzIGVuc3VyZXMgdGhlIGVudmlyb25tZW50IGhhcyBhbGwgb2YgdGhlIG5lY2Vzc2FyeSBjb25maWd1cmF0aW9uIHZhcmlhYmxlc1xuICogdG8gbWFrZSB0aGUgc3lzdGVtIHdvcmsuIFRoaXMgYWxzbyBleGVjdXRlcyB0aGUgZG90ZW52IGxpYnJhcnkgdG8gZW5hYmxlIGVudlxuICogY29uZmlndXJhdGlvbiB2aWEgZW52IGZpbGUuXG4gKlxuICogSWYgdGhlIGVudmlyb25tZW50IGRvZXMgbm90IG1lZXQgdGhlIHByb2NvbmZpZ3VyZWQgZW52aXJvbm1lbnQgbmVlZHMsIHRoZW5cbiAqIHRoaXMgc2NyaXB0IHdpbGwgZXJyb3IgYW5kIGxvZyB3aGF0IGlzIG1pc3NpbmcgYW5kIGRldGFpbHMgYWJvdXQgdGhlXG4gKiBlbnZpcm9ubWVudCB2YXJpYWJsZXMgdGhhdCBhcmUgbWlzc2luZy5cbiAqXG4gKiBJZiByZXF1ZXN0RGVmYXVsdCBpcyB0cnVlLCB0aGlzIHdpbGwgcHJvbXB0IHRoZSB1c2VyIGlmIHRoZXkgd291bGQgbGlrZSB0b1xuICogZ2VuZXJhdGUgYSAuZW52IGZpbGUgd2l0aCBhbGwgb2YgdGhlIGVudmlyb25tZW50J3Mgc2V0IHRoYXQgaGF2ZSBhIGRlZmF1bHRcbiAqIHZhbHVlLiBJZiB0aGUgdXNlciBjaG9vc2VzIHRvIGNyZWF0ZSB0aGUgZW52IGZpbGUsIHRoZSBkZWZhdWx0cyB3aWxsIGdldFxuICogYXBwbGllZCB0byB0aGUgZW52IGFzIHdlbGwgYW5kIG5vdCBlcnJvci5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbmZpZ0VudihyZXF1ZXN0RGVmYXVsdD86IGJvb2xlYW4pIHtcbiAgLy8gVGVsbCBkb3RlbnYgdG8gbG9hZCB0aGUgLmVudiBmaWxlXG4gIGRvdGVudigpO1xuXG4gIC8vIFdlIGxvYWQgaW4gdGhlIGVudi5jb25maWcudHMgZmlsZSBmcm9tIHRoZSBwcm9qZWN0IHJvb3QgdG8gYW5hbHl6ZSBpdCBmb3JcbiAgLy8gY29tcGxpYW5jZSB3aXRoIHRoZSBlbnZpcm9ubWVudC5cbiAgdHJ5IHtcbiAgICBjb25zdCBlbnZDb25maWc6IEVudkNvbmZpZ09wdGlvbltdID0gYXdhaXQgZ2V0Q29uZmlnRW52KCk7XG4gICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHdhcm5pbmdzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZW52Q29uZmlnLmZvckVhY2goKGVudjogRW52Q29uZmlnT3B0aW9uKSA9PiB7XG4gICAgICAvLyBTa2lwIGZhbHNleSB2YWx1ZXNcbiAgICAgIGlmICghZW52KSByZXR1cm47XG5cbiAgICAgIGlmIChlbnYucmVxdWlyZWQpIHtcbiAgICAgICAgaWYgKCFwcm9jZXNzLmVudltlbnYubmFtZV0pIHtcbiAgICAgICAgICBlcnJvcnMucHVzaChkZXNjcmlwdGlvbmBcbiAgICAgICAgICAgICAgTWlzc2luZzogJHtlbnYubmFtZX1cXG5EZXNyaXB0aW9uOiAke2Vudi5kZXNjcmlwdGlvbn1cbiAgICAgICAgICAgIGApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXByb2Nlc3MuZW52W2Vudi5uYW1lXSAmJiBlbnYud2FybiAhPT0gZmFsc2UpIHtcbiAgICAgICAgICB3YXJuaW5ncy5wdXNoKGRlc2NyaXB0aW9uYFxuICAgICAgICAgICAgICBNaXNzaW5nOiAke2Vudi5uYW1lfVxcbkRlc3JpcHRpb246ICR7ZW52LmRlc2NyaXB0aW9ufVxuICAgICAgICAgICAgYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh3YXJuaW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGNoYWxrLnllbGxvd0JyaWdodEJvbGQoXG4gICAgICAgICAgXCJUaGUgZm9sbG93aW5nIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgcmVjb21tZW5kZWQgYnV0IG1pc3NpbmcgZnJvbSB5b3VyIGVudmlyb25tZW50OlxcblwiXG4gICAgICAgIClcbiAgICAgICk7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGNoYWxrLnllbGxvd0JyaWdodChkZXNjcmlwdGlvbmBcbiAgICAgICAgICAke3dhcm5pbmdzLmpvaW4oXCJcXG5cIil9XG4gICAgICAgIGApXG4gICAgICApO1xuICAgIH1cblxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5lcnJvcihcbiAgICAgICAgY2hhbGsucmVkQnJpZ2h0Qm9sZChcbiAgICAgICAgICBcIlRoZSBmb2xsb3dpbmcgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSByZXF1aXJlZCBidXQgbWlzc2luZyBmcm9tIHlvdXIgZW52aXJvbm1lbnQ6XFxuXCJcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgIGNoYWxrLnJlZEJyaWdodChkZXNjcmlwdGlvbmBcbiAgICAgICAgICAke2Vycm9ycy5qb2luKFwiXFxuXCIpfVxuICAgICAgICBgKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBRdWl0IHRoZSBwcm9jZXNzIGlmIHJlcXVpcmVtZW50cyBhcmUgbm90IG1ldFxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHJlcXVlc3REZWZhdWx0KSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb21wdENvbmZpcm0oZGVzY3JpcHRpb25gXG4gICAgICAgICAgVGhlcmUgc2VlbXMgdG8gYmUgc29tZSBtaXNzaW5nIGVudmlyb25tZW50IHZhcmlhYmxlcy4gV291bGQgeW91IGxpa2VcbiAgICAgICAgICB0byBnZW5lcmF0ZSBhIC5lbnYgZmlsZSB3aXRoIHRoZSBkZWZhdWx0IHZhbHVlcyBzcGVjaWZpZWQgaW4gdGhlXG4gICAgICAgICAgZW52LmNvbmZpZyBmaWxlP1xuICAgICAgICBgKTtcblxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgY29uc3QgZGVmYXVsdHM6IFtzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZF1bXSA9IFtdO1xuXG4gICAgICAgICAgZm9yIChjb25zdCBlbnYgb2YgZW52Q29uZmlnKSB7XG4gICAgICAgICAgICBkZWZhdWx0cy5wdXNoKFtcbiAgICAgICAgICAgICAgZW52Lm5hbWUsXG4gICAgICAgICAgICAgIGlzU3RyaW5nKGVudi5kZWZhdWx0KVxuICAgICAgICAgICAgICAgID8gZW52LmRlZmF1bHRcbiAgICAgICAgICAgICAgICA6IGlzRGVmaW5lZChlbnYuZGVmYXVsdClcbiAgICAgICAgICAgICAgICA/IGF3YWl0IGVudi5kZWZhdWx0KClcbiAgICAgICAgICAgICAgICA6IHZvaWQgMCxcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGRlZmF1bHRFbnYgPSBkZWZhdWx0c1xuICAgICAgICAgICAgLmZpbHRlcigoZCkgPT4gZFsxXSlcbiAgICAgICAgICAgIC5tYXAoKGQpID0+IGAke2RbMF19PSR7ZFsxXX1gKVxuICAgICAgICAgICAgLmpvaW4oXCJcXG5cIik7XG5cbiAgICAgICAgICBpZiAoIWRlZmF1bHRFbnYpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihkZXNjcmlwdGlvbmBcbiAgICAgICAgICAgICAgVGhlcmUgYXJlIG5vIGRlZmF1bHRzIGF2YWlsYWJsZSBmb3IgdGhpcyBlbnYuY29uZmlnLiBTbyB3ZSBjYW4gbm90XG4gICAgICAgICAgICAgIGdlbmVyYXRlIGFuIGVudiBmaWxlIHlvdS4gUGxlYXNlIHJldmlldyB0aGUgZW52LmNvbmZpZy50cyBmaWxlIGFuZFxuICAgICAgICAgICAgICBwcm9wZXJseSBzZXQgdGhlIGRlZmF1bHQgdmFsdWVzIGZvciB0aGUgcmVxdWlyZWQgZW52aXJvbm1lbnRcbiAgICAgICAgICAgICAgdmFyaWFibGVzLlxuICAgICAgICAgICAgYCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgZW52RmlsZVBhdGggPSBwYXRoLnJlc29sdmUoXCIuZW52XCIpO1xuXG4gICAgICAgICAgY29uc3QgZGlkV3JpdGUgPSBhd2FpdCBwcm9tcHRPdmVycmlkZUZpbGUoXG4gICAgICAgICAgICBlbnZGaWxlUGF0aCxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uYFxuICAgICAgICAgICAgICBUaGVyZSBhcHBlYXJzIHRvIGFscmVhZHkgYmUgYSAuZW52IGZpbGUuXG4gICAgICAgICAgICAgIFdvdWxkIHlvdSBsaWtlIHRvIGFkZCB0aGUgbWlzc2luZyBkZWZhdWx0cyB0byBpdD9cbiAgICAgICAgICAgIGAsXG4gICAgICAgICAgICAoKSA9PiB7fSxcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBuZXcgZW52IGZpbGVcbiAgICAgICAgICAgICgpID0+IGZzLndyaXRlRmlsZShlbnZGaWxlUGF0aCwgZGVmYXVsdEVudiksXG5cbiAgICAgICAgICAgIC8vIFdlIHdpbGwgYWRkIHRoZSBlbnYgcGFyYW1zIHRvIHRoZSBleGlzdGluZyBlbnYgZmlsZSBpbnN0ZWFkIG9mXG4gICAgICAgICAgICAvLyBvdmVycmlkZSBpdFxuICAgICAgICAgICAgKCkgPT4ge1xuICAgICAgICAgICAgICBmcy5hcHBlbmRGaWxlU3luYyhlbnZGaWxlUGF0aCwgYFxcbiR7ZGVmYXVsdEVudn1gKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmYWxzZVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBpZiAoIWRpZFdyaXRlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICBcIkRpZCBub3Qgd3JpdGUgdGhlIC5lbnYgZmlsZS4gUGxlYXNlIGNvcnJlY3QgdGhlIGVudiBhbmQgdHJ5IGFnYWluLlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENvbnN1bWUgdGhlIC5lbnYgZmlsZSBhZ2FpbiBhbmQgc2VlIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZVxuICAgICAgICAgIC8vIGVudmlyb25tZW50XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgXCJBdHRlbXB0aW5nIHRvIGJ1aWxkIHRoZSBlbnYgYWdhaW4gYW5kIGNvbnRpbnVlIHdpdGggdGhlIGNvbW1hbmQuLi5cIlxuICAgICAgICAgICk7XG5cbiAgICAgICAgICByZXR1cm4gY29uZmlnRW52KGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKGRlc2NyaXB0aW9uYFxuICAgICAgTm8gJHtjaGFsay5jeWFuQnJpZ2h0Qm9sZChcbiAgICAgICAgXCJlbnYuY29uZmlnLnRzXCJcbiAgICAgICl9IGZpbGUgZm91bmQuIEVudmlyb25tZW50IHdpbGwgbm90IGJlIHZhbGlkYXRlZC5cbiAgICBgKTtcbiAgfVxufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgY2hhbGsgfSBmcm9tIFwiLi9jaGFsay5qc1wiO1xuaW1wb3J0IHsgcGFyc2VQcm9wcyB9IGZyb20gXCIuL3BhcnNlLXByb3BzLmpzXCI7XG5cbi8qKlxuICogQ3VzdG9tIGRvdGVudiByb3V0aW5lIHRvIHJlZHVjZSBkZXBlbmRlbmNpZXMuXG4gKlxuICogVGhpcyB0YWtlcyBpbiB0aGUgcHJvamVjdCdzIC5lbnYgZmlsZSBhbmQgYXBwbGllcyB0aGUgdmFsdWVzIHRoZXJlaW4gdG8gdGhlXG4gKiBwcm9jZXNzLmVudiBvYmplY3QuXG4gKlxuICogVGhpcyBPTkxZIHN1cHBvcnRzIHNpbXBsZSBrZXkvdmFsdWUgcGFpcnMgYW5kIGRvZXMgTk9UIHN1cHBvcnQgYW55IGNvbXBsZXhcbiAqIHByb3BzIGZpbGUgc3RydWN0dXJlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRvdGVudih0YXJnZXRGaWxlPzogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKHBhdGgucmVzb2x2ZShcIi5lbnZcIikpKSByZXR1cm47XG4gICAgLy8gUmVhZCB0aGUgLmVudiBmaWxlXG4gICAgY29uc3QgY29udGVudHMgPSBmcy5yZWFkRmlsZVN5bmMoXG4gICAgICBwYXRoLnJlc29sdmUodGFyZ2V0RmlsZSB8fCBcIi5lbnZcIiksXG4gICAgICBcInV0ZjhcIlxuICAgICk7XG4gICAgLy8gUGFyc2UgdGhlIGZpbGVcbiAgICBjb25zdCBwcm9wcyA9IHBhcnNlUHJvcHMoY29udGVudHMpO1xuXG4gICAgLy8gQXBwbHkgb25seSBzaW1wbGUga2V5IHZhbHVlIHBhaXJzIHRvIHByb2Nlc3MuZW52XG4gICAgT2JqZWN0LmVudHJpZXMocHJvcHMpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBwcm9jZXNzLmVudltrZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBwcm9jZXNzLmVudltrZXldID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcImJvb2xlYW5cIikge1xuICAgICAgICBwcm9jZXNzLmVudltrZXldID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBjaGFsay5yZWQoXG4gICAgICAgICAgYEVycm9yIHJlYWRpbmcgLmVudiBmaWxlOlxcbmAsXG4gICAgICAgICAgY2hhbGsueWVsbG93KGVyci5zdGFjayB8fCBlcnIubWVzc2FnZSlcbiAgICAgICAgKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbiIsCiAgICAidHlwZSBWYWx1ZSA9IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW47XG50eXBlIFBhcnNlUmVzdWx0ID0gUmVjb3JkPHN0cmluZywgVmFsdWUgfCBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT4+O1xuXG4vKipcbiAqIFRoaXMgcGFyc2VzIGEgcHJvcHMgZmlsZSBpbnRvIGEgbWFwIG9mIGtleS92YWx1ZSBwYWlycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUHJvcHMoY29udGVudHM6IHN0cmluZyk6IFBhcnNlUmVzdWx0IHtcbiAgY29uc3QgbGluZXMgPSBjb250ZW50cy5zcGxpdCgvXFxyP1xcbi8pO1xuXG4gIGNvbnN0IHJlc3VsdDogUGFyc2VSZXN1bHQgPSB7fTtcbiAgbGV0IGN1cnJlbnRTZWN0aW9uOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgbGV0IGN1cnJlbnRPYmplY3Q6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIGxpbmVzLmZvckVhY2goKGxpbmUpID0+IHtcbiAgICBsaW5lID0gbGluZS50cmltKCk7XG5cbiAgICAvLyBJZ25vcmUgZW1wdHkgbGluZXMgYW5kIGNvbW1lbnRzXG4gICAgaWYgKGxpbmUgPT09IFwiXCIgfHwgbGluZS5zdGFydHNXaXRoKFwiI1wiKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBhIG5ldyBzZWN0aW9uXG4gICAgaWYgKGxpbmUuZW5kc1dpdGgoXCJ7XCIpKSB7XG4gICAgICBjb25zdCBzZWN0aW9uTmFtZSA9IGxpbmUuc3BsaXQoL1xccysvKVswXTtcbiAgICAgIGN1cnJlbnRTZWN0aW9uID0gc2VjdGlvbk5hbWU7XG4gICAgICByZXN1bHRbY3VycmVudFNlY3Rpb25dID0ge307XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIHRoZSBlbmQgb2YgYSBzZWN0aW9uXG4gICAgaWYgKGxpbmUgPT09IFwifVwiKSB7XG4gICAgICBjdXJyZW50U2VjdGlvbiA9IG51bGw7XG4gICAgICBjdXJyZW50T2JqZWN0ID0gbnVsbDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQYXJzZSBrZXktdmFsdWUgcGFpcnNcbiAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14oW1xcdy5dKylcXHMqPVxccyooLiopJC8pO1xuICAgIGlmIChtYXRjaCkge1xuICAgICAgY29uc3Qga2V5ID0gbWF0Y2hbMV07XG4gICAgICBsZXQgdmFsdWU6IHN0cmluZyB8IG51bWJlciB8IGJvb2xlYW4gPSBtYXRjaFsyXTtcblxuICAgICAgLy8gQ29udmVydCB2YWx1ZXMgdG8gdGhlIGFwcHJvcHJpYXRlIHR5cGVcbiAgICAgIGlmICghaXNOYU4ocGFyc2VGbG9hdCh2YWx1ZSkpKSB7XG4gICAgICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBcInRydWVcIikge1xuICAgICAgICB2YWx1ZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHZhbHVlID09PSBcImZhbHNlXCIpIHtcbiAgICAgICAgdmFsdWUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIHRoZSBrZXktdmFsdWUgcGFpciB0byB0aGUgcmVzdWx0XG4gICAgICBpZiAoY3VycmVudE9iamVjdCkge1xuICAgICAgICAoXG4gICAgICAgICAgcmVzdWx0W2N1cnJlbnRTZWN0aW9uID8/IFwibnVsbFwiXSBhcyB1bmtub3duIGFzIFJlY29yZDxcbiAgICAgICAgICAgIHN0cmluZyxcbiAgICAgICAgICAgIFJlY29yZDxzdHJpbmcsIFZhbHVlPlxuICAgICAgICAgID5cbiAgICAgICAgKVtjdXJyZW50T2JqZWN0XVtrZXldID0gdmFsdWU7XG4gICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTZWN0aW9uKSB7XG4gICAgICAgIChyZXN1bHRbY3VycmVudFNlY3Rpb25dIGFzIFJlY29yZDxzdHJpbmcsIFZhbHVlPilba2V5XSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBhIG5ldyBvYmplY3QgaW4gYSBzZWN0aW9uXG4gICAgY29uc3Qgb2JqZWN0TWF0Y2ggPSBsaW5lLm1hdGNoKC9eKFtcXHcuXSspXFwuKFtcXHcuXSspXFxzKj1cXHMqKC4qKSQvKTtcbiAgICBpZiAob2JqZWN0TWF0Y2gpIHtcbiAgICAgIGNvbnN0IHNlY3Rpb25OYW1lID0gb2JqZWN0TWF0Y2hbMV07XG4gICAgICBjb25zdCBvYmplY3ROYW1lID0gb2JqZWN0TWF0Y2hbMl07XG4gICAgICBjb25zdCBrZXkgPSBvYmplY3RNYXRjaFszXTtcblxuICAgICAgaWYgKCFyZXN1bHRbc2VjdGlvbk5hbWVdKSB7XG4gICAgICAgIHJlc3VsdFtzZWN0aW9uTmFtZV0gPSB7fTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAhKFxuICAgICAgICAgIHJlc3VsdFtzZWN0aW9uTmFtZV0gYXMgdW5rbm93biBhcyBSZWNvcmQ8XG4gICAgICAgICAgICBzdHJpbmcsXG4gICAgICAgICAgICBSZWNvcmQ8c3RyaW5nLCBWYWx1ZT5cbiAgICAgICAgICA+XG4gICAgICAgIClbb2JqZWN0TmFtZV1cbiAgICAgICkge1xuICAgICAgICAoXG4gICAgICAgICAgcmVzdWx0W3NlY3Rpb25OYW1lXSBhcyB1bmtub3duIGFzIFJlY29yZDxcbiAgICAgICAgICAgIHN0cmluZyxcbiAgICAgICAgICAgIFJlY29yZDxzdHJpbmcsIFZhbHVlPlxuICAgICAgICAgID5cbiAgICAgICAgKVtvYmplY3ROYW1lXSA9IHt9O1xuICAgICAgfVxuXG4gICAgICAoKHJlc3VsdFtzZWN0aW9uTmFtZV0gYXMgYW55KVtvYmplY3ROYW1lXSBhcyBhbnkpW2tleV0gPSBudWxsO1xuICAgICAgY3VycmVudFNlY3Rpb24gPSBzZWN0aW9uTmFtZTtcbiAgICAgIGN1cnJlbnRPYmplY3QgPSBvYmplY3ROYW1lO1xuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc29sZS5lcnJvcihgVW5yZWNvZ25pemVkIGxpbmU6ICR7bGluZX1gKTtcbiAgfSk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbiIsCiAgICAiaW1wb3J0IGZzIGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IGlucXVpcmVyIGZyb20gXCJpbnF1aXJlclwiO1xuaW1wb3J0IHsgc3RyaXBJbmRlbnQgfSBmcm9tIFwiY29tbW9uLXRhZ3NcIjtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSB3cmFwcGVyIGFyb3VuZCBjdXJyZW50IHByb21wdCBsaWJyYXJ5IG9mIGNob2ljZSB0byBwcmVzZW50IGFcbiAqIGNvbmZpcm1hdGlvbiBkaWFsb2cgZm9yIHdoZW4gYSBmaWxlIHBhdGggZXhpc3RzLiBJZiB0aGUgZmlsZSBkb2VzIG5vdCBleGlzdCxcbiAqIHRoZXJlIHdpbGwgYmUgbm8gcHJvbXB0LlxuICpcbiAqIEFwcGxpZXMgc3RyaXBJbmRlbnQgdG8gdGhlIGlucHV0IG1lc3NhZ2UuXG4gKlxuICogUmV0dXJucyB0aGUgdHJ1ZSBmYWxzZSB2YWx1ZSBvZiB0aGUgcHJvbXB0LlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcHJvbXB0T3ZlcnJpZGVGaWxlKFxuICBmaWxlUGF0aDogc3RyaW5nLFxuICBtZXNzYWdlOiBzdHJpbmcsXG4gIG9uV3JpdGU6IChwYXRoOiBzdHJpbmcpID0+IHZvaWQsXG4gIG9uTmV3PzogKHBhdGg6IHN0cmluZykgPT4gdm9pZCxcbiAgb25PdmVycmlkZT86IChwYXRoOiBzdHJpbmcpID0+IHZvaWQsXG4gIGRlZmF1bHRWYWx1ZT86IGJvb2xlYW5cbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBsZXQgb3V0ID0gZGVmYXVsdFZhbHVlIHx8IGZhbHNlO1xuXG4gIGlmIChmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkge1xuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSBhd2FpdCBpbnF1aXJlci5wcm9tcHQ8e1xuICAgICAgcmVzdWx0OiBib29sZWFuO1xuICAgIH0+KFtcbiAgICAgIHtcbiAgICAgICAgdHlwZTogXCJjb25maXJtXCIsXG4gICAgICAgIG5hbWU6IFwicmVzdWx0XCIsXG4gICAgICAgIG1lc3NhZ2U6IHN0cmlwSW5kZW50YCR7bWVzc2FnZX1gLFxuICAgICAgICBkZWZhdWx0OiBkZWZhdWx0VmFsdWUsXG4gICAgICB9LFxuICAgIF0pO1xuXG4gICAgLy8gV2hlbiB5ZXMvdHJ1ZSBpcyBzZWxlY3RlZCwgcnVuIHRoZSBvbkNvbmZpcm1lZCBjYWxsYmFja1xuICAgIGlmIChyZXN1bHQpIHtcbiAgICAgIG9uV3JpdGUoZmlsZVBhdGgpO1xuICAgICAgb25PdmVycmlkZT8uKGZpbGVQYXRoKTtcbiAgICB9XG5cbiAgICBvdXQgPSByZXN1bHQ7XG4gIH0gZWxzZSB7XG4gICAgb25Xcml0ZShmaWxlUGF0aCk7XG4gICAgb25OZXc/LihmaWxlUGF0aCk7XG4gIH1cblxuICByZXR1cm4gb3V0O1xufVxuIiwKICAgICJpbXBvcnQgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgaW5xdWlyZXIgZnJvbSBcImlucXVpcmVyXCI7XG5pbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IHsgZXhlY0luc3RhbGwgfSBmcm9tIFwiLi4vbGliL2V4ZWMvZXhlYy1pbnN0YWxsLmpzXCI7XG5pbXBvcnQgeyBleGVjU3luYyB9IGZyb20gXCIuLi9saWIvZXhlYy9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IGZ1enp5U291cmNlIH0gZnJvbSBcIi4uL2xpYi91dGlsL2Z1enp5LXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgZ2V0UGFja2FnZU1hbmFnZXIgfSBmcm9tIFwiLi4vbGliL2V4ZWMvZ2V0LXBhY2thZ2UtbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgaXNQYWNrYWdlQXZhaWxhYmxlIH0gZnJvbSBcIi4uL2xpYi91dGlsL2lzLXBhY2thZ2UtYXZhaWxhYmxlLmpzXCI7XG5pbXBvcnQgeyB3YWl0IH0gZnJvbSBcIi4uL2xpYi91dGlsL3dhaXQuanNcIjtcblxuZXhwb3J0IGVudW0gRGVwZW5kZW5jeVJlc29sdXRpb24ge1xuICBJbnN0YWxsID0gXCJJbnN0YWxsIHRvIGN1cnJlbnQgcHJvamVjdFwiLFxuICBJbnN0YWxsT25jZSA9IFwiSW5zdGFsbCBvbmNlIHRvIGN1cnJlbnQgcHJvamVjdFwiLFxuICBJbnN0YWxsQWJvdmUgPSBcIkluc3RhbGwgaW4gcGFyZW50IGRpcmVjdG9yeSAoTWFrZXMgcGFja2FnZSBhdmFpbGFibGUgdG8gYWxsIHBlZXIgcHJvamVjdHMpXCIsXG4gIERvTm90aGluZyA9IFwiRG8gTm90aGluZyAodGhpcyB3aWxsIGVuZCB0aGlzIGN1cnJlbnQgcHJvY2VzcyBhcyB0aGUgcGFja2FnZSBpcyByZXF1aXJlZClcIixcbn1cblxuLyoqXG4gKiBUaGlzIGNoZWNrcyB0aGUgdGFyZ2V0IHByb2plY3QgZm9yIHRoZSBwcmVzZW5jZSBvZiBkZXBlbmRlbmNpZXMgdGhhdCBhcmVcbiAqIHJlcXVpcmVkIGJ1dCBhcmUgZGV0cmltZW50YWwgdG8gZXhwZXJpZW5jZSBhbmQgcGVyZm9ybWFuY2UgdG8gaW5jbHVkZSBhcyBhXG4gKiBkZXBlbmRlbmN5IG9mIHRoZSBwYWNrYWdlIGRpcmVjdGx5LlxuICpcbiAqIEFuIGV4YW1wbGUgb2Ygc3VjaCBkZXBlbmRlbmN5IHdvdWxkIGJlIHB1cHBldGVlciBhcyBoYXZpbmcgaXQgY2FuIHRyaWdnZXJcbiAqIGZ1bGwgaW5zdGFsbHMgYW5kIGNvbXBpbGF0aW9uIG9mIHRoZSBkZXBlbmRlbmN5IHBlciBwcm9qZWN0IHRoYXQgbmVlZHMgaXQuXG4gKlxuICogU28sIHRoaXMgd2lsbCByZXF1ZXN0IHRoZSBkZXBlbmRlbmN5IHRvIGJlIGluc3RhbGxlZCBhcyBhIG9uZSB0aW1lIHRvIHRoZVxuICogY3VycmVudCBwcm9qZWN0IG9yIHJlcXVlc3QgdG8gYmUgaW5zdGFsbGVkIGFib3ZlIHRoZSB0YXJnZXQgcHJvamVjdCB0byBjYXVzZVxuICogaXQgdG8gYmUgYXZhaWxhYmxlIHRvIHBlZXIgcHJvamVjdHMuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlbnN1cmVEZXBlbmRlbmNpZXMoXG4gIGRlcGVuZGVuY2llcz86IHN0cmluZ1tdLFxuICBmb3JjZVJlc29sdXRpb24/OiBEZXBlbmRlbmN5UmVzb2x1dGlvblxuKSB7XG4gIGNvbnN0IHJlcXVpcmVkRGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzIHx8IFtcInB1cHBldGVlclwiXTtcblxuICBmb3IgKGNvbnN0IGRlcGVuZGVuY3kgb2YgcmVxdWlyZWREZXBlbmRlbmNpZXMpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDaGVja2luZyBvbiBkZXBlbmRlbmN5IGF2YWlsYWJpbGl0eTpcIiwgZGVwZW5kZW5jeSk7XG4gICAgY29uc3QgaXNBdmFpbGFibGUgPSBhd2FpdCBpc1BhY2thZ2VBdmFpbGFibGUoZGVwZW5kZW5jeSk7XG5cbiAgICBpZiAoIWlzQXZhaWxhYmxlKSB7XG4gICAgICBsZXQgcmVzb2x1dGlvbiA9IGZvcmNlUmVzb2x1dGlvbjtcblxuICAgICAgaWYgKCFyZXNvbHV0aW9uKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGlucXVpcmVyLnByb21wdDx7XG4gICAgICAgICAgcmVzb2x1dGlvbjogRGVwZW5kZW5jeVJlc29sdXRpb247XG4gICAgICAgIH0+KFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiBcImF1dG9jb21wbGV0ZVwiLFxuICAgICAgICAgICAgbmFtZTogXCJyZXNvbHV0aW9uXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBgSG93IGRvIHlvdSB3YW50IHRvIHJlc29sdmUgdGhlIG1pc3NpbmcgcGFja2FnZSBcIiR7ZGVwZW5kZW5jeX1cIjpgLFxuICAgICAgICAgICAgc291cmNlOiBmdXp6eVNvdXJjZShbXG4gICAgICAgICAgICAgIERlcGVuZGVuY3lSZXNvbHV0aW9uLkluc3RhbGxPbmNlLFxuICAgICAgICAgICAgICBEZXBlbmRlbmN5UmVzb2x1dGlvbi5JbnN0YWxsQWJvdmUsXG4gICAgICAgICAgICAgIERlcGVuZGVuY3lSZXNvbHV0aW9uLkRvTm90aGluZyxcbiAgICAgICAgICAgIF0pLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0pO1xuXG4gICAgICAgIHJlc29sdXRpb24gPSByZXN1bHQucmVzb2x1dGlvbjtcbiAgICAgIH1cblxuICAgICAgc3dpdGNoIChyZXNvbHV0aW9uKSB7XG4gICAgICAgIGNhc2UgRGVwZW5kZW5jeVJlc29sdXRpb24uSW5zdGFsbDpcbiAgICAgICAgICBhd2FpdCBleGVjSW5zdGFsbChbZGVwZW5kZW5jeV0sIFwiRVwiKTtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIERlcGVuZGVuY3lSZXNvbHV0aW9uLkluc3RhbGxPbmNlOlxuICAgICAgICAgIGV4ZWNJbnN0YWxsKFtkZXBlbmRlbmN5XSwgXCJFXCIsIHRydWUpO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgRGVwZW5kZW5jeVJlc29sdXRpb24uSW5zdGFsbEFib3ZlOiB7XG4gICAgICAgICAgLy8gU2F2ZSB0aGUgY3VycmVudCBjd2RcbiAgICAgICAgICBjb25zdCBjd2QgPSBwcm9jZXNzLmN3ZCgpO1xuICAgICAgICAgIC8vIENoYW5nZSBkaXJlY3RvcnkgdG8gdGhlIHBhcmVudCBkaXJlY3RvcnkuXG4gICAgICAgICAgcHJvY2Vzcy5jaGRpcihcIi4uXCIpO1xuICAgICAgICAgIGNvbnN0IHBhY2thZ2VNYW5hZ2VyID0gYXdhaXQgZ2V0UGFja2FnZU1hbmFnZXIoKTtcblxuICAgICAgICAgIC8vIENoZWNrIGZvciBhIHBhY2thZ2UuanNvblxuICAgICAgICAgIGlmICghZnMuZXhpc3RzU3luYyhwYXRoLnJlc29sdmUoXCJwYWNrYWdlLmpzb25cIikpKSB7XG4gICAgICAgICAgICAvLyBQZXJmb3JtIGFuIGluaXQgdG8gbWFrZSB0aGUgcGFja2FnZVxuICAgICAgICAgICAgZXhlY1N5bmMocGFja2FnZU1hbmFnZXJbMF0sIFtcImluaXRcIiwgXCIteVwiXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSW5zdGFsbCB0aGUgZGVwZW5kZW5jeVxuICAgICAgICAgIGF3YWl0IGV4ZWNJbnN0YWxsKFtkZXBlbmRlbmN5XSwgXCJFXCIpO1xuICAgICAgICAgIC8vIFJldHVybiB0byBvcmlnaW5hbCBjd2RcbiAgICAgICAgICBwcm9jZXNzLmNoZGlyKGN3ZCk7XG4gICAgICAgICAgLy8gUGVyZm9ybSBhbiBhd2FpdCB0byBsZXQgZmlsZSBzeXN0ZW0gZmx1c2hcbiAgICAgICAgICBhd2FpdCB3YWl0KDEwMCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsCiAgICAiaW1wb3J0IHsgZXhlY1N5bmMgfSBmcm9tIFwiLi9leGVjLXN5bmMuanNcIjtcbmltcG9ydCB7IGdldFBhY2thZ2VNYW5hZ2VyIH0gZnJvbSBcIi4vZ2V0LXBhY2thZ2UtbWFuYWdlci5qc1wiO1xuaW1wb3J0IHsgaXNEZWZpbmVkIH0gZnJvbSBcIi4uL3V0aWwvdHlwZXMuanNcIjtcblxuLyoqXG4gKiBFeGVjdXRlcyBhbiBgbnBtIGluc3RhbGwgW3BhY2thZ2VzLi4uXWAgaW4gdGhlIGN1cnJlbnQgY29udGV4dC5cbiAqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGNvbW1hbmQgc3VjY2VlZGVkLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY0luc3RhbGwoXG4gIHBhY2thZ2VzOiBzdHJpbmdbXSxcbiAgbW9kZT86IFwiRFwiIHwgXCJERVwiIHwgXCJFXCIsXG4gIG5vU2F2ZT86IGJvb2xlYW5cbikge1xuICBjb25zdCBtYW5hZ2VyID0gYXdhaXQgZ2V0UGFja2FnZU1hbmFnZXIoKTtcbiAgY29uc3QgdG9JbnN0YWxsID0gcGFja2FnZXMuZmlsdGVyKGlzRGVmaW5lZCk7XG4gIGNvbnNvbGUud2FybihcIldJTEwgRk9SQ0UgSU5TVEFMTDpcIiwgbWFuYWdlclswXSA9PT0gXCJidW5cIiA/IFwiLS1mb3JjZVwiIDogbnVsbCk7XG5cbiAgcmV0dXJuIGF3YWl0IGV4ZWNTeW5jKFxuICAgIG1hbmFnZXJbMF0sXG4gICAgW1xuICAgICAgXCJpXCIsXG4gICAgICBtYW5hZ2VyWzBdID09PSBcImJ1blwiID8gXCItLWZvcmNlXCIgOiBudWxsLFxuICAgICAgbm9TYXZlID8gXCItLW5vLXNhdmVcIiA6IG51bGwsXG4gICAgICBtb2RlID8gYC0ke21vZGV9YCA6IG51bGwsXG4gICAgICAuLi50b0luc3RhbGwsXG4gICAgXS5maWx0ZXIoaXNEZWZpbmVkKVxuICApO1xufVxuIiwKICAgICJpbXBvcnQgZnV6enkgZnJvbSBcImZ1enp5XCI7XG5cbmV4cG9ydCBjb25zdCBmdXp6eVNvdXJjZSA9XG4gIChvcHRpb25zOiBTZXQ8c3RyaW5nPiB8IHN0cmluZ1tdKSA9PiBhc3luYyAoXzogdW5rbm93biwgaW5wdXQ6IHN0cmluZykgPT4ge1xuICAgIGxldCBvcHRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKG9wdGlvbnMgaW5zdGFuY2VvZiBTZXQpIHtcbiAgICAgIG9wdHMgPSBBcnJheS5mcm9tKG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcHRzID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICByZXR1cm4gZnV6enkuZmlsdGVyKGlucHV0IHx8IFwiXCIsIG9wdHMpLm1hcCgoZSkgPT4gZS5zdHJpbmcpO1xuICB9O1xuIiwKICAgICIvKipcbiAqIENoZWNrcyBpZiB0aGUgcmVxdWVzdGVkIHBhY2thZ2UgaXMgYXZhaWxhYmxlIHRvIHRoZSB0YXJnZXQgcHJvamVjdC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzUGFja2FnZUF2YWlsYWJsZShwYWNrYWdlTmFtZTogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgaW1wb3J0KHBhY2thZ2VOYW1lKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcbiAgICAgIFwiUmVxdWVzdGVkIHBhY2thZ2UgaXMgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGN1cnJlbnQgcHJvamVjdDpcIixcbiAgICAgIHBhY2thZ2VOYW1lXG4gICAgKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cbiIKICBdLAogICJtYXBwaW5ncyI6ICI7O3FsQkFBYSxpQkFBUSxDQUNuQixLQUFNLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUNyRCxJQUFLLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUNwRCxPQUFRLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN2RCxNQUFPLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN0RCxLQUFNLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUNyRCxRQUFTLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUN4RCxXQUFZLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUMzRCxVQUFXLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUssR0FBRyxXQUMxRCxhQUFjLElBQUksSUFBbUIsV0FBVyxFQUFLLEtBQUss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QUMsSUFBZSxDQUNyQixRQUFRLEtBQUssc0NBQXNDLEVBQ25ELFFBQVEsS0FBSyxFQUFJLE9BQVMsRUFBSSxPQUFPLEVBQ3JDLFFBQVEsS0FBSyxDQUFDLEVBQ2YsRUFDSixFQUVILElBQU0sR0FBUSxFQUFRLFFBQVEsT0FBTyxFQUFFLFlBQ3JDO0FBQUE7QUFBQSxHQUdGLEVBRUEsR0FDRyxRQUFRLE9BQU8sRUFDZixZQUNDO0FBQUE7QUFBQTtBQUFBLEtBSUYsRUFDQyxPQUFPLFNBQVksQ0FDbEIsQ0FBQywrQ0FDRSxRQUFRLEVBQ1IsTUFBTSxDQUFDLElBQWUsQ0FDckIsUUFBUSxLQUFLLHlDQUF5QyxFQUN0RCxRQUFRLEtBQUssRUFBSSxPQUFTLEVBQUksT0FBTyxFQUNyQyxRQUFRLEtBQUssQ0FBQyxFQUNmLEVBQ0osRUFFSCxJQUFNLEdBQUssRUFBUSxRQUFRLElBQUksRUFBRSxZQUMvQjtBQUFBO0FBQUE7QUFBQSxHQUlGLEVBRUEsR0FBRyxRQUFRLEtBQUssRUFDYixZQUNDO0FBQUE7QUFBQTtBQUFBLEtBSUYsRUFDQyxPQUFPLFNBQVksQ0FDbEIsQ0FBQywrQ0FBa0MsUUFBUSxFQUFFLEVBQUUsTUFBTSxDQUFDLElBQWUsQ0FDbkUsUUFBUSxLQUFLLGdDQUFnQyxFQUM3QyxRQUFRLEtBQUssRUFBSSxPQUFTLEVBQUksT0FBTyxFQUNyQyxRQUFRLEtBQUssQ0FBQyxFQUNmLEVBQ0YsRUFFSCxJQUFNLEdBQUssRUFDUixRQUFRLElBQUksRUFDWixPQUNDLG9CQUNBO0FBQUE7QUFBQSxLQUdGLEVBQ0MsT0FDQyxxQkFDQTtBQUFBO0FBQUEsR0FHRixFQUNDLE9BQ0MseUJBQ0E7QUFBQTtBQUFBLEdBR0YsRUFFRixHQUFHLFFBQVEsU0FBUyxFQUNqQixZQUNDO0FBQUE7QUFBQTtBQUFBLEtBSUYsRUFDQyxPQUFPLFNBQVksQ0FDbEIsTUFBUSxVQUFTLFdBQVUsZ0JBQWlCLEdBQU0sUUFBUSxJQUFJLEVBQUUsS0FNaEUsSUFBSyxJQUFZLElBQWEsRUFDNUIsUUFBUSxLQUNOLG9FQUNGLEVBQ0EsUUFBUSxLQUFLLENBQUMsRUFJaEIsTUFBTSxHQUFtQixFQUFFLE1BQU0sSUFBTSxRQUFRLEtBQUssQ0FBQyxDQUFDLEVBQ3RELFFBQVEsS0FBSyx5Q0FBeUMsR0FFckQsK0NBQ0UsUUFBUSxFQUFTLEVBQVUsQ0FBWSxFQUN2QyxNQUFNLENBQUMsSUFBZSxDQUNyQixRQUFRLEtBQUssd0NBQXdDLEVBQ3JELFFBQVEsS0FBSyxFQUFJLE9BQVMsRUFBSSxPQUFPLEVBQ3JDLFFBQVEsS0FBSyxDQUFDLEVBQ2YsRUFDSixFQVNILEdBQUkiLAogICJkZWJ1Z0lkIjogIjVGOTBERENDQzU1QkNCQUQ2NDc1NkUyMTY0NzU2RTIxIiwKICAibmFtZXMiOiBbXQp9
