// @bun
var T0=Object.create;var{defineProperty:j1,getPrototypeOf:j0,getOwnPropertyNames:U0}=Object;var H0=Object.prototype.hasOwnProperty;var P0=(_,$,z)=>{z=_!=null?T0(j0(_)):{};const B=$||!_||!_.__esModule?j1(z,"default",{value:_,enumerable:!0}):z;for(let G of U0(_))if(!H0.call(B,G))j1(B,G,{get:()=>_[G],enumerable:!0});return B};var A=(_,$)=>()=>($||_(($={exports:{}}).exports,$),$.exports);var H1=A((m_,$1)=>{var y=function(){},C0=function(_,$,z){this.fn=_,this.context=$,this.once=z||!1},U1=function(_,$,z,B,G){if(typeof z!=="function")throw new TypeError("The listener must be a function");var X=new C0(z,B||_,G),Q=F?F+$:$;if(!_._events[Q])_._events[Q]=X,_._eventsCount++;else if(!_._events[Q].fn)_._events[Q].push(X);else _._events[Q]=[_._events[Q],X];return _},i=function(_,$){if(--_._eventsCount===0)_._events=new y;else delete _._events[$]},L=function(){this._events=new y,this._eventsCount=0},w0=Object.prototype.hasOwnProperty,F="~";if(Object.create){if(y.prototype=Object.create(null),!new y().__proto__)F=!1}L.prototype.eventNames=function _(){var $=[],z,B;if(this._eventsCount===0)return $;for(B in z=this._events)if(w0.call(z,B))$.push(F?B.slice(1):B);if(Object.getOwnPropertySymbols)return $.concat(Object.getOwnPropertySymbols(z));return $};L.prototype.listeners=function _($){var z=F?F+$:$,B=this._events[z];if(!B)return[];if(B.fn)return[B.fn];for(var G=0,X=B.length,Q=new Array(X);G<X;G++)Q[G]=B[G].fn;return Q};L.prototype.listenerCount=function _($){var z=F?F+$:$,B=this._events[z];if(!B)return 0;if(B.fn)return 1;return B.length};L.prototype.emit=function _($,z,B,G,X,Q){var K=F?F+$:$;if(!this._events[K])return!1;var Z=this._events[K],W=arguments.length,J,Y;if(Z.fn){if(Z.once)this.removeListener($,Z.fn,void 0,!0);switch(W){case 1:return Z.fn.call(Z.context),!0;case 2:return Z.fn.call(Z.context,z),!0;case 3:return Z.fn.call(Z.context,z,B),!0;case 4:return Z.fn.call(Z.context,z,B,G),!0;case 5:return Z.fn.call(Z.context,z,B,G,X),!0;case 6:return Z.fn.call(Z.context,z,B,G,X,Q),!0}for(Y=1,J=new Array(W-1);Y<W;Y++)J[Y-1]=arguments[Y];Z.fn.apply(Z.context,J)}else{var I=Z.length,N;for(Y=0;Y<I;Y++){if(Z[Y].once)this.removeListener($,Z[Y].fn,void 0,!0);switch(W){case 1:Z[Y].fn.call(Z[Y].context);break;case 2:Z[Y].fn.call(Z[Y].context,z);break;case 3:Z[Y].fn.call(Z[Y].context,z,B);break;case 4:Z[Y].fn.call(Z[Y].context,z,B,G);break;default:if(!J)for(N=1,J=new Array(W-1);N<W;N++)J[N-1]=arguments[N];Z[Y].fn.apply(Z[Y].context,J)}}}return!0};L.prototype.on=function _($,z,B){return U1(this,$,z,B,!1)};L.prototype.once=function _($,z,B){return U1(this,$,z,B,!0)};L.prototype.removeListener=function _($,z,B,G){var X=F?F+$:$;if(!this._events[X])return this;if(!z)return i(this,X),this;var Q=this._events[X];if(Q.fn){if(Q.fn===z&&(!G||Q.once)&&(!B||Q.context===B))i(this,X)}else{for(var K=0,Z=[],W=Q.length;K<W;K++)if(Q[K].fn!==z||G&&!Q[K].once||B&&Q[K].context!==B)Z.push(Q[K]);if(Z.length)this._events[X]=Z.length===1?Z[0]:Z;else i(this,X)}return this};L.prototype.removeAllListeners=function _($){var z;if($){if(z=F?F+$:$,this._events[z])i(this,z)}else this._events=new y,this._eventsCount=0;return this};L.prototype.off=L.prototype.removeListener;L.prototype.addListener=L.prototype.on;L.prefixed=F;L.EventEmitter=L;if(typeof $1!=="undefined")$1.exports=L});var w1=A((u_,P1)=>{P1.exports=function _($,z){if(z=z.split(":")[0],$=+$,!$)return!1;switch(z){case"http":case"ws":return $!==80;case"https":case"wss":return $!==443;case"ftp":return $!==21;case"gopher":return $!==70;case"file":return!1}return $!==0}});var n=A((D1)=>{var R0=function(_){return!!~_.indexOf(":")},P=D1,D0=import.meta.require("url"),C1=import.meta.require("util")._extend,S0=w1(),E0=/(^|,)\s*upgrade\s*($|,)/i,z1=/^https|wss/;P.isSSL=z1;P.setupOutgoing=function(_,$,z,B){if(_.port=$[B||"target"].port||(z1.test($[B||"target"].protocol)?443:80),["host","hostname","socketPath","pfx","key","passphrase","cert","ca","ciphers","secureProtocol"].forEach(function(K){_[K]=$[B||"target"][K]}),_.method=$.method||z.method,_.headers=C1({},z.headers),$.headers)C1(_.headers,$.headers);if($.auth)_.auth=$.auth;if($.ca)_.ca=$.ca;if(z1.test($[B||"target"].protocol))_.rejectUnauthorized=typeof $.secure==="undefined"?!0:$.secure;if(_.agent=$.agent||!1,_.localAddress=$.localAddress,!_.agent){if(_.headers=_.headers||{},typeof _.headers.connection!=="string"||!E0.test(_.headers.connection))_.headers.connection="close"}var G=$[B||"target"],X=G&&$.prependPath!==!1?G.path||"":"",Q=!$.toProxy?D0.parse(z.url).path||"":z.url;if(Q=!$.ignorePath?Q:"",_.path=P.urlJoin(X,Q),$.changeOrigin)_.headers.host=S0(_.port,$[B||"target"].protocol)&&!R0(_.host)?_.host+":"+_.port:_.host;return _};P.setupSocket=function(_){return _.setTimeout(0),_.setNoDelay(!0),_.setKeepAlive(!0,0),_};P.getPort=function(_){var $=_.headers.host?_.headers.host.match(/:(\d+)/):"";return $?$[1]:P.hasEncryptedConnection(_)?"443":"80"};P.hasEncryptedConnection=function(_){return Boolean(_.connection.encrypted||_.connection.pair)};P.urlJoin=function(){var _=Array.prototype.slice.call(arguments),$=_.length-1,z=_[$],B=z.split("?"),G;return _[$]=B.shift(),G=[_.filter(Boolean).join("/").replace(/\/+/g,"/").replace("http:/","http://").replace("https:/","https://")],G.push.apply(G,B),G.join("?")};P.rewriteCookieProperty=function _($,z,B){if(Array.isArray($))return $.map(function(G){return _(G,z,B)});return $.replace(new RegExp("(;\\s*"+B+"=)([^;]+)","i"),function(G,X,Q){var K;if(Q in z)K=z[Q];else if("*"in z)K=z["*"];else return G;if(K)return X+K;else return""})}});var f1=A((g_,R1)=>{var S1=import.meta.require("url"),E1=n(),f0=/^201|30(1|2|7|8)$/;/*!
 * Array of passes.
 *
 * A `pass` is just a function that is executed on `req, res, options`
 * so that you can easily add new checks while still keeping the base
 * flexible.
 */R1.exports={removeChunked:function _($,z,B){if($.httpVersion==="1.0")delete B.headers["transfer-encoding"]},setConnection:function _($,z,B){if($.httpVersion==="1.0")B.headers.connection=$.headers.connection||"close";else if($.httpVersion!=="2.0"&&!B.headers.connection)B.headers.connection=$.headers.connection||"keep-alive"},setRedirectHostRewrite:function _($,z,B,G){if((G.hostRewrite||G.autoRewrite||G.protocolRewrite)&&B.headers.location&&f0.test(B.statusCode)){var X=S1.parse(G.target),Q=S1.parse(B.headers.location);if(X.host!=Q.host)return;if(G.hostRewrite)Q.host=G.hostRewrite;else if(G.autoRewrite)Q.host=$.headers.host;if(G.protocolRewrite)Q.protocol=G.protocolRewrite;B.headers.location=Q.format()}},writeHeaders:function _($,z,B,G){var{cookieDomainRewrite:X,cookiePathRewrite:Q,preserveHeaderKeyCase:K}=G,Z,W=function(I,N){if(N==null)return;if(X&&I.toLowerCase()==="set-cookie")N=E1.rewriteCookieProperty(N,X,"domain");if(Q&&I.toLowerCase()==="set-cookie")N=E1.rewriteCookieProperty(N,Q,"path");z.setHeader(String(I).trim(),N)};if(typeof X==="string")X={"*":X};if(typeof Q==="string")Q={"*":Q};if(K&&B.rawHeaders!=null){Z={};for(var J=0;J<B.rawHeaders.length;J+=2){var Y=B.rawHeaders[J];Z[Y.toLowerCase()]=Y}}Object.keys(B.headers).forEach(function(I){var N=B.headers[I];if(K&&Z)I=Z[I]||I;W(I,N)})},writeStatusCode:function _($,z,B){if(B.statusMessage)z.statusCode=B.statusCode,z.statusMessage=B.statusMessage;else z.statusCode=B.statusCode}}});var h1=A((c_,k1)=>{var b0=function(_){if(_=String(_),_.length>100)return;var $=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(_);if(!$)return;var z=parseFloat($[1]),B=($[2]||"ms").toLowerCase();switch(B){case"years":case"year":case"yrs":case"yr":case"y":return z*h0;case"weeks":case"week":case"w":return z*k0;case"days":case"day":case"d":return z*C;case"hours":case"hour":case"hrs":case"hr":case"h":return z*k;case"minutes":case"minute":case"mins":case"min":case"m":return z*f;case"seconds":case"second":case"secs":case"sec":case"s":return z*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return z;default:return}},q0=function(_){var $=Math.abs(_);if($>=C)return Math.round(_/C)+"d";if($>=k)return Math.round(_/k)+"h";if($>=f)return Math.round(_/f)+"m";if($>=R)return Math.round(_/R)+"s";return _+"ms"},y0=function(_){var $=Math.abs(_);if($>=C)return a(_,$,C,"day");if($>=k)return a(_,$,k,"hour");if($>=f)return a(_,$,f,"minute");if($>=R)return a(_,$,R,"second");return _+" ms"},a=function(_,$,z,B){var G=$>=z*1.5;return Math.round(_/z)+" "+B+(G?"s":"")},R=1000,f=R*60,k=f*60,C=k*24,k0=C*7,h0=C*365.25;k1.exports=function(_,$){$=$||{};var z=typeof _;if(z==="string"&&_.length>0)return b0(_);else if(z==="number"&&isFinite(_))return $.long?y0(_):q0(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))}});var B1=A((l_,b1)=>{var x0=function(_){z.debug=z,z.default=z,z.coerce=Z,z.disable=X,z.enable=G,z.enabled=Q,z.humanize=h1(),z.destroy=W,Object.keys(_).forEach((J)=>{z[J]=_[J]}),z.names=[],z.skips=[],z.formatters={};function $(J){let Y=0;for(let I=0;I<J.length;I++)Y=(Y<<5)-Y+J.charCodeAt(I),Y|=0;return z.colors[Math.abs(Y)%z.colors.length]}z.selectColor=$;function z(J){let Y,I=null,N,U;function M(...O){if(!M.enabled)return;const w=M,H=Number(new Date),L0=H-(Y||H);if(w.diff=L0,w.prev=Y,w.curr=H,Y=H,O[0]=z.coerce(O[0]),typeof O[0]!=="string")O.unshift("%O");let p=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(_1,V0)=>{if(_1==="%%")return"%";p++;const T1=z.formatters[V0];if(typeof T1==="function"){const F0=O[p];_1=T1.call(w,F0),O.splice(p,1),p--}return _1}),z.formatArgs.call(w,O),(w.log||z.log).apply(w,O)}if(M.namespace=J,M.useColors=z.useColors(),M.color=z.selectColor(J),M.extend=B,M.destroy=z.destroy,Object.defineProperty(M,"enabled",{enumerable:!0,configurable:!1,get:()=>{if(I!==null)return I;if(N!==z.namespaces)N=z.namespaces,U=z.enabled(J);return U},set:(O)=>{I=O}}),typeof z.init==="function")z.init(M);return M}function B(J,Y){const I=z(this.namespace+(typeof Y==="undefined"?":":Y)+J);return I.log=this.log,I}function G(J){z.save(J),z.namespaces=J,z.names=[],z.skips=[];let Y;const I=(typeof J==="string"?J:"").split(/[\s,]+/),N=I.length;for(Y=0;Y<N;Y++){if(!I[Y])continue;if(J=I[Y].replace(/\*/g,".*?"),J[0]==="-")z.skips.push(new RegExp("^"+J.slice(1)+"$"));else z.names.push(new RegExp("^"+J+"$"))}}function X(){const J=[...z.names.map(K),...z.skips.map(K).map((Y)=>"-"+Y)].join(",");return z.enable(""),J}function Q(J){if(J[J.length-1]==="*")return!0;let Y,I;for(Y=0,I=z.skips.length;Y<I;Y++)if(z.skips[Y].test(J))return!1;for(Y=0,I=z.names.length;Y<I;Y++)if(z.names[Y].test(J))return!0;return!1}function K(J){return J.toString().substring(2,J.toString().length-2).replace(/\.\*\?$/,"*")}function Z(J){if(J instanceof Error)return J.stack||J.message;return J}function W(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return z.enable(z.load()),z};b1.exports=x0});var y1=A((q1,o)=>{var v0=function(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},m0=function(_){if(_[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+_[0]+(this.useColors?"%c ":" ")+"+"+q1.humanize(this.diff),!this.useColors)return;const $="color: "+this.color;_.splice(1,0,$,"color: inherit");let z=0,B=0;_[0].replace(/%[a-zA-Z%]/g,(G)=>{if(G==="%%")return;if(z++,G==="%c")B=z}),_.splice(B,0,$)},u0=function(_){try{if(_)q1.storage.setItem("debug",_);else q1.storage.removeItem("debug")}catch($){}},d0=function(){let _;try{_=q1.storage.getItem("debug")}catch($){}if(!_&&typeof process!=="undefined"&&"env"in process)_=process.env.DEBUG;return _},g0=function(){try{return localStorage}catch(_){}};q1.formatArgs=m0;q1.save=u0;q1.load=d0;q1.useColors=v0;q1.storage=g0();q1.destroy=(()=>{let _=!1;return()=>{if(!_)_=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}})();q1.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];q1.log=console.debug||console.log||(()=>{});o.exports=B1()(q1);var{formatters:c0}=o.exports;c0.j=function(_){try{return JSON.stringify(_)}catch($){return"[UnexpectedJSONParseError]: "+$.message}}});var v1=A((i_,x1)=>{x1.exports=(_,$)=>{$=$||process.argv;const z=_.startsWith("-")?"":_.length===1?"-":"--",B=$.indexOf(z+_),G=$.indexOf("--");return B!==-1&&(G===-1?!0:B<G)}});var u1=A((n_,m1)=>{var r0=function(_){if(_===0)return!1;return{level:_,hasBasic:!0,has256:_>=2,has16m:_>=3}},e0=function(_){if(h===!1)return 0;if(j("color=16m")||j("color=full")||j("color=truecolor"))return 3;if(j("color=256"))return 2;if(_&&!_.isTTY&&h!==!0)return 0;const $=h?1:0;if(process.platform==="win32"){const z=t0.release().split(".");if(Number(process.versions.node.split(".")[0])>=8&&Number(z[0])>=10&&Number(z[2])>=10586)return Number(z[2])>=14931?3:2;return 1}if("CI"in V){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some((z)=>(z in V))||V.CI_NAME==="codeship")return 1;return $}if("TEAMCITY_VERSION"in V)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(V.TEAMCITY_VERSION)?1:0;if(V.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in V){const z=parseInt((V.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(V.TERM_PROGRAM){case"iTerm.app":return z>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(V.TERM))return 2;if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(V.TERM))return 1;if("COLORTERM"in V)return 1;if(V.TERM==="dumb")return $;return $},G1=function(_){const $=e0(_);return r0($)},t0=import.meta.require("os"),j=v1(),V=process.env,h;if(j("no-color")||j("no-colors")||j("color=false"))h=!1;else if(j("color")||j("colors")||j("color=true")||j("color=always"))h=!0;if("FORCE_COLOR"in V)h=V.FORCE_COLOR.length===0||parseInt(V.FORCE_COLOR,10)!==0;m1.exports={supportsColor:G1,stdout:G1(process.stdout),stderr:G1(process.stderr)}});var l1=A((g1,r)=>{var $_=function(){return"colors"in g1.inspectOpts?Boolean(g1.inspectOpts.colors):__.isatty(process.stderr.fd)},z_=function(_){const{namespace:$,useColors:z}=this;if(z){const B=this.color,G="\x1B[3"+(B<8?B:"8;5;"+B),X=`  ${G};1m${$} \x1B[0m`;_[0]=X+_[0].split("\n").join("\n"+X),_.push(G+"m+"+g1.humanize(this.diff)+"\x1B[0m")}else _[0]=B_()+$+" "+_[0]},B_=function(){if(g1.inspectOpts.hideDate)return"";return(new Date()).toISOString()+" "},G_=function(..._){return process.stderr.write(t.format(..._)+"\n")},J_=function(_){if(_)process.env.DEBUG=_;else delete process.env.DEBUG},X_=function(){return process.env.DEBUG},Q_=function(_){_.inspectOpts={};const $=Object.keys(g1.inspectOpts);for(let z=0;z<$.length;z++)_.inspectOpts[$[z]]=g1.inspectOpts[$[z]]},__=import.meta.require("tty"),t=import.meta.require("util");g1.init=Q_;g1.log=G_;g1.formatArgs=z_;g1.save=J_;g1.load=X_;g1.useColors=$_;g1.destroy=t.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");g1.colors=[6,2,3,4,5,1];try{const _=u1();if(_&&(_.stderr||_).level>=2)g1.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}catch(_){}g1.inspectOpts=Object.keys(process.env).filter((_)=>{return/^debug_/i.test(_)}).reduce((_,$)=>{const z=$.substring(6).toLowerCase().replace(/_([a-z])/g,(G,X)=>{return X.toUpperCase()});let B=process.env[$];if(/^(yes|on|true|enabled)$/i.test(B))B=!0;else if(/^(no|off|false|disabled)$/i.test(B))B=!1;else if(B==="null")B=null;else B=Number(B);return _[z]=B,_},{});r.exports=B1()(g1);var{formatters:d1}=r.exports;d1.o=function(_){return this.inspectOpts.colors=this.useColors,t.inspect(_,this.inspectOpts).split("\n").map(($)=>$.trim()).join(" ")};d1.O=function(_){return this.inspectOpts.colors=this.useColors,t.inspect(_,this.inspectOpts)}});var p1=A((s_,J1)=>{if(typeof process==="undefined"||process.type==="renderer"||!1||process.__nwjs)J1.exports=y1();else J1.exports=l1()});var n1=A((o_,i1)=>{var x;i1.exports=function(){if(!x){try{x=p1()("follow-redirects")}catch(_){}if(typeof x!=="function")x=function(){}}x.apply(null,arguments)}});var r1=A((t_,L1)=>{var T=function(_,$){if(I1.call(this),this._sanitizeOptions(_),this._options=_,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],$)this.on("response",$);var z=this;this._onNativeResponse=function(B){try{z._processResponse(B)}catch(G){z.emit("error",G instanceof Y1?G:new Y1({cause:G}))}},this._performRequest()},s1=function(_){var $={maxRedirects:21,maxBodyLength:10485760},z={};return Object.keys(_).forEach(function(B){var G=B+":",X=z[G]=_[B],Q=$[B]=Object.create(X);function K(W,J,Y){if(w_(W))W=Z1(W);else if(D(W))W=Z1(O1(W));else Y=J,J=t1(W),W={protocol:G};if(m(J))Y=J,J=null;if(J=Object.assign({maxRedirects:$.maxRedirects,maxBodyLength:$.maxBodyLength},W,J),J.nativeProtocols=z,!D(J.host)&&!D(J.hostname))J.hostname="::1";return W1.equal(J.protocol,G,"protocol mismatch"),a1("options",J),new T(J,Y)}function Z(W,J,Y){var I=Q.request(W,J,Y);return I.end(),I}Object.defineProperties(Q,{request:{value:K,configurable:!0,enumerable:!0,writable:!0},get:{value:Z,configurable:!0,enumerable:!0,writable:!0}})}),$},o1=function(){},O1=function(_){var $;if(K1)$=new v(_);else if($=t1(u.parse(_)),!D($.protocol))throw new Q1({input:_});return $},U_=function(_,$){return K1?new v(_,$):O1(u.resolve($,_))},t1=function(_){if(/^\[/.test(_.hostname)&&!/^\[[:0-9a-f]+\]$/i.test(_.hostname))throw new Q1({input:_.href||_});if(/^\[/.test(_.host)&&!/^\[[:0-9a-f]+\](:\d+)?$/i.test(_.host))throw new Q1({input:_.href||_});return _},Z1=function(_,$){var z=$||{};for(var B of L_)z[B]=_[B];if(z.hostname.startsWith("["))z.hostname=z.hostname.slice(1,-1);if(z.port!=="")z.port=Number(z.port);return z.path=z.search?z.pathname+z.search:z.pathname,z},X1=function(_,$){var z;for(var B in $)if(_.test(B))z=$[B],delete $[B];return z===null||typeof z==="undefined"?void 0:String(z).trim()},d=function(_,$,z){function B(G){Error.captureStackTrace(this,this.constructor),Object.assign(this,G||{}),this.code=_,this.message=this.cause?$+": "+this.cause.message:$}return B.prototype=new(z||Error),Object.defineProperties(B.prototype,{constructor:{value:B,enumerable:!1},name:{value:"Error ["+_+"]",enumerable:!1}}),B},A1=function(_,$){for(var z of N1)_.removeListener(z,M1[z]);_.on("error",o1),_.destroy($)},H_=function(_,$){W1(D(_)&&D($));var z=_.length-$.length-1;return z>0&&_[z]==="."&&_.endsWith($)},D=function(_){return typeof _==="string"||_ instanceof String},m=function(_){return typeof _==="function"},P_=function(_){return typeof _==="object"&&"length"in _},w_=function(_){return v&&_ instanceof v},u=import.meta.require("url"),v=u.URL,O_=import.meta.require("http"),A_=import.meta.require("https"),I1=import.meta.require("stream").Writable,W1=import.meta.require("assert"),a1=n1(),K1=!1;try{W1(new v)}catch(_){K1=_.code==="ERR_INVALID_URL"}var L_=["auth","host","hostname","href","path","pathname","port","protocol","query","search","hash"],N1=["abort","aborted","connect","error","socket","timeout"],M1=Object.create(null);N1.forEach(function(_){M1[_]=function($,z,B){this._redirectable.emit(_,$,z,B)}});var Q1=d("ERR_INVALID_URL","Invalid URL",TypeError),Y1=d("ERR_FR_REDIRECTION_FAILURE","Redirected request failed"),V_=d("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded",Y1),F_=d("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),T_=d("ERR_STREAM_WRITE_AFTER_END","write after end"),j_=I1.prototype.destroy||o1;T.prototype=Object.create(I1.prototype);T.prototype.abort=function(){A1(this._currentRequest),this._currentRequest.abort(),this.emit("abort")};T.prototype.destroy=function(_){return A1(this._currentRequest,_),j_.call(this,_),this};T.prototype.write=function(_,$,z){if(this._ending)throw new T_;if(!D(_)&&!P_(_))throw new TypeError("data should be a string, Buffer or Uint8Array");if(m($))z=$,$=null;if(_.length===0){if(z)z();return}if(this._requestBodyLength+_.length<=this._options.maxBodyLength)this._requestBodyLength+=_.length,this._requestBodyBuffers.push({data:_,encoding:$}),this._currentRequest.write(_,$,z);else this.emit("error",new F_),this.abort()};T.prototype.end=function(_,$,z){if(m(_))z=_,_=$=null;else if(m($))z=$,$=null;if(!_)this._ended=this._ending=!0,this._currentRequest.end(null,null,z);else{var B=this,G=this._currentRequest;this.write(_,$,function(){B._ended=!0,G.end(null,null,z)}),this._ending=!0}};T.prototype.setHeader=function(_,$){this._options.headers[_]=$,this._currentRequest.setHeader(_,$)};T.prototype.removeHeader=function(_){delete this._options.headers[_],this._currentRequest.removeHeader(_)};T.prototype.setTimeout=function(_,$){var z=this;function B(Q){Q.setTimeout(_),Q.removeListener("timeout",Q.destroy),Q.addListener("timeout",Q.destroy)}function G(Q){if(z._timeout)clearTimeout(z._timeout);z._timeout=setTimeout(function(){z.emit("timeout"),X()},_),B(Q)}function X(){if(z._timeout)clearTimeout(z._timeout),z._timeout=null;if(z.removeListener("abort",X),z.removeListener("error",X),z.removeListener("response",X),z.removeListener("close",X),$)z.removeListener("timeout",$);if(!z.socket)z._currentRequest.removeListener("socket",G)}if($)this.on("timeout",$);if(this.socket)G(this.socket);else this._currentRequest.once("socket",G);return this.on("socket",B),this.on("abort",X),this.on("error",X),this.on("response",X),this.on("close",X),this};["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(_){T.prototype[_]=function($,z){return this._currentRequest[_]($,z)}});["aborted","connection","socket"].forEach(function(_){Object.defineProperty(T.prototype,_,{get:function(){return this._currentRequest[_]}})});T.prototype._sanitizeOptions=function(_){if(!_.headers)_.headers={};if(_.host){if(!_.hostname)_.hostname=_.host;delete _.host}if(!_.pathname&&_.path){var $=_.path.indexOf("?");if($<0)_.pathname=_.path;else _.pathname=_.path.substring(0,$),_.search=_.path.substring($)}};T.prototype._performRequest=function(){var _=this._options.protocol,$=this._options.nativeProtocols[_];if(!$)throw new TypeError("Unsupported protocol "+_);if(this._options.agents){var z=_.slice(0,-1);this._options.agent=this._options.agents[z]}var B=this._currentRequest=$.request(this._options,this._onNativeResponse);B._redirectable=this;for(var G of N1)B.on(G,M1[G]);if(this._currentUrl=/^\//.test(this._options.path)?u.format(this._options):this._options.path,this._isRedirect){var X=0,Q=this,K=this._requestBodyBuffers;(function Z(W){if(B===Q._currentRequest){if(W)Q.emit("error",W);else if(X<K.length){var J=K[X++];if(!B.finished)B.write(J.data,J.encoding,Z)}else if(Q._ended)B.end()}})()}};T.prototype._processResponse=function(_){var $=_.statusCode;if(this._options.trackRedirects)this._redirects.push({url:this._currentUrl,headers:_.headers,statusCode:$});var z=_.headers.location;if(!z||this._options.followRedirects===!1||$<300||$>=400){_.responseUrl=this._currentUrl,_.redirects=this._redirects,this.emit("response",_),this._requestBodyBuffers=[];return}if(A1(this._currentRequest),_.destroy(),++this._redirectCount>this._options.maxRedirects)throw new V_;var B,G=this._options.beforeRedirect;if(G)B=Object.assign({Host:_.req.getHeader("host")},this._options.headers);var X=this._options.method;if(($===301||$===302)&&this._options.method==="POST"||$===303&&!/^(?:GET|HEAD)$/.test(this._options.method))this._options.method="GET",this._requestBodyBuffers=[],X1(/^content-/i,this._options.headers);var Q=X1(/^host$/i,this._options.headers),K=O1(this._currentUrl),Z=Q||K.host,W=/^\w+:/.test(z)?this._currentUrl:u.format(Object.assign(K,{host:Z})),J=U_(z,W);if(a1("redirecting to",J.href),this._isRedirect=!0,Z1(J,this._options),J.protocol!==K.protocol&&J.protocol!=="https:"||J.host!==Z&&!H_(J.host,Z))X1(/^(?:(?:proxy-)?authorization|cookie)$/i,this._options.headers);if(m(G)){var Y={headers:_.headers,statusCode:$},I={url:W,method:X,headers:B};G(this._options,Y,I),this._sanitizeOptions(this._options)}this._performRequest()};L1.exports=s1({http:O_,https:A_});L1.exports.wrap=s1});var _0=A((r_,e1)=>{var C_=import.meta.require("http"),D_=import.meta.require("https"),g=f1(),e=n(),S_=r1();g=Object.keys(g).map(function(_){return g[_]});var E_={http:C_,https:D_};/*!
 * Array of passes.
 *
 * A `pass` is just a function that is executed on `req, res, options`
 * so that you can easily add new checks while still keeping the base
 * flexible.
 */e1.exports={deleteLength:function _($,z,B){if(($.method==="DELETE"||$.method==="OPTIONS")&&!$.headers["content-length"])$.headers["content-length"]="0",delete $.headers["transfer-encoding"]},timeout:function _($,z,B){if(B.timeout)$.socket.setTimeout(B.timeout)},XHeaders:function _($,z,B){if(!B.xfwd)return;var G=$.isSpdy||e.hasEncryptedConnection($),X={for:$.connection.remoteAddress||$.socket.remoteAddress,port:e.getPort($),proto:G?"https":"http"};["for","port","proto"].forEach(function(Q){$.headers["x-forwarded-"+Q]=($.headers["x-forwarded-"+Q]||"")+($.headers["x-forwarded-"+Q]?",":"")+X[Q]}),$.headers["x-forwarded-host"]=$.headers["x-forwarded-host"]||$.headers.host||""},stream:function _($,z,B,G,X,Q){X.emit("start",$,z,B.target||B.forward);var K=B.followRedirects?S_:E_,Z=K.http,W=K.https;if(B.forward){var J=(B.forward.protocol==="https:"?W:Z).request(e.setupOutgoing(B.ssl||{},B,$,"forward")),Y=U(J,B.forward);if($.on("error",Y),J.on("error",Y),(B.buffer||$).pipe(J),!B.target)return z.end()}var I=(B.target.protocol==="https:"?W:Z).request(e.setupOutgoing(B.ssl||{},B,$));if(I.on("socket",function(M){if(X&&!I.getHeader("expect"))X.emit("proxyReq",I,$,z,B)}),B.proxyTimeout)I.setTimeout(B.proxyTimeout,function(){I.abort()});$.on("aborted",function(){I.abort()});var N=U(I,B.target);$.on("error",N),I.on("error",N);function U(M,O){return function w(H){if($.socket.destroyed&&H.code==="ECONNRESET")return X.emit("econnreset",H,$,z,O),M.abort();if(Q)Q(H,$,z,O);else X.emit("error",H,$,z,O)}}(B.buffer||$).pipe(I),I.on("response",function(M){if(X)X.emit("proxyRes",M,$,z);if(!z.headersSent&&!B.selfHandleResponse){for(var O=0;O<g.length;O++)if(g[O]($,z,M,B))break}if(!z.finished){if(M.on("end",function(){if(X)X.emit("end",$,z,M)}),!B.selfHandleResponse)M.pipe(z)}else if(X)X.emit("end",$,z,M)})}}});var z0=A((e_,$0)=>{var R_=import.meta.require("http"),f_=import.meta.require("https"),q=n();/*!
 * Array of passes.
 *
 * A `pass` is just a function that is executed on `req, socket, options`
 * so that you can easily add new checks while still keeping the base
 * flexible.
 */$0.exports={checkMethodAndHeader:function _($,z){if($.method!=="GET"||!$.headers.upgrade)return z.destroy(),!0;if($.headers.upgrade.toLowerCase()!=="websocket")return z.destroy(),!0},XHeaders:function _($,z,B){if(!B.xfwd)return;var G={for:$.connection.remoteAddress||$.socket.remoteAddress,port:q.getPort($),proto:q.hasEncryptedConnection($)?"wss":"ws"};["for","port","proto"].forEach(function(X){$.headers["x-forwarded-"+X]=($.headers["x-forwarded-"+X]||"")+($.headers["x-forwarded-"+X]?",":"")+G[X]})},stream:function _($,z,B,G,X,Q){var K=function(J,Y){return Object.keys(Y).reduce(function(I,N){var U=Y[N];if(!Array.isArray(U))return I.push(N+": "+U),I;for(var M=0;M<U.length;M++)I.push(N+": "+U[M]);return I},[J]).join("\r\n")+"\r\n\r\n"};if(q.setupSocket(z),G&&G.length)z.unshift(G);var Z=(q.isSSL.test(B.target.protocol)?f_:R_).request(q.setupOutgoing(B.ssl||{},B,$));if(X)X.emit("proxyReqWs",Z,$,z,B,G);return Z.on("error",W),Z.on("response",function(J){if(!J.upgrade)z.write(K("HTTP/"+J.httpVersion+" "+J.statusCode+" "+J.statusMessage,J.headers)),J.pipe(z)}),Z.on("upgrade",function(J,Y,I){if(Y.on("error",W),Y.on("end",function(){X.emit("close",J,Y,I)}),z.on("error",function(){Y.end()}),q.setupSocket(Y),I&&I.length)Y.unshift(I);z.write(K("HTTP/1.1 101 Switching Protocols",J.headers)),Y.pipe(z).pipe(Y),X.emit("open",Y),X.emit("proxySocket",Y)}),Z.end();function W(J){if(Q)Q(J,$,z);else X.emit("error",J,$,z);z.end()}}}});var Z0=A((_7,Y0)=>{var V1=function(_){return function($){return function(z,B){var G=_==="ws"?this.wsPasses:this.webPasses,X=[].slice.call(arguments),Q=X.length-1,K,Z;if(typeof X[Q]==="function")Z=X[Q],Q--;var W=$;if(!(X[Q]instanceof Buffer)&&X[Q]!==B)W=B0({},$),B0(W,X[Q]),Q--;if(X[Q]instanceof Buffer)K=X[Q];if(["target","forward"].forEach(function(Y){if(typeof W[Y]==="string")W[Y]=k_(W[Y])}),!W.target&&!W.forward)return this.emit("error",new Error("Must provide a proper URL as target"));for(var J=0;J<G.length;J++)if(G[J](z,B,W,K,this,Z))break}}},S=function(_){Q0.call(this),_=_||{},_.prependPath=_.prependPath===!1?!1:!0,this.web=this.proxyRequest=V1("web")(_),this.ws=this.proxyWebsocketRequest=V1("ws")(_),this.options=_,this.webPasses=Object.keys(G0).map(function($){return G0[$]}),this.wsPasses=Object.keys(J0).map(function($){return J0[$]}),this.on("error",this.onError,this)},X0=_7,B0=import.meta.require("util")._extend,k_=import.meta.require("url").parse,Q0=H1(),h_=import.meta.require("http"),b_=import.meta.require("https"),G0=_0(),J0=z0();X0.Server=S;X0.createRightProxy=V1;import.meta.require("util").inherits(S,Q0);S.prototype.onError=function(_){if(this.listeners("error").length===1)throw _};S.prototype.listen=function(_,$){var z=this,B=function(G,X){z.web(G,X)};if(this._server=this.options.ssl?b_.createServer(this.options.ssl,B):h_.createServer(B),this.options.ws)this._server.on("upgrade",function(G,X,Q){z.ws(G,X,Q)});return this._server.listen(_,$),this};S.prototype.close=function(_){var $=this;if(this._server)this._server.close(z);function z(){if($._server=null,_)_.apply(null,arguments)}};S.prototype.before=function(_,$,z){if(_!=="ws"&&_!=="web")throw new Error("type must be `web` or `ws`");var B=_==="ws"?this.wsPasses:this.webPasses,G=!1;if(B.forEach(function(X,Q){if(X.name===$)G=Q}),G===!1)throw new Error("No such pass");B.splice(G,0,z)};S.prototype.after=function(_,$,z){if(_!=="ws"&&_!=="web")throw new Error("type must be `web` or `ws`");var B=_==="ws"?this.wsPasses:this.webPasses,G=!1;if(B.forEach(function(X,Q){if(X.name===$)G=Q}),G===!1)throw new Error("No such pass");B.splice(G++,0,z)}});var W0=A(($7,I0)=>{var F1=function(_){return new c(_)},c=Z0().Server;c.createProxyServer=F1;c.createServer=F1;c.createProxy=F1;I0.exports=c});var N0=A((z7,K0)=>{/*!
 * Caron dimonio, con occhi di bragia
 * loro accennando, tutte le raccoglie;
 * batte col remo qualunque s’adagia 
 *
 * Charon the demon, with the eyes of glede,
 * Beckoning to them, collects them all together,
 * Beats with his oar whoever lags behind
 *          
 *          Dante - The Divine Comedy (Canto III)
 */K0.exports=W0()});var A0=P0(N0(),1);import*as O0 from"vite";import y_ from"path";import q_ from"fs-extra";import E from"path";var l={cyan:(..._)=>`\x1B[36m${_.join(" ")}\x1B[0m`,red:(..._)=>`\x1B[31m${_.join(" ")}\x1B[0m`,yellow:(..._)=>`\x1B[33m${_.join(" ")}\x1B[0m`,green:(..._)=>`\x1B[32m${_.join(" ")}\x1B[0m`,blue:(..._)=>`\x1B[34m${_.join(" ")}\x1B[0m`,magenta:(..._)=>`\x1B[35m${_.join(" ")}\x1B[0m`,cyanBright:(..._)=>`\x1B[96m${_.join(" ")}\x1B[0m`,redBright:(..._)=>`\x1B[91m${_.join(" ")}\x1B[0m`,yellowBright:(..._)=>`\x1B[93m${_.join(" ")}\x1B[0m`,greenBright:(..._)=>`\x1B[92m${_.join(" ")}\x1B[0m`,blueBright:(..._)=>`\x1B[94m${_.join(" ")}\x1B[0m`,magentaBright:(..._)=>`\x1B[95m${_.join(" ")}\x1B[0m`,whiteBright:(..._)=>`\x1B[97m${_.join(" ")}\x1B[0m`,gray:(..._)=>`\x1B[90m${_.join(" ")}\x1B[0m`,grey:(..._)=>`\x1B[90m${_.join(" ")}\x1B[0m`,white:(..._)=>`\x1B[37m${_.join(" ")}\x1B[0m`,black:(..._)=>`\x1B[30m${_.join(" ")}\x1B[0m`,blackBright:(..._)=>`\x1B[90m${_.join(" ")}\x1B[0m`,bgCyan:(..._)=>`\x1B[46m${_.join(" ")}\x1B[0m`,bgRed:(..._)=>`\x1B[41m${_.join(" ")}\x1B[0m`,bgYellow:(..._)=>`\x1B[43m${_.join(" ")}\x1B[0m`,bgGreen:(..._)=>`\x1B[42m${_.join(" ")}\x1B[0m`,bgBlue:(..._)=>`\x1B[44m${_.join(" ")}\x1B[0m`,bgMagenta:(..._)=>`\x1B[45m${_.join(" ")}\x1B[0m`,bgCyanBright:(..._)=>`\x1B[106m${_.join(" ")}\x1B[0m`,bgRedBright:(..._)=>`\x1B[101m${_.join(" ")}\x1B[0m`,bgYellowBright:(..._)=>`\x1B[103m${_.join(" ")}\x1B[0m`,bgGreenBright:(..._)=>`\x1B[102m${_.join(" ")}\x1B[0m`,bgBlueBright:(..._)=>`\x1B[104m${_.join(" ")}\x1B[0m`,bgMagentaBright:(..._)=>`\x1B[105m${_.join(" ")}\x1B[0m`,cyanBrightBold:(..._)=>`\x1B[96m\x1B[1m${_.join(" ")}\x1B[0m`,redBrightBold:(..._)=>`\x1B[91m\x1B[1m${_.join(" ")}\x1B[0m`,yellowBrightBold:(..._)=>`\x1B[93m\x1B[1m${_.join(" ")}\x1B[0m`,greenBrightBold:(..._)=>`\x1B[92m\x1B[1m${_.join(" ")}\x1B[0m`,blueBrightBold:(..._)=>`\x1B[94m\x1B[1m${_.join(" ")}\x1B[0m`,magentaBrightBold:(..._)=>`\x1B[95m\x1B[1m${_.join(" ")}\x1B[0m`,whiteBrightBold:(..._)=>`\x1B[97m\x1B[1m${_.join(" ")}\x1B[0m`,grayBrightBold:(..._)=>`\x1B[90m\x1B[1m${_.join(" ")}\x1B[0m`,greyBrightBold:(..._)=>`\x1B[90m\x1B[1m${_.join(" ")}\x1B[0m`,whiteBold:(..._)=>`\x1B[37m\x1B[1m${_.join(" ")}\x1B[0m`,blackBold:(..._)=>`\x1B[30m\x1B[1m${_.join(" ")}\x1B[0m`,blackBrightBold:(..._)=>`\x1B[90m\x1B[1m${_.join(" ")}\x1B[0m`};async function M0(){console.warn("Building Vite config using base:",l.yellowBrightBold(E.resolve("vite.config.ts")));let _=await(await import(E.resolve("vite.config.ts"))).default();const $=await q_.readJSONSync(E.resolve("tsconfig.json"));return _={..._,logLevel:"info",mode:"development",root:E.resolve("app/client"),clearScreen:!0,build:{..._.build,cssCodeSplit:!0,outDir:E.resolve("build/client"),sourcemap:!0,rollupOptions:{output:{manualChunks:void 0}},watch:{..._.build?.watch,include:[...(Array.isArray(_.build?.watch?.include)?_.build?.watch?.include:[_.build?.watch?.include])||[],...$?.include?.map((z)=>E.resolve(z))||[],"tsconfig.json"].filter(Boolean)},emptyOutDir:!0},resolve:{alias:{config:E.resolve("app/config")}}},_}async function W7(_,$,z,B=[]){console.warn(l.bgMagentaBright("Vite: Checking environment...","development")),console.warn(l.bgMagentaBright("Starting Vite proxy for HMR..."));let G=Number(process.env.VITE_PORT||25555);if(isNaN(G))G=25555;const X=A0.default.createProxyServer({target:{host:"localhost",port:G}});_.get("*",...B,(W,J)=>X.web(W,J)),$.on("upgrade",(W,J,Y)=>{if(W.url=="/")X.ws(W,J,Y)});const Q=await M0(),K={root:y_.resolve("app/client"),server:{port:G}};(await O0.createServer({...Q,...K})).listen()}export{W7 as useVite};
